{"pageProps":{"data":{"count":610,"rows":[{"id":225,"title":"How to lazy load images in ListView in Android","slug":"how-to-lazy-load-images-in-listview-in-android-1657387332835","postType":"QUESTION","createdAt":"2022-07-09T17:22:12.000Z","updatedAt":"2022-07-09T17:22:12.000Z","tags":[{"id":1527,"name":"listview","slug":"listview","createdAt":"2022-07-09T17:22:12.000Z","updatedAt":"2022-07-09T17:22:12.000Z","Questions_Tags":{"questionId":225,"tagId":1527}},{"id":1529,"name":"universal-image-loader","slug":"universal-image-loader","createdAt":"2022-07-09T17:22:12.000Z","updatedAt":"2022-07-09T17:22:12.000Z","Questions_Tags":{"questionId":225,"tagId":1529}}]},{"id":224,"title":"How do I make Git forget about a file that was tracked, but is now in .gitignore?","slug":"how-do-i-make-git-forget-about-a-file-that-was-tracked-but-is-now-in-.gitignore-1657387328843","postType":"QUESTION","createdAt":"2022-07-09T17:22:08.000Z","updatedAt":"2022-07-09T17:22:08.000Z","tags":[{"id":1522,"name":"git","slug":"git","createdAt":"2022-07-09T17:22:08.000Z","updatedAt":"2022-07-09T17:22:08.000Z","Questions_Tags":{"questionId":224,"tagId":1522}},{"id":1523,"name":"gitignore","slug":"gitignore","createdAt":"2022-07-09T17:22:08.000Z","updatedAt":"2022-07-09T17:22:08.000Z","Questions_Tags":{"questionId":224,"tagId":1523}},{"id":1524,"name":"git-rm","slug":"git-rm","createdAt":"2022-07-09T17:22:08.000Z","updatedAt":"2022-07-09T17:22:08.000Z","Questions_Tags":{"questionId":224,"tagId":1524}}]},{"id":223,"title":"How do I correctly clone a JavaScript object?","slug":"how-do-i-correctly-clone-a-javascript-object-1657387325850","postType":"QUESTION","createdAt":"2022-07-09T17:22:05.000Z","updatedAt":"2022-07-09T17:22:05.000Z","tags":[{"id":1521,"name":"javascript-objects","slug":"javascript-objects","createdAt":"2022-07-09T17:22:05.000Z","updatedAt":"2022-07-09T17:22:05.000Z","Questions_Tags":{"questionId":223,"tagId":1521}}]},{"id":222,"title":"Accessing nested JavaScript objects and arrays by string path","slug":"accessing-nested-javascript-objects-and-arrays-by-string-path-1657387321754","postType":"QUESTION","createdAt":"2022-07-09T17:22:01.000Z","updatedAt":"2022-07-09T17:22:01.000Z","tags":[{"id":1517,"name":"path","slug":"path","createdAt":"2022-07-09T17:22:01.000Z","updatedAt":"2022-07-09T17:22:01.000Z","Questions_Tags":{"questionId":222,"tagId":1517}}]},{"id":221,"title":"How do you use bcrypt for hashing passwords in PHP? [duplicate]","slug":"how-do-you-use-bcrypt-for-hashing-passwords-in-php-duplicate-1657387318517","postType":"QUESTION","createdAt":"2022-07-09T17:21:58.000Z","updatedAt":"2022-07-09T17:21:58.000Z","tags":[{"id":1512,"name":"passwords","slug":"passwords","createdAt":"2022-07-09T17:21:58.000Z","updatedAt":"2022-07-09T17:21:58.000Z","Questions_Tags":{"questionId":221,"tagId":1512}},{"id":1513,"name":"cryptography","slug":"cryptography","createdAt":"2022-07-09T17:21:58.000Z","updatedAt":"2022-07-09T17:21:58.000Z","Questions_Tags":{"questionId":221,"tagId":1513}},{"id":1514,"name":"password-protection","slug":"password-protection","createdAt":"2022-07-09T17:21:58.000Z","updatedAt":"2022-07-09T17:21:58.000Z","Questions_Tags":{"questionId":221,"tagId":1514}},{"id":1515,"name":"bcrypt","slug":"bcrypt","createdAt":"2022-07-09T17:21:58.000Z","updatedAt":"2022-07-09T17:21:58.000Z","Questions_Tags":{"questionId":221,"tagId":1515}}]}]},"answers":{"221":["\n&lt;p&gt;&lt;code&gt;bcrypt&lt;/code&gt; is a hashing algorithm which is scalable with hardware (via a configurable number of rounds). Its slowness and multiple rounds ensures that an attacker must deploy massive funds and hardware to be able to crack your passwords. Add to that per-password &lt;a href=&quot;https://en.wikipedia.org/wiki/Salt_%28cryptography%29&quot; rel=&quot;noreferrer&quot;&gt;salts&lt;/a&gt; (&lt;code&gt;bcrypt&lt;/code&gt; REQUIRES salts) and you can be sure that an attack is virtually unfeasible without either ludicrous amount of funds or hardware.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;bcrypt&lt;/code&gt; uses the &lt;em&gt;Eksblowfish&lt;/em&gt; algorithm to hash passwords. While the encryption phase of &lt;em&gt;Eksblowfish&lt;/em&gt; and &lt;em&gt;Blowfish&lt;/em&gt; are exactly the same, the key schedule phase of &lt;em&gt;Eksblowfish&lt;/em&gt; ensures that any subsequent state depends on both salt and key (user password), and no state can be precomputed without the knowledge of both. &lt;strong&gt;Because of this key difference, &lt;code&gt;bcrypt&lt;/code&gt; is a one-way hashing algorithm.&lt;/strong&gt; You cannot retrieve the plain text password without already knowing the salt, rounds &lt;strong&gt;and key&lt;/strong&gt; (password). [&lt;a href=&quot;http://www.usenix.org/events/usenix99/provos/provos_html/node4.html&quot; rel=&quot;noreferrer&quot;&gt;Source&lt;/a&gt;]&lt;/p&gt;\n\n&lt;h1&gt;How to use bcrypt:&lt;/h1&gt;\n\n&lt;h2&gt;Using PHP &amp;gt;= 5.5-DEV&lt;/h2&gt;\n\n&lt;p&gt;Password hashing functions &lt;a href=&quot;http://php.net/password_hash&quot; rel=&quot;noreferrer&quot;&gt;have now been built directly into PHP &amp;gt;= 5.5&lt;/a&gt;. You may now use &lt;a href=&quot;http://php.net/password_hash&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;password_hash()&lt;/code&gt;&lt;/a&gt; to create a &lt;code&gt;bcrypt&lt;/code&gt; hash of any password:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?php&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Usage 1:&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;rasmuslerdorf&apos;&lt;/span&gt;, PASSWORD_DEFAULT).&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;// $2y$10$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// For example:&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// $2y$10$.vGA1O9wmRjrwAVXD98HNOgsNpDczlqm3Jq7KnEd1rVAGv3Fykk1a&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Usage 2:&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$options&lt;/span&gt; = [\n  &lt;span class=&quot;hljs-string&quot;&gt;&apos;cost&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;\n];\n&lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;rasmuslerdorf&apos;&lt;/span&gt;, PASSWORD_BCRYPT, &lt;span class=&quot;hljs-variable&quot;&gt;$options&lt;/span&gt;).&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;// $2y$11$6DP.V0nO7YI3iSki4qog6OQI5eiO6Jnjsqg7vdnb.JgGIsxniOn4C&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To verify a user provided password against an existing hash, you may use the &lt;a href=&quot;http://php.net/password_verify&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;password_verify()&lt;/code&gt;&lt;/a&gt; as such:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?php&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// See the password_hash() example to see where this came from.&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;$2y$07$BCryptRequires22Chrcte/VlQH0piJtjXl.0t1XkA8pw9dMXTpOq&apos;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_verify&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;rasmuslerdorf&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;)) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;Password is valid!&apos;&lt;/span&gt;;\n} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;Invalid password.&apos;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h2&gt;Using PHP &amp;gt;= 5.3.7, &amp;lt; 5.5-DEV (also RedHat PHP &amp;gt;= 5.3.3)&lt;/h2&gt;\n\n&lt;p&gt;There is a &lt;a href=&quot;https://github.com/ircmaxell/password_compat&quot; rel=&quot;noreferrer&quot;&gt;compatibility library&lt;/a&gt; on &lt;a href=&quot;http://en.wikipedia.org/wiki/GitHub&quot; rel=&quot;noreferrer&quot;&gt;GitHub&lt;/a&gt; created based on the source code of the above functions originally written in C, which  provides the same functionality. Once the compatibility library is installed, usage is the same as above (minus the shorthand array notation if you are still on the 5.3.x branch).&lt;/p&gt;\n\n&lt;h2&gt;Using PHP &amp;lt; 5.3.7 &lt;em&gt;(DEPRECATED)&lt;/em&gt;&lt;/h2&gt;\n\n&lt;p&gt;You can use &lt;code&gt;crypt()&lt;/code&gt; function to generate bcrypt hashes of input strings. This class can automatically generate salts and verify existing hashes against an input. &lt;strong&gt;If you are using a version of PHP higher or equal to 5.3.7, it is highly recommended you use the built-in function or the compat library&lt;/strong&gt;. This alternative is provided only for historical purposes.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Bcrypt&lt;/span&gt;&lt;/span&gt;{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$rounds&lt;/span&gt;;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;__construct&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$rounds&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (CRYPT_BLOWFISH != &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Exception&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;bcrypt not supported in this installation. See http://php.net/crypt&quot;&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;rounds = &lt;span class=&quot;hljs-variable&quot;&gt;$rounds&lt;/span&gt;;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;hash&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$input&lt;/span&gt;&lt;/span&gt;)&lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;crypt&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$input&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$this&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;getSalt&lt;/span&gt;());\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;strlen&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;) &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;)\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;verify&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$input&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$existingHash&lt;/span&gt;&lt;/span&gt;)&lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;crypt&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$input&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$existingHash&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; === &lt;span class=&quot;hljs-variable&quot;&gt;$existingHash&lt;/span&gt;;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;getSalt&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$salt&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;sprintf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;$2a$%02d$&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$this&lt;/span&gt;-&amp;gt;rounds);\n\n    &lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;getRandomBytes&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-variable&quot;&gt;$salt&lt;/span&gt; .= &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;encodeBytes&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$salt&lt;/span&gt;;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$randomState&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;getRandomBytes&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$count&lt;/span&gt;&lt;/span&gt;)&lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;function_exists&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;openssl_random_pseudo_bytes&apos;&lt;/span&gt;) &amp;amp;&amp;amp;\n        (&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;strtoupper&lt;/span&gt;(&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;substr&lt;/span&gt;(PHP_OS, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;)) !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;WIN&apos;&lt;/span&gt;)) { &lt;span class=&quot;hljs-comment&quot;&gt;// OpenSSL is slow on Windows&lt;/span&gt;\n      &lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;openssl_random_pseudo_bytes&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$count&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;is_readable&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/dev/urandom&apos;&lt;/span&gt;) &amp;amp;&amp;amp;\n       (&lt;span class=&quot;hljs-variable&quot;&gt;$hRand&lt;/span&gt; = @&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;fopen&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/dev/urandom&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;rb&apos;&lt;/span&gt;)) !== &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;fread&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$hRand&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$count&lt;/span&gt;);\n      &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;fclose&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$hRand&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;strlen&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt;) &amp;lt; &lt;span class=&quot;hljs-variable&quot;&gt;$count&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;randomState === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;randomState = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;microtime&lt;/span&gt;();\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;function_exists&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;getmypid&apos;&lt;/span&gt;)) {\n          &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;randomState .= &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;getmypid&lt;/span&gt;();\n        }\n      }\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt; &amp;lt; &lt;span class=&quot;hljs-variable&quot;&gt;$count&lt;/span&gt;; &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt; += &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;randomState = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;md5&lt;/span&gt;(&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;microtime&lt;/span&gt;() . &lt;span class=&quot;hljs-variable&quot;&gt;$this&lt;/span&gt;-&amp;gt;randomState);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (PHP_VERSION &amp;gt;= &lt;span class=&quot;hljs-string&quot;&gt;&apos;5&apos;&lt;/span&gt;) {\n          &lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt; .= &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;md5&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$this&lt;/span&gt;-&amp;gt;randomState, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n          &lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt; .= &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;pack&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;H*&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;md5&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$this&lt;/span&gt;-&amp;gt;randomState));\n        }\n      }\n\n      &lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$count&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$bytes&lt;/span&gt;;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;encodeBytes&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$input&lt;/span&gt;&lt;/span&gt;)&lt;/span&gt;{\n    &lt;span class=&quot;hljs-comment&quot;&gt;// The following is code from the PHP Password Hashing Framework&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable&quot;&gt;$itoa64&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&apos;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-variable&quot;&gt;$output&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;do&lt;/span&gt; {\n      &lt;span class=&quot;hljs-variable&quot;&gt;$c1&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;ord&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$input&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;++]);\n      &lt;span class=&quot;hljs-variable&quot;&gt;$output&lt;/span&gt; .= &lt;span class=&quot;hljs-variable&quot;&gt;$itoa64&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$c1&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;];\n      &lt;span class=&quot;hljs-variable&quot;&gt;$c1&lt;/span&gt; = (&lt;span class=&quot;hljs-variable&quot;&gt;$c1&lt;/span&gt; &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0x03&lt;/span&gt;) &amp;lt;&amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt; &amp;gt;= &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-variable&quot;&gt;$output&lt;/span&gt; .= &lt;span class=&quot;hljs-variable&quot;&gt;$itoa64&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$c1&lt;/span&gt;];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n      }\n\n      &lt;span class=&quot;hljs-variable&quot;&gt;$c2&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;ord&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$input&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;++]);\n      &lt;span class=&quot;hljs-variable&quot;&gt;$c1&lt;/span&gt; |= &lt;span class=&quot;hljs-variable&quot;&gt;$c2&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;\n      &lt;span class=&quot;hljs-variable&quot;&gt;$output&lt;/span&gt; .= &lt;span class=&quot;hljs-variable&quot;&gt;$itoa64&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$c1&lt;/span&gt;];\n      &lt;span class=&quot;hljs-variable&quot;&gt;$c1&lt;/span&gt; = (&lt;span class=&quot;hljs-variable&quot;&gt;$c2&lt;/span&gt; &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0x0f&lt;/span&gt;) &amp;lt;&amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;;\n\n      &lt;span class=&quot;hljs-variable&quot;&gt;$c2&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;ord&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$input&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;++]);\n      &lt;span class=&quot;hljs-variable&quot;&gt;$c1&lt;/span&gt; |= &lt;span class=&quot;hljs-variable&quot;&gt;$c2&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;;\n      &lt;span class=&quot;hljs-variable&quot;&gt;$output&lt;/span&gt; .= &lt;span class=&quot;hljs-variable&quot;&gt;$itoa64&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$c1&lt;/span&gt;];\n      &lt;span class=&quot;hljs-variable&quot;&gt;$output&lt;/span&gt; .= &lt;span class=&quot;hljs-variable&quot;&gt;$itoa64&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$c2&lt;/span&gt; &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0x3f&lt;/span&gt;];\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$output&lt;/span&gt;;\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You can use this code like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$bcrypt&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Bcrypt&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$bcrypt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;hash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;password&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$isGood&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$bcrypt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;verify&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;password&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Alternatively, you may also use the &lt;a href=&quot;http://www.openwall.com/phpass/&quot; rel=&quot;noreferrer&quot;&gt;Portable PHP Hashing Framework&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;So, you want to use bcrypt? &lt;strong&gt;Awesome!&lt;/strong&gt; However, like other areas of cryptography, you shouldn&apos;t be doing it yourself. If you need to worry about anything like managing keys, or storing salts or generating random numbers, you&apos;re doing it wrong.&lt;/p&gt;\n\n&lt;p&gt;The reason is simple: it&apos;s so trivially easy to &lt;a href=&quot;http://blog.ircmaxell.com/2012/12/seven-ways-to-screw-up-bcrypt.html&quot; rel=&quot;noreferrer&quot;&gt;screw up bcrypt&lt;/a&gt;. In fact, if you look at almost every piece of code on this page, you&apos;ll notice that it&apos;s violating at least one of these common problems.&lt;/p&gt;\n\n&lt;h1&gt;Face It, Cryptography is hard.&lt;/h1&gt;\n\n&lt;p&gt;Leave it for the experts. Leave it for people whose job it is to maintain these libraries. If you need to make a decision, you&apos;re doing it wrong.&lt;/p&gt;\n\n&lt;p&gt;Instead, just use a library. Several exist depending on your requirements.&lt;/p&gt;\n\n&lt;h1&gt;Libraries&lt;/h1&gt;\n\n&lt;p&gt;Here is a breakdown of some of the more common APIs.&lt;/p&gt;\n\n&lt;h2&gt;PHP 5.5 API - (Available for 5.3.7+)&lt;/h2&gt;\n\n&lt;p&gt;Starting in PHP 5.5, a new API for hashing passwords is being introduced. There is also a shim compatibility library maintained (by me) for 5.3.7+. This has the benefit of being a peer-reviewed and &lt;em&gt;simple&lt;/em&gt; to use implementation.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;register&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;, PASSWORD_BCRYPT);\n    &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;save&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;login&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;loadHashByUsername&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_verify&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;)) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;//login&lt;/span&gt;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// failure&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Really, it&apos;s aimed to be extremely simple.&lt;/p&gt;\n\n&lt;p&gt;Resources:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Documentation: &lt;a href=&quot;http://php.net/password&quot; rel=&quot;noreferrer&quot;&gt;on PHP.net&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;Compatibility Library: &lt;a href=&quot;https://github.com/ircmaxell/password_compat&quot; rel=&quot;noreferrer&quot;&gt;on GitHub&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;PHP&apos;s RFC: &lt;a href=&quot;http://wiki.php.net/rfc/password_hash&quot; rel=&quot;noreferrer&quot;&gt;on wiki.php.net&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;Zend\\Crypt\\Password\\Bcrypt (5.3.2+)&lt;/h2&gt;\n\n&lt;p&gt;This is another API that&apos;s similar to the PHP 5.5 one, and does a similar purpose. &lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;register&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$bcrypt&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Zend\\Crypt\\Password\\Bcrypt&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$bcrypt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;create&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;);\n    &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;save&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$user&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;login&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;loadHashByUsername&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable&quot;&gt;$bcrypt&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Zend\\Crypt\\Password\\Bcrypt&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$bcrypt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;verify&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;)) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;//login&lt;/span&gt;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// failure&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Resources:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Documentation: &lt;a href=&quot;http://framework.zend.com/manual/2.0/en/modules/zend.crypt.password.html&quot; rel=&quot;noreferrer&quot;&gt;on Zend&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;Blog Post: &lt;a href=&quot;http://websec.io/2013/01/21/Password-Hashing-with-Zend-Crypt.html&quot; rel=&quot;noreferrer&quot;&gt;Password Hashing With Zend Crypt&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;PasswordLib&lt;/h2&gt;\n\n&lt;p&gt;This is a slightly different approach to password hashing. Rather than simply supporting bcrypt, PasswordLib supports a large number of hashing algorithms. It&apos;s mainly useful in contexts where you need to support compatibility with legacy and disparate systems that may be outside of your control. It supports a large number of hashing algorithms. And is supported 5.3.2+&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;register&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$lib&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PasswordLib\\PasswordLib&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$lib&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;createPasswordHash&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;$2y$&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;cost&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;));\n    &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;save&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$user&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;login&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;loadHashByUsername&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable&quot;&gt;$lib&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PasswordLib\\PasswordLib&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$lib&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;verifyPasswordHash&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;)) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;//login&lt;/span&gt;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// failure&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;References:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Source Code / Documentation: &lt;a href=&quot;https://github.com/ircmaxell/PHP-PasswordLib&quot; rel=&quot;noreferrer&quot;&gt;GitHub&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;PHPASS&lt;/h2&gt;\n\n&lt;p&gt;This is a layer that does support bcrypt, but also supports a fairly strong algorithm that&apos;s useful if you do not have access to PHP &amp;gt;= 5.3.2... It actually supports PHP 3.0+ (although not with bcrypt).&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;register&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$phpass&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PasswordHash&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$phpass&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;HashPassword&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;);\n    &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;save&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$user&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;login&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;loadHashByUsername&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable&quot;&gt;$phpass&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PasswordHash&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$phpass&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;CheckPassword&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;)) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;//login&lt;/span&gt;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// failure&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Resources&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Code: &lt;a href=&quot;http://cvsweb.openwall.com/cgi/cvsweb.cgi/projects/phpass/PasswordHash.php?rev=1.8;content-type=text%2Fplain&quot; rel=&quot;noreferrer&quot;&gt;cvsweb&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;Project Site: &lt;a href=&quot;http://www.openwall.com/phpass/&quot; rel=&quot;noreferrer&quot;&gt;on OpenWall&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;A review of the &amp;lt; 5.3.0 algorithm: &lt;a href=&quot;https://stackoverflow.com/questions/16042128/is-this-a-good-hashing-password-function-in-php-if-not-why/16044003#16044003&quot;&gt;on StackOverflow&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Don&apos;t use the PHPASS alternatives that are not hosted on openwall, they are different projects!!!&lt;/p&gt;\n\n&lt;h1&gt;About BCrypt&lt;/h1&gt;\n\n&lt;p&gt;If you notice, every one of these libraries returns a single string. That&apos;s because of how BCrypt works internally. And there are a TON of answers about that. Here are a selection that I&apos;ve written, that I won&apos;t copy/paste here, but link to:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/4948322/fundamental-difference-between-hashing-and-encryption-algorithms/4948393#4948393&quot;&gt;Fundamental Difference Between Hashing And Encryption Algorithms&lt;/a&gt; - Explaining the terminology and some basic information about them.&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/7523625/is-there-a-way-to-reverse-a-hash-without-rainbow-tables/7691164#7691164&quot;&gt;About reversing hashes without rainbow tables&lt;/a&gt; - Basically why we should use bcrypt in the first place...&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/7350648/storing-bcrypt-hashes/7350710#7350710&quot;&gt;Storing bcrypt Hashes&lt;/a&gt; - basically why is the salt and algorithm included in the hash result.&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/15662729/how-to-continuously-keep-the-number-of-bcrypt-rounds-relevant-to-the-current-yea/15663892#15663892&quot;&gt;How to update the cost of bcrypt hashes&lt;/a&gt; - basically how to choose and then maintain the cost of the bcrypt hash.&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/16594613/how-to-hash-long-passwords-72-characters-with-blowfish/16597402#16597402&quot;&gt;How to hash long passwords with bcrypt&lt;/a&gt; - explaining the 72 character password limit of bcrypt.&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/16280194/php-crypt-for-password-hashing-blowfish-produces-weird-output/16280909#16280909&quot;&gt;How bcrypt uses salts&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/16891729/best-practices-salting-peppering-passwords/16896216#16896216&quot;&gt;Best practices of salting and peppering passwords&lt;/a&gt; - Basically, don&apos;t use a &quot;pepper&quot;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/8841719/update-old-stored-md5-passwords-in-php-to-increase-security/8842142#8842142&quot;&gt;Migrating old &lt;code&gt;md5&lt;/code&gt; passwords to bcrypt&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h1&gt;Wrap Up&lt;/h1&gt;\n\n&lt;p&gt;There are many different choices. Which you choose is up to you. However, I would &lt;strong&gt;HIGHLY&lt;/strong&gt; recommend that you use one of the above libraries for handling this for you. &lt;/p&gt;\n\n&lt;p&gt;Again, if you&apos;re using &lt;code&gt;crypt()&lt;/code&gt; directly, you&apos;re probably doing something wrong. If your code is using &lt;code&gt;hash()&lt;/code&gt; (or &lt;code&gt;md5()&lt;/code&gt; or &lt;code&gt;sha1()&lt;/code&gt;) directly, you&apos;re almost definitely doing something wrong.&lt;/p&gt;\n\n&lt;p&gt;Just use a library...&lt;/p&gt;\n    ","\n&lt;p&gt;You&apos;ll get a lot of information in &lt;em&gt;&lt;a href=&quot;http://www.securityfocus.com/blogs/262&quot; rel=&quot;noreferrer&quot;&gt;Enough With The Rainbow Tables: What You Need To Know About Secure Password Schemes&lt;/a&gt;&lt;/em&gt; or &lt;em&gt;&lt;a href=&quot;http://www.openwall.com/phpass/&quot; rel=&quot;noreferrer&quot;&gt;Portable PHP password hashing framework&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;The goal is to hash the password with something slow, so someone getting your password database will die trying to brute force it (a 10&amp;nbsp;ms delay to check a password is nothing for you, a lot for someone trying to brute force it). &lt;a href=&quot;https://en.wikipedia.org/wiki/Bcrypt&quot; rel=&quot;noreferrer&quot;&gt;Bcrypt&lt;/a&gt; is slow and can be used with a parameter to choose how slow it is.&lt;/p&gt;\n    ","\n&lt;p&gt;You can create a one-way hash with bcrypt using PHP&apos;s &lt;code&gt;crypt()&lt;/code&gt; function and passing in an appropriate Blowfish salt. The most important of the whole equation is that A) the algorithm hasn&apos;t been compromised and B) &lt;strong&gt;you properly salt each password&lt;/strong&gt;. Don&apos;t use an application-wide salt; that opens up your entire application to attack from a single set of Rainbow tables. &lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;http://php.net/manual/en/function.crypt.php&quot; rel=&quot;noreferrer&quot;&gt;PHP - Crypt Function&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;hr&gt;\n\n&lt;p&gt;Edit: 2013.01.15 - If your server will support it, use &lt;a href=&quot;https://stackoverflow.com/a/14274045/492983&quot;&gt;martinstoeckli&apos;s solution&lt;/a&gt; instead.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Everyone wants to make this more complicated than it is. The crypt() function does most of the work.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;blowfishCrypt&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;,&lt;span class=&quot;hljs-variable&quot;&gt;$cost&lt;/span&gt;&lt;/span&gt;)\n&lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$chars&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-variable&quot;&gt;$salt&lt;/span&gt;=&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;sprintf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;$2y$%02d$&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-variable&quot;&gt;$cost&lt;/span&gt;);\n&lt;span class=&quot;hljs-comment&quot;&gt;//For PHP &amp;lt; PHP 5.3.7 use this instead&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//    $salt=sprintf(&apos;$2a$%02d$&apos;,$cost);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Create a 22 character salt -edit- 2013.01.15 - replaced rand with mt_rand&lt;/span&gt;\n    &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;mt_srand&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;22&lt;/span&gt;;&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;++) &lt;span class=&quot;hljs-variable&quot;&gt;$salt&lt;/span&gt;.=&lt;span class=&quot;hljs-variable&quot;&gt;$chars&lt;/span&gt;[&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;mt_rand&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;63&lt;/span&gt;)];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;crypt&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;,&lt;span class=&quot;hljs-variable&quot;&gt;$salt&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Example:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;=&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;blowfishCrypt&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;password&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;//This creates the hash&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;=&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;blowfishCrypt&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;password&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;//This creates a more secure hash&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;crypt&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;password&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;)==&lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt;){ &lt;span class=&quot;hljs-comment&quot;&gt;/*ok*/&lt;/span&gt; } &lt;span class=&quot;hljs-comment&quot;&gt;//This checks a password&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I know it should be obvious, but please don&apos;t use &apos;password&apos; as your password.&lt;/p&gt;\n    ","\n&lt;p&gt;Version 5.5 of PHP will have built-in support for BCrypt, the functions &lt;a href=&quot;http://php.net/manual/en/function.password-hash.php&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;password_hash()&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;http://php.net/manual/en/function.password-verify.php&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;password_verify()&lt;/code&gt;&lt;/a&gt;. Actually these are just wrappers around the function &lt;a href=&quot;http://php.net/manual/en/function.crypt.php&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;crypt()&lt;/code&gt;&lt;/a&gt;, and shall make it easier to use it correctly. It takes care of the generation of a safe random salt, and provides good default values.&lt;/p&gt;\n\n&lt;p&gt;The easiest way to use this functions will be:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$hashToStoreInDb&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;, PASSWORD_BCRYPT);\n&lt;span class=&quot;hljs-variable&quot;&gt;$isPasswordCorrect&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_verify&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$existingHashFromDb&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This code will hash the password with BCrypt (algorithm &lt;code&gt;2y&lt;/code&gt;), generates a random salt from the OS random source, and uses the default cost parameter (at the moment this is 10). The second line checks, if the user entered password matches an already stored hash-value.&lt;/p&gt;\n\n&lt;p&gt;Should you want to change the cost parameter, you can do it like this, increasing the cost parameter by 1, doubles the needed time to calculate the hash value:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;, PASSWORD_BCRYPT, &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;cost&quot;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;));\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;In contrast to the &lt;code&gt;&quot;cost&quot;&lt;/code&gt; parameter, it is best to omit the &lt;code&gt;&quot;salt&quot;&lt;/code&gt; parameter, because the function already does its best to create a cryptographically safe salt.&lt;/p&gt;\n\n&lt;p&gt;For PHP version 5.3.7 and later, there exists a &lt;a href=&quot;https://github.com/ircmaxell/password_compat/blob/master/lib/password.php&quot; rel=&quot;noreferrer&quot;&gt;compatibility pack&lt;/a&gt;, from the same author that made the &lt;code&gt;password_hash()&lt;/code&gt; function. For PHP versions before 5.3.7 there is no support for &lt;code&gt;crypt()&lt;/code&gt; with &lt;code&gt;2y&lt;/code&gt;, the unicode safe BCrypt algorithm. One could replace it instead with &lt;code&gt;2a&lt;/code&gt;, which is the best alternative for earlier PHP versions.&lt;/p&gt;\n    ","\n&lt;p&gt;Current thinking: hashes should be the slowest available, not the fastest possible. This suppresses &lt;a href=&quot;http://en.wikipedia.org/wiki/Rainbow_table&quot; rel=&quot;noreferrer&quot;&gt;rainbow table&lt;/a&gt; attacks.&lt;/p&gt;\n\n&lt;p&gt;Also related, but precautionary: An attacker should never have unlimited access to your login screen. To prevent that: Set up an IP address tracking table that records every hit along with the URI. If more than 5 attempts to login come from the same IP address in any five minute period, block with explanation. A secondary approach is to have a two-tiered password scheme, like banks do. Putting a lock-out for failures on the second pass boosts security.&lt;/p&gt;\n\n&lt;p&gt;Summary: slow down the attacker by using time-consuming hash functions. Also, block on too many accesses to your login, and add a second password tier.&lt;/p&gt;\n    ","\n&lt;p&gt;Here&apos;s an updated answer to this old question!&lt;/p&gt;\n\n&lt;p&gt;The right way to hash passwords in PHP since 5.5 is with &lt;a href=&quot;https://www.php.net/manual/en/function.password-hash.php&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;password_hash()&lt;/code&gt;&lt;/a&gt;, and the right way to verify them is with &lt;a href=&quot;https://www.php.net/manual/en/function.password-verify.php&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;password_verify()&lt;/code&gt;&lt;/a&gt;, and this is still true in PHP 8.0. These functions use bcrypt hashes by default, but other stronger algorithms have been added. You can alter the work factor (effectively how &quot;strong&quot; the encryption is) via the &lt;code&gt;password_hash&lt;/code&gt; parameters.&lt;/p&gt;\n\n&lt;p&gt;However, while it&apos;s still plenty strong enough, &lt;strong&gt;bcrypt is no longer considered state-of-the-art&lt;/strong&gt;; a better set of password hash algorithms has arrived called &lt;a href=&quot;https://en.wikipedia.org/wiki/Argon2&quot; rel=&quot;nofollow noreferrer&quot;&gt;Argon2&lt;/a&gt;, with Argon2i, Argon2d, and Argon2id variants. The difference between them (as described &lt;a href=&quot;https://www.cryptolux.org/index.php/Argon2&quot; rel=&quot;nofollow noreferrer&quot;&gt;here&lt;/a&gt;):&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Argon2 has one primary variant: Argon2id, and two supplementary variants: Argon2d and Argon2i. Argon2d uses data-depending memory access, which makes it suitable for cryptocurrencies and proof-of-work applications with no threats from side-channel timing attacks. Argon2i uses data-independent memory access, which is preferred for password hashing and password-based key derivation. Argon2id works as Argon2i for the first half of the first iteration over the memory, and as Argon2d for the rest, thus providing both side-channel attack protection and brute-force cost savings due to time-memory tradeoffs.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Argon2i support was added in PHP 7.2, and you request it like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;mypassword&apos;&lt;/span&gt;, PASSWORD_ARGON2I);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and Argon2id support was added in PHP 7.3:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;mypassword&apos;&lt;/span&gt;, PASSWORD_ARGON2ID);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;No changes are required for verifying passwords since the resulting hash string contains information about what algorithm, salt, and work factors were used when it was created.&lt;/p&gt;\n\n&lt;p&gt;Quite separately (and somewhat redundantly), libsodium (added in PHP 7.2) also provides Argon2 hashing via the &lt;a href=&quot;https://www.php.net/manual/en/function.sodium-crypto-pwhash-str.php&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;sodium_crypto_pwhash_str ()&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://www.php.net/manual/en/function.sodium-crypto-pwhash-str-verify.php&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;sodium_crypto_pwhash_str_verify()&lt;/code&gt;&lt;/a&gt; functions, which work much the same way as the PHP built-ins. One possible reason for using these is that PHP may sometimes be compiled without libargon2, which makes the Argon2 algorithms unavailable to the password_hash function; PHP 7.2 and higher should always have libsodium enabled, but it may not - but at least there are two ways you can get at that algorithm. Here&apos;s how you can create an Argon2id hash with libsodium (even in PHP 7.2, which otherwise lacks Argon2id support)):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$hash&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;sodium_crypto_pwhash_str&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;mypassword&apos;&lt;/span&gt;,\n    SODIUM_CRYPTO_PWHASH_OPSLIMIT_INTERACTIVE,\n    SODIUM_CRYPTO_PWHASH_MEMLIMIT_INTERACTIVE\n);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note that it doesn&apos;t allow you to specify a salt manually; this is part of libsodium&apos;s ethos  &lt;em&gt;don&apos;t allow users to set params to values that might compromise security&lt;/em&gt;  for example there is nothing preventing you from passing an empty salt string to PHP&apos;s &lt;code&gt;password_hash&lt;/code&gt; function; libsodium doesn&apos;t let you do anything so silly!&lt;/p&gt;\n    ","\n&lt;p&gt;For &lt;a href=&quot;https://en.wikipedia.org/wiki/OAuth#OAuth_2.0&quot; rel=&quot;noreferrer&quot;&gt;OAuth 2&lt;/a&gt; passwords:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$bcrypt&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;\\Zend\\Crypt\\Password\\Bcrypt&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable&quot;&gt;$bcrypt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;create&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;youpasswordhere&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;As we all know storing password in clear text in database is not secure.\nthe bcrypt is a hashing password technique.It is used to built password security. One of the amazing function of bcrypt is it save us from hackers it is used to protect the password from hacking attacks because the password is stored in bcrypted form.&lt;/p&gt;\n&lt;p&gt;The &lt;code&gt;password_hash()&lt;/code&gt; function is used to create a new password hash. It uses a strong &amp;amp; robust hashing algorithm. The &lt;code&gt;password_hash()&lt;/code&gt; function is very much compatible with the &lt;code&gt;crypt()&lt;/code&gt; function. Therefore, password hashes created by &lt;code&gt;crypt()&lt;/code&gt; may be used with &lt;code&gt;password_hash()&lt;/code&gt; and vice-versa. The functions &lt;code&gt;password_verify()&lt;/code&gt; and &lt;code&gt;password_hash()&lt;/code&gt; just the wrappers around the function &lt;code&gt;crypt()&lt;/code&gt;, and they make it much easier to use it accurately.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;SYNTAX&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$algo&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$options&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The following algorithms are currently supported by &lt;code&gt;password_hash()&lt;/code&gt; function:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;PASSWORD_DEFAULT&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;PASSWORD_BCRYPT&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;PASSWORD_ARGON2I&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;PASSWORD_ARGON2ID&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Parameters: This function accepts three parameters as mentioned above and described below:&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;$password&lt;/code&gt;: It stores the password of the user.&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;$algo&lt;/code&gt;: It is the password algorithm constant that is used continuously while denoting the algorithm which is to be used when the hashing of password takes place.&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;$options&lt;/code&gt;: It is an associative array, which contains the options. If this is removed and doesnt include, a random salt is going to be used, and the utilization of a default cost will happen.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Return Value&lt;/strong&gt;: It returns the hashed password on success or False on failure.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;:&lt;/p&gt;\n&lt;p&gt;Input:&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;GFG@123&quot;&lt;/span&gt;, PASSWORD_DEFAULT);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Output:&lt;/p&gt;\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;$2y$10$.vGA19Jh8YrwSJFDodbfoHJIOFH)DfhuofGv3Fykk1a\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Below programs illustrate the &lt;code&gt;password_hash()&lt;/code&gt; function in PHP:&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?php&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;GFG@123&quot;&lt;/span&gt;, PASSWORD_DEFAULT); &lt;span class=&quot;hljs-meta&quot;&gt;?&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;OUTPUT&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;$2y$10$Z166W1fBdsLcXPVQVfPw/uRq1ueWMA6sLt9bmdUFz9AmOGLdM393G\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The &lt;code&gt;password_hash()&lt;/code&gt; function in PHP is a built-in function, used to create a new password hash with different algorithms and options. The function uses a strong hashing algorithm.&lt;/p&gt;\n&lt;p&gt;The function take 2 mandatory parameters: &lt;code&gt;$password&lt;/code&gt; and &lt;code&gt;$algorithm&lt;/code&gt;, and 1 optional parameter &lt;code&gt;$options&lt;/code&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$strongPassword&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;( &lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$algorithm&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$options&lt;/span&gt; );\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;Algorithms allowed right now for &lt;code&gt;password_hash()&lt;/code&gt; are:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;PASSWORD_DEFAULT&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;PASSWORD_BCRYPT&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;PASSWORD_ARGON2I&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;PASSWORD_ARGON2ID&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Example:&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;abcDEF&quot;&lt;/span&gt;, PASSWORD_DEFAULT);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Answer:&lt;/p&gt;\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;$2y$10$KwKceUaG84WInAif5ehdZOkE4kHPWTLp0ZK5a5OU2EbtdwQ9YIcGy\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Example:&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;abcDEF&quot;&lt;/span&gt;, PASSWORD_BCRYPT);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Answer:&lt;/p&gt;\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;$2y$10$SNly5bFzB/R6OVbBMq1bj.yiOZdsk6Mwgqi4BLR2sqdCvMyv/AyL2\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;To use the &lt;code&gt;BCRYPT&lt;/code&gt;, set option &lt;code&gt;cost=12&lt;/code&gt; in an &lt;code&gt;$options&lt;/code&gt;, also change  first parameter &lt;code&gt;$password&lt;/code&gt; to some strong password like &lt;code&gt;&quot;wgt167yuWBGY@#1987__&quot;&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;Example:&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;password_hash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;wgt167yuWBGY@#1987__&quot;&lt;/span&gt;, PASSWORD_BCRYPT, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;cost&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Answer:&lt;/p&gt;\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;$2y$12$TjSggXiFSidD63E.QP8PJOds2texJfsk/82VaNU8XRZ/niZhzkJ6S\n&lt;/code&gt;&lt;/pre&gt;\n    "],"222":["\n&lt;p&gt;I just made this based on some similar code I already had, it appears to work:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;byString&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;o, s&lt;/span&gt;) {\n    s = s.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\[(\\w+)\\]/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;.$1&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// convert indexes to properties&lt;/span&gt;\n    s = s.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/^\\./&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;);           &lt;span class=&quot;hljs-comment&quot;&gt;// strip a leading dot&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; a = s.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, n = a.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i &amp;lt; n; ++i) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; k = a[i];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (k &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; o) {\n            o = o[k];\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n        }\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; o;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Usage::&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;byString&lt;/span&gt;(someObj, &lt;span class=&quot;hljs-string&quot;&gt;&apos;part3[0].name&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;See a working demo at &lt;a href=&quot;http://jsfiddle.net/alnitak/hEsys/&quot;&gt;http://jsfiddle.net/alnitak/hEsys/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;EDIT&lt;/strong&gt; some have noticed that this code will throw an error if passed a string where the left-most indexes don&apos;t correspond to a correctly  nested entry within the object.  This is a valid concern, but IMHO best addressed with a &lt;code&gt;try / catch&lt;/code&gt; block when calling, rather than having this function silently return &lt;code&gt;undefined&lt;/code&gt; for an invalid index.&lt;/p&gt;\n    ","\n&lt;p&gt;This is now supported by lodash using &lt;code&gt;_.get(obj, property)&lt;/code&gt;. See &lt;a href=&quot;https://lodash.com/docs#get&quot;&gt;https://lodash.com/docs#get&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Example from the docs:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; object = { &lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;: [{ &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;: { &lt;span class=&quot;hljs-string&quot;&gt;&apos;c&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; } }] };\n\n_.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(object, &lt;span class=&quot;hljs-string&quot;&gt;&apos;a[0].b.c&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-comment&quot;&gt;//  3&lt;/span&gt;\n\n_.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(object, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;0&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;c&apos;&lt;/span&gt;]);\n&lt;span class=&quot;hljs-comment&quot;&gt;//  3&lt;/span&gt;\n\n_.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(object, &lt;span class=&quot;hljs-string&quot;&gt;&apos;a.b.c&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;default&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-comment&quot;&gt;//  &apos;default&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This is the solution I use:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;path, obj=self, separator=&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; properties = &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(path) ? path : path.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(separator)\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; properties.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;prev, curr&lt;/span&gt;) =&amp;gt;&lt;/span&gt; prev &amp;amp;&amp;amp; prev[curr], obj)\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Example usage:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// accessing property path on global scope&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;document.body.style.width&quot;&lt;/span&gt;)\n&lt;span class=&quot;hljs-comment&quot;&gt;// or&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;style.width&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;)\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// accessing array indexes&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// (someObject has been defined in the question)&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;part3.0.size&quot;&lt;/span&gt;, someObject) &lt;span class=&quot;hljs-comment&quot;&gt;// returns &apos;10&apos;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// accessing non-existent properties&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// returns undefined when intermediate properties are not defined:&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;properties.that.do.not.exist&apos;&lt;/span&gt;, {&lt;span class=&quot;hljs-attr&quot;&gt;hello&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;world&apos;&lt;/span&gt;})\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// accessing properties with unusual keys by changing the separator&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = { &lt;span class=&quot;hljs-attr&quot;&gt;object&lt;/span&gt;: { &lt;span class=&quot;hljs-string&quot;&gt;&apos;a.property.name.with.periods&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;42&lt;/span&gt; } }\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;object-&amp;gt;a.property.name.with.periods&apos;&lt;/span&gt;, obj, &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&amp;gt;&apos;&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;// returns 42&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// accessing properties with unusual keys by passing a property name array&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;([&lt;span class=&quot;hljs-string&quot;&gt;&apos;object&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;a.property.name.with.periods&apos;&lt;/span&gt;], obj) &lt;span class=&quot;hljs-comment&quot;&gt;// returns 42&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Limitations:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Can&apos;t use brackets (&lt;code&gt;[]&lt;/code&gt;) for array indicesthough specifying array indices between the separator token (e.g., &lt;code&gt;.&lt;/code&gt;) works fine as shown above. &lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;ES6&lt;/strong&gt;: Only one line in Vanila JS (it return null if don&apos;t find instead of giving error):&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;path.string&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;p,c&lt;/span&gt;)=&amp;gt;&lt;/span&gt;p&amp;amp;&amp;amp;p[c]||&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;MyOBJ&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Or example:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;a.b.c&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;p,c&lt;/span&gt;)=&amp;gt;&lt;/span&gt;p&amp;amp;&amp;amp;p[c]||&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, {&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:{&lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;:{&lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;}}})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;With Optional chaining operator&lt;/strong&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;a.b.c&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;p,c&lt;/span&gt;)=&amp;gt;&lt;/span&gt;p?.[c], {&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:{&lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;:{&lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;}}})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;For a ready to use function that also recognizes false, 0 and negative number and accept default values as parameter:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;resolvePath&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;object, path, defaultValue&lt;/span&gt;) =&amp;gt; path\n   .&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;)\n   .&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;o, p&lt;/span&gt;) =&amp;gt;&lt;/span&gt; o ? o[p] : defaultValue, object)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Example to use:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;resolvePath&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;document.body&apos;&lt;/span&gt;) =&amp;gt; &amp;lt;body&amp;gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolvePath&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;document.body.xyz&apos;&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolvePath&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;document.body.xyz&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolvePath&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;document.body.xyz&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;em&gt;Bonus&lt;/em&gt;:&lt;/p&gt;\n&lt;p&gt;To &lt;strong&gt;set&lt;/strong&gt; a path (Requested by @rob-gordon) you can use:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setPath&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;object, path, value&lt;/span&gt;) =&amp;gt; path\n   .&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;)\n   .&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;o,p,i&lt;/span&gt;) =&amp;gt;&lt;/span&gt; o[p] = path.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === ++i ? value : o[p] || {}, object)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Example:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; myVar = {}\n&lt;span class=&quot;hljs-title function_&quot;&gt;setPath&lt;/span&gt;(myVar, &lt;span class=&quot;hljs-string&quot;&gt;&apos;a.b.c&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;42&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;42&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(myVar) =&amp;gt; {&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;: {&lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;: {&lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;42&lt;/span&gt;}}}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;em&gt;Access array with []&lt;/em&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;resolvePath&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;object, path, defaultValue&lt;/span&gt;) =&amp;gt; path\n   .&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[\\.\\[\\]\\&apos;\\&quot;]/&lt;/span&gt;)\n   .&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;p&lt;/span&gt; =&amp;gt;&lt;/span&gt; p)\n   .&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;o, p&lt;/span&gt;) =&amp;gt;&lt;/span&gt; o ? o[p] : defaultValue, object)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Example:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; myVar = {&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:{&lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;:[{&lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;}]}}\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolvePath&lt;/span&gt;(myVar,&lt;span class=&quot;hljs-string&quot;&gt;&apos;a.b[0].c&apos;&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolvePath&lt;/span&gt;(myVar,&lt;span class=&quot;hljs-string&quot;&gt;&apos;a[&quot;b&quot;][\\&apos;0\\&apos;].c&apos;&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You&apos;d have to parse the string yourself:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getProperty&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, prop&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; parts = prop.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(parts)) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; last = parts.&lt;span class=&quot;hljs-title function_&quot;&gt;pop&lt;/span&gt;(),\n        l = parts.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;,\n        i = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,\n        current = parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;((obj = obj[current]) &amp;amp;&amp;amp; i &amp;lt; l) {\n            current = parts[i];\n            i++;\n        }\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(obj) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj[last];\n        }\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;parts is not valid array&apos;&lt;/span&gt;;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This required that you also define array indexes with dot notation:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part3name1 = &lt;span class=&quot;hljs-string&quot;&gt;&quot;part3.0.name&quot;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It makes the parsing easier.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;http://jsfiddle.net/fkling/WmYEX/&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;DEMO&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Works for arrays / arrays inside the object also.\nDefensive against invalid values.&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Retrieve nested item from object/array\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; {&lt;span class=&quot;hljs-type&quot;&gt;Object|Array&lt;/span&gt;} &lt;span class=&quot;hljs-variable&quot;&gt;obj&lt;/span&gt;\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; {&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt;} path dot separated\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; {&lt;span class=&quot;hljs-type&quot;&gt;*&lt;/span&gt;} def default value ( if result undefined )\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@returns&lt;/span&gt; {&lt;span class=&quot;hljs-type&quot;&gt;*&lt;/span&gt;}\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;path&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, path, def&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i, len;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,path = path.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;), len = path.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i &amp;lt; len; i++){\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(!obj || &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;object&apos;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; def;\n        obj = obj[path[i]];\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(obj === &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; def;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//////////////////////////&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//         TEST         //&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//////////////////////////&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; arr = [&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, {&lt;span class=&quot;hljs-string&quot;&gt;&apos;sp ace&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;}, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;]\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = {\n  &lt;span class=&quot;hljs-string&quot;&gt;&apos;sp ace&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;arr&lt;/span&gt;: arr,\n  &lt;span class=&quot;hljs-attr&quot;&gt;nested&lt;/span&gt;: {&lt;span class=&quot;hljs-string&quot;&gt;&apos;dotted.str.ing&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;},\n  &lt;span class=&quot;hljs-attr&quot;&gt;arr3&lt;/span&gt;: arr\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;shouldThrow&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`path(obj, &quot;arr.0&quot;)`&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;shouldBeDefined&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`path(obj, &quot;arr[0]&quot;)`&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;shouldBeEqualToNumber&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`path(obj, &quot;arr.length&quot;)`&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;shouldBeTrue&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`path(obj, &quot;sp ace&quot;)`&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;shouldBeEqualToString&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`path(obj, &quot;none.existed.prop&quot;, &quot;fallback&quot;)`&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;fallback&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;shouldBeTrue&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`path(obj, &quot;nested[&apos;dotted.str.ing&apos;])`&lt;/span&gt;);&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://cdn.rawgit.com/coderek/e7b30bac7634a50ad8fd/raw/174b6634c8f57aa8aac0716c5b7b2a7098e03584/js-test.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;using eval:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part1name = &lt;span class=&quot;hljs-built_in&quot;&gt;eval&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;someObject.part1.name&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;wrap to return undefined on error&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;path&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, path&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;eval&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;obj.&quot;&lt;/span&gt; + path);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(e) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;http://jsfiddle.net/shanimal/b3xTw/&quot;&gt;http://jsfiddle.net/shanimal/b3xTw/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Please use common sense and caution when wielding the power of eval. It&apos;s a bit like a light saber, if you turn it on there&apos;s a 90% chance you&apos;ll sever a limb. Its not for everybody.&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;This will probably never see the light of day... but here it is anyway.&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;Replace &lt;code&gt;[]&lt;/code&gt; bracket syntax with &lt;code&gt;.&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Split on &lt;code&gt;.&lt;/code&gt; character&lt;/li&gt;\n&lt;li&gt;Remove blank strings&lt;/li&gt;\n&lt;li&gt;Find the path (otherwise &lt;code&gt;undefined&lt;/code&gt;)&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;(For finding a path to an object, use this &lt;a href=&quot;https://stackoverflow.com/a/64696750/782034&quot;&gt;&lt;code&gt;pathTo&lt;/code&gt;&lt;/a&gt; solution.)&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// &quot;one liner&quot; (ES6)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;deep_value&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;obj, path&lt;/span&gt;) =&amp;gt; \npath\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\[|\\]\\.?/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;s&lt;/span&gt; =&amp;gt;&lt;/span&gt; s)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, val&lt;/span&gt;) =&amp;gt;&lt;/span&gt; acc &amp;amp;&amp;amp; acc[val], obj);\n    \n&lt;span class=&quot;hljs-comment&quot;&gt;// ... and that&apos;s it.&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; someObject = {\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;part1&apos;&lt;/span&gt; : {\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;name&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;Part 1&apos;&lt;/span&gt;,\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;size&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;20&apos;&lt;/span&gt;,\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;qty&apos;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;50&apos;&lt;/span&gt;\n    },\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;part2&apos;&lt;/span&gt; : {\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;name&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;Part 2&apos;&lt;/span&gt;,\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;size&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;15&apos;&lt;/span&gt;,\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;qty&apos;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;60&apos;&lt;/span&gt;\n    },\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;part3&apos;&lt;/span&gt; : [\n        {\n            &lt;span class=&quot;hljs-string&quot;&gt;&apos;name&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;Part 3A&apos;&lt;/span&gt;,\n            &lt;span class=&quot;hljs-string&quot;&gt;&apos;size&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;10&apos;&lt;/span&gt;,\n            &lt;span class=&quot;hljs-string&quot;&gt;&apos;qty&apos;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;20&apos;&lt;/span&gt;\n        }\n        &lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n    ],\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;pa[rt3&apos;&lt;/span&gt; : [\n        {\n            &lt;span class=&quot;hljs-string&quot;&gt;&apos;name&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;Part 3A&apos;&lt;/span&gt;,\n            &lt;span class=&quot;hljs-string&quot;&gt;&apos;size&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;10&apos;&lt;/span&gt;,\n            &lt;span class=&quot;hljs-string&quot;&gt;&apos;qty&apos;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;20&apos;&lt;/span&gt;\n        }\n        &lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n    ]\n};\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;deep_value&lt;/span&gt;(someObject, &lt;span class=&quot;hljs-string&quot;&gt;&quot;part1.name&quot;&lt;/span&gt;));               &lt;span class=&quot;hljs-comment&quot;&gt;// Part 1&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;deep_value&lt;/span&gt;(someObject, &lt;span class=&quot;hljs-string&quot;&gt;&quot;part2.qty&quot;&lt;/span&gt;));                &lt;span class=&quot;hljs-comment&quot;&gt;// 60&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;deep_value&lt;/span&gt;(someObject, &lt;span class=&quot;hljs-string&quot;&gt;&quot;part3[0].name&quot;&lt;/span&gt;));            &lt;span class=&quot;hljs-comment&quot;&gt;// Part 3A&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;deep_value&lt;/span&gt;(someObject, &lt;span class=&quot;hljs-string&quot;&gt;&quot;part3[0].....name&quot;&lt;/span&gt;));        &lt;span class=&quot;hljs-comment&quot;&gt;// Part 3A - invalid blank paths removed&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;deep_value&lt;/span&gt;(someObject, &lt;span class=&quot;hljs-string&quot;&gt;&quot;pa[rt3[0].name&quot;&lt;/span&gt;));           &lt;span class=&quot;hljs-comment&quot;&gt;// undefined - name does not support square brackets&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;You can manage to obtain the value of a deep object member with dot notation without any external JavaScript library with the following simple trick:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;objectGet&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, path&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Function&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;_&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;return _.&apos;&lt;/span&gt; + path)(obj); };\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;In your case to obtain value of &lt;code&gt;part1.name&lt;/code&gt; from &lt;code&gt;someObject&lt;/code&gt; just do:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;objectGet&lt;/span&gt;(someObject, &lt;span class=&quot;hljs-string&quot;&gt;&apos;part1.name&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Here is a simple fiddle demo: &lt;a href=&quot;https://jsfiddle.net/harishanchu/oq5esowf/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://jsfiddle.net/harishanchu/oq5esowf/&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;It&apos;s a one liner with lodash.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; deep = { &lt;span class=&quot;hljs-attr&quot;&gt;l1&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;l2&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;l3&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Hello&quot;&lt;/span&gt; } } };\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; prop = &lt;span class=&quot;hljs-string&quot;&gt;&quot;l1.l2.l3&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; val = _.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(prop.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;), &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;result, value&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result ? result[value] : &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;; }, deep);\n&lt;span class=&quot;hljs-comment&quot;&gt;// val === &quot;Hello&quot;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or even better...&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; val = _.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(deep, prop);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or ES6 version w/ reduce...&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; val = prop.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;r, val&lt;/span&gt;) =&amp;gt;&lt;/span&gt; { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; r ? r[val] : &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;; }, deep);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://plnkr.co/edit/NKb6SE&quot; rel=&quot;noreferrer&quot; title=&quot;Plunkr&quot;&gt;Plunkr&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I think you are asking for this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part1name = someObject.&lt;span class=&quot;hljs-property&quot;&gt;part1&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part2quantity = someObject.&lt;span class=&quot;hljs-property&quot;&gt;part2&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;qty&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part3name1 =  someObject.&lt;span class=&quot;hljs-property&quot;&gt;part3&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You could be asking for this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part1name = someObject[&lt;span class=&quot;hljs-string&quot;&gt;&quot;part1&quot;&lt;/span&gt;][&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;];\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part2quantity = someObject[&lt;span class=&quot;hljs-string&quot;&gt;&quot;part2&quot;&lt;/span&gt;][&lt;span class=&quot;hljs-string&quot;&gt;&quot;qty&quot;&lt;/span&gt;];\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part3name1 =  someObject[&lt;span class=&quot;hljs-string&quot;&gt;&quot;part3&quot;&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;];\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Both of which will work&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Or maybe you are asking for this&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; partName = &lt;span class=&quot;hljs-string&quot;&gt;&quot;part1&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; nameStr = &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part1name = someObject[partName][nameStr];\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Finally you could be asking for this&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; partName = &lt;span class=&quot;hljs-string&quot;&gt;&quot;part1.name&quot;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; partBits = partName.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part1name = someObject[partBits[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]][partBits[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]];\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Just in case, anyone&apos;s visiting this question in 2017 or later and looking for an &lt;strong&gt;easy-to-remember&lt;/strong&gt; way, here&apos;s an elaborate blog post on &lt;a href=&quot;https://dev.to/flexdinesh/accessing-nested-objects-in-javascript--9m4&quot; rel=&quot;noreferrer&quot;&gt;Accessing Nested Objects in JavaScript&lt;/a&gt; without being bamboozled by &lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Cannot read property &apos;foo&apos; of undefined&lt;/em&gt; error&lt;/p&gt;\n\n&lt;h2&gt;Access Nested Objects Using Array Reduce&lt;/h2&gt;\n\n&lt;p&gt;Let&apos;s take this example structure&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; user = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;101&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;email&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;jack@dev.com&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;personalInfo&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;Jack&apos;&lt;/span&gt;,\n        &lt;span class=&quot;hljs-attr&quot;&gt;address&lt;/span&gt;: [{\n            &lt;span class=&quot;hljs-attr&quot;&gt;line1&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;westwish st&apos;&lt;/span&gt;,\n            &lt;span class=&quot;hljs-attr&quot;&gt;line2&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;washmasher&apos;&lt;/span&gt;,\n            &lt;span class=&quot;hljs-attr&quot;&gt;city&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;wallas&apos;&lt;/span&gt;,\n            &lt;span class=&quot;hljs-attr&quot;&gt;state&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;WX&apos;&lt;/span&gt;\n        }]\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To be able to access nested arrays, you can write your own array reduce util.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getNestedObject&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;nestedObj, pathArr&lt;/span&gt;) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; pathArr.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, key&lt;/span&gt;) =&amp;gt;&lt;/span&gt;\n        (obj &amp;amp;&amp;amp; obj[key] !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;) ? obj[key] : &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;, nestedObj);\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// pass in your object structure as array elements&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; name = &lt;span class=&quot;hljs-title function_&quot;&gt;getNestedObject&lt;/span&gt;(user, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;personalInfo&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;name&apos;&lt;/span&gt;]);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// to access nested array, just pass in array index as an element the path array.&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; city = &lt;span class=&quot;hljs-title function_&quot;&gt;getNestedObject&lt;/span&gt;(user, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;personalInfo&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;address&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;city&apos;&lt;/span&gt;]);\n&lt;span class=&quot;hljs-comment&quot;&gt;// this will return the city from the first address item.&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;There is also an excellent type handling minimal library &lt;a href=&quot;https://www.npmjs.com/package/typy&quot; rel=&quot;noreferrer&quot;&gt;typy&lt;/a&gt; that does all this for you.&lt;/p&gt;\n\n&lt;p&gt;With typy, your code will look like this&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; city = &lt;span class=&quot;hljs-title function_&quot;&gt;t&lt;/span&gt;(user, &lt;span class=&quot;hljs-string&quot;&gt;&apos;personalInfo.address[0].city&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;safeObject&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Disclaimer: I am the author of this package.&lt;/p&gt;\n    ","\n&lt;p&gt;Here I offer more ways, which seem faster in many respects:&lt;/p&gt;\n\n&lt;p&gt;Option 1: Split string on . or [ or ] or &apos; or &quot;, reverse it, skip empty items.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getValue&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;path, origin&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (origin === &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; || origin === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) origin = self ? self : &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; path !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;string&apos;&lt;/span&gt;) path = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt; + path;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; parts = path.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\[|\\]|\\.|&apos;|&quot;/g&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;reverse&lt;/span&gt;(), name; &lt;span class=&quot;hljs-comment&quot;&gt;// (why reverse? because it&apos;s usually faster to pop off the end of an array)&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (parts.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;) { name=parts.&lt;span class=&quot;hljs-title function_&quot;&gt;pop&lt;/span&gt;(); &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (name) origin=origin[name]; }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; origin;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Option 2 (fastest of all, except &lt;code&gt;eval&lt;/code&gt;): Low level character scan (no regex/split/etc, just a quick char scan).\n&lt;em&gt;Note:  This one does not support quotes for indexes.&lt;/em&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getValue&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;path, origin&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (origin === &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; || origin === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) origin = self ? self : &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; path !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;string&apos;&lt;/span&gt;) path = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt; + path;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; c = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;, pc, i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, n = path.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;, name = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (n) &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (i&amp;lt;=n) ((c = path[i++]) == &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt; || c == &lt;span class=&quot;hljs-string&quot;&gt;&apos;[&apos;&lt;/span&gt; || c == &lt;span class=&quot;hljs-string&quot;&gt;&apos;]&apos;&lt;/span&gt; || c == &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) ? (name?(origin = origin[name], name = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;):(pc==&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;||pc==&lt;span class=&quot;hljs-string&quot;&gt;&apos;[&apos;&lt;/span&gt;||pc==&lt;span class=&quot;hljs-string&quot;&gt;&apos;]&apos;&lt;/span&gt;&amp;amp;&amp;amp;c==&lt;span class=&quot;hljs-string&quot;&gt;&apos;]&apos;&lt;/span&gt;?i=n+&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;),pc=c) : name += c;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (i==n+&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Invalid path: &quot;&lt;/span&gt;+path;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; origin;\n} &lt;span class=&quot;hljs-comment&quot;&gt;// (around 1,000,000+/- ops/sec)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Option 3: &lt;em&gt;(&lt;strong&gt;new&lt;/strong&gt;: option 2 expanded to support quotes - a bit slower, but still fast)&lt;/em&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getValue&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;path, origin&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (origin === &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; || origin === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) origin = self ? self : &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; path !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;string&apos;&lt;/span&gt;) path = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt; + path;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; c, pc, i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, n = path.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;, name = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;, q;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (i&amp;lt;=n)\n        ((c = path[i++]) == &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt; || c == &lt;span class=&quot;hljs-string&quot;&gt;&apos;[&apos;&lt;/span&gt; || c == &lt;span class=&quot;hljs-string&quot;&gt;&apos;]&apos;&lt;/span&gt; || c == &lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&quot;&lt;/span&gt; || c == &lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;&apos;&lt;/span&gt; || c == &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) ? (c==q&amp;amp;&amp;amp;path[i]==&lt;span class=&quot;hljs-string&quot;&gt;&apos;]&apos;&lt;/span&gt;?q=&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;:q?name+=&lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;:name?(origin?origin=origin[name]:i=n+&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,name=&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;) : (pc==&lt;span class=&quot;hljs-string&quot;&gt;&apos;[&apos;&lt;/span&gt;&amp;amp;&amp;amp;(c==&lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;&apos;&lt;/span&gt;||c==&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&quot;&lt;/span&gt;)?q=&lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;:pc==&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;||pc==&lt;span class=&quot;hljs-string&quot;&gt;&apos;[&apos;&lt;/span&gt;||pc==&lt;span class=&quot;hljs-string&quot;&gt;&apos;]&apos;&lt;/span&gt;&amp;amp;&amp;amp;c==&lt;span class=&quot;hljs-string&quot;&gt;&apos;]&apos;&lt;/span&gt;||pc==&lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;&apos;&lt;/span&gt;||pc==&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&quot;&lt;/span&gt;?i=n+&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;), pc=c) : name += c;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (i==n+&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; || name) &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Invalid path: &quot;&lt;/span&gt;+path;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; origin;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;JSPerf: &lt;a href=&quot;http://jsperf.com/ways-to-dereference-a-delimited-property-string/3&quot; rel=&quot;nofollow noreferrer&quot;&gt;http://jsperf.com/ways-to-dereference-a-delimited-property-string/3&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&quot;eval(...)&quot; is still king though (performance wise that is).  If you have property paths directly under your control, there shouldn&apos;t be any issues with using &apos;eval&apos; (especially if speed is desired).  If pulling property paths &quot;over the wire&quot; (&lt;a href=&quot;https://www.youtube.com/watch?v=CewJ-ihIqaM&quot; rel=&quot;nofollow noreferrer&quot;&gt;on the line&lt;/a&gt;!? lol :P), then yes, use something else to be safe.  Only an idiot would say to never use &quot;eval&quot; at all, as there &lt;a href=&quot;https://stackoverflow.com/questions/1594023/what-is-the-intended-purpose-of-eval-in-javascript?lq=1&quot;&gt;ARE good reasons&lt;/a&gt; when to use it.  Also, &quot;It is used in &lt;a href=&quot;https://github.com/douglascrockford/JSON-js/blob/master/json2.js&quot; rel=&quot;nofollow noreferrer&quot;&gt;Doug Crockford&apos;s JSON parser&lt;/a&gt;.&quot; If the input is safe, then no problems at all.  Use the right tool for the right job, that&apos;s it.&lt;/p&gt;\n    ","\n&lt;p&gt;Instead of trying to emulate JS syntax which you will have to spend a bunch of compute parsing, or just get wrong/forget things like a bunch of these answers (keys with &lt;code&gt;.&lt;/code&gt;s in, anyone?), just use an array of keys.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part1name     = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(someObject, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;part1&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;name&apos;&lt;/span&gt;]);\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part2quantity = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(someObject, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;part2&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;qty&apos;&lt;/span&gt;]);\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; part3name1    = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(someObject, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;part3&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;name&apos;&lt;/span&gt;]);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/fIYeT.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/fIYeT.png&quot; alt=&quot;answer&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;If you need to use a single string instead, simply JSONify it.&lt;br&gt;\nAnother improvement in this method is that you can delete/set the root level object.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, path&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; root = obj = [obj];\n    path = [&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, ...path];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (path.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;)\n        obj = obj[path.&lt;span class=&quot;hljs-title function_&quot;&gt;shift&lt;/span&gt;()];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [obj, path[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;], root];\n}\n&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;get&lt;/span&gt; = &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, path&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; [parent, key] = &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(obj, path);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; parent[key];\n};\n&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;del&lt;/span&gt; = &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, path&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; [parent, key, root] = &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(obj, path);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; parent[key];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; root[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n};\n&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;set&lt;/span&gt; = &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, path, value&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; [parent, key, root] = &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(obj, path);\n    parent[key] = value;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; root[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Demo of other features:&lt;br&gt;\n&lt;a href=&quot;https://i.stack.imgur.com/jClRZ.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/jClRZ.png&quot; alt=&quot;demonstration&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;The &lt;code&gt;bob = &lt;/code&gt; for &lt;code&gt;.set(&lt;/code&gt;/&lt;code&gt;.del(&lt;/code&gt; isn&apos;t necessary unless your path might be empty (manipulating the root object).&lt;br&gt;\nI prove that I don&apos;t clone the object by using &lt;code&gt;steve&lt;/code&gt; to keep a reference to the original and checking &lt;code&gt;bob == steve //true&lt;/code&gt; after that first &lt;code&gt;.set(&lt;/code&gt;&lt;/p&gt;\n    ","\n&lt;h2&gt;AngularJS&lt;/h2&gt;\n&lt;p&gt;Speigg&apos;s approach is very neat and clean, though I found this reply while searching for the solution of accessing AngularJS $scope properties by string path and with a little modification it does the job:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$scope.&lt;span class=&quot;hljs-property&quot;&gt;resolve&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt; path, obj &lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; path.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;( &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt; prev, curr &lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; prev[curr];\n    }, obj || &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt; );\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Just place this function in your root controller and use it any child scope like this:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$scope.&lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;path.to.any.object.in.scope&apos;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Access a deep value inside a object \n * Works by passing a path like &quot;foo.bar&quot;, also works with nested arrays like &quot;foo[0][1].baz&quot;\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@author&lt;/span&gt; Victor B. https://gist.github.com/victornpb/4c7882c1b9d36292308e\n * Unit tests: http://jsfiddle.net/Victornpb/0u1qygrh/\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getDeepVal&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, path&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj === &lt;span class=&quot;hljs-string&quot;&gt;&quot;undefined&quot;&lt;/span&gt; || obj === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n    path = path.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[\\.\\[\\]\\&quot;\\&apos;]{1,2}/&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, l = path.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i &amp;lt; l; i++) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (path[i] === &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;continue&lt;/span&gt;;\n        obj = obj[path[i]];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj === &lt;span class=&quot;hljs-string&quot;&gt;&quot;undefined&quot;&lt;/span&gt; || obj === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Works with&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;getDeepVal&lt;/span&gt;(obj,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo.bar&apos;&lt;/span&gt;)\n&lt;span class=&quot;hljs-title function_&quot;&gt;getDeepVal&lt;/span&gt;(obj,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo.1.bar&apos;&lt;/span&gt;)\n&lt;span class=&quot;hljs-title function_&quot;&gt;getDeepVal&lt;/span&gt;(obj,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo[0].baz&apos;&lt;/span&gt;)\n&lt;span class=&quot;hljs-title function_&quot;&gt;getDeepVal&lt;/span&gt;(obj,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo[1][2]&apos;&lt;/span&gt;)\n&lt;span class=&quot;hljs-title function_&quot;&gt;getDeepVal&lt;/span&gt;(obj,&lt;span class=&quot;hljs-string&quot;&gt;&quot;foo[&apos;bar&apos;].baz&quot;&lt;/span&gt;)\n&lt;span class=&quot;hljs-title function_&quot;&gt;getDeepVal&lt;/span&gt;(obj,&lt;span class=&quot;hljs-string&quot;&gt;&quot;foo[&apos;bar&apos;][&apos;baz&apos;]&quot;&lt;/span&gt;)\n&lt;span class=&quot;hljs-title function_&quot;&gt;getDeepVal&lt;/span&gt;(obj,&lt;span class=&quot;hljs-string&quot;&gt;&quot;foo.bar.0.baz[1][&apos;2&apos;][&apos;w&apos;].aaa[\\&quot;f\\&quot;].bb&quot;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you want a solution that can properly detect and report details of any issue with the path parsing, I wrote my own solution to this - library &lt;a href=&quot;https://github.com/vitaly-t/path-value&quot; rel=&quot;nofollow noreferrer&quot;&gt;path-value&lt;/a&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; {resolveValue} = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;path-value&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolveValue&lt;/span&gt;(someObject, &lt;span class=&quot;hljs-string&quot;&gt;&apos;part1.name&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;//=&amp;gt; Part 1&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolveValue&lt;/span&gt;(someObject, &lt;span class=&quot;hljs-string&quot;&gt;&apos;part2.qty&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;//=&amp;gt; 50&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolveValue&lt;/span&gt;(someObject, &lt;span class=&quot;hljs-string&quot;&gt;&apos;part3.0.name&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;//=&amp;gt; Part 3A&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note that for indexes we use &lt;code&gt;.0&lt;/code&gt;, and not &lt;code&gt;[0]&lt;/code&gt;, because parsing the latter adds a performance penalty, while &lt;code&gt;.0&lt;/code&gt; works directly in JavaScript, and is thus very fast.&lt;/p&gt;\n&lt;p&gt;However, full ES5 JavaScript syntax is also supported, it just needs to be tokenized first:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; {resolveValue, tokenizePath} = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;path-value&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; path = &lt;span class=&quot;hljs-title function_&quot;&gt;tokenizePath&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;part3[0].name&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;//=&amp;gt; [&apos;part3&apos;, &apos;0&apos;, &apos;name&apos;]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;resolveValue&lt;/span&gt;(someObject, path); &lt;span class=&quot;hljs-comment&quot;&gt;//=&amp;gt; Part 3A&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I haven&apos;t yet found a package to do all of the operations with a string path, so I ended up writing my own quick little package which supports insert(), get() (with default return), set() and remove() operations.&lt;/p&gt;\n\n&lt;p&gt;You can use dot notation, brackets, number indices, string number properties, and keys with non-word characters. Simple usage below:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;gt; &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; jsocrud = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;jsocrud&apos;&lt;/span&gt;);\n\n...\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Get (Read) ---&lt;/span&gt;\n&amp;gt; &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = {\n&amp;gt;     &lt;span class=&quot;hljs-attr&quot;&gt;foo&lt;/span&gt;: [\n&amp;gt;         {\n&amp;gt;             &lt;span class=&quot;hljs-string&quot;&gt;&apos;key w/ non-word chars&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;\n&amp;gt;         }\n&amp;gt;     ]\n&amp;gt; };\n&lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;\n\n&amp;gt; jsocrud.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(obj, &lt;span class=&quot;hljs-string&quot;&gt;&apos;.foo[0][&quot;key w/ non-word chars&quot;]&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://www.npmjs.com/package/jsocrud&quot; rel=&quot;nofollow&quot;&gt;https://www.npmjs.com/package/jsocrud&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/vertical-knowledge/jsocrud&quot; rel=&quot;nofollow&quot;&gt;https://github.com/vertical-knowledge/jsocrud&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Simple function, allowing for either a string or array path.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, path&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; path === &lt;span class=&quot;hljs-string&quot;&gt;&apos;string&apos;&lt;/span&gt;) path = path.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;);\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(path.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(obj[path[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]], path.&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;));\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; obj = {&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;: {&lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;: {&lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;}}};\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(obj, &lt;span class=&quot;hljs-string&quot;&gt;&apos;a.b.c&apos;&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;//foo&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;OR&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(obj, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;c&apos;&lt;/span&gt;])); &lt;span class=&quot;hljs-comment&quot;&gt;//foo&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;There is an &lt;code&gt;npm&lt;/code&gt; module now for doing this: &lt;a href=&quot;https://github.com/erictrinh/safe-access&quot; rel=&quot;nofollow&quot;&gt;https://github.com/erictrinh/safe-access&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Example usage:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; access = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;safe-access&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;access&lt;/span&gt;(very, &lt;span class=&quot;hljs-string&quot;&gt;&apos;nested.property.and.array[0]&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;While reduce is good, I am surprised no one used forEach:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;valueForKeyPath&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, path&lt;/span&gt;){\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; keys = path.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;);\n        keys.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;)=&amp;gt;&lt;/span&gt; obj = obj[key]);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n    };\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://www.typescriptlang.org/play/#src=%0Avar%20test%3A%20object%20%3D%20%7B%0A%20%20%20%20a%3A%20%7Bb%3A%7Bc%3A%22d%22%7D%7D%0A%7D%0A%0Afunction%20valueForKeyPath(obj%3A%20object%2C%20path%3A%20string)%3Aany%20%7B%0A%20%20%20%20%20%20%20%20const%20keys%20%3D%20path.split(&apos;.&apos;)%3B%0A%20%20%20%20%20%20%20%20keys.forEach((key)%3D%3E%20obj%20%3D%20obj%5Bkey%5D)%3B%0A%20%20%20%20%20%20%20%20return%20obj%3B%0A%20%20%20%20%7D%3B%0A%0Aalert(valueForKeyPath(test%2C%20&apos;a.b.c&apos;))&quot; rel=&quot;nofollow noreferrer&quot;&gt;Test&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I&apos;m developing online-shop with React. I tried to change values in copied state object to update original state with it on submit. \nExamples above haven&apos;t worked for me, because most of them mutate structure of copied object. I found working example of the function for accessing and changing values of the deep nested object properties: &lt;a href=&quot;https://lowrey.me/create-an-object-by-path-in-javascript-2/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://lowrey.me/create-an-object-by-path-in-javascript-2/&lt;/a&gt; Here it is:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;createPath&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;obj, path, value = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;&lt;/span&gt;) =&amp;gt; {\n  path = &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; path === &lt;span class=&quot;hljs-string&quot;&gt;&apos;string&apos;&lt;/span&gt; ? path.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;) : path;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; current = obj;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (path.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; [head, ...tail] = path;\n    path = tail;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (current[head] === &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;) {\n      current[head] = {};\n    }\n    current = current[head];\n  }\n  current[path[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]] = value;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n};\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Just had the same question recently and successfully used &lt;a href=&quot;https://npmjs.org/package/tea-properties&quot; rel=&quot;nofollow&quot;&gt;https://npmjs.org/package/tea-properties&lt;/a&gt; which also &lt;code&gt;set&lt;/code&gt; nested object/arrays :&lt;/p&gt;\n\n&lt;p&gt;get:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; o = {\n  &lt;span class=&quot;hljs-attr&quot;&gt;prop&lt;/span&gt;: {\n    &lt;span class=&quot;hljs-attr&quot;&gt;arr&lt;/span&gt;: [\n      {&lt;span class=&quot;hljs-attr&quot;&gt;foo&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;}\n    ]\n  }\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; properties = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;tea-properties&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; value = properties.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(o, &lt;span class=&quot;hljs-string&quot;&gt;&apos;prop.arr[0].foo&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;assert&lt;/span&gt;(value, &lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// true&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;set:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; o = {};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; properties = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;tea-properties&apos;&lt;/span&gt;);\nproperties.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(o, &lt;span class=&quot;hljs-string&quot;&gt;&apos;prop.arr[0].foo&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;assert&lt;/span&gt;(o.&lt;span class=&quot;hljs-property&quot;&gt;prop&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;foo&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// true&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Based on a previous answer, I have created a function that can also handle brackets. But no dots inside them due to the split.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, str&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; str.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\.|\\[/g&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;crumb&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; crumb.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\]$/&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;trim&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/^([&quot;&apos;])((?:(?!\\1)[^\\\\]|\\\\.)*?)\\1$/&lt;/span&gt;, &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;match, quote, str&lt;/span&gt;) =&amp;gt;&lt;/span&gt; str.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\\\(\\\\)?/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;$1&quot;&lt;/span&gt;));\n  }).&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, prop&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj ? obj[prop] : &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;;\n  }, obj);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// (IE9+) Two steps&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; pathString = &lt;span class=&quot;hljs-string&quot;&gt;&quot;[0][&apos;property&apos;].others[3].next[&apos;final&apos;]&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = [{\n  &lt;span class=&quot;hljs-attr&quot;&gt;property&lt;/span&gt;: {\n    &lt;span class=&quot;hljs-attr&quot;&gt;others&lt;/span&gt;: [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, {\n      &lt;span class=&quot;hljs-attr&quot;&gt;next&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;final&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;SUCCESS&quot;&lt;/span&gt;\n      }\n    }]\n  }\n}];\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Turn string to path array&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; pathArray = pathString\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\[[&quot;&apos;]?([\\w]+)[&quot;&apos;]?\\]/g&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;.$1&quot;&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;splice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Add object prototype method&lt;/span&gt;\n&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;path&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;path&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;concat&lt;/span&gt;(path).&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;f, l&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; f[l];\n    });\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (e) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;error&lt;/span&gt;(e);\n  }\n};\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// usage&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(obj.&lt;span class=&quot;hljs-title function_&quot;&gt;path&lt;/span&gt;(pathArray));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(obj.&lt;span class=&quot;hljs-title function_&quot;&gt;path&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;doesNotExist&quot;&lt;/span&gt;]));&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif3&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Inspired by @webjay&apos;s answer:\n&lt;a href=&quot;https://stackoverflow.com/a/46008856/4110122&quot;&gt;https://stackoverflow.com/a/46008856/4110122&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;I made this function which can you use it to &lt;strong&gt;Get/ Set/ Unset&lt;/strong&gt; any value in object&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Object_Manager&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, Path, value, Action&lt;/span&gt;) \n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt;) == &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;)\n        {\n            &lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt; = [&lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt;];\n        }\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; level = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Return&lt;/span&gt;_Value;\n        &lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;)=&amp;gt;&lt;/span&gt;{\n            level++;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (level === &lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;)\n            {\n                &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Action&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;Set&apos;&lt;/span&gt;)\n                {\n                    a[b] = value;\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value;\n                }\n                &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Action&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;Get&apos;&lt;/span&gt;)\n                {\n                    &lt;span class=&quot;hljs-title class_&quot;&gt;Return&lt;/span&gt;_Value = a[b];\n                }\n                &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Action&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;Unset&apos;&lt;/span&gt;)\n                {\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; a[b];\n                }\n            } \n            &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; \n            {\n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a[b];\n            }\n        }, obj);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Return&lt;/span&gt;_Value;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(err)\n    {\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;error&lt;/span&gt;(err);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To use it:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// Set&lt;/span&gt;\n &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;_Manager(&lt;span class=&quot;hljs-title class_&quot;&gt;Obj&lt;/span&gt;,[&lt;span class=&quot;hljs-title class_&quot;&gt;Level1&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;Level2&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;Level3&lt;/span&gt;],&lt;span class=&quot;hljs-title class_&quot;&gt;New&lt;/span&gt;_Value, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Set&apos;&lt;/span&gt;);\n\n &lt;span class=&quot;hljs-comment&quot;&gt;// Get&lt;/span&gt;\n &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;_Manager(&lt;span class=&quot;hljs-title class_&quot;&gt;Obj&lt;/span&gt;,[&lt;span class=&quot;hljs-title class_&quot;&gt;Level1&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;Level2&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;Level3&lt;/span&gt;],&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Get&apos;&lt;/span&gt;);\n\n &lt;span class=&quot;hljs-comment&quot;&gt;// Unset&lt;/span&gt;\n &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;_Manager(&lt;span class=&quot;hljs-title class_&quot;&gt;Obj&lt;/span&gt;,[&lt;span class=&quot;hljs-title class_&quot;&gt;Level1&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;Level2&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;Level3&lt;/span&gt;],&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Unset&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Extension of Mohamad Hamouday&apos; Answer will fill in missing keys&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Object_Manager&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, Path, value, Action, strict&lt;/span&gt;) \n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt;) == &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;)\n        {\n            &lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt; = [&lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt;];\n        }\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; level = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Return&lt;/span&gt;_Value;\n        &lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;)=&amp;gt;&lt;/span&gt;{\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(level,&lt;span class=&quot;hljs-string&quot;&gt;&apos;:&apos;&lt;/span&gt;,a, &lt;span class=&quot;hljs-string&quot;&gt;&apos;|||&apos;&lt;/span&gt;,b)\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!strict){\n              &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!(b &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; a)) a[b] = {}\n            }\n\n\n            level++;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (level === &lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;)\n            {\n                &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Action&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;Set&apos;&lt;/span&gt;)\n                {\n                    a[b] = value;\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value;\n                }\n                &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Action&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;Get&apos;&lt;/span&gt;)\n                {\n                    &lt;span class=&quot;hljs-title class_&quot;&gt;Return&lt;/span&gt;_Value = a[b];\n                }\n                &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Action&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;Unset&apos;&lt;/span&gt;)\n                {\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; a[b];\n                }\n            } \n            &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; \n            {\n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a[b];\n            }\n        }, obj);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Return&lt;/span&gt;_Value;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(err)\n    {\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;error&lt;/span&gt;(err);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n    }\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Example&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;\nobja = {\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;: {\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;nom&quot;&lt;/span&gt;\n  }\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Set&lt;/span&gt;\npath = &lt;span class=&quot;hljs-string&quot;&gt;&quot;c.b&quot;&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// Path does not exist&lt;/span&gt;\n&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;_Manager(obja,path.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;), &lt;span class=&quot;hljs-string&quot;&gt;&apos;test_new_val&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Set&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Expected Output: Object { a: Object { b: &quot;nom&quot; }, c: Object { b: &quot;test_new_value&quot; } }&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can use &lt;code&gt;ramda&lt;/code&gt; library. &lt;/p&gt;\n\n&lt;p&gt;Learning &lt;code&gt;ramda&lt;/code&gt; also helps you to work with immutable objects easily.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = {\n  &lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:{\n    &lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;: {\n      &lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;:[&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;101&lt;/span&gt;,{\n        &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;\n      }]\n    }\n  }\n};\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; lens = R.&lt;span class=&quot;hljs-title function_&quot;&gt;lensPath&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a.b.c.2.d&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;));\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result = R.&lt;span class=&quot;hljs-title function_&quot;&gt;view&lt;/span&gt;(lens, obj);\n\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://codepen.io/ghominejad/pen/BayJZOQ&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://codepen.io/ghominejad/pen/BayJZOQ&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Based on Alnitak&apos;s &lt;a href=&quot;https://stackoverflow.com/a/6491621/1762224&quot;&gt;answer&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;I wrapped the polyfill in a check, and reduced the function to a single chained reduction.&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;byPath&lt;/span&gt; === &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;byPath&lt;/span&gt; = &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, path&lt;/span&gt;) =&amp;gt;&lt;/span&gt; path\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\[(\\w+)\\]/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;.$1&apos;&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/^\\./&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\./g&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;ref, key&lt;/span&gt;) =&amp;gt;&lt;/span&gt; key &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; ref ? ref[key] : ref, obj)\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; data = {\n  &lt;span class=&quot;hljs-attr&quot;&gt;foo&lt;/span&gt;: {\n    &lt;span class=&quot;hljs-attr&quot;&gt;bar&lt;/span&gt;: [{\n      &lt;span class=&quot;hljs-attr&quot;&gt;baz&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n    }]\n  }\n}\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;byPath&lt;/span&gt;(data, &lt;span class=&quot;hljs-string&quot;&gt;&apos;foo.bar[0].baz&apos;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif4&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;This can be simplified by splitting the logic into three separate functions:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;isVal&lt;/span&gt; = a =&amp;gt; a != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// everything except undefined + null&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;prop&lt;/span&gt; = prop =&amp;gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_&quot;&gt;isVal&lt;/span&gt;(obj)) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; value = obj[prop];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_&quot;&gt;isVal&lt;/span&gt;(value)) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;;\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;path&lt;/span&gt; = paths =&amp;gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; pathList = &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; paths === &lt;span class=&quot;hljs-string&quot;&gt;&apos;string&apos;&lt;/span&gt; ? paths.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;) : paths;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; pathList.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;value, key&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;prop&lt;/span&gt;(key)(value), obj);\n};\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//usage:&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; myObject = { &lt;span class=&quot;hljs-attr&quot;&gt;foo&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;bar&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;baz&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;taco&apos;&lt;/span&gt; } } };\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; result = &lt;span class=&quot;hljs-title function_&quot;&gt;path&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo.bar&apos;&lt;/span&gt;)(myObject);\n&lt;span class=&quot;hljs-comment&quot;&gt;//results =&amp;gt; { baz: &apos;taco&apos; }&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This variation supports:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;passing an array or string argument&lt;/li&gt;\n&lt;li&gt;dealing with &lt;code&gt;undefined&lt;/code&gt; values during invocation and execution&lt;/li&gt;\n&lt;li&gt;testing each function independently&lt;/li&gt;\n&lt;li&gt;using each function independently&lt;/li&gt;\n&lt;/ul&gt;\n    "],"223":["\n&lt;h3&gt;2022 update&lt;/h3&gt;\n&lt;p&gt;There&apos;s a new JS standard called &quot;structured cloning&quot;. It works on all browsers:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; clone = &lt;span class=&quot;hljs-title function_&quot;&gt;structuredClone&lt;/span&gt;(object);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Old answer&lt;/h2&gt;\n&lt;p&gt;To do this for any object in JavaScript will not be simple or straightforward. You will run into the problem of erroneously picking up attributes from the object&apos;s prototype that should be left in the prototype and not copied to the new instance. If, for instance, you are adding a &lt;code&gt;clone&lt;/code&gt; method to &lt;code&gt;Object.prototype&lt;/code&gt;, as some answers depict, you will need to explicitly skip that attribute. But what if there are other additional methods added to &lt;code&gt;Object.prototype&lt;/code&gt;, or other intermediate prototypes, that you don&apos;t know about? In that case, you will copy attributes you shouldn&apos;t, so you need to detect unforeseen, non-local attributes with the &lt;a href=&quot;https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Object/hasOwnProperty&quot; rel=&quot;noreferrer&quot; title=&quot;Mozilla JavaScript Reference: Object.hasOwnProperty&quot;&gt;&lt;code&gt;hasOwnProperty&lt;/code&gt;&lt;/a&gt; method.&lt;/p&gt;\n&lt;p&gt;In addition to non-enumerable attributes, you&apos;ll encounter a tougher problem when you try to copy objects that have hidden properties. For example, &lt;code&gt;prototype&lt;/code&gt; is a hidden property of a function. Also, an object&apos;s prototype is referenced with the attribute &lt;code&gt;__proto__&lt;/code&gt;, which is also hidden, and will not be copied by a for/in loop iterating over the source object&apos;s attributes. I think &lt;code&gt;__proto__&lt;/code&gt; might be specific to Firefox&apos;s JavaScript interpreter and it may be something different in other browsers, but you get the picture. Not everything is enumerable. You can copy a hidden attribute if you know its name, but I don&apos;t know of any way to discover it automatically.&lt;/p&gt;\n&lt;p&gt;Yet another snag in the quest for an elegant solution is the problem of setting up the prototype inheritance correctly. If your source object&apos;s prototype is &lt;code&gt;Object&lt;/code&gt;, then simply creating a new general object with &lt;code&gt;{}&lt;/code&gt; will work, but if the source&apos;s prototype is some descendant of &lt;code&gt;Object&lt;/code&gt;, then you are going to be missing the additional members from that prototype which you skipped using the &lt;code&gt;hasOwnProperty&lt;/code&gt; filter, or which were in the prototype, but weren&apos;t enumerable in the first place. One solution might be to call the source object&apos;s &lt;code&gt;constructor&lt;/code&gt; property to get the initial copy object and then copy over the attributes, but then you still will not get non-enumerable attributes. For example, a &lt;a href=&quot;https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Date&quot; rel=&quot;noreferrer&quot; title=&quot;Mozilla JavaScript Reference: Date&quot;&gt;&lt;code&gt;Date&lt;/code&gt;&lt;/a&gt; object stores its data as a hidden member:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; == obj || &lt;span class=&quot;hljs-string&quot;&gt;&quot;object&quot;&lt;/span&gt; != &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy = obj.&lt;span class=&quot;hljs-title function_&quot;&gt;constructor&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; attr &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj.&lt;span class=&quot;hljs-title function_&quot;&gt;hasOwnProperty&lt;/span&gt;(attr)) copy[attr] = obj[attr];\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; d1 = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;();\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/* Executes function after 5 seconds. */&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; d2 = &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(d1);\n    &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;d1 = &quot;&lt;/span&gt; + d1.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\nd2 = &quot;&lt;/span&gt; + d2.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;());\n}, &lt;span class=&quot;hljs-number&quot;&gt;5000&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The date string for &lt;code&gt;d1&lt;/code&gt; will be 5 seconds behind that of &lt;code&gt;d2&lt;/code&gt;. A way to make one &lt;code&gt;Date&lt;/code&gt; the same as another is by calling the &lt;code&gt;setTime&lt;/code&gt; method, but that is specific to the &lt;code&gt;Date&lt;/code&gt; class. I don&apos;t think there is a bullet-proof general solution to this problem, though I would be happy to be wrong!&lt;/p&gt;\n&lt;p&gt;When I had to implement general deep copying I ended up compromising by assuming that I would only need to copy a plain &lt;code&gt;Object&lt;/code&gt;, &lt;code&gt;Array&lt;/code&gt;, &lt;code&gt;Date&lt;/code&gt;, &lt;code&gt;String&lt;/code&gt;, &lt;code&gt;Number&lt;/code&gt;, or &lt;code&gt;Boolean&lt;/code&gt;. The last 3 types are immutable, so I could perform a shallow copy and not worry about it changing. I further assumed that any elements contained in &lt;code&gt;Object&lt;/code&gt; or &lt;code&gt;Array&lt;/code&gt; would also be one of the 6 simple types in that list. This can be accomplished with code like the following:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle the 3 simple types, and null or undefined&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; == obj || &lt;span class=&quot;hljs-string&quot;&gt;&quot;object&quot;&lt;/span&gt; != &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Date&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;) {\n        copy = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;();\n        copy.&lt;span class=&quot;hljs-title function_&quot;&gt;setTime&lt;/span&gt;(obj.&lt;span class=&quot;hljs-title function_&quot;&gt;getTime&lt;/span&gt;());\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Array&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;) {\n        copy = [];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, len = obj.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i &amp;lt; len; i++) {\n            copy[i] = &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(obj[i]);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Object&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;) {\n        copy = {};\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; attr &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj.&lt;span class=&quot;hljs-title function_&quot;&gt;hasOwnProperty&lt;/span&gt;(attr)) copy[attr] = &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(obj[attr]);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Unable to copy obj! Its type isn&apos;t supported.&quot;&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The above function will work adequately for the 6 simple types I mentioned, as long as the data in the objects and arrays form a tree structure. That is, there isn&apos;t more than one reference to the same data in the object. For example:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// This would be cloneable:&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; tree = {\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;left&quot;&lt;/span&gt;  : { &lt;span class=&quot;hljs-string&quot;&gt;&quot;left&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;right&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;data&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; },\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;right&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;,\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;data&quot;&lt;/span&gt;  : &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;\n};\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// This would kind-of work, but you would get 2 copies of the &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// inner node instead of 2 references to the same copy&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; directedAcylicGraph = {\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;left&quot;&lt;/span&gt;  : { &lt;span class=&quot;hljs-string&quot;&gt;&quot;left&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;right&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;data&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; },\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;data&quot;&lt;/span&gt;  : &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;\n};\ndirectedAcyclicGraph[&lt;span class=&quot;hljs-string&quot;&gt;&quot;right&quot;&lt;/span&gt;] = directedAcyclicGraph[&lt;span class=&quot;hljs-string&quot;&gt;&quot;left&quot;&lt;/span&gt;];\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Cloning this would cause a stack overflow due to infinite recursion:&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; cyclicGraph = {\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;left&quot;&lt;/span&gt;  : { &lt;span class=&quot;hljs-string&quot;&gt;&quot;left&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;right&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;data&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; },\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;data&quot;&lt;/span&gt;  : &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;\n};\ncyclicGraph[&lt;span class=&quot;hljs-string&quot;&gt;&quot;right&quot;&lt;/span&gt;] = cyclicGraph;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;It will not be able to handle any JavaScript object, but it may be sufficient for many purposes as long as you don&apos;t assume that it will just work for anything you throw at it.&lt;/p&gt;\n    ","\n&lt;p&gt;If you do not use &lt;code&gt;Date&lt;/code&gt;s, functions, undefined, regExp or Infinity within your object, a very simple one liner is &lt;code&gt;JSON.parse(JSON.stringify(object))&lt;/code&gt;:&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; a = {\n  &lt;span class=&quot;hljs-attr&quot;&gt;string&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;string&apos;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;number&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;123&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;bool&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;nul&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;date&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(),  &lt;span class=&quot;hljs-comment&quot;&gt;// stringified&lt;/span&gt;\n  &lt;span class=&quot;hljs-attr&quot;&gt;undef&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;,  &lt;span class=&quot;hljs-comment&quot;&gt;// lost&lt;/span&gt;\n  &lt;span class=&quot;hljs-attr&quot;&gt;inf&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Infinity&lt;/span&gt;,  &lt;span class=&quot;hljs-comment&quot;&gt;// forced to &apos;null&apos;&lt;/span&gt;\n}\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(a);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; a.&lt;span class=&quot;hljs-property&quot;&gt;date&lt;/span&gt;);  &lt;span class=&quot;hljs-comment&quot;&gt;// Date object&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; clone = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(a));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(clone);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; clone.&lt;span class=&quot;hljs-property&quot;&gt;date&lt;/span&gt;);  &lt;span class=&quot;hljs-comment&quot;&gt;// result of .toISOString()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;This works for all kind of objects containing objects, arrays, strings, booleans and numbers.&lt;/p&gt;\n\n&lt;p&gt;See also &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/The_structured_clone_algorithm&quot; rel=&quot;noreferrer&quot;&gt;this article about the structured clone algorithm of browsers&lt;/a&gt; which is used when posting messages to and from a worker. It also contains a function for deep cloning.&lt;/p&gt;\n    ","\n&lt;p&gt;With jQuery, you can &lt;strong&gt;shallow copy&lt;/strong&gt; with &lt;a href=&quot;http://api.jquery.com/jQuery.extend&quot; rel=&quot;noreferrer&quot;&gt;extend&lt;/a&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copiedObject = jQuery.&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;({}, originalObject)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;subsequent changes to the &lt;code&gt;copiedObject&lt;/code&gt; will not affect the &lt;code&gt;originalObject&lt;/code&gt;, and vice versa.&lt;/p&gt;\n\n&lt;p&gt;Or to make a &lt;strong&gt;deep copy&lt;/strong&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copiedObject = jQuery.&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, {}, originalObject)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;In ECMAScript 6 there is &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign&quot; rel=&quot;noreferrer&quot;&gt;Object.assign&lt;/a&gt; method, which copies values of all enumerable own properties from one object to another. For example:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; x = {&lt;span class=&quot;hljs-attr&quot;&gt;myProp&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;};\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; y = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;({}, x); \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;But be aware &lt;strong&gt;this is a shallow copy&lt;/strong&gt; - nested objects are still copied as reference.&lt;/p&gt;\n    ","\n&lt;p&gt;Per &lt;a href=&quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Deep_Clone&quot; rel=&quot;noreferrer&quot;&gt;MDN&lt;/a&gt;:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;If you want shallow copy, use &lt;code&gt;Object.assign({}, a)&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;For &quot;deep&quot; copy, use &lt;code&gt;JSON.parse(JSON.stringify(a))&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;There is no need for external libraries but you need to check &lt;a href=&quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Browser_compatibility&quot; rel=&quot;noreferrer&quot;&gt;browser compatibility first&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;There are many answers, but none that mentions &lt;a href=&quot;https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create&quot; rel=&quot;noreferrer&quot;&gt;Object.create&lt;/a&gt; from ECMAScript 5, which admittedly does not give you an exact copy, but sets the source as the prototype of the new object.&lt;/p&gt;\n\n&lt;p&gt;Thus, this is not an exact answer to the question, but it is a one-line solution and thus elegant. And it works best for 2 cases:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Where such inheritance is useful (duh!)&lt;/li&gt;\n&lt;li&gt;Where the source object won&apos;t be modified, thus making the relation between the 2 objects a non issue.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Example:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; foo = { a : &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; };\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bar = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;create&lt;/span&gt;(foo);\nfoo.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// 1&lt;/span&gt;\nbar.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// 1&lt;/span&gt;\nfoo.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;;\nbar.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// 2 - prototype changed&lt;/span&gt;\nbar.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;\nfoo.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Still 2, since setting bar.a makes it an &quot;own&quot; property&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Why do I consider this solution to be superior? It&apos;s native, thus no looping, no recursion. However, older browsers will need a polyfill.&lt;/p&gt;\n    ","\n&lt;h1&gt;An elegant way to clone a Javascript object in one line of code&lt;/h1&gt;\n&lt;p&gt;An &lt;code&gt;Object.assign&lt;/code&gt; method is part of the ECMAScript 2015 (ES6) standard and does exactly what you need.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; clone = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;({}, obj);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;The Object.assign() method is used to copy the values of all enumerable own properties from one or more source objects to a target object.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign&quot; rel=&quot;noreferrer&quot;&gt;Read more...&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;The &lt;strong&gt;polyfill&lt;/strong&gt; to support older browsers:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;assign&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;defineProperty&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;assign&apos;&lt;/span&gt;, {\n    &lt;span class=&quot;hljs-attr&quot;&gt;enumerable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;configurable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;target&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-string&quot;&gt;&apos;use strict&apos;&lt;/span&gt;;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (target === &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt; || target === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;TypeError&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Cannot convert first argument to object&apos;&lt;/span&gt;);\n      }\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; to = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;(target);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-variable language_&quot;&gt;arguments&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; nextSource = &lt;span class=&quot;hljs-variable language_&quot;&gt;arguments&lt;/span&gt;[i];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (nextSource === &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt; || nextSource === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;continue&lt;/span&gt;;\n        }\n        nextSource = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;(nextSource);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; keysArray = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(nextSource);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; nextIndex = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, len = keysArray.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; nextIndex &amp;lt; len; nextIndex++) {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; nextKey = keysArray[nextIndex];\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; desc = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getOwnPropertyDescriptor&lt;/span&gt;(nextSource, nextKey);\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (desc !== &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt; &amp;amp;&amp;amp; desc.&lt;span class=&quot;hljs-property&quot;&gt;enumerable&lt;/span&gt;) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; to;\n    }\n  });\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;There are several issues with most solutions on the internet. So I decided to make a follow-up, which includes, why the accepted answer shouldn&apos;t be accepted.&lt;/p&gt;\n\n&lt;h2&gt;starting situation&lt;/h2&gt;\n\n&lt;p&gt;I want to &lt;strong&gt;deep-copy&lt;/strong&gt; a Javascript &lt;code&gt;Object&lt;/code&gt; with all of its children and their children and so on. But since I&apos;m not kind of a normal developer, my &lt;code&gt;Object&lt;/code&gt; has &lt;em&gt;normal&lt;/em&gt; &lt;code&gt;properties&lt;/code&gt;, &lt;code&gt;circular structures&lt;/code&gt; and even &lt;code&gt;nested objects&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;So let&apos;s create a &lt;code&gt;circular structure&lt;/code&gt; and a &lt;code&gt;nested object&lt;/code&gt; first.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Circ&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;me&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Nested&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;y&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; = y;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Let&apos;s bring everything together in an &lt;code&gt;Object&lt;/code&gt; named &lt;code&gt;a&lt;/code&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; a = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;circ&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt;(),\n    &lt;span class=&quot;hljs-attr&quot;&gt;nested&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Nested&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;)\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Next, we want to copy &lt;code&gt;a&lt;/code&gt; into a variable named &lt;code&gt;b&lt;/code&gt; and mutate it.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; b = a;\n\nb.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\nb.&lt;span class=&quot;hljs-property&quot;&gt;nested&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You know what happened here because if not you wouldn&apos;t even land on this great question.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(a, b);\n\na --&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;circ&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;me&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; { ... }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;nested&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Nested&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;\n    }\n}\n\nb --&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;circ&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;me&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; { ... }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;nested&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Nested&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Now let&apos;s find a solution.&lt;/p&gt;\n\n&lt;h2&gt;JSON&lt;/h2&gt;\n\n&lt;p&gt;The first attempt I tried was using &lt;code&gt;JSON&lt;/code&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; b = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;( &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;( a ) );\n\nb.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\nb.&lt;span class=&quot;hljs-property&quot;&gt;nested&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Don&apos;t waste too much time on it, you&apos;ll get &lt;code&gt;TypeError: Converting circular structure to JSON&lt;/code&gt;.&lt;/p&gt;\n\n&lt;h2&gt;Recursive copy &lt;em&gt;(the accepted &quot;answer&quot;)&lt;/em&gt;&lt;/h2&gt;\n\n&lt;p&gt;Let&apos;s have a look at the accepted answer.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;cloneSO&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle the 3 simple types, and null or undefined&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; == obj || &lt;span class=&quot;hljs-string&quot;&gt;&quot;object&quot;&lt;/span&gt; != &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Date&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;();\n        copy.&lt;span class=&quot;hljs-title function_&quot;&gt;setTime&lt;/span&gt;(obj.&lt;span class=&quot;hljs-title function_&quot;&gt;getTime&lt;/span&gt;());\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Array&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy = [];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, len = obj.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i &amp;lt; len; i++) {\n            copy[i] = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneSO&lt;/span&gt;(obj[i]);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Object&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy = {};\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; attr &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj.&lt;span class=&quot;hljs-title function_&quot;&gt;hasOwnProperty&lt;/span&gt;(attr)) copy[attr] = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneSO&lt;/span&gt;(obj[attr]);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Unable to copy obj! Its type isn&apos;t supported.&quot;&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Looks good, heh? It&apos;s a recursive copy of the object and handles other types as well, like &lt;code&gt;Date&lt;/code&gt;, but that wasn&apos;t a requirement.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; b = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneSO&lt;/span&gt;(a);\n\nb.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\nb.&lt;span class=&quot;hljs-property&quot;&gt;nested&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Recursion and &lt;code&gt;circular structures&lt;/code&gt; doesn&apos;t work well together... &lt;code&gt;RangeError: Maximum call stack size exceeded&lt;/code&gt;&lt;/p&gt;\n\n&lt;h2&gt;native solution&lt;/h2&gt;\n\n&lt;p&gt;After arguing with my co-worker, my boss asked us what happened, and he found a simple &lt;em&gt;solution&lt;/em&gt; after some googling. It&apos;s called &lt;code&gt;Object.create&lt;/code&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; b = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;create&lt;/span&gt;(a);\n\nb.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\nb.&lt;span class=&quot;hljs-property&quot;&gt;nested&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This solution was added to Javascript some time ago and even handles &lt;code&gt;circular structure&lt;/code&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(a, b);\n\na --&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;circ&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;me&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; { ... }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;nested&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Nested&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;\n    }\n}\n\nb --&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;circ&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;me&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; { ... }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;nested&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Nested&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;... and you see, it didn&apos;t work with the nested structure inside.&lt;/p&gt;\n\n&lt;h2&gt;polyfill for the native solution&lt;/h2&gt;\n\n&lt;p&gt;There&apos;s a polyfill for &lt;code&gt;Object.create&lt;/code&gt; in the older browser just like the IE 8. It&apos;s something like recommended by Mozilla, and of course, it&apos;s not perfect and results in the same problem as the &lt;em&gt;native solution&lt;/em&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;F&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {};\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;clonePF&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt;) {\n    F.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt; = o;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;F&lt;/span&gt;();\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; b = &lt;span class=&quot;hljs-title function_&quot;&gt;clonePF&lt;/span&gt;(a);\n\nb.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\nb.&lt;span class=&quot;hljs-property&quot;&gt;nested&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I&apos;ve put &lt;code&gt;F&lt;/code&gt; outside the scope so we can have a look at what &lt;code&gt;instanceof&lt;/code&gt; tells us.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(a, b);\n\na --&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;circ&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;me&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; { ... }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;nested&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Nested&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;\n    }\n}\n\nb --&amp;gt; F {\n    &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;circ&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;me&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt; { ... }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;nested&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Nested&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;\n    }\n}\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; a, &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; b);\n\na --&amp;gt; object\nb --&amp;gt; object\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(a &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;, b &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;);\n\na --&amp;gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\nb --&amp;gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(a &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; F, b &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; F);\n\na --&amp;gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;\nb --&amp;gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Same problem as the &lt;em&gt;native solution&lt;/em&gt;, but a little bit worse output.&lt;/p&gt;\n\n&lt;h2&gt;the better (but not perfect) solution&lt;/h2&gt;\n\n&lt;p&gt;When digging around, I found a similar question (&lt;a href=&quot;https://stackoverflow.com/questions/10728412/in-javascript-when-performing-a-deep-copy-how-do-i-avoid-a-cycle-due-to-a-pro&quot;&gt;In Javascript, when performing a deep copy, how do I avoid a cycle, due to a property being &quot;this&quot;?&lt;/a&gt;) to this one, but with a way better solution.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;cloneDR&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; gdcc = &lt;span class=&quot;hljs-string&quot;&gt;&quot;__getDeepCircularCopy__&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (o !== &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;(o)) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; o; &lt;span class=&quot;hljs-comment&quot;&gt;// primitive value&lt;/span&gt;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; set = gdcc &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; o,\n        cache = o[gdcc],\n        result;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (set &amp;amp;&amp;amp; &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; cache == &lt;span class=&quot;hljs-string&quot;&gt;&quot;function&quot;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;cache&lt;/span&gt;();\n    }\n    &lt;span class=&quot;hljs-comment&quot;&gt;// else&lt;/span&gt;\n    o[gdcc] = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result; }; &lt;span class=&quot;hljs-comment&quot;&gt;// overwrite&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (o &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;) {\n        result = [];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;o.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n            result[i] = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneDR&lt;/span&gt;(o[i]);\n        }\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        result = {};\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; prop &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; o)\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (prop != gdcc)\n                result[prop] = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneDR&lt;/span&gt;(o[prop]);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (set)\n                result[prop] = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneDR&lt;/span&gt;(cache);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (set) {\n        o[gdcc] = cache; &lt;span class=&quot;hljs-comment&quot;&gt;// reset&lt;/span&gt;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; o[gdcc]; &lt;span class=&quot;hljs-comment&quot;&gt;// unset again&lt;/span&gt;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; b = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneDR&lt;/span&gt;(a);\n\nb.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\nb.&lt;span class=&quot;hljs-property&quot;&gt;nested&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And let&apos;s have a look at the output...&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(a, b);\n\na --&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;circ&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;me&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; { ... }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;nested&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;\n    }\n}\n\nb --&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;circ&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;me&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; { ... }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;nested&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;\n    }\n}\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; a, &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; b);\n\na --&amp;gt; object\nb --&amp;gt; object\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(a &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;, b &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;);\n\na --&amp;gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\nb --&amp;gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(a &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; F, b &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; F);\n\na --&amp;gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;\nb --&amp;gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The requirements are matched, but there are still some smaller issues, including changing the &lt;code&gt;instance&lt;/code&gt; of &lt;code&gt;nested&lt;/code&gt; and &lt;code&gt;circ&lt;/code&gt; to &lt;code&gt;Object&lt;/code&gt;.&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;The structure of trees that share a leaf won&apos;t be copied, they will become two independent leaves:&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;        [&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;]                     [&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;]\n         /    \\                       /    \\\n        /      \\                     /      \\\n      |&lt;span class=&quot;hljs-regexp&quot;&gt;/_      _\\|                 |/&lt;/span&gt;_      _\\|  \n  [&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;]    [&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;]   ===&amp;gt;  [&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;]    [&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;]\n       \\        /                 |           |\n        \\      /                  |           |\n        _\\|  |&lt;span class=&quot;hljs-regexp&quot;&gt;/_                 \\|/&lt;/span&gt;         \\|/\n        [&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;]               [&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;]    [&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h2&gt;conclusion&lt;/h2&gt;\n\n&lt;p&gt;The last solution using recursion and a cache, may not be the best, but it&apos;s a &lt;strong&gt;real&lt;/strong&gt; deep-copy of the object. It handles simple &lt;code&gt;properties&lt;/code&gt;, &lt;code&gt;circular structures&lt;/code&gt; and &lt;code&gt;nested object&lt;/code&gt;, but it will mess up the instance of them while cloning.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;http://jsfiddle.net/einfallstoll/N4mr2/&quot; rel=&quot;noreferrer&quot;&gt;jsfiddle&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;If you&apos;re okay with a shallow copy, the underscore.js library has a &lt;a href=&quot;http://underscorejs.org/#clone&quot; rel=&quot;noreferrer&quot;&gt;clone&lt;/a&gt; method.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;y = _.&lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(x);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;or you can extend it like&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;copiedObject = _.&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;({},originalObject);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;OK,&lt;/strong&gt; imagine you have this object below and you want to clone it:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj = {&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;}; &lt;span class=&quot;hljs-comment&quot;&gt;//ES6&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;or&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = {&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;}; &lt;span class=&quot;hljs-comment&quot;&gt;//ES5&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;the answer is mainly depeneds on which &lt;strong&gt;ECMAscript&lt;/strong&gt; you using, in &lt;code&gt;ES6+&lt;/code&gt;, you can simply use &lt;code&gt;Object.assign&lt;/code&gt; to do the clone:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; cloned = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;({}, obj); &lt;span class=&quot;hljs-comment&quot;&gt;//new {a:1, b:2, c:3};&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;or using spread operator like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; cloned = {...obj}; &lt;span class=&quot;hljs-comment&quot;&gt;//new {a:1, b:2, c:3};&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;But if you using &lt;code&gt;ES5&lt;/code&gt;, you can use few methods, but the &lt;code&gt;JSON.stringify&lt;/code&gt;, just make sure you not using for a big chunk of data to copy, but it could be one line handy way in many cases, something like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; cloned = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj)); \n&lt;span class=&quot;hljs-comment&quot;&gt;//new {a:1, b:2, c:3};, can be handy, but avoid using on big chunk of data over and over&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h2&gt;Update 06 July 2020&lt;/h2&gt;\n&lt;p&gt;There are three (3) ways to clone objects in JavaScript. As objects in JavaScript are reference values, you can&apos;t simply just copy using the =.&lt;/p&gt;\n&lt;p&gt;The ways are:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; food = { &lt;span class=&quot;hljs-attr&quot;&gt;food&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;apple&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;drink&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;milk&apos;&lt;/span&gt; }\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// 1. Using the &quot;Spread&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ------------------&lt;/span&gt;\n\n{ ...food }\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// 2. Using &quot;Object.assign&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ------------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;({}, food)\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// 3. &quot;JSON&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ------------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(food))\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// RESULT:&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// { food: &apos;apple&apos;, drink: &apos;milk&apos; }&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This can be used as a reference summary.&lt;/p&gt;\n    ","\n&lt;p&gt;One particularly inelegant solution is to use JSON encoding to make deep copies of objects that do not have member methods. The methodology is to JSON encode your target object, then by decoding it, you get the copy you are looking for.  You can decode as many times as you want to make as many copies as you need.&lt;/p&gt;\n\n&lt;p&gt;Of course, functions do not belong in JSON, so this only works for objects without member methods.&lt;/p&gt;\n\n&lt;p&gt;This methodology was perfect for my use case, since I&apos;m storing JSON blobs in a key-value store, and when they are exposed as objects in a JavaScript API, each object actually contains a copy of the original state of the object so we can calculate the delta after the caller has mutated the exposed object.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; object1 = {&lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;};\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; object2 = object1;\n\nobject2 = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(object1);\nobject2 = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(object2);\n\nobject2.&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;a change&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(object1);&lt;span class=&quot;hljs-comment&quot;&gt;// returns value&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can simply use a &lt;a href=&quot;https://github.com/sebmarkbage/ecmascript-rest-spread/blob/master/Spread.md&quot; rel=&quot;noreferrer&quot;&gt;spread property&lt;/a&gt; to copy an object without references. But be careful (see comments), the &apos;copy&apos; is just on the lowest object/array level. Nested properties are still references!&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;&lt;strong&gt;Complete clone:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; x = {&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;value1&apos;&lt;/span&gt;}\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; x2 = {...x}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; mutate without references:&lt;/span&gt;\n\nx2.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;value2&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(x.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt;)    &lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; &apos;value1&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Clone with references on second level:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; y = {&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;: {&lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;value3&apos;&lt;/span&gt;}}\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; y2 = {...y}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; nested object is still a references:&lt;/span&gt;\n\ny2.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;b&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;value4&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(y.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;b&lt;/span&gt;)    &lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; &apos;value4&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;JavaScript actually does not support deep clones natively. Use an utility function. For example Ramda:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;&lt;a href=&quot;http://ramdajs.com/docs/#clone&quot; rel=&quot;noreferrer&quot;&gt;http://ramdajs.com/docs/#clone&lt;/a&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; objClone = { ...obj };\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Be aware that &lt;strong&gt;nested objects&lt;/strong&gt; are still copied &lt;strong&gt;as a reference.&lt;/strong&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;From this article: &lt;a href=&quot;https://greywyvern.com/?post=363&quot; rel=&quot;noreferrer&quot;&gt;How to copy arrays and objects in Javascript&lt;/a&gt; by Brian Huisman:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;clone&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; newObj = (&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;) ? [] : {};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (i == &lt;span class=&quot;hljs-string&quot;&gt;&apos;clone&apos;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;continue&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;[i] &amp;amp;&amp;amp; &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;[i] == &lt;span class=&quot;hljs-string&quot;&gt;&quot;object&quot;&lt;/span&gt;) {\n      newObj[i] = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;[i].&lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;();\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; newObj[i] = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;[i]\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; newObj;\n};\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;For those using AngularJS, there is also direct method for cloning or extending of the objects in this library.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; destination = angular.&lt;span class=&quot;hljs-title function_&quot;&gt;copy&lt;/span&gt;(source);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;or&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;angular.&lt;span class=&quot;hljs-title function_&quot;&gt;copy&lt;/span&gt;(source, destination);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;More in angular.copy &lt;a href=&quot;https://docs.angularjs.org/api/ng/function/angular.copy&quot;&gt;documentation&lt;/a&gt;...&lt;/p&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(obj == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; || &lt;span class=&quot;hljs-title function_&quot;&gt;typeof&lt;/span&gt;(obj) != &lt;span class=&quot;hljs-string&quot;&gt;&apos;object&apos;&lt;/span&gt;)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; temp = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; obj.&lt;span class=&quot;hljs-title function_&quot;&gt;constructor&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;); \n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; key &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj)\n        temp[key] = &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(obj[key]);    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; temp;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;A.Levy&apos;s answer is almost complete, here is my little contribution: &lt;strong&gt;there is a way how to handle recursive references&lt;/strong&gt;, see this line&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;if(this[attr]==this) copy[attr] = copy;&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;If the object is XML DOM element, we must use &lt;strong&gt;cloneNode&lt;/strong&gt; instead&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;if(this.cloneNode) return this.cloneNode(true);&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;Inspired by A.Levy&apos;s exhaustive study and Calvin&apos;s prototyping approach, I offer this solution:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;clone&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;cloneNode&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;cloneNode&lt;/span&gt;(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt; ? [] : {};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; attr &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;[attr] == &lt;span class=&quot;hljs-string&quot;&gt;&quot;function&quot;&lt;/span&gt; || &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;[attr]==&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; || !&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;[attr].&lt;span class=&quot;hljs-property&quot;&gt;clone&lt;/span&gt;)\n      copy[attr] = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;[attr];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;[attr]==&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;) copy[attr] = copy;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; copy[attr] = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;[attr].&lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;();\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;clone&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;();\n  copy.&lt;span class=&quot;hljs-title function_&quot;&gt;setTime&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getTime&lt;/span&gt;());\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;clone&lt;/span&gt; = \n&lt;span class=&quot;hljs-title class_&quot;&gt;Boolean&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;clone&lt;/span&gt; =\n&lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;clone&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;See also Andy Burke&apos;s note in the answers.&lt;/p&gt;\n    ","\n&lt;h1&gt;Performance&lt;/h1&gt;\n\n&lt;p&gt;Today 2020.04.30 I perform tests of chosen solutions on Chrome v81.0, Safari v13.1 and Firefox v75.0 on MacOs High Sierra v10.13.6. &lt;/p&gt;\n\n&lt;p&gt;I focus on speed of copy DATA (object with simple type fields, not methods etc.). The solutions A-I can make only shallow copy, solutions J-U can make deep copy.&lt;/p&gt;\n\n&lt;h3&gt;Results for shallow copy&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;solution &lt;code&gt;{...obj}&lt;/code&gt; (A) is fastest on chrome and firefox and medium fast on safari&lt;/li&gt;\n&lt;li&gt;solution based on &lt;code&gt;Object.assign&lt;/code&gt; (B) is fast on all browsers&lt;/li&gt;\n&lt;li&gt;jQuery (E) and lodash (F,G,H) solutions are medium/quite fast&lt;/li&gt;\n&lt;li&gt;solution &lt;code&gt;JSON.parse/stringify&lt;/code&gt; (K) is quite slow&lt;/li&gt;\n&lt;li&gt;solutions D and U are slow on all browsers&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/mCte1.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/mCte1.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;h3&gt;Results for deep copy&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;solution Q is fastest on all browsers&lt;/li&gt;\n&lt;li&gt;jQuery (L) and lodash (J) are medium fast&lt;/li&gt;\n&lt;li&gt;solution &lt;code&gt;JSON.parse/stringify&lt;/code&gt; (K) is quite slow&lt;/li&gt;\n&lt;li&gt;solution U is slowest on all browsers&lt;/li&gt;\n&lt;li&gt;lodash (J) and solution U crash on Chrome for 1000 level deep object&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/KxBqv.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/KxBqv.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;h2&gt;Details&lt;/h2&gt;\n\n&lt;p&gt;For choosen solutions: \n&lt;a href=&quot;https://stackoverflow.com/a/44950864/860099&quot;&gt;A&lt;/a&gt; \n&lt;a href=&quot;https://stackoverflow.com/a/30042948/860099&quot;&gt;B&lt;/a&gt;\nC(my)\n&lt;a href=&quot;https://stackoverflow.com/a/49497485/860099&quot;&gt;D&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/5164215/860099&quot;&gt;E&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/11024936/860099&quot;&gt;F&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/13850856/860099&quot;&gt;G&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/11024936/860099&quot;&gt;H&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/728694/860099&quot;&gt;I&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/57504513/860099&quot;&gt;J&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/10869248/860099&quot;&gt;K&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/5164215/860099&quot;&gt;L&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/728400/860099&quot;&gt;M&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/728395/860099&quot;&gt;N&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/1042676/860099&quot;&gt;O&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/33273256/860099&quot;&gt;P&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/24648941/860099&quot;&gt;Q&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/24648941/860099&quot;&gt;R&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/39029912/860099&quot;&gt;S&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/11462081/860099&quot;&gt;T&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/53737490/860099&quot;&gt;U&lt;/a&gt;,\n I perform 4 tests&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;shallow-small: object with 10 non-nested fields - you can run it &lt;a href=&quot;https://jsbench.me/0xk9l5ci9x/1&quot; rel=&quot;noreferrer&quot;&gt;HERE&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;shallow-big: object with 1000 non-nested fields - you can run it &lt;a href=&quot;https://jsbench.me/t0k9l64319/1&quot; rel=&quot;noreferrer&quot;&gt;HERE&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;deep-small: object with 10 levels-nested fields - you can run it &lt;a href=&quot;https://jsbench.me/pvk9l6pzfj/1&quot; rel=&quot;noreferrer&quot;&gt;HERE&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;deep-big: object with 1000 levels-nested fields - you can run it &lt;a href=&quot;https://jsbench.me/euk9l6x9jx/1&quot; rel=&quot;noreferrer&quot;&gt;HERE&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Objects used in tests are show in below snippet&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj_ShallowSmall = {\n  &lt;span class=&quot;hljs-attr&quot;&gt;field0&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;field1&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;field2&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;field3&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;field4&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;field5&lt;/span&gt;: [],\n  &lt;span class=&quot;hljs-attr&quot;&gt;field6&lt;/span&gt;: {},\n  &lt;span class=&quot;hljs-attr&quot;&gt;field7&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;text7&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;field8&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;text8&quot;&lt;/span&gt;,\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj_DeepSmall = {\n  &lt;span class=&quot;hljs-attr&quot;&gt;level0&lt;/span&gt;: {\n   &lt;span class=&quot;hljs-attr&quot;&gt;level1&lt;/span&gt;: {\n    &lt;span class=&quot;hljs-attr&quot;&gt;level2&lt;/span&gt;: {\n     &lt;span class=&quot;hljs-attr&quot;&gt;level3&lt;/span&gt;: {\n      &lt;span class=&quot;hljs-attr&quot;&gt;level4&lt;/span&gt;: {\n       &lt;span class=&quot;hljs-attr&quot;&gt;level5&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;level6&lt;/span&gt;: {\n         &lt;span class=&quot;hljs-attr&quot;&gt;level7&lt;/span&gt;: {\n          &lt;span class=&quot;hljs-attr&quot;&gt;level8&lt;/span&gt;: {\n           &lt;span class=&quot;hljs-attr&quot;&gt;level9&lt;/span&gt;: [[[[[[[[[[&lt;span class=&quot;hljs-string&quot;&gt;&apos;abc&apos;&lt;/span&gt;]]]]]]]]]],\n  }}}}}}}}},\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj_ShallowBig = &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;fill&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a,c,i&lt;/span&gt;) =&amp;gt;&lt;/span&gt; (a[&lt;span class=&quot;hljs-string&quot;&gt;&apos;field&apos;&lt;/span&gt;+i]=&lt;span class=&quot;hljs-title function_&quot;&gt;getField&lt;/span&gt;(i),a) ,{});\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj_DeepBig = &lt;span class=&quot;hljs-title function_&quot;&gt;genDeepObject&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;);\n\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Show objects&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ------------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj_ShallowSmall:&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj_ShallowSmall));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj_DeepSmall:&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj_DeepSmall));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj_ShallowBig:&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj_ShallowBig));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj_DeepBig:&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj_DeepBig));\n\n\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// HELPERS&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ------------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getField&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;k&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; i=k%&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(i==&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(i==&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(i==&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; k;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(i==&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(i==&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(i==&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(i==&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {};  \n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(i&amp;gt;=&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt;+k;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;genDeepObject&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;N&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-comment&quot;&gt;// generate: {level0:{level1:{...levelN: {end:[[[...N-times...[&apos;abc&apos;]...]]] }}}...}}}&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj={};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; o=obj;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; arr = [];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; a=arr;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;N; i++) {\n    o[&lt;span class=&quot;hljs-string&quot;&gt;&apos;level&apos;&lt;/span&gt;+i]={};\n    o=o[&lt;span class=&quot;hljs-string&quot;&gt;&apos;level&apos;&lt;/span&gt;+i];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; aa=[];\n    a.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(aa);\n    a=aa;\n  }\n\n  a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]=&lt;span class=&quot;hljs-string&quot;&gt;&apos;abc&apos;&lt;/span&gt;;\n  o[&lt;span class=&quot;hljs-string&quot;&gt;&apos;end&apos;&lt;/span&gt;]=arr;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;Below snippet presents tested solutions and shows differences between them&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;A&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {...obj}\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;B&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;({}, obj); \n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;C&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(obj).&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;( &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a,c&lt;/span&gt;) =&amp;gt;&lt;/span&gt; (a[c]=obj[c], a), {})\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;D&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; copyOfObject = {};\n  &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;defineProperties&lt;/span&gt;(copyOfObject, &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getOwnPropertyDescriptors&lt;/span&gt;(obj));\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copyOfObject;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;E&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; jQuery.&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;({}, obj) &lt;span class=&quot;hljs-comment&quot;&gt;// shallow&lt;/span&gt;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;F&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(obj);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;G&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(obj,&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;H&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;({},obj);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;I&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; == obj || &lt;span class=&quot;hljs-string&quot;&gt;&quot;object&quot;&lt;/span&gt; != &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy = obj.&lt;span class=&quot;hljs-title function_&quot;&gt;constructor&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; attr &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj.&lt;span class=&quot;hljs-title function_&quot;&gt;hasOwnProperty&lt;/span&gt;(attr)) copy[attr] = obj[attr];\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;J&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;cloneDeep&lt;/span&gt;(obj,&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;K&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n\t&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj));\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;L&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; jQuery.&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, {}, obj) &lt;span class=&quot;hljs-comment&quot;&gt;// deep&lt;/span&gt;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;M&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(obj == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; || &lt;span class=&quot;hljs-title function_&quot;&gt;typeof&lt;/span&gt;(obj) != &lt;span class=&quot;hljs-string&quot;&gt;&apos;object&apos;&lt;/span&gt;)\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;    \n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; temp = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; obj.&lt;span class=&quot;hljs-title function_&quot;&gt;constructor&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;); \n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; key &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj)\n    temp[key] = &lt;span class=&quot;hljs-title function_&quot;&gt;M&lt;/span&gt;(obj[key]);    \n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; temp;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;N&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;EClone&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; newObj = (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;) ? [] : {};\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (i == &lt;span class=&quot;hljs-string&quot;&gt;&apos;EClone&apos;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;continue&lt;/span&gt;;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj[i] &amp;amp;&amp;amp; &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj[i] == &lt;span class=&quot;hljs-string&quot;&gt;&quot;object&quot;&lt;/span&gt;) {\n        newObj[i] = &lt;span class=&quot;hljs-title class_&quot;&gt;EClone&lt;/span&gt;(obj[i]);\n      } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; newObj[i] = obj[i]\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; newObj;\n  };\n\n\t&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;EClone&lt;/span&gt;(obj);\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;O&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; || &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj != &lt;span class=&quot;hljs-string&quot;&gt;&quot;object&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt; != &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; &amp;amp;&amp;amp; obj.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt; != &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt; == &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt; || obj.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt; == &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt; || obj.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt; == &lt;span class=&quot;hljs-title class_&quot;&gt;Function&lt;/span&gt; ||\n        obj.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt; == &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt; || obj.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt; == &lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt; || obj.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt; == &lt;span class=&quot;hljs-title class_&quot;&gt;Boolean&lt;/span&gt;)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; obj.&lt;span class=&quot;hljs-title function_&quot;&gt;constructor&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; to = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; obj.&lt;span class=&quot;hljs-title function_&quot;&gt;constructor&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; name &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj)\n    {\n        to[name] = &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; to[name] == &lt;span class=&quot;hljs-string&quot;&gt;&quot;undefined&quot;&lt;/span&gt; ? &lt;span class=&quot;hljs-title function_&quot;&gt;O&lt;/span&gt;(obj[name], &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) : to[name];\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; to;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;P&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;target, source&lt;/span&gt;){\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; key &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; source){\n\n          &lt;span class=&quot;hljs-comment&quot;&gt;// Use getOwnPropertyDescriptor instead of source[key] to prevent from trigering setter/getter.&lt;/span&gt;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; descriptor = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getOwnPropertyDescriptor&lt;/span&gt;(source, key);\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(descriptor.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;){\n              target[key] = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(descriptor.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;);\n          }\n          &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(descriptor.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;){\n              target[key] = &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;([], descriptor.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;);\n          }\n          &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(descriptor.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;){\n              &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; prototype = &lt;span class=&quot;hljs-title class_&quot;&gt;Reflect&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getPrototypeOf&lt;/span&gt;(descriptor.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;);\n              &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; cloneObject = &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;({}, descriptor.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;);\n              &lt;span class=&quot;hljs-title class_&quot;&gt;Reflect&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setPrototypeOf&lt;/span&gt;(cloneObject, prototype);\n              target[key] = cloneObject;\n          }\n          &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n              &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;defineProperty&lt;/span&gt;(target, key, descriptor);\n          }\n      }\n      &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; prototype = &lt;span class=&quot;hljs-title class_&quot;&gt;Reflect&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getPrototypeOf&lt;/span&gt;(source);\n      &lt;span class=&quot;hljs-title class_&quot;&gt;Reflect&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setPrototypeOf&lt;/span&gt;(target, prototype);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; target;\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;({},obj);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Q&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle the 3 simple types, and null or undefined&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; == obj || &lt;span class=&quot;hljs-string&quot;&gt;&quot;object&quot;&lt;/span&gt; != &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Date&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;) {\n        copy = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;();\n        copy.&lt;span class=&quot;hljs-title function_&quot;&gt;setTime&lt;/span&gt;(obj.&lt;span class=&quot;hljs-title function_&quot;&gt;getTime&lt;/span&gt;());\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Array&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;) {\n        copy = [];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, len = obj.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i &amp;lt; len; i++) {\n            copy[i] = &lt;span class=&quot;hljs-title function_&quot;&gt;Q&lt;/span&gt;(obj[i]);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Object&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;) {\n        copy = {};\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; attr &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj.&lt;span class=&quot;hljs-title function_&quot;&gt;hasOwnProperty&lt;/span&gt;(attr)) copy[attr] = &lt;span class=&quot;hljs-title function_&quot;&gt;Q&lt;/span&gt;(obj[attr]);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Unable to copy obj! Its type isn&apos;t supported.&quot;&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;R&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; gdcc = &lt;span class=&quot;hljs-string&quot;&gt;&quot;__getDeepCircularCopy__&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj !== &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;(obj)) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj; &lt;span class=&quot;hljs-comment&quot;&gt;// primitive value&lt;/span&gt;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; set = gdcc &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj,\n        cache = obj[gdcc],\n        result;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (set &amp;amp;&amp;amp; &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; cache == &lt;span class=&quot;hljs-string&quot;&gt;&quot;function&quot;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;cache&lt;/span&gt;();\n    }\n    &lt;span class=&quot;hljs-comment&quot;&gt;// else&lt;/span&gt;\n    obj[gdcc] = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result; }; &lt;span class=&quot;hljs-comment&quot;&gt;// overwrite&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;) {\n        result = [];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;obj.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n            result[i] = &lt;span class=&quot;hljs-title function_&quot;&gt;R&lt;/span&gt;(obj[i]);\n        }\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        result = {};\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; prop &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj)\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (prop != gdcc)\n                result[prop] = &lt;span class=&quot;hljs-title function_&quot;&gt;R&lt;/span&gt;(obj[prop]);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (set)\n                result[prop] = &lt;span class=&quot;hljs-title function_&quot;&gt;R&lt;/span&gt;(cache);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (set) {\n        obj[gdcc] = cache; &lt;span class=&quot;hljs-comment&quot;&gt;// reset&lt;/span&gt;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; obj[gdcc]; &lt;span class=&quot;hljs-comment&quot;&gt;// unset again&lt;/span&gt;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;S&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; cache = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;WeakMap&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// Map of old - new references&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;copy&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;object&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; object !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;object&apos;&lt;/span&gt; ||\n            object === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; ||\n            object &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HTMLElement&lt;/span&gt;\n        )\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; object; &lt;span class=&quot;hljs-comment&quot;&gt;// primitive value or HTMLElement&lt;/span&gt;\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (object &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;) \n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;setTime&lt;/span&gt;(object.&lt;span class=&quot;hljs-title function_&quot;&gt;getTime&lt;/span&gt;());\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (object &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;) \n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(object.&lt;span class=&quot;hljs-property&quot;&gt;source&lt;/span&gt;, object.&lt;span class=&quot;hljs-property&quot;&gt;flags&lt;/span&gt;);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (cache.&lt;span class=&quot;hljs-title function_&quot;&gt;has&lt;/span&gt;(object)) \n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; cache.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(object);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; result = object &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt; ? [] : {};\n\n        cache.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(object, result); &lt;span class=&quot;hljs-comment&quot;&gt;// store reference to object before the recursive starts&lt;/span&gt;\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (object &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; o &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; object) {\n                 result.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;copy&lt;/span&gt;(o));\n            }\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n        }\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; keys = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(object); \n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; key &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; keys)\n            result[key] = &lt;span class=&quot;hljs-title function_&quot;&gt;copy&lt;/span&gt;(object[key]);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;copy&lt;/span&gt;(obj);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;T&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; clonedObjectsArray = [];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; originalObjectsArray = []; &lt;span class=&quot;hljs-comment&quot;&gt;//used to remove the unique ids when finished&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; next_objid = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;objectId&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj.&lt;span class=&quot;hljs-property&quot;&gt;__obj_id&lt;/span&gt; == &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;){\n            obj.&lt;span class=&quot;hljs-property&quot;&gt;__obj_id&lt;/span&gt; = next_objid++;\n            originalObjectsArray[obj.&lt;span class=&quot;hljs-property&quot;&gt;__obj_id&lt;/span&gt;] = obj;\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj.&lt;span class=&quot;hljs-property&quot;&gt;__obj_id&lt;/span&gt;;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;cloneRecursive&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; == obj || &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj == &lt;span class=&quot;hljs-string&quot;&gt;&quot;string&quot;&lt;/span&gt; || &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj == &lt;span class=&quot;hljs-string&quot;&gt;&quot;number&quot;&lt;/span&gt; || &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; obj == &lt;span class=&quot;hljs-string&quot;&gt;&quot;boolean&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Date&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;();\n            copy.&lt;span class=&quot;hljs-title function_&quot;&gt;setTime&lt;/span&gt;(obj.&lt;span class=&quot;hljs-title function_&quot;&gt;getTime&lt;/span&gt;());\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n        }\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Array&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy = [];\n            &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; obj.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; ++i) {\n                copy[i] = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneRecursive&lt;/span&gt;(obj[i]);\n            }\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n        }\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Handle Object&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (clonedObjectsArray[&lt;span class=&quot;hljs-title function_&quot;&gt;objectId&lt;/span&gt;(obj)] != &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;)\n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; clonedObjectsArray[&lt;span class=&quot;hljs-title function_&quot;&gt;objectId&lt;/span&gt;(obj)];\n\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; copy;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Function&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot;&gt;//Handle Function&lt;/span&gt;\n                copy = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj.&lt;span class=&quot;hljs-title function_&quot;&gt;apply&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;hljs-variable language_&quot;&gt;arguments&lt;/span&gt;);};\n            &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n                copy = {};\n\n            clonedObjectsArray[&lt;span class=&quot;hljs-title function_&quot;&gt;objectId&lt;/span&gt;(obj)] = copy;\n\n            &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; attr &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj)\n                &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (attr != &lt;span class=&quot;hljs-string&quot;&gt;&quot;__obj_id&quot;&lt;/span&gt; &amp;amp;&amp;amp; obj.&lt;span class=&quot;hljs-title function_&quot;&gt;hasOwnProperty&lt;/span&gt;(attr))\n                    copy[attr] = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneRecursive&lt;/span&gt;(obj[attr]);                 \n\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; copy;\n        }       \n\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Unable to copy obj! Its type isn&apos;t supported.&quot;&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; cloneObj = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneRecursive&lt;/span&gt;(obj);\n\n\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;//remove the unique ids&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; originalObjectsArray.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++)\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; originalObjectsArray[i].&lt;span class=&quot;hljs-property&quot;&gt;__obj_id&lt;/span&gt;;\n    };\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; cloneObj;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;U&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-comment&quot;&gt;/*\n    Deep copy objects by value rather than by reference,\n    exception: `Proxy`\n  */&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; seen = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;WeakMap&lt;/span&gt;()\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(obj)\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;defineProp&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;object, key, descriptor = {}, copyFrom = {}&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;configurable&lt;/span&gt;: _configurable, &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: _writable }\n      = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getOwnPropertyDescriptor&lt;/span&gt;(object, key)\n      || { &lt;span class=&quot;hljs-attr&quot;&gt;configurable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt; }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; test = _configurable &lt;span class=&quot;hljs-comment&quot;&gt;// Can redefine property&lt;/span&gt;\n      &amp;amp;&amp;amp; (_writable === &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt; || _writable) &lt;span class=&quot;hljs-comment&quot;&gt;// Can assign to property&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!test || &lt;span class=&quot;hljs-variable language_&quot;&gt;arguments&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;lt;= &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; test\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; basisDesc = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getOwnPropertyDescriptor&lt;/span&gt;(copyFrom, key)\n      || { &lt;span class=&quot;hljs-attr&quot;&gt;configurable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt; } &lt;span class=&quot;hljs-comment&quot;&gt;// Custom&lt;/span&gt;\n      || {}; &lt;span class=&quot;hljs-comment&quot;&gt;// or left to native default settings&lt;/span&gt;\n\n    [&lt;span class=&quot;hljs-string&quot;&gt;&quot;get&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;set&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;writable&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;enumerable&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;configurable&quot;&lt;/span&gt;]\n      .&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;attr&lt;/span&gt; =&amp;gt;&lt;/span&gt;\n        descriptor[attr] === &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt; &amp;amp;&amp;amp;\n        (descriptor[attr] = basisDesc[attr])\n      )\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; { get, set, value, writable, enumerable, configurable }\n      = descriptor\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;defineProperty&lt;/span&gt;(object, key, {\n      enumerable, configurable, ...get || set\n        ? { get, set } &lt;span class=&quot;hljs-comment&quot;&gt;// Accessor descriptor&lt;/span&gt;\n        : { value, writable } &lt;span class=&quot;hljs-comment&quot;&gt;// Data descriptor&lt;/span&gt;\n    })\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;object&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (object !== &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;(object)) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; object &lt;span class=&quot;hljs-comment&quot;&gt;/*\n     Check if the object belongs to a primitive data type */&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (object &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Node&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; object.&lt;span class=&quot;hljs-title function_&quot;&gt;cloneNode&lt;/span&gt;(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;/*\n     Clone DOM trees */&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; _object &lt;span class=&quot;hljs-comment&quot;&gt;// The clone of object&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (object.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;:\n      &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;:\n        _object = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneObject&lt;/span&gt;(object)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;:\n        _object = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(+object)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Function&lt;/span&gt;:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; fnStr = &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(object)\n\n        _object = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Function&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;return &quot;&lt;/span&gt; +\n          (&lt;span class=&quot;hljs-regexp&quot;&gt;/^(?!function |[^{]+?=&amp;gt;)[^(]+?\\(/&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(fnStr)\n            ? &lt;span class=&quot;hljs-string&quot;&gt;&quot;function &quot;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;\n          ) + fnStr\n        )()\n\n        &lt;span class=&quot;hljs-title function_&quot;&gt;copyPropDescs&lt;/span&gt;(_object, object)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;:\n        _object = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(object)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n      &lt;span class=&quot;hljs-attr&quot;&gt;default&lt;/span&gt;:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;toString&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;call&lt;/span&gt;(object.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt;)) {\n          &lt;span class=&quot;hljs-comment&quot;&gt;//                              // Stem from:&lt;/span&gt;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;[object Function]&quot;&lt;/span&gt;:       &lt;span class=&quot;hljs-comment&quot;&gt;// `class`&lt;/span&gt;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;[object Undefined]&quot;&lt;/span&gt;:      &lt;span class=&quot;hljs-comment&quot;&gt;// `Object.create(null)`&lt;/span&gt;\n            _object = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneObject&lt;/span&gt;(object)\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n          &lt;span class=&quot;hljs-attr&quot;&gt;default&lt;/span&gt;:                        &lt;span class=&quot;hljs-comment&quot;&gt;// `Proxy`&lt;/span&gt;\n            _object = object\n        }\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _object\n  }\n\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;cloneObject&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;object&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (seen.&lt;span class=&quot;hljs-title function_&quot;&gt;has&lt;/span&gt;(object)) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; seen.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(object) &lt;span class=&quot;hljs-comment&quot;&gt;/*\n     Handle recursive references (circular structures) */&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; _object = &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(object)\n      ? []\n      : &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;create&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getPrototypeOf&lt;/span&gt;(object)) &lt;span class=&quot;hljs-comment&quot;&gt;/*\n         Assign [[Prototype]] for inheritance */&lt;/span&gt;\n\n    seen.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(object, _object) &lt;span class=&quot;hljs-comment&quot;&gt;/*\n     Make `_object` the associative mirror of `object` */&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Reflect&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;ownKeys&lt;/span&gt;(object).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt; =&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-title function_&quot;&gt;defineProp&lt;/span&gt;(_object, key, { &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(object[key]) }, object)\n    )\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _object\n  }\n\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;copyPropDescs&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;target, source&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;defineProperties&lt;/span&gt;(target,\n      &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getOwnPropertyDescriptors&lt;/span&gt;(source)\n    )\n  }\n}\n \n&lt;span class=&quot;hljs-comment&quot;&gt;// ------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Test properties&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ------------------------&lt;/span&gt;\n\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`  shallow deep  func  circ  undefined date  RegExp bigInt`&lt;/span&gt;)\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(A);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(B);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(C);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(D);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(E);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(F);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(G);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(H);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(I);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(J);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(K);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(L);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(M);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(N);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(O);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(P);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(Q);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(R);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(S);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(T);\n&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(U);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`  shallow deep  func  circ  undefined date  RegExp bigInt\n----\nLEGEND:\nshallow - solution create shallow copy\ndeep - solution create deep copy\nfunc - solution copy functions\ncirc - solution can copy object with circular references\nundefined - solution copy fields with undefined value\ndate - solution can copy date\nRegExp - solution can copy fields with regular expressions\nbigInt - solution can copy BigInt\n`&lt;/span&gt;)\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Helper functions&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ------------------------&lt;/span&gt;\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;deepCompare&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj1,obj2&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj1)===&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj2);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getCase&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { &lt;span class=&quot;hljs-comment&quot;&gt;// pure data case&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; { \n    &lt;span class=&quot;hljs-attr&quot;&gt;undef&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;bool&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;num&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;str&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;txt1&quot;&lt;/span&gt;,    \n    &lt;span class=&quot;hljs-attr&quot;&gt;e1&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e2&lt;/span&gt;: [], &lt;span class=&quot;hljs-attr&quot;&gt;e3&lt;/span&gt;: {}, &lt;span class=&quot;hljs-attr&quot;&gt;e4&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e5&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;arr&lt;/span&gt;: [ &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;txt3&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, [], {},\n      [ &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;txt5&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, [], {},  [&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;txt7&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;,[],{} ], \n        {&lt;span class=&quot;hljs-attr&quot;&gt;bool&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;hljs-attr&quot;&gt;num&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;str&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;txt9&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e1&lt;/span&gt;:&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e2&lt;/span&gt;:[] ,&lt;span class=&quot;hljs-attr&quot;&gt;e3&lt;/span&gt;:{} ,&lt;span class=&quot;hljs-attr&quot;&gt;e4&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e5&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;}\n      ],\n        {&lt;span class=&quot;hljs-attr&quot;&gt;bool&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;hljs-attr&quot;&gt;num&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;str&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;txt11&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e1&lt;/span&gt;:&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e2&lt;/span&gt;:[] ,&lt;span class=&quot;hljs-attr&quot;&gt;e3&lt;/span&gt;:{} ,&lt;span class=&quot;hljs-attr&quot;&gt;e4&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e5&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;}\n    ], \n    &lt;span class=&quot;hljs-attr&quot;&gt;obj&lt;/span&gt;: { \n        &lt;span class=&quot;hljs-attr&quot;&gt;bool&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;num&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;str&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;txt13&quot;&lt;/span&gt;,\n        &lt;span class=&quot;hljs-attr&quot;&gt;e1&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e2&lt;/span&gt;: [], &lt;span class=&quot;hljs-attr&quot;&gt;e3&lt;/span&gt;: {}, &lt;span class=&quot;hljs-attr&quot;&gt;e4&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e5&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,\n        &lt;span class=&quot;hljs-attr&quot;&gt;arr&lt;/span&gt;: [&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;txt15&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;,[],{} ],\n        &lt;span class=&quot;hljs-attr&quot;&gt;obj&lt;/span&gt;: { \n          &lt;span class=&quot;hljs-attr&quot;&gt;bool&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;num&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;str&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;txt17&quot;&lt;/span&gt;,\n          &lt;span class=&quot;hljs-attr&quot;&gt;e1&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e2&lt;/span&gt;: [], &lt;span class=&quot;hljs-attr&quot;&gt;e3&lt;/span&gt;: {}, &lt;span class=&quot;hljs-attr&quot;&gt;e4&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e5&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,\n          &lt;span class=&quot;hljs-attr&quot;&gt;arr&lt;/span&gt;: [&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;18&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;txt19&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;,[],{} ],\n          &lt;span class=&quot;hljs-attr&quot;&gt;obj&lt;/span&gt;: {&lt;span class=&quot;hljs-attr&quot;&gt;bool&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;hljs-attr&quot;&gt;num&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;str&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;txt21&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e1&lt;/span&gt;:&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e2&lt;/span&gt;:[] ,&lt;span class=&quot;hljs-attr&quot;&gt;e3&lt;/span&gt;:{} ,&lt;span class=&quot;hljs-attr&quot;&gt;e4&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;e5&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;}\n      } \n    } \n  };\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;check&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;org, copy, field, newValue&lt;/span&gt;) {\n  copy[field] = newValue;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;deepCompare&lt;/span&gt;(org,copy); \n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;testFunc&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;f&lt;/span&gt;) {\n\t&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; o = { &lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;fun&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;i,j&lt;/span&gt;)=&amp;gt;&lt;/span&gt; i+j };\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; c = &lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(o);\n  \n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; val = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;{\n    val = c.&lt;span class=&quot;hljs-title function_&quot;&gt;fun&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;)==&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;;\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(e) { }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; val;\n} \n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;testCirc&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;f&lt;/span&gt;) {\n\t&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Circ&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;me&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; o = {\n      &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;,\n      &lt;span class=&quot;hljs-attr&quot;&gt;circ&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Circ&lt;/span&gt;(),\n      &lt;span class=&quot;hljs-attr&quot;&gt;obj_circ&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;,\n  };\n  \n  o.&lt;span class=&quot;hljs-property&quot;&gt;obj_circ&lt;/span&gt; = o;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; val = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; c = &lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(o);  \n    val = (o.&lt;span class=&quot;hljs-property&quot;&gt;obj_circ&lt;/span&gt; == o) &amp;amp;&amp;amp; (o.&lt;span class=&quot;hljs-property&quot;&gt;circ&lt;/span&gt; == o.&lt;span class=&quot;hljs-property&quot;&gt;circ&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;me&lt;/span&gt;);\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(e) { }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; val;\n} \n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;testRegExp&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;f&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; o = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;re&lt;/span&gt;: &lt;span class=&quot;hljs-regexp&quot;&gt;/a[0-9]+/&lt;/span&gt;,\n  };\n  \n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; val = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; c = &lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(o);  \n    val = (&lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(c.&lt;span class=&quot;hljs-property&quot;&gt;re&lt;/span&gt;) == &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/a[0-9]+/&lt;/span&gt;));\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(e) { }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; val;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;testDate&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;f&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; o = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;date&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(),\n  };\n  \n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; val = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; c = &lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(o);  \n    val = (+&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(c.&lt;span class=&quot;hljs-property&quot;&gt;date&lt;/span&gt;) == +&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(o.&lt;span class=&quot;hljs-property&quot;&gt;date&lt;/span&gt;));\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(e) { }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; val;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;testBigInt&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;f&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; val = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n  \n  &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; o = {\n      &lt;span class=&quot;hljs-attr&quot;&gt;big&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;123n&lt;/span&gt;,\n    };\n  \n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; c = &lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(o);  \n  \n    val = o.&lt;span class=&quot;hljs-property&quot;&gt;big&lt;/span&gt; == c.&lt;span class=&quot;hljs-property&quot;&gt;big&lt;/span&gt;;\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(e) { }\n  \n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; val;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;f&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; o = &lt;span class=&quot;hljs-title function_&quot;&gt;getCase&lt;/span&gt;();  &lt;span class=&quot;hljs-comment&quot;&gt;// orginal object&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; oB = &lt;span class=&quot;hljs-title function_&quot;&gt;getCase&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// &quot;backup&quot; used for shallow valid test&lt;/span&gt;\n  \n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; c1 = &lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(o); &lt;span class=&quot;hljs-comment&quot;&gt;// copy 1 for reference&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; c2 = &lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(o); &lt;span class=&quot;hljs-comment&quot;&gt;// copy 2 for test shallow values&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; c3 = &lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(o); &lt;span class=&quot;hljs-comment&quot;&gt;// copy 3 for test deep values&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; is_proper_copy = &lt;span class=&quot;hljs-title function_&quot;&gt;deepCompare&lt;/span&gt;(c1,o);  &lt;span class=&quot;hljs-comment&quot;&gt;// shoud be true&lt;/span&gt;\n  \n  &lt;span class=&quot;hljs-comment&quot;&gt;// shallow changes&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; testShallow = \n    [ [&lt;span class=&quot;hljs-string&quot;&gt;&apos;bool&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;],[&lt;span class=&quot;hljs-string&quot;&gt;&apos;num&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;666&lt;/span&gt;],[&lt;span class=&quot;hljs-string&quot;&gt;&apos;str&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;xyz&apos;&lt;/span&gt;],[&lt;span class=&quot;hljs-string&quot;&gt;&apos;arr&apos;&lt;/span&gt;,[]],[&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj&apos;&lt;/span&gt;,{}] ]\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc,curr&lt;/span&gt;)=&amp;gt;&lt;/span&gt; acc &amp;amp;&amp;amp; &lt;span class=&quot;hljs-title function_&quot;&gt;check&lt;/span&gt;(c1,c2,curr[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;], curr[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]), &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt; );\n  \n  &lt;span class=&quot;hljs-comment&quot;&gt;// should be true (original object shoud not have changed shallow fields)&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; is_valid = &lt;span class=&quot;hljs-title function_&quot;&gt;deepCompare&lt;/span&gt;(o,oB); \n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// deep test (intruduce some change)&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (c3.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]) c3.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;num&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;777&lt;/span&gt;;\n  \n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; diff_shallow = !testShallow; &lt;span class=&quot;hljs-comment&quot;&gt;// shoud be true (shallow field was copied)&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; diff_deep = !&lt;span class=&quot;hljs-title function_&quot;&gt;deepCompare&lt;/span&gt;(c1,c3);    &lt;span class=&quot;hljs-comment&quot;&gt;// shoud be true (deep field was copied)&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; can_copy_functions = &lt;span class=&quot;hljs-title function_&quot;&gt;testFunc&lt;/span&gt;(f);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; can_copy_circular = &lt;span class=&quot;hljs-title function_&quot;&gt;testCirc&lt;/span&gt;(f);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; can_copy_regexp = &lt;span class=&quot;hljs-title function_&quot;&gt;testRegExp&lt;/span&gt;(f);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; can_copy_date = &lt;span class=&quot;hljs-title function_&quot;&gt;testDate&lt;/span&gt;(f);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; can_copy_bigInt = &lt;span class=&quot;hljs-title function_&quot;&gt;testBigInt&lt;/span&gt;(f);\n  \n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; has_undefined = &lt;span class=&quot;hljs-string&quot;&gt;&apos;undef&apos;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; c1; &lt;span class=&quot;hljs-comment&quot;&gt;// field with undefined value is copied?  &lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; is_ok = is_valid &amp;amp;&amp;amp; is_proper_copy;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;b&lt;/span&gt;=(&lt;span class=&quot;hljs-params&quot;&gt;bool&lt;/span&gt;) =&amp;gt; (bool+&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;padEnd&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// bool value to formated string&lt;/span&gt;\n  \n  &lt;span class=&quot;hljs-title function_&quot;&gt;testFunc&lt;/span&gt;(f);\n  \n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(is_ok) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${f.name}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${b(diff_shallow)}&lt;/span&gt;   &lt;span class=&quot;hljs-subst&quot;&gt;${b(diff_deep)}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${b(can_copy_functions)}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${b(can_copy_circular)}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${b(has_undefined)}&lt;/span&gt;     &lt;span class=&quot;hljs-subst&quot;&gt;${b(can_copy_date)}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${b(can_copy_regexp)}&lt;/span&gt;  &lt;span class=&quot;hljs-subst&quot;&gt;${b(can_copy_bigInt)}&lt;/span&gt;`&lt;/span&gt;)\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${f.name}&lt;/span&gt;: INVALID &lt;span class=&quot;hljs-subst&quot;&gt;${is_valid}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${is_proper_copy}&lt;/span&gt;`&lt;/span&gt;,{c1})\n  }\n  \n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://code.jquery.com/jquery-3.5.0.min.js&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;integrity&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;crossorigin&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;anonymous&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\nThis snippet only presents tested solutions and show differences between them (but it no make performence tests)&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif3&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;Below there are example results for Chrome for shallow-big object&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/zluC1.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/zluC1.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Using Lodash: &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; y = _.&lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(x, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;In ES-6 you can simply use Object.assign(...).\nEx:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj = {&lt;span class=&quot;hljs-attr&quot;&gt;person&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;Thor Odinson&apos;&lt;/span&gt;};\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; clone = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;({}, obj);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;A good reference is here:\n&lt;a href=&quot;https://googlechrome.github.io/samples/object-assign-es6/&quot; rel=&quot;noreferrer&quot;&gt;https://googlechrome.github.io/samples/object-assign-es6/&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Interested in cloning simple objects:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;JSON.parse(JSON.stringify(json_original));&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;Source : &lt;a href=&quot;https://stackoverflow.com/questions/18359093/how-to-copy-javascript-object-to-new-variable-not-by-reference?answertab=votes#tab-top&quot;&gt;How to copy JavaScript object to new variable NOT by reference?&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;You can clone an object and remove any reference from the previous one using a single line of code. Simply do:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj1 = { &lt;span class=&quot;hljs-attr&quot;&gt;text&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;moo1&apos;&lt;/span&gt; };\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj2 = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;create&lt;/span&gt;(obj1); &lt;span class=&quot;hljs-comment&quot;&gt;// Creates a new clone without references&lt;/span&gt;\n\nobj2.&lt;span class=&quot;hljs-property&quot;&gt;text&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;moo2&apos;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Only updates obj2&apos;s text property&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(obj1, obj2); &lt;span class=&quot;hljs-comment&quot;&gt;// Outputs: obj1: {text:&apos;moo1&apos;}, obj2: {text:&apos;moo2&apos;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;For browsers / engines that do not currently support Object.create you can use this polyfill:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Polyfill Object.create if it does not exist&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;create&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;create&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; F = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {};\n        F.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt; = o;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;F&lt;/span&gt;();\n    };\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; clone = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;( &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;create&lt;/span&gt;( &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getPrototypeOf&lt;/span&gt;(obj)), obj)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;ES6 solution if you want to (shallow) clone a &lt;strong&gt;class instance&lt;/strong&gt; and not just a property object.&lt;/p&gt;\n    ","\n&lt;p&gt;New answer to an old question!  If you have the pleasure of having using ECMAScript 2016 (ES6) with &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator&quot; rel=&quot;noreferrer&quot;&gt;Spread Syntax&lt;/a&gt;, it&apos;s easy.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;keepMeTheSame = {&lt;span class=&quot;hljs-attr&quot;&gt;first&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Me!&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;second&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;You!&quot;&lt;/span&gt;};\ncloned = {...keepMeTheSame}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This provides a clean method for a shallow copy of an object.  Making a deep copy, meaning makign a new copy of every value in every recursively nested object, requires on of the heavier solutions above.&lt;/p&gt;\n\n&lt;p&gt;JavaScript keeps evolving.&lt;/p&gt;\n    ","\n&lt;p&gt;I think there is a simple and working answer. In deep copying there are two concerns:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Keep properties independent to each other.&lt;/li&gt;\n&lt;li&gt;And keep the methods alive on cloned object.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;So I think one simple solution will be to first serialize and deserialize and then do an assign on it to copy functions too.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; deepCloned = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(source));\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; merged = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;({}, source);\n&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;(merged, deepCloned);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Although this question has many answers, I hope this one helps too.&lt;/p&gt;\n    ","\n&lt;p&gt;For a deep copy and clone, JSON.stringify then JSON.parse the object:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;obj = { &lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; , &lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;}};\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; deepClone = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj));\nobj.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;b&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;c&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(deepClone)); &lt;span class=&quot;hljs-comment&quot;&gt;// { a: 0, b: { c: 0}}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h1&gt;Structured Cloning&lt;/h1&gt;\n&lt;p&gt;&lt;strong&gt;2022 update:&lt;/strong&gt; The &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/structuredClone&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;structuredClone()&lt;/code&gt;&lt;/a&gt; global function is already available in Node 17, Deno 1.14, and most major browsers (see &lt;a href=&quot;https://caniuse.com/?search=structuredClone&quot; rel=&quot;nofollow noreferrer&quot;&gt;Can I Use&lt;/a&gt;).&lt;/p&gt;\n&lt;p&gt;You &lt;em&gt;can&lt;/em&gt; use the same structured clone mechanism that the HTML standard includes for sending data between realms.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; clone = &lt;span class=&quot;hljs-title function_&quot;&gt;structuredClone&lt;/span&gt;(original);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;See &lt;a href=&quot;https://stackoverflow.com/a/10916838/157247&quot;&gt;the other answer&lt;/a&gt; for more details.&lt;/p&gt;\n    ","\n&lt;p&gt;(The following was mainly an integration of @&lt;a href=&quot;https://stackoverflow.com/a/39029912&quot;&gt;Maciej Bukowski&lt;/a&gt;, @&lt;a href=&quot;https://stackoverflow.com/a/728694&quot;&gt;A. Levy&lt;/a&gt;, @&lt;a href=&quot;https://stackoverflow.com/a/9023088&quot;&gt;Jan Turo&lt;/a&gt;, @&lt;a href=&quot;https://stackoverflow.com/a/37503916&quot;&gt;Redu&lt;/a&gt;&apos;s answers, and @&lt;a href=&quot;https://stackoverflow.com/questions/728360/how-do-i-correctly-clone-a-javascript-object/53737490#comment96229185_53737490&quot;&gt;LeviRoberts&lt;/a&gt;, @&lt;a href=&quot;https://stackoverflow.com/q/728360#comment42972840_9023088&quot;&gt;RobG&lt;/a&gt;&apos;s comments, many thanks to them!!!)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Deep copy&lt;/strong&gt;?  YES! (mostly);&lt;br&gt;\n&lt;strong&gt;Shallow copy&lt;/strong&gt;?  NO! (except &lt;code&gt;Proxy&lt;/code&gt;).&lt;/p&gt;\n&lt;p&gt;I sincerely welcome everyone to test &lt;code&gt;clone()&lt;/code&gt;.&lt;br&gt;\nIn addition, &lt;code&gt;defineProp()&lt;/code&gt; is designed to easily and quickly &lt;em&gt;(re)define or copy&lt;/em&gt; any type of descriptor.&lt;/p&gt;\n&lt;h1&gt;Function&lt;/h1&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;object&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-comment&quot;&gt;/*\n    Deep copy objects by value rather than by reference,\n    exception: `Proxy`\n  */&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; seen = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;WeakMap&lt;/span&gt;()\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(object)\n\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;object&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (object !== &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;(object)) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; object &lt;span class=&quot;hljs-comment&quot;&gt;/*\n     Check if the object belongs to a primitive data type */&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (object &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Node&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; object.&lt;span class=&quot;hljs-title function_&quot;&gt;cloneNode&lt;/span&gt;(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;/*\n     Clone DOM trees */&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; _object &lt;span class=&quot;hljs-comment&quot;&gt;// The clone of object&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (object.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;:\n      &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;:\n        _object = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneObject&lt;/span&gt;(object)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;:\n        _object = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(+object)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Function&lt;/span&gt;:\n        _object = &lt;span class=&quot;hljs-title function_&quot;&gt;copyFn&lt;/span&gt;(object)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;:\n        _object = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(object)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n      &lt;span class=&quot;hljs-attr&quot;&gt;default&lt;/span&gt;:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;toString&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;call&lt;/span&gt;(object.&lt;span class=&quot;hljs-property&quot;&gt;constructor&lt;/span&gt;)) {\n          &lt;span class=&quot;hljs-comment&quot;&gt;//                                  // Stem from:&lt;/span&gt;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;[object Function]&quot;&lt;/span&gt;:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (object[&lt;span class=&quot;hljs-title class_&quot;&gt;Symbol&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;toStringTag&lt;/span&gt;]) {\n              &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;undefined&lt;/span&gt;:\n                _object = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneObject&lt;/span&gt;(object) &lt;span class=&quot;hljs-comment&quot;&gt;// `class`&lt;/span&gt;\n                &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n              &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;AsyncFunction&quot;&lt;/span&gt;:\n              &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;GeneratorFunction&quot;&lt;/span&gt;:\n              &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;AsyncGeneratorFunction&quot;&lt;/span&gt;:\n                _object = &lt;span class=&quot;hljs-title function_&quot;&gt;copyFn&lt;/span&gt;(object)\n                &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n              &lt;span class=&quot;hljs-attr&quot;&gt;default&lt;/span&gt;:\n                _object = object\n            }\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n          &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;[object Undefined]&quot;&lt;/span&gt;:          &lt;span class=&quot;hljs-comment&quot;&gt;// `Object.create(null)`&lt;/span&gt;\n            _object = &lt;span class=&quot;hljs-title function_&quot;&gt;cloneObject&lt;/span&gt;(object)\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\n          &lt;span class=&quot;hljs-attr&quot;&gt;default&lt;/span&gt;:\n            _object = object                  &lt;span class=&quot;hljs-comment&quot;&gt;// `Proxy`&lt;/span&gt;\n        }\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _object\n  }\n\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;cloneObject&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;object&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (seen.&lt;span class=&quot;hljs-title function_&quot;&gt;has&lt;/span&gt;(object)) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; seen.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(object) &lt;span class=&quot;hljs-comment&quot;&gt;/*\n     Handle recursive references (circular structures) */&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; _object = &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(object)\n      ? []\n      : &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;create&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getPrototypeOf&lt;/span&gt;(object)) &lt;span class=&quot;hljs-comment&quot;&gt;/*\n         Assign [[Prototype]] for inheritance */&lt;/span&gt;\n\n    seen.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(object, _object) &lt;span class=&quot;hljs-comment&quot;&gt;/*\n     Make `_object` the associative mirror of `object` */&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Reflect&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;ownKeys&lt;/span&gt;(object).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt; =&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-title function_&quot;&gt;defineProp&lt;/span&gt;(_object, key, { &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(object[key]) }, object)\n    )\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _object\n  }\n}\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;copyPropDescs&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;target, source&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;defineProperties&lt;/span&gt;(target,\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getOwnPropertyDescriptors&lt;/span&gt;(source)\n  )\n}\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;convertFnToStr&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;fn&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; fnStr = &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(fn)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (fn.&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;startsWith&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;[&quot;&lt;/span&gt;)) &lt;span class=&quot;hljs-comment&quot;&gt;// isSymbolKey&lt;/span&gt;\n    fnStr = fnStr.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\[Symbol\\..+?\\]/&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;)\n  fnStr = &lt;span class=&quot;hljs-regexp&quot;&gt;/^(?!(async )?(function\\b|[^{]+?=&amp;gt;))[^(]+?\\(/&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(fnStr)\n    ? fnStr.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/^(async )?(\\*)?/&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;$1function$2 &quot;&lt;/span&gt;) : fnStr\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; fnStr\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;copyFn&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;fn&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; newFn = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Function&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`return &lt;span class=&quot;hljs-subst&quot;&gt;${convertFnToStr(fn)}&lt;/span&gt;`&lt;/span&gt;)()\n  &lt;span class=&quot;hljs-title function_&quot;&gt;copyPropDescs&lt;/span&gt;(newFn, fn)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; newFn\n}\n\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;defineProp&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;object, key, descriptor = {}, copyFrom = {}&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;configurable&lt;/span&gt;: _configurable, &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: _writable }\n    = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getOwnPropertyDescriptor&lt;/span&gt;(object, key)\n    || { &lt;span class=&quot;hljs-attr&quot;&gt;configurable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt; }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; test = _configurable &lt;span class=&quot;hljs-comment&quot;&gt;// Can redefine property&lt;/span&gt;\n    &amp;amp;&amp;amp; (_writable === &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt; || _writable) &lt;span class=&quot;hljs-comment&quot;&gt;// Can assign to property&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!test || &lt;span class=&quot;hljs-variable language_&quot;&gt;arguments&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;lt;= &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; test\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; basisDesc = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getOwnPropertyDescriptor&lt;/span&gt;(copyFrom, key)\n    || { &lt;span class=&quot;hljs-attr&quot;&gt;configurable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt; } &lt;span class=&quot;hljs-comment&quot;&gt;// Custom&lt;/span&gt;\n    || {}; &lt;span class=&quot;hljs-comment&quot;&gt;// or left to native default settings&lt;/span&gt;\n\n  [&lt;span class=&quot;hljs-string&quot;&gt;&quot;get&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;set&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;writable&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;enumerable&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;configurable&quot;&lt;/span&gt;]\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;attr&lt;/span&gt; =&amp;gt;&lt;/span&gt;\n      descriptor[attr] === &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt; &amp;amp;&amp;amp;\n      (descriptor[attr] = basisDesc[attr])\n    )\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; { get, set, value, writable, enumerable, configurable }\n    = descriptor\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;defineProperty&lt;/span&gt;(object, key, {\n    enumerable, configurable, ...get || set\n      ? { get, set } &lt;span class=&quot;hljs-comment&quot;&gt;// Accessor descriptor&lt;/span&gt;\n      : { value, writable } &lt;span class=&quot;hljs-comment&quot;&gt;// Data descriptor&lt;/span&gt;\n  })\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;// Tests&lt;/h2&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; obj0 = {\n  &lt;span class=&quot;hljs-attr&quot;&gt;u&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;nul&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;t&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;num&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;str&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;sym&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Symbol&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;symbol&quot;&lt;/span&gt;),\n  [&lt;span class=&quot;hljs-title class_&quot;&gt;Symbol&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;e&quot;&lt;/span&gt;)]: &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;E&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;arr&lt;/span&gt;: [[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]],\n  &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(),\n  &lt;span class=&quot;hljs-attr&quot;&gt;re&lt;/span&gt;: &lt;span class=&quot;hljs-regexp&quot;&gt;/f/g&lt;/span&gt;,\n  &lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;g&lt;/span&gt;() { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; },\n  &lt;span class=&quot;hljs-attr&quot;&gt;o&lt;/span&gt;: {\n    &lt;span class=&quot;hljs-attr&quot;&gt;n&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;o&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;f&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;...args&lt;/span&gt;) { } }\n  },\n  &lt;span class=&quot;hljs-attr&quot;&gt;f&lt;/span&gt;: {\n    &lt;span class=&quot;hljs-title function_&quot;&gt;getAccessorStr&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;object&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; []\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;concat&lt;/span&gt;(...\n          &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getOwnPropertyDescriptors&lt;/span&gt;(object))\n            .&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;desc&lt;/span&gt; =&amp;gt;&lt;/span&gt; desc.&lt;span class=&quot;hljs-property&quot;&gt;writable&lt;/span&gt; === &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;)\n            .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;desc&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;values&lt;/span&gt;(desc))\n        )\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;prop&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; prop === &lt;span class=&quot;hljs-string&quot;&gt;&quot;function&quot;&lt;/span&gt;)\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;)\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;f0&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;f0&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { },\n    &lt;span class=&quot;hljs-attr&quot;&gt;f1&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { },\n    &lt;span class=&quot;hljs-attr&quot;&gt;f2&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt; =&amp;gt;&lt;/span&gt; a / (a + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;),\n    &lt;span class=&quot;hljs-attr&quot;&gt;f3&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-title function_&quot;&gt;f4&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;params&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;param&lt;/span&gt; =&amp;gt;&lt;/span&gt; param + params },\n    &lt;span class=&quot;hljs-attr&quot;&gt;f5&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;{ c = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; } = {}&lt;/span&gt;) =&amp;gt;&lt;/span&gt; a + b + c\n  }\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;defineProp&lt;/span&gt;(obj0, &lt;span class=&quot;hljs-string&quot;&gt;&quot;s&quot;&lt;/span&gt;, { &lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;v&lt;/span&gt;) { &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;_s&lt;/span&gt; = v } })\n&lt;span class=&quot;hljs-title function_&quot;&gt;defineProp&lt;/span&gt;(obj0.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;tint&quot;&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;is&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;non-enumerable&quot;&lt;/span&gt; } })\nobj0.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;nested array&quot;&lt;/span&gt;\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj1 = &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(obj0)\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;o&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;n&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;o&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;o&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;g&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;g&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, b = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a + b }\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;d&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setTime&lt;/span&gt;(+obj0.&lt;span class=&quot;hljs-property&quot;&gt;d&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;60&lt;/span&gt; * &lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;)\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;tint&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;is&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;enumerable? no&quot;&lt;/span&gt;\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;a nested arr&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;defineProp&lt;/span&gt;(obj1, &lt;span class=&quot;hljs-string&quot;&gt;&quot;s&quot;&lt;/span&gt;, { &lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;v&lt;/span&gt;) { &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;_s&lt;/span&gt; = v + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; } })\n&lt;span class=&quot;hljs-title function_&quot;&gt;defineProp&lt;/span&gt;(obj1.&lt;span class=&quot;hljs-property&quot;&gt;re&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;multiline&quot;&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt; })\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n\\n&quot;&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;repeat&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; ** &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;))\n\n\n\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;gt;:&amp;gt;: Test - Routinely&quot;&lt;/span&gt;)\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;obj0:\\n &quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj0))\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;obj1:\\n &quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj1))\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;()\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;obj0:\\n &quot;&lt;/span&gt;, obj0)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;obj1:\\n &quot;&lt;/span&gt;, obj1)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;()\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;obj0\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;.arr.tint:&quot;&lt;/span&gt;, obj0.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;tint&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;.arr[0].name:&quot;&lt;/span&gt;, obj0.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt;\n)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;obj1\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;.arr.tint:&quot;&lt;/span&gt;, obj1.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;tint&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;.arr[0].name:&quot;&lt;/span&gt;, obj1.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt;\n)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;()\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Accessor-type descriptor\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;of obj0:&quot;&lt;/span&gt;, obj0.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getAccessorStr&lt;/span&gt;(obj0), &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;of obj1:&quot;&lt;/span&gt;, obj1.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getAccessorStr&lt;/span&gt;(obj1), &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;set (obj0 &amp;amp; obj1) .s :&quot;&lt;/span&gt;, obj0.&lt;span class=&quot;hljs-property&quot;&gt;s&lt;/span&gt; = obj1.&lt;span class=&quot;hljs-property&quot;&gt;s&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;   (obj0 , obj1) ._s:&quot;&lt;/span&gt;, obj0.&lt;span class=&quot;hljs-property&quot;&gt;_s&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;, obj1.&lt;span class=&quot;hljs-property&quot;&gt;_s&lt;/span&gt;\n)\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot; obj0 has not been interfered.&quot;&lt;/span&gt;)\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n\\n&quot;&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;repeat&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; ** &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;))\n\n\n\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;gt;:&amp;gt;: Test - More kinds of functions&quot;&lt;/span&gt;)\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; fnsForTest = {\n  &lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;_&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _ },\n  &lt;span class=&quot;hljs-attr&quot;&gt;func&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;_&lt;/span&gt; =&amp;gt;&lt;/span&gt; _,\n  &lt;span class=&quot;hljs-attr&quot;&gt;aFunc&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; _ =&amp;gt; _,\n  &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { },\n  &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;asyncFunc&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { },\n  &lt;span class=&quot;hljs-attr&quot;&gt;aFn&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { },\n  *&lt;span class=&quot;hljs-title function_&quot;&gt;gen&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { },\n  &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; *&lt;span class=&quot;hljs-title function_&quot;&gt;asyncGen&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { },\n  &lt;span class=&quot;hljs-attr&quot;&gt;aG1&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;* () { },\n  &lt;span class=&quot;hljs-attr&quot;&gt;aG2&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;* &lt;span class=&quot;hljs-title function_&quot;&gt;gen&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { },\n  *[&lt;span class=&quot;hljs-title class_&quot;&gt;Symbol&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;iterator&lt;/span&gt;]() { &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt;* &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;) }\n}\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Reflect&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;ownKeys&lt;/span&gt;(fnsForTest).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;k&lt;/span&gt; =&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${&lt;span class=&quot;hljs-built_in&quot;&gt;String&lt;/span&gt;(k)}&lt;/span&gt;:\n  &lt;span class=&quot;hljs-subst&quot;&gt;${fnsForTest[k].name}&lt;/span&gt;--&amp;gt;\n    &lt;span class=&quot;hljs-subst&quot;&gt;${&lt;span class=&quot;hljs-built_in&quot;&gt;String&lt;/span&gt;(fnsForTest[k])}&lt;/span&gt;`&lt;/span&gt;\n).&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;))\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; normedFnsStr = &lt;span class=&quot;hljs-string&quot;&gt;`{\n  f: function f(_) { return _ },\n  func: _ =&amp;gt; _,\n  aFunc: async _ =&amp;gt; _,\n  function: async function() { },\n  asyncFunc: async function asyncFunc() { },\n  aFn: async function () { },\n  gen: function* gen() { },\n  asyncGen: async function* asyncGen() { },\n  aG1: async function* () { },\n  aG2: async function* gen() { },\n  [Symbol.iterator]: function* () { yield* Object.keys(this) }\n}`&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; copiedFnsForTest = &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(fnsForTest)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;fnsForTest:&quot;&lt;/span&gt;, fnsForTest)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;fnsForTest (copied):&quot;&lt;/span&gt;, copiedFnsForTest)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;fnsForTest (normed str):&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;eval&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`(&lt;span class=&quot;hljs-subst&quot;&gt;${normedFnsStr}&lt;/span&gt;)`&lt;/span&gt;))\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Comparison of fnsForTest and its clone:&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-title class_&quot;&gt;Reflect&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;ownKeys&lt;/span&gt;(fnsForTest).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;k&lt;/span&gt; =&amp;gt;&lt;/span&gt;\n    [k, fnsForTest[k] === copiedFnsForTest[k]]\n  )\n)\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n\\n&quot;&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;repeat&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; ** &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;))\n\n\n\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;gt;:&amp;gt;: Test - Circular structures&quot;&lt;/span&gt;)\n\nobj0.&lt;span class=&quot;hljs-property&quot;&gt;o&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;r&lt;/span&gt; = {}\nobj0.&lt;span class=&quot;hljs-property&quot;&gt;o&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;r&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;recursion&lt;/span&gt; = obj0.&lt;span class=&quot;hljs-property&quot;&gt;o&lt;/span&gt;\nobj0.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = obj0.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;\n\nobj1 = &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(obj0)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;obj0:\\n &quot;&lt;/span&gt;, obj0)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;obj1:\\n &quot;&lt;/span&gt;, obj1)\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Clear obj0&apos;s recursion:&quot;&lt;/span&gt;,\n  obj0.&lt;span class=&quot;hljs-property&quot;&gt;o&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;r&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;recursion&lt;/span&gt; = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, obj0.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;obj0\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;.o.r:&quot;&lt;/span&gt;, obj0.&lt;span class=&quot;hljs-property&quot;&gt;o&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;r&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;.arr:&quot;&lt;/span&gt;, obj0.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;\n)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;obj1\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;.o.r:&quot;&lt;/span&gt;, obj1.&lt;span class=&quot;hljs-property&quot;&gt;o&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;r&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n &quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;.arr:&quot;&lt;/span&gt;, obj1.&lt;span class=&quot;hljs-property&quot;&gt;arr&lt;/span&gt;\n)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot; obj1 has not been interfered.&quot;&lt;/span&gt;)\n\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n\\n&quot;&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;repeat&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; ** &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;))\n\n\n\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;gt;:&amp;gt;: Test - Classes&quot;&lt;/span&gt;)\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Person&lt;/span&gt; {\n  &lt;span class=&quot;hljs-title function_&quot;&gt;constructor&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;name&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt; = name\n  }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Boy&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_ inherited__&quot;&gt;Person&lt;/span&gt; { }\n&lt;span class=&quot;hljs-title class_&quot;&gt;Boy&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;sex&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;M&quot;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; boy0 = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Boy&lt;/span&gt;\nboy0.&lt;span class=&quot;hljs-property&quot;&gt;hobby&lt;/span&gt; = { &lt;span class=&quot;hljs-attr&quot;&gt;sport&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;spaceflight&quot;&lt;/span&gt; }\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; boy1 = &lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(boy0)\nboy1.&lt;span class=&quot;hljs-property&quot;&gt;hobby&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;sport&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;superluminal flight&quot;&lt;/span&gt;\n\nboy0.&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;one&quot;&lt;/span&gt;\nboy1.&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;neo&quot;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;boy0:\\n &quot;&lt;/span&gt;, boy0)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;boy1:\\n &quot;&lt;/span&gt;, boy1)\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;boy1&apos;s prototype === boy0&apos;s:&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getPrototypeOf&lt;/span&gt;(boy1) === &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getPrototypeOf&lt;/span&gt;(boy0)\n)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1&gt;References&lt;/h1&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;a href=&quot;https://mdn.io/Object/create&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;Object.create()&lt;/code&gt; | MDN&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://mdn.io/Object/defineProperties&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;Object.defineProperties()&lt;/code&gt; | MDN&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties#Detection_Table&quot; rel=&quot;nofollow noreferrer&quot;&gt;Enumerability and ownership of properties | MDN&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://mdn.io/Errors/Cyclic_object_value&quot; rel=&quot;nofollow noreferrer&quot;&gt;TypeError: cyclic object value | MDN&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;Language tricks used&lt;/h1&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/40560953&quot;&gt;Conditionally add prop to object&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;&lt;strong&gt;&lt;em&gt;&lt;a href=&quot;https://lodash.com/docs/4.17.15#cloneDeep&quot; rel=&quot;noreferrer&quot;&gt;Use lodash _.cloneDeep().&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;em&gt;Shallow Copy: lodash _.clone()&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;A shallow copy can be made by simply copying the reference.&lt;/em&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj1 = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n        &lt;span class=&quot;hljs-attr&quot;&gt;e&lt;/span&gt;: {\n            &lt;span class=&quot;hljs-attr&quot;&gt;f&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n        }\n    }\n};\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj3 = _.&lt;span class=&quot;hljs-title function_&quot;&gt;clone&lt;/span&gt;(obj1);\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;b&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;c&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;b&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;e&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj1));\n&lt;span class=&quot;hljs-comment&quot;&gt;//{&quot;a&quot;:4,&quot;b&quot;:{&quot;c&quot;:4,&quot;e&quot;:{&quot;f&quot;:100}}}&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj3));\n&lt;span class=&quot;hljs-comment&quot;&gt;//{&quot;a&quot;:0,&quot;b&quot;:{&quot;c&quot;:4,&quot;e&quot;:{&quot;f&quot;:100}}}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/vmysI.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/vmysI.png&quot; alt=&quot;Shallow Copy: lodash _.clone()&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;em&gt;Deep Copy: lodash _.cloneDeep()&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;fields are dereferenced: rather than references to objects being copied&lt;/em&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj1 = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n        &lt;span class=&quot;hljs-attr&quot;&gt;e&lt;/span&gt;: {\n            &lt;span class=&quot;hljs-attr&quot;&gt;f&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n        }\n    }\n};\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj3 = _.&lt;span class=&quot;hljs-title function_&quot;&gt;cloneDeep&lt;/span&gt;(obj1);\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;;\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;b&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;c&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;;\nobj1.&lt;span class=&quot;hljs-property&quot;&gt;b&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;e&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj1));\n{&lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;:{&lt;span class=&quot;hljs-string&quot;&gt;&quot;c&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;e&quot;&lt;/span&gt;:{&lt;span class=&quot;hljs-string&quot;&gt;&quot;f&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;}}}\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj3));\n{&lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;:{&lt;span class=&quot;hljs-string&quot;&gt;&quot;c&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;e&quot;&lt;/span&gt;:{&lt;span class=&quot;hljs-string&quot;&gt;&quot;f&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;}}}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/z0M6n.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/z0M6n.png&quot; alt=&quot;Deep Copy: lodash _.cloneDeep()&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n    "],"224":["\n&lt;p&gt;&lt;code&gt;.gitignore&lt;/code&gt; will prevent untracked files from being added (without an &lt;code&gt;add -f&lt;/code&gt;) to the set of files tracked by Git. However, Git will continue to track any files that are already being tracked.&lt;/p&gt;\n&lt;p&gt;To stop tracking a file, you need to remove it from the index. This can be achieved with this command.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git rm --cached &amp;lt;file&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;If you want to remove a whole folder, you need to remove all files in it recursively.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git rm -r --cached &amp;lt;folder&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The removal of the file from the head revision will happen on the next commit.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;WARNING: While this will not remove the physical file from your local machine, it will remove the files from other developers&apos; machines on their next &lt;code&gt;git pull&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;The series of commands below will remove all of the items from the Git index (not from the working directory or local repository), and then will update the Git index, while respecting Git ignores. &lt;em&gt;PS. Index = Cache&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;First:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git rm -r --cached .\ngit add .\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Then:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git commit -am &quot;Remove ignored files&quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;Or as a one-liner:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git rm -r --cached . &amp;amp;&amp;amp; git add . &amp;amp;&amp;amp; git commit -am &quot;Remove ignored files&quot;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;https://www.git-scm.com/docs/git-update-index&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;git update-index&lt;/code&gt;&lt;/a&gt; does the job for me:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git update-index --assume-unchanged &amp;lt;file&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; This solution is actually independent on &lt;code&gt;.gitignore&lt;/code&gt; as gitignore is only for untracked files.&lt;/p&gt;\n&lt;hr&gt;\n&lt;h1&gt;Update, a better option&lt;/h1&gt;\n&lt;p&gt;Since this answer was posted, a new option has been created and that should be preferred.  You should use &lt;code&gt;--skip-worktree&lt;/code&gt; which is for modified tracked files that the user don&apos;t want to commit anymore and keep &lt;code&gt;--assume-unchanged&lt;/code&gt; for performance to prevent git to check status of big tracked files. See &lt;a href=&quot;https://stackoverflow.com/a/13631525/717372&quot;&gt;https://stackoverflow.com/a/13631525/717372&lt;/a&gt; for more details...&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git update-index --skip-worktree &amp;lt;file&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;To cancel&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git update-index --no-skip-worktree &amp;lt;file&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre&gt;&lt;code&gt;git ls-files -c --ignored --exclude-standard -z | xargs -0 git rm --cached\ngit commit -am &quot;Remove ignored files&quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This takes the list of the ignored files, removes them from the index, and commits the changes.&lt;/p&gt;\n    ","\n&lt;p&gt;Move it out, commit, and then move it back in.&lt;/p&gt;\n&lt;p&gt;This has worked for me in the past, but there is probably a &apos;gittier&apos; way to accomplish this.&lt;/p&gt;\n    ","\n&lt;p&gt;I always use this command to remove those untracked files.\nOne-line, Unix-style, clean output:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git ls-files --ignored --exclude-standard | sed &apos;s/.*/&quot;&amp;amp;&quot;/&apos; | xargs git rm -r --cached\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;It lists all your ignored files, replaces every output line with a quoted line instead to handle paths with spaces inside, and passes everything to &lt;code&gt;git rm -r --cached&lt;/code&gt; to remove the paths/files/directories from the index.&lt;/p&gt;\n    ","\n&lt;p&gt;The copy/paste answer is:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git rm --cached -r .; git add .; git status; git commit -m &quot;Ignore unwanted files&quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This command will NOT change the content of the &lt;code&gt;.gitignore&lt;/code&gt; file. It will just ignore the files that have already been committed to a Git repository but now we have added them to &lt;code&gt;.gitignore&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;The command &lt;code&gt;git status;&lt;/code&gt; is just to review the changes and could be dropped.&lt;/p&gt;\n&lt;p&gt;In the end, it will immediately commit the changes with the message &quot;&lt;em&gt;Ignore unwanted files&lt;/em&gt;&quot;.&lt;/p&gt;\n&lt;p&gt;If you don&apos;t want to commit the changes, drop the last part of the command (&lt;code&gt;git commit -m &quot;Ignore unwanted files&quot;&lt;/code&gt;)&lt;/p&gt;\n    ","\n&lt;h2 id=&quot;use-this-when-prx8&quot;&gt;Use this when:&lt;/h2&gt;\n&lt;ol&gt;\n&lt;li&gt;You want to untrack a lot of files, or&lt;/li&gt;\n&lt;li&gt;You updated your &lt;em&gt;.gitignore&lt;/em&gt; file&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Source: &lt;em&gt;&lt;a href=&quot;http://www.codeblocq.com/2016/01/Untrack-files-already-added-to-git-repository-based-on-gitignore/&quot; rel=&quot;noreferrer&quot;&gt;Untrack files already added to Git repository based on .gitignore&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;Lets say you have already added/committed some files to your Git repository and you then add them to your &lt;em&gt;.gitignore&lt;/em&gt; file; these files will still be present in your repository index. This article we will see how to get rid of them.&lt;/p&gt;\n&lt;h3 id=&quot;step-1-commit-all-your-changes-2cno&quot;&gt;Step 1: Commit all your changes&lt;/h3&gt;\n&lt;p&gt;Before proceeding, make sure all your changes are committed, including your &lt;em&gt;.gitignore&lt;/em&gt; file.&lt;/p&gt;\n&lt;h3 id=&quot;step-2-remove-everything-from-the-repository-x8vb&quot;&gt;Step 2: Remove everything from the repository&lt;/h3&gt;\n&lt;p&gt;To clear your repository, use:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git rm -r --cached .\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://git-scm.com/docs/git-rm&quot; rel=&quot;noreferrer&quot;&gt;rm&lt;/a&gt; is the remove command&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;-r&lt;/strong&gt; will allow recursive removal&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;cached&lt;/strong&gt; will only remove files from the index. Your files will still be there.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;The &lt;code&gt;rm&lt;/code&gt; command can be unforgiving. If you wish to try what it does beforehand, add the &lt;code&gt;-n&lt;/code&gt; or &lt;code&gt;--dry-run&lt;/code&gt; flag to test things out.&lt;/p&gt;\n&lt;h3 id=&quot;step-3-readd-everything-ac9b&quot;&gt;Step 3: Readd everything&lt;/h3&gt;\n&lt;pre&gt;&lt;code&gt;git add .\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=&quot;step-4-commit-y1uy&quot;&gt;Step 4: Commit&lt;/h3&gt;\n&lt;pre&gt;&lt;code&gt;git commit -m &quot;.gitignore fix&quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Your repository is clean :)&lt;/p&gt;\n&lt;p&gt;Push the changes to your remote to see the changes effective there as well.&lt;/p&gt;\n    ","\n&lt;p&gt;If you cannot &lt;code&gt;git rm&lt;/code&gt; a tracked file because other people might need it (warning, even if &lt;em&gt;you&lt;/em&gt; &lt;code&gt;git rm --cached&lt;/code&gt;, when someone else gets this change, their files will be deleted in their filesystem).  These are often done due to config file overrides, authentication credentials, etc. Please look at &lt;a href=&quot;https://gist.github.com/1423106&quot; rel=&quot;noreferrer&quot;&gt;https://gist.github.com/1423106&lt;/a&gt; for ways people have worked around the problem.&lt;/p&gt;\n\n&lt;p&gt;To summarize:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Have your application look for an ignored file config-overide.ini and use that over the committed file config.ini (or alternately, look for ~/.config/myapp.ini, or $MYCONFIGFILE)&lt;/li&gt;\n&lt;li&gt;Commit file config-sample.ini and ignore file config.ini, have a script or similar copy the file as necessary if necessary.&lt;/li&gt;\n&lt;li&gt;Try to use gitattributes clean/smudge magic to apply and remove the changes for you, for instance smudge the config file as a checkout from an alternate branch and clean the config file as a checkout from HEAD.  This is tricky stuff, I don&apos;t recommend it for the novice user.&lt;/li&gt;\n&lt;li&gt;Keep the config file on a deploy branch dedicated to it that is never merged to master.  When you want to deploy/compile/test you merge to that branch and get that file.  This is essentially the smudge/clean approach except using human merge policies and extra-git modules.&lt;/li&gt;\n&lt;li&gt;Anti-recommentation: Don&apos;t use assume-unchanged, it will only end in tears (because having git lie to itself will cause bad things to happen, like your change being lost forever).&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;I accomplished this by using &lt;a href=&quot;http://git-scm.com/docs/git-filter-branch&quot; rel=&quot;noreferrer&quot;&gt;git filter-branch&lt;/a&gt;. The exact command I used was taken from the man page:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;WARNING&lt;/strong&gt;: this will delete the file from your entire history&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;git filter-branch --index-filter &apos;git rm --cached --ignore-unmatch filename&apos; HEAD\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This command will recreate the entire commit history, executing &lt;code&gt;git rm&lt;/code&gt; before each commit and so will get rid of the specified file. Don&apos;t forget to back it up before running the command as it &lt;em&gt;will&lt;/em&gt; be lost.&lt;/p&gt;\n    ","\n&lt;h3&gt;What didn&apos;t work for me&lt;/h3&gt;\n&lt;p&gt;(Under Linux), I wanted to use the posts here suggesting the &lt;code&gt;ls-files --ignored --exclude-standard | xargs git rm -r --cached&lt;/code&gt; approach.  However, (some of) the files to be removed had an embedded newline/LF/&lt;code&gt;\\n&lt;/code&gt; in their names.  Neither of the solutions:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git ls-files --ignored --exclude-standard | xargs -d&quot;\\n&quot; git rm --cached\ngit ls-files --ignored --exclude-standard | sed &apos;s/.*/&quot;&amp;amp;&quot;/&apos; | xargs git rm -r --cached\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;cope with this situation (get errors about files not found).&lt;/p&gt;\n&lt;h3&gt;So I offer&lt;/h3&gt;\n&lt;pre&gt;&lt;code&gt;git ls-files -z --ignored --exclude-standard | xargs -0 git rm -r --cached\ngit commit -am &quot;Remove ignored files&quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This uses the &lt;code&gt;-z&lt;/code&gt; argument to &lt;strong&gt;ls-files&lt;/strong&gt;, and the &lt;code&gt;-0&lt;/code&gt; argument to &lt;strong&gt;xargs&lt;/strong&gt; to cater safely/correctly for &quot;nasty&quot; characters in filenames.&lt;/p&gt;\n&lt;p&gt;In the manual page &lt;strong&gt;git-ls-files(1)&lt;/strong&gt;, it states:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;When -z option is not used, TAB, LF, and backslash characters in\npathnames are represented as \\t, \\n, and \\\\, respectively.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;so I think my solution is needed if filenames have any of these characters in them.&lt;/p&gt;\n    ","\n&lt;p&gt;Do the following steps for a file/folder:&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Remove a File:&lt;/strong&gt;&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;need to add that file to .gitignore.&lt;/li&gt;\n&lt;li&gt;need to remove that file using the command (&lt;strong&gt;git rm --cached file name&lt;/strong&gt;).&lt;/li&gt;\n&lt;li&gt;need to run (&lt;strong&gt;git add .&lt;/strong&gt;).&lt;/li&gt;\n&lt;li&gt;need to (&lt;strong&gt;commit -m&lt;/strong&gt;) &quot;file removed&quot;.&lt;/li&gt;\n&lt;li&gt;and finally, (&lt;strong&gt;git push&lt;/strong&gt;).&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;For example:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;I want to delete the &lt;em&gt;test.txt&lt;/em&gt; file. I accidentally pushed to GitHub and want to remove it. Commands will be as follows:&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;First, add &quot;test.txt&quot; in file &lt;em&gt;.gitignore&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git rm --cached test.txt\ngit add .\ngit commit -m &quot;test.txt removed&quot;\ngit push\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Remove Folder:&lt;/strong&gt;&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;need to add that folder to file &lt;em&gt;.gitignore&lt;/em&gt;.&lt;/li&gt;\n&lt;li&gt;need to remove that folder using the command (&lt;strong&gt;git rm -r --cached folder name&lt;/strong&gt;).&lt;/li&gt;\n&lt;li&gt;need to run (&lt;strong&gt;git add .&lt;/strong&gt;).&lt;/li&gt;\n&lt;li&gt;need to (&lt;strong&gt;commit -m&lt;/strong&gt;) &quot;folder removed&quot;.&lt;/li&gt;\n&lt;li&gt;and finally, (&lt;strong&gt;git push&lt;/strong&gt;).&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;For example:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;I want to delete the &lt;em&gt;.idea&lt;/em&gt; folder/directory. I accidentally pushed to GitHub and want to remove it. The commands will be as follows:&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;First, add &lt;em&gt;.idea&lt;/em&gt; in file &lt;em&gt;.gitignore&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git rm -r --cached .idea\ngit add .\ngit commit -m &quot;.idea removed&quot;\ngit push\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;Update your &lt;code&gt;.gitignore&lt;/code&gt; file  for instance, add a folder you don&apos;t want to track to &lt;code&gt;.gitignore&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;git rm -r --cached .&lt;/code&gt;  Remove all tracked files, including wanted and unwanted. Your code will be safe as long as you have saved locally.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;git add .&lt;/code&gt;  All files will be added back in, except those in &lt;code&gt;.gitignore&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Hat tip to @AkiraYamamoto for pointing us in the right direction.&lt;/p&gt;\n    ","\n&lt;p&gt;Do the following steps serially, and you will be fine.&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Remove&lt;/strong&gt; the mistakenly added files &lt;strong&gt;from the directory/storage&lt;/strong&gt;. You can use the &quot;rm -r&quot; (for Linux) command or delete them by browsing the directories. Or move them to another location on your PC. (You maybe need to close the IDE if running for &lt;strong&gt;moving/removing&lt;/strong&gt;.)&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Add the files / directories to the &lt;em&gt;.gitignore&lt;/em&gt; file now and save it.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Now &lt;strong&gt;remove&lt;/strong&gt; them from the &lt;strong&gt;Git cache&lt;/strong&gt; by using these commands (if there is more than one directory, remove them one by one by repeatedly issuing this command)&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt; git rm -r --cached path-to-those-files\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Now &lt;strong&gt;do&lt;/strong&gt; a &lt;strong&gt;commit and push&lt;/strong&gt; by using the following commands. This will &lt;em&gt;remove those files from Git remote&lt;/em&gt; and make Git &lt;em&gt;stop tracking&lt;/em&gt; those files.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt; git add .\n git commit -m &quot;removed unnecessary files from Git&quot;\n git push origin\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n    ","\n&lt;p&gt;I think, that maybe Git can&apos;t totally forget about a file because of its conception (&lt;a href=&quot;https://git-scm.com/book/en/v2/Getting-Started-Git-Basics&quot; rel=&quot;nofollow noreferrer&quot;&gt;section &quot;Snapshots, Not Differences&quot;&lt;/a&gt;).&lt;/p&gt;\n&lt;p&gt;This problem is absent, for example, when using &lt;a href=&quot;https://en.wikipedia.org/wiki/Concurrent_Versions_System&quot; rel=&quot;nofollow noreferrer&quot;&gt;CVS&lt;/a&gt;. CVS stores information as a list of file-based changes. Information for CVS is a set of files and the changes made to each file over time.&lt;/p&gt;\n&lt;p&gt;But in Git every time you commit, or save the state of your project, it basically takes a picture of what &lt;em&gt;&lt;strong&gt;all your files&lt;/strong&gt;&lt;/em&gt; look like at that moment and stores a reference to that snapshot. So, if you added file once, it will always be present  in that snapshot.&lt;/p&gt;\n&lt;p&gt;These two articles were helpful for me:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;http://fallengamer.livejournal.com/93321.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;git assume-unchanged vs skip-worktree&lt;/a&gt; and &lt;a href=&quot;http://blog.stephan-partzsch.de/how-to-ignore-changes-in-tracked-files-with-git/&quot; rel=&quot;nofollow noreferrer&quot;&gt;How to ignore changes in tracked files with Git&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;Basing on it I do the following, if the file is already tracked:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git update-index --skip-worktree &amp;lt;file&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;From this moment all local changes in this file will be ignored and will not go to remote. If the file is changed on remote, conflict will occur, when &lt;code&gt;git pull&lt;/code&gt;. Stash won&apos;t work. To resolve it, &lt;em&gt;copy the file content to the safe place&lt;/em&gt; and follow these steps:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git update-index --no-skip-worktree &amp;lt;file&amp;gt;\ngit stash\ngit pull\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The file content will be replaced by the remote content. Paste your changes from the safe place to the file and perform again:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git update-index --skip-worktree &amp;lt;file&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;If everyone, who works with the project, will perform &lt;code&gt;git update-index --skip-worktree &amp;lt;file&amp;gt;&lt;/code&gt;, problems with &lt;code&gt;pull&lt;/code&gt; should be absent. This solution is OK for configurations files, when every developer has their own project configuration.&lt;/p&gt;\n&lt;p&gt;It is not very convenient to do this every time, when the file has been changed on remote, but it can protect it from overwriting by remote content.&lt;/p&gt;\n    ","\n&lt;p&gt;Using the &lt;code&gt;git rm --cached&lt;/code&gt; command does not answer the original question:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;How do you force &lt;code&gt;git&lt;/code&gt; to completely forget about [a file]?&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;In fact, this solution will cause the file to be &lt;strong&gt;deleted&lt;/strong&gt; in every other instance of the repository when executing a &lt;code&gt;git pull&lt;/code&gt;!&lt;/p&gt;\n&lt;p&gt;The correct way to force Git to forget about a file is documented by GitHub &lt;a href=&quot;https://help.github.com/en/articles/removing-sensitive-data-from-a-repository&quot; rel=&quot;nofollow noreferrer&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;I recommend reading the documentation, but basically:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git fetch --all\ngit filter-branch --force --index-filter &apos;git rm --cached --ignore-unmatch full/path/to/file&apos; --prune-empty --tag-name-filter cat -- --all\ngit push origin --force --all\ngit push origin --force --tags\ngit for-each-ref --format=&apos;delete %(refname)&apos; refs/original | git update-ref --stdin\ngit reflog expire --expire=now --all\ngit gc --prune=now\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Just replace &lt;code&gt;full/path/to/file&lt;/code&gt; with the full path of the file. Make sure you&apos;ve added the file to your &lt;code&gt;.gitignore&lt;/code&gt; file.&lt;/p&gt;\n&lt;p&gt;You&apos;ll also need to (temporarily) &lt;a href=&quot;https://stackoverflow.com/a/10544328/4901390&quot;&gt;allow non-fast-forward pushes to your repository&lt;/a&gt;, since you&apos;re changing your Git history.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;code&gt;git rm --cached -r &amp;lt;YOUR_files_or_folders&amp;gt;&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;--cached  | only remove files from the index&lt;/p&gt;\n    ","\n&lt;p&gt;The &lt;a href=&quot;https://stackoverflow.com/questions/1274057/how-can-i-make-git-forget-about-a-file-that-was-tracked-but-is-now-in-gitign/19095988#19095988&quot;&gt;answer from Matt Frear&lt;/a&gt; was the most effective IMHO. The following is just a PowerShell script for those on Windows to only remove files from their Git repository that matches their exclusion list.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;# Get files matching exclusionsfrom .gitignore\n# Excluding comments and empty lines\n$ignoreFiles =  gc .gitignore | ?{$_ -notmatch  &quot;#&quot;} |  ?{$_ -match  &quot;\\S&quot;} | % {\n                    $ignore = &quot;*&quot; + $_ + &quot;*&quot;\n                    (gci -r -i $ignore).FullName\n                }\n$ignoreFiles = $ignoreFiles| ?{$_ -match  &quot;\\S&quot;}\n\n# Remove each of these file from Git\n$ignoreFiles | % { git rm $_}\n\ngit add .\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Move or copy the file to a safe location, so you don&apos;t lose it. Then &apos;git rm&apos; the file and commit.&lt;/p&gt;\n&lt;p&gt;The file will still show up if you revert to one of those earlier commits, or another branch where it has not been removed. However, in all future commits, you will not see the file again. If the file is in the Git ignore, then you can move it back into the folder, and Git won&apos;t see it.&lt;/p&gt;\n    ","\n&lt;p&gt;In my case I needed to put &quot;&lt;code&gt;.envrc&lt;/code&gt;&quot; in the &lt;em&gt;.gitignore&lt;/em&gt; file.&lt;/p&gt;\n&lt;p&gt;And then I used:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git update-index --skip-worktree .envrc\ngit rm --cached .envrc\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;And the file was removed.&lt;/p&gt;\n&lt;p&gt;Then I committed again, telling that the file was removed.&lt;/p&gt;\n&lt;p&gt;But when I used the command &lt;code&gt;git log -p&lt;/code&gt;, the content of the file (which was secret credentials of the &lt;a href=&quot;https://en.wikipedia.org/wiki/Amazon_S3&quot; rel=&quot;noreferrer&quot;&gt;Amazon S3&lt;/a&gt;) was showing the content which was removed and I don&apos;t want to show this content ever on the history of the Git repository.&lt;/p&gt;\n&lt;p&gt;Then I used this command:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git filter-branch --index-filter &apos;git rm --cached --ignore-unmatch .envrc&apos; HEAD\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;And I don&apos;t see the content again.&lt;/p&gt;\n    ","\n&lt;p&gt;I liked &lt;a href=&quot;https://stackoverflow.com/questions/1274057/how-can-i-make-git-forget-about-a-file-that-was-tracked-but-is-now-in-gitign/34511442#34511442&quot;&gt;JonBrave&apos;s answer&lt;/a&gt;, but I have messy enough working directories that &lt;code&gt;commit -a&lt;/code&gt; scares me a bit, so here&apos;s what I&apos;ve done:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git config --global alias.exclude-ignored &apos;!git ls-files -z --ignored --exclude-standard | xargs -0 git rm -r --cached &amp;amp;&amp;amp;  git ls-files -z --ignored --exclude-standard | xargs -0 git stage &amp;amp;&amp;amp;  git stage .gitignore &amp;amp;&amp;amp; git commit -m &quot;new gitignore and remove ignored files from index&quot;&apos;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Breaking it down:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git ls-files -z --ignored --exclude-standard | xargs -0 git rm -r --cached\ngit ls-files -z --ignored --exclude-standard | xargs -0 git stage\ngit stage .gitignore\ngit commit -m &quot;new gitignore and remove ignored files from index&quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ul&gt;\n&lt;li&gt;remove ignored files from the index&lt;/li&gt;\n&lt;li&gt;stage .gitignore and the files you just removed&lt;/li&gt;\n&lt;li&gt;commit&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;The accepted answer does not &quot;make Git &lt;strong&gt;&quot;forget&quot;&lt;/strong&gt; about a file...&quot; (historically).  It only makes Git &lt;strong&gt;ignore&lt;/strong&gt; the file in the present/future.&lt;/p&gt;\n&lt;p&gt;This method makes Git &lt;strong&gt;completely forget&lt;/strong&gt; ignored files (&lt;strong&gt;past&lt;/strong&gt;/present/future), but it does &lt;strong&gt;not&lt;/strong&gt; delete anything from the working directory (even when re-pulled from remote).&lt;/p&gt;\n&lt;p&gt;This method requires usage of file &lt;code&gt;/.git/info/exclude&lt;/code&gt; (preferred) &lt;strong&gt;or&lt;/strong&gt; a &lt;strong&gt;pre-existing&lt;/strong&gt; &lt;code&gt;.gitignore&lt;/code&gt; in &lt;strong&gt;all&lt;/strong&gt; the commits that have files to be ignored/forgotten. &lt;sup&gt;1&lt;/sup&gt;&lt;/p&gt;\n&lt;p&gt;All methods of enforcing Git ignore behavior after-the-fact effectively rewrite history and thus have &lt;a href=&quot;https://stackoverflow.com/q/1491001&quot;&gt;significant ramifications&lt;/a&gt; for any public/shared/collaborative repositories that might be pulled after this process. &lt;sup&gt;2&lt;/sup&gt;&lt;/p&gt;\n&lt;p&gt;General advice: &lt;strong&gt;start with a clean repository&lt;/strong&gt; - everything committed, nothing pending in working directory or index, &lt;strong&gt;and make a backup&lt;/strong&gt;!&lt;/p&gt;\n&lt;p&gt;Also, the comments/&lt;a href=&quot;https://stackoverflow.com/posts/57454176/revisions&quot;&gt;revision history&lt;/a&gt; of &lt;a href=&quot;https://stackoverflow.com/a/57454176&quot;&gt;this answer&lt;/a&gt; (&lt;a href=&quot;https://stackoverflow.com/posts/57418769/revisions&quot;&gt;and revision history&lt;/a&gt; of &lt;a href=&quot;https://stackoverflow.com/posts/57418769&quot;&gt;this question&lt;/a&gt;) may be useful/enlightening.&lt;/p&gt;\n&lt;pre class=&quot;lang-sh s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;#Commit up-to-date .gitignore (if not already existing)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#This command must be run on each branch&lt;/span&gt;\n\ngit add .gitignore\ngit commit -m &lt;span class=&quot;hljs-string&quot;&gt;&quot;Create .gitignore&quot;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#Apply standard Git ignore behavior only to the current index, not the working directory (--cached)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#If this command returns nothing, ensure /.git/info/exclude AND/OR .gitignore exist&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#This command must be run on each branch&lt;/span&gt;\n\ngit ls-files -z --ignored --exclude-standard | xargs -0 git &lt;span class=&quot;hljs-built_in&quot;&gt;rm&lt;/span&gt; --cached\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#Commit to prevent working directory data loss!&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#This commit will be automatically deleted by the --prune-empty flag in the following command&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#This command must be run on each branch&lt;/span&gt;\n\ngit commit -m &lt;span class=&quot;hljs-string&quot;&gt;&quot;ignored index&quot;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#Apply standard git ignore behavior RETROACTIVELY to all commits from all branches (--all)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#This step WILL delete ignored files from working directory UNLESS they have been dereferenced from the index by the commit above&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#This step will also delete any &quot;empty&quot; commits.  If deliberate &quot;empty&quot; commits should be kept, remove --prune-empty and instead run git reset HEAD^ immediately after this command&lt;/span&gt;\n\ngit filter-branch --tree-filter &lt;span class=&quot;hljs-string&quot;&gt;&apos;git ls-files -z --ignored --exclude-standard | xargs -0 git rm -f --ignore-unmatch&apos;&lt;/span&gt; --prune-empty --tag-name-filter &lt;span class=&quot;hljs-built_in&quot;&gt;cat&lt;/span&gt; -- --all\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#List all still-existing files that are now ignored properly&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#If this command returns nothing, it&apos;s time to restore from backup and start over&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#This command must be run on each branch&lt;/span&gt;\n\ngit ls-files --other --ignored --exclude-standard\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;Finally, follow the rest of this &lt;a href=&quot;https://help.github.com/en/articles/removing-sensitive-data-from-a-repository&quot; rel=&quot;nofollow noreferrer&quot;&gt;GitHub guide&lt;/a&gt; (starting at step 6) &lt;strong&gt;which includes important warnings/information about the commands below&lt;/strong&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-sh s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;git push origin --force --all\ngit push origin --force --tags\ngit for-each-ref --format=&lt;span class=&quot;hljs-string&quot;&gt;&quot;delete %(refname)&quot;&lt;/span&gt; refs/original | git update-ref --stdin\ngit reflog expire --expire=now --all\ngit gc --prune=now\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;Other developers that pull from the now-modified remote repository should make a backup and then:&lt;/p&gt;\n&lt;pre class=&quot;lang-sh s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;#fetch modified remote&lt;/span&gt;\n\ngit fetch --all\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#&quot;Pull&quot; changes WITHOUT deleting newly-ignored files from working directory&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#This will overwrite local tracked files with remote - ensure any local modifications are backed-up/stashed&lt;/span&gt;\n\ngit reset FETCH_HEAD\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;h2 id=&quot;footnotes-6jhk&quot;&gt;Footnotes&lt;/h2&gt;\n&lt;p&gt;&lt;sup&gt;1&lt;/sup&gt; Because &lt;code&gt;/.git/info/exclude&lt;/code&gt; can be applied to all historical commits using the instructions above, perhaps details about getting a &lt;code&gt;.gitignore&lt;/code&gt; file &lt;em&gt;into&lt;/em&gt; the historical commit(s) that need it is beyond the scope of this answer.  I wanted a proper &lt;code&gt;.gitignore&lt;/code&gt; file to be in the root commit, as if it was the first thing I did.  Others may not care since &lt;code&gt;/.git/info/exclude&lt;/code&gt; can accomplish the same thing regardless where the &lt;code&gt;.gitignore&lt;/code&gt; file exists in the commit history, and clearly rewriting history is a &lt;strong&gt;very&lt;/strong&gt; touchy subject, even when aware of the &lt;a href=&quot;https://stackoverflow.com/q/1491001&quot;&gt;ramifications&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;FWIW, potential methods may include &lt;code&gt;git rebase&lt;/code&gt; or a &lt;code&gt;git filter-branch&lt;/code&gt; that copies an &lt;em&gt;external&lt;/em&gt; &lt;code&gt;.gitignore&lt;/code&gt; into each commit, like the answers to &lt;a href=&quot;https://stackoverflow.com/q/43463687&quot;&gt;this question&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;&lt;sup&gt;2&lt;/sup&gt; Enforcing Git ignore behavior after-the-fact by committing the results of a stand-alone &lt;code&gt;git rm --cached&lt;/code&gt; command may result in newly-ignored file &lt;strong&gt;deletion&lt;/strong&gt; in future pulls from the force-pushed remote. The &lt;code&gt;--prune-empty&lt;/code&gt; flag in the following &lt;code&gt;git filter-branch&lt;/code&gt; command avoids this problem by automatically removing the previous &quot;delete all ignored files&quot; index-only commit.  Rewriting Git history also changes commit hashes, which will &lt;a href=&quot;https://stackoverflow.com/q/1491001&quot;&gt;wreak havoc&lt;/a&gt; on future pulls from public/shared/collaborative repositories.  Please understand the &lt;a href=&quot;https://stackoverflow.com/q/1491001&quot;&gt;ramifications&lt;/a&gt; fully before doing this to such a repository. &lt;a href=&quot;https://help.github.com/en/articles/removing-sensitive-data-from-a-repository&quot; rel=&quot;nofollow noreferrer&quot;&gt;This GitHub guide&lt;/a&gt; specifies the following:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Tell your collaborators to &lt;a href=&quot;https://git-scm.com/book/en/Git-Branching-Rebasing&quot; rel=&quot;nofollow noreferrer&quot;&gt;rebase&lt;/a&gt;, &lt;em&gt;not&lt;/em&gt; merge, any branches they created off of your old (tainted) repository history. One merge commit could reintroduce some or all of the tainted history that you just went to the trouble of purging.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;Alternative solutions that &lt;strong&gt;do not&lt;/strong&gt; affect the remote repository are &lt;code&gt;git update-index --assume-unchanged &amp;lt;/path/file&amp;gt;&lt;/code&gt; or &lt;code&gt;git update-index --skip-worktree &amp;lt;file&amp;gt;&lt;/code&gt;, examples of which can be found &lt;a href=&quot;https://stackoverflow.com/a/20241145&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;The &lt;a href=&quot;https://rtyley.github.io/bfg-repo-cleaner/&quot; rel=&quot;nofollow noreferrer&quot;&gt;BFG&lt;/a&gt; is specifically designed for removing unwanted data like big files or passwords from Git repositories, so it has a simple flag that will remove any large historical (not-in-your-current-commit) files: &apos;--strip-blobs-bigger-than&apos;&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;java -jar bfg.jar --strip-blobs-bigger-than 100M\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;If you&apos;d like to specify files by name, you can do that too:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;java -jar bfg.jar --delete-files *.mp4\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The BFG is 10-1000x faster than &lt;code&gt;git filter-branch&lt;/code&gt; and is generally much easier to use - check the &lt;a href=&quot;https://rtyley.github.io/bfg-repo-cleaner/#usage&quot; rel=&quot;nofollow noreferrer&quot;&gt;full usage instructions&lt;/a&gt; and &lt;a href=&quot;https://rtyley.github.io/bfg-repo-cleaner/#examples&quot; rel=&quot;nofollow noreferrer&quot;&gt;examples&lt;/a&gt; for more details.&lt;/p&gt;\n&lt;p&gt;Source: &lt;em&gt;&lt;a href=&quot;https://confluence.atlassian.com/bitbucket/reduce-repository-size-321848262.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;Reduce repository size&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;If you don&apos;t want to use the CLI and are working on Windows, a very simple solution is to use &lt;a href=&quot;https://tortoisegit.org/&quot; rel=&quot;nofollow noreferrer&quot;&gt;TortoiseGit&lt;/a&gt;. It has the &quot;Delete (keep local)&quot; Action in the menu which works fine.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;This is no longer an issue in the latest Git&lt;/strong&gt; (v2.17.1 at the time of writing).&lt;/p&gt;\n&lt;p&gt;The &lt;em&gt;.gitignore&lt;/em&gt; file finally ignores tracked-but-deleted files. You can test this for yourself by running the following script. The final &lt;code&gt;git status&lt;/code&gt; statement should report &quot;nothing to commit&quot;.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;# Create an empty repository\nmkdir gitignore-test\ncd gitignore-test\ngit init\n\n# Create a file and commit it\necho &quot;hello&quot; &amp;gt; file\ngit add file\ngit commit -m initial\n\n# Add the file to gitignore and commit\necho &quot;file&quot; &amp;gt; .gitignore\ngit add .gitignore\ngit commit -m gitignore\n\n# Remove the file and commit\ngit rm file\ngit commit -m &quot;removed file&quot;\n\n# Reintroduce the file and check status.\n# .gitignore is now respected - status reports &quot;nothing to commit&quot;.\necho &quot;hello&quot; &amp;gt; file\ngit status\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This is how I solved my issue:&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;git filter-branch --tree-filter &apos;rm -rf path/to/your/file&apos; HEAD&lt;/code&gt;\n&lt;br&gt; &lt;code&gt;git push&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;In this, we are basically trying to rewrite the history of that particular file in previous commits also.&lt;/p&gt;\n&lt;p&gt;For more information, you can refer to the &lt;a href=&quot;https://en.wikipedia.org/wiki/Man_page&quot; rel=&quot;nofollow noreferrer&quot;&gt;man page&lt;/a&gt; of filter-branch &lt;a href=&quot;https://git-scm.com/docs/git-filter-branch&quot; rel=&quot;nofollow noreferrer&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;Source: &lt;em&gt;&lt;a href=&quot;https://docs.github.com/en/github/authenticating-to-github/removing-sensitive-data-from-a-repository#using-filter-branch&quot; rel=&quot;nofollow noreferrer&quot;&gt;Removing sensitive data from a repository - using filter-branch&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;Source: &lt;em&gt;&lt;a href=&quot;https://thomas-cokelaer.info/blog/2018/02/git-how-to-remove-a-big-file-wrongly-committed/&quot; rel=&quot;nofollow noreferrer&quot;&gt;Git: How to remove a big file wrongly committed&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;In case of already committed &lt;code&gt;DS_Store&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;find . -name .DS_Store -print0 | xargs -0 git rm --ignore-unmatch\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Ignore them by:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;echo &quot;.DS_Store&quot; &amp;gt;&amp;gt; ~/.gitignore_global\necho &quot;._.DS_Store&quot; &amp;gt;&amp;gt; ~/.gitignore_global\necho &quot;**/.DS_Store&quot; &amp;gt;&amp;gt; ~/.gitignore_global\necho &quot;**/._.DS_Store&quot; &amp;gt;&amp;gt; ~/.gitignore_global\ngit config --global core.excludesfile ~/.gitignore_global\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Finally, make a commit!&lt;/p&gt;\n    ","\n&lt;p&gt;Especially for the IDE-based files, I use this:&lt;/p&gt;\n&lt;p&gt;For instance, for the slnx.sqlite file, I just got rid off it completely like the following:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git rm {PATH_OF_THE_FILE}/slnx.sqlite -f\ngit commit -m &quot;remove slnx.sqlite&quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Just keep that in mind that some of those files store some local user settings and preferences for projects (like what files you had open). So every time you navigate or do some changes in your IDE, that file is changed and therefore it checks it out and show as uncommitted changes.&lt;/p&gt;\n    ","\n&lt;p&gt;If anyone is having a hard time on Windows and you want to ignore the entire folder, go to the desired &apos;folder&apos; on file explorer, right click and do &apos;Git Bash Here&apos; (Git for Windows should have been installed).&lt;/p&gt;\n&lt;p&gt;Run this command:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git ls-files -z | xargs -0 git update-index --assume-unchanged\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;In my case here, I had several .lock files in several directories that I needed to remove. I ran the following and it worked without having to go into each directory to remove them:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git rm -r --cached **/*.lock\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Doing this went into each folder under the &apos;root&apos; of where I was at and excluded all files that matched the pattern.&lt;/p&gt;\n    "],"225":["\n&lt;p&gt;Here&apos;s what I created to hold the images that my app is currently displaying. Please note that the &quot;Log&quot; object in use here is my custom wrapper around the final Log class inside Android.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;package&lt;/span&gt; com.wilson.android.library;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/*\n Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file\ndistributed with this work for additional information\nregarding copyright ownership.  The ASF licenses this file\nto you under the Apache License, Version 2.0 (the\n&quot;License&quot;); you may not use this file except in compliance\nwith the License.  You may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing,\nsoftware distributed under the License is distributed on an\n&quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, either express or implied.  See the License for the\nspecific language governing permissions and limitations\nunder the License.\n*/&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DrawableManager&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;String, Drawable&amp;gt; drawableMap;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;DrawableManager&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n        drawableMap = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HashMap&lt;/span&gt;&amp;lt;String, Drawable&amp;gt;();\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Drawable &lt;span class=&quot;hljs-title function_&quot;&gt;fetchDrawable&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String urlString)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (drawableMap.containsKey(urlString)) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; drawableMap.get(urlString);\n        }\n\n        Log.d(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getClass().getSimpleName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;image url:&quot;&lt;/span&gt; + urlString);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n            &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fetch(urlString);\n            &lt;span class=&quot;hljs-type&quot;&gt;Drawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;drawable&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Drawable.createFromStream(is, &lt;span class=&quot;hljs-string&quot;&gt;&quot;src&quot;&lt;/span&gt;);\n\n\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (drawable != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n                drawableMap.put(urlString, drawable);\n                Log.d(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getClass().getSimpleName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;got a thumbnail drawable: &quot;&lt;/span&gt; + drawable.getBounds() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;, &quot;&lt;/span&gt;\n                        + drawable.getIntrinsicHeight() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt; + drawable.getIntrinsicWidth() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;, &quot;&lt;/span&gt;\n                        + drawable.getMinimumHeight() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt; + drawable.getMinimumWidth());\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n              Log.w(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getClass().getSimpleName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;could not get thumbnail&quot;&lt;/span&gt;);\n            }\n\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; drawable;\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (MalformedURLException e) {\n            Log.e(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getClass().getSimpleName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;fetchDrawable failed&quot;&lt;/span&gt;, e);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {\n            Log.e(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getClass().getSimpleName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;fetchDrawable failed&quot;&lt;/span&gt;, e);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n        }\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fetchDrawableOnThread&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String urlString, &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; ImageView imageView)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (drawableMap.containsKey(urlString)) {\n            imageView.setImageDrawable(drawableMap.get(urlString));\n        }\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;Handler&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Handler&lt;/span&gt;(Looper.getMainLooper()) {\n            &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;handleMessage&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Message message)&lt;/span&gt; {\n                imageView.setImageDrawable((Drawable) message.obj);\n            }\n        };\n\n        &lt;span class=&quot;hljs-type&quot;&gt;Thread&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;thread&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Thread&lt;/span&gt;() {\n            &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n                &lt;span class=&quot;hljs-comment&quot;&gt;//TODO : set imageView to a &quot;pending&quot; image&lt;/span&gt;\n                &lt;span class=&quot;hljs-type&quot;&gt;Drawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;drawable&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fetchDrawable(urlString);\n                &lt;span class=&quot;hljs-type&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; handler.obtainMessage(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, drawable);\n                handler.sendMessage(message);\n            }\n        };\n        thread.start();\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; InputStream &lt;span class=&quot;hljs-title function_&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String urlString)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; MalformedURLException, IOException {\n        &lt;span class=&quot;hljs-type&quot;&gt;DefaultHttpClient&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;httpClient&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DefaultHttpClient&lt;/span&gt;();\n        &lt;span class=&quot;hljs-type&quot;&gt;HttpGet&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpGet&lt;/span&gt;(urlString);\n        &lt;span class=&quot;hljs-type&quot;&gt;HttpResponse&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; httpClient.execute(request);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; response.getEntity().getContent();\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I made &lt;a href=&quot;https://github.com/thest1/LazyList&quot; rel=&quot;noreferrer&quot;&gt;a simple demo of a lazy list&lt;/a&gt; (located at GitHub) with images. &lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Basic Usage &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-vhdl&quot;&gt;ImageLoader imageLoader=&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; ImageLoader(&lt;span class=&quot;hljs-keyword&quot;&gt;context&lt;/span&gt;); ...\nimageLoader.DisplayImage(url, imageView); \n&lt;/code&gt;&lt;/pre&gt;\n  \n  &lt;p&gt;Don&apos;t forget to add the\n  following permissions to your AndroidManifest.xml:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt; &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;uses-permission&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;android:name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.permission.INTERNET&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;\n &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;uses-permission&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;android:name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt; Please\n&lt;/code&gt;&lt;/pre&gt;\n  \n  &lt;p&gt;create only one instance of ImageLoader and reuse it all around your\n  application. This way image caching will be much more efficient.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;It may be helpful to somebody. It downloads images in the background thread. Images are being cached on an SD card and in memory. The cache implementation is very simple and is just enough for the demo. I decode images with inSampleSize to reduce memory consumption. I also try to handle recycled views correctly.&lt;/p&gt;\n\n&lt;p&gt;&lt;img src=&quot;https://i.stack.imgur.com/1NvdB.png&quot; alt=&quot;Alt text&quot;&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I recommend open source instrument &lt;strong&gt;&lt;a href=&quot;https://github.com/nostra13/Android-Universal-Image-Loader&quot; rel=&quot;noreferrer&quot;&gt;Universal Image Loader&lt;/a&gt;&lt;/strong&gt;. It is originally based on Fedor Vlasov&apos;s project &lt;strong&gt;LazyList&lt;/strong&gt; and has been vastly improved since then.&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Multithread image loading&lt;/li&gt;\n&lt;li&gt;Possibility of wide tuning ImageLoader&apos;s configuration (thread executors, downloader, decoder, memory and disc cache, display image options, and others)&lt;/li&gt;\n&lt;li&gt;Possibility of image caching in memory and/or on the device&apos;s file system (or SD card)&lt;/li&gt;\n&lt;li&gt;Possibility to &quot;listen&quot; loading process&lt;/li&gt;\n&lt;li&gt;Possibility to customize every display image call with separated options&lt;/li&gt;\n&lt;li&gt;Widget support&lt;/li&gt;\n&lt;li&gt;Android 2.0+ support&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;a href=&quot;https://github.com/nostra13/Android-Universal-Image-Loader&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/QzOIL.png&quot; alt=&quot;&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html&quot; rel=&quot;noreferrer&quot;&gt;Multithreading For Performance&lt;/a&gt;, a tutorial by Gilles Debunne.&lt;/p&gt;\n\n&lt;p&gt;This is from the Android Developers Blog. The suggested code uses:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;AsyncTasks&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;A hard, limited size, &lt;code&gt;FIFO cache&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;A soft, easily &lt;code&gt;garbage collect&lt;/code&gt;-ed cache.&lt;/li&gt;\n&lt;li&gt;A &lt;em&gt;placeholder&lt;/em&gt; &lt;code&gt;Drawable&lt;/code&gt; while you download.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;img src=&quot;https://i.stack.imgur.com/xdEVJ.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;Update: Note that this answer is pretty ineffective now. The Garbage Collector acts aggressively on SoftReference and WeakReference, so this code is NOT suitable for new apps.&lt;/strong&gt;  (Instead, try libraries like &lt;a href=&quot;https://github.com/nostra13/Android-Universal-Image-Loader&quot; rel=&quot;nofollow noreferrer&quot;&gt;Universal Image Loader&lt;/a&gt; suggested in other answers.)&lt;/p&gt;\n&lt;p&gt;Thanks to James for the code, and Bao-Long for the suggestion of using SoftReference. I implemented the SoftReference changes on James&apos; code. Unfortunately, SoftReferences caused my images to be garbage collected too quickly. In my case, it was fine without the SoftReference stuff, because my list size is limited and my images are small.&lt;/p&gt;\n&lt;p&gt;There&apos;s a discussion from a year ago regarding the SoftReferences on google groups: &lt;a href=&quot;http://groups.google.com/group/android-developers/browse_thread/thread/ebabb0dadf38acc1&quot; rel=&quot;nofollow noreferrer&quot;&gt;link to thread&lt;/a&gt;. As a solution to the too-early garbage collection, they suggest the possibility of manually setting the VM heap size using dalvik.system.VMRuntime.setMinimumHeapSize(), which is not very attractive to me.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;DrawableManager&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n    drawableMap = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HashMap&lt;/span&gt;&amp;lt;String, SoftReference&amp;lt;Drawable&amp;gt;&amp;gt;();\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Drawable &lt;span class=&quot;hljs-title function_&quot;&gt;fetchDrawable&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String urlString)&lt;/span&gt; {\n    SoftReference&amp;lt;Drawable&amp;gt; drawableRef = drawableMap.get(urlString);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (drawableRef != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-type&quot;&gt;Drawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;drawable&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; drawableRef.get();\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (drawable != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;)\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; drawable;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Reference has expired so remove the key from drawableMap&lt;/span&gt;\n        drawableMap.remove(urlString);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (Constants.LOGGING) Log.d(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getClass().getSimpleName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;image url:&quot;&lt;/span&gt; + urlString);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fetch(urlString);\n        &lt;span class=&quot;hljs-type&quot;&gt;Drawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;drawable&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Drawable.createFromStream(is, &lt;span class=&quot;hljs-string&quot;&gt;&quot;src&quot;&lt;/span&gt;);\n        drawableRef = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SoftReference&lt;/span&gt;&amp;lt;Drawable&amp;gt;(drawable);\n        drawableMap.put(urlString, drawableRef);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (Constants.LOGGING) Log.d(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getClass().getSimpleName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;got a thumbnail drawable: &quot;&lt;/span&gt; + drawable.getBounds() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;, &quot;&lt;/span&gt;\n                + drawable.getIntrinsicHeight() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt; + drawable.getIntrinsicWidth() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;, &quot;&lt;/span&gt;\n                + drawable.getMinimumHeight() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt; + drawable.getMinimumWidth());\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; drawableRef.get();\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (MalformedURLException e) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (Constants.LOGGING) Log.e(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getClass().getSimpleName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;fetchDrawable failed&quot;&lt;/span&gt;, e);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (Constants.LOGGING) Log.e(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getClass().getSimpleName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;fetchDrawable failed&quot;&lt;/span&gt;, e);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fetchDrawableOnThread&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String urlString, &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; ImageView imageView)&lt;/span&gt; {\n    SoftReference&amp;lt;Drawable&amp;gt; drawableRef = drawableMap.get(urlString);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (drawableRef != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-type&quot;&gt;Drawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;drawable&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; drawableRef.get();\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (drawable != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n            imageView.setImageDrawable(drawableRef.get());\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n        }\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Reference has expired so remove the key from drawableMap&lt;/span&gt;\n        drawableMap.remove(urlString);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;Handler&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Handler&lt;/span&gt;() {\n        &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;handleMessage&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Message message)&lt;/span&gt; {\n            imageView.setImageDrawable((Drawable) message.obj);\n        }\n    };\n\n    &lt;span class=&quot;hljs-type&quot;&gt;Thread&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;thread&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Thread&lt;/span&gt;() {\n        &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n            &lt;span class=&quot;hljs-comment&quot;&gt;//TODO : set imageView to a &quot;pending&quot; image&lt;/span&gt;\n            &lt;span class=&quot;hljs-type&quot;&gt;Drawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;drawable&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fetchDrawable(urlString);\n            &lt;span class=&quot;hljs-type&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; handler.obtainMessage(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, drawable);\n            handler.sendMessage(message);\n        }\n    };\n    thread.start();\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;Picasso&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Use Jake Wharton&apos;s  Picasso Library.\n(A Perfect ImageLoading Library from the developer of ActionBarSherlock)&lt;/p&gt;\n&lt;p&gt;A powerful image downloading and caching library for Android.&lt;/p&gt;\n&lt;p&gt;Images add much-needed context and visual flair to Android applications. Picasso allows for hassle-free image loading in your applicationoften in one line of code!&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;Picasso.&lt;span class=&quot;hljs-keyword&quot;&gt;with&lt;/span&gt;(context).load(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://i.imgur.com/DvpvklR.png&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-keyword&quot;&gt;into&lt;/span&gt;(imageView);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Many common pitfalls of image loading on Android are handled automatically by Picasso:&lt;/p&gt;\n&lt;p&gt;Handling ImageView recycling and download cancellation in an adapter.\nComplex image transformations with minimal memory use.\nAutomatic memory and disk caching.&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;http://square.github.io/picasso/&quot; rel=&quot;noreferrer&quot;&gt;Picasso Jake Wharton&apos;s Library&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Glide&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Glide is a fast and efficient open-source media management framework for Android that wraps media decoding, memory and disk caching, and resource pooling into a simple and easy-to-use interface.&lt;/p&gt;\n&lt;p&gt;Glide supports fetching, decoding, and displaying video stills, images, and animated GIFs. Glide includes a flexible API that allows developers to plug into almost any network stack. By default, Glide uses a custom HttpUrlConnection based stack but also includes utility libraries plug-in to Google&apos;s Volley project or Square&apos;s OkHttp library instead.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;Glide.&lt;span class=&quot;hljs-keyword&quot;&gt;with&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;).load(&lt;span class=&quot;hljs-string&quot;&gt;&quot;your-url-here&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-keyword&quot;&gt;into&lt;/span&gt;(imageView);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Glide&apos;s primary focus is on making scrolling any kind of a list of images as smooth and fast as possible, but Glide is also effective for almost any case where you need to fetch, resize, and display a remote image.&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://github.com/bumptech/glide&quot; rel=&quot;noreferrer&quot;&gt;Glide Image Loading Library&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Fresco by Facebook&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Fresco is a powerful system for displaying images in Android applications.&lt;/p&gt;\n&lt;p&gt;Fresco takes care of image loading and display, so you don&apos;t have to. It will load images from the network, local storage, or local resources, and display a placeholder until the image has arrived. It has two levels of cache; one in memory and another in internal storage.&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://github.com/facebook/fresco&quot; rel=&quot;noreferrer&quot;&gt;Fresco Github&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;In Android 4.x and lower, Fresco puts images in a special region of Android memory. This lets your application run faster - and suffer the dreaded OutOfMemoryError much less often.&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;http://frescolib.org/docs/index.html#_&quot; rel=&quot;noreferrer&quot;&gt;Fresco Documentation&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;High-performance loader - after examining the methods suggested here,\nI used &lt;a href=&quot;http://negativeprobability.blogspot.com/2011/08/lazy-loading-of-images-in-listview.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;Ben&apos;s solution&lt;/a&gt; with some changes -&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;I realized that working with drawable is faster than with bitmaps so I uses drawable instead&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Using SoftReference is great, but it makes the cached image to be deleted too often, so I added a Linked list that holds images references, preventing the image to be deleted, until it reached a predefined size&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;To open the InputStream I used java.net.URLConnection which allows me to use web cache (you need to set a response cache first, but that&apos;s another story)&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;My code:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.Map; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.HashMap; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.LinkedList; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.Collections; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.WeakHashMap; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.lang.ref.SoftReference; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.concurrent.Executors; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.concurrent.ExecutorService; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.graphics.drawable.Drawable;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.widget.ImageView;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.os.Handler;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.os.Message;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.io.InputStream;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.net.MalformedURLException; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.net.URL;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.net.URLConnection;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DrawableBackgroundDownloader&lt;/span&gt; {    \n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;String, SoftReference&amp;lt;Drawable&amp;gt;&amp;gt; mCache = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HashMap&lt;/span&gt;&amp;lt;String, SoftReference&amp;lt;Drawable&amp;gt;&amp;gt;();   \n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; LinkedList &amp;lt;Drawable&amp;gt; mChacheController = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;LinkedList&lt;/span&gt; &amp;lt;Drawable&amp;gt; ();\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; ExecutorService mThreadPool;  \n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;ImageView, String&amp;gt; mImageViews = Collections.synchronizedMap(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;WeakHashMap&lt;/span&gt;&amp;lt;ImageView, String&amp;gt;());  \n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;MAX_CACHE_SIZE&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;80&lt;/span&gt;; \n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;THREAD_POOL_SIZE&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Constructor\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;DrawableBackgroundDownloader&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {  \n    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);  \n}  \n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Clears all instance data and stops running threads\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Reset&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;ExecutorService&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;oldThreadPool&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; mThreadPool;\n    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);\n    oldThreadPool.shutdownNow();\n\n    mChacheController.clear();\n    mCache.clear();\n    mImageViews.clear();\n}  \n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;loadDrawable&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String url, &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; ImageView imageView,Drawable placeholder)&lt;/span&gt; {  \n    mImageViews.put(imageView, url);  \n    &lt;span class=&quot;hljs-type&quot;&gt;Drawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;drawable&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; getDrawableFromCache(url);  \n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// check in UI thread, so no concurrency issues  &lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (drawable != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {  \n        &lt;span class=&quot;hljs-comment&quot;&gt;//Log.d(null, &quot;Item loaded from mCache: &quot; + url);  &lt;/span&gt;\n        imageView.setImageDrawable(drawable);  \n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {  \n        imageView.setImageDrawable(placeholder);  \n        queueJob(url, imageView, placeholder);  \n    }  \n} \n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; Drawable &lt;span class=&quot;hljs-title function_&quot;&gt;getDrawableFromCache&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String url)&lt;/span&gt; {  \n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (mCache.containsKey(url)) {  \n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; mCache.get(url).get();  \n    }  \n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;  \n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;putDrawableInCache&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String url,Drawable drawable)&lt;/span&gt; {  \n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;chacheControllerSize&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; mChacheController.size();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (chacheControllerSize &amp;gt; MAX_CACHE_SIZE) \n        mChacheController.subList(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, MAX_CACHE_SIZE/&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;).clear();\n\n    mChacheController.addLast(drawable);\n    mCache.put(url, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SoftReference&lt;/span&gt;&amp;lt;Drawable&amp;gt;(drawable));\n\n}  \n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;queueJob&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String url, &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; ImageView imageView,&lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; Drawable placeholder)&lt;/span&gt; {  \n    &lt;span class=&quot;hljs-comment&quot;&gt;/* Create handler in UI thread. */&lt;/span&gt;  \n    &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;Handler&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Handler&lt;/span&gt;() {  \n        &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;  \n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;handleMessage&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Message msg)&lt;/span&gt; {  \n            &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; mImageViews.get(imageView);  \n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (tag != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; tag.equals(url)) {\n                &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (imageView.isShown())\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (msg.obj != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n                        imageView.setImageDrawable((Drawable) msg.obj);  \n                    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {  \n                        imageView.setImageDrawable(placeholder);  \n                        &lt;span class=&quot;hljs-comment&quot;&gt;//Log.d(null, &quot;fail &quot; + url);  &lt;/span&gt;\n                    } \n            }  \n        }  \n    };  \n\n    mThreadPool.submit(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Runnable&lt;/span&gt;() {  \n        &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;  \n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {  \n            &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;Drawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;bmp&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; downloadDrawable(url);\n            &lt;span class=&quot;hljs-comment&quot;&gt;// if the view is not visible anymore, the image will be ready for next time in cache&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (imageView.isShown())\n            {\n                &lt;span class=&quot;hljs-type&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Message.obtain();  \n                message.obj = bmp;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//Log.d(null, &quot;Item downloaded: &quot; + url);  &lt;/span&gt;\n\n                handler.sendMessage(message);\n            }\n        }  \n    });  \n}  \n\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; Drawable &lt;span class=&quot;hljs-title function_&quot;&gt;downloadDrawable&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String url)&lt;/span&gt; {  \n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {  \n        &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; getInputStream(url);\n\n        &lt;span class=&quot;hljs-type&quot;&gt;Drawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;drawable&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Drawable.createFromStream(is, url);\n        putDrawableInCache(url,drawable);  \n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; drawable;  \n\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (MalformedURLException e) {  \n        e.printStackTrace();  \n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {  \n        e.printStackTrace();  \n    }  \n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;  \n}  \n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; InputStream &lt;span class=&quot;hljs-title function_&quot;&gt;getInputStream&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String urlString)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; MalformedURLException, IOException {\n    &lt;span class=&quot;hljs-type&quot;&gt;URL&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(urlString);\n    URLConnection connection;\n    connection = url.openConnection();\n    connection.setUseCaches(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;); \n    connection.connect();\n    &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; connection.getInputStream();\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; response;\n}\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I have followed this Android Training and I think it does an excellent job at downloading images without blocking the main UI.  It also handles caching and dealing with scrolling through many images: &lt;a href=&quot;http://developer.android.com/training/displaying-bitmaps/load-bitmap.html&quot; rel=&quot;noreferrer&quot;&gt;Loading Large Bitmaps Efficiently&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;img src=&quot;https://i.stack.imgur.com/zqoX2.jpg&quot; width=&quot;350&quot;&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt;  &lt;a href=&quot;http://square.github.io/picasso/&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;Picasso&lt;/strong&gt;&lt;/a&gt; allows for hassle-free image loading in your applicationoften in one line of code!&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Use Gradle:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-delphi&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;implementation&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.squareup.picasso:picasso:(insert latest version)&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Just one line of code!&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;Picasso.&lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt;().load(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://i.imgur.com/DvpvklR.png&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-keyword&quot;&gt;into&lt;/span&gt;(imageView);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;2.&lt;/strong&gt; &lt;a href=&quot;https://github.com/bumptech/glide&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;Glide&lt;/strong&gt;&lt;/a&gt; An image loading and caching library for Android focused on smooth scrolling&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Use Gradle:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;repositories {\n  mavenCentral() \n  google()\n}\n\ndependencies {\n   implementation &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.github.bumptech.glide:glide:4.11.0&apos;&lt;/span&gt;\n   annotationProcessor &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.github.bumptech.glide:compiler:4.11.0&apos;&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;// For a simple view:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;  Glide.&lt;span class=&quot;hljs-keyword&quot;&gt;with&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;).load(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://i.imgur.com/DvpvklR.png&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-keyword&quot;&gt;into&lt;/span&gt;(imageView);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;3.&lt;/strong&gt; &lt;a href=&quot;https://github.com/facebook/fresco&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;fresco&lt;/strong&gt;&lt;/a&gt;  is a powerful system for displaying images in Android\napplications.Fresco takes care of image loading and display, so you don&apos;t have\nto.&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;http://frescolib.org/docs/index.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;Getting Started with Fresco&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I&apos;ve written a tutorial that explains how to do lazy-loading of images in a listview. I go into some detail about the issues of recycling and concurrency. I also use a fixed thread pool to prevent spawning a lot of threads.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;http://negativeprobability.blogspot.com/2011/08/lazy-loading-of-images-in-listview.html&quot; rel=&quot;noreferrer&quot;&gt;Lazy loading of images in Listview Tutorial&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;The way I do it is by launching a thread to download the images in the background and hand it a callback for each list item.  When an image is finished downloading it calls the callback which updates the view for the list item.  &lt;/p&gt;\n\n&lt;p&gt;This method doesn&apos;t work very well when you&apos;re recycling views however.&lt;/p&gt;\n    ","\n&lt;p&gt;I just want to add one more good example, &lt;em&gt;&lt;a href=&quot;http://developer.android.com/resources/samples/XmlAdapters/index.html&quot;&gt;XML Adapters&lt;/a&gt;&lt;/em&gt;. As it&apos;s is used by Google and I am also using the same logic to avoid an OutOfMemory error. &lt;/p&gt;\n\n&lt;p&gt;Basically &lt;a href=&quot;http://developer.android.com/resources/samples/XmlAdapters/src/com/example/android/xmladapters/ImageDownloader.html&quot;&gt;this ImageDownloader&lt;/a&gt; is your answer (as it covers most of your requirements). Some you can also implement in that.&lt;/p&gt;\n    ","\n&lt;p&gt;This is a common problem on Android that has been solved in many ways by many people.  In my opinion the best solution I&apos;ve seen is the relatively new library called &lt;a href=&quot;http://square.github.io/picasso/&quot; rel=&quot;noreferrer&quot; title=&quot;Picasso&quot;&gt;Picasso&lt;/a&gt;.  Here are the highlights:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Open source, but headed up by &lt;code&gt;Jake Wharton&lt;/code&gt; of &lt;a href=&quot;http://actionbarsherlock.com/&quot; rel=&quot;noreferrer&quot; title=&quot;ActionBarSherlock&quot;&gt;ActionBarSherlock&lt;/a&gt; fame.&lt;/li&gt;\n&lt;li&gt;Asynchronously load images from network or app resources with one line of code&lt;/li&gt;\n&lt;li&gt;Automatic &lt;code&gt;ListView&lt;/code&gt; detection&lt;/li&gt;\n&lt;li&gt;Automatic disk and memory caching&lt;/li&gt;\n&lt;li&gt;Can do custom transformations&lt;/li&gt;\n&lt;li&gt;Lots of configurable options&lt;/li&gt;\n&lt;li&gt;Super simple API&lt;/li&gt;\n&lt;li&gt;Frequently updated&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;I have been using NetworkImageView from the new Android Volley Library &lt;code&gt;com.android.volley.toolbox.NetworkImageView&lt;/code&gt;, and it seems to be working pretty well. Apparently, this is the same view that is used in &lt;a href=&quot;http://en.wikipedia.org/wiki/Google_Play&quot;&gt;Google Play&lt;/a&gt; and other new Google applications. Definitely worth checking out.&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://blogs.captechconsulting.com/blog/raymond-robinson/google-io-2013-volley-image-cache-tutorial&quot;&gt;Google I/O 2013 volley image cache tutorial&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://developers.google.com/events/io/sessions/325304728&quot;&gt;Developers Google events&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;Well, image loading time from the Internet has many solutions. You may also use the library &lt;a href=&quot;https://code.google.com/p/android-query/wiki/ImageLoading&quot; rel=&quot;noreferrer&quot;&gt;Android-Query&lt;/a&gt;. It will give you all the required activity. Make sure what you want to do and read the library wiki page. And solve the image loading restriction.&lt;/p&gt;\n\n&lt;p&gt;This is my code:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; View &lt;span class=&quot;hljs-title function_&quot;&gt;getView&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; position, View convertView, ViewGroup parent)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; convertView;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (v == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-type&quot;&gt;LayoutInflater&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;vi&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n        v = vi.inflate(R.layout.row, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-type&quot;&gt;ImageView&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imageview&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (ImageView) v.findViewById(R.id.icon);\n    &lt;span class=&quot;hljs-type&quot;&gt;AQuery&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;aq&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;AQuery&lt;/span&gt;(convertView);\n\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imageUrl&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;http://www.vikispot.com/z/images/vikispot/android-w.png&quot;&lt;/span&gt;;\n\n    aq.id(imageview).progress(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;).image(imageUrl, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;BitmapAjaxCallback&lt;/span&gt;() {\n        &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String url, ImageView iv, Bitmap bm, AjaxStatus status)&lt;/span&gt; {\n            iv.setImageBitmap(bm);\n        }\n    ));\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; v;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It should be solve your lazy loading problem.&lt;/p&gt;\n    ","\n&lt;p&gt;I think this issue is very popular among Android developers, and there are plenty of such libraries that claims to resolve this issue, but only a few of them seems to be on the mark. &lt;a href=&quot;http://code.google.com/p/android-query/&quot; rel=&quot;noreferrer&quot;&gt;AQuery&lt;/a&gt; is one such library, but it is better than most of them in all aspects and is worth trying for.&lt;/p&gt;\n    ","\n&lt;p&gt;You must try this Universal Loader is best.\nI am using this after done many RnD on lazy loading .&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/nostra13/Android-Universal-Image-Loader&quot; rel=&quot;noreferrer&quot;&gt;Universal Image Loader&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Features&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Multithread image loading (async or sync)&lt;/li&gt;\n&lt;li&gt;Wide customization of ImageLoader&apos;s configuration (thread executors, downloader, decoder, memory and disk cache, display image options, etc.)&lt;/li&gt;\n&lt;li&gt;Many customization options for every display image call (stub images, caching switch, decoding options, Bitmap processing and displaying, etc.)&lt;/li&gt;\n&lt;li&gt;Image caching in memory and/or on disk (device&apos;s file system or SD card)&lt;/li&gt;\n&lt;li&gt;Listening loading process (including downloading progress)&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Android 2.0+ support&lt;/p&gt;\n\n&lt;p&gt;&lt;img src=&quot;https://i.stack.imgur.com/iFKcR.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Have a look at &lt;a href=&quot;https://github.com/applidium/Shutterbug&quot; rel=&quot;noreferrer&quot;&gt;Shutterbug&lt;/a&gt;, Applidium&apos;s lightweight SDWebImage (a nice library on iOS) port to Android.\nIt supports asynchronous caching, stores failed URLs, handles concurrency well, and helpful subclasses are included.&lt;/p&gt;\n\n&lt;p&gt;Pull requests (and bug reports) are welcome, too!&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;http://droidparts.org&quot; rel=&quot;noreferrer&quot;&gt;DroidParts&lt;/a&gt; has &lt;a href=&quot;https://github.com/yanchenko/droidparts/blob/master/droidparts/src/org/droidparts/net/image/ImageFetcher.java&quot; rel=&quot;noreferrer&quot;&gt;ImageFetcher&lt;/a&gt; that requires zero configuration to get started.&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Uses a disk &amp;amp; in-memory &lt;a href=&quot;https://en.wikipedia.org/wiki/Cache_algorithms#Examples&quot; rel=&quot;noreferrer&quot;&gt;Least Recently Used&lt;/a&gt; (LRU) cache.&lt;/li&gt;\n&lt;li&gt;Efficiently decodes images.&lt;/li&gt;\n&lt;li&gt;Supports modifying bitmaps in background thread.&lt;/li&gt;\n&lt;li&gt;Has simple cross-fade.&lt;/li&gt;\n&lt;li&gt;Has image loading progress callback.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Clone &lt;a href=&quot;https://github.com/yanchenko/droidparts/tree/master/droidparts-samples/DroidPartsGram&quot; rel=&quot;noreferrer&quot;&gt;DroidPartsGram&lt;/a&gt; for an example:&lt;/p&gt;\n\n&lt;p&gt;&lt;img src=&quot;https://i.stack.imgur.com/DegXF.png&quot; alt=&quot;Enter image description here&quot;&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Novoda also has a great &lt;a href=&quot;http://androidimageloader.com/&quot;&gt;lazy image loading library&lt;/a&gt; and many apps like Songkick, Podio, SecretDJ and ImageSearch use their library.&lt;/p&gt;\n\n&lt;p&gt;Their library is hosted &lt;a href=&quot;https://github.com/novoda/ImageLoader&quot;&gt;here&lt;/a&gt; on Github and they have a pretty active &lt;a href=&quot;https://github.com/novoda/ImageLoader/issues&quot;&gt;issues tracker&lt;/a&gt; as well. Their project seems to be pretty active too, with over 300+ commits at the time of writing this reply.&lt;/p&gt;\n    ","\n&lt;p&gt;Just a quick tip for someone who is in indecision regarding what library to use for lazy-loading images:&lt;/p&gt;\n\n&lt;p&gt;There are four basic ways.&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;DIY =&amp;gt; Not the best solution but for a few images and if you want to go without the hassle of using others libraries&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Volley&apos;s Lazy Loading library =&amp;gt; From guys at android. It is nice and everything but is poorly documented and hence is a problem to use.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Picasso: A simple solution that just works, you can even specify the exact image size you want to bring in. It is very simple to use but might not be very &quot;performant&quot; for apps that has to deal with humongous amounts of images.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;UIL: The best way to lazy load images. You can cache images(you need permission of course), initialize the loader once, then have your work done. The most mature asynchronous image loading library I have ever seen so far.&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n    ","\n&lt;p&gt;If you want to display Shimmer layout like Facebook there is a official facebook library for that. &lt;a href=&quot;http://facebook.github.io/shimmer-android/&quot; rel=&quot;noreferrer&quot;&gt;FaceBook Shimmer Android&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;It takes care of everything, You just need to put your desired design code in nested manner in shimmer frame.\nHere is a sample code.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;com.facebook.shimmer.ShimmerFrameLayout&lt;/span&gt;\n     &lt;span class=&quot;hljs-attr&quot;&gt;android:id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;@+id/shimmer_view_container&lt;/span&gt;\n     &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;wrap_content&lt;/span&gt;\n     &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n     &lt;span class=&quot;hljs-attr&quot;&gt;shimmer:duration&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;1000&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;here&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;will&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;be&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;your&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;display&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;com.facebook.shimmer.ShimmerFrameLayout&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And here is the java code for it.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;ShimmerFrameLayout&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;shimmerContainer&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (ShimmerFrameLayout) findViewById(R.id.shimmer_view_container);\nshimmerContainer.startShimmerAnimation();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Add this dependency in your gradle file.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-delphi&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;implementation&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.facebook.shimmer:shimmer:0.1.0@aar&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here is how it looks like.&lt;a href=&quot;https://i.stack.imgur.com/cP4QU.gif&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/cP4QU.gif&quot; alt=&quot;Shimmer Android screenshot&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Check my fork of &lt;a href=&quot;https://github.com/nicolasjafelle/LazyList&quot; rel=&quot;noreferrer&quot;&gt;LazyList&lt;/a&gt;. Basically, I improve the LazyList by delaying the call of the ImageView and create two methods:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;When you need to put something like &quot;Loading image...&quot;&lt;/li&gt;\n&lt;li&gt;When you need to show the downloaded image.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;I also improved the ImageLoader by implementing a &lt;a href=&quot;http://en.wikipedia.org/wiki/Singleton_pattern&quot; rel=&quot;noreferrer&quot;&gt;singleton&lt;/a&gt; in this object.&lt;/p&gt;\n    ","\n&lt;p&gt;All above code have their own worth but with my personal experience just give a try with Picasso.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Picasso&lt;/strong&gt;  is a library specifically for this purpose, in-fact it will manage cache and all other network operations automatically.You will have to add library in your project and just write a single line of code to load image from remote URL.&lt;/p&gt;\n\n&lt;p&gt;Please visit here : &lt;a href=&quot;http://code.tutsplus.com/tutorials/android-sdk-working-with-picasso--cms-22149&quot; rel=&quot;noreferrer&quot;&gt;http://code.tutsplus.com/tutorials/android-sdk-working-with-picasso--cms-22149&lt;/a&gt; &lt;/p&gt;\n    ","\n&lt;p&gt;Use the glide library. It worked for me and will work for your code too.It works for both images as well as gifs too. &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;ImageView&lt;/span&gt; imageView = (&lt;span class=&quot;hljs-title class_&quot;&gt;ImageView&lt;/span&gt;) &lt;span class=&quot;hljs-title function_&quot;&gt;findViewById&lt;/span&gt;(R.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;test_image&lt;/span&gt;); \n    &lt;span class=&quot;hljs-title class_&quot;&gt;GlideDrawableImageViewTarget&lt;/span&gt; imagePreview = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;GlideDrawableImageViewTarget&lt;/span&gt;(imageView);\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Glide&lt;/span&gt;\n            .&lt;span class=&quot;hljs-title function_&quot;&gt;with&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;)\n            .&lt;span class=&quot;hljs-title function_&quot;&gt;load&lt;/span&gt;(url)\n            .&lt;span class=&quot;hljs-title function_&quot;&gt;listener&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RequestListener&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;GlideDrawable&lt;/span&gt;&amp;gt;() {\n                &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n                &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onException&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;Exception e, &lt;span class=&quot;hljs-built_in&quot;&gt;String&lt;/span&gt; model, Target&amp;lt;GlideDrawable&amp;gt; target, &lt;span class=&quot;hljs-built_in&quot;&gt;boolean&lt;/span&gt; isFirstResource&lt;/span&gt;) {                       \n                    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n                }\n\n                &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n                &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onResourceReady&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;GlideDrawable resource, &lt;span class=&quot;hljs-built_in&quot;&gt;String&lt;/span&gt; model, Target&amp;lt;GlideDrawable&amp;gt; target, &lt;span class=&quot;hljs-built_in&quot;&gt;boolean&lt;/span&gt; isFromMemoryCache, &lt;span class=&quot;hljs-built_in&quot;&gt;boolean&lt;/span&gt; isFirstResource&lt;/span&gt;) {\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n                }\n            })\n            .&lt;span class=&quot;hljs-title function_&quot;&gt;into&lt;/span&gt;(imagePreview);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I can recommend a different way that works like a charm: Android Query.&lt;/p&gt;\n\n&lt;p&gt;You can download that &lt;a href=&quot;http://en.wikipedia.org/wiki/JAR_%28file_format%29&quot; rel=&quot;noreferrer&quot;&gt;JAR&lt;/a&gt; file from &lt;a href=&quot;http://code.google.com/p/android-query/downloads/list&quot; rel=&quot;noreferrer&quot;&gt;here&lt;/a&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;AQuery&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;androidAQuery&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;AQuery&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;As an example:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-sql&quot;&gt;androidAQuery.id(YOUR IMAGEVIEW).image(YOUR IMAGE &lt;span class=&quot;hljs-keyword&quot;&gt;TO&lt;/span&gt; LOAD, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, getDeviceWidth(), &lt;span class=&quot;hljs-keyword&quot;&gt;ANY&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;DEFAULT&lt;/span&gt; IMAGE YOU WANT &lt;span class=&quot;hljs-keyword&quot;&gt;TO&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;SHOW&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It&apos;s very fast and accurate, and using this you can find many more features like animation when loading, getting a bitmap (if needed), etc.&lt;/p&gt;\n    ","\n&lt;p&gt;Give &lt;a href=&quot;https://code.google.com/p/android-query/wiki/ImageLoading&quot; rel=&quot;noreferrer&quot;&gt;Aquery&lt;/a&gt; a try. It has amazingly simple methods to load and cache images asynchronously.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;https://github.com/koush/UrlImageViewHelper&quot; rel=&quot;noreferrer&quot;&gt;URLImageViewHelper&lt;/a&gt; is an amazing library that helps you to do that. &lt;/p&gt;\n    ","\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ImageDownloader&lt;/span&gt; {\n\nMap&amp;lt;String, Bitmap&amp;gt; imageCache;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ImageDownloader&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n    imageCache = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HashMap&lt;/span&gt;&amp;lt;String, Bitmap&amp;gt;();\n\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// download function&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;download&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String url, ImageView imageView)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (cancelPotentialDownload(url, imageView)) {\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Caching code right here&lt;/span&gt;\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; String.valueOf(url.hashCode());\n        &lt;span class=&quot;hljs-type&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(getCacheDirectory(imageView.getContext()),\n                filename);\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Is the bitmap in our memory cache?&lt;/span&gt;\n        &lt;span class=&quot;hljs-type&quot;&gt;Bitmap&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;bitmap&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n\n        bitmap = (Bitmap) imageCache.get(f.getPath());\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bitmap == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n\n            bitmap = BitmapFactory.decodeFile(f.getPath());\n\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bitmap != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n                imageCache.put(f.getPath(), bitmap);\n            }\n\n        }\n        &lt;span class=&quot;hljs-comment&quot;&gt;// No? download it&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bitmap == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n                &lt;span class=&quot;hljs-type&quot;&gt;BitmapDownloaderTask&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;BitmapDownloaderTask&lt;/span&gt;(\n                        imageView);\n                &lt;span class=&quot;hljs-type&quot;&gt;DownloadedDrawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;downloadedDrawable&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadedDrawable&lt;/span&gt;(\n                        task);\n                imageView.setImageDrawable(downloadedDrawable);\n                task.execute(url);\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {\n                Log.e(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Error==&amp;gt;&quot;&lt;/span&gt;, e.toString());\n            }\n\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Yes? set the image&lt;/span&gt;\n            imageView.setImageBitmap(bitmap);\n        }\n    }\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// cancel a download (internal only)&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;cancelPotentialDownload&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String url,\n        ImageView imageView)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;BitmapDownloaderTask&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;bitmapDownloaderTask&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; getBitmapDownloaderTask(imageView);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bitmapDownloaderTask != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;bitmapUrl&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; bitmapDownloaderTask.url;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ((bitmapUrl == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) || (!bitmapUrl.equals(url))) {\n            bitmapDownloaderTask.cancel(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            &lt;span class=&quot;hljs-comment&quot;&gt;// The same URL is already being downloaded.&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n        }\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// gets an existing download if one exists for the imageview&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; BitmapDownloaderTask &lt;span class=&quot;hljs-title function_&quot;&gt;getBitmapDownloaderTask&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(\n        ImageView imageView)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (imageView != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-type&quot;&gt;Drawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;drawable&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; imageView.getDrawable();\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (drawable &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; DownloadedDrawable) {\n            &lt;span class=&quot;hljs-type&quot;&gt;DownloadedDrawable&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;downloadedDrawable&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (DownloadedDrawable) drawable;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; downloadedDrawable.getBitmapDownloaderTask();\n        }\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// our caching functions&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Find the dir to save cached images&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; File &lt;span class=&quot;hljs-title function_&quot;&gt;getCacheDirectory&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Context context)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;sdState&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; android.os.Environment.getExternalStorageState();\n    File cacheDir;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (sdState.equals(android.os.Environment.MEDIA_MOUNTED)) {\n        &lt;span class=&quot;hljs-type&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;sdDir&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; android.os.Environment.getExternalStorageDirectory();\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// TODO : Change your diretcory here&lt;/span&gt;\n        cacheDir = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(sdDir, &lt;span class=&quot;hljs-string&quot;&gt;&quot;data/ToDo/images&quot;&lt;/span&gt;);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        cacheDir = context.getCacheDir();\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!cacheDir.exists())\n        cacheDir.mkdirs();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; cacheDir;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;writeFile&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Bitmap bmp, File f)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;FileOutputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        out = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FileOutputStream&lt;/span&gt;(f);\n        bmp.compress(Bitmap.CompressFormat.PNG, &lt;span class=&quot;hljs-number&quot;&gt;80&lt;/span&gt;, out);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {\n        e.printStackTrace();\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;finally&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (out != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;)\n                out.close();\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {\n        }\n    }\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// download asynctask&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;BitmapDownloaderTask&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;AsyncTask&lt;/span&gt;&amp;lt;String, Void, Bitmap&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String url;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; WeakReference&amp;lt;ImageView&amp;gt; imageViewReference;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;BitmapDownloaderTask&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(ImageView imageView)&lt;/span&gt; {\n        imageViewReference = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;WeakReference&lt;/span&gt;&amp;lt;ImageView&amp;gt;(imageView);\n    }\n\n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Actual download method, run in the task thread&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; Bitmap &lt;span class=&quot;hljs-title function_&quot;&gt;doInBackground&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String... params)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// params comes from the execute() call: params[0] is the url.&lt;/span&gt;\n        url = (String) params[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; downloadBitmap(params[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]);\n    }\n\n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Once the image is downloaded, associates it to the imageView&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onPostExecute&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Bitmap bitmap)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (isCancelled()) {\n            bitmap = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n        }\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (imageViewReference != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-type&quot;&gt;ImageView&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imageView&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; imageViewReference.get();\n            &lt;span class=&quot;hljs-type&quot;&gt;BitmapDownloaderTask&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;bitmapDownloaderTask&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; getBitmapDownloaderTask(imageView);\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Change bitmap only if this process is still associated with&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;// it&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt; == bitmapDownloaderTask) {\n                imageView.setImageBitmap(bitmap);\n\n                &lt;span class=&quot;hljs-comment&quot;&gt;// cache the image&lt;/span&gt;\n\n                &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; String.valueOf(url.hashCode());\n                &lt;span class=&quot;hljs-type&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(\n                        getCacheDirectory(imageView.getContext()), filename);\n\n                imageCache.put(f.getPath(), bitmap);\n\n                writeFile(bitmap, f);\n            }\n        }\n    }\n\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadedDrawable&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ColorDrawable&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; WeakReference&amp;lt;BitmapDownloaderTask&amp;gt; bitmapDownloaderTaskReference;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;DownloadedDrawable&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(BitmapDownloaderTask bitmapDownloaderTask)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;super&lt;/span&gt;(Color.WHITE);\n        bitmapDownloaderTaskReference = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;WeakReference&lt;/span&gt;&amp;lt;BitmapDownloaderTask&amp;gt;(\n                bitmapDownloaderTask);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; BitmapDownloaderTask &lt;span class=&quot;hljs-title function_&quot;&gt;getBitmapDownloaderTask&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; bitmapDownloaderTaskReference.get();\n    }\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// the actual download code&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; Bitmap &lt;span class=&quot;hljs-title function_&quot;&gt;downloadBitmap&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String url)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;HttpParams&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;BasicHttpParams&lt;/span&gt;();\n    params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION,\n            HttpVersion.HTTP_1_1);\n    &lt;span class=&quot;hljs-type&quot;&gt;HttpClient&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DefaultHttpClient&lt;/span&gt;(params);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;HttpGet&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;getRequest&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpGet&lt;/span&gt;(url);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        &lt;span class=&quot;hljs-type&quot;&gt;HttpResponse&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; client.execute(getRequest);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;statusCode&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; response.getStatusLine().getStatusCode();\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (statusCode != HttpStatus.SC_OK) {\n            Log.w(&lt;span class=&quot;hljs-string&quot;&gt;&quot;ImageDownloader&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Error &quot;&lt;/span&gt; + statusCode\n                    + &lt;span class=&quot;hljs-string&quot;&gt;&quot; while retrieving bitmap from &quot;&lt;/span&gt; + url);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n        }\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;HttpEntity&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; response.getEntity();\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (entity != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;inputStream&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n                inputStream = entity.getContent();\n                &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;Bitmap&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;bitmap&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; BitmapFactory\n                        .decodeStream(inputStream);\n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; bitmap;\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;finally&lt;/span&gt; {\n                &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (inputStream != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n                    inputStream.close();\n                }\n                entity.consumeContent();\n            }\n        }\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Could provide a more explicit error message for IOException or&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// IllegalStateException&lt;/span&gt;\n        getRequest.abort();\n        Log.w(&lt;span class=&quot;hljs-string&quot;&gt;&quot;ImageDownloader&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Error while retrieving bitmap from &quot;&lt;/span&gt;\n                + url + e.toString());\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;finally&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (client != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-comment&quot;&gt;// client.close();&lt;/span&gt;\n        }\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I had this issue and implemented lruCache. I believe you need API 12 and above or use the compatiblity v4 library. lurCache is fast memory, but it also has a budget, so if you&apos;re worried about that you can use a diskcache... It&apos;s all described in &lt;em&gt;&lt;a href=&quot;http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html&quot; rel=&quot;noreferrer&quot;&gt;Caching Bitmaps&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;I&apos;ll now provide my implementation which is a &lt;a href=&quot;http://en.wikipedia.org/wiki/Singleton_pattern&quot; rel=&quot;noreferrer&quot;&gt;singleton&lt;/a&gt; I call from anywhere like this:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//Where the first is a string and the other is a imageview to load.&lt;/span&gt;\n\nDownloadImageTask&lt;span class=&quot;hljs-selector-class&quot;&gt;.getInstance&lt;/span&gt;()&lt;span class=&quot;hljs-selector-class&quot;&gt;.loadBitmap&lt;/span&gt;(avatarURL, iv_avatar);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here&apos;s the ideal code to cache and then call the above in getView of an adapter when retrieving the web image:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadImageTask&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; LruCache&amp;lt;String, Bitmap&amp;gt; mMemoryCache;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;/* Create a singleton class to call this from multiple classes */&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;DownloadImageTask&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; DownloadImageTask &lt;span class=&quot;hljs-title function_&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (instance == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n            instance = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadImageTask&lt;/span&gt;();\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; instance;\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Lock the constructor from public instances&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;DownloadImageTask&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Get max available VM memory, exceeding this amount will throw an&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// OutOfMemory exception. Stored in kilobytes as LruCache takes an&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// int in its constructor.&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;maxMemory&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt;) (Runtime.getRuntime().maxMemory() / &lt;span class=&quot;hljs-number&quot;&gt;1024&lt;/span&gt;);\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Use 1/8th of the available memory for this memory cache.&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;cacheSize&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; maxMemory / &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;\n\n        mMemoryCache = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;LruCache&lt;/span&gt;&amp;lt;String, Bitmap&amp;gt;(cacheSize) {\n            &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;sizeOf&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String key, Bitmap bitmap)&lt;/span&gt; {\n                &lt;span class=&quot;hljs-comment&quot;&gt;// The cache size will be measured in kilobytes rather than&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// number of items.&lt;/span&gt;\n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; bitmap.getByteCount() / &lt;span class=&quot;hljs-number&quot;&gt;1024&lt;/span&gt;;\n            }\n        };\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;loadBitmap&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String avatarURL, ImageView imageView)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imageKey&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; String.valueOf(avatarURL);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;Bitmap&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;bitmap&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; getBitmapFromMemCache(imageKey);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bitmap != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n            imageView.setImageBitmap(bitmap);\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            imageView.setImageResource(R.drawable.ic_launcher);\n\n            &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadImageTaskViaWeb&lt;/span&gt;(imageView).execute(avatarURL);\n        }\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;addBitmapToMemoryCache&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String key, Bitmap bitmap)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (getBitmapFromMemCache(key) == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n            mMemoryCache.put(key, bitmap);\n        }\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; Bitmap &lt;span class=&quot;hljs-title function_&quot;&gt;getBitmapFromMemCache&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String key)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; mMemoryCache.get(key);\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;/* A background process that opens a http stream and decodes a web image. */&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadImageTaskViaWeb&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;AsyncTask&lt;/span&gt;&amp;lt;String, Void, Bitmap&amp;gt; {\n        ImageView bmImage;\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;DownloadImageTaskViaWeb&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(ImageView bmImage)&lt;/span&gt; {\n            &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.bmImage = bmImage;\n        }\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; Bitmap &lt;span class=&quot;hljs-title function_&quot;&gt;doInBackground&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String... urls)&lt;/span&gt; {\n\n            &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;urldisplay&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; urls[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n            &lt;span class=&quot;hljs-type&quot;&gt;Bitmap&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;mIcon&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n                &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;java&lt;/span&gt;.net.URL(urldisplay).openStream();\n                mIcon = BitmapFactory.decodeStream(in);\n\n            } \n            &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {\n                Log.e(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Error&quot;&lt;/span&gt;, e.getMessage());\n                e.printStackTrace();\n            }\n\n            addBitmapToMemoryCache(String.valueOf(urldisplay), mIcon);\n\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; mIcon;\n        }\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;/* After decoding we update the view on the main UI. */&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onPostExecute&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Bitmap result)&lt;/span&gt; {\n            bmImage.setImageBitmap(result);\n        }\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    "]},"page":"78","randomQuestions":[{"title":"How do you use bcrypt for hashing passwords in PHP? [duplicate]","slug":"how-do-you-use-bcrypt-for-hashing-passwords-in-php-duplicate-1657387318517"},{"title":"How to remove the space between inline/inline-block elements?","slug":"how-to-remove-the-space-between-inlineinline-block-elements-1657384532273"},{"title":"Why don't flex items shrink past content size?","slug":"why-don't-flex-items-shrink-past-content-size-1657384687282"},{"title":"Reference: mod_rewrite, URL rewriting and \"pretty links\" explained","slug":"reference:-mod_rewrite-url-rewriting-and-\"pretty-links\"-explained-1657384905504"},{"title":"How to serve static files in Flask","slug":"how-to-serve-static-files-in-flask-1657387862496"},{"title":"How to deal with SettingWithCopyWarning in Pandas","slug":"how-to-deal-with-settingwithcopywarning-in-pandas-1657384778377"},{"title":"Reference: What is variable scope, which variables are accessible from where and what are \"undefined variable\" errors?","slug":"reference:-what-is-variable-scope-which-variables-are-accessible-from-where-and-what-are-\"undefined-variable\"-errors-1657384644697"},{"title":"What does \"Fatal error: Unexpectedly found nil while unwrapping an Optional value\" mean?","slug":"what-does-\"fatal-error:-unexpectedly-found-nil-while-unwrapping-an-optional-value\"-mean-1657384593944"},{"title":"JavaScript property access: dot notation vs. brackets?","slug":"javascript-property-access:-dot-notation-vs.-brackets-1657384717494"},{"title":"Find object by id in an array of JavaScript objects","slug":"find-object-by-id-in-an-array-of-javascript-objects-1657387572087"},{"title":"How do I write a correct micro-benchmark in Java?","slug":"how-do-i-write-a-correct-micro-benchmark-in-java-1657384488725"},{"title":"How can I parse a JSON file with PHP? [duplicate]","slug":"how-can-i-parse-a-json-file-with-php-duplicate-1657388002325"},{"title":"Percentage Height HTML 5/CSS","slug":"percentage-height-html-5css-1657387471048"},{"title":"MySQL pivot row into dynamic number of columns","slug":"mysql-pivot-row-into-dynamic-number-of-columns-1657387981930"},{"title":"C++ Singleton design pattern","slug":"c++-singleton-design-pattern-1657387830040"},{"title":"How can I transition height: 0; to height: auto; using CSS?","slug":"how-can-i-transition-height:-0-to-height:-auto-using-css-1657388022100"},{"title":"How do I count the occurrences of a list item?","slug":"how-do-i-count-the-occurrences-of-a-list-item-1657387916234"},{"title":"How do I get PHP errors to display?","slug":"how-do-i-get-php-errors-to-display-1657384570095"},{"title":"How do I iterate over the words of a string?","slug":"how-do-i-iterate-over-the-words-of-a-string-1657384806129"},{"title":"How can I upload files to a server using JSP/Servlet?","slug":"how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658"}]},"__N_SSG":true}