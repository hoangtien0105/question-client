{"pageProps":{"data":{"count":610,"rows":[{"id":35,"title":"Why is iostream::eof inside a loop condition (i.e. `while (!stream.eof())`) considered wrong?","slug":"why-is-iostream::eof-inside-a-loop-condition-(i.e.-while-(!stream.eof()))-considered-wrong-1657384355427","postType":"QUESTION","createdAt":"2022-07-09T16:32:35.000Z","updatedAt":"2022-07-09T16:32:35.000Z","tags":[{"id":122,"name":"iostream","slug":"iostream","createdAt":"2022-07-09T16:32:35.000Z","updatedAt":"2022-07-09T16:32:35.000Z","Questions_Tags":{"questionId":35,"tagId":122}}]},{"id":34,"title":"Official locator strategies for the webdriver","slug":"official-locator-strategies-for-the-webdriver-1657384353174","postType":"QUESTION","createdAt":"2022-07-09T16:32:33.000Z","updatedAt":"2022-07-09T16:32:33.000Z","tags":[{"id":118,"name":"google-chrome","slug":"google-chrome","createdAt":"2022-07-09T16:32:33.000Z","updatedAt":"2022-07-09T16:32:33.000Z","Questions_Tags":{"questionId":34,"tagId":118}},{"id":119,"name":"selenium","slug":"selenium","createdAt":"2022-07-09T16:32:33.000Z","updatedAt":"2022-07-09T16:32:33.000Z","Questions_Tags":{"questionId":34,"tagId":119}},{"id":120,"name":"chromium","slug":"chromium","createdAt":"2022-07-09T16:32:33.000Z","updatedAt":"2022-07-09T16:32:33.000Z","Questions_Tags":{"questionId":34,"tagId":120}},{"id":121,"name":"chrome-web-driver","slug":"chrome-web-driver","createdAt":"2022-07-09T16:32:33.000Z","updatedAt":"2022-07-09T16:32:33.000Z","Questions_Tags":{"questionId":34,"tagId":121}}]},{"id":33,"title":"How do you parse and process HTML/XML in PHP?","slug":"how-do-you-parse-and-process-htmlxml-in-php-1657384351267","postType":"QUESTION","createdAt":"2022-07-09T16:32:31.000Z","updatedAt":"2022-07-09T16:32:31.000Z","tags":[{"id":114,"name":"xml","slug":"xml","createdAt":"2022-07-09T16:32:31.000Z","updatedAt":"2022-07-09T16:32:31.000Z","Questions_Tags":{"questionId":33,"tagId":114}},{"id":115,"name":"xml-parsing","slug":"xml-parsing","createdAt":"2022-07-09T16:32:31.000Z","updatedAt":"2022-07-09T16:32:31.000Z","Questions_Tags":{"questionId":33,"tagId":115}},{"id":116,"name":"html-parsing","slug":"html-parsing","createdAt":"2022-07-09T16:32:31.000Z","updatedAt":"2022-07-09T16:32:31.000Z","Questions_Tags":{"questionId":33,"tagId":116}}]},{"id":32,"title":"How to use ThreeTenABP in Android Project","slug":"how-to-use-threetenabp-in-android-project-1657384345704","postType":"QUESTION","createdAt":"2022-07-09T16:32:25.000Z","updatedAt":"2022-07-09T16:32:25.000Z","tags":[{"id":107,"name":"android","slug":"android","createdAt":"2022-07-09T16:32:25.000Z","updatedAt":"2022-07-09T16:32:25.000Z","Questions_Tags":{"questionId":32,"tagId":107}},{"id":108,"name":"datetime","slug":"datetime","createdAt":"2022-07-09T16:32:25.000Z","updatedAt":"2022-07-09T16:32:25.000Z","Questions_Tags":{"questionId":32,"tagId":108}},{"id":109,"name":"android-gradle-plugin","slug":"android-gradle-plugin","createdAt":"2022-07-09T16:32:25.000Z","updatedAt":"2022-07-09T16:32:25.000Z","Questions_Tags":{"questionId":32,"tagId":109}},{"id":110,"name":"threetenbp","slug":"threetenbp","createdAt":"2022-07-09T16:32:25.000Z","updatedAt":"2022-07-09T16:32:25.000Z","Questions_Tags":{"questionId":32,"tagId":110}},{"id":111,"name":"threetenabp","slug":"threetenabp","createdAt":"2022-07-09T16:32:25.000Z","updatedAt":"2022-07-09T16:32:25.000Z","Questions_Tags":{"questionId":32,"tagId":111}}]},{"id":31,"title":"Why can templates only be implemented in the header file?","slug":"why-can-templates-only-be-implemented-in-the-header-file-1657384341933","postType":"QUESTION","createdAt":"2022-07-09T16:32:21.000Z","updatedAt":"2022-07-09T16:32:21.000Z","tags":[{"id":104,"name":"templates","slug":"templates","createdAt":"2022-07-09T16:32:22.000Z","updatedAt":"2022-07-09T16:32:22.000Z","Questions_Tags":{"questionId":31,"tagId":104}}]}]},"answers":{"31":["\n&lt;p&gt;Caveat: It is &lt;em&gt;not&lt;/em&gt; necessary to put the implementation in the header file, see the alternative solution at the end of this answer.&lt;/p&gt;\n\n&lt;p&gt;Anyway, the reason your code is failing is that, when instantiating a template, the compiler creates a new class with the given template argument. For example:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T&amp;gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Foo&lt;/span&gt;\n{\n    T bar;\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;doSomething&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(T param)&lt;/span&gt; &lt;/span&gt;{&lt;span class=&quot;hljs-comment&quot;&gt;/* do stuff using T */&lt;/span&gt;}\n};\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// somewhere in a .cpp&lt;/span&gt;\nFoo&amp;lt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt;&amp;gt; f; \n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;When reading this line, the compiler will create a new class (let&apos;s call it &lt;code&gt;FooInt&lt;/code&gt;), which is equivalent to the following:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FooInt&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; bar;\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;doSomething&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; param)&lt;/span&gt; &lt;/span&gt;{&lt;span class=&quot;hljs-comment&quot;&gt;/* do stuff using int */&lt;/span&gt;}\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Consequently, the compiler needs to have access to the implementation of the methods, to instantiate them with the template argument (in this case &lt;code&gt;int&lt;/code&gt;). If these implementations were not in the header, they wouldn&apos;t be accessible, and therefore the compiler wouldn&apos;t be able to instantiate the template.&lt;/p&gt;\n\n&lt;p&gt;A common solution to this is to write the template declaration in a header file, then implement the class in an implementation file (for example .tpp), and include this implementation file at the end of the header.&lt;/p&gt;\n\n&lt;p&gt;Foo.h&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T&amp;gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Foo&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;doSomething&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(T param)&lt;/span&gt;&lt;/span&gt;;\n};\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Foo.tpp&quot;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Foo.tpp&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T&amp;gt;\n&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; Foo&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;doSomething&lt;/span&gt;(T param)\n{\n    &lt;span class=&quot;hljs-comment&quot;&gt;//implementation&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This way, implementation is still separated from declaration, but is accessible to the compiler.&lt;/p&gt;\n\n&lt;h1&gt;Alternative solution&lt;/h1&gt;\n\n&lt;p&gt;Another solution is to keep the implementation separated, and explicitly instantiate all the template instances you&apos;ll need:&lt;/p&gt;\n\n&lt;p&gt;Foo.h&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// no implementation&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T&amp;gt; &lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Foo&lt;/span&gt; { ... };\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Foo.cpp&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// implementation of Foo&apos;s methods&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// explicit instantiations&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Foo&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt;&amp;gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Foo&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-type&quot;&gt;float&lt;/span&gt;&amp;gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;// You will only be able to use Foo with int or float&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If my explanation isn&apos;t clear enough, you can have a look at the &lt;a href=&quot;https://isocpp.org/wiki/faq/templates#templates-defn-vs-decl&quot; rel=&quot;noreferrer&quot;&gt;C++ Super-FAQ on this subject&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;It&apos;s because of the requirement for separate compilation and because templates are instantiation-style polymorphism.&lt;/p&gt;\n\n&lt;p&gt;Lets get a little closer to concrete for an explanation. Say I&apos;ve got the following files:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;foo.h\n&lt;ul&gt;\n&lt;li&gt;declares the interface of &lt;code&gt;class MyClass&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;foo.cpp\n&lt;ul&gt;\n&lt;li&gt;defines the implementation of &lt;code&gt;class MyClass&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;bar.cpp\n&lt;ul&gt;\n&lt;li&gt;uses &lt;code&gt;MyClass&amp;lt;int&amp;gt;&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Separate compilation means I should be able to compile &lt;strong&gt;foo.cpp&lt;/strong&gt; independently from &lt;strong&gt;bar.cpp&lt;/strong&gt;. The compiler does all the hard work of analysis, optimization, and code generation on each compilation unit completely independently; we don&apos;t need to do whole-program analysis. It&apos;s only the linker that needs to handle the entire program at once, and the linker&apos;s job is substantially easier.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;bar.cpp&lt;/strong&gt; doesn&apos;t even need to exist when I compile &lt;strong&gt;foo.cpp&lt;/strong&gt;, but I should still be able to link the &lt;strong&gt;foo.o&lt;/strong&gt; I already had together with the &lt;strong&gt;bar.o&lt;/strong&gt; I&apos;ve only just produced, without needing to recompile &lt;strong&gt;foo.cpp&lt;/strong&gt;. &lt;strong&gt;foo.cpp&lt;/strong&gt; could even be compiled into a dynamic library, distributed somewhere else without &lt;strong&gt;foo.cpp&lt;/strong&gt;, and linked with code they write years after I wrote &lt;strong&gt;foo.cpp&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;p&gt;&quot;Instantiation-style polymorphism&quot; means that the template &lt;code&gt;MyClass&amp;lt;T&amp;gt;&lt;/code&gt; isn&apos;t really a generic class that can be compiled to code that can work for any value of &lt;code&gt;T&lt;/code&gt;. That would add overhead such as boxing, needing to pass function pointers to allocators and constructors, etc. The intention of C++ templates is to avoid having to write nearly identical &lt;code&gt;class MyClass_int&lt;/code&gt;, &lt;code&gt;class MyClass_float&lt;/code&gt;, etc, but to still be able to end up with compiled code that is mostly as if we &lt;em&gt;had&lt;/em&gt; written each version separately. So a template is &lt;em&gt;literally&lt;/em&gt; a template; a class template is &lt;em&gt;not&lt;/em&gt; a class, it&apos;s a recipe for creating a new class for each &lt;code&gt;T&lt;/code&gt; we encounter. A template cannot be compiled into code, only the result of instantiating the template can be compiled.&lt;/p&gt;\n\n&lt;p&gt;So when &lt;strong&gt;foo.cpp&lt;/strong&gt; is compiled, the compiler can&apos;t see &lt;strong&gt;bar.cpp&lt;/strong&gt; to know that &lt;code&gt;MyClass&amp;lt;int&amp;gt;&lt;/code&gt; is needed. It can see the template &lt;code&gt;MyClass&amp;lt;T&amp;gt;&lt;/code&gt;, but it can&apos;t emit code for that (it&apos;s a template, not a class). And when &lt;strong&gt;bar.cpp&lt;/strong&gt; is compiled, the compiler can see that it needs to create a &lt;code&gt;MyClass&amp;lt;int&amp;gt;&lt;/code&gt;, but it can&apos;t see the template &lt;code&gt;MyClass&amp;lt;T&amp;gt;&lt;/code&gt; (only its interface in &lt;strong&gt;foo.h&lt;/strong&gt;) so it can&apos;t create it.&lt;/p&gt;\n\n&lt;p&gt;If &lt;strong&gt;foo.cpp&lt;/strong&gt; itself uses &lt;code&gt;MyClass&amp;lt;int&amp;gt;&lt;/code&gt;, then code for that will be generated while compiling &lt;strong&gt;foo.cpp&lt;/strong&gt;, so when &lt;strong&gt;bar.o&lt;/strong&gt; is linked to &lt;strong&gt;foo.o&lt;/strong&gt; they can be hooked up and will work. We can use that fact to allow a finite set of template instantiations to be implemented in a .cpp file by writing a single template. But there&apos;s no way for &lt;strong&gt;bar.cpp&lt;/strong&gt; to use the template &lt;em&gt;as a template&lt;/em&gt; and instantiate it on whatever types it likes; it can only use pre-existing versions of the templated class that the author of &lt;strong&gt;foo.cpp&lt;/strong&gt; thought to provide.&lt;/p&gt;\n\n&lt;p&gt;You might think that when compiling a template the compiler should &quot;generate all versions&quot;, with the ones that are never used being filtered out during linking. Aside from the huge overhead and the extreme difficulties such an approach would face because &quot;type modifier&quot; features like pointers and arrays allow even just the built-in types to give rise to an infinite number of types, what happens when I now extend my program by adding:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;baz.cpp\n&lt;ul&gt;\n&lt;li&gt;declares and implements &lt;code&gt;class BazPrivate&lt;/code&gt;, and uses &lt;code&gt;MyClass&amp;lt;BazPrivate&amp;gt;&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;There is no possible way that this could work unless we either&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Have to recompile &lt;strong&gt;foo.cpp&lt;/strong&gt; every time we change &lt;em&gt;any other file in the program&lt;/em&gt;, in case it added a new novel instantiation of &lt;code&gt;MyClass&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Require that &lt;strong&gt;baz.cpp&lt;/strong&gt; contains (possibly via header includes) the full template of &lt;code&gt;MyClass&amp;lt;T&amp;gt;&lt;/code&gt;, so that the compiler can generate &lt;code&gt;MyClass&amp;lt;BazPrivate&amp;gt;&lt;/code&gt; during compilation of &lt;strong&gt;baz.cpp&lt;/strong&gt;.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Nobody likes (1), because whole-program-analysis compilation systems take &lt;em&gt;forever&lt;/em&gt; to compile , and because it makes it impossible to distribute compiled libraries without the source code. So we have (2) instead.&lt;/p&gt;\n    ","\n&lt;p&gt;Plenty correct answers here, but I wanted to add this (for completeness):&lt;/p&gt;\n&lt;p&gt;If you, at the bottom of the implementation cpp file, do explicit instantiation of all the types the template will be used with, the linker will be able to find them as usual.&lt;/p&gt;\n&lt;p&gt;Edit: Adding example of explicit template instantiation. Used after the template has been defined, and all member functions has been defined.&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt;&amp;gt;;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This will instantiate (and thus make available to the linker) the class and all its member functions (only). Similar syntax works for function templates, so if you have non-member operator overloads you may need to do the same for those.&lt;/p&gt;\n&lt;p&gt;The above example is fairly useless since vector is fully defined in headers, except when a common include file (precompiled header?) uses &lt;code&gt;extern template class vector&amp;lt;int&amp;gt;&lt;/code&gt; so as to keep it from instantiating it in all the &lt;em&gt;other&lt;/em&gt; (1000?) files that use vector.&lt;/p&gt;\n    ","\n&lt;p&gt;Templates need to be &lt;em&gt;instantiated&lt;/em&gt; by the compiler before actually compiling them into object code.  This instantiation can only be achieved if the template arguments are known. Now imagine a scenario where a template function is declared in &lt;code&gt;a.h&lt;/code&gt;, defined in &lt;code&gt;a.cpp&lt;/code&gt; and used in &lt;code&gt;b.cpp&lt;/code&gt;. When &lt;code&gt;a.cpp&lt;/code&gt; is compiled, it is not necessarily known that the upcoming compilation &lt;code&gt;b.cpp&lt;/code&gt; will require an instance of the template, let alone which specific instance would that be. For more header and source files, the situation can quickly get more complicated.&lt;/p&gt;\n\n&lt;p&gt;One can argue that compilers can be made smarter to &quot;look ahead&quot; for all uses of the template, but I&apos;m sure that it wouldn&apos;t be difficult to create recursive or otherwise complicated scenarios. AFAIK, compilers don&apos;t do such look aheads.  As Anton pointed out, some compilers support explicit export declarations of template instantiations, but not all compilers support it (yet?).&lt;/p&gt;\n    ","\n&lt;p&gt;Actually, prior to C++11 the standard defined the &lt;code&gt;export&lt;/code&gt; keyword that &lt;em&gt;would&lt;/em&gt; make it possible to declare templates in a header file and implement them elsewhere. In a manner of speaking. Not really, as the only ones who ever &lt;em&gt;implemented&lt;/em&gt; that feature &lt;a href=&quot;http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2003/n1426.pdf&quot; rel=&quot;nofollow noreferrer&quot;&gt;pointed out&lt;/a&gt;:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Phantom advantage #1: Hiding source code. Many users, have said that they expect that by using export they will\nno longer have to ship definitions for member/nonmember function templates and member functions of class\ntemplates. This is not true. With export, library writers still have to ship full template source code or its direct\nequivalent (e.g., a system-specific parse tree) because the full information is required for instantiation. [...]&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Phantom advantage #2: Fast builds, reduced dependencies. Many users expect that export will allow true separate\ncompilation of templates to object code which they expect would allow faster builds. It doesnt because the\ncompilation of exported templates is indeed separate but not to object code. Instead, export almost always makes\nbuilds slower, because at least the same amount of compilation work must still be done at prelink time. Export\ndoes not even reduce dependencies between template definitions because the dependencies are intrinsic,\nindependent of file organization.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;None of the popular compilers implemented this keyword. The only implementation of the feature was in the frontend written by the Edison Design Group, which is used by the Comeau C++ compiler. All others required you to write templates in header files, because the compiler needs the template definition for proper instantiation (as others pointed out already).&lt;/p&gt;\n&lt;p&gt;As a result, the ISO C++ standard committee decided to remove the &lt;code&gt;export&lt;/code&gt; feature of templates with C++11.&lt;/p&gt;\n    ","\n&lt;p&gt;Although standard C++ has no such requirement, some compilers require that all function and class templates need to be made available in every translation unit they are used. In effect, for those compilers, the bodies of template functions must be made available in a header file. To repeat: that means those compilers won&apos;t allow them to be defined in non-header files such as .cpp files&lt;/p&gt;\n\n&lt;p&gt;There is an &lt;em&gt;export&lt;/em&gt; keyword which is supposed to mitigate this problem, but it&apos;s nowhere close to being portable.&lt;/p&gt;\n    ","\n&lt;p&gt;Templates are often used in headers because the compiler needs to instantiate different versions of the code, depending on the parameters given/deduced for template parameters, and it&apos;s easier (as a programmer) to let the compiler recompile the same code multiple times and deduplicate later.\nRemember that a template doesn&apos;t represent code directly, but a template for several versions of that code.\nWhen you compile a non-template function in a &lt;code&gt;.cpp&lt;/code&gt; file, you are compiling a concrete function/class.\nThis is not the case for templates, which can be instantiated with different types, namely, concrete code must be emitted when replacing template parameters with concrete types.&lt;/p&gt;\n&lt;p&gt;There was a feature with the &lt;code&gt;export&lt;/code&gt; keyword that was meant to be used for separate compilation.\nThe &lt;code&gt;export&lt;/code&gt; feature is deprecated in &lt;code&gt;C++11&lt;/code&gt; and, AFAIK, only one compiler implemented it.\nYou shouldn&apos;t make use of &lt;code&gt;export&lt;/code&gt;.\nSeparate compilation is not possible in &lt;code&gt;C++&lt;/code&gt; or &lt;code&gt;C++11&lt;/code&gt; but maybe in &lt;code&gt;C++17&lt;/code&gt;, if concepts make it in, we could have some way of separate compilation.&lt;/p&gt;\n&lt;p&gt;For separate compilation to be achieved, separate template body checking must be possible.\nIt seems that a solution is possible with concepts.\nTake a look at this &lt;a href=&quot;http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3629.pdf&quot; rel=&quot;nofollow noreferrer&quot;&gt;paper&lt;/a&gt; recently presented at the\nstandards committee meeting.\nI think this is not the only requirement, since you still need to instantiate code for the template code in user code.&lt;/p&gt;\n&lt;p&gt;The separate compilation problem for templates I guess it&apos;s also a problem that is arising with the migration to modules, which is currently being worked.&lt;/p&gt;\n&lt;p&gt;EDIT: As of August 2020 Modules are already a reality for C++: &lt;a href=&quot;https://en.cppreference.com/w/cpp/language/modules&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://en.cppreference.com/w/cpp/language/modules&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Even though there are plenty of good explanations above, I&apos;m missing a practical way to separate templates into header and body.&lt;br&gt;\nMy main concern is avoiding recompilation of all template users, when I change its definition.&lt;br&gt;\nHaving all template instantiations in the template body is not a viable solution for me, since the template author may not know all if its usage and the template user may not have the right to modify it.&lt;br&gt;\nI took the following approach, which works also for older compilers (gcc 4.3.4, aCC A.03.13).&lt;/p&gt;\n\n&lt;p&gt;For each template usage there&apos;s a typedef in its own header file (generated from the UML model). Its body contains the instantiation (which ends up in a library which is linked in at the end).&lt;br&gt;\nEach user of the template includes that header file and uses the typedef.  &lt;/p&gt;\n\n&lt;p&gt;A schematic example:&lt;/p&gt;\n\n&lt;p&gt;MyTemplate.h:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;ifndef&lt;/span&gt; MyTemplate_h&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; MyTemplate_h 1&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyTemplate&lt;/span&gt;\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n  &lt;span class=&quot;hljs-built_in&quot;&gt;MyTemplate&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; T&amp;amp; rt);\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;\n  T t;\n};\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;MyTemplate.cpp:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;MyTemplate.h&quot;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\nMyTemplate&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;MyTemplate&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; T&amp;amp; rt)\n: &lt;span class=&quot;hljs-built_in&quot;&gt;t&lt;/span&gt;(rt)\n{\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; MyTemplate&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;dump&lt;/span&gt;()\n{\n  cerr &amp;lt;&amp;lt; t &amp;lt;&amp;lt; endl;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;MyInstantiatedTemplate.h:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;ifndef&lt;/span&gt; MyInstantiatedTemplate_h&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; MyInstantiatedTemplate_h 1&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;MyTemplate.h&quot;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;typedef&lt;/span&gt; MyTemplate&amp;lt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &amp;gt; MyInstantiatedTemplate;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;MyInstantiatedTemplate.cpp:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;MyTemplate.cpp&quot;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyTemplate&lt;/span&gt;&amp;lt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &amp;gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;main.cpp:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;MyInstantiatedTemplate.h&quot;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n  &lt;span class=&quot;hljs-function&quot;&gt;MyInstantiatedTemplate &lt;span class=&quot;hljs-title&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;;\n  m.&lt;span class=&quot;hljs-built_in&quot;&gt;dump&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This way only the template instantiations will need to be recompiled, not all template users (and dependencies).&lt;/p&gt;\n    ","\n&lt;p&gt;It means that the most portable way to define method implementations of template classes is to define them inside the template class definition.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt; &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ... &amp;gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyClass&lt;/span&gt;\n{\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;myMethod&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n    &lt;/span&gt;{\n       &lt;span class=&quot;hljs-comment&quot;&gt;// Not just declaration. Add method implementation here&lt;/span&gt;\n    }\n};\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The compiler will generate code for each template instantiation when you use a template during the compilation step. \nIn the compilation and linking process .cpp files are converted to pure object or machine code which in them contains references or undefined symbols because the .h files that are included in your main.cpp have no implementation YET. These are ready to be linked with another object file that defines an implementation for your template and thus you have a full a.out executable.&lt;/p&gt;\n\n&lt;p&gt;However since templates need to be processed in the compilation step in order to generate code for each template instantiation that you define, so simply compiling a template separate from it&apos;s header file won&apos;t work because they always go hand and hand, for the very reason that each template instantiation is a whole new class literally. In a regular class you can separate .h and .cpp because .h is a blueprint of that class and the .cpp is the raw implementation so any implementation files can be compiled and linked regularly, however using templates .h is a blueprint of how the class should look not how the object should look meaning a template .cpp file isn&apos;t a raw regular implementation of a class, it&apos;s simply a blueprint for a class, so any implementation of a .h template file can&apos;t be compiled because you need something concrete to compile, templates are abstract in that sense. &lt;/p&gt;\n\n&lt;p&gt;Therefore templates are never separately compiled and are only compiled wherever you have a concrete instantiation in some other source file. However, the concrete instantiation needs to know the implementation of the template file, because simply modifying the &lt;code&gt;typename T&lt;/code&gt; using a concrete type in the .h file is not going to do the job because what .cpp is there to link, I can&apos;t find it later on because remember templates are abstract and can&apos;t be compiled, so I&apos;m forced to give the implementation right now so I know what to compile and link, and now that I have the implementation it gets linked into the enclosing source file. Basically, the moment I instantiate a template I need to create a whole new class, and I can&apos;t do that if I don&apos;t know how that class should look like when using the type I provide unless I make notice to the compiler of the template implementation, so now the compiler can replace &lt;code&gt;T&lt;/code&gt; with my type and create a concrete class that&apos;s ready to be compiled and linked.&lt;/p&gt;\n\n&lt;p&gt;To sum up, templates are blueprints for how classes should look, classes are blueprints for how an object should look.\nI can&apos;t compile templates separate from their concrete instantiation because the compiler only compiles concrete types, in other words, templates at least in C++, is pure language abstraction. We have to de-abstract templates so to speak, and we do so by giving them a concrete type to deal with so that our template abstraction can transform into a regular class file and in turn, it can be compiled normally. Separating the template .h file and the template .cpp file is meaningless. It is nonsensical because the separation of .cpp and .h only is only where the .cpp can be compiled individually and linked individually, with templates since we can&apos;t compile them separately, because templates are an abstraction, therefore we are always forced to put the abstraction always together with the concrete instantiation where the concrete instantiation always has to know about the type being used.&lt;/p&gt;\n\n&lt;p&gt;Meaning &lt;code&gt;typename T&lt;/code&gt; get&apos;s replaced during the compilation step not the linking step so if I try to compile a template without &lt;code&gt;T&lt;/code&gt; being replaced as a concrete value type that is completely meaningless to the compiler and as a result object code can&apos;t be created because it doesn&apos;t know what &lt;code&gt;T&lt;/code&gt; is.&lt;/p&gt;\n\n&lt;p&gt;It is technically possible to create some sort of functionality that will save the template.cpp file and switch out the types when it finds them in other sources, I think that the standard does have a keyword &lt;code&gt;export&lt;/code&gt; that will allow you to put templates in a separate cpp file but not that many compilers actually implement this.&lt;/p&gt;\n\n&lt;p&gt;Just a side note, when making specializations for a template class, you can separate the header from the implementation because a specialization by definition means that I am specializing for a concrete type that can be compiled and linked individually.&lt;/p&gt;\n    ","\n&lt;p&gt;Just to add something noteworthy here. One can define methods of a templated class just fine in the implementation file when they are not function templates.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;myQueue.hpp:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt; \n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;QueueA&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; size;\n    ...\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;span class=&quot;hljs-function&quot;&gt;T &lt;span class=&quot;hljs-title&quot;&gt;dequeue&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{\n       &lt;span class=&quot;hljs-comment&quot;&gt;// implementation here&lt;/span&gt;\n    }\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;\n\n    ...\n}    \n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;myQueue.cpp:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// implementation of regular methods goes like this:&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; QueueA&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;isEmpty&lt;/span&gt;() {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;-&amp;gt;size == &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;main&lt;/span&gt;()\n{\n    QueueA&amp;lt;&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;&amp;gt; Q;\n\n    ...\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If the concern is the extra compilation time and binary size bloat produced by compiling the .h as part of all the .cpp modules using it, in many cases what you can do is make the template class descend from a non-templatized base class for non type-dependent parts of the interface, and that base class can have its implementation in the .cpp file. &lt;/p&gt;\n    ","\n&lt;p&gt;That is exactly correct because the compiler has to know what type it is for allocation. So template classes, functions, enums,etc.. must be implemented as well in the header file if it is to be made public or part of a library (static or dynamic) because header files are NOT compiled unlike the c/cpp files which are. If the compiler doesn&apos;t know the type is can&apos;t compile it. In .Net it can because all objects derive from the Object class. This is not .Net.&lt;/p&gt;\n    ","\n&lt;p&gt;A way to have separate implementation is as follows.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//inner_foo.h&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T&amp;gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Foo&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;doSomething&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(T param)&lt;/span&gt;&lt;/span&gt;;\n};\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//foo.tpp&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;inner_foo.h&quot;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T&amp;gt;\n&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; Foo&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;doSomething&lt;/span&gt;(T param)\n{\n    &lt;span class=&quot;hljs-comment&quot;&gt;//implementation&lt;/span&gt;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//foo.h&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;foo.tpp&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//main.cpp&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;foo.h&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;inner_foo has the forward declarations. foo.tpp has the implementation and include inner_foo.h; and foo.h will have just one line, to include foo.tpp.&lt;/p&gt;\n\n&lt;p&gt;On compile time, contents of foo.h are copied to foo.tpp and then the whole file is copied to foo.h after which it compiles. This way, there is no limitations, and the naming is consistent, in exchange for one extra file.&lt;/p&gt;\n\n&lt;p&gt;I do this because static analyzers for the code break when it does not see the forward declarations of class in *.tpp. This is annoying when writing code in any IDE or using YouCompleteMe or others.&lt;/p&gt;\n    ","\n&lt;p&gt;I suggest looking at this gcc page which discusses the tradeoffs between the &quot;cfront&quot; and &quot;borland&quot; model for template instantiations.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://gcc.gnu.org/onlinedocs/gcc-4.6.4/gcc/Template-Instantiation.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://gcc.gnu.org/onlinedocs/gcc-4.6.4/gcc/Template-Instantiation.html&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;The &quot;borland&quot; model corresponds to what the author suggests, providing the full template definition, and having things compiled multiple times.&lt;/p&gt;\n\n&lt;p&gt;It contains explicit recommendations concerning using manual and automatic template instantiation.  For example, the &quot;-repo&quot; option can be used to collect templates which need to be instantiated.  Or another option is to disable automatic template instantiations using &quot;-fno-implicit-templates&quot; to force manual template instantiation.&lt;/p&gt;\n\n&lt;p&gt;In my experience, I rely on the C++ Standard Library and Boost templates being instantiated for each compilation unit (using a template library).  For my large template classes, I do manual template instantiation, once, for the types I need.&lt;/p&gt;\n\n&lt;p&gt;This is my approach because I am providing a working program, not a template library for use in other programs.  The author of the book, Josuttis, works a lot on template libraries.&lt;/p&gt;\n\n&lt;p&gt;If I was really worried about speed, I suppose I would explore using Precompiled Headers \n&lt;a href=&quot;https://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;which is gaining support in many compilers.  However, I think precompiled headers would be difficult with template header files.&lt;/p&gt;\n    ","\n&lt;p&gt;Another reason that it&apos;s a good idea to write both declarations and definitions in header files is for readability. Suppose there&apos;s such a template function in Utility.h:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;hljs-function&quot;&gt;T &lt;span class=&quot;hljs-title&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(T &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt;&amp;amp; one, T &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt;&amp;amp; theOther)&lt;/span&gt;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And in the Utility.cpp:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Utility.h&quot;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;hljs-function&quot;&gt;T &lt;span class=&quot;hljs-title&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(T &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt;&amp;amp; one, T &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt;&amp;amp; other)&lt;/span&gt;\n&lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; one &amp;lt; other ? one : other;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This requires every T class here to implement the less than operator (&amp;lt;). It will throw a compiler error when you compare two class instances that haven&apos;t implemented the &quot;&amp;lt;&quot;.&lt;/p&gt;\n\n&lt;p&gt;Therefore if you separate the template declaration and definition, you won&apos;t be able to only read the header file to see the ins and outs of this template in order to use this API on your own classes, though the compiler will tell you in this case about which operator needs to be overridden.&lt;/p&gt;\n    ","\n&lt;p&gt;You can actually define your template class inside a .template file rather than a .cpp file. Whoever is saying you can only define it inside a header file is wrong. This is something that works all the way back to c++ 98.&lt;/p&gt;\n\n&lt;p&gt;Don&apos;t forget to have your compiler treat your .template file as a c++ file to keep the intelli sense. &lt;/p&gt;\n\n&lt;p&gt;Here is an example of this for a dynamic array class.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;ifndef&lt;/span&gt; dynarray_h&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; dynarray_h&lt;/span&gt;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DynArray&lt;/span&gt;{\n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; capacity_;\n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; size_;\n    T* data;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;explicit&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;DynArray&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; size = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; capacity=&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;DynArray&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; DynArray&amp;amp; d1);\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;DynArray&lt;/span&gt;();\n    T&amp;amp; &lt;span class=&quot;hljs-keyword&quot;&gt;operator&lt;/span&gt;[]( &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; index);\n    &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;operator&lt;/span&gt;=(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; DynArray&amp;lt;T&amp;gt;&amp;amp; d1);\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;capacity&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;push_back&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; n)&lt;/span&gt;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;pop_back&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-function&quot;&gt;T&amp;amp; &lt;span class=&quot;hljs-title&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; n)&lt;/span&gt;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-function&quot;&gt;T&amp;amp; &lt;span class=&quot;hljs-title&quot;&gt;back&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-function&quot;&gt;T&amp;amp; &lt;span class=&quot;hljs-title&quot;&gt;front&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;\n};\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;dynarray.template&quot;&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// this is how you get the header file&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Now inside you .template file you define your functions just how you normally would.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\nDynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;DynArray&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; size, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; capacity){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (capacity &amp;gt;= size){\n        &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;-&amp;gt;size_ = size;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;-&amp;gt;capacity_ = capacity;\n        data = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; T[capacity];\n    }\n    &lt;span class=&quot;hljs-comment&quot;&gt;//    for (int i = 0; i &amp;lt; size; ++i) {&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;//        data[i] = 0;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;//    }&lt;/span&gt;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\nDynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;DynArray&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; DynArray&amp;amp; d1){\n    &lt;span class=&quot;hljs-comment&quot;&gt;//clear();&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;//delete [] data;&lt;/span&gt;\n    std::cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;copy&quot;&lt;/span&gt; &amp;lt;&amp;lt; std::endl;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;-&amp;gt;size_ = d1.size_;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;-&amp;gt;capacity_ = d1.capacity_;\n    data = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; T[&lt;span class=&quot;hljs-built_in&quot;&gt;capacity&lt;/span&gt;()];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;(); ++i){\n        data[i] = d1.data[i];\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\nDynArray&amp;lt;T&amp;gt;::~&lt;span class=&quot;hljs-built_in&quot;&gt;DynArray&lt;/span&gt;(){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; [] data;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\nT&amp;amp; DynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-keyword&quot;&gt;operator&lt;/span&gt;[]( &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; index){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;at&lt;/span&gt;(index);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; DynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-keyword&quot;&gt;operator&lt;/span&gt;=(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; DynArray&amp;lt;T&amp;gt;&amp;amp; d1){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;() &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;clear&lt;/span&gt;();\n    }\n    std::cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;assign&quot;&lt;/span&gt; &amp;lt;&amp;lt; std::endl;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;-&amp;gt;size_ = d1.size_;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;-&amp;gt;capacity_ = d1.capacity_;\n    data = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; T[&lt;span class=&quot;hljs-built_in&quot;&gt;capacity&lt;/span&gt;()];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;(); ++i){\n        data[i] = d1.data[i];\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;//delete [] d1.data;&lt;/span&gt;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; DynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;(){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; size_;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; DynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;capacity&lt;/span&gt;(){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; capacity_;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; DynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;clear&lt;/span&gt;(){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;( &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;(); ++i){\n        data[i] = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    }\n    size_ = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    capacity_ = &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; DynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;push_back&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; n){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;() &amp;gt;= &lt;span class=&quot;hljs-built_in&quot;&gt;capacity&lt;/span&gt;()) {\n        std::cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;grow&quot;&lt;/span&gt; &amp;lt;&amp;lt; std::endl;\n        &lt;span class=&quot;hljs-comment&quot;&gt;//redo the array&lt;/span&gt;\n        T* copy = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; T[capacity_ + &lt;span class=&quot;hljs-number&quot;&gt;40&lt;/span&gt;];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;(); ++i) {\n            copy[i] = data[i];\n        }\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; [] data;\n        data = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; T[ capacity_ * &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;capacity&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;; ++i) {\n            data[i] = copy[i];\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; [] copy;\n        capacity_ *= &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;;\n    }\n    data[&lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;()] = n;\n    ++size_;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; DynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;pop_back&lt;/span&gt;(){\n    data[&lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;()&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;] = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    --size_;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\nT&amp;amp; DynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;at&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; n){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (n &amp;gt;= &lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;()) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; std::&lt;span class=&quot;hljs-built_in&quot;&gt;runtime_error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;invalid index&quot;&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; data[n];\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\nT&amp;amp; DynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;back&lt;/span&gt;(){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;() == &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; std::&lt;span class=&quot;hljs-built_in&quot;&gt;runtime_error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;vector is empty&quot;&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; data[&lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;()&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;];\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;T&lt;/span&gt;&amp;gt;\nT&amp;amp; DynArray&amp;lt;T&amp;gt;::&lt;span class=&quot;hljs-built_in&quot;&gt;front&lt;/span&gt;(){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;size&lt;/span&gt;() == &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; std::&lt;span class=&quot;hljs-built_in&quot;&gt;runtime_error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;vector is empty&quot;&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; data[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n    }\n&lt;/code&gt;&lt;/pre&gt;\n    "],"32":["\n&lt;h1&gt;Attention: This answer, while technically correct, is now out of date&lt;/h1&gt;\n&lt;h3&gt;Java 8+ API desugaring support now available via Android Gradle Plugin 4.0.0+&lt;/h3&gt;\n&lt;p&gt;(Also see &lt;a href=&quot;https://stackoverflow.com/a/61603915/2065427&quot;&gt;Basil Bourque&apos;s answer below&lt;/a&gt;)&lt;/p&gt;\n&lt;p&gt;Development on the &lt;a href=&quot;https://github.com/JakeWharton/ThreeTenABP&quot; rel=&quot;noreferrer&quot;&gt;ThreeTenABP Library&lt;/a&gt; is winding down. Please consider switching to Android Gradle plugin 4.0, java.time.*, and its core library desugaring feature in the coming months.&lt;/p&gt;\n&lt;p&gt;To enable support for these language APIs on any version of the Android platform, update the &lt;a href=&quot;https://developer.android.com/studio/write/java8-support#library-desugaring&quot; rel=&quot;noreferrer&quot;&gt;Android plugin to 4.0.0 (or higher)&lt;/a&gt; and include the following in your modules build.gradle file:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;android {\n  defaultConfig {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Required when setting minSdkVersion to 20 or lower&lt;/span&gt;\n    multiDexEnabled &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\n  }\n\n  compileOptions {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Flag to enable support for the new language APIs&lt;/span&gt;\n    coreLibraryDesugaringEnabled &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Sets Java compatibility to Java 8&lt;/span&gt;\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n  }\n}\n\ndependencies {\n  coreLibraryDesugaring &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.android.tools:desugar_jdk_libs:1.0.5&apos;&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;h1&gt;Original Answer&lt;/h1&gt;\n&lt;h2&gt;First Discovery: Why You Have To Use &lt;em&gt;ThreeTenABP&lt;/em&gt; Instead of &lt;em&gt;java.time&lt;/em&gt;, &lt;em&gt;ThreeTen-Backport&lt;/em&gt;, or even &lt;em&gt;Joda-Time&lt;/em&gt;&lt;/h2&gt;\n&lt;p&gt;This is a really short version of the VERY LONG PROCESS of defining a new standard. All of these packages are pretty much the same thing: libraries that provide good, modern time handling functionality for Java. The differences are subtle but important.&lt;/p&gt;\n&lt;p&gt;The most obvious solution would be to use the built-in &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;java.time&lt;/code&gt;&lt;/a&gt; package, since this is the new standard way to deal with time and dates in Java. It is an implementation of &lt;a href=&quot;https://jcp.org/en/jsr/detail?id=310&quot; rel=&quot;noreferrer&quot;&gt;JSR 310&lt;/a&gt;, which was a new standard proposal for time handling based on the &lt;a href=&quot;http://www.joda.org/joda-time/&quot; rel=&quot;noreferrer&quot;&gt;Joda-Time&lt;/a&gt; library.&lt;/p&gt;\n&lt;p&gt;However, &lt;code&gt;java.time&lt;/code&gt; was introduced in &lt;a href=&quot;https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8&quot; rel=&quot;noreferrer&quot;&gt;Java 8&lt;/a&gt;. Android up to &lt;a href=&quot;https://en.wikipedia.org/wiki/Android_Marshmallow&quot; rel=&quot;noreferrer&quot;&gt;Marshmallow&lt;/a&gt; runs on Java 7 (&quot;Android N&quot; is the first version to introduce Java 8 language features). Thus, unless you&apos;re only targeting &lt;a href=&quot;https://en.wikipedia.org/wiki/Android_Nougat&quot; rel=&quot;noreferrer&quot;&gt;Android N &lt;em&gt;Nougat&lt;/em&gt;&lt;/a&gt; and above, you can&apos;t rely on Java 8 language features (I&apos;m not actually sure this is 100% true, but this is how I understand it). So &lt;code&gt;java.time&lt;/code&gt; is out.&lt;/p&gt;\n&lt;p&gt;The next option might be &lt;a href=&quot;http://www.joda.org/joda-time/&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;Joda-Time&lt;/em&gt;&lt;/a&gt;, since &lt;a href=&quot;https://www.jcp.org/en/jsr/detail?id=310&quot; rel=&quot;noreferrer&quot;&gt;JSR 310&lt;/a&gt; was based on Joda-Time. However, as the &lt;a href=&quot;https://github.com/JakeWharton/ThreeTenABP#why-not-use-threetenbp&quot; rel=&quot;noreferrer&quot;&gt;ThreeTenABP readme&lt;/a&gt; indicates, for a number of reasons, Joda-Time is not the best option.&lt;/p&gt;\n&lt;p&gt;Next is &lt;a href=&quot;http://www.threeten.org/threetenbp/&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;ThreeTen-Backport&lt;/em&gt;&lt;/a&gt;, which back-ports much (but not all) of the Java 8 &lt;code&gt;java.time&lt;/code&gt; functionality to Java 7. This is fine for most use cases, but, as indicated in the &lt;a href=&quot;https://github.com/JakeWharton/ThreeTenABP#why-not-use-threetenbp&quot; rel=&quot;noreferrer&quot;&gt;ThreeTenABP readme&lt;/a&gt;, it has performance issues with Android.&lt;/p&gt;\n&lt;p&gt;So the last and seemingly correct option is &lt;a href=&quot;https://github.com/JakeWharton/ThreeTenABP&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;ThreeTenABP&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;h2&gt;Second Discovery: Build Tools and Dependency Management&lt;/h2&gt;\n&lt;p&gt;Since compiling a program -- especially one using a bunch of external libraries -- is complex, Java almost invariably uses a &lt;a href=&quot;https://en.wikipedia.org/wiki/Build_automation&quot; rel=&quot;noreferrer&quot;&gt;&quot;build tool&quot;&lt;/a&gt; to manage the process. &lt;a href=&quot;https://en.wikipedia.org/wiki/Make_(software)&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;Make&lt;/em&gt;&lt;/a&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Apache_Ant&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;Apache Ant&lt;/em&gt;&lt;/a&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Apache_Maven&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;Apache Maven&lt;/em&gt;&lt;/a&gt;, and &lt;a href=&quot;https://en.wikipedia.org/wiki/Gradle&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;Gradle&lt;/em&gt;&lt;/a&gt; are all build tools that are used with Java programs (see &lt;a href=&quot;https://technologyconversations.com/2014/06/18/build-tools/&quot; rel=&quot;noreferrer&quot;&gt;this post&lt;/a&gt; for comparisons). As noted further down, Gradle is the chosen build tool for Android projects.&lt;/p&gt;\n&lt;p&gt;These build tools include dependency management. Apache Maven appears to be the first to include a centralized package repository. Maven introduced the &lt;a href=&quot;https://search.maven.org/&quot; rel=&quot;noreferrer&quot;&gt;Maven Central Repository&lt;/a&gt;, which allows functionality equivalent to php&apos;s &lt;code&gt;composer&lt;/code&gt; with Packagist and Ruby&apos;s &lt;code&gt;gem&lt;/code&gt; with rubygems.org. In other words, the Maven Central Repository is to Maven (and Gradle) what Packagist is to composer -- a definitive and secure source for versioned packages.&lt;/p&gt;\n&lt;h2&gt;Third Discovery: Gradle Handles Dependencies in Android Projects&lt;/h2&gt;\n&lt;p&gt;High on my to-do list is to read the Gradle docs &lt;a href=&quot;https://gradle.org/getting-started-gradle/&quot; rel=&quot;noreferrer&quot;&gt;here&lt;/a&gt;, including their free eBooks. Had I read these weeks ago when I started learning Android, I would surely have known that Gradle can use the Maven Central Repository to manage dependencies in Android Projects. Furthermore, as detailed in &lt;a href=&quot;https://stackoverflow.com/a/26630422/2065427&quot;&gt;this&lt;/a&gt; StackOverflow answer, as of Android Studio 0.8.9, Gradle uses Maven Central Repository implicitly through Bintray&apos;s JCenter, which means you don&apos;t have to do any extra config to set up the repo -- you just list the dependencies.&lt;/p&gt;\n&lt;h2&gt;Fourth Discovery: Project Dependencies Are Listed in [project dir]/app/build.gradle&lt;/h2&gt;\n&lt;p&gt;Again, obvious to those who have any experience using Gradle in Java, but it took me a while to figure this out. If you see people saying &quot;Oh, just add &lt;code&gt;compile &apos;this-or-that.jar&apos;&lt;/code&gt;&quot; or something similar, know that &lt;code&gt;compile&lt;/code&gt; is a directive in that build.gradle file that indicates compile-time dependencies. &lt;a href=&quot;https://docs.gradle.org/current/userguide/artifact_dependencies_tutorial.html&quot; rel=&quot;noreferrer&quot;&gt;Here&apos;s&lt;/a&gt; the official Gradle page on dependency management.&lt;/p&gt;\n&lt;h2&gt;Fifth Discovery: ThreeTenABP Is Managed by Jake Wharton, not by ThreeTen&lt;/h2&gt;\n&lt;p&gt;Yet another issue I spent too much time figuring out. If you look for ThreeTen in Maven Central, you&apos;ll only see packages for &lt;code&gt;threetenbp&lt;/code&gt;, not &lt;code&gt;threetenabp&lt;/code&gt;. If you go to the &lt;a href=&quot;https://github.com/JakeWharton/ThreeTenABP&quot; rel=&quot;noreferrer&quot;&gt;github repo for ThreeTenABP&lt;/a&gt;, you&apos;ll see that infamous &lt;code&gt;compile &apos;this-or-that&apos;&lt;/code&gt; line under the Download section of the Readme.&lt;/p&gt;\n&lt;p&gt;When I first hit this github repo, I didn&apos;t know what that compile line meant, and I tried to run it in my terminal (with an obvious and predictable failure). Frustrated, I didn&apos;t return to it until long after I figured the rest out, and finally realized that it&apos;s a Maven Repo line pointing to the &lt;code&gt;com.jakewharton.threetenabp&lt;/code&gt; repo, as opposed to the &lt;code&gt;org.threeten&lt;/code&gt; repo. That&apos;s why I thought the ThreeTenABP package wasn&apos;t in the Maven repo.&lt;/p&gt;\n&lt;h2&gt;Summary: Making it work&lt;/h2&gt;\n&lt;p&gt;Now it all seems pretty easy. You can get modern time handling functions in an Android project by making sure your &lt;code&gt;[project folder]/app/build.gradle&lt;/code&gt; file has the &lt;code&gt;implementation &apos;com.jakewharton.threetenabp:threetenabp:1.2.1&apos;&lt;/code&gt; line in its &lt;code&gt;dependencies&lt;/code&gt; section:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;apply plugin: &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.android.application&apos;&lt;/span&gt;\n\nandroid {\n    compileSdkVersion &lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;\n    buildToolsVersion &lt;span class=&quot;hljs-string&quot;&gt;&quot;23.0.3&quot;&lt;/span&gt;\n\n    defaultConfig {\n        applicationId &lt;span class=&quot;hljs-string&quot;&gt;&quot;me.ahuman.myapp&quot;&lt;/span&gt;\n        minSdkVersion &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;\n        targetSdkVersion &lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;\n        versionCode &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n        versionName &lt;span class=&quot;hljs-string&quot;&gt;&quot;1.0&quot;&lt;/span&gt;\n    }\n    buildTypes {\n        release {\n            minifyEnabled &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;\n            proguardFiles &lt;span class=&quot;hljs-title function_&quot;&gt;getDefaultProguardFile&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;proguard-android.txt&apos;&lt;/span&gt;)&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;proguard-rules.pro&apos;&lt;/span&gt;\n        }\n    }\n}\n\n\ndependencies {\n    implementation &lt;span class=&quot;hljs-title function_&quot;&gt;fileTree&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(dir: &lt;span class=&quot;hljs-string&quot;&gt;&apos;libs&apos;&lt;/span&gt;, include: [&lt;span class=&quot;hljs-string&quot;&gt;&apos;*.jar&apos;&lt;/span&gt;])&lt;/span&gt;\n    testImplementation &lt;span class=&quot;hljs-string&quot;&gt;&apos;junit:junit:4.12&apos;&lt;/span&gt;\n    implementation &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.android.support:appcompat-v7:23.4.0&apos;&lt;/span&gt;\n    implementation &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.android.support:design:23.4.0&apos;&lt;/span&gt;\n    implementation &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.jakewharton.threetenabp:threetenabp:1.2.1&apos;&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Also add this to Application class:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scala&quot;&gt;public &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Application&lt;/span&gt; &lt;/span&gt;{    \n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    public void onCreate() {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;super&lt;/span&gt;.onCreate();\n        &lt;span class=&quot;hljs-type&quot;&gt;AndroidThreeTen&lt;/span&gt;.init(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;);\n        &lt;span class=&quot;hljs-comment&quot;&gt;//...&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The accepted &lt;a href=&quot;https://stackoverflow.com/a/38922755/642706&quot;&gt;Answer by kael&lt;/a&gt; is correct. In addition, I will mention a couple things, and provide a diagram about obtaining &lt;em&gt;java.time&lt;/em&gt; functionality.&lt;/p&gt;\n&lt;h1&gt;&lt;em&gt;java.time&lt;/em&gt; built into Android 26+&lt;/h1&gt;\n&lt;p&gt;If targeting &lt;a href=&quot;https://en.wikipedia.org/wiki/Android_version_history#Android_8.0_Oreo_(API_26)&quot; rel=&quot;nofollow noreferrer&quot;&gt;Android 26&lt;/a&gt; or later, you will find an implementation of &lt;a href=&quot;https://jcp.org/en/jsr/detail?id=310&quot; rel=&quot;nofollow noreferrer&quot;&gt;JSR 310&lt;/a&gt; (&lt;em&gt;java.time&lt;/em&gt; classes) bundled with Android. No need to add &lt;em&gt;ThreeTenABP&lt;/em&gt;.&lt;/p&gt;\n&lt;h1&gt;APIs nearly identical&lt;/h1&gt;\n&lt;p&gt;Just to clarify, &lt;a href=&quot;https://github.com/JakeWharton/ThreeTenABP&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;em&gt;ThreeTenABP&lt;/em&gt;&lt;/a&gt; for Android is an adaptation of the &lt;a href=&quot;https://www.threeten.org/threetenbp/&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;em&gt;ThreeTen-Backport&lt;/em&gt;&lt;/a&gt; library that brings most of the &lt;em&gt;java.time&lt;/em&gt; functionality to &lt;a href=&quot;https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6&quot; rel=&quot;nofollow noreferrer&quot;&gt;Java 6&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7&quot; rel=&quot;nofollow noreferrer&quot;&gt;Java 7&lt;/a&gt;. This back-port shares nearly an identical API with &lt;em&gt;java.time&lt;/em&gt;.&lt;/p&gt;\n&lt;p&gt;Suppose you are now targeting Android earlier than 26, so you use &lt;em&gt;ThreeTenABP&lt;/em&gt;. Later, your may eventually drop support for these earlier versions of Android, to use the &lt;em&gt;java.time&lt;/em&gt; classes bundled with Android. When that happens, you need make few changes to your codebase other than (a) switching &lt;code&gt;import&lt;/code&gt; statements, and (b) changing any calls you made to &lt;a href=&quot;https://www.threeten.org/threetenbp/apidocs/org/threeten/bp/DateTimeUtils.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;org.threeten.bp.DateTimeUtils&lt;/code&gt;&lt;/a&gt; to use the new conversion methods that were added to the old legacy date-time classes (&lt;code&gt;Date&lt;/code&gt;, &lt;code&gt;GregorianCalendar&lt;/code&gt;).&lt;/p&gt;\n&lt;p&gt;The transition process from &lt;em&gt;ThreeTenABP&lt;/em&gt; to &lt;em&gt;java.time&lt;/em&gt; should be smooth and nearly painless.&lt;/p&gt;\n&lt;h1&gt;When to use which framework&lt;/h1&gt;\n&lt;p&gt;Here is a chart showing the three frameworks, and indicating when to use which one in which scenarios.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt; Update:&lt;/strong&gt; Android Gradle Plugin 4.0.0+ brings a new 4th option, &lt;a href=&quot;https://developer.android.com/studio/write/java8-support#library-desugaring&quot; rel=&quot;nofollow noreferrer&quot;&gt;API desugaring&lt;/a&gt; to make available a &lt;a href=&quot;https://developer.android.com/studio/write/java8-support-table&quot; rel=&quot;nofollow noreferrer&quot;&gt;subset of &lt;em&gt;java.time&lt;/em&gt; functionality&lt;/a&gt; not originally built into earlier Android. See the top of the &lt;a href=&quot;https://stackoverflow.com/a/38922755/642706&quot;&gt;main Answer&lt;/a&gt; by kael.&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/Sksw9.png&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/Sksw9.png&quot; alt=&quot;Table of which java.time library to use with which version of Java or Android&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;hr&gt;\n&lt;h1&gt;About &lt;em&gt;java.time&lt;/em&gt;&lt;/h1&gt;\n&lt;p&gt;The &lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;em&gt;java.time&lt;/em&gt;&lt;/a&gt; framework is built into Java 8 and later. These classes supplant the troublesome old &lt;a href=&quot;https://en.wikipedia.org/wiki/Legacy_system&quot; rel=&quot;nofollow noreferrer&quot;&gt;legacy&lt;/a&gt; date-time classes such as &lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;java.util.Date&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;Calendar&lt;/code&gt;&lt;/a&gt;, &amp;amp; &lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;SimpleDateFormat&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;To learn more, see the &lt;a href=&quot;http://docs.oracle.com/javase/tutorial/datetime/TOC.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;em&gt;Oracle Tutorial&lt;/em&gt;&lt;/a&gt;. And search Stack Overflow for many examples and explanations. Specification is &lt;a href=&quot;https://jcp.org/en/jsr/detail?id=310&quot; rel=&quot;nofollow noreferrer&quot;&gt;JSR 310&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;The &lt;a href=&quot;http://www.joda.org/joda-time/&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;em&gt;Joda-Time&lt;/em&gt;&lt;/a&gt; project, now in &lt;a href=&quot;https://en.wikipedia.org/wiki/Maintenance_mode&quot; rel=&quot;nofollow noreferrer&quot;&gt;maintenance mode&lt;/a&gt;, advises migration to the &lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;java.time&lt;/a&gt; classes.&lt;/p&gt;\n&lt;p&gt;You may exchange &lt;em&gt;java.time&lt;/em&gt; objects directly with your database. Use a &lt;a href=&quot;https://en.wikipedia.org/wiki/JDBC_driver&quot; rel=&quot;nofollow noreferrer&quot;&gt;JDBC driver&lt;/a&gt; compliant with &lt;a href=&quot;http://openjdk.java.net/jeps/170&quot; rel=&quot;nofollow noreferrer&quot;&gt;JDBC 4.2&lt;/a&gt; or later. No need for strings, no need for &lt;code&gt;java.sql.*&lt;/code&gt; classes. Hibernate 5 &amp;amp; JPA 2.2 support &lt;em&gt;java.time&lt;/em&gt;.&lt;/p&gt;\n&lt;p&gt;Where to obtain the java.time classes?&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;strong&gt;Java SE 8&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;strong&gt;Java SE 9&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;strong&gt;Java SE 10&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;strong&gt;Java SE 11&lt;/strong&gt;&lt;/a&gt;, and later  - Part of the standard Java API with a bundled implementation.\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;strong&gt;Java 9&lt;/strong&gt;&lt;/a&gt; brought some minor features and fixes.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;strong&gt;Java SE 6&lt;/strong&gt;&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;strong&gt;Java SE 7&lt;/strong&gt;&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;Most of the &lt;em&gt;java.time&lt;/em&gt; functionality is back-ported to Java 6 &amp;amp; 7 in &lt;a href=&quot;http://www.threeten.org/threetenbp/&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;em&gt;&lt;strong&gt;ThreeTen-Backport&lt;/strong&gt;&lt;/em&gt;&lt;/a&gt;.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Android_(operating_system)&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;strong&gt;Android&lt;/strong&gt;&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;Later versions of Android (26+) bundle implementations of the &lt;em&gt;java.time&lt;/em&gt; classes.&lt;/li&gt;\n&lt;li&gt;For earlier Android (&amp;lt;26), the process of &lt;a href=&quot;https://developer.android.com/studio/write/java8-support#library-desugaring&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;em&gt;API desugaring&lt;/em&gt;&lt;/a&gt; brings a &lt;a href=&quot;https://developer.android.com/studio/write/java8-support-table&quot; rel=&quot;nofollow noreferrer&quot;&gt;subset of the &lt;em&gt;java.time&lt;/em&gt;&lt;/a&gt; functionality not originally built into Android.\n&lt;ul&gt;\n&lt;li&gt;If the desugaring does not offer what you need, the &lt;a href=&quot;https://github.com/JakeWharton/ThreeTenABP&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;em&gt;&lt;strong&gt;ThreeTenABP&lt;/strong&gt;&lt;/em&gt;&lt;/a&gt; project adapts &lt;a href=&quot;http://www.threeten.org/threetenbp/&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;em&gt;&lt;strong&gt;ThreeTen-Backport&lt;/strong&gt;&lt;/em&gt;&lt;/a&gt; (mentioned above) to Android. See &lt;a href=&quot;http://stackoverflow.com/q/38922754/642706&quot;&gt;&lt;em&gt;How to use ThreeTenABP&lt;/em&gt;&lt;/a&gt;.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;Add the following in your build gradle (Module level) file in Android Studio:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-delphi&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;implementation&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.jakewharton.threetenabp:threetenabp:1.2.1&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Create the Application class and initialize it like so:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;App&lt;/span&gt; : &lt;span class=&quot;hljs-type&quot;&gt;Application&lt;/span&gt;&lt;/span&gt;() {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;super&lt;/span&gt;.onCreate()\n        AndroidThreeTen.&lt;span class=&quot;hljs-keyword&quot;&gt;init&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;)\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    "],"33":["\n&lt;h2&gt;Native XML Extensions&lt;/h2&gt;\n&lt;p&gt;I prefer using one of the &lt;a href=&quot;https://php.net/manual/en/refs.xml.php&quot; rel=&quot;nofollow noreferrer&quot;&gt;native XML extensions&lt;/a&gt; since they come bundled with PHP, are usually faster than all the 3rd party libs and give me all the control I need over the markup.&lt;/p&gt;\n&lt;h3&gt;&lt;a href=&quot;https://php.net/manual/en/book.dom.php&quot; rel=&quot;nofollow noreferrer&quot;&gt;DOM&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;The DOM extension allows you to operate on XML documents through the DOM API with PHP 5. It is an implementation of the W3C&apos;s Document Object Model Core Level 3, a platform- and language-neutral interface that allows programs and scripts to dynamically access and update the content, structure and style of documents.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;DOM is capable of parsing and modifying real world (broken) HTML and it can do &lt;a href=&quot;http://schlitt.info/opensource/blog/0704_xpath.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;XPath queries&lt;/a&gt;. It is based on &lt;a href=&quot;http://xmlsoft.org/html/libxml-HTMLparser.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;libxml&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;It takes some time to get productive with DOM, but that time is well worth it IMO. Since DOM is a language-agnostic interface, you&apos;ll find implementations in many languages, so if you need to change your programming language, chances are you will already know how to use that language&apos;s DOM API then.&lt;/p&gt;\n&lt;p&gt;How to use the DOM extension has been &lt;a href=&quot;https://stackoverflow.com/search?q=DOM+HTML+%5BPHP%5D&amp;amp;submit=search&quot;&gt;covered extensively&lt;/a&gt; on StackOverflow, so if you choose to use it, you can be sure most of the issues you run into can be solved by searching/browsing Stack Overflow.&lt;/p&gt;\n&lt;p&gt;A &lt;a href=&quot;https://stackoverflow.com/a/3820783&quot;&gt;basic usage example&lt;/a&gt; and a &lt;a href=&quot;https://stackoverflow.com/a/4983721&quot;&gt;general conceptual overview&lt;/a&gt; are available in other answers.&lt;/p&gt;\n&lt;h3&gt;&lt;a href=&quot;https://php.net/manual/en/book.xmlreader.php&quot; rel=&quot;nofollow noreferrer&quot;&gt;XMLReader&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;The XMLReader extension is an XML pull parser. The reader acts as a cursor going forward on the document stream and stopping at each node on the way.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;XMLReader, like DOM, is based on libxml. I am not aware of how to trigger the HTML Parser Module, so chances are using XMLReader for parsing broken HTML might be less robust than using DOM where you can explicitly tell it to use libxml&apos;s HTML Parser Module.&lt;/p&gt;\n&lt;p&gt;A &lt;a href=&quot;https://stackoverflow.com/a/3299140&quot;&gt;basic usage example&lt;/a&gt; is available in another answer.&lt;/p&gt;\n&lt;h3&gt;&lt;a href=&quot;https://php.net/manual/en/book.xml.php&quot; rel=&quot;nofollow noreferrer&quot;&gt;XML Parser&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;This extension lets you create XML parsers and then define handlers for different XML events. Each XML parser also has a few parameters you can adjust.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;The XML Parser library is also based on libxml, and implements a &lt;a href=&quot;http://en.wikipedia.org/wiki/Simple_API_for_XML&quot; rel=&quot;nofollow noreferrer&quot;&gt;SAX&lt;/a&gt; style XML push parser. It may be a better choice for memory management than DOM or SimpleXML, but will be more difficult to work with than the pull parser implemented by XMLReader.&lt;/p&gt;\n&lt;h3&gt;&lt;a href=&quot;https://php.net/manual/en/book.simplexml.php&quot; rel=&quot;nofollow noreferrer&quot;&gt;SimpleXml&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;The SimpleXML extension provides a very simple and easily usable toolset to convert XML to an object that can be processed with normal property selectors and array iterators.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;SimpleXML is an option when you know the HTML is valid XHTML. If you need to parse broken HTML, don&apos;t even consider SimpleXml because it will choke.&lt;/p&gt;\n&lt;p&gt;A &lt;a href=&quot;https://stackoverflow.com/a/4906459&quot;&gt;basic usage example&lt;/a&gt; is available, and there are &lt;a href=&quot;https://php.net/manual/en/simplexml.examples-basic.php&quot; rel=&quot;nofollow noreferrer&quot;&gt;lots of additional examples in the PHP Manual&lt;/a&gt;.&lt;/p&gt;\n&lt;hr&gt;\n&lt;h2&gt;3rd Party Libraries (libxml based)&lt;/h2&gt;\n&lt;p&gt;If you prefer to use a 3rd-party lib, I&apos;d suggest using a lib that actually uses &lt;a href=&quot;http://php.net/manual/en/book.dom.php&quot; rel=&quot;nofollow noreferrer&quot;&gt;DOM&lt;/a&gt;/&lt;a href=&quot;http://xmlsoft.org/&quot; rel=&quot;nofollow noreferrer&quot;&gt;libxml&lt;/a&gt; underneath instead of string parsing.&lt;/p&gt;\n&lt;h3&gt;&lt;a href=&quot;https://github.com/ThomasWeinert/FluentDOM&quot; rel=&quot;nofollow noreferrer&quot;&gt;FluentDom&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;FluentDOM provides a jQuery-like fluent XML interface for the DOMDocument in PHP. Selectors are written in XPath or CSS (using a CSS to XPath converter). Current versions extend the DOM implementing standard interfaces and add features from the DOM Living Standard. FluentDOM can load formats like JSON, CSV, JsonML, RabbitFish and others. Can be installed via Composer.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3&gt;&lt;a href=&quot;https://github.com/wasinger/htmlpagedom&quot; rel=&quot;nofollow noreferrer&quot;&gt;HtmlPageDom&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;code&gt;Wa72\\HtmlPageDom&lt;/code&gt; is a PHP library for easy manipulation of HTML\ndocuments using DOM. It requires &lt;a href=&quot;https://github.com/symfony/DomCrawler&quot; rel=&quot;nofollow noreferrer&quot;&gt;DomCrawler from Symfony2\ncomponents&lt;/a&gt; for traversing\nthe DOM tree and extends it by adding methods for manipulating the\nDOM tree of HTML documents.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3&gt;&lt;a href=&quot;https://github.com/electrolinux/phpquery&quot; rel=&quot;nofollow noreferrer&quot;&gt;phpQuery&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;phpQuery is a server-side, chainable, CSS3 selector driven Document Object Model (DOM) API based on jQuery JavaScript Library.\nThe library is written in PHP5 and provides additional Command Line Interface (CLI).&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;This is described as &quot;abandonware and buggy: use at your own risk&quot; but does appear to be minimally maintained.&lt;/p&gt;\n&lt;h3&gt;&lt;a href=&quot;https://docs.laminas.dev/laminas-dom/&quot; rel=&quot;nofollow noreferrer&quot;&gt;laminas-dom&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;The Laminas\\Dom component (formerly Zend_DOM) provides tools for working with DOM documents and structures. Currently, we offer &lt;code&gt;Laminas\\Dom\\Query&lt;/code&gt;, which provides a unified interface for querying DOM documents utilizing both XPath and CSS selectors.&lt;/p&gt;\n&lt;p&gt;This package is considered feature-complete, and is now in security-only maintenance mode.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3&gt;&lt;a href=&quot;http://github.com/theseer/fDOMDocument&quot; rel=&quot;nofollow noreferrer&quot;&gt;fDOMDocument&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;fDOMDocument extends the standard DOM to use exceptions at all occasions of errors instead of PHP warnings or notices. They also add various custom methods and shortcuts for convenience and to simplify the usage of DOM.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3&gt;&lt;a href=&quot;http://sabre.io/xml/&quot; rel=&quot;nofollow noreferrer&quot;&gt;sabre/xml&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;sabre/xml is a library that wraps and extends the XMLReader and XMLWriter classes to create a simple &quot;xml to object/array&quot; mapping system and design pattern. Writing and reading XML is single-pass and can therefore be fast and require low memory on large xml files.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3&gt;&lt;a href=&quot;https://github.com/servo-php/fluidxml&quot; rel=&quot;nofollow noreferrer&quot;&gt;FluidXML&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;FluidXML is a PHP library for manipulating XML with a concise and fluent API.\nIt leverages XPath and the fluent programming pattern to be fun and effective.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;hr&gt;\n&lt;h2&gt;3rd-Party (not libxml-based)&lt;/h2&gt;\n&lt;p&gt;The benefit of building upon DOM/libxml is that you get good performance out of the box because you are based on a native extension. However, not all 3rd-party libs go down this route. Some of them listed below&lt;/p&gt;\n&lt;h3&gt;&lt;a href=&quot;https://simplehtmldom.sourceforge.io/docs/1.9/index.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;PHP Simple HTML DOM Parser&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;ul&gt;\n&lt;li&gt;An HTML DOM parser written in PHP5+ lets you manipulate HTML in a very easy way!&lt;/li&gt;\n&lt;li&gt;Require PHP 5+.&lt;/li&gt;\n&lt;li&gt;Supports invalid HTML.&lt;/li&gt;\n&lt;li&gt;Find tags on an HTML page with selectors just like jQuery.&lt;/li&gt;\n&lt;li&gt;Extract contents from HTML in a single line.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;I generally do not recommend this parser. The codebase is horrible and the parser itself is rather slow and memory hungry. Not all jQuery Selectors (such as &lt;a href=&quot;https://api.jquery.com/child-selector/&quot; rel=&quot;nofollow noreferrer&quot;&gt;child selectors&lt;/a&gt;) are possible. Any of the libxml based libraries should outperform this easily.&lt;/p&gt;\n&lt;h3&gt;&lt;a href=&quot;https://github.com/paquettg/php-html-parser&quot; rel=&quot;nofollow noreferrer&quot;&gt;PHP Html Parser&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;PHPHtmlParser is a simple, flexible, html parser which allows you to select tags using any css selector, like jQuery. The goal is to assiste in the development of tools which require a quick, easy way to scrape html, whether it&apos;s valid or not! This project was original supported by sunra/php-simple-html-dom-parser but the support seems to have stopped so this project is my adaptation of his previous work.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;Again, I would not recommend this parser. It is rather slow with high CPU usage. There is also no function to clear memory of created DOM objects. These problems scale particularly with nested loops. The documentation itself is inaccurate and misspelled, with no responses to fixes since 14 Apr 16.&lt;/p&gt;\n&lt;hr&gt;\n&lt;h2&gt;HTML 5&lt;/h2&gt;\n&lt;p&gt;You can use the above for parsing HTML5, but &lt;a href=&quot;https://stackoverflow.com/q/4029341&quot;&gt;there can be quirks&lt;/a&gt; due to the markup HTML5 allows. So for HTML5 you may want to consider using a dedicated parser. Note that these are written in PHP, so suffer from slower performance and increased memory usage compared to a compiled extension in a lower-level language.&lt;/p&gt;\n&lt;h3&gt;&lt;a href=&quot;https://github.com/ivopetkov/html5-dom-document-php/&quot; rel=&quot;nofollow noreferrer&quot;&gt;HTML5DomDocument&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;HTML5DOMDocument extends the native DOMDocument library. It fixes some bugs and adds some new functionality.&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Preserves html entities (DOMDocument does not)&lt;/li&gt;\n&lt;li&gt;Preserves void tags (DOMDocument does not)&lt;/li&gt;\n&lt;li&gt;Allows inserting HTML code that moves the correct parts to their proper places (head elements are inserted in the head, body elements in the body)&lt;/li&gt;\n&lt;li&gt;Allows querying the DOM with CSS selectors (currently available: &lt;code&gt;*&lt;/code&gt;, &lt;code&gt;tagname&lt;/code&gt;, &lt;code&gt;tagname#id&lt;/code&gt;, &lt;code&gt;#id&lt;/code&gt;, &lt;code&gt;tagname.classname&lt;/code&gt;, &lt;code&gt;.classname&lt;/code&gt;, &lt;code&gt;tagname.classname.classname2&lt;/code&gt;, &lt;code&gt;.classname.classname2&lt;/code&gt;, &lt;code&gt;tagname[attribute-selector]&lt;/code&gt;, &lt;code&gt;[attribute-selector]&lt;/code&gt;, &lt;code&gt;div, p&lt;/code&gt;, &lt;code&gt;div p&lt;/code&gt;, &lt;code&gt;div &amp;gt; p&lt;/code&gt;, &lt;code&gt;div + p&lt;/code&gt;, and &lt;code&gt;p ~ ul&lt;/code&gt;.)&lt;/li&gt;\n&lt;li&gt;Adds support for element-&amp;gt;classList.&lt;/li&gt;\n&lt;li&gt;Adds support for element-&amp;gt;innerHTML.&lt;/li&gt;\n&lt;li&gt;Adds support for element-&amp;gt;outerHTML.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/blockquote&gt;\n&lt;h3&gt;&lt;a href=&quot;https://github.com/Masterminds/html5-php&quot; rel=&quot;nofollow noreferrer&quot;&gt;HTML5&lt;/a&gt;&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;HTML5 is a standards-compliant HTML5 parser and writer written entirely in PHP. It is stable and used in many production websites, and has well over five million downloads.&lt;/p&gt;\n&lt;p&gt;HTML5 provides the following features.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;blockquote&gt;\n&lt;ul&gt;\n&lt;li&gt;An HTML5 serializer&lt;/li&gt;\n&lt;li&gt;Support for PHP namespaces&lt;/li&gt;\n&lt;li&gt;Composer support&lt;/li&gt;\n&lt;li&gt;Event-based (SAX-like) parser&lt;/li&gt;\n&lt;li&gt;A DOM tree builder&lt;/li&gt;\n&lt;li&gt;Interoperability with QueryPath&lt;/li&gt;\n&lt;li&gt;Runs on PHP 5.3.0 or newer&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/blockquote&gt;\n&lt;hr&gt;\n&lt;h2&gt;Regular Expressions&lt;/h2&gt;\n&lt;p&gt;Last and &lt;strong&gt;least recommended&lt;/strong&gt;, you can extract data from HTML with &lt;a href=&quot;https://stackoverflow.com/search?q=regular%20expression%20tutorials&quot;&gt;regular expressions&lt;/a&gt;. In general using Regular Expressions on HTML is discouraged.&lt;/p&gt;\n&lt;p&gt;Most of the snippets you will find on the web to match markup are brittle. In most cases they are only working for a very particular piece of HTML. Tiny markup changes, like adding whitespace somewhere, or adding, or changing attributes in a tag, can make the RegEx fails when it&apos;s not properly written. You should know what you are doing before using RegEx on HTML.&lt;/p&gt;\n&lt;p&gt;HTML parsers already know the syntactical rules of HTML. Regular expressions have to be taught for each new RegEx you write. RegEx are fine in some cases, but it really depends on your use-case.&lt;/p&gt;\n&lt;p&gt;You &lt;a href=&quot;https://stackoverflow.com/a/4234491&quot;&gt;can write more reliable parsers&lt;/a&gt;, but writing a &lt;em&gt;complete and reliable&lt;/em&gt; custom parser with regular expressions is a waste of time when the aforementioned libraries already exist and do a much better job on this.&lt;/p&gt;\n&lt;p&gt;Also see &lt;a href=&quot;http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;Parsing Html The Cthulhu Way&lt;/a&gt;&lt;/p&gt;\n&lt;hr&gt;\n&lt;h2&gt;Books&lt;/h2&gt;\n&lt;p&gt;If you want to spend some money, have a look at&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;http://www.phparch.com/books/phparchitects-guide-to-web-scraping-with-php&quot; rel=&quot;nofollow noreferrer&quot;&gt;PHP Architect&apos;s Guide to Webscraping with PHP&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;I am not affiliated with PHP Architect or the authors.&lt;/p&gt;\n    ","\n&lt;p&gt;Try &lt;a href=&quot;https://simplehtmldom.sourceforge.io/&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;Simple HTML DOM Parser&lt;/strong&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;A HTML DOM parser written in PHP&amp;nbsp;5+ that lets you manipulate HTML in a very easy way!&lt;/li&gt;\n&lt;li&gt;Require PHP 5+.&lt;/li&gt;\n&lt;li&gt;Supports invalid HTML.&lt;/li&gt;\n&lt;li&gt;Find tags on an HTML page with selectors just like jQuery.&lt;/li&gt;\n&lt;li&gt;Extract contents from HTML in a single line.&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://sourceforge.net/projects/simplehtmldom/files/simplehtmldom/&quot; rel=&quot;noreferrer&quot;&gt;Download&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Note: as the name suggests, it can be useful for simple tasks. It uses regular expressions instead of an HTML parser, so will be considerably slower for more complex tasks. The bulk of its codebase was written in 2008, with only small improvements made since then. It does not follow modern PHP coding standards and would be challenging to incorporate into a modern PSR-compliant project.&lt;/p&gt;\n&lt;h2&gt;&lt;a href=&quot;https://simplehtmldom.sourceforge.io/manual.htm&quot; rel=&quot;noreferrer&quot;&gt;Examples:&lt;/a&gt;&lt;/h2&gt;\n&lt;h3&gt;How to get HTML elements:&lt;/h3&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Create DOM from URL or file&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;file_get_html&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;http://www.example.com/&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Find all images&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;img&apos;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$element&lt;/span&gt;)\n       &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$element&lt;/span&gt;-&amp;gt;src . &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;br&amp;gt;&apos;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Find all links&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$element&lt;/span&gt;)\n       &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$element&lt;/span&gt;-&amp;gt;href . &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;br&amp;gt;&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;How to modify HTML elements:&lt;/h3&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;// Create DOM from string\n&lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt; = str_get_html(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;div id=&quot;hello&quot;&amp;gt;Hello&amp;lt;/div&amp;gt;&amp;lt;div id=&quot;world&quot;&amp;gt;World&amp;lt;/div&amp;gt;&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;hljs-string&quot;&gt;&apos;div&apos;&lt;/span&gt;, 1)-&amp;gt;class = &lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;hljs-string&quot;&gt;&apos;div[id=hello]&apos;&lt;/span&gt;, 0)-&amp;gt;innertext = &lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;Extract content from HTML:&lt;/h3&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-lisp&quot;&gt;// Dump contents (&lt;span class=&quot;hljs-name&quot;&gt;without&lt;/span&gt; tags) from HTML\necho file_get_html(&apos;http&lt;span class=&quot;hljs-symbol&quot;&gt;://www&lt;/span&gt;.google.com/&apos;)-&amp;gt;plaintext&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;Scraping Slashdot:&lt;/h3&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Create DOM from URL&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;file_get_html&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;http://slashdot.org/&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Find all article blocks&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;div.article&apos;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$article&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable&quot;&gt;$item&lt;/span&gt;[&lt;span class=&quot;hljs-string&quot;&gt;&apos;title&apos;&lt;/span&gt;]     = &lt;span class=&quot;hljs-variable&quot;&gt;$article&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;div.title&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)-&amp;gt;plaintext;\n    &lt;span class=&quot;hljs-variable&quot;&gt;$item&lt;/span&gt;[&lt;span class=&quot;hljs-string&quot;&gt;&apos;intro&apos;&lt;/span&gt;]    = &lt;span class=&quot;hljs-variable&quot;&gt;$article&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;div.intro&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)-&amp;gt;plaintext;\n    &lt;span class=&quot;hljs-variable&quot;&gt;$item&lt;/span&gt;[&lt;span class=&quot;hljs-string&quot;&gt;&apos;details&apos;&lt;/span&gt;] = &lt;span class=&quot;hljs-variable&quot;&gt;$article&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;div.details&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)-&amp;gt;plaintext;\n    &lt;span class=&quot;hljs-variable&quot;&gt;$articles&lt;/span&gt;[] = &lt;span class=&quot;hljs-variable&quot;&gt;$item&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;print_r&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$articles&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Just use &lt;a href=&quot;http://docs.php.net/manual/en/domdocument.loadhtml.php&quot; rel=&quot;noreferrer&quot;&gt;DOMDocument-&amp;gt;loadHTML()&lt;/a&gt; and be done with it. libxml&apos;s HTML parsing algorithm is quite good and fast, and contrary to popular belief, does not choke on malformed HTML.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;Why you shouldn&apos;t and &lt;em&gt;when you should&lt;/em&gt; use regular expressions?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;First off, a common misnomer: Regexps are not for &lt;em&gt;&quot;&lt;strong&gt;parsing&lt;/strong&gt;&quot;&lt;/em&gt; HTML. Regexes can however &lt;em&gt;&quot;&lt;strong&gt;extract&lt;/strong&gt;&quot;&lt;/em&gt; data. Extracting is what they&apos;re made for. The major drawback of regex HTML extraction over proper SGML toolkits or baseline XML parsers are their syntactic effort and varying reliability.&lt;/p&gt;\n\n&lt;p&gt;Consider that making a somewhat dependable HTML extraction regex:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&amp;lt;a\\s+class=&lt;span class=&quot;hljs-string&quot;&gt;&quot;?playbutton\\d?[^&amp;gt;]+id=&quot;&lt;/span&gt;(\\d+)&lt;span class=&quot;hljs-string&quot;&gt;&quot;.+?    &amp;lt;a\\s+class=&quot;&lt;/span&gt;[\\w\\s]*title\n[\\w\\s]*&lt;span class=&quot;hljs-string&quot;&gt;&quot;[^&amp;gt;]+href=&quot;&lt;/span&gt;(http://[^&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;gt;]+)&quot;&lt;/span&gt;[^&amp;gt;]*&amp;gt;([^&amp;lt;&amp;gt;]+)&amp;lt;/a&amp;gt;.+?\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;is way less readable than a simple phpQuery or QueryPath equivalent:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-rust&quot;&gt;$div&lt;span class=&quot;hljs-punctuation&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.stationcool a&quot;&lt;/span&gt;)&lt;span class=&quot;hljs-punctuation&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;title&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;There are however specific use cases where they can help.&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Many DOM traversal frontends don&apos;t reveal HTML comments &lt;code&gt;&amp;lt;!--&lt;/code&gt;, which however are sometimes the more useful anchors for extraction. In particular pseudo-HTML variations &lt;code&gt;&amp;lt;$var&amp;gt;&lt;/code&gt; or SGML residues are easy to tame with regexps.&lt;/li&gt;\n&lt;li&gt;Oftentimes regular expressions can save post-processing. However HTML entities often require manual caretaking.&lt;/li&gt;\n&lt;li&gt;And lastly, for e&lt;em&gt;xtremely simple tasks&lt;/em&gt; like extracting &amp;lt;img src= urls, they are in fact a probable tool. The speed advantage over SGML/XML parsers mostly just comes to play for these very basic extraction procedures.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;It&apos;s sometimes even advisable to pre-extract a snippet of HTML using regular expressions &lt;code&gt;/&amp;lt;!--CONTENT--&amp;gt;(.+?)&amp;lt;!--END--&amp;gt;/&lt;/code&gt; and process the remainder using the simpler HTML parser frontends.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; I actually have this &lt;a href=&quot;http://fossil.include-once.org/streamtuner2/&quot; rel=&quot;noreferrer&quot;&gt;app&lt;/a&gt;, where I employ XML parsing and regular expressions alternatively. Just last week the PyQuery parsing broke, and the regex still worked. Yes weird, and I can&apos;t explain it myself. But so it happened.&lt;br&gt;\nSo please don&apos;t vote real-world considerations down, just because it doesn&apos;t match the regex=evil meme. &lt;strong&gt;But let&apos;s also not vote this up too much. It&apos;s just a sidenote for this topic.&lt;/strong&gt;&lt;/p&gt;\n    ","\n&lt;h2&gt;Note, this answer recommends libraries that have now been abandoned for 10+ years.&lt;/h2&gt;\n&lt;p&gt;&lt;a href=&quot;https://github.com/TobiaszCudnik/phpquery&quot; rel=&quot;nofollow noreferrer&quot;&gt;phpQuery&lt;/a&gt; and &lt;a href=&quot;https://github.com/technosophos/querypath&quot; rel=&quot;nofollow noreferrer&quot;&gt;QueryPath&lt;/a&gt; are extremely similar in replicating the fluent jQuery API. That&apos;s also why they&apos;re two of the easiest approaches to &lt;em&gt;properly&lt;/em&gt; parse HTML in PHP.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Examples for QueryPath&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Basically you first create a queryable DOM tree from an HTML string:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt; $qp = qp(&quot;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;title&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;...&quot;); // or give filename or URL\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The resulting object contains a complete tree representation of the HTML document. It can be traversed using DOM methods. But the common approach is to use CSS selectors like in jQuery:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$qp&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;div.classname&quot;&lt;/span&gt;)-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;children&lt;/span&gt;()-&amp;gt;...;\n\n &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$qp&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;p img&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$img&lt;/span&gt;) {\n     &lt;span class=&quot;hljs-keyword&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;qp&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$img&lt;/span&gt;)-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;src&quot;&lt;/span&gt;);\n }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Mostly you want to use simple &lt;code&gt;#id&lt;/code&gt; and &lt;code&gt;.class&lt;/code&gt; or &lt;code&gt;DIV&lt;/code&gt; tag selectors for &lt;code&gt;-&amp;gt;find()&lt;/code&gt;. But you can also use &lt;a href=&quot;https://en.wikipedia.org/wiki/XPath&quot; rel=&quot;nofollow noreferrer&quot;&gt;XPath&lt;/a&gt; statements, which sometimes are faster. Also typical jQuery methods like &lt;code&gt;-&amp;gt;children()&lt;/code&gt; and &lt;code&gt;-&amp;gt;text()&lt;/code&gt; and particularly &lt;code&gt;-&amp;gt;attr()&lt;/code&gt; simplify extracting the right HTML snippets. (And already have their SGML entities decoded.)&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$qp&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;xpath&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;//div/p[1]&quot;&lt;/span&gt;);  &lt;span class=&quot;hljs-comment&quot;&gt;// get first paragraph in a div&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;QueryPath also allows injecting new tags into the stream (&lt;code&gt;-&amp;gt;append&lt;/code&gt;), and later output and prettify an updated document (&lt;code&gt;-&amp;gt;writeHTML&lt;/code&gt;). It can not only parse malformed HTML, but also various XML dialects (with namespaces), and even extract data from HTML microformats (XFN, vCard).&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-rust&quot;&gt; $qp&lt;span class=&quot;hljs-punctuation&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;a[target=_blank]&quot;&lt;/span&gt;)&lt;span class=&quot;hljs-punctuation&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;toggleClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;usability-blunder&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;phpQuery or QueryPath?&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Generally QueryPath is better suited for manipulation of documents. While phpQuery also implements some pseudo AJAX methods (just HTTP requests) to more closely resemble jQuery. It is said that phpQuery is often faster than QueryPath (because of fewer overall features).&lt;/p&gt;\n&lt;p&gt;For further information on the differences see &lt;a href=&quot;https://web.archive.org/web/20101230230134/http://www.tagbytag.org/articles/phpquery-vs-querypath&quot; rel=&quot;nofollow noreferrer&quot;&gt;this comparison on the wayback machine from tagbyte.org&lt;/a&gt;. (Original source went missing, so here&apos;s an internet archive link. Yes, you can still locate missing pages, people.)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Advantages&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Simplicity and Reliability&lt;/li&gt;\n&lt;li&gt;Simple to use alternatives &lt;code&gt;-&amp;gt;find(&quot;a img, a object, div a&quot;)&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Proper data unescaping (in comparison to regular expression grepping)&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;Simple HTML DOM is a great open-source parser:  &lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;http://simplehtmldom.sourceforge.net/&quot; rel=&quot;noreferrer&quot;&gt;simplehtmldom.sourceforge&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;It treats DOM elements in an object-oriented way, and the new iteration has a lot of coverage for non-compliant code. There are also some great functions like you&apos;d see in JavaScript, such as the &quot;find&quot; function, which will return all instances of elements of that tag name.  &lt;/p&gt;\n\n&lt;p&gt;I&apos;ve used this in a number of tools, testing it on many different types of web pages, and I think it works great.&lt;/p&gt;\n    ","\n&lt;p&gt;One general approach I haven&apos;t seen mentioned here is to run HTML through &lt;a href=&quot;http://php.net/manual/en/book.tidy.php&quot; rel=&quot;noreferrer&quot;&gt;Tidy&lt;/a&gt;, which can be set to spit out guaranteed-valid XHTML. Then you can use any old XML library on it.&lt;/p&gt;\n\n&lt;p&gt;But to your specific problem, you should take a look at this project: &lt;a href=&quot;http://fivefilters.org/content-only/&quot; rel=&quot;noreferrer&quot;&gt;http://fivefilters.org/content-only/&lt;/a&gt; -- it&apos;s a modified version of the &lt;a href=&quot;http://lab.arc90.com/2009/03/02/readability/&quot; rel=&quot;noreferrer&quot;&gt;Readability&lt;/a&gt; algorithm, which is designed to extract just the textual content (not headers and footers) from a page. &lt;/p&gt;\n    ","\n&lt;p&gt;For 1a and 2: I would vote for the new Symfony Componet class DOMCrawler ( &lt;a href=&quot;http://github.com/symfony/symfony/tree/master/src/Symfony/Component/DomCrawler/&quot; rel=&quot;noreferrer&quot;&gt;DomCrawler&lt;/a&gt; ).\nThis class allows queries similar to CSS Selectors. Take a look at this presentation for real-world examples: &lt;a href=&quot;http://www.slideshare.net/fabpot/news-of-the-symfony2-world&quot; rel=&quot;noreferrer&quot;&gt;news-of-the-symfony2-world&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;The component is designed to work standalone and can be used without Symfony.&lt;/p&gt;\n\n&lt;p&gt;The only drawback is that it will only work with PHP 5.3 or newer.&lt;/p&gt;\n    ","\n&lt;p&gt;This is commonly referred to as &lt;strong&gt;screen scraping&lt;/strong&gt;, by the way. The library I have used for this is &lt;a href=&quot;http://sourceforge.net/projects/simplehtmldom/&quot; rel=&quot;noreferrer&quot;&gt;Simple HTML Dom Parser&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;We have created quite a few crawlers for our needs before. At the end of the day, it is usually simple regular expressions that do the thing best. While libraries listed above are good for the reason they are created, if you know what you are looking for, regular expressions is a safer way to go, as you can handle also non-valid &lt;a href=&quot;http://en.wikipedia.org/wiki/HTML&quot; rel=&quot;noreferrer&quot;&gt;HTML&lt;/a&gt;/&lt;a href=&quot;http://en.wikipedia.org/wiki/XHTML&quot; rel=&quot;noreferrer&quot;&gt;XHTML&lt;/a&gt; structures, which would fail, if loaded via most of the parsers.&lt;/p&gt;\n    ","\n&lt;p&gt;I recommend &lt;a href=&quot;http://sourceforge.net/projects/simplehtmldom/&quot;&gt;PHP Simple HTML DOM Parser&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;It really has nice features, like:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;img&apos;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$element&lt;/span&gt;)\n       &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$element&lt;/span&gt;-&amp;gt;src . &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;br&amp;gt;&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This sounds like a good task description of W3C &lt;a href=&quot;http://www.w3.org/TR/xpath/&quot;&gt;XPath&lt;/a&gt; technology. It&apos;s easy to express queries like &quot;return all &lt;code&gt;href&lt;/code&gt; attributes in &lt;code&gt;img&lt;/code&gt; tags that are nested in &lt;code&gt;&amp;lt;foo&amp;gt;&amp;lt;bar&amp;gt;&amp;lt;baz&amp;gt; elements&lt;/code&gt;.&quot; Not being a PHP buff, I can&apos;t tell you in what form XPath may be available. If you can call an external program to process the HTML file you should be able to use a command line version of XPath.\nFor a quick intro, see &lt;a href=&quot;http://en.wikipedia.org/wiki/XPath&quot;&gt;http://en.wikipedia.org/wiki/XPath&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;Third party alternatives to SimpleHtmlDom that use DOM instead of String Parsing: &lt;a href=&quot;http://code.google.com/p/phpquery/&quot; rel=&quot;noreferrer&quot;&gt;phpQuery&lt;/a&gt;, &lt;a href=&quot;http://framework.zend.com/manual/en/zend.dom.html&quot; rel=&quot;noreferrer&quot;&gt;Zend_Dom&lt;/a&gt;, &lt;a href=&quot;http://querypath.org/&quot; rel=&quot;noreferrer&quot;&gt;QueryPath&lt;/a&gt; and &lt;a href=&quot;http://www.fluentdom.org/&quot; rel=&quot;noreferrer&quot;&gt;FluentDom&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;Yes you can use simple_html_dom for the purpose. However I have worked quite a lot with the simple_html_dom, particularly for web scraping and have found it to be too vulnerable. It does the basic job but I won&apos;t recommend it anyways.&lt;/p&gt;\n&lt;p&gt;I have never used curl for the purpose but what I have learned is that curl can do the job much more efficiently and is much more solid.&lt;/p&gt;\n&lt;p&gt;Kindly check out this link:&lt;a href=&quot;http://spyderwebtech.wordpress.com/2008/08/07/scraping-websites-with-curl/&quot; rel=&quot;nofollow noreferrer&quot;&gt;scraping-websites-with-curl&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;em&gt;QueryPath&lt;/em&gt; is good, but be careful of &quot;tracking state&quot; cause if you didn&apos;t realise what it means, it can mean you waste a lot of debugging time trying to find out what happened and why the code doesn&apos;t work.&lt;/p&gt;\n\n&lt;p&gt;What it means is that each call on the result set modifies the result set in the object, it&apos;s not chainable like in jquery where each link is a new set, you have a single set which is the results from your query and each function call modifies that single set.&lt;/p&gt;\n\n&lt;p&gt;in order to get jquery-like behaviour, you need to branch before you do a filter/modify like operation, that means it&apos;ll mirror what happens in jquery much more closely.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$results&lt;/span&gt; = qp(&lt;span class=&quot;hljs-string&quot;&gt;&quot;div p&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$forename&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$results&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;hljs-string&quot;&gt;&quot;input[name=&apos;forename&apos;]&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;code&gt;$results&lt;/code&gt; now contains the result set for &lt;code&gt;input[name=&apos;forename&apos;]&lt;/code&gt; NOT the original query &lt;code&gt;&quot;div p&quot;&lt;/code&gt; this tripped me up a lot, what I found was that &lt;em&gt;QueryPath&lt;/em&gt; tracks the filters and finds and everything which modifies your results and stores them in the object.  you need to do this instead&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$forename&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$results&lt;/span&gt;-&amp;gt;branch()-&amp;gt;find(&lt;span class=&quot;hljs-string&quot;&gt;&quot;input[name=&apos;forname&apos;]&quot;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;then &lt;code&gt;$results&lt;/code&gt; won&apos;t be modified and you can reuse the result set again and again, perhaps somebody with much more knowledge can clear this up a bit, but it&apos;s basically like this from what I&apos;ve found.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;https://github.com/monkeysuffrage/advanced_html_dom&quot; rel=&quot;noreferrer&quot;&gt;Advanced Html Dom&lt;/a&gt; is a simple HTML &lt;a href=&quot;http://en.wikipedia.org/wiki/Document_Object_Model&quot; rel=&quot;noreferrer&quot;&gt;DOM&lt;/a&gt; replacement that offers the same interface, but it&apos;s DOM-based which means none of the associated memory issues occur.&lt;/p&gt;\n\n&lt;p&gt;It also has full CSS support, including &lt;a href=&quot;http://en.wikipedia.org/wiki/JQuery&quot; rel=&quot;noreferrer&quot;&gt;jQuery&lt;/a&gt; extensions.&lt;/p&gt;\n    ","\n&lt;p&gt;For &lt;a href=&quot;http://en.wikipedia.org/wiki/HTML5&quot; rel=&quot;noreferrer&quot;&gt;HTML5&lt;/a&gt;, html5 lib has been abandoned for years now. The only HTML5 library I can find with a recent update and maintenance records is &lt;a href=&quot;https://github.com/Masterminds/html5-php/releases/1.0.0-beta1&quot; rel=&quot;noreferrer&quot;&gt;html5-php&lt;/a&gt; which was just brought to beta 1.0 a little over a week ago.&lt;/p&gt;\n    ","\n&lt;p&gt;I created a library named &lt;a href=&quot;https://github.com/PHPPowertools/DOM-Query&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;PHPPowertools/DOM-Query&lt;/strong&gt;&lt;/a&gt;, which allows you to crawl HTML5 and XML documents just like you do with jQuery.&lt;/p&gt;\n&lt;p&gt;Under the hood, it uses &lt;a href=&quot;https://github.com/symfony/DomCrawler&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;symfony/DomCrawler&lt;/strong&gt;&lt;/a&gt; for conversion of CSS selectors to &lt;a href=&quot;http://en.wikipedia.org/wiki/XPath&quot; rel=&quot;noreferrer&quot;&gt;XPath&lt;/a&gt; selectors. It always uses the same DomDocument, even when passing one object to another, to ensure decent performance.&lt;/p&gt;\n&lt;hr&gt;\n&lt;h3&gt;Example use :&lt;/h3&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PowerTools&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Get file content&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$htmlcode&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;file_get_contents&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;https://github.com&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Define your DOMCrawler based on file string&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$H&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DOM_Query&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$htmlcode&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Define your DOMCrawler based on an existing DOM_Query instance&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$H&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DOM_Query&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$H&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;select&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;body&apos;&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Passing a string (CSS selector)&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$s&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$H&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;select&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;div.foo&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Passing an element object (DOM Element)&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$s&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$H&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;select&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$documentBody&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Passing a DOM Query object&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$s&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$H&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;select&lt;/span&gt;( &lt;span class=&quot;hljs-variable&quot;&gt;$H&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;select&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;p + p&apos;&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Select the body tag&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$body&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$H&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;select&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;body&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Combine different classes as one selector to get all site blocks&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$siteblocks&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$body&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;select&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.site-header, .masthead, .site-body, .site-footer&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Nest your methods just like you would with jQuery&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$siteblocks&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;select&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;button&apos;&lt;/span&gt;)-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;span&apos;&lt;/span&gt;)-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;addClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;icon icon-printer&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Use a lambda function to set the text of all site blocks&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$siteblocks&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;text&lt;/span&gt;(function( &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt; . &lt;span class=&quot;hljs-string&quot;&gt;&quot; - &quot;&lt;/span&gt; . &lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;class&apos;&lt;/span&gt;);\n});\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Append the following HTML to all site blocks&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$siteblocks&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;append&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;div class=&quot;site-center&quot;&amp;gt;&amp;lt;/div&amp;gt;&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Use a descendant selector to select the site&apos;s footer&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$sitefooter&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$body&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;select&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.site-footer &amp;gt; .site-center&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Set some attributes for the site&apos;s footer&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$sitefooter&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;aweeesome&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;data-val&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;see&apos;&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Use a lambda function to set the attributes of all site blocks&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$siteblocks&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;data-val&apos;&lt;/span&gt;, function( &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt; . &lt;span class=&quot;hljs-string&quot;&gt;&quot; - &quot;&lt;/span&gt; . &lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;class&apos;&lt;/span&gt;) . &lt;span class=&quot;hljs-string&quot;&gt;&quot; - photo by Kelly Clark&quot;&lt;/span&gt;;\n});\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Select the parent of the site&apos;s footer&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$sitefooterparent&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$sitefooter&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;parent&lt;/span&gt;();\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Remove the class of all i-tags within the site&apos;s footer&apos;s parent&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$sitefooterparent&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;select&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;i&apos;&lt;/span&gt;)-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;removeAttr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;class&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Wrap the site&apos;s footer within two nex selectors&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$sitefooter&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;wrap&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;section&amp;gt;&amp;lt;div class=&quot;footer-wrapper&quot;&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/section&amp;gt;&apos;&lt;/span&gt;);\n\n[...]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;h3&gt;Supported methods :&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/jQuery/&quot; rel=&quot;noreferrer&quot;&gt;$&lt;/a&gt; &lt;em&gt;(1)&lt;/em&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/jQuery.parseHTML/&quot; rel=&quot;noreferrer&quot;&gt;$.parseHTML&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/jQuery.parseXML/&quot; rel=&quot;noreferrer&quot;&gt;$.parseXML&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/jQuery.parseJSON/&quot; rel=&quot;noreferrer&quot;&gt;$.parseJSON&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/add/&quot; rel=&quot;noreferrer&quot;&gt;$selection.add&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/addClass/&quot; rel=&quot;noreferrer&quot;&gt;$selection.addClass&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/after/&quot; rel=&quot;noreferrer&quot;&gt;$selection.after&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/append/&quot; rel=&quot;noreferrer&quot;&gt;$selection.append&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/attr/&quot; rel=&quot;noreferrer&quot;&gt;$selection.attr&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/before/&quot; rel=&quot;noreferrer&quot;&gt;$selection.before&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/children/&quot; rel=&quot;noreferrer&quot;&gt;$selection.children&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/closest/&quot; rel=&quot;noreferrer&quot;&gt;$selection.closest&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/contents/&quot; rel=&quot;noreferrer&quot;&gt;$selection.contents&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/detach/&quot; rel=&quot;noreferrer&quot;&gt;$selection.detach&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/each/&quot; rel=&quot;noreferrer&quot;&gt;$selection.each&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/eq/&quot; rel=&quot;noreferrer&quot;&gt;$selection.eq&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/empty/&quot; rel=&quot;noreferrer&quot;&gt;$selection.empty&lt;/a&gt; &lt;em&gt;(2)&lt;/em&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/find/&quot; rel=&quot;noreferrer&quot;&gt;$selection.find&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/first/&quot; rel=&quot;noreferrer&quot;&gt;$selection.first&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/get/&quot; rel=&quot;noreferrer&quot;&gt;$selection.get&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/insertAfter/&quot; rel=&quot;noreferrer&quot;&gt;$selection.insertAfter&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/insertBefore/&quot; rel=&quot;noreferrer&quot;&gt;$selection.insertBefore&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/last/&quot; rel=&quot;noreferrer&quot;&gt;$selection.last&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/parent/&quot; rel=&quot;noreferrer&quot;&gt;$selection.parent&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/parents/&quot; rel=&quot;noreferrer&quot;&gt;$selection.parents&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/remove/&quot; rel=&quot;noreferrer&quot;&gt;$selection.remove&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/removeAttr/&quot; rel=&quot;noreferrer&quot;&gt;$selection.removeAttr&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/removeClass/&quot; rel=&quot;noreferrer&quot;&gt;$selection.removeClass&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/text/&quot; rel=&quot;noreferrer&quot;&gt;$selection.text&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;[x] &lt;a href=&quot;http://api.jquery.com/wrap/&quot; rel=&quot;noreferrer&quot;&gt;$selection.wrap&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;em&gt;Renamed &apos;select&apos;, for obvious reasons&lt;/em&gt;&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;Renamed &apos;void&apos;, since &apos;empty&apos; is a reserved word in PHP&lt;/em&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;hr&gt;\n&lt;h3&gt;NOTE :&lt;/h3&gt;\n&lt;p&gt;&lt;em&gt;The library also includes its own zero-configuration autoloader for PSR-0 compatible libraries. The example included should work out of the box without any additional configuration. Alternatively, you can use it with composer.&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;You could try using something like &lt;a href=&quot;http://en.wikipedia.org/wiki/HTML_Tidy&quot; rel=&quot;noreferrer&quot;&gt;HTML Tidy&lt;/a&gt; to cleanup any &quot;broken&quot; HTML and convert the HTML to XHTML, which you can then parse with a XML parser.&lt;/p&gt;\n    ","\n&lt;p&gt;I have written a general purpose XML parser that can easily handle GB files. It&apos;s based on XMLReader and it&apos;s very easy to use:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$source&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;XmlExtractor&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;path/to/tag&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;/path/to/file.xml&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$source&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$tag&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$tag&lt;/span&gt;-&amp;gt;field1;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$tag&lt;/span&gt;-&amp;gt;field2-&amp;gt;subfield1;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here&apos;s the github repo: &lt;a href=&quot;https://github.com/pwarelis/XmlExtractor&quot;&gt;XmlExtractor&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Another option you can try is &lt;a href=&quot;http://querypath.org/&quot; rel=&quot;nofollow noreferrer&quot;&gt;QueryPath&lt;/a&gt;. It&apos;s inspired by jQuery, but on the server in PHP and used in &lt;a href=&quot;http://en.wikipedia.org/wiki/Drupal&quot; rel=&quot;nofollow noreferrer&quot;&gt;Drupal&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;http://pear.php.net/package/XML_HTMLSax&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;XML_HTMLSax&lt;/code&gt;&lt;/a&gt; is rather stable - even if it&apos;s not maintained any more. Another option could be to pipe you HTML through &lt;a href=&quot;http://docs.php.net/manual/en/book.tidy.php&quot; rel=&quot;noreferrer&quot;&gt;Html Tidy&lt;/a&gt; and then parse it with standard XML tools.&lt;/p&gt;\n    ","\n&lt;p&gt;There are many ways to process HTML/XML DOM of which most have already been mentioned. Hence, I won&apos;t make any attempt to list those myself.&lt;/p&gt;\n\n&lt;p&gt;I merely want to add that I personally prefer using the DOM extension and why :&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;iit makes optimal use of the performance advantage of the underlying C code&lt;/li&gt;\n&lt;li&gt;it&apos;s OO PHP (and allows me to subclass it)&lt;/li&gt;\n&lt;li&gt;it&apos;s rather low level (which allows me to use it as a non-bloated foundation for more advanced behavior)&lt;/li&gt;\n&lt;li&gt;it provides access to every part of the DOM (unlike eg. SimpleXml, which ignores some of the lesser known XML features)&lt;/li&gt;\n&lt;li&gt;it has a syntax used for DOM crawling that&apos;s similar to the syntax used in native Javascript.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;And while I miss the ability to use CSS selectors for &lt;code&gt;DOMDocument&lt;/code&gt;, there is a rather simple and convenient way to add this feature: subclassing the &lt;code&gt;DOMDocument&lt;/code&gt; and adding JS-like &lt;code&gt;querySelectorAll&lt;/code&gt; and &lt;code&gt;querySelector&lt;/code&gt; methods to your subclass.&lt;/p&gt;\n\n&lt;p&gt;For parsing the selectors, I recommend using the very minimalistic &lt;a href=&quot;http://symfony.com/doc/current/components/css_selector.html&quot; rel=&quot;noreferrer&quot;&gt;CssSelector component&lt;/a&gt; from the &lt;a href=&quot;http://symfony.com/&quot; rel=&quot;noreferrer&quot;&gt;Symfony framework&lt;/a&gt;. This component just translates CSS selectors to XPath selectors, which can then be fed into a &lt;code&gt;DOMXpath&lt;/code&gt; to retrieve the corresponding Nodelist.&lt;/p&gt;\n\n&lt;p&gt;You can then use this (still very low level) subclass as a foundation for more high level classes, intended to eg. parse very specific types of XML or add more jQuery-like behavior.&lt;/p&gt;\n\n&lt;p&gt;The code below comes straight out my &lt;a href=&quot;https://github.com/PHPPowertools/DOM-Query&quot; rel=&quot;noreferrer&quot;&gt;DOM-Query library&lt;/a&gt; and uses the technique I described.&lt;/p&gt;\n\n&lt;p&gt;For HTML parsing :&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PowerTools&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;use&lt;/span&gt; \\&lt;span class=&quot;hljs-title&quot;&gt;Symfony&lt;/span&gt;\\&lt;span class=&quot;hljs-title&quot;&gt;Component&lt;/span&gt;\\&lt;span class=&quot;hljs-title&quot;&gt;CssSelector&lt;/span&gt;\\&lt;span class=&quot;hljs-title&quot;&gt;CssSelector&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;CssSelector&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;DOM_Document&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; \\&lt;span class=&quot;hljs-title&quot;&gt;DOMDocument&lt;/span&gt; &lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;__construct&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$doctype&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;html&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$encoding&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;UTF-8&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$version&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;1.0&apos;&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n        &lt;span class=&quot;hljs-built_in&quot;&gt;parent&lt;/span&gt;::&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;__construct&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$version&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$encoding&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$doctype&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;hljs-variable&quot;&gt;$doctype&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;html&apos;&lt;/span&gt;) {\n            @&lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;loadHTML&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$data&lt;/span&gt;);\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            @&lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;loadXML&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$data&lt;/span&gt;);\n        }\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;querySelectorAll&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$selector&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$contextnode&lt;/span&gt; = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;isset&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;doctype-&amp;gt;name) &amp;amp;&amp;amp; &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;doctype-&amp;gt;name == &lt;span class=&quot;hljs-string&quot;&gt;&apos;html&apos;&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-title class_&quot;&gt;CssSelector&lt;/span&gt;::&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;enableHtmlExtension&lt;/span&gt;();\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            &lt;span class=&quot;hljs-title class_&quot;&gt;CssSelector&lt;/span&gt;::&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;disableHtmlExtension&lt;/span&gt;();\n        }\n        &lt;span class=&quot;hljs-variable&quot;&gt;$xpath&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;\\DOMXpath&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$xpath&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;query&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;CssSelector&lt;/span&gt;::&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;toXPath&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$selector&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;descendant::&apos;&lt;/span&gt;), &lt;span class=&quot;hljs-variable&quot;&gt;$contextnode&lt;/span&gt;);\n    }\n\n    [...]\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;loadHTMLFile&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$filename&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$options&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;loadHTML&lt;/span&gt;(&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;file_get_contents&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$filename&lt;/span&gt;), &lt;span class=&quot;hljs-variable&quot;&gt;$options&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;loadHTML&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$source&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$options&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$source&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;hljs-variable&quot;&gt;$source&lt;/span&gt; != &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;trim&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$source&lt;/span&gt;);\n            &lt;span class=&quot;hljs-variable&quot;&gt;$html5&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HTML5&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;targetDocument&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;disableHtmlNsInDom&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;));\n            &lt;span class=&quot;hljs-variable&quot;&gt;$data_start&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;mb_substr&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$data&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;strpos&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$data_start&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;!DOCTYPE &apos;&lt;/span&gt;) === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; || &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;strpos&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$data_start&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;html&amp;gt;&apos;&lt;/span&gt;) === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n                &lt;span class=&quot;hljs-variable&quot;&gt;$html5&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;loadHTML&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$data&lt;/span&gt;);\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n                @&lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;loadHTML&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;!DOCTYPE html&amp;gt;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;meta charset=&quot;&apos;&lt;/span&gt; . &lt;span class=&quot;hljs-variable&quot;&gt;$encoding&lt;/span&gt; . &lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot; /&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&apos;&lt;/span&gt;);\n                &lt;span class=&quot;hljs-variable&quot;&gt;$t&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$html5&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;loadHTMLFragment&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$data&lt;/span&gt;);\n                &lt;span class=&quot;hljs-variable&quot;&gt;$docbody&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;getElementsByTagName&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;body&apos;&lt;/span&gt;)-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;item&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n                &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$t&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;hasChildNodes&lt;/span&gt;()) {\n                    &lt;span class=&quot;hljs-variable&quot;&gt;$docbody&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;appendChild&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$t&lt;/span&gt;-&amp;gt;firstChild);\n                }\n            }\n        }\n    }\n\n    [...]\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;See also &lt;a href=&quot;http://fabien.potencier.org/article/42/parsing-xml-documents-with-css-selectors&quot; rel=&quot;noreferrer&quot;&gt;Parsing XML documents with CSS selectors&lt;/a&gt; by Symfony&apos;s creator Fabien Potencier on his decision to create the CssSelector component for Symfony and how to use it.&lt;/p&gt;\n    ","\n&lt;p&gt;The &lt;a href=&quot;http://en.wikipedia.org/wiki/Symfony&quot; rel=&quot;noreferrer&quot;&gt;Symfony&lt;/a&gt; framework has bundles which can parse the HTML, and you can use CSS style to select the &lt;a href=&quot;http://en.wikipedia.org/wiki/Document_Object_Model&quot; rel=&quot;noreferrer&quot;&gt;DOMs&lt;/a&gt; instead of using &lt;a href=&quot;http://en.wikipedia.org/wiki/XPath&quot; rel=&quot;noreferrer&quot;&gt;XPath&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;With &lt;a href=&quot;https://github.com/servo-php/fluidxml&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;FluidXML&lt;/strong&gt;&lt;/a&gt; you can query and iterate XML using &lt;strong&gt;XPath&lt;/strong&gt; and &lt;strong&gt;CSS Selectors&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-perl&quot;&gt;$doc = fluidxml(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;html&amp;gt;...&amp;lt;/html&amp;gt;&apos;&lt;/span&gt;);\n\n$title = $doc-&amp;gt;query(&lt;span class=&quot;hljs-string&quot;&gt;&apos;//head/title&apos;&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]-&amp;gt;nodeValue;\n\n$doc-&amp;gt;query(&lt;span class=&quot;hljs-string&quot;&gt;&apos;//body/p&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;div.active&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;#bgId&apos;&lt;/span&gt;)\n        -&amp;gt;&lt;span class=&quot;hljs-keyword&quot;&gt;each&lt;/span&gt;(function($i, $node) {\n            &lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;/span&gt; $node is a DOMNode.\n            $tag   = $node-&amp;gt;nodeName;\n            $text  = $node-&amp;gt;nodeValue;\n            $class = $node-&amp;gt;getAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&apos;class&apos;&lt;/span&gt;);\n        });\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/servo-php/fluidxml&quot; rel=&quot;noreferrer&quot;&gt;https://github.com/servo-php/fluidxml&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;JSON and array from XML in three lines:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$xml&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;simplexml_load_string&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$xml_string&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$json&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;json_encode&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$xml&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;json_decode&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$json&lt;/span&gt;,&lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Ta da!&lt;/p&gt;\n    ","\n&lt;p&gt;There are several reasons to not parse HTML by regular expression. But, if you have total control of what HTML will be generated, then you can do with simple regular expression.&lt;/p&gt;\n\n&lt;p&gt;Above it&apos;s a function that parses HTML by regular expression. Note that this function is very sensitive and demands that the HTML obey certain rules, but it works very well in many scenarios. If you want a simple parser, and don&apos;t want to install libraries, give this a shot:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;array_combine_&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$keys&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$values&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$result&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$keys&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$k&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-variable&quot;&gt;$result&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$k&lt;/span&gt;][] = &lt;span class=&quot;hljs-variable&quot;&gt;$values&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;];\n    }\n    &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_walk&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$result&lt;/span&gt;, &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;create_function&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;amp;$v&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;$v = (count($v) == 1)? array_pop($v): $v;&apos;&lt;/span&gt;));\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$result&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;extract_data&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$str&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;is_array&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$str&lt;/span&gt;))\n        ? &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_map&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;extract_data&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$str&lt;/span&gt;)\n        : ((!&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;preg_match_all&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#&amp;lt;([A-Za-z0-9_]*)[^&amp;gt;]*&amp;gt;(.*?)&amp;lt;/\\1&amp;gt;#s&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$str&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$matches&lt;/span&gt;))\n            ? &lt;span class=&quot;hljs-variable&quot;&gt;$str&lt;/span&gt;\n            : &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_map&lt;/span&gt;((&lt;span class=&quot;hljs-string&quot;&gt;&apos;extract_data&apos;&lt;/span&gt;), &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_combine_&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$matches&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;hljs-variable&quot;&gt;$matches&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])));\n}\n\n&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;print_r&lt;/span&gt;(&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;extract_data&lt;/span&gt;(&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;file_get_contents&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://www.google.com/&quot;&lt;/span&gt;)));\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I&apos;ve created a library called HTML5DOMDocument that is freely available at &lt;a href=&quot;https://github.com/ivopetkov/html5-dom-document-php&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://github.com/ivopetkov/html5-dom-document-php&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;It supports query selectors too that I think will be extremely helpful in your case. Here is some example code:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;$dom = new IvoPetkov\\HTML5DOMDocument();\n$dom-&amp;gt;loadHTML(&apos;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;!DOCTYPE &lt;span class=&quot;hljs-keyword&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;Hello&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;content&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;This is some text&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&apos;);\necho $dom-&amp;gt;querySelector(&apos;h1&apos;)-&amp;gt;innerHTML;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The best method for parse xml:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$xml&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;http://www.example.com/rss.xml&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable&quot;&gt;$rss&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;simplexml_load_string&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$xml&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$rss&lt;/span&gt;-&amp;gt;channel-&amp;gt;item &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$feedItem&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;++;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$title&lt;/span&gt;=&lt;span class=&quot;hljs-variable&quot;&gt;$feedItem&lt;/span&gt;-&amp;gt;title;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;br&amp;gt;&apos;&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$link&lt;/span&gt;=&lt;span class=&quot;hljs-variable&quot;&gt;$feedItem&lt;/span&gt;-&amp;gt;link;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;br&amp;gt;&apos;&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$feedItem&lt;/span&gt;-&amp;gt;description !=&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable&quot;&gt;$des&lt;/span&gt;=&lt;span class=&quot;hljs-variable&quot;&gt;$feedItem&lt;/span&gt;-&amp;gt;description;\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n    &lt;span class=&quot;hljs-variable&quot;&gt;$des&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$des&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;br&amp;gt;&apos;&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you&apos;re familiar with jQuery selector, you can use &lt;a href=&quot;https://github.com/ScarletsFiction/ScarletsQuery&quot; rel=&quot;nofollow noreferrer&quot;&gt;ScarletsQuery&lt;/a&gt; for PHP&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php-template&quot;&gt;&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;pre&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;language-php&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?php&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;ScarletsQuery.php&quot;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Load the HTML content and parse it&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;file_get_contents&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;https://www.lipsum.com&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$dom&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;Scarlets\\Library\\MarkupLanguage&lt;/span&gt;::&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;parseText&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$html&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Select meta tag on the HTML header&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$description&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$dom&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;selector&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;head meta[name=&quot;description&quot;]&apos;&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Get &apos;content&apos; attribute value from meta tag&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;print_r&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$description&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;content&apos;&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$description&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$dom&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;selector&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#Content p&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Get element array&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;print_r&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$description&lt;/span&gt;-&amp;gt;view);\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This library usually taking less than 1 second to process offline html.&lt;br&gt;\nIt also accept invalid HTML or missing quote on tag attributes.&lt;/p&gt;\n    "],"34":["\n&lt;p&gt;Yes, you saw it right.&lt;/p&gt;\n&lt;p&gt;As per the current &lt;em&gt;WebDriver - W3C Candidate Recommendation&lt;/em&gt; the &lt;a href=&quot;https://w3c.github.io/webdriver/webdriver-spec.html#locator-strategies&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;em&gt;Locator Strategies&lt;/em&gt;&lt;/a&gt; enlisted are as follows:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;em&gt;&quot;css selector&quot;&lt;/em&gt;: CSS selector&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;&quot;link text&quot;&lt;/em&gt;: Link text selector&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;&quot;partial link text&quot;&lt;/em&gt;: Partial link text selector&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;&quot;tag name&quot;&lt;/em&gt;: Tag name&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;&quot;xpath&quot;&lt;/em&gt;: XPath selector&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Snapshot:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/e3kwW.png&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/e3kwW.png&quot; alt=&quot;Locator Strategies&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;However, the &lt;a href=&quot;https://github.com/SeleniumHQ/selenium/wiki/JsonWireProtocol#post-sessionsessionidelementidelement&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;em&gt;JsonWireProtocol&lt;/em&gt;&lt;/a&gt; was once used to support the &lt;em&gt;Locator Strategies&lt;/em&gt; enlisted below, but currently the documentation clearly states its &lt;em&gt;Status&lt;/em&gt; as &lt;em&gt;obsolete&lt;/em&gt;:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;em&gt;class name&lt;/em&gt;: Returns an element whose class name contains the search value; compound class names are not permitted.&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;css selector&lt;/em&gt;: Returns an element matching a CSS selector.&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;id&lt;/em&gt;: Returns an element whose ID attribute matches the search value.&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;name&lt;/em&gt;: Returns an element whose NAME attribute matches the search value.&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;link text&lt;/em&gt;: Returns an anchor element whose visible text matches the search value.&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;partial link text&lt;/em&gt;: Returns an anchor element whose visible text partially matches the search value.&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;tag name&lt;/em&gt;: Returns an element whose tag name matches the search value.&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;xpath&lt;/em&gt;: Returns an element matching an XPath expression. The provided XPath expression must be applied to the server &quot;as is&quot;; if the expression is not relative to the element root, the server should not modify it. Consequently, an XPath query may return elements not contained in the root element&apos;s subtree.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Snapshot:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/ftg7I.png&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/ftg7I.png&quot; alt=&quot;Locator Strategies&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;The change was propagated through the respective &lt;em&gt;client&lt;/em&gt;-specific bindings. For the &lt;em&gt;Selenium-Java&lt;/em&gt; clients here is the &lt;a href=&quot;https://github.com/SeleniumHQ/selenium/blob/13d8f8be751001d44df8e5f1797518f4fb4dec6b/java/client/src/org/openqa/selenium/remote/http/W3CHttpCommandCodec.java#L187&quot; rel=&quot;nofollow noreferrer&quot;&gt;client code&lt;/a&gt; where we have the switch case working for the users:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;        switch (using) {\n          case &quot;class name&quot;:\n            toReturn.put(&quot;using&quot;, &quot;css selector&quot;);\n            toReturn.put(&quot;value&quot;, &quot;.&quot; + cssEscape(value));\n            break;\n\n          case &quot;id&quot;:\n            toReturn.put(&quot;using&quot;, &quot;css selector&quot;);\n            toReturn.put(&quot;value&quot;, &quot;#&quot; + cssEscape(value));\n            break;\n\n          case &quot;link text&quot;:\n            // Do nothing\n            break;\n\n          case &quot;name&quot;:\n            toReturn.put(&quot;using&quot;, &quot;css selector&quot;);\n            toReturn.put(&quot;value&quot;, &quot;*[name=&apos;&quot; + value + &quot;&apos;]&quot;);\n            break;\n\n          case &quot;partial link text&quot;:\n            // Do nothing\n            break;\n\n          case &quot;tag name&quot;:\n            toReturn.put(&quot;using&quot;, &quot;css selector&quot;);\n            toReturn.put(&quot;value&quot;, cssEscape(value));\n            break;\n\n          case &quot;xpath&quot;:\n            // Do nothing\n            break;\n        }\n        return toReturn;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Snapshot:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/I1RA6.png&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/I1RA6.png&quot; alt=&quot;JAVA_classname_id_name_tagname&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;Now, your question must be why this change in the &lt;em&gt;W3C specification&lt;/em&gt; and in the &lt;em&gt;clients&lt;/em&gt;. As per &lt;a href=&quot;https://github.com/w3c/webdriver/issues/1042&quot; rel=&quot;nofollow noreferrer&quot;&gt;#1042&lt;/a&gt; the &lt;em&gt;answer&lt;/em&gt; from the &lt;em&gt;WebDriver Contributors&lt;/em&gt; was pretty straight as:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;This keeps the specification simple as these can be implemented using the CSS selector, which maps down to querySelector/querySelectorAll.&lt;/p&gt;\n&lt;/blockquote&gt;\n    "],"35":["\n&lt;p&gt;Because &lt;code&gt;iostream::eof&lt;/code&gt; will only return &lt;code&gt;true&lt;/code&gt; &lt;em&gt;after&lt;/em&gt; reading the end of the stream. It does &lt;em&gt;not&lt;/em&gt; indicate, that the next read will be the end of the stream.&lt;/p&gt;\n\n&lt;p&gt;Consider this (and assume then next read will be at the end of the stream):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(!inStream.&lt;span class=&quot;hljs-built_in&quot;&gt;eof&lt;/span&gt;()){\n  &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; data;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// yay, not end of stream yet, now read ...&lt;/span&gt;\n  inStream &amp;gt;&amp;gt; data;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// oh crap, now we read the end and *only* now the eof bit will be set (as well as the fail bit)&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// do stuff with (now uninitialized) data&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Against this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; data;\n&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(inStream &amp;gt;&amp;gt; data){\n  &lt;span class=&quot;hljs-comment&quot;&gt;// when we land here, we can be sure that the read was successful.&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// if it wasn&apos;t, the returned stream from operator&amp;gt;&amp;gt; would be converted to false&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// and the loop wouldn&apos;t even be entered&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// do stuff with correctly initialized data (hopefully)&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And on your second question: Because&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;scanf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;...&quot;&lt;/span&gt;,...)!=EOF)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;is the same as&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(!(inStream &amp;gt;&amp;gt; data).&lt;span class=&quot;hljs-built_in&quot;&gt;eof&lt;/span&gt;())\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and &lt;strong&gt;not&lt;/strong&gt; the same as&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(!inStream.&lt;span class=&quot;hljs-built_in&quot;&gt;eof&lt;/span&gt;())\n    inFile &amp;gt;&amp;gt; data\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;Bottom-line top:&lt;/strong&gt;  With proper handling of white-space, the following is how &lt;code&gt;eof&lt;/code&gt; can be used (and even, be more reliable than &lt;code&gt;fail()&lt;/code&gt; for error checking):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;( !(in&amp;gt;&amp;gt;std::ws).&lt;span class=&quot;hljs-built_in&quot;&gt;eof&lt;/span&gt;() ) {  \n   &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; data;\n   in &amp;gt;&amp;gt; data;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ( in.&lt;span class=&quot;hljs-built_in&quot;&gt;fail&lt;/span&gt;() ) &lt;span class=&quot;hljs-comment&quot;&gt;/* handle with break or throw */&lt;/span&gt;; \n   &lt;span class=&quot;hljs-comment&quot;&gt;// now use data&lt;/span&gt;\n}    \n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;(&lt;em&gt;Thanks Tony D for the suggestion to highlight the answer. See his comment below for an example to why this is more robust.&lt;/em&gt;)&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;The main argument against using &lt;code&gt;eof()&lt;/code&gt; seems to be missing an important subtlety about the role of white space. My proposition is that, checking &lt;code&gt;eof()&lt;/code&gt; explicitly is not only not &quot;&lt;em&gt;always wrong&lt;/em&gt;&quot; -- which seems to be an overriding opinion in this and similar SO threads --, but with proper handling of white-space, it provides for a cleaner and more reliable error handling, and is the &lt;em&gt;always correct&lt;/em&gt; solution (although, not necessarily the tersest).&lt;/p&gt;\n\n&lt;p&gt;To summarize what is being suggested as the &quot;proper&quot; termination and read order is the following:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; data;\n&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(in &amp;gt;&amp;gt; data) {  &lt;span class=&quot;hljs-comment&quot;&gt;/* ... */&lt;/span&gt; }\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// which is equivalent to &lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;( !(in &amp;gt;&amp;gt; data).&lt;span class=&quot;hljs-built_in&quot;&gt;fail&lt;/span&gt;() )  {  &lt;span class=&quot;hljs-comment&quot;&gt;/* ... */&lt;/span&gt; }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The failure due to read attempt beyond eof is taken as the termination condition.  This means is that there is no easy way to distinguish between a successful stream and one that really fails for reasons other than eof. Take the following streams: &lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;1 2 3 4 5&amp;lt;eof&amp;gt;&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;1 2 a 3 4 5&amp;lt;eof&amp;gt;&lt;/code&gt; &lt;/li&gt;\n&lt;li&gt;&lt;code&gt;a&amp;lt;eof&amp;gt;&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;code&gt;while(in&amp;gt;&amp;gt;data)&lt;/code&gt; terminates with a set &lt;code&gt;failbit&lt;/code&gt; for &lt;em&gt;all&lt;/em&gt; three input. In the first and third, &lt;code&gt;eofbit&lt;/code&gt; is also set. So past the loop one needs very ugly extra logic to distinguish a proper input (1st) from improper ones (2nd and 3rd).&lt;/p&gt;\n\n&lt;p&gt;Whereas, take the following: &lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;( !in.&lt;span class=&quot;hljs-built_in&quot;&gt;eof&lt;/span&gt;() ) \n{  \n   &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; data;\n   in &amp;gt;&amp;gt; data;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ( in.&lt;span class=&quot;hljs-built_in&quot;&gt;fail&lt;/span&gt;() ) &lt;span class=&quot;hljs-comment&quot;&gt;/* handle with break or throw */&lt;/span&gt;; \n   &lt;span class=&quot;hljs-comment&quot;&gt;// now use data&lt;/span&gt;\n}    \n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here, &lt;code&gt;in.fail()&lt;/code&gt; verifies that as long as there is something to read, it is the correct one. It&apos;s purpose is not a mere while-loop terminator. &lt;/p&gt;\n\n&lt;p&gt;So far so good, but what happens if there is trailing space in the stream -- what sounds like the major concern against &lt;code&gt;eof()&lt;/code&gt; as terminator?&lt;/p&gt;\n\n&lt;p&gt;We don&apos;t need to surrender our error handling; just eat up the white-space:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;( !in.&lt;span class=&quot;hljs-built_in&quot;&gt;eof&lt;/span&gt;() ) \n{  \n   &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; data;\n   in &amp;gt;&amp;gt; data &amp;gt;&amp;gt; ws; &lt;span class=&quot;hljs-comment&quot;&gt;// eat whitespace with std::ws&lt;/span&gt;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ( in.&lt;span class=&quot;hljs-built_in&quot;&gt;fail&lt;/span&gt;() ) &lt;span class=&quot;hljs-comment&quot;&gt;/* handle with break or throw */&lt;/span&gt;; \n   &lt;span class=&quot;hljs-comment&quot;&gt;// now use data&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;code&gt;std::ws&lt;/code&gt; skips any potential (zero or more) trailing space in the stream while setting the &lt;code&gt;eofbit&lt;/code&gt;, and &lt;strong&gt;not the &lt;code&gt;failbit&lt;/code&gt;&lt;/strong&gt;.  So, &lt;code&gt;in.fail()&lt;/code&gt; works as expected, as long as there is at least one data to read. If all-blank streams are also acceptable, then the correct form is:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;( !(in&amp;gt;&amp;gt;ws).&lt;span class=&quot;hljs-built_in&quot;&gt;eof&lt;/span&gt;() ) \n{  \n   &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; data;\n   in &amp;gt;&amp;gt; data; \n   &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ( in.&lt;span class=&quot;hljs-built_in&quot;&gt;fail&lt;/span&gt;() ) &lt;span class=&quot;hljs-comment&quot;&gt;/* handle with break or throw */&lt;/span&gt;; \n   &lt;span class=&quot;hljs-comment&quot;&gt;/* this will never fire if the eof is reached cleanly */&lt;/span&gt;\n   &lt;span class=&quot;hljs-comment&quot;&gt;// now use data&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Summary:&lt;/strong&gt; A properly constructed &lt;code&gt;while(!eof)&lt;/code&gt; is not only possible and not wrong, but allows data to be localized within scope, and provides a cleaner separation of error checking from business as usual.  That being said, &lt;code&gt;while(!fail)&lt;/code&gt; is inarguably a more common and terse idiom, and may be preferred in simple (single data per read type of) scenarios. &lt;/p&gt;\n    ","\n&lt;p&gt;Because if programmers don&apos;t write &lt;code&gt;while(stream &amp;gt;&amp;gt; n)&lt;/code&gt;, they possibly write this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(!stream.&lt;span class=&quot;hljs-built_in&quot;&gt;eof&lt;/span&gt;())\n{\n    stream &amp;gt;&amp;gt; n;\n    &lt;span class=&quot;hljs-comment&quot;&gt;//some work on n;&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here the problem is, you cannot do &lt;code&gt;some work on n&lt;/code&gt; without first checking if the stream read was successful, because if it was unsuccessful, your &lt;code&gt;some work on n&lt;/code&gt; would produce undesired result.&lt;/p&gt;\n\n&lt;p&gt;The whole point is that, &lt;code&gt;eofbit&lt;/code&gt;, &lt;code&gt;badbit&lt;/code&gt;, or &lt;code&gt;failbit&lt;/code&gt; are set &lt;strong&gt;after an attempt is made to read from the stream.&lt;/strong&gt; So if &lt;code&gt;stream &amp;gt;&amp;gt; n&lt;/code&gt; fails, then &lt;code&gt;eofbit&lt;/code&gt;, &lt;code&gt;badbit&lt;/code&gt;, or &lt;code&gt;failbit&lt;/code&gt; is set immediately, so its more idiomatic if you write &lt;code&gt;while (stream &amp;gt;&amp;gt; n)&lt;/code&gt;, because the returned object &lt;code&gt;stream&lt;/code&gt; converts to &lt;code&gt;false&lt;/code&gt; if there was some failure in reading from the stream and consequently the loop stops. And it converts to &lt;code&gt;true&lt;/code&gt; if the read was successful and the loop continues.&lt;/p&gt;\n    ","\n&lt;p&gt;The other answers have explained why the logic is wrong in &lt;code&gt;while (!stream.eof())&lt;/code&gt; and how to fix it. I want to focus on something different:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;why is checking for eof explicitly using &lt;code&gt;iostream::eof&lt;/code&gt; wrong?&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;In general terms, checking for &lt;code&gt;eof&lt;/code&gt; &lt;em&gt;only&lt;/em&gt; is wrong because stream extraction (&lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;) can fail without hitting the end of the file. If you have e.g. &lt;code&gt;int n; cin &amp;gt;&amp;gt; n;&lt;/code&gt; and the stream contains &lt;code&gt;hello&lt;/code&gt;, then &lt;code&gt;h&lt;/code&gt; is not a valid digit, so extraction will fail without reaching the end of the input.&lt;/p&gt;\n\n&lt;p&gt;This issue, combined with the general logic error of checking the stream state &lt;em&gt;before&lt;/em&gt; attempting to read from it, which means for N input items the loop will run N+1 times, leads to the following symptoms:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;If the stream is empty, the loop will run once. &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; will fail (there is no input to be read) and all variables that were supposed to be set (by &lt;code&gt;stream &amp;gt;&amp;gt; x&lt;/code&gt;) are actually uninitialized. This leads to garbage data being processed, which can manifest as nonsensical results (often huge numbers).&lt;/p&gt;\n\n&lt;p&gt;(If your standard library conforms to C++11, things are a bit different now: A failed &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; now sets numeric variables to &lt;code&gt;0&lt;/code&gt; instead of leaving them uninitialized (except for &lt;code&gt;char&lt;/code&gt;s).)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;If the stream is not empty, the loop will run again after the last valid input. Since in the last iteration all &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; operations fail, variables are likely to keep their value from the previous iteration. This can manifest as &quot;the last line is printed twice&quot; or &quot;the last input record is processed twice&quot;.&lt;/p&gt;\n\n&lt;p&gt;(This should manifest a bit differently since C++11 (see above): Now you get a &quot;phantom record&quot; of zeroes instead of a repeated last line.)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;If the stream contains malformed data but you only check for &lt;code&gt;.eof&lt;/code&gt;, you end up with an infinite loop. &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; will fail to extract any data from the stream, so the loop spins in place without ever reaching the end.&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;To recap: The solution is to test the success of the &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; operation itself, not to use a separate &lt;code&gt;.eof()&lt;/code&gt; method: &lt;code&gt;while (stream &amp;gt;&amp;gt; n &amp;gt;&amp;gt; m) { ... }&lt;/code&gt;, just as in C you test the success of the &lt;code&gt;scanf&lt;/code&gt; call itself: &lt;code&gt;while (scanf(&quot;%d%d&quot;, &amp;amp;n, &amp;amp;m) == 2) { ... }&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;The important thing to remember is that, &lt;code&gt;inFile.eof()&lt;/code&gt; doesnt become &lt;code&gt;True&lt;/code&gt; until &lt;em&gt;&lt;strong&gt;after&lt;/strong&gt;&lt;/em&gt; an attempted read fails, because youve reached the end of the file. So, in this example, youll get an error.&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (!inFile.&lt;span class=&quot;hljs-built_in&quot;&gt;eof&lt;/span&gt;()){\n    inFile &amp;gt;&amp;gt; x;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;process&lt;/span&gt;(x);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The way to make this loop correct, is to combine reading and checking into a single operation, like so&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (inFile &amp;gt;&amp;gt; x)&amp;nbsp;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;process&lt;/span&gt;(x);&amp;nbsp;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;By convention, &lt;code&gt;operator&amp;gt;&amp;gt;&lt;/code&gt; returns the stream we read from, and a Boolean test on a stream returns &lt;code&gt;False&lt;/code&gt; when the stream fails (such as reaching end of file).&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;So this gives us the correct sequence :&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;read&lt;/li&gt;\n&lt;li&gt;test whether the read succeeds&lt;/li&gt;\n&lt;li&gt;if and only if the test succeeds, process what weve read&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;If you happen to encounter some &lt;em&gt;other&lt;/em&gt; problem that prevents you from reading from the file correctly, you will not be able to reach &lt;code&gt;eof()&lt;/code&gt; as such. For example, lets look at something like this&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; x;&amp;nbsp;\n&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (!inFile.&lt;span class=&quot;hljs-built_in&quot;&gt;eof&lt;/span&gt;()) {&amp;nbsp;\n    inFile &amp;gt;&amp;gt; x;&amp;nbsp;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;process&lt;/span&gt;(x);\n}&amp;nbsp;\n    \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Let us trace through the working of the above code, with an example&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Assume the contents of the file are &lt;code&gt;&apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;a&apos;, &apos;b&apos;&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;The loop will read the 1, 2, and 3 correctly.&lt;/li&gt;\n&lt;li&gt;Then itll get to &lt;code&gt;a&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;When it tries to extract &lt;code&gt;a&lt;/code&gt; as an int, itll fail.&lt;/li&gt;\n&lt;li&gt;The stream is now in a failed state, until or unless we &lt;code&gt;clear&lt;/code&gt; the stream, all attempts at reading from it will fail.&lt;/li&gt;\n&lt;li&gt;But, when we test for eof(), itll return &lt;code&gt;False&lt;/code&gt;, because were not at the end of the file, because theres still &lt;code&gt;a&lt;/code&gt; waiting to be read.&lt;/li&gt;\n&lt;li&gt;The loop will keep trying to read from the file, and fail every time, so it &lt;strong&gt;never&lt;/strong&gt; reaches the end of the file.&lt;/li&gt;\n&lt;li&gt;So, the loop above will run forever.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;But, if we use a loop like this, we will get the required output.&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (inFile &amp;gt;&amp;gt; x)\n    &lt;span class=&quot;hljs-built_in&quot;&gt;process&lt;/span&gt;(x);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;In this case, the stream will convert to &lt;code&gt;False&lt;/code&gt; not only in case of end of file, but also in case of a failed conversion, such as the &lt;code&gt;a&lt;/code&gt; that we cant read as an integer.&lt;/p&gt;\n    "]},"page":"116","randomQuestions":[{"title":"How can I upload files to a server using JSP/Servlet?","slug":"how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658"},{"title":"Returning data from async call in Swift function","slug":"returning-data-from-async-call-in-swift-function-1657387469218"},{"title":"How do function pointers in C work?","slug":"how-do-function-pointers-in-c-work-1657388332074"},{"title":"When can I use a forward declaration?","slug":"when-can-i-use-a-forward-declaration-1657388251827"},{"title":"How do I iterate over the words of a string?","slug":"how-do-i-iterate-over-the-words-of-a-string-1657384806129"},{"title":"What is a raw type and why shouldn't we use it?","slug":"what-is-a-raw-type-and-why-shouldn't-we-use-it-1657384481079"},{"title":"Relative imports for the billionth time","slug":"relative-imports-for-the-billionth-time-1657387756383"},{"title":"Using LIMIT within GROUP BY to get N results per group?","slug":"using-limit-within-group-by-to-get-n-results-per-group-1657388324167"},{"title":"How do I declare a 2d array in C++ using new?","slug":"how-do-i-declare-a-2d-array-in-c++-using-new-1657388441163"},{"title":"Why is 24.0000 not equal to 24.0000 in MATLAB?","slug":"why-is-24.0000-not-equal-to-24.0000-in-matlab-1657388376753"},{"title":"How to add to the PYTHONPATH in Windows, so it finds my modules/packages?","slug":"how-to-add-to-the-pythonpath-in-windows-so-it-finds-my-modulespackages-1657388540360"},{"title":"Why are mutable structs evil?","slug":"why-are-mutable-structs-\"evil\"-1657388508974"},{"title":"When should I use a return statement in ES6 arrow functions","slug":"when-should-i-use-a-return-statement-in-es6-arrow-functions-1657388472113"},{"title":"How do I pass variables and data from PHP to JavaScript?","slug":"how-do-i-pass-variables-and-data-from-php-to-javascript-1657384684553"},{"title":"How can I access and process nested objects, arrays, or JSON?","slug":"how-can-i-access-and-process-nested-objects-arrays-or-json-1657384332823"},{"title":"What is the strict aliasing rule?","slug":"what-is-the-strict-aliasing-rule-1657384742852"},{"title":"How do I properly compare strings in C?","slug":"how-do-i-properly-compare-strings-in-c-1657387467202"},{"title":"Non-static variable cannot be referenced from a static context","slug":"non-static-variable-cannot-be-referenced-from-a-static-context-1657387386240"},{"title":"Why does this UnboundLocalError occur (closure)? [duplicate]","slug":"why-does-this-unboundlocalerror-occur-(closure)-duplicate-1657388531538"},{"title":"Convert one date format into another in PHP","slug":"convert-one-date-format-into-another-in-php-1657384566234"}]},"__N_SSG":true}