{"pageProps":{"data":{"count":610,"rows":[{"id":510,"title":"How do you access the matched groups in a JavaScript regular expression?","slug":"how-do-you-access-the-matched-groups-in-a-javascript-regular-expression-1657388233817","postType":"QUESTION","createdAt":"2022-07-09T17:37:13.000Z","updatedAt":"2022-07-09T17:37:13.000Z","tags":[]},{"id":509,"title":"What does enctype='multipart/form-data' mean?","slug":"what-does-enctype'multipartform-data'-mean-1657388229352","postType":"QUESTION","createdAt":"2022-07-09T17:37:09.000Z","updatedAt":"2022-07-09T17:37:09.000Z","tags":[{"id":2532,"name":"multipartform-data","slug":"multipartform-data","createdAt":"2022-07-09T17:37:09.000Z","updatedAt":"2022-07-09T17:37:09.000Z","Questions_Tags":{"questionId":509,"tagId":2532}}]},{"id":508,"title":"How do I set, clear, and toggle a single bit?","slug":"how-do-i-set-clear-and-toggle-a-single-bit-1657388227052","postType":"QUESTION","createdAt":"2022-07-09T17:37:07.000Z","updatedAt":"2022-07-09T17:37:07.000Z","tags":[{"id":2528,"name":"bit-manipulation","slug":"bit-manipulation","createdAt":"2022-07-09T17:37:07.000Z","updatedAt":"2022-07-09T17:37:07.000Z","Questions_Tags":{"questionId":508,"tagId":2528}},{"id":2529,"name":"bitwise-operators","slug":"bitwise-operators","createdAt":"2022-07-09T17:37:07.000Z","updatedAt":"2022-07-09T17:37:07.000Z","Questions_Tags":{"questionId":508,"tagId":2529}}]},{"id":507,"title":"What is the behavior of integer division?","slug":"what-is-the-behavior-of-integer-division-1657388222571","postType":"QUESTION","createdAt":"2022-07-09T17:37:02.000Z","updatedAt":"2022-07-09T17:37:02.000Z","tags":[{"id":2523,"name":"c99","slug":"c99","createdAt":"2022-07-09T17:37:02.000Z","updatedAt":"2022-07-09T17:37:02.000Z","Questions_Tags":{"questionId":507,"tagId":2523}},{"id":2524,"name":"c89","slug":"c89","createdAt":"2022-07-09T17:37:02.000Z","updatedAt":"2022-07-09T17:37:02.000Z","Questions_Tags":{"questionId":507,"tagId":2524}}]},{"id":506,"title":"Download a file by jQuery.Ajax","slug":"download-a-file-by-jquery.ajax-1657388220611","postType":"QUESTION","createdAt":"2022-07-09T17:37:00.000Z","updatedAt":"2022-07-09T17:37:00.000Z","tags":[{"id":2520,"name":"download","slug":"download","createdAt":"2022-07-09T17:37:00.000Z","updatedAt":"2022-07-09T17:37:00.000Z","Questions_Tags":{"questionId":506,"tagId":2520}}]}]},"answers":{"506":["\n&lt;p&gt;&lt;strong&gt;2019 modern browsers update&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;This is the approach I&apos;d now recommend with a few caveats:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;A relatively modern browser is required&lt;/li&gt;\n&lt;li&gt;If the file is expected to be &lt;strong&gt;very large&lt;/strong&gt; you should likely do something similar to the original approach (iframe and cookie) because some of the below operations could likely consume system memory at least as large as the file being downloaded and/or other interesting CPU side effects.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;false&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;fetch&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;https://jsonplaceholder.typicode.com/todos/1&apos;&lt;/span&gt;)\n  .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;resp&lt;/span&gt; =&amp;gt;&lt;/span&gt; resp.&lt;span class=&quot;hljs-title function_&quot;&gt;blob&lt;/span&gt;())\n  .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;blob&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n    a.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n    a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = url;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// the filename you want&lt;/span&gt;\n    a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;todo-1.json&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(a);\n    a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;revokeObjectURL&lt;/span&gt;(url);\n    &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;your file has downloaded!&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// or you know, something with better UX...&lt;/span&gt;\n  })\n  .&lt;span class=&quot;hljs-title function_&quot;&gt;catch&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;oh no!&apos;&lt;/span&gt;));&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;2012 Original jQuery/iframe/Cookie based approach&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/a/7660817/107768&quot;&gt;Bluish&lt;/a&gt; is completely right about this, you can&apos;t do it through Ajax because JavaScript cannot save files directly to a user&apos;s computer (out of security concerns). Unfortunately pointing the &lt;em&gt;main window&apos;s&lt;/em&gt; URL at your file download means you have little control over what the user experience is when a file download occurs.&lt;/p&gt;\n\n&lt;p&gt;I created &lt;a href=&quot;http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx&quot; rel=&quot;noreferrer&quot;&gt;jQuery File Download&lt;/a&gt; which allows for an &quot;Ajax like&quot; experience with file downloads complete with OnSuccess and OnFailure callbacks to provide for a better user experience. Take a look at my &lt;a href=&quot;http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx&quot; rel=&quot;noreferrer&quot;&gt;blog post&lt;/a&gt; on the common problem that the plugin solves and some ways to use it and also a &lt;a href=&quot;http://jqueryfiledownload.apphb.com/&quot; rel=&quot;noreferrer&quot;&gt;demo of jQuery File Download in action&lt;/a&gt;. Here is the &lt;a href=&quot;http://github.com/johnculviner/jquery.fileDownload/blob/master/src/Scripts/jquery.fileDownload.js&quot; rel=&quot;noreferrer&quot;&gt;source&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Here is a simple use case demo using the plugin &lt;a href=&quot;http://github.com/johnculviner/jquery.fileDownload/blob/master/src/Scripts/jquery.fileDownload.js&quot; rel=&quot;noreferrer&quot;&gt;source&lt;/a&gt; with promises. The &lt;a href=&quot;http://jqueryfiledownload.apphb.com/&quot; rel=&quot;noreferrer&quot;&gt;demo page&lt;/a&gt; includes many other, &apos;better UX&apos; examples as well.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$.&lt;span class=&quot;hljs-title function_&quot;&gt;fileDownload&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;some/file.pdf&apos;&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;done&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;File download a success!&apos;&lt;/span&gt;); })\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;fail&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;File download failed!&apos;&lt;/span&gt;); });\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Depending on what browsers you need to support you may be able to use &lt;a href=&quot;https://github.com/eligrey/FileSaver.js/&quot; rel=&quot;noreferrer&quot;&gt;https://github.com/eligrey/FileSaver.js/&lt;/a&gt; which allows more explicit control than the IFRAME method jQuery File Download uses.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;em&gt;Noone posted this &lt;a href=&quot;https://stackoverflow.com/questions/4545311/download-a-file-by-jquery-ajax#comment4981707_4545311&quot;&gt;@Pekka&apos;s solution&lt;/a&gt;... so I&apos;ll post it. It can help someone.&lt;/em&gt;&lt;/p&gt;\n\n&lt;p&gt;You don&apos;t need to do this through Ajax. Just use&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;location&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;download.action?para1=value1....&quot;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;You can with HTML5&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;NB: The file data returned MUST be base64 encoded because you cannot JSON encode binary data&lt;/p&gt;\n\n&lt;p&gt;In my &lt;code&gt;AJAX&lt;/code&gt; response I have a data structure that looks like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;{\n    &lt;span class=&quot;hljs-attr&quot;&gt;result&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;OK&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;download&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;mimetype&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;string&lt;/span&gt;(mimetype &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; the form &lt;span class=&quot;hljs-string&quot;&gt;&apos;major/minor&apos;&lt;/span&gt;),\n        &lt;span class=&quot;hljs-attr&quot;&gt;filename&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;string&lt;/span&gt;(the name &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; the file to download),\n        &lt;span class=&quot;hljs-attr&quot;&gt;data&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;base64&lt;/span&gt;(the binary data &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; base64 to download)\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;That means that I can do the following to save a file via AJAX&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Blob&lt;/span&gt; &amp;amp;&amp;amp; (&lt;span class=&quot;hljs-string&quot;&gt;&apos;download&apos;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; a) &amp;amp;&amp;amp; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;atob&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Do it the HTML5 compliant way&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; blob = &lt;span class=&quot;hljs-title function_&quot;&gt;base64ToBlob&lt;/span&gt;(result.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;data&lt;/span&gt;, result.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;mimetype&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n    a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = url;\n    a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = result.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;filename&lt;/span&gt;;\n    a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;revokeObjectURL&lt;/span&gt;(url);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The function base64ToBlob was taken from &lt;a href=&quot;https://stackoverflow.com/a/16245768&quot;&gt;here&lt;/a&gt; and must be used in compliance with this function &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;base64ToBlob&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;base64, mimetype, slicesize&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;atob&lt;/span&gt; || !&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Uint8Array&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// The current browser doesn&apos;t have the atob function. Cannot continue&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n    mimetype = mimetype || &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n    slicesize = slicesize || &lt;span class=&quot;hljs-number&quot;&gt;512&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bytechars = &lt;span class=&quot;hljs-title function_&quot;&gt;atob&lt;/span&gt;(base64);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bytearrays = [];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; offset = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; offset &amp;lt; bytechars.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; offset += slicesize) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; slice = bytechars.&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(offset, offset + slicesize);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bytenums = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;(slice.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; slice.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n            bytenums[i] = slice.&lt;span class=&quot;hljs-title function_&quot;&gt;charCodeAt&lt;/span&gt;(i);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bytearray = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Uint8Array&lt;/span&gt;(bytenums);\n        bytearrays[bytearrays.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;] = bytearray;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;(bytearrays, {&lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: mimetype});\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This is good if your server is dumping filedata to be saved. However, I&apos;ve not quite worked out how one would implement a HTML4 fallback&lt;/p&gt;\n    ","\n&lt;p&gt;The simple way to make the browser downloads a file is to make the request like that:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;downloadFile&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;urlToSend&lt;/span&gt;) {\n     &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; req = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;XMLHttpRequest&lt;/span&gt;();\n     req.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;GET&quot;&lt;/span&gt;, urlToSend, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n     req.&lt;span class=&quot;hljs-property&quot;&gt;responseType&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;blob&quot;&lt;/span&gt;;\n     req.&lt;span class=&quot;hljs-property&quot;&gt;onload&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;event&lt;/span&gt;) {\n         &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; blob = req.&lt;span class=&quot;hljs-property&quot;&gt;response&lt;/span&gt;;\n         &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; fileName = req.&lt;span class=&quot;hljs-title function_&quot;&gt;getResponseHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;fileName&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;//if you have the fileName header available&lt;/span&gt;\n         &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; link=&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n         link.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n         link.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt;=fileName;\n         link.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n     };\n\n     req.&lt;span class=&quot;hljs-title function_&quot;&gt;send&lt;/span&gt;();\n }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This opens the browser download pop up.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;1. Framework agnostic: Servlet downloading file as attachment&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;!-- &lt;span class=&quot;hljs-keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;JS&lt;/span&gt; --&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;javascript:window.location=&apos;downloadServlet?param1=value1&apos;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    download\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&amp;lt;!-- without &lt;span class=&quot;hljs-variable constant_&quot;&gt;JS&lt;/span&gt; --&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadServlet?param1=value1&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;download&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;2. Struts2 Framework: Action downloading file as attachment&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;!-- &lt;span class=&quot;hljs-keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;JS&lt;/span&gt; --&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;javascript:window.location=&apos;downloadAction.action?param1=value1&apos;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    download\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&amp;lt;!-- without &lt;span class=&quot;hljs-variable constant_&quot;&gt;JS&lt;/span&gt; --&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadAction.action?param1=value1&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;download&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It would be better to use &lt;code&gt;&amp;lt;s:a&amp;gt;&lt;/code&gt; tag pointing with &lt;em&gt;OGNL&lt;/em&gt; to an &lt;em&gt;URL&lt;/em&gt; created with &lt;code&gt;&amp;lt;s:url&amp;gt;&lt;/code&gt; tag:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;!-- without &lt;span class=&quot;hljs-variable constant_&quot;&gt;JS&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Struts&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;tags&lt;/span&gt;: &lt;span class=&quot;hljs-variable constant_&quot;&gt;THE&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;RIGHT&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;WAY&lt;/span&gt; --&amp;gt;    \n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;s:url&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadAction.action&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;var&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;url&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;s:param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;param1&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;value1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;s:param&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;s:ulr&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;s:a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;%{url}&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;download&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;s:a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;In the above cases, you &lt;strong&gt;need&lt;/strong&gt; to write the &lt;em&gt;Content-Disposition&lt;/em&gt; header to the &lt;em&gt;response&lt;/em&gt;, specifying that the file needs to be downloaded (&lt;code&gt;attachment&lt;/code&gt;) and not opened by the browser (&lt;code&gt;inline&lt;/code&gt;). You &lt;strong&gt;need&lt;/strong&gt; to specify the &lt;em&gt;Content Type&lt;/em&gt; too, and you may want to add the file name and length (to help the browser drawing a realistic progressbar). &lt;/p&gt;\n\n&lt;p&gt;For example, when downloading a ZIP:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;response.&lt;span class=&quot;hljs-title function_&quot;&gt;setContentType&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;application/zip&quot;&lt;/span&gt;);\nresponse.&lt;span class=&quot;hljs-title function_&quot;&gt;addHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Disposition&quot;&lt;/span&gt;, \n                   &lt;span class=&quot;hljs-string&quot;&gt;&quot;attachment; filename=\\&quot;name of my file.zip\\&quot;&quot;&lt;/span&gt;);\nresponse.&lt;span class=&quot;hljs-title function_&quot;&gt;setHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Length&quot;&lt;/span&gt;, myFile.&lt;span class=&quot;hljs-title function_&quot;&gt;length&lt;/span&gt;()); &lt;span class=&quot;hljs-comment&quot;&gt;// or myByte[].length...&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;With Struts2 (unless you are using the Action as a Servlet, an hack &lt;a href=&quot;https://stackoverflow.com/a/16654313/1654265&quot;&gt;for direct streaming&lt;/a&gt;, for example), you don&apos;t need to directly write anything to the response; simply using the &lt;a href=&quot;http://struts.apache.org/release/2.3.x/struts2-core/apidocs/org/apache/struts2/dispatcher/StreamResult.html&quot; rel=&quot;noreferrer&quot;&gt;Stream result type&lt;/a&gt; and configuring it in struts.xml will work: &lt;a href=&quot;http://www.mkyong.com/struts2/struts-2-download-file-example/&quot; rel=&quot;noreferrer&quot;&gt;EXAMPLE&lt;/a&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;result name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;success&quot;&lt;/span&gt; type=&lt;span class=&quot;hljs-string&quot;&gt;&quot;stream&quot;&lt;/span&gt;&amp;gt;\n   &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentType&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;application/zip&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n   &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentDisposition&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;attachment;filename=&quot;${fileName}&quot;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n   &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentLength&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${fileLength}&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&amp;lt;/result&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;3. Framework agnostic (/ Struts2 framework): Servlet(/Action) opening file inside the browser&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;If you want to open the file inside the browser, instead of downloading it, the &lt;em&gt;Content-disposition&lt;/em&gt; must be set to &lt;em&gt;inline&lt;/em&gt;, but the target can&apos;t be the current window location; you must target a new window created by javascript, an &lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt; in the page, or a new window created on-the-fly with the &quot;discussed&quot; target=&quot;_blank&quot;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;!-- &lt;span class=&quot;hljs-title class_&quot;&gt;From&lt;/span&gt; a parent page into an &lt;span class=&quot;hljs-title class_&quot;&gt;IFrame&lt;/span&gt; without javascript --&amp;gt;   \n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadServlet?param1=value1&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;iFrameName&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    download\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&amp;lt;!-- &lt;span class=&quot;hljs-title class_&quot;&gt;In&lt;/span&gt; a &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt; without javascript --&amp;gt; \n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadServlet?param1=value1&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;_blank&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    download\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&amp;lt;!-- &lt;span class=&quot;hljs-title class_&quot;&gt;In&lt;/span&gt; a &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;with&lt;/span&gt; javascript --&amp;gt;    \n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;javascript:window.open(&apos;downloadServlet?param1=value1&apos;);&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;\n    download\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I have created little function as workaround solution (inspired by @JohnCulviner plugin):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// creates iframe and form in it with hidden field,&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// then submit form with provided data&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// url - form url&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// data - data to form field&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// input_name - form hidden input name&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ajax_download&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;url, data, input_name&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; $iframe,\n        iframe_doc,\n        iframe_html;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (($iframe = $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#download_iframe&apos;&lt;/span&gt;)).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n        $iframe = $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;iframe id=&apos;download_iframe&apos;&quot;&lt;/span&gt; +\n                    &lt;span class=&quot;hljs-string&quot;&gt;&quot; style=&apos;display: none&apos; src=&apos;about:blank&apos;&amp;gt;&amp;lt;/iframe&amp;gt;&quot;&lt;/span&gt;\n                   ).&lt;span class=&quot;hljs-title function_&quot;&gt;appendTo&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;body&quot;&lt;/span&gt;);\n    }\n\n    iframe_doc = $iframe[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;contentWindow&lt;/span&gt; || $iframe[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;contentDocument&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (iframe_doc.&lt;span class=&quot;hljs-property&quot;&gt;document&lt;/span&gt;) {\n        iframe_doc = iframe_doc.&lt;span class=&quot;hljs-property&quot;&gt;document&lt;/span&gt;;\n    }\n\n    iframe_html = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;form method=&apos;POST&apos; action=&apos;&quot;&lt;/span&gt; +\n                  url +&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&amp;gt;&quot;&lt;/span&gt; +\n                  &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;input type=hidden name=&apos;&quot;&lt;/span&gt; + input_name + &lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos; value=&apos;&quot;&lt;/span&gt; +\n                  &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(data) +&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;/&amp;gt;&amp;lt;/form&amp;gt;&quot;&lt;/span&gt; +\n                  &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&quot;&lt;/span&gt;;\n\n    iframe_doc.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;();\n    iframe_doc.&lt;span class=&quot;hljs-title function_&quot;&gt;write&lt;/span&gt;(iframe_html);\n    $(iframe_doc).&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;form&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;submit&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Demo with click event:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#someid&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;click&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-title function_&quot;&gt;ajax_download&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/download.action&apos;&lt;/span&gt;, {&lt;span class=&quot;hljs-string&quot;&gt;&apos;para1&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;para2&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;}, &lt;span class=&quot;hljs-string&quot;&gt;&apos;dataname&apos;&lt;/span&gt;);\n});\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I faced the same issue and successfully solved it. My use-case is this.&lt;/p&gt;\n\n&lt;p&gt;&quot;&lt;i&gt;Post JSON data to the server and receive an excel file.\nThat excel file is created by the server and returned as a response to the client. Download that response as a file with custom name in browser&lt;/i&gt;&quot;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&quot;#my-button&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;click&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Data to post&lt;/span&gt;\ndata = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;ids&lt;/span&gt;: [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]\n};\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Use XMLHttpRequest instead of Jquery $ajax&lt;/span&gt;\nxhttp = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;XMLHttpRequest&lt;/span&gt;();\nxhttp.&lt;span class=&quot;hljs-property&quot;&gt;onreadystatechange&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; a;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (xhttp.&lt;span class=&quot;hljs-property&quot;&gt;readyState&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &amp;amp;&amp;amp; xhttp.&lt;span class=&quot;hljs-property&quot;&gt;status&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;200&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Trick for making downloadable link&lt;/span&gt;\n        a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n        a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(xhttp.&lt;span class=&quot;hljs-property&quot;&gt;response&lt;/span&gt;);\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Give filename you wish to download&lt;/span&gt;\n        a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;test-file.xls&quot;&lt;/span&gt;;\n        a.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(a);\n        a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n    }\n};\n&lt;span class=&quot;hljs-comment&quot;&gt;// Post data to URL which handles post request&lt;/span&gt;\nxhttp.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;POST&quot;&lt;/span&gt;, excelDownloadUrl);\nxhttp.&lt;span class=&quot;hljs-title function_&quot;&gt;setRequestHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/json&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-comment&quot;&gt;// You should set responseType as blob for binary responses&lt;/span&gt;\nxhttp.&lt;span class=&quot;hljs-property&quot;&gt;responseType&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;blob&apos;&lt;/span&gt;;\nxhttp.&lt;span class=&quot;hljs-title function_&quot;&gt;send&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(data));\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The above snippet is just doing following&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Posting an array as JSON to the server using XMLHttpRequest.&lt;/li&gt;\n&lt;li&gt;After fetching content as a blob(binary), we are creating a downloadable URL and attaching it to invisible &quot;a&quot; link then clicking it. I did a POST request here. Instead, you can go for a simple GET too. We cannot download the file through Ajax, must use XMLHttpRequest.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Here we need to carefully set few things on the server side. I set few headers in Python Django HttpResponse. You need to set them accordingly if you use other programming languages.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;# &lt;span class=&quot;hljs-title class_&quot;&gt;In&lt;/span&gt; python django code\nresponse = &lt;span class=&quot;hljs-title class_&quot;&gt;HttpResponse&lt;/span&gt;(file_content, content_type=&lt;span class=&quot;hljs-string&quot;&gt;&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Since I download xls(excel) here, I adjusted contentType to above one. You need to set it according to your file type. You can use this technique to download any kind of files.&lt;/p&gt;\n    ","\n&lt;p&gt;Ok, based on ndpu&apos;s code heres an improved (I think) version of ajax_download;-&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ajax_download&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;url, data&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; $iframe,\n        iframe_doc,\n        iframe_html;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (($iframe = $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#download_iframe&apos;&lt;/span&gt;)).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n        $iframe = $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;iframe id=&apos;download_iframe&apos;&quot;&lt;/span&gt; +\n                    &lt;span class=&quot;hljs-string&quot;&gt;&quot; style=&apos;display: none&apos; src=&apos;about:blank&apos;&amp;gt;&amp;lt;/iframe&amp;gt;&quot;&lt;/span&gt;\n                   ).&lt;span class=&quot;hljs-title function_&quot;&gt;appendTo&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;body&quot;&lt;/span&gt;);\n    }\n\n    iframe_doc = $iframe[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;contentWindow&lt;/span&gt; || $iframe[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;contentDocument&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (iframe_doc.&lt;span class=&quot;hljs-property&quot;&gt;document&lt;/span&gt;) {\n        iframe_doc = iframe_doc.&lt;span class=&quot;hljs-property&quot;&gt;document&lt;/span&gt;;\n    }\n\n    iframe_html = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;form method=&apos;POST&apos; action=&apos;&quot;&lt;/span&gt; +\n                  url +&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&amp;gt;&quot;&lt;/span&gt; \n\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(data).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;){\n        iframe_html += &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;input type=&apos;hidden&apos; name=&apos;&quot;&lt;/span&gt;+key+&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos; value=&apos;&quot;&lt;/span&gt;+data[key]+&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&amp;gt;&quot;&lt;/span&gt;;\n\n    });\n\n        iframe_html +=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;/form&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&quot;&lt;/span&gt;;\n\n    iframe_doc.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;();\n    iframe_doc.&lt;span class=&quot;hljs-title function_&quot;&gt;write&lt;/span&gt;(iframe_html);\n    $(iframe_doc).&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;form&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;submit&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Use this like this;-&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#someid&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;click&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-title function_&quot;&gt;ajax_download&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/download.action&apos;&lt;/span&gt;, {&lt;span class=&quot;hljs-string&quot;&gt;&apos;para1&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;para2&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;});\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The params are sent as proper post params as if coming from an input rather than as a json encoded string as per the previous example.&lt;/p&gt;\n\n&lt;p&gt;CAVEAT: Be wary about the potential for variable injection on those forms. There might be a safer way to encode those variables. Alternatively contemplate escaping them.&lt;/p&gt;\n    ","\n&lt;p&gt;Here is what I did, pure javascript and html. Did not test it but this should work in all browsers.&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Javascript Function&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; iframe = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;iframe&apos;&lt;/span&gt;);\niframe.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;IFRAMEID&quot;&lt;/span&gt;;\niframe.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(iframe);\niframe.&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;SERVERURL&apos;&lt;/span&gt;+&lt;span class=&quot;hljs-string&quot;&gt;&apos;?&apos;&lt;/span&gt; + $.&lt;span class=&quot;hljs-title function_&quot;&gt;param&lt;/span&gt;($scope.&lt;span class=&quot;hljs-property&quot;&gt;filtro&lt;/span&gt;);\niframe.&lt;span class=&quot;hljs-title function_&quot;&gt;addEventListener&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;load&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n     &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;FILE LOAD DONE.. Download should start now&quot;&lt;/span&gt;);\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Using just components that is supported in all browsers no additional\n  libraries.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;&lt;img src=&quot;https://i.stack.imgur.com/JghC5.png&quot; alt=&quot;enter image description here&quot;&gt;\n&lt;img src=&quot;https://i.stack.imgur.com/wNPAx.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Here is my server side JAVA Spring controller code.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;@&lt;span class=&quot;hljs-title class_&quot;&gt;RequestMapping&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/rootto/my/xlsx&quot;&lt;/span&gt;, method = &lt;span class=&quot;hljs-title class_&quot;&gt;RequestMethod&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;GET&lt;/span&gt;)\npublic &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;downloadExcelFile&lt;/span&gt;(@&lt;span class=&quot;hljs-title class_&quot;&gt;RequestParam&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;param1&quot;&lt;/span&gt;, required = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;) &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt; param1,\n    &lt;span class=&quot;hljs-title class_&quot;&gt;HttpServletRequest&lt;/span&gt; request, &lt;span class=&quot;hljs-title class_&quot;&gt;HttpServletResponse&lt;/span&gt; response)\n            throws &lt;span class=&quot;hljs-title class_&quot;&gt;ParseException&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Workbook&lt;/span&gt; wb = service.&lt;span class=&quot;hljs-title function_&quot;&gt;getWorkbook&lt;/span&gt;(param1);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (wb != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n            &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt; fileName = &lt;span class=&quot;hljs-string&quot;&gt;&quot;myfile_&quot;&lt;/span&gt; + sdf.&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;());\n            response.&lt;span class=&quot;hljs-title function_&quot;&gt;setContentType&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;&lt;/span&gt;);\n            response.&lt;span class=&quot;hljs-title function_&quot;&gt;setHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-disposition&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;attachment; filename=\\&quot;&quot;&lt;/span&gt; + fileName + &lt;span class=&quot;hljs-string&quot;&gt;&quot;.xlsx\\&quot;&quot;&lt;/span&gt;);\n            wb.&lt;span class=&quot;hljs-title function_&quot;&gt;write&lt;/span&gt;(response.&lt;span class=&quot;hljs-title function_&quot;&gt;getOutputStream&lt;/span&gt;());\n            response.&lt;span class=&quot;hljs-title function_&quot;&gt;getOutputStream&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;close&lt;/span&gt;();\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;hljs-title class_&quot;&gt;IOException&lt;/span&gt; e) {\n            e.&lt;span class=&quot;hljs-title function_&quot;&gt;printStackTrace&lt;/span&gt;();\n        }\n    }\n    }\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;My approach is completly based on jQuery. The problem for me was that it has to be a POST-HTTP call. And I wanted it to be done by jQuery alone.&lt;/p&gt;\n&lt;p&gt;The solution:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n    &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;POST&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;/some/webpage&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;headers&lt;/span&gt;: {&lt;span class=&quot;hljs-string&quot;&gt;&apos;X-CSRF-TOKEN&apos;&lt;/span&gt;: csrfToken},\n    &lt;span class=&quot;hljs-attr&quot;&gt;data&lt;/span&gt;: additionalDataToSend,\n    &lt;span class=&quot;hljs-attr&quot;&gt;dataType&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;success&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;result&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; blob = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;([result], { &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/octetstream&quot;&lt;/span&gt; }); \n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n        a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n        a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;test.xml&quot;&lt;/span&gt;;;\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(a);\n        a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;removeChild&lt;/span&gt;(a);\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;revokeObjectURL&lt;/span&gt;(a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt;);\n                        \n        ...\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;error&lt;/span&gt;: errorDialog\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Explanation:&lt;/p&gt;\n&lt;p&gt;What I and many others do is to create a link on the webpage, indicating that the target should be downloaded and putting the result of the http-request as the target. After that I append the link to the document than simply &lt;em&gt;clicking&lt;/em&gt; the link and removing the link afterwards. You don&apos;t need an iframe anymore.&lt;/p&gt;\n&lt;p&gt;The magic lies in the lines&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; blob = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;([result], { &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/octetstream&quot;&lt;/span&gt; }); \na.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The interesting point is that this solution is only working with a &quot;&lt;em&gt;blob&lt;/em&gt;&quot;. As you can see in other answers, some are simply using a blob but not explaining why and how to create it.\nAs you can read e.g. in the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL&quot; rel=&quot;noreferrer&quot;&gt;Mozilla developer documentation&lt;/a&gt; you need a file, media ressource or blob for the function &quot;&lt;em&gt;createObjectURL()&lt;/em&gt;&quot; to work. The problem is that your http-response might not be any of those.\nTherefore the first thing you must do is to convert your response to a blob. This is what the first line does. Then you can use the &quot;&lt;em&gt;createObjectURL&lt;/em&gt;&quot; with your newly created blob.\nIf you than click the link your browser will open a file-save dialog and you can save your data. Obviously it s possible that you cannot define a fixed filename for your file to download. Then you must make your response more complex like in the answer from Luke.&lt;/p&gt;\n&lt;p&gt;And don&apos;t forget to free up the memory especially when you are working with large files. For more examples and information you can look at &lt;a href=&quot;https://javascript.info/blob&quot; rel=&quot;noreferrer&quot;&gt;the details of the JS blob object&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;How to DOWNLOAD a file after receiving it by AJAX&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Its convenient when the file is created for a long time and you need to show PRELOADER&lt;/p&gt;\n\n&lt;p&gt;Example when submitting a web form:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;script&amp;gt;\n$(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;form&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;submit&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#loader&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;show&lt;/span&gt;();\n        $.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n            &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: $(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;action&apos;&lt;/span&gt;),\n            &lt;span class=&quot;hljs-attr&quot;&gt;data&lt;/span&gt;: $(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;serialize&lt;/span&gt;(),\n            &lt;span class=&quot;hljs-attr&quot;&gt;dataType&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;binary&apos;&lt;/span&gt;,\n            &lt;span class=&quot;hljs-attr&quot;&gt;xhrFields&lt;/span&gt;: {\n                &lt;span class=&quot;hljs-string&quot;&gt;&apos;responseType&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;blob&apos;&lt;/span&gt;\n            },\n            &lt;span class=&quot;hljs-attr&quot;&gt;success&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data, status, xhr&lt;/span&gt;) {\n                $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#loader&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;hide&lt;/span&gt;();\n                &lt;span class=&quot;hljs-comment&quot;&gt;// if(data.type.indexOf(&apos;text/html&apos;) != -1){//If instead of a file you get an error page&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     var reader = new FileReader();&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     reader.readAsText(data);&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     reader.onload = function() {alert(reader.result);};&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     return;&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// }&lt;/span&gt;\n                &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; link = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;),\n                    filename = &lt;span class=&quot;hljs-string&quot;&gt;&apos;file.xlsx&apos;&lt;/span&gt;;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// if(xhr.getResponseHeader(&apos;Content-Disposition&apos;)){//filename &lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     filename = xhr.getResponseHeader(&apos;Content-Disposition&apos;);&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     filename=filename.match(/filename=&quot;(.*?)&quot;/)[1];&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     filename=decodeURIComponent(escape(filename));&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// }&lt;/span&gt;\n                link.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = &lt;span class=&quot;hljs-variable constant_&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(data);\n                link.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = filename;\n                link.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n            }\n        });\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n    });\n});\n&amp;lt;/script&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Optional functional is commented out to simplify the example.&lt;/p&gt;\n\n&lt;p&gt;No need to create temporary files on the server.&lt;/p&gt;\n\n&lt;p&gt;On jQuery v2.2.4 OK. There will be an error on the old version:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Uncaught&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DOMException&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Failed&lt;/span&gt; to read the &lt;span class=&quot;hljs-string&quot;&gt;&apos;responseText&apos;&lt;/span&gt; property &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;XMLHttpRequest&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;The&lt;/span&gt; value is only accessible &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; the object&lt;span class=&quot;hljs-string&quot;&gt;&apos;s &apos;&lt;/span&gt;responseType&lt;span class=&quot;hljs-string&quot;&gt;&apos; is &apos;&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos; or &apos;&lt;/span&gt;text&lt;span class=&quot;hljs-string&quot;&gt;&apos; (was &apos;&lt;/span&gt;blob&lt;span class=&quot;hljs-string&quot;&gt;&apos;).\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;downloadURI&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;uri, name&lt;/span&gt;) \n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; link = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;);\n    link.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = name;\n    link.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = uri;\n    link.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I try to download a CSV file and then do something after download has finished. So I need to implement an appropriate &lt;code&gt;callback&lt;/code&gt; function.&lt;/p&gt;\n\n&lt;p&gt;Using &lt;code&gt;window.location=&quot;...&quot;&lt;/code&gt; is not a good idea because I cannot operate the program after finishing download.  Something like this, change header so it is not a good idea.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;fetch&lt;/code&gt; is a good alternative however &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API&quot; rel=&quot;noreferrer&quot;&gt;it cannot support IE 11&lt;/a&gt;. And &lt;code&gt;window.URL.createObjectURL&lt;/code&gt; cannot support IE 11.You can refer &lt;a href=&quot;https://stackoverflow.com/questions/24007073/open-links-made-by-createobjecturl-in-ie11&quot;&gt;this&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;This is my code, it is similar to the code of Shahrukh Alam. But you should take care that &lt;code&gt;window.URL.createObjectURL&lt;/code&gt; maybe create memory leaks. You can refer &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL&quot; rel=&quot;noreferrer&quot;&gt;this&lt;/a&gt;. When response has arrived, data will be stored into memory of browser. So before you click &lt;code&gt;a&lt;/code&gt; link, the file has been downloaded. It means that you can do anything after download.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n    &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;your download url&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;GET&apos;&lt;/span&gt;,\n}).&lt;span class=&quot;hljs-title function_&quot;&gt;done&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;data, textStatus, request&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// csv =&amp;gt; Blob&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; blob = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;([data]);\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// the file name from server.&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; fileName = request.&lt;span class=&quot;hljs-title function_&quot;&gt;getResponseHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;fileName&apos;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;navigator&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;navigator&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;msSaveOrOpenBlob&lt;/span&gt;) { &lt;span class=&quot;hljs-comment&quot;&gt;// for IE&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;navigator&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;msSaveOrOpenBlob&lt;/span&gt;(blob, fileName);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; { &lt;span class=&quot;hljs-comment&quot;&gt;// for others&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n    a.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n    a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = url;\n    a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = fileName;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(a);\n    a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;revokeObjectURL&lt;/span&gt;(url);\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Do something after download &lt;/span&gt;\n    ...\n\n    }\n}).&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(after_download)\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Adding some more things to  above answer for downloading a file&lt;/p&gt;\n\n&lt;p&gt;Below is some java spring code which generates byte Array&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;@&lt;span class=&quot;hljs-title class_&quot;&gt;RequestMapping&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/downloadReport&quot;&lt;/span&gt;, method = { &lt;span class=&quot;hljs-title class_&quot;&gt;RequestMethod&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;POST&lt;/span&gt; })\n    public &lt;span class=&quot;hljs-title class_&quot;&gt;ResponseEntity&lt;/span&gt;&amp;lt;byte[]&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;downloadReport&lt;/span&gt;(\n            @&lt;span class=&quot;hljs-title class_&quot;&gt;RequestBody&lt;/span&gt; final &lt;span class=&quot;hljs-title class_&quot;&gt;SomeObejct&lt;/span&gt; obj, &lt;span class=&quot;hljs-title class_&quot;&gt;HttpServletResponse&lt;/span&gt; response) throws &lt;span class=&quot;hljs-title class_&quot;&gt;Exception&lt;/span&gt; {\n\n        &lt;span class=&quot;hljs-title class_&quot;&gt;OutputStream&lt;/span&gt; out = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ByteArrayOutputStream&lt;/span&gt;();\n        &lt;span class=&quot;hljs-comment&quot;&gt;// write something to output stream&lt;/span&gt;\n        &lt;span class=&quot;hljs-title class_&quot;&gt;HttpHeaders&lt;/span&gt; respHeaders = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpHeaders&lt;/span&gt;();\n        respHeaders.&lt;span class=&quot;hljs-title function_&quot;&gt;setContentType&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;MediaType&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;APPLICATION_OCTET_STREAM&lt;/span&gt;);\n        respHeaders.&lt;span class=&quot;hljs-title function_&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;X-File-Name&quot;&lt;/span&gt;, name);\n        &lt;span class=&quot;hljs-title class_&quot;&gt;ByteArrayOutputStream&lt;/span&gt; bos = (&lt;span class=&quot;hljs-title class_&quot;&gt;ByteArrayOutputStream&lt;/span&gt;) out;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ResponseEntity&lt;/span&gt;&amp;lt;byte[]&amp;gt;(bos.&lt;span class=&quot;hljs-title function_&quot;&gt;toByteArray&lt;/span&gt;(), respHeaders, &lt;span class=&quot;hljs-title class_&quot;&gt;HttpStatus&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;CREATED&lt;/span&gt;);\n    }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Now in  javascript code using FileSaver.js ,can download a file with below code &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; json=angular.&lt;span class=&quot;hljs-title function_&quot;&gt;toJson&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;somejsobject&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; url=apiEndPoint+&lt;span class=&quot;hljs-string&quot;&gt;&apos;some url&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; xhr = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;XMLHttpRequest&lt;/span&gt;();\n&lt;span class=&quot;hljs-comment&quot;&gt;//headers(&apos;X-File-Name&apos;)&lt;/span&gt;\nxhr.&lt;span class=&quot;hljs-property&quot;&gt;onreadystatechange&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;readyState&lt;/span&gt; == &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;status&lt;/span&gt; == &lt;span class=&quot;hljs-number&quot;&gt;201&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; res = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;response&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; fileName=&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getResponseHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;X-File-Name&apos;&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;([res]);\n        &lt;span class=&quot;hljs-title function_&quot;&gt;saveAs&lt;/span&gt;(data, fileName); &lt;span class=&quot;hljs-comment&quot;&gt;//this from FileSaver.js&lt;/span&gt;\n    }\n}    \nxhr.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;POST&apos;&lt;/span&gt;, url);\nxhr.&lt;span class=&quot;hljs-title function_&quot;&gt;setRequestHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Authorization&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;Bearer &apos;&lt;/span&gt; + token);\nxhr.&lt;span class=&quot;hljs-title function_&quot;&gt;setRequestHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Content-Type&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;application/json&apos;&lt;/span&gt;);\nxhr.&lt;span class=&quot;hljs-property&quot;&gt;responseType&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;arraybuffer&apos;&lt;/span&gt;;\nxhr.&lt;span class=&quot;hljs-title function_&quot;&gt;send&lt;/span&gt;(json);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The above will download file &lt;/p&gt;\n    ","\n&lt;p&gt;In Rails, I do it this way: &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;download_file&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;file_id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; url       = &lt;span class=&quot;hljs-string&quot;&gt;&apos;/files/&apos;&lt;/span&gt; + file_id + &lt;span class=&quot;hljs-string&quot;&gt;&apos;/download_file&apos;&lt;/span&gt;;\n    $.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n    &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;GET&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: url,\n    &lt;span class=&quot;hljs-attr&quot;&gt;processData&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;success&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;) {\n       &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;location&lt;/span&gt; = url;\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;error&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;xhr&lt;/span&gt;) {\n     &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos; Error:  &amp;gt;&amp;gt;&amp;gt;&amp;gt; &apos;&lt;/span&gt; + &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(xhr));\n    }\n   });\n }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The trick is the &lt;em&gt;window.location&lt;/em&gt; part. The controller&apos;s method looks like:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;# &lt;span class=&quot;hljs-variable constant_&quot;&gt;GET&lt;/span&gt; /files/{:id}/download_file/\ndef download_file\n    &lt;span class=&quot;hljs-title function_&quot;&gt;send_file&lt;/span&gt;(@file.&lt;span class=&quot;hljs-property&quot;&gt;file&lt;/span&gt;,\n          :&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;disposition&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;attachment&apos;&lt;/span&gt;,\n          :&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;url_based_filename&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;)\nend\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Use &lt;code&gt;window.open&lt;/code&gt; &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Window/open&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/API/Window/open&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;For example, you can put this line of code in a click handler:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/file.txt&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;_blank&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It will open a new tab (because of the &apos;_blank&apos; window-name) and that tab will open the URL.&lt;/p&gt;\n\n&lt;p&gt;Your server-side code should also have something like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;res.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Content-Disposition&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;attachment; filename=file.txt&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And that way, the browser should prompt the user to save the file to disk, instead of just showing them the file. It will also automatically close the tab that it just opened.&lt;/p&gt;\n    ","\n&lt;p&gt;The HTML Code :&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;button type=&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt; id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;GetFile&quot;&lt;/span&gt;&amp;gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Get&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;!&amp;lt;/button&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The jQuery Code :&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#GetFile&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;click&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    $.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n        &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;https://s3-us-west-2.amazonaws.com/s.cdpn.io/172905/test.pdf&apos;&lt;/span&gt;,\n        &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;GET&apos;&lt;/span&gt;,\n        &lt;span class=&quot;hljs-attr&quot;&gt;xhrFields&lt;/span&gt;: {\n            &lt;span class=&quot;hljs-attr&quot;&gt;responseType&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;blob&apos;&lt;/span&gt;\n        },\n        &lt;span class=&quot;hljs-attr&quot;&gt;success&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(data);\n            a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = url;\n            a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;myfile.pdf&apos;&lt;/span&gt;;\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;append&lt;/span&gt;(a);\n            a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n            a.&lt;span class=&quot;hljs-title function_&quot;&gt;remove&lt;/span&gt;();\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;revokeObjectURL&lt;/span&gt;(url);\n        }\n    });\n});\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Ok so here is the working code when Using MVC and you are getting your file from a controller&lt;/p&gt;\n\n&lt;p&gt;lets say you have your byte array declare and populate,  the only thing you need to do is to use the File function (using System.Web.Mvc)&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;byte[] bytes = .... insert your bytes &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; the array\n&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(bytes, &lt;span class=&quot;hljs-title class_&quot;&gt;System&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Net&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Mime&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;MediaTypeNames&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Application&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Octet&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;nameoffile.exe&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and then,  in the same controller,  add thoses 2 functions&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;protected override &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;OnResultExecuting&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;ResultExecutingContext&lt;/span&gt; context)\n    {\n        &lt;span class=&quot;hljs-title class_&quot;&gt;CheckAndHandleFileResult&lt;/span&gt;(context);\n\n        base.&lt;span class=&quot;hljs-title class_&quot;&gt;OnResultExecuting&lt;/span&gt;(context);\n    }\n\n    private &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; string &lt;span class=&quot;hljs-variable constant_&quot;&gt;FILE_DOWNLOAD_COOKIE_NAME&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;fileDownload&quot;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;/// If the current response is a FileResult (an MVC base class for files) then write a&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;/// cookie to inform jquery.fileDownload that a successful file download has occured&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;/// &amp;lt;param name=&quot;context&quot;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;\n    private &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;CheckAndHandleFileResult&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;ResultExecutingContext&lt;/span&gt; context)\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (context.&lt;span class=&quot;hljs-property&quot;&gt;Result&lt;/span&gt; is &lt;span class=&quot;hljs-title class_&quot;&gt;FileResult&lt;/span&gt;)\n            &lt;span class=&quot;hljs-comment&quot;&gt;//jquery.fileDownload uses this cookie to determine that a file download has completed successfully&lt;/span&gt;\n            &lt;span class=&quot;hljs-title class_&quot;&gt;Response&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;SetCookie&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpCookie&lt;/span&gt;(&lt;span class=&quot;hljs-variable constant_&quot;&gt;FILE_DOWNLOAD_COOKIE_NAME&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;) { &lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/&quot;&lt;/span&gt; });\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//ensure that the cookie is removed in case someone did a file download without using jquery.fileDownload&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title class_&quot;&gt;Request&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Cookies&lt;/span&gt;[&lt;span class=&quot;hljs-variable constant_&quot;&gt;FILE_DOWNLOAD_COOKIE_NAME&lt;/span&gt;] != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;)\n                &lt;span class=&quot;hljs-title class_&quot;&gt;Response&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Cookies&lt;/span&gt;[&lt;span class=&quot;hljs-variable constant_&quot;&gt;FILE_DOWNLOAD_COOKIE_NAME&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;Expires&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;DateTime&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Now&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;AddYears&lt;/span&gt;(-&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n    }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and then you will be able to call your controller to download and get the &quot;success&quot; or &quot;failure&quot; callback&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$.&lt;span class=&quot;hljs-title function_&quot;&gt;fileDownload&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;mvcUrl&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;name of the controller&apos;&lt;/span&gt;), {\n            &lt;span class=&quot;hljs-attr&quot;&gt;httpMethod&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;POST&apos;&lt;/span&gt;,\n            &lt;span class=&quot;hljs-attr&quot;&gt;successCallback&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;url&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-comment&quot;&gt;//insert success code&lt;/span&gt;\n\n            },\n            &lt;span class=&quot;hljs-attr&quot;&gt;failCallback&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;html, url&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-comment&quot;&gt;//insert fail code&lt;/span&gt;\n            }\n        });\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I found a fix that while it&apos;s not actually using ajax it does allow you to use a javascript call to request the download and then get a callback when the download actually starts.  I found this helpful if the link runs a server side script that takes a little bit to compose the file before sending it. so you can alert them that it&apos;s processing, and then when it does finally send the file remove that processing notification. which is why I wanted to try to load the file via ajax to begin with so that I could have an event happen when the file is requested and another when it actually starts downloading.&lt;/p&gt;\n\n&lt;p&gt;the js on the front page&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;expdone&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;exportdiv&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;expgo&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)\n{\n   &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;exportdiv&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;block&apos;&lt;/span&gt;;\n   &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;exportif&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;test2.php?arguments=data&apos;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;the iframe&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;div id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;exportdiv&quot;&lt;/span&gt; style=&lt;span class=&quot;hljs-string&quot;&gt;&quot;display:none;&quot;&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;loader.gif&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;Generating Report&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;exportif&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;width: 1px;height: 1px; border:0px;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;then the other file:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;!&lt;span class=&quot;hljs-variable constant_&quot;&gt;DOCTYPE&lt;/span&gt; html&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;expdone&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;parent&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;expdone&lt;/span&gt;();\n}\n&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;exportif&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;?php echo &quot;&lt;/span&gt;&lt;span class=&quot;hljs-attr&quot;&gt;http:&lt;/span&gt;//&lt;span class=&quot;hljs-attr&quot;&gt;10.192.37.211&lt;/span&gt;/&lt;span class=&quot;hljs-attr&quot;&gt;npdtracker&lt;/span&gt;/&lt;span class=&quot;hljs-attr&quot;&gt;exportthismonth.php&lt;/span&gt;?&lt;span class=&quot;hljs-attr&quot;&gt;arguments&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;.$_GET[&quot;&lt;/span&gt;&lt;span class=&quot;hljs-attr&quot;&gt;arguments&lt;/span&gt;&quot;]; ?&amp;gt;&lt;/span&gt;&quot;&amp;gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;exportif&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;onload&lt;/span&gt;= expdone;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I think there&apos;s a way to read get data using js so then no php would be needed. but I don&apos;t know it off hand and the server I&apos;m using supports php so this works for me.  thought I&apos;d share it in case it helps anyone.&lt;/p&gt;\n    ","\n&lt;p&gt;If the server is writing the file back in the response (including cookies if\nyou use them to determine whether the file download started), Simply create a form with the values and submit it:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ajaxPostDownload&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;url, data&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; $form;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (($form = $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#download_form&apos;&lt;/span&gt;)).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n        $form = $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;form id=&apos;download_form&apos;&quot;&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot; style=&apos;display: none; width: 1px; height: 1px; position: absolute; top: -10000px&apos; method=&apos;POST&apos; action=&apos;&quot;&lt;/span&gt; + url + &lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&amp;gt;&amp;lt;/form&amp;gt;&quot;&lt;/span&gt;);\n        $form.&lt;span class=&quot;hljs-title function_&quot;&gt;appendTo&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;body&quot;&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Clear the form fields&lt;/span&gt;\n    $form.&lt;span class=&quot;hljs-title function_&quot;&gt;html&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Create new form fields&lt;/span&gt;\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(data).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) {\n        $form.&lt;span class=&quot;hljs-title function_&quot;&gt;append&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;input type=&apos;hidden&apos; name=&apos;&quot;&lt;/span&gt; + key + &lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos; value=&apos;&quot;&lt;/span&gt; + data[key] + &lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&amp;gt;&quot;&lt;/span&gt;);\n    });\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Submit the form post&lt;/span&gt;\n    $form.&lt;span class=&quot;hljs-title function_&quot;&gt;submit&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Usage:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;ajaxPostDownload&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/fileController/ExportFile&apos;&lt;/span&gt;, {\n    &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadToken&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;newDownloadToken&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Name&lt;/span&gt;: $txtName.&lt;span class=&quot;hljs-title function_&quot;&gt;val&lt;/span&gt;(),\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Type&lt;/span&gt;: $txtType.&lt;span class=&quot;hljs-title function_&quot;&gt;val&lt;/span&gt;()\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Controller Method:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[&lt;span class=&quot;hljs-title class_&quot;&gt;HttpPost&lt;/span&gt;]\npublic &lt;span class=&quot;hljs-title class_&quot;&gt;FileResult&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ExportFile&lt;/span&gt;(string &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadToken&lt;/span&gt;, string &lt;span class=&quot;hljs-title class_&quot;&gt;Name&lt;/span&gt;, string &lt;span class=&quot;hljs-title class_&quot;&gt;Type&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Set DownloadToken Cookie.&lt;/span&gt;\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Response&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;SetCookie&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpCookie&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadToken&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadToken&lt;/span&gt;)\n    {\n        &lt;span class=&quot;hljs-title class_&quot;&gt;Expires&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;DateTime&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;UtcNow&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;AddDays&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;),\n        &lt;span class=&quot;hljs-title class_&quot;&gt;Secure&lt;/span&gt; = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;\n    });\n\n    using (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; output = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MemoryStream&lt;/span&gt;())\n    {\n        &lt;span class=&quot;hljs-comment&quot;&gt;//get File&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(output.&lt;span class=&quot;hljs-title class_&quot;&gt;ToArray&lt;/span&gt;(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/vnd.ms-excel&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;NewFile.xls&quot;&lt;/span&gt;);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you want to use  jQuery File Download , please note this for IE.\nYou need to reset the response or it will not download&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;    &lt;span class=&quot;hljs-comment&quot;&gt;//The IE will only work if you reset response&lt;/span&gt;\n    &lt;span class=&quot;hljs-title function_&quot;&gt;getServletResponse&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;reset&lt;/span&gt;();\n    &lt;span class=&quot;hljs-comment&quot;&gt;//The jquery.fileDownload needs a cookie be set&lt;/span&gt;\n    &lt;span class=&quot;hljs-title function_&quot;&gt;getServletResponse&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;setHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Set-Cookie&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;fileDownload=true; path=/&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Do the reset of your action create InputStream and return&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Your action can implement &lt;code&gt;ServletResponseAware&lt;/code&gt;  to access &lt;code&gt;getServletResponse()&lt;/code&gt; &lt;/p&gt;\n    ","\n&lt;p&gt;It is certain that you can not do it through Ajax call.&lt;/p&gt;\n\n&lt;p&gt;However, there is a workaround.&lt;/p&gt;\n\n&lt;p&gt;Steps :&lt;/p&gt;\n\n&lt;p&gt;If you are using form.submit() for downloading the file, what you can do is :&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Create an ajax call from client to server and store the file stream inside the session.&lt;/li&gt;\n&lt;li&gt;Upon &quot;success&quot; being returned from server, call your form.submit() to just stream the file stream stored in the session.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;This is helpful in case when you want to decide whether or not file needs to be downloaded after making form.submit(), eg: there can be a case where on form.submit(), an exception occurs on the server side and instead of crashing, you might need to show a custom message on the client side, in such case this implementation might help.&lt;/p&gt;\n    ","\n&lt;p&gt;there is another solution to download a web page in ajax. But I am referring to a page that must first be processed and then downloaded.&lt;/p&gt;\n\n&lt;p&gt;First you need to separate the page processing from the results download.&lt;/p&gt;\n\n&lt;p&gt;1) Only the page calculations are made in the ajax call.&lt;/p&gt;\n\n&lt;pre&gt;$.post(&quot;CalculusPage.php&quot;, { calculusFunction: true, ID: 29, data1: &quot;a&quot;, data2: &quot;b&quot; },\n\n       function(data, status) \n       {\n            if (status == &quot;success&quot;) \n            {\n                /* 2) In the answer the page that uses the previous calculations is downloaded. For example, this can be a page that prints the results of a table calculated in the ajax call. */\n                window.location.href = DownloadPage.php+&quot;?ID=&quot;+29;\n            }               \n       }\n);\n\n// For example: in the CalculusPage.php\n\n    if ( !empty($_POST[&quot;calculusFunction&quot;]) ) \n    {\n        $ID = $_POST[&quot;ID&quot;];\n\n        $query = &quot;INSERT INTO ExamplePage (data1, data2) VALUES (&apos;&quot;.$_POST[&quot;data1&quot;].&quot;&apos;, &apos;&quot;.$_POST[&quot;data2&quot;].&quot;&apos;) WHERE id = &quot;.$ID;\n        ...\n    }\n\n// For example: in the DownloadPage.php\n\n    $ID = $_GET[&quot;ID&quot;];\n\n    $sede = &quot;SELECT * FROM ExamplePage WHERE id = &quot;.$ID;\n    ...\n\n    $filename=&quot;Export_Data.xls&quot;;\n    header(&quot;Content-Type: application/vnd.ms-excel&quot;);\n    header(&quot;Content-Disposition: inline; filename=$filename&quot;);\n\n    ...\n&lt;/pre&gt;\n\n&lt;p&gt;I hope this solution can be useful for many, as it was for me.&lt;/p&gt;\n    ","\n&lt;p&gt;That&apos;s it works so fine in any browser (I&apos;m using asp.net core)&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;            &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onDownload&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; api = &lt;span class=&quot;hljs-string&quot;&gt;&apos;@Url.Action(&quot;myaction&quot;, &quot;mycontroller&quot;)&apos;&lt;/span&gt;; \n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; form = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FormData&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;form1&apos;&lt;/span&gt;));\n\n  &lt;span class=&quot;hljs-title function_&quot;&gt;fetch&lt;/span&gt;(api, { &lt;span class=&quot;hljs-attr&quot;&gt;body&lt;/span&gt;: form, &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;POST&quot;&lt;/span&gt;})\n      .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;resp&lt;/span&gt; =&amp;gt;&lt;/span&gt; resp.&lt;span class=&quot;hljs-title function_&quot;&gt;blob&lt;/span&gt;())\n      .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;blob&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n        $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;download&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Attachement.zip&apos;&lt;/span&gt;);\n          $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;href&quot;&lt;/span&gt;, url);\n          $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;)\n              .&lt;span class=&quot;hljs-title function_&quot;&gt;fadeIn&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3000&lt;/span&gt;,\n                  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { });\n\n      })\n      .&lt;span class=&quot;hljs-title function_&quot;&gt;catch&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;An error occurred&apos;&lt;/span&gt;));\n\n\n\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt; \n &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onclick&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;onDownload()&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;btn btn-primary btn-sm&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Click to Process Files&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;\n \n \n \n &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;role&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;display: none&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;btn btn-sm btn-secondary&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;linkdownload&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Click to download Attachments&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;\n \n \n &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;asp-controller&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;mycontroller&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;asp-action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;myaction&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;form1&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt;&amp;gt;&lt;/span&gt;\n \n &lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;        &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onDownload&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; api = &lt;span class=&quot;hljs-string&quot;&gt;&apos;@Url.Action(&quot;myaction&quot;, &quot;mycontroller&quot;)&apos;&lt;/span&gt;; \n            &lt;span class=&quot;hljs-comment&quot;&gt;//form1 is your id form, and to get data content of form&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; form = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FormData&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;form1&apos;&lt;/span&gt;));\n\n            &lt;span class=&quot;hljs-title function_&quot;&gt;fetch&lt;/span&gt;(api, { &lt;span class=&quot;hljs-attr&quot;&gt;body&lt;/span&gt;: form, &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;POST&quot;&lt;/span&gt;})\n                .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;resp&lt;/span&gt; =&amp;gt;&lt;/span&gt; resp.&lt;span class=&quot;hljs-title function_&quot;&gt;blob&lt;/span&gt;())\n                .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;blob&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n                    $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;download&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Attachments.zip&apos;&lt;/span&gt;);\n                    $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;href&quot;&lt;/span&gt;, url);\n                    $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;)\n                        .&lt;span class=&quot;hljs-title function_&quot;&gt;fadeIn&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3000&lt;/span&gt;,\n                            &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n\n                            });\n                })\n                .&lt;span class=&quot;hljs-title function_&quot;&gt;catch&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;An error occurred&apos;&lt;/span&gt;));                 \n\n        }\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I have tried Ajax and HttpRequest ways to get my result download file but I&apos;ve failed, finally I&apos;ve solved my problem using these steps:&lt;/p&gt;\n&lt;p&gt;implemented a simple hidden form in my html code:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;form method=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt; id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post_form&quot;&lt;/span&gt; style=&lt;span class=&quot;hljs-string&quot;&gt;&quot;display:none&quot;&lt;/span&gt; action=&lt;span class=&quot;hljs-string&quot;&gt;&quot;amin.php&quot;&lt;/span&gt; &amp;gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;hidden&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;action&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;export_xlsx&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;hidden&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post_form_data&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&amp;lt;/form&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;input with &apos;action&apos; name is for calling function in my php code,\ninput with &apos;post_form_data&apos; name for sending long data of a table which were not possible to send with GET. this data was encoded to json, and put json in input:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; list = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;();\n    $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#table_name tr&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; row = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;();\n        $(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;td&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n            row.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;($(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;text&lt;/span&gt;());\n        });\n        list.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(row);\n    });\nlist    = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(list);\n\n$(&lt;span class=&quot;hljs-string&quot;&gt;&quot;input[name=post_form_data]&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;val&lt;/span&gt;(list);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;now, the form is ready with my desire values in inputs, just need to trigger the submit.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;post_form&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;submit&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;and done!\nwhile my result is a file (xlsx file for me) the page wouldn&apos;t be redirected and instantly the file starts to download in last page, so no need to  useiframe or window.open etc.&lt;/p&gt;\n&lt;p&gt;if you are trying to do something like this, this should be an easy trick .&lt;/p&gt;\n    ","\n&lt;p&gt;I struggled with this issue for a long time. Finally an elegant external library suggested &lt;a href=&quot;https://github.com/axios/axios/issues/1660#issuecomment-404858057&quot; rel=&quot;nofollow noreferrer&quot;&gt;here&lt;/a&gt; helped me out.&lt;/p&gt;\n    "],"507":["\n&lt;blockquote&gt;\n&lt;p&gt;Will result always be the floor of the division? What is the defined behavior?&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;Not quite. It rounds toward 0, rather than flooring.&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;6.5.5 Multiplicative operators&lt;/strong&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;6&lt;/strong&gt; When integers are divided, the result of the / operator is the algebraic quotient with any\nfractional part discarded.&lt;sup&gt;88)&lt;/sup&gt; If the quotient a/b is representable, the expression\n(a/b)*b + a%b shall equal a.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;and the corresponding footnote:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;ol start=&quot;88&quot;&gt;\n&lt;li&gt;This is often called truncation toward zero.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;Of course two points to note are:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;3&lt;/strong&gt; The usual arithmetic conversions are performed on the operands.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;and:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;5&lt;/strong&gt; The result of the / operator is the\nquotient from the division of the\nfirst operand by the second; the\nresult of the % operator is the\nremainder. &lt;em&gt;In both operations, if the\nvalue of the second operand is zero,\nthe behavior is undefined.&lt;/em&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;[Note: Emphasis mine]&lt;/p&gt;\n    ","\n&lt;p&gt;Dirkgently gives &lt;a href=&quot;https://stackoverflow.com/questions/3602827/what-is-the-behavior-of-integer-division-in-c/3602857#3602857&quot;&gt;an excellent description&lt;/a&gt; of integer division in C99, but you should also know that in C89 integer division with a negative operand has an implementation-defined direction. &lt;/p&gt;\n\n&lt;p&gt;From the ANSI C draft (3.3.5):&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;If either operand is negative, whether the result of the / operator is the largest integer less than the algebraic quotient or the smallest integer greater than the algebraic quotient is implementation-defined, as is the sign of the result of the % operator.  If the quotient a/b is representable, the expression (a/b)*b + a%b shall equal a.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;So watch out with negative numbers when you are stuck with a C89 compiler.&lt;/p&gt;\n\n&lt;p&gt;It&apos;s a fun fact that C99 chose truncation towards zero because that was how FORTRAN did it. See &lt;a href=&quot;http://groups.google.com/group/comp.std.c/msg/3888950ced7530ff&quot; rel=&quot;noreferrer&quot;&gt;this message&lt;/a&gt; on comp.std.c.&lt;/p&gt;\n    ","\n&lt;p&gt;Yes, the result is always truncated towards zero. It will round towards the smallest absolute value.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;-5&lt;/span&gt; / &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;-2&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; / &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; =  &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;For unsigned and non-negative signed values, this is the same as floor (rounding towards -Infinity).&lt;/p&gt;\n    ","\n&lt;p&gt;Where the result is negative, C truncates towards 0 rather than flooring - I learnt this reading about why Python integer division always floors here: &lt;a href=&quot;http://python-history.blogspot.com/2010/08/why-pythons-integer-division-floors.html&quot; rel=&quot;noreferrer&quot;&gt;Why Python&apos;s Integer Division Floors&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;Will result always be the floor of the division?&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;No. The result varies, but variation happens only for negative values.&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;What is the defined behavior?&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;To make it clear floor rounds towards negative infinity,while integer division rounds towards zero (truncates)&lt;/p&gt;\n\n&lt;p&gt;For positive values they are the same&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; integerDivisionResultPositive= &lt;span class=&quot;hljs-number&quot;&gt;125&lt;/span&gt;/&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;;&lt;span class=&quot;hljs-comment&quot;&gt;//= 1&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; flooringResultPositive= &lt;span class=&quot;hljs-built_in&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;125.0&lt;/span&gt;/&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;);&lt;span class=&quot;hljs-comment&quot;&gt;//=1.0&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;For negative value this is different&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; integerDivisionResultNegative= &lt;span class=&quot;hljs-number&quot;&gt;-125&lt;/span&gt;/&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;;&lt;span class=&quot;hljs-comment&quot;&gt;//=-1&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; flooringResultNegative= &lt;span class=&quot;hljs-built_in&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;-125.0&lt;/span&gt;/&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;);&lt;span class=&quot;hljs-comment&quot;&gt;//=-2.0&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I know people have answered your question but in layman terms:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;5 / 2 = 2&lt;/code&gt; //since both 5 and 2 are integers and integers division always truncates decimals&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;5.0 / 2 or 5 / 2.0 or 5.0 /2.0 = 2.5&lt;/code&gt; //here either 5 or 2 or both has decimal hence the quotient you will get will be in decimal.&lt;/p&gt;\n    "],"508":["\n&lt;h1&gt;Setting a bit&lt;/h1&gt;\n&lt;p&gt;Use the bitwise OR operator (&lt;code&gt;|&lt;/code&gt;) to set a bit.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number |= 1UL &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n;\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;That will set the &lt;code&gt;n&lt;/code&gt;th bit of &lt;code&gt;number&lt;/code&gt;. &lt;code&gt;n&lt;/code&gt; should be zero, if you want to set the &lt;code&gt;1&lt;/code&gt;st bit and so on upto &lt;code&gt;n-1&lt;/code&gt;, if you want to set the &lt;code&gt;n&lt;/code&gt;th bit.&lt;/p&gt;\n&lt;p&gt;Use &lt;code&gt;1ULL&lt;/code&gt; if &lt;code&gt;number&lt;/code&gt; is wider than &lt;code&gt;unsigned long&lt;/code&gt;; promotion of &lt;code&gt;1UL &amp;lt;&amp;lt; n&lt;/code&gt; doesn&apos;t happen until after evaluating &lt;code&gt;1UL &amp;lt;&amp;lt; n&lt;/code&gt; where it&apos;s undefined behaviour to shift by more than the width of a &lt;code&gt;long&lt;/code&gt;.  The same applies to all the rest of the examples.&lt;/p&gt;\n&lt;h1&gt;Clearing a bit&lt;/h1&gt;\n&lt;p&gt;Use the bitwise AND operator (&lt;code&gt;&amp;amp;&lt;/code&gt;) to clear a bit.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number &amp;amp;= ~(1UL &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n);\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;That will clear the &lt;code&gt;n&lt;/code&gt;th bit of &lt;code&gt;number&lt;/code&gt;. You must invert the bit string with the bitwise NOT operator (&lt;code&gt;~&lt;/code&gt;), then AND it.&lt;/p&gt;\n&lt;h1&gt;Toggling a bit&lt;/h1&gt;\n&lt;p&gt;The XOR operator (&lt;code&gt;^&lt;/code&gt;) can be used to toggle a bit.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number ^= 1UL &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n;\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;That will toggle the &lt;code&gt;n&lt;/code&gt;th bit of &lt;code&gt;number&lt;/code&gt;.&lt;/p&gt;\n&lt;h1&gt;Checking a bit&lt;/h1&gt;\n&lt;p&gt;You didn&apos;t ask for this, but I might as well add it.&lt;/p&gt;\n&lt;p&gt;To check a bit, shift the number n to the right, then bitwise AND it:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;bit&lt;/span&gt; = (number &amp;gt;&amp;gt; n) &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;U&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;That will put the value of the &lt;code&gt;n&lt;/code&gt;th bit of &lt;code&gt;number&lt;/code&gt; into the variable &lt;code&gt;bit&lt;/code&gt;.&lt;/p&gt;\n&lt;h1&gt;Changing the &lt;em&gt;n&lt;/em&gt;th bit to &lt;em&gt;x&lt;/em&gt;&lt;/h1&gt;\n&lt;p&gt;Setting the &lt;code&gt;n&lt;/code&gt;th bit to either &lt;code&gt;1&lt;/code&gt; or &lt;code&gt;0&lt;/code&gt; can be achieved with the following on a 2&apos;s complement C++ implementation:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; ^= (-x ^ &lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt;) &amp;amp; (1UL &amp;lt;&amp;lt; n);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Bit &lt;code&gt;n&lt;/code&gt; will be set if &lt;code&gt;x&lt;/code&gt; is &lt;code&gt;1&lt;/code&gt;, and cleared if &lt;code&gt;x&lt;/code&gt; is &lt;code&gt;0&lt;/code&gt;.  If &lt;code&gt;x&lt;/code&gt; has some other value, you get garbage.  &lt;code&gt;x = !!x&lt;/code&gt; will booleanize it to 0 or 1.&lt;/p&gt;\n&lt;p&gt;To make this independent of 2&apos;s complement negation behaviour (where &lt;code&gt;-1&lt;/code&gt; has all bits set, unlike on a 1&apos;s complement or sign/magnitude C++ implementation), use unsigned negation.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;number ^= (-(&lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt;)x ^ number) &amp;amp; (&lt;span class=&quot;hljs-number&quot;&gt;1UL&lt;/span&gt; &amp;lt;&amp;lt; n);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;or&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; newbit = !!x;    &lt;span class=&quot;hljs-comment&quot;&gt;// Also booleanize to force 0 or 1&lt;/span&gt;\nnumber ^= (-newbit ^ number) &amp;amp; (&lt;span class=&quot;hljs-number&quot;&gt;1UL&lt;/span&gt; &amp;lt;&amp;lt; n);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;It&apos;s generally a good idea to use unsigned types for portable bit manipulation.&lt;/p&gt;\n&lt;p&gt;or&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number = (number &amp;amp; ~(1UL &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n)) | (x &amp;lt;&amp;lt; n&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;code&gt;(number &amp;amp; ~(1UL &amp;lt;&amp;lt; n))&lt;/code&gt; will clear the &lt;code&gt;n&lt;/code&gt;th bit and &lt;code&gt;(x &amp;lt;&amp;lt; n)&lt;/code&gt; will set the &lt;code&gt;n&lt;/code&gt;th bit to &lt;code&gt;x&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;It&apos;s also generally a good idea to not to copy/paste code in general and so many people use preprocessor macros (like &lt;a href=&quot;https://stackoverflow.com/a/263738/52074&quot;&gt;the community wiki answer further down&lt;/a&gt;) or some sort of encapsulation.&lt;/p&gt;\n    ","\n&lt;p&gt;Using the Standard C++ Library: &lt;a href=&quot;http://en.cppreference.com/w/cpp/utility/bitset&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;std::bitset&amp;lt;N&amp;gt;&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;Or the &lt;a href=&quot;http://en.wikipedia.org/wiki/Boost_%28C%2B%2B_libraries%29&quot; rel=&quot;noreferrer&quot;&gt;Boost&lt;/a&gt; version: &lt;a href=&quot;http://www.boost.org/doc/libs/release/libs/dynamic_bitset/dynamic_bitset.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;boost::dynamic_bitset&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;There is no need to roll your own:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;bitset&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n    std::bitset&amp;lt;5&amp;gt; x;\n\n    x[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    x[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Note x[0-4]  valid&lt;/span&gt;\n\n    std::cout &amp;lt;&amp;lt; x &amp;lt;&amp;lt; std::endl;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;[&lt;span class=&quot;hljs-meta&quot;&gt;Alpha:&lt;/span&gt;] &amp;gt; ./a.&lt;span class=&quot;hljs-keyword&quot;&gt;out&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;00010&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The Boost version allows a runtime sized bitset compared with a &lt;a href=&quot;https://en.wikipedia.org/wiki/C%2B%2B_Standard_Library&quot; rel=&quot;noreferrer&quot;&gt;standard library&lt;/a&gt; compile-time sized bitset.&lt;/p&gt;\n    ","\n&lt;p&gt;The other option is to use bit fields:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;bits&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; a:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; b:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; c:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;bits&lt;/span&gt; mybits;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;defines a 3-bit field (actually, it&apos;s three 1-bit felds). Bit operations now become a bit (haha) simpler:&lt;/p&gt;\n\n&lt;p&gt;To set or clear a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;mybits.b&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;mybits.c&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To toggle a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;mybits.a = !mybits.a;\nmybits.b = ~mybits.b;\nmybits.c ^= &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;  &lt;span class=&quot;hljs-comment&quot;&gt;/* all work */&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Checking a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;if (mybits.c)  &lt;span class=&quot;hljs-comment&quot;&gt;//if mybits.c is non zero the next line below will execute&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This only works with fixed-size bit fields. Otherwise you have to resort to the bit-twiddling techniques described in previous posts.&lt;/p&gt;\n    ","\n&lt;p&gt;I use macros defined in a header file to handle bit set and clear:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/* a=target variable, b=bit number to act upon 0-n */&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BIT_SET(a,b) ((a) |= (1ULL&amp;lt;&amp;lt;(b)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BIT_CLEAR(a,b) ((a) &amp;amp;= ~(1ULL&amp;lt;&amp;lt;(b)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BIT_FLIP(a,b) ((a) ^= (1ULL&amp;lt;&amp;lt;(b)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BIT_CHECK(a,b) (!!((a) &amp;amp; (1ULL&amp;lt;&amp;lt;(b))))        &lt;span class=&quot;hljs-comment&quot;&gt;// &apos;!!&apos; to make sure this returns 0 or 1&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BITMASK_SET(x, mask) ((x) |= (mask))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BITMASK_CLEAR(x, mask) ((x) &amp;amp;= (~(mask)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BITMASK_FLIP(x, mask) ((x) ^= (mask))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BITMASK_CHECK_ALL(x, mask) (!(~(x) &amp;amp; (mask)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BITMASK_CHECK_ANY(x, mask) ((x) &amp;amp; (mask))&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;It is sometimes worth using an &lt;code&gt;enum&lt;/code&gt; to &lt;em&gt;name&lt;/em&gt; the bits:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;enum ThingFlags = {\n  ThingMask  = 0x0000,\n  ThingFlag0 = 1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;0,\n  ThingFlag1 = 1 &amp;lt;&amp;lt; 1,\n  ThingError = 1 &amp;lt;&amp;lt; 8,\n}\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then use the &lt;em&gt;names&lt;/em&gt; later on. I.e. write &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-erlang&quot;&gt;thingstate |= ThingFlag1;\nthingstate &amp;amp;= ~ThingFlag0;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(thing &amp;amp; ThingError)&lt;/span&gt; {...}\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;to set, clear and test. This way you hide the magic numbers from the rest of your code. &lt;/p&gt;\n\n&lt;p&gt;Other than that I endorse Jeremy&apos;s solution.&lt;/p&gt;\n    ","\n&lt;h2&gt;From &lt;a href=&quot;http://snippets.org/code/temp/snip-c.zip&quot; rel=&quot;noreferrer&quot;&gt;snip-c.zip&lt;/a&gt;&apos;s bitops.h:&lt;/h2&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-objectivec&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/*\n**  Bit set, clear, and test operations\n**\n**  public domain snippet by Bob Stout\n*/&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;enum&lt;/span&gt; {ERROR = &lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;} LOGICAL;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BOOL(x) (!(!(x)))&lt;/span&gt;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitSet(arg,posn) ((arg) | (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitClr(arg,posn) ((arg) &amp;amp; ~(1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitTst(arg,posn) BOOL((arg) &amp;amp; (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitFlp(arg,posn) ((arg) ^ (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;OK, let&apos;s analyze things...&lt;/p&gt;\n\n&lt;p&gt;The common expression that you seem to be having problems with in all of these is &quot;(1L &amp;lt;&amp;lt; (posn))&quot;. All this does is create a mask with a single bit on\nand which will work with any integer type. The &quot;posn&quot; argument specifies the\nposition where you want the bit. If posn==0, then this expression will\nevaluate to:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;binary.&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If posn==8, it will evaluate to:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;binary.&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;In other words, it simply creates a field of 0&apos;s with a 1 at the specified\nposition. The only tricky part is in the BitClr() macro where we need to set\na single 0 bit in a field of 1&apos;s. This is accomplished by using the 1&apos;s\ncomplement of the same expression as denoted by the tilde (~) operator.&lt;/p&gt;\n\n&lt;p&gt;Once the mask is created it&apos;s applied to the argument just as you suggest,\nby use of the bitwise and (&amp;amp;), or (|), and xor (^) operators. Since the mask\nis of type long, the macros will work just as well on char&apos;s, short&apos;s, int&apos;s,\nor long&apos;s.&lt;/p&gt;\n\n&lt;p&gt;The bottom line is that this is a general solution to an entire class of\nproblems. It is, of course, possible and even appropriate to rewrite the\nequivalent of any of these macros with explicit mask values every time you\nneed one, but why do it? Remember, the macro substitution occurs in the\npreprocessor and so the generated code will reflect the fact that the values\nare considered constant by the compiler - i.e. it&apos;s just as efficient to use\nthe generalized macros as to &quot;reinvent the wheel&quot; every time you need to do\nbit manipulation. &lt;/p&gt;\n\n&lt;p&gt;Unconvinced? Here&apos;s some test code - I used Watcom C with full optimization\nand without using _cdecl so the resulting disassembly would be as clean as\npossible:&lt;/p&gt;\n\n&lt;p&gt;----[ TEST.C ]----------------------------------------------------------------&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BOOL(x) (!(!(x)))&lt;/span&gt;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitSet(arg,posn) ((arg) | (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitClr(arg,posn) ((arg) &amp;amp; ~(1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitTst(arg,posn) BOOL((arg) &amp;amp; (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitFlp(arg,posn) ((arg) ^ (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;bitmanip&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; word&lt;/span&gt;)&lt;/span&gt;\n{\n      word = BitSet(word, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n      word = BitSet(word, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;);\n      word = BitClr(word, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;);\n      word = BitFlp(word, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; word;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;----[ TEST.OUT (disassembled) ]-----------------------------------------------&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;Module:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;C:\\BINK\\tst.c&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;Group:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;DGROUP&apos;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;CONST,CONST2,_DATA,_BSS&lt;/span&gt;\n\n&lt;span class=&quot;hljs-attr&quot;&gt;Segment:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;_TEXT&lt;/span&gt;  &lt;span class=&quot;hljs-string&quot;&gt;BYTE&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;00000008&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bytes&lt;/span&gt;  \n &lt;span class=&quot;hljs-number&quot;&gt;0000  &lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;0c&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;84&lt;/span&gt;             &lt;span class=&quot;hljs-string&quot;&gt;bitmanip_&lt;/span&gt;       &lt;span class=&quot;hljs-string&quot;&gt;or&lt;/span&gt;      &lt;span class=&quot;hljs-string&quot;&gt;al,84H&lt;/span&gt;    &lt;span class=&quot;hljs-string&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bits&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;0002  &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;80&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;f4&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;02&lt;/span&gt;                          &lt;span class=&quot;hljs-string&quot;&gt;xor&lt;/span&gt;     &lt;span class=&quot;hljs-string&quot;&gt;ah,02H&lt;/span&gt;    &lt;span class=&quot;hljs-string&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;flip&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;EAX&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(bit&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;AH)&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;0005  &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;f7&lt;/span&gt;                             &lt;span class=&quot;hljs-string&quot;&gt;and&lt;/span&gt;     &lt;span class=&quot;hljs-string&quot;&gt;al,0f7H&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;0007  &lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;c3&lt;/span&gt;                                &lt;span class=&quot;hljs-string&quot;&gt;ret&lt;/span&gt;     \n\n&lt;span class=&quot;hljs-literal&quot;&gt;No&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;disassembly&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;errors&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;----[ finis ]----------------------------------------------------------------- &lt;/p&gt;\n    ","\n&lt;p&gt;For the beginner I would like to explain a bit more with an example:&lt;/p&gt;\n\n&lt;p&gt;Example:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0x55&lt;/span&gt;;\nbitnum : &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;rd.\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The &lt;code&gt;&amp;amp;&lt;/code&gt; operator is used check the bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&amp;amp;&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;___________&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(mean&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;0:&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;).&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;It&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;will&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;work&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;fine&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;third&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(then&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;answer&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;will&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;be&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Toggle or Flip:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;^&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;___________&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0101 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1101&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(Flip&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;third&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;without&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;affecting&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;other&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bits)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;code&gt;|&lt;/code&gt; operator: set the bit&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;|&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;___________&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0101 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1101&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(set&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;third&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;without&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;affecting&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;other&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bits)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;As this is tagged &quot;embedded&quot; I&apos;ll assume you&apos;re using a microcontroller. All of the above suggestions are valid &amp;amp; work (read-modify-write, unions, structs, etc.).&lt;/p&gt;\n\n&lt;p&gt;However, during a bout of oscilloscope-based debugging I was amazed to find that these methods have a considerable overhead in CPU cycles compared to writing a value directly to the micro&apos;s PORTnSET / PORTnCLEAR registers which makes a real difference where there are tight loops / high-frequency ISR&apos;s toggling pins.&lt;/p&gt;\n\n&lt;p&gt;For those unfamiliar: In my example, the micro has a general pin-state register PORTn which reflects the output pins, so doing PORTn |= BIT_TO_SET results in a read-modify-write to that register. However, the PORTnSET / PORTnCLEAR registers take a &apos;1&apos; to mean &quot;please make this bit 1&quot; (SET) or &quot;please make this bit zero&quot; (CLEAR) and a &apos;0&apos; to mean &quot;leave the pin alone&quot;. so, you end up with two port addresses depending whether you&apos;re setting or clearing the bit (not always convenient) but a &lt;em&gt;much&lt;/em&gt; faster reaction and smaller assembled code.&lt;/p&gt;\n    ","\n&lt;p&gt;Here&apos;s my favorite bit arithmetic macro, which works for any type of unsigned integer array from &lt;code&gt;unsigned char&lt;/code&gt; up to &lt;code&gt;size_t&lt;/code&gt; (which is the biggest type that should be efficient to work with):&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;BITOP&lt;/span&gt;(a,b,op) \\\n ((a)&lt;span class=&quot;hljs-selector-attr&quot;&gt;[(size_t)(b)/(8*sizeof *(a))]&lt;/span&gt; op ((size_t)&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&amp;lt;&amp;lt;((size_t)(b)%(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;*sizeof *(a)))))\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To set a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;BITOP&lt;/span&gt;(array, bit, |=);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To clear a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;BITOP&lt;/span&gt;(array, bit, &amp;amp;=~);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To toggle a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;BITOP&lt;/span&gt;(array, bit, ^=);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To test a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-vhdl&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (BITOP(&lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt;, &amp;amp;)) ...\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;etc.&lt;/p&gt;\n    ","\n&lt;p&gt;The bitfield approach has other advantages in the embedded arena. You can define a struct that maps directly onto the bits in a particular hardware register.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HwRegister&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; errorFlag:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;  &lt;span class=&quot;hljs-comment&quot;&gt;// one-bit flag field&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; Mode:&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;       &lt;span class=&quot;hljs-comment&quot;&gt;// three-bit mode field&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; StatusCode:&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;  &lt;span class=&quot;hljs-comment&quot;&gt;// four-bit status code&lt;/span&gt;\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HwRegister&lt;/span&gt; CR3342_AReg;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You need to be aware of the bit packing order - I think it&apos;s MSB first, but this may be implementation-dependent. Also, verify how your compiler handlers fields crossing byte boundaries.&lt;/p&gt;\n\n&lt;p&gt;You can then read, write, test the individual values as before.&lt;/p&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;&lt;strong&gt;Let suppose few things first&lt;/strong&gt;&lt;br&gt;\n  &lt;code&gt;num = 55&lt;/code&gt; Integer to perform bitwise operations (set, get, clear, toggle).&lt;br&gt;\n  &lt;code&gt;n = 4&lt;/code&gt; 0 based bit position to perform bitwise operations.   &lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h1&gt;How to get a bit?&lt;/h1&gt;\n\n&lt;ol&gt;\n&lt;li&gt;To get the &lt;code&gt;nth&lt;/code&gt; bit of num right shift &lt;code&gt;num&lt;/code&gt;, &lt;code&gt;n&lt;/code&gt; times. Then perform bitwise AND &lt;code&gt;&amp;amp;&lt;/code&gt; with 1.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;bit&lt;/span&gt; = (num &amp;gt;&amp;gt; n) &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;How it works?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;       &lt;span class=&quot;hljs-number&quot;&gt;0011 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(55&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;         &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(right&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;shift&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;times)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n       &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0011&lt;/span&gt;\n     &lt;span class=&quot;hljs-string&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(final&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;result)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h1&gt;How to set a bit?&lt;/h1&gt;\n\n&lt;ol&gt;\n&lt;li&gt;To set a particular bit of number. Left shift 1 &lt;code&gt;n&lt;/code&gt; times. Then perform bitwise OR &lt;code&gt;|&lt;/code&gt; operation with &lt;code&gt;num&lt;/code&gt;.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;num |= (1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n);    // Equivalent to; num = (1 &amp;lt;&amp;lt; n&lt;/span&gt;) | num;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;How it works?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;       &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;         &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(left&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;shift&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;times)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n       &lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000&lt;/span&gt;\n     &lt;span class=&quot;hljs-string&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0011 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(55&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(final&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;result)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h1&gt;How to clear a bit?&lt;/h1&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Left shift 1, &lt;code&gt;n&lt;/code&gt; times i.e. &lt;code&gt;1 &amp;lt;&amp;lt; n&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Perform bitwise complement with the above result. So that the nth bit becomes unset and rest of bit becomes set i.e. &lt;code&gt;~ (1 &amp;lt;&amp;lt; n)&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Finally, perform bitwise AND &lt;code&gt;&amp;amp;&lt;/code&gt; operation with the above result and &lt;code&gt;num&lt;/code&gt;. The above three steps together can be written as &lt;code&gt;num &amp;amp; (~ (1 &amp;lt;&amp;lt; n))&lt;/code&gt;;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/mf8hm.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/mf8hm.png&quot; alt=&quot;Steps to clear a bit&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;num &amp;amp;= (~(1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n));    // Equivalent to; num = num &amp;amp; (~(1 &amp;lt;&amp;lt; n&lt;/span&gt;));\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;How it works?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;       &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;         &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(left&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;shift&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;times)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n     &lt;span class=&quot;hljs-string&quot;&gt;~&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n       &lt;span class=&quot;hljs-number&quot;&gt;1110 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1111&lt;/span&gt;\n     &lt;span class=&quot;hljs-string&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0011 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(55&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0010 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(final&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;result)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h1&gt;How to toggle a bit?&lt;/h1&gt;\n\n&lt;p&gt;To toggle a bit we use bitwise XOR &lt;code&gt;^&lt;/code&gt; operator. Bitwise XOR operator evaluates to 1 if corresponding bit of both operands are different, otherwise evaluates to 0.  &lt;/p&gt;\n\n&lt;p&gt;Which means to toggle a bit, we need to perform XOR operation with the bit you want to toggle and 1. &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;num ^= (1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n);    // Equivalent to; num = num ^ (1 &amp;lt;&amp;lt; n&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;How it works?&lt;/strong&gt; &lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;If the bit to toggle is 0 then, &lt;code&gt;0 ^ 1 =&amp;gt; 1&lt;/code&gt;.  &lt;/li&gt;\n&lt;li&gt;If the bit to toggle is 1 then, &lt;code&gt;1 ^ 1 =&amp;gt; 0&lt;/code&gt;.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;       &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;         &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(left&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;shift&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;times)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n       &lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000&lt;/span&gt;\n     &lt;span class=&quot;hljs-string&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0011 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(55&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0010 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(final&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;result)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Recommended reading - &lt;a href=&quot;https://codeforwin.org/2016/01/bitwise-operator-programming-exercises-and-solutions-in-c.html&quot; rel=&quot;noreferrer&quot;&gt;Bitwise operator exercises&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;h2&gt;Check a bit at an arbitrary location in a variable of arbitrary type:&lt;/h2&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-lisp&quot;&gt;#define bit_test(&lt;span class=&quot;hljs-name&quot;&gt;x&lt;/span&gt;, y)  ( ( ((&lt;span class=&quot;hljs-name&quot;&gt;const&lt;/span&gt; char*)&amp;amp;(&lt;span class=&quot;hljs-name&quot;&gt;x&lt;/span&gt;))[(&lt;span class=&quot;hljs-name&quot;&gt;y&lt;/span&gt;)&amp;gt;&amp;gt;3] &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;x80 &amp;gt;&amp;gt; ((&lt;span class=&quot;hljs-name&quot;&gt;y&lt;/span&gt;)&amp;amp;0x07)) &amp;gt;&amp;gt; (&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;-((&lt;span class=&quot;hljs-name&quot;&gt;y&lt;/span&gt;)&amp;amp;0x07) ) )\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Sample usage:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;)&lt;/span&gt;\n&lt;/span&gt;{\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; arr[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;] = { &lt;span class=&quot;hljs-number&quot;&gt;0x01&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x23&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x45&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x67&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x89&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0xAB&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0xCD&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0xEF&lt;/span&gt; };\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; ix = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; ix &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;64&lt;/span&gt;; ++ix)\n        &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;bit %d is %d\\n&quot;&lt;/span&gt;, ix, &lt;span class=&quot;hljs-built_in&quot;&gt;bit_test&lt;/span&gt;(arr, ix));\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Notes:&lt;/strong&gt;\nThis is designed to be fast (given its flexibility) and non-branchy.  It results in efficient SPARC machine code when compiled Sun Studio 8; I&apos;ve also tested it using MSVC++ 2008 on amd64.  It&apos;s possible to make similar macros for setting and clearing bits.  The key difference of this solution compared with many others here is that it works for any location in pretty much any type of variable.&lt;/p&gt;\n    ","\n&lt;p&gt;More general, for arbitrary sized bitmaps:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-lisp&quot;&gt;#define BITS &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;\n#define BIT_SET(  &lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;, n) (&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;[(&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)/BITS] |=  (&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;x80&amp;gt;&amp;gt;((&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)%BITS)))\n#define BIT_CLEAR(&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;, n) (&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;[(&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)/BITS] &lt;span class=&quot;hljs-symbol&quot;&gt;&amp;amp;=&lt;/span&gt; ~(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;x80&amp;gt;&amp;gt;((&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)%BITS)))\n#define BIT_ISSET(&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;, n) (&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;[(&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)/BITS] &amp;amp;   (&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;x80&amp;gt;&amp;gt;((&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)%BITS)))\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This program is to change any data bit from 0 to 1 or 1 to 0:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-haskell&quot;&gt;{\n    unsigned int &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt; = 0x000000F0;&lt;/span&gt;\n    int bitpos = &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;\n    int bitvalue = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    unsigned int bit = &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;;&lt;/span&gt;\n    bit = (bit&amp;gt;&amp;gt;bitpos)&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0x00000001&lt;/span&gt;;\n    int invbitvalue = &lt;span class=&quot;hljs-number&quot;&gt;0x00000001&lt;/span&gt;&amp;amp;(~bitvalue);\n    printf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;%x\\n&quot;&lt;/span&gt;,bit);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bitvalue == &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bit == &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n            printf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;%x\\n&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;);&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        {\n             &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt; = (&lt;span class=&quot;hljs-title&quot;&gt;data&lt;/span&gt;^(&lt;span class=&quot;hljs-title&quot;&gt;invbitvalue&lt;/span&gt;&amp;lt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;bitpos&lt;/span&gt;));&lt;/span&gt;\n             printf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;%x\\n&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;);&lt;/span&gt;\n        }\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bit == &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;)\n            printf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;elseif %x\\n&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;);&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        {\n            &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt; = (&lt;span class=&quot;hljs-title&quot;&gt;data&lt;/span&gt;|(&lt;span class=&quot;hljs-title&quot;&gt;bitvalue&lt;/span&gt;&amp;lt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;bitpos&lt;/span&gt;));&lt;/span&gt;\n            printf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;else %x\\n&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;);&lt;/span&gt;\n        }\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you&apos;re doing a lot of bit twiddling you might want to use masks which will make the whole thing quicker. The following functions are very fast and are still flexible (they allow bit twiddling in bit maps of any size).&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;const unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; TQuickByteMask[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;] =\n{\n   &lt;span class=&quot;hljs-number&quot;&gt;0x01&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x02&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x04&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x08&lt;/span&gt;,\n   &lt;span class=&quot;hljs-number&quot;&gt;0x10&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x20&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x40&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x80&lt;/span&gt;,\n};\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Set bit in any sized bit mask.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;    none\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;     bit    - Bit number.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;     bitmap - Pointer to bitmap.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TSetBit&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; bit, unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; n, x;\n\n    x = bit / &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Index to byte.&lt;/span&gt;\n    n = bit % &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Specific bit in byte.&lt;/span&gt;\n\n    bitmap[x] |= TQuickByteMask[n];        &lt;span class=&quot;hljs-comment&quot;&gt;// Set bit.&lt;/span&gt;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Reset bit in any sized mask.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;  None\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bit    - Bit number.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bitmap - Pointer to bitmap.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TResetBit&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; bit, unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; n, x;\n\n    x = bit / &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Index to byte.&lt;/span&gt;\n    n = bit % &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Specific bit in byte.&lt;/span&gt;\n\n    bitmap[x] &amp;amp;= (~TQuickByteMask[n]);    &lt;span class=&quot;hljs-comment&quot;&gt;// Reset bit.&lt;/span&gt;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Toggle bit in any sized bit mask.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;   none\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bit    - Bit number.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bitmap - Pointer to bitmap.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TToggleBit&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; bit, unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; n, x;\n\n    x = bit / &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Index to byte.&lt;/span&gt;\n    n = bit % &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Specific bit in byte.&lt;/span&gt;\n\n    bitmap[x] ^= TQuickByteMask[n];        &lt;span class=&quot;hljs-comment&quot;&gt;// Toggle bit.&lt;/span&gt;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Checks specified bit.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;  1 if bit set else 0.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bit    - Bit number.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bitmap - Pointer to bitmap.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TIsBitSet&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; bit, const unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; n, x;\n\n    x = bit / &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;    &lt;span class=&quot;hljs-comment&quot;&gt;// Index to byte.&lt;/span&gt;\n    n = bit % &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;    &lt;span class=&quot;hljs-comment&quot;&gt;// Specific bit in byte.&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Test bit (logigal AND).&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bitmap[x] &amp;amp; TQuickByteMask[n])\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Checks specified bit.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;  1 if bit reset else 0.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bit    - Bit number.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bitmap - Pointer to bitmap.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TIsBitReset&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; bit, const unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; TIsBitSet(bit, bitmap) ^ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Count number of bits set in a bitmap.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;   Number of bits set.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;    bitmap - Pointer to bitmap.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;    size   - Bitmap size (in bits).\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@note&lt;/span&gt;    Not very efficient in terms of execution speed. If you are doing\n *        some computationally intense stuff you may need a more complex\n *        implementation which would be faster (especially for big bitmaps).\n *        See (http://graphics.stanford.edu/~seander/bithacks.html).\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TCountBits&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( const unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; size)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i, count = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;size; i++)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (TIsBitSet(i, bitmap))\n            count++;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; count;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note, to set bit &apos;n&apos; in a 16 bit integer you do the following:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;TSetBit&lt;/span&gt;( n, &amp;amp;my_int);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It&apos;s up to you to ensure that the bit number is within the range of the bit map that you pass. Note that for little endian processors that bytes, words, dwords, qwords, etc., map correctly to each other in memory (main reason that little endian processors are &apos;better&apos; than big-endian processors, ah, I feel a flame war coming on...).&lt;/p&gt;\n    ","\n&lt;p&gt;Use this:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-dart&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; ToggleNthBit ( unsigned char n, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; )\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; &amp;amp; (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n))\n        &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; &amp;amp;= ~(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; |= (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Expanding on the &lt;code&gt;bitset&lt;/code&gt; answer:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;bitset&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{\n  &lt;span class=&quot;hljs-function&quot;&gt;bitset&amp;lt;8&amp;gt; &lt;span class=&quot;hljs-title&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(std::string(&lt;span class=&quot;hljs-string&quot;&gt;&quot;10010011&quot;&lt;/span&gt;);\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Set Bit&lt;/span&gt;\n  byte.set(&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// 10010111&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Clear Bit&lt;/span&gt;\n  byte.reset(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// 10010101&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Toggle Bit&lt;/span&gt;\n  byte.flip(&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// 00010101&lt;/span&gt;\n\n  cout &amp;lt;&amp;lt; byte &amp;lt;&amp;lt; endl;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you want to perform this all operation with C programming in the &lt;strong&gt;Linux kernel&lt;/strong&gt; then I suggest to use standard APIs of the Linux kernel.&lt;/p&gt;\n\n&lt;p&gt;See &lt;a href=&quot;https://www.kernel.org/doc/htmldocs/kernel-api/ch02s03.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://www.kernel.org/doc/htmldocs/kernel-api/ch02s03.html&lt;/a&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-vhdl&quot;&gt;set_bit  Atomically set a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; memory\nclear_bit  Clears a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; memory\nchange_bit  Toggle a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; memory\ntest_and_set_bit  Set a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; its old value\ntest_and_clear_bit  Clear a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; its old value\ntest_and_change_bit  Change a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; its old value\ntest_bit  Determine whether a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; set\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note: Here the whole operation happens in a single step. So these all are  guaranteed to be &lt;strong&gt;atomic&lt;/strong&gt; even on SMP computers and are useful\nto keep coherence across processors.&lt;/p&gt;\n    ","\n&lt;p&gt;Visual C 2010, and perhaps many other compilers, have direct support for boolean operations built in. A bit has two possible values, just like a boolean, so we can use booleans instead - even if they take up more space than a single bit in memory in this representation. This works, even the &lt;code&gt;sizeof()&lt;/code&gt; operator works properly. &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt;    IsGph[&lt;span class=&quot;hljs-number&quot;&gt;256&lt;/span&gt;], IsNotGph[&lt;span class=&quot;hljs-number&quot;&gt;256&lt;/span&gt;];\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//  Initialize boolean array to detect printable characters&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;&lt;span class=&quot;hljs-built_in&quot;&gt;sizeof&lt;/span&gt;(IsGph); i++)  {\n    IsGph[i] = &lt;span class=&quot;hljs-built_in&quot;&gt;isgraph&lt;/span&gt;((&lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;)i);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;So, to your question, &lt;code&gt;IsGph[i] =1&lt;/code&gt;, or &lt;code&gt;IsGph[i] =0&lt;/code&gt; make setting and clearing bools easy.&lt;/p&gt;\n\n&lt;p&gt;To find unprintable characters:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//  Initialize boolean array to detect UN-printable characters, &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//  then call function to toggle required bits true, while initializing a 2nd&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//  boolean array as the complement of the 1st.&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;sizeof&lt;/span&gt;(IsGph); i++)  {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(IsGph[i])    {\n         IsNotGph[i] = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    }   &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;   {\n         IsNotGph[i] = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note there is nothing &quot;special&quot; about this code. It treats a bit like an integer - which technically, it is. A 1 bit integer that can hold 2 values, and 2 values only.&lt;/p&gt;\n\n&lt;p&gt;I once used this approach to find duplicate loan records, where loan_number was the ISAM key, using the 6-digit loan number as an index into the bit array. Savagely fast, and after 8 months, proved that the mainframe system we were getting the data from was in fact malfunctioning. The simplicity of bit arrays makes confidence in their correctness very high - vs a searching approach for example.&lt;/p&gt;\n    ","\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-dart&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; set_nth_bit(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n){    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n}\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; clear_nth_bit(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n){    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; &amp;amp; ~( &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n));\n}\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; toggle_nth_bit(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n){    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; ^ (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n}\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; check_nth_bit(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n){    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; &amp;amp; (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Here are some macros I use:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-lisp&quot;&gt;SET_FLAG(&lt;span class=&quot;hljs-name&quot;&gt;Status&lt;/span&gt;, Flag)            ((&lt;span class=&quot;hljs-name&quot;&gt;Status&lt;/span&gt;) |= (&lt;span class=&quot;hljs-name&quot;&gt;Flag&lt;/span&gt;))\nCLEAR_FLAG(&lt;span class=&quot;hljs-name&quot;&gt;Status&lt;/span&gt;, Flag)          ((&lt;span class=&quot;hljs-name&quot;&gt;Status&lt;/span&gt;) &lt;span class=&quot;hljs-symbol&quot;&gt;&amp;amp;=&lt;/span&gt; ~(&lt;span class=&quot;hljs-name&quot;&gt;Flag&lt;/span&gt;))\nINVALID_FLAGS(&lt;span class=&quot;hljs-name&quot;&gt;ulFlags&lt;/span&gt;, ulAllowed) ((&lt;span class=&quot;hljs-name&quot;&gt;ulFlags&lt;/span&gt;) &amp;amp; ~(&lt;span class=&quot;hljs-name&quot;&gt;ulAllowed&lt;/span&gt;))\nTEST_FLAGS(&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;,ulMask, ulBit)       (((&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;)&amp;amp;(&lt;span class=&quot;hljs-name&quot;&gt;ulMask&lt;/span&gt;)) == (&lt;span class=&quot;hljs-name&quot;&gt;ulBit&lt;/span&gt;))\nIS_FLAG_SET(&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;,ulMask)             TEST_FLAGS(&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;,ulMask,ulMask)\nIS_FLAG_CLEAR(&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;,ulMask)           TEST_FLAGS(&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;,ulMask,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;How do you set, clear, and toggle a single bit?&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;To address a common coding pitfall when attempting to form the mask:&lt;br&gt;\n&lt;strong&gt;&lt;code&gt;1&lt;/code&gt; is not always wide enough&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;What problems happen when &lt;code&gt;number&lt;/code&gt; is a wider type than &lt;code&gt;1&lt;/code&gt;?&lt;br&gt;\n&lt;code&gt;x&lt;/code&gt; may be too great for the shift &lt;code&gt;1 &amp;lt;&amp;lt; x&lt;/code&gt; leading to &lt;em&gt;undefined behavior&lt;/em&gt; (UB).  Even if &lt;code&gt;x&lt;/code&gt; is not too great, &lt;code&gt;~&lt;/code&gt; may not flip enough most-significant-bits.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// assume 32 bit int/unsigned&lt;/span&gt;\nunsigned long long &lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;foo&lt;/span&gt;();\n\nunsigned x = &lt;span class=&quot;hljs-number&quot;&gt;40&lt;/span&gt;; \n&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; |= (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; x);  &lt;span class=&quot;hljs-comment&quot;&gt;// UB&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; ^= (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; x);  &lt;span class=&quot;hljs-comment&quot;&gt;// UB&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; &amp;amp;= ~(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; x); &lt;span class=&quot;hljs-comment&quot;&gt;// UB&lt;/span&gt;\n\nx = &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;;\n&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; &amp;amp;= ~(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; x); &lt;span class=&quot;hljs-comment&quot;&gt;// Wrong mask, not wide enough&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;&lt;strong&gt;To insure 1 is wide enough:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Code could use &lt;code&gt;1ull&lt;/code&gt; or pedantically &lt;code&gt;(uintmax_t)1&lt;/code&gt; and let the compiler optimize.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number |= (1ull &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;x);\nnumber |= ((uintmax_t)1 &amp;lt;&amp;lt; x&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or cast - which makes for coding/review/maintenance issues keeping the cast correct and up-to-date.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number |= (type_of_number)1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;x;\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or gently promote the &lt;code&gt;1&lt;/code&gt; by forcing a math operation that is as least as wide as the type of &lt;code&gt;number&lt;/code&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; |= (&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt;*&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) &amp;lt;&amp;lt; x;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;As with most bit manipulations, best to work with &lt;em&gt;unsigned&lt;/em&gt; types rather than &lt;em&gt;signed&lt;/em&gt; ones&lt;/p&gt;\n    ","\n&lt;p&gt;This program is based out of @Jeremy&apos;s above solution. If someone wish to quickly play around.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;BitwiseOperations&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;String args[]&lt;/span&gt;)&lt;/span&gt; {\n\n        setABit(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// set the 4th bit, 0000 -&amp;gt; 1000 [8]&lt;/span&gt;\n        clearABit(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// clear the 5th bit, 10000 -&amp;gt; 00000 [0]&lt;/span&gt;\n        toggleABit(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// toggle the 4th bit, 1000 -&amp;gt; 0000 [0]&lt;/span&gt;\n        checkABit(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// check the 4th bit 1000 -&amp;gt; true &lt;/span&gt;\n    }\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;setABit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; input, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n&lt;/span&gt;)&lt;/span&gt; {\n        input = input | ( &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;);\n        System.&lt;span class=&quot;hljs-keyword&quot;&gt;out&lt;/span&gt;.println(input);\n    }\n\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;clearABit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; input, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n&lt;/span&gt;)&lt;/span&gt; {\n        input = input &amp;amp; ~(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;);\n        System.&lt;span class=&quot;hljs-keyword&quot;&gt;out&lt;/span&gt;.println(input);\n    }\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;toggleABit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; input, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n&lt;/span&gt;)&lt;/span&gt; {\n        input = input ^ (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;);\n        System.&lt;span class=&quot;hljs-keyword&quot;&gt;out&lt;/span&gt;.println(input);\n    }\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;checkABit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; input, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n&lt;/span&gt;)&lt;/span&gt; {\n        boolean isSet = ((input &amp;gt;&amp;gt; n&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;) &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) == &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; \n        System.&lt;span class=&quot;hljs-keyword&quot;&gt;out&lt;/span&gt;.println(isSet);\n    }\n}\n\n\nOutput :\n&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;A templated version (put in a header file) with support for changing multiple bits (works on AVR microcontrollers btw):&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; bit {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; T1 &lt;span class=&quot;hljs-title&quot;&gt;bitmask&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(T2 bit)&lt;/span&gt; \n  &lt;/span&gt;{&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (T1)&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; bit;}\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T3, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; T1 &lt;span class=&quot;hljs-title&quot;&gt;bitmask&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(T3 bit, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ((T1)&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; bit) | &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Set these bits (others retain their state) */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{variable |= &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Set only these bits (others will be cleared) */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;setOnly&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{variable = &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Clear these bits (others retain their state) */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;clear&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{variable &amp;amp;= ~&lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Flip these bits (others retain their state) */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;flip&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{variable ^= &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Check if any of these bits are set */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;isAnySet&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; variable &amp;amp; &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Check if all these bits are set */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;isSet&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ((variable &amp;amp; &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...)) == &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...));}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Check if all these bits are not set */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;isNotSet&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ((variable &amp;amp; &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...)) != &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...));}\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Example of use:&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;bitset&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// for console output of binary values&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// and include the code above of course&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{\n  &lt;span class=&quot;hljs-type&quot;&gt;uint8_t&lt;/span&gt; v = &lt;span class=&quot;hljs-number&quot;&gt;0b1111&apos;1100&lt;/span&gt;;\n  bit::&lt;span class=&quot;hljs-built_in&quot;&gt;set&lt;/span&gt;(v, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n  cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;bitset&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;gt;(v) &amp;lt;&amp;lt; endl;\n\n  bit::&lt;span class=&quot;hljs-built_in&quot;&gt;clear&lt;/span&gt;(v, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n  cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;bitset&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;gt;(v) &amp;lt;&amp;lt; endl;\n\n  bit::&lt;span class=&quot;hljs-built_in&quot;&gt;flip&lt;/span&gt;(v, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n  cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;bitset&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;gt;(v) &amp;lt;&amp;lt; endl;\n\n  bit::&lt;span class=&quot;hljs-built_in&quot;&gt;clear&lt;/span&gt;(v, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;);\n  cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;bitset&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;gt;(v) &amp;lt;&amp;lt; endl;\n\n  bit::&lt;span class=&quot;hljs-built_in&quot;&gt;flip&lt;/span&gt;(v, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;);\n  cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;bitset&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;gt;(v) &amp;lt;&amp;lt; endl;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;BTW: It turns out that constexpr and inline is not used if not sending the optimizer argument (e.g.: -O3) to the compiler. Feel free to try the code at &lt;a href=&quot;https://godbolt.org/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://godbolt.org/&lt;/a&gt; and look at the ASM output.&lt;/p&gt;\n    ","\n&lt;p&gt;Here is a routine in C to perform the basic bitwise operations:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; INT_BIT (unsigned int) (sizeof(unsigned int) * 8U) &lt;span class=&quot;hljs-comment&quot;&gt;//number of bits in unsigned int&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;)&lt;/span&gt;\n&lt;/span&gt;{\n    \n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; k = &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;//k is the bit position; here it is the 5th bit from the LSb (0th bit)&lt;/span&gt;\n    \n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; regA = &lt;span class=&quot;hljs-number&quot;&gt;0x00007C7C&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;//we perform bitwise operations on regA&lt;/span&gt;\n    \n    regA |= (&lt;span class=&quot;hljs-number&quot;&gt;1U&lt;/span&gt; &amp;lt;&amp;lt; k);    &lt;span class=&quot;hljs-comment&quot;&gt;//Set kth bit&lt;/span&gt;\n    \n    regA &amp;amp;= ~(&lt;span class=&quot;hljs-number&quot;&gt;1U&lt;/span&gt; &amp;lt;&amp;lt; k);   &lt;span class=&quot;hljs-comment&quot;&gt;//Clear kth bit&lt;/span&gt;\n    \n    regA ^= (&lt;span class=&quot;hljs-number&quot;&gt;1U&lt;/span&gt; &amp;lt;&amp;lt; k);    &lt;span class=&quot;hljs-comment&quot;&gt;//Toggle kth bit&lt;/span&gt;\n    \n    regA = (regA &amp;lt;&amp;lt; k) | regA &amp;gt;&amp;gt; (INT_BIT - k); &lt;span class=&quot;hljs-comment&quot;&gt;//Rotate left by k bits&lt;/span&gt;\n    \n    regA = (regA &amp;gt;&amp;gt; k) | regA &amp;lt;&amp;lt; (INT_BIT - k); &lt;span class=&quot;hljs-comment&quot;&gt;//Rotate right by k bits&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;   \n}\n\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h1&gt;Setting the nth bit to x (bit value) without using -1&lt;/h1&gt;\n&lt;p&gt;Sometimes when you are not sure what -1 or the like will result in, you may wish to set the nth bit without using -1:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number = (((number | (1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n)) ^ (1 &amp;lt;&amp;lt; n&lt;/span&gt;))) | (x &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n);\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Explanation: &lt;code&gt;((number | (1 &amp;lt;&amp;lt; n)&lt;/code&gt; sets the nth bit to 1 (where &lt;code&gt;|&lt;/code&gt; denotes bitwise OR), then with &lt;code&gt;(...) ^ (1 &amp;lt;&amp;lt; n)&lt;/code&gt; we set the nth bit to 0, and finally with &lt;code&gt;(...) | x &amp;lt;&amp;lt; n)&lt;/code&gt; we set the nth bit that was 0, to (bit value) &lt;code&gt;x&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;This also works in &lt;code&gt;golang&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;Try one of these functions in the C language to change n bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;char&lt;/span&gt; bitfield;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Start at 0th position&lt;/span&gt;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;chang_n_bit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;&lt;/span&gt;)&lt;/span&gt;\n{\n    bitfield = (bitfield | (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n)) &amp;amp; (~( (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n) ^ (&lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt; &amp;lt;&amp;lt; n) ));\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;void chang_n_bit(int n, int value)\n{\n    bitfield = (bitfield | (1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n)) &amp;amp; ((value &amp;lt;&amp;lt; n&lt;/span&gt;) | ((~0) ^ (1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n)));\n}\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;chang_n_bit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;&lt;/span&gt;)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;)\n        bitfield |= &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        bitfield &amp;amp;= ~&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; ^ (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;get_n_bit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n&lt;/span&gt;)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (bitfield &amp;amp; (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n)) ? &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    "],"509":["\n&lt;p&gt;When you make a POST request, you have to encode the data that forms the body of the request in some way.&lt;/p&gt;\n&lt;p&gt;HTML forms provide &lt;a href=&quot;https://www.w3.org/html/wg/spec/association-of-controls-and-forms.html#attr-fs-enctype&quot; rel=&quot;nofollow noreferrer&quot;&gt;three methods of encoding&lt;/a&gt;.&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt; (the default)&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;multipart/form-data&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;text/plain&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Work was being done on adding &lt;a href=&quot;http://www.w3.org/TR/html-json-forms/&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;application/json&lt;/code&gt;&lt;/a&gt;, but that has been abandoned.&lt;/p&gt;\n&lt;p&gt;(Other encodings are possible with HTTP requests generated using other means than an HTML form submission. JSON is a common format for use with web services and some still use SOAP.)&lt;/p&gt;\n&lt;p&gt;The specifics of the formats don&apos;t matter to most developers. The important points are:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Never use &lt;code&gt;text/plain&lt;/code&gt;.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;When you are writing client-side code:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;use &lt;code&gt;multipart/form-data&lt;/code&gt; when your form includes any &lt;code&gt;&amp;lt;input type=&quot;file&quot;&amp;gt;&lt;/code&gt; elements&lt;/li&gt;\n&lt;li&gt;otherwise you can use &lt;code&gt;multipart/form-data&lt;/code&gt; or &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt; but &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt; will be more efficient&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;When you are writing server-side code:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Use a prewritten form handling library&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Most (such as Perl&apos;s &lt;code&gt;CGI-&amp;gt;param&lt;/code&gt; or the one exposed by PHP&apos;s &lt;code&gt;$_POST&lt;/code&gt; superglobal) will take care of the differences for you. Don&apos;t bother trying to parse the raw input received by the server.&lt;/p&gt;\n&lt;p&gt;Sometimes you will find a library that can&apos;t handle both formats.  Node.js&apos;s most popular library for handling form data is &lt;a href=&quot;https://github.com/expressjs/body-parser&quot; rel=&quot;nofollow noreferrer&quot;&gt;body-parser&lt;/a&gt; which cannot handle multipart requests (but has documentation that recommends some alternatives which can).&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;If you are writing (or debugging) a library for parsing or generating the raw data, then you need to start worrying about the format. You might also want to know about it for interest&apos;s sake.&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt; is more or less the same as a query string on the end of the URL.&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;multipart/form-data&lt;/code&gt; is significantly more complicated but it allows entire files to be included in the data. An example of the result can be found in the &lt;a href=&quot;http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4&quot; rel=&quot;nofollow noreferrer&quot;&gt;HTML 4 specification&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;text/plain&lt;/code&gt; is introduced by HTML 5 and is useful only for debugging  from &lt;a href=&quot;http://www.w3.org/TR/html5/forms.html#text/plain-encoding-algorithm&quot; rel=&quot;nofollow noreferrer&quot;&gt;the spec&lt;/a&gt;: &lt;em&gt;They are not reliably interpretable by computer&lt;/em&gt;  and I&apos;d argue that the others combined with tools (like &lt;a href=&quot;https://developers.google.com/web/tools/chrome-devtools/network&quot; rel=&quot;nofollow noreferrer&quot;&gt;the Network Panel&lt;/a&gt; in the developer tools of most browsers) are better for that).&lt;/p&gt;\n    ","\n&lt;blockquote&gt;\n&lt;p&gt;when should we use it?&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/a/4526286&quot;&gt;Quentin&apos;s answer&lt;/a&gt; is right: use &lt;code&gt;multipart/form-data&lt;/code&gt; if the form contains a file upload, and &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt; otherwise, which is the default if you omit &lt;code&gt;enctype&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;I&apos;m going to:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;add some more HTML5 references&lt;/li&gt;\n&lt;li&gt;explain &lt;strong&gt;why&lt;/strong&gt; he is right with a form submit example&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;HTML5 references&lt;/h2&gt;\n&lt;p&gt;There are &lt;a href=&quot;https://www.w3.org/TR/html5/sec-forms.html#element-attrdef-form-enctype&quot; rel=&quot;noreferrer&quot;&gt;three possibilities&lt;/a&gt; for &lt;code&gt;enctype&lt;/code&gt;:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://www.w3.org/TR/html5/sec-forms.html#urlencoded-form-data&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://www.w3.org/TR/html5/sec-forms.html#multipart-form-data&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;multipart/form-data&lt;/code&gt;&lt;/a&gt; (spec points to &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc7578&quot; rel=&quot;noreferrer&quot;&gt;RFC7578&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://www.w3.org/TR/html5/sec-forms.html#plain-text-form-data&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;text/plain&lt;/code&gt;&lt;/a&gt;. This is &quot;not reliably interpretable by computer&quot;, so it should never be used in production, and we will not look further into it.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;How to generate the examples&lt;/h2&gt;\n&lt;p&gt;Once you see an example of each method, it becomes obvious how they work, and when you should use each one.&lt;/p&gt;\n&lt;p&gt;You can produce examples using:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;nc -l&lt;/code&gt; or an ECHO server: &lt;a href=&quot;https://stackoverflow.com/questions/5725430/http-test-server-accepting-get-post-requests/52351480#52351480&quot;&gt;HTTP test server accepting GET/POST requests&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;a user agent like a browser or cURL&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Save the form to a minimal &lt;code&gt;.html&lt;/code&gt; file:&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;!DOCTYPE &lt;span class=&quot;hljs-keyword&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;lang&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;en&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;charset&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;upload&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost:8000&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;enctype&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/form-data&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text1&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text default&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text2&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;a&lt;span class=&quot;hljs-symbol&quot;&gt;&amp;amp;#x03C9;&lt;/span&gt;b&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file1&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file2&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file3&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;submit&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Submit&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;We set the default text value to &lt;code&gt;a&amp;amp;#x03C9;b&lt;/code&gt;, which means &lt;code&gt;aωb&lt;/code&gt; because &lt;code&gt;ω&lt;/code&gt; is &lt;code&gt;U+03C9&lt;/code&gt;, which are the bytes &lt;code&gt;61 CF 89 62&lt;/code&gt; in UTF-8.&lt;/p&gt;\n&lt;p&gt;Create files to upload:&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;echo &apos;Content of a.txt.&apos; &amp;gt; a.txt\n\necho &apos;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;!DOCTYPE &lt;span class=&quot;hljs-keyword&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;Content of a.html.&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;&apos; &amp;gt; a.html\n\n# Binary file containing 4 bytes: &apos;a&apos;, 1, 2 and &apos;b&apos;.\nprintf &apos;a\\xCF\\x89b&apos; &amp;gt; binary\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Run our little echo server:&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;while true; do printf &apos;&apos; | nc -l localhost 8000; done\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Open the HTML on your browser, select the files and click on submit and check the terminal.&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;nc&lt;/code&gt; prints the request received.&lt;/p&gt;\n&lt;p&gt;Tested on: Ubuntu 14.04.3, &lt;code&gt;nc&lt;/code&gt; BSD 1.105, Firefox 40.&lt;/p&gt;\n&lt;h2&gt;multipart/form-data&lt;/h2&gt;\n&lt;p&gt;Firefox sent:&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;POST / HTTP/1.1\n[[ Less interesting headers ... ]]\nContent-Type: multipart/form-data; boundary=---------------------------735323031399963166993862150\nContent-Length: 834\n\n-----------------------------735323031399963166993862150\nContent-Disposition: form-data; name=&quot;text1&quot;\n\ntext default\n-----------------------------735323031399963166993862150\nContent-Disposition: form-data; name=&quot;text2&quot;\n\naωb\n-----------------------------735323031399963166993862150\nContent-Disposition: form-data; name=&quot;file1&quot;; filename=&quot;a.txt&quot;\nContent-Type: text/plain\n\nContent of a.txt.\n\n-----------------------------735323031399963166993862150\nContent-Disposition: form-data; name=&quot;file2&quot;; filename=&quot;a.html&quot;\nContent-Type: text/html\n\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;!DOCTYPE &lt;span class=&quot;hljs-keyword&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;Content of a.html.&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n-----------------------------735323031399963166993862150\nContent-Disposition: form-data; name=&quot;file3&quot;; filename=&quot;binary&quot;\nContent-Type: application/octet-stream\n\naωb\n-----------------------------735323031399963166993862150--\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;For the binary file and text field, the bytes &lt;code&gt;61 CF 89 62&lt;/code&gt; (&lt;code&gt;aωb&lt;/code&gt; in UTF-8) are sent literally. You could verify that with &lt;code&gt;nc -l localhost 8000 | hd&lt;/code&gt;, which says that the bytes:&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;61 CF 89 62\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;were sent (&lt;code&gt;61&lt;/code&gt; == &apos;a&apos; and &lt;code&gt;62&lt;/code&gt; == &apos;b&apos;).&lt;/p&gt;\n&lt;p&gt;Therefore it is clear that:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;Content-Type: multipart/form-data; boundary=---------------------------735323031399963166993862150&lt;/code&gt; sets the content type to &lt;code&gt;multipart/form-data&lt;/code&gt; and says that the fields are separated by the given &lt;code&gt;boundary&lt;/code&gt; string.&lt;/p&gt;\n&lt;p&gt;But note that the:&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;boundary=---------------------------735323031399963166993862150\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;has two less dashes &lt;code&gt;--&lt;/code&gt; than the actual barrier&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;-----------------------------735323031399963166993862150\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This is because the standard requires the boundary to start with two dashes &lt;code&gt;--&lt;/code&gt;. The other dashes appear to be just how Firefox chose to implement the arbitrary boundary. RFC 7578 &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc7578#section-4.1&quot; rel=&quot;noreferrer&quot;&gt;clearly mentions&lt;/a&gt; that those two leading dashes &lt;code&gt;--&lt;/code&gt; are required:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;4.1.  &quot;Boundary&quot; Parameter of multipart/form-data&lt;/p&gt;\n&lt;p&gt;As with other multipart types, the parts are delimited with a\nboundary delimiter, constructed using CRLF, &quot;--&quot;, and the value of\nthe &quot;boundary&quot; parameter.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;every field gets some sub headers before its data: &lt;code&gt;Content-Disposition: form-data;&lt;/code&gt;, the field &lt;code&gt;name&lt;/code&gt;, the &lt;code&gt;filename&lt;/code&gt;, followed by the data.&lt;/p&gt;\n&lt;p&gt;The server reads the data until the next boundary string. The browser must choose a boundary that will not appear in any of the fields, so this is why the boundary may vary between requests.&lt;/p&gt;\n&lt;p&gt;Because we have the unique boundary, no encoding of the data is necessary: binary data is sent as is.&lt;/p&gt;\n&lt;p&gt;TODO: what is the optimal boundary size (&lt;code&gt;log(N)&lt;/code&gt; I bet), and name / running time of the algorithm that finds it? Asked at: &lt;a href=&quot;https://cs.stackexchange.com/questions/39687/find-the-shortest-sequence-that-is-not-a-sub-sequence-of-a-set-of-sequences&quot;&gt;https://cs.stackexchange.com/questions/39687/find-the-shortest-sequence-that-is-not-a-sub-sequence-of-a-set-of-sequences&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;Content-Type&lt;/code&gt; is automatically determined by the browser.&lt;/p&gt;\n&lt;p&gt;How it is determined exactly was asked at: &lt;a href=&quot;https://stackoverflow.com/questions/1201945/how-is-mime-type-of-an-uploaded-file-determined-by-browser&quot;&gt;How is mime type of an uploaded file determined by browser?&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;application/x-www-form-urlencoded&lt;/h2&gt;\n&lt;p&gt;Now change the &lt;code&gt;enctype&lt;/code&gt; to &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;, reload the browser, and resubmit.&lt;/p&gt;\n&lt;p&gt;Firefox sent:&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;POST / HTTP/1.1\n[[ Less interesting headers ... ]]\nContent-Type: application/x-www-form-urlencoded\nContent-Length: 51\n\ntext1=text+default&amp;amp;text2=a%CF%89b&amp;amp;file1=a.txt&amp;amp;file2=a.html&amp;amp;file3=binary\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Clearly the file data was not sent, only the basenames. So this cannot be used for files.&lt;/p&gt;\n&lt;p&gt;As for the text field, we see that usual printable characters like &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt; were sent in one byte, while non-printable ones like &lt;code&gt;0xCF&lt;/code&gt; and &lt;code&gt;0x89&lt;/code&gt; took up &lt;strong&gt;3 bytes&lt;/strong&gt; each: &lt;code&gt;%CF%89&lt;/code&gt;!&lt;/p&gt;\n&lt;h2&gt;Comparison&lt;/h2&gt;\n&lt;p&gt;File uploads often contain lots of non-printable characters (e.g. images), while text forms almost never do.&lt;/p&gt;\n&lt;p&gt;From the examples we have seen that:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;multipart/form-data&lt;/code&gt;: adds a few bytes of boundary overhead to the message, and must spend some time calculating it, but sends each byte in one byte.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;: has a single byte boundary per field (&lt;code&gt;&amp;amp;&lt;/code&gt;), but adds a &lt;em&gt;linear&lt;/em&gt; overhead factor of &lt;strong&gt;3x&lt;/strong&gt; for every non-printable character.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Therefore, even if we could send files with &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;, we wouldn&apos;t want to, because it is so inefficient.&lt;/p&gt;\n&lt;p&gt;But for printable characters found in text fields, it does not matter and generates less overhead, so we just use it.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;code&gt;enctype=&apos;multipart/form-data&lt;/code&gt; is an encoding type that allows files to be sent through a &lt;em&gt;POST&lt;/em&gt;. Quite simply, without this encoding the files cannot be sent through &lt;em&gt;POST&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;If you want to allow a user to upload a file via a form, you must use this &lt;em&gt;enctype&lt;/em&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;When submitting a form, you tell your browser to send, via the HTTP protocol, a message on the network, properly enveloped in a TCP/IP protocol message structure. An HTML page has a way to send data to the server: by using &lt;code&gt;&amp;lt;form&amp;gt;&lt;/code&gt;s.&lt;/p&gt;\n&lt;p&gt;When a form is submitted, an HTTP Request is created and sent to the server, the message will contain the field names in the form and the values filled in by the user. This transmission can happen with &lt;code&gt;POST&lt;/code&gt; or &lt;code&gt;GET&lt;/code&gt; &lt;em&gt;HTTP methods&lt;/em&gt;.&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/a&gt; tells your browser to build an HTTP message and put all content in the body of the message (a very useful way of doing things, more safe and also flexible).&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;GET&lt;/code&gt;&lt;/a&gt; will submit the form data in the &lt;em&gt;querystring&lt;/em&gt;. It has some constraints about data representation and length.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3&gt;Stating how to send your form to the server&lt;/h3&gt;\n&lt;p&gt;Attribute &lt;code&gt;enctype&lt;/code&gt; has sense only when using &lt;code&gt;POST&lt;/code&gt; method. When specified, it instructs the browser to send the form by encoding its content in a specific way. From &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#attr-enctype&quot; rel=&quot;nofollow noreferrer&quot;&gt;MDN - Form enctype&lt;/a&gt;:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;When the value of the method attribute is post, enctype is the MIME\ntype of content that is used to submit the form to the server.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;: This is the default. When the form is sent, all names and values are collected and &lt;a href=&quot;https://en.wikipedia.org/wiki/Percent-encoding&quot; rel=&quot;nofollow noreferrer&quot;&gt;URL Encoding&lt;/a&gt; is performed on the final string.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;multipart/form-data&lt;/code&gt;: Characters are NOT encoded. This is important when the form has a file upload control. You want to send the file binary and this ensures that bitstream is not altered.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;text/plain&lt;/code&gt;: Spaces get converted, but no more encoding is performed.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3&gt;Security&lt;/h3&gt;\n&lt;p&gt;When submitting forms, some security concerns can arise as stated in &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc7578#section-7&quot; rel=&quot;nofollow noreferrer&quot;&gt;RFC 7578 Section 7: Multipart form data - Security considerations&lt;/a&gt;:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;All form-processing software should treat user supplied form-data&lt;br&gt;\nwith sensitivity, as it often contains confidential or personally&lt;br&gt;\nidentifying information. There is widespread use of form &quot;auto-fill&quot;\nfeatures in web browsers; these might be used to trick users to&lt;br&gt;\nunknowingly send confidential information when completing otherwise&lt;br&gt;\ninnocuous tasks. multipart/form-data does not supply any features&lt;br&gt;\nfor checking integrity, ensuring confidentiality, avoiding user&lt;br&gt;\nconfusion, or other security features; those concerns must be&lt;br&gt;\naddressed by the form-filling and form-data-interpreting applications.&lt;/p&gt;\n&lt;p&gt;Applications that receive forms and process them must be careful\nnot to supply data back to the requesting form-processing site that\nwas not intended to be sent.&lt;/p&gt;\n&lt;p&gt;It is important when interpreting the filename of the Content-&lt;br&gt;\nDisposition header field to not inadvertently overwrite files in the&lt;br&gt;\nrecipient&apos;s file space.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;This concerns you if you are a developer and your server will process forms submitted by users which might end up containing sensitive information.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;code&gt;enctype=&apos;multipart/form-data&apos;&lt;/code&gt; means that no characters will be encoded. that is why this type is used while uploading files to server.&lt;br&gt;\nSo &lt;code&gt;multipart/form-data&lt;/code&gt; is used when a form requires binary data, like the contents of a file, to be uploaded&lt;/p&gt;\n    ","\n&lt;p&gt;Set the method attribute to POST because file content can&apos;t be put inside a URL       parameter using a form.&lt;/p&gt;\n\n&lt;p&gt;Set the value of enctype to multipart/form-data because the data will be split into multiple parts, one for each file plus one for the text of the form body that may be sent with them.&lt;/p&gt;\n    ","\n&lt;ul&gt;\n&lt;li&gt;enctype(&lt;strong&gt;ENC&lt;/strong&gt;ode &lt;strong&gt;TYPE&lt;/strong&gt;)  attribute specifies how the form-data should be encoded when submitting it to the server.  &lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;multipart/form-data&lt;/strong&gt;  is one of the value of enctype attribute, which is used in form element that have a file upload. &lt;strong&gt;multi-part&lt;/strong&gt; means form data divides into &lt;strong&gt;multiple parts&lt;/strong&gt; and send to server.  &lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;Usually this is when you have a POST form which needs to take a file upload as data... this will tell the server how it will encode the data transferred, in such case it won&apos;t get encoded because it will just transfer and upload the files to the server, Like for example when uploading an image or a pdf&lt;/p&gt;\n    ","\n&lt;p&gt;This value is necessary if the user will upload a file through the form&lt;/p&gt;\n&lt;p&gt;Kindly read this&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://www.w3schools.com/tags/att_form_enctype.asp&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://www.w3schools.com/tags/att_form_enctype.asp&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;The enctype attribute specifies how the form-data should be encoded when submitting it to the server.&lt;/p&gt;\n  \n  &lt;p&gt;The enctype attribute can be used only if method=&quot;post&quot;.&lt;/p&gt;\n  \n  &lt;p&gt;No characters are encoded. This value is required when you are using forms that have a file upload control&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;From &lt;a href=&quot;https://www.w3schools.com/TAGs/att_form_enctype.asp&quot; rel=&quot;nofollow noreferrer&quot;&gt;W3Schools&lt;/a&gt;&lt;/p&gt;\n    "],"510":["\n&lt;p&gt;You can access capturing groups like this:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myString = &lt;span class=&quot;hljs-string&quot;&gt;&quot;something format_abc&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myRegexp = &lt;span class=&quot;hljs-regexp&quot;&gt;/(?:^|\\s)format_(.*?)(?:\\s|$)/g&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myRegexp = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;(?:^|\\s)format_(.*?)(?:\\s|$)&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;g&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; match = myRegexp.&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(myString);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(match[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]); &lt;span class=&quot;hljs-comment&quot;&gt;// abc&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;And if there are multiple matches you can iterate over them:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myString = &lt;span class=&quot;hljs-string&quot;&gt;&quot;something format_abc&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myRegexp = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;(?:^|\\s)format_(.*?)(?:\\s|$)&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;g&quot;&lt;/span&gt;);\nmatch = myRegexp.&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(myString);\n&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (match != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-comment&quot;&gt;// matched text: match[0]&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// match start: match.index&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// capturing group n: match[n]&lt;/span&gt;\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(match[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])\n  match = myRegexp.&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(myString);\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif3&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;h2&gt;Edit: 2019-09-10&lt;/h2&gt;\n&lt;p&gt;As you can see the way to iterate over multiple matches was not very intuitive. This lead to the proposal of the &lt;a href=&quot;https://github.com/tc39/proposal-string-matchall&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;String.prototype.matchAll&lt;/code&gt;&lt;/a&gt; method. This new method is expected to ship in the &lt;a href=&quot;https://tc39.es/ecma262/#sec-string.prototype.matchall&quot; rel=&quot;noreferrer&quot;&gt;ECMAScript 2020 specification&lt;/a&gt;. It gives us a clean API and solves multiple problems. It has been started to land on major browsers and JS engines as &lt;a href=&quot;https://v8.dev/features/string-matchall&quot; rel=&quot;noreferrer&quot;&gt;Chrome 73+ / Node 12+&lt;/a&gt; and Firefox 67+.&lt;/p&gt;\n&lt;p&gt;The method returns an iterator and is used as follows:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; string = &lt;span class=&quot;hljs-string&quot;&gt;&quot;something format_abc&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; regexp = &lt;span class=&quot;hljs-regexp&quot;&gt;/(?:^|\\s)format_(.*?)(?:\\s|$)/g&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; matches = string.&lt;span class=&quot;hljs-title function_&quot;&gt;matchAll&lt;/span&gt;(regexp);\n    \n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; match &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; matches) {\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(match);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(match.&lt;span class=&quot;hljs-property&quot;&gt;index&lt;/span&gt;)\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif4&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;As it returns an iterator, we can say it&apos;s lazy, this is useful when handling particularly large numbers of capturing groups, or very large strings. But if you need, the result can be easily transformed into an Array by using the &lt;em&gt;spread syntax&lt;/em&gt; or the &lt;code&gt;Array.from&lt;/code&gt; method:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFirstGroup&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;regexp, str&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; array = [...str.&lt;span class=&quot;hljs-title function_&quot;&gt;matchAll&lt;/span&gt;(regexp)];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; array.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;m&lt;/span&gt; =&amp;gt;&lt;/span&gt; m[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// or:&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFirstGroup&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;regexp, str&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;from&lt;/span&gt;(str.&lt;span class=&quot;hljs-title function_&quot;&gt;matchAll&lt;/span&gt;(regexp), &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;m&lt;/span&gt; =&amp;gt;&lt;/span&gt; m[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;In the meantime, while this proposal gets more wide support, you can use the &lt;a href=&quot;https://www.npmjs.com/package/string.prototype.matchall&quot; rel=&quot;noreferrer&quot;&gt;official shim package&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;Also, the internal workings of the method are simple. An equivalent implementation using a generator function would be as follows:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;* &lt;span class=&quot;hljs-title function_&quot;&gt;matchAll&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;str, regexp&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; flags = regexp.&lt;span class=&quot;hljs-property&quot;&gt;global&lt;/span&gt; ? regexp.&lt;span class=&quot;hljs-property&quot;&gt;flags&lt;/span&gt; : regexp.&lt;span class=&quot;hljs-property&quot;&gt;flags&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot;g&quot;&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; re = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(regexp, flags);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; match;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (match = re.&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(str)) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; match;\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;A copy of the original regexp is created; this is to avoid side-effects due to the mutation of the &lt;code&gt;lastIndex&lt;/code&gt; property when going through the multple matches.&lt;/p&gt;\n&lt;p&gt;Also, we need to ensure the regexp has the &lt;em&gt;global&lt;/em&gt; flag to avoid an infinite loop.&lt;/p&gt;\n&lt;p&gt;I&apos;m also happy to see that even this StackOverflow question was referenced in the &lt;a href=&quot;https://github.com/tc39/proposal-string-matchall#previous-discussions&quot; rel=&quot;noreferrer&quot;&gt;discussions of the proposal&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;Heres a method you can use to get the &lt;em&gt;n&lt;/em&gt;th capturing group for each match:&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getMatches&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;string, regex, index&lt;/span&gt;) {\n  index || (index = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// default to the first capturing group&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = [];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; match;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (match = regex.&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(string)) {\n    matches.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(match[index]);\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; matches;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Example :&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myString = &lt;span class=&quot;hljs-string&quot;&gt;&apos;something format_abc something format_def something format_ghi&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myRegEx = &lt;span class=&quot;hljs-regexp&quot;&gt;/(?:^|\\s)format_(.*?)(?:\\s|$)/g&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Get an array containing the first capturing group for every match&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = &lt;span class=&quot;hljs-title function_&quot;&gt;getMatches&lt;/span&gt;(myString, myRegEx, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Log results&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;write&lt;/span&gt;(matches.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&apos; matches found: &apos;&lt;/span&gt; + &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(matches))\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(matches);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif5&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myString = &lt;span class=&quot;hljs-string&quot;&gt;&quot;something format_abc&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; arr = myString.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\bformat_(.*?)\\b/&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(arr[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] + &lt;span class=&quot;hljs-string&quot;&gt;&quot; &quot;&lt;/span&gt; + arr[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif6&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;The &lt;code&gt;\\b&lt;/code&gt; isn&apos;t exactly the same thing. (It works on &lt;code&gt;--format_foo/&lt;/code&gt;, but doesn&apos;t work on &lt;code&gt;format_a_b&lt;/code&gt;) But I wanted to show an alternative to your expression, which is fine. Of course, the &lt;code&gt;match&lt;/code&gt; call is the important thing.&lt;/p&gt;\n    ","\n&lt;p&gt;Last but not least, I found one line of code that worked fine for me (JS ES6):&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; reg = &lt;span class=&quot;hljs-regexp&quot;&gt;/#([\\S]+)/igm&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Get hashtags.&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; string = &lt;span class=&quot;hljs-string&quot;&gt;&apos;mi alegría es total! \\n#fiestasdefindeaño #PadreHijo #buenosmomentos #france #paris&apos;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; matches = (string.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(reg) || []).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;e&lt;/span&gt; =&amp;gt;&lt;/span&gt; e.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(reg, &lt;span class=&quot;hljs-string&quot;&gt;&apos;$1&apos;&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(matches);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif7&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;This will return:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[&lt;span class=&quot;hljs-string&quot;&gt;&apos;fiestasdefindeaño&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;PadreHijo&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;buenosmomentos&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;france&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;paris&apos;&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;In regards to the multi-match parentheses examples above, I was looking for an answer here after not getting what I wanted from:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = mystring.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/(?:neededToMatchButNotWantedInResult)(matchWanted)/igm&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;After looking at the slightly convoluted function calls with while and .push() above, it dawned on me that the problem can be solved very elegantly with mystring.replace() instead (the replacing is NOT the point, and isn&apos;t even done, the CLEAN, built-in recursive function call option for the second parameter is!):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; yourstring = &lt;span class=&quot;hljs-string&quot;&gt;&apos;something format_abc something format_def something format_ghi&apos;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = [];\nyourstring.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/format_([^\\s]+)/igm&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;m, p1&lt;/span&gt;){ matches.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(p1); } );\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;After this, I don&apos;t think I&apos;m ever going to use .match() for hardly anything ever again.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;&lt;code&gt;String#matchAll&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; (see the &lt;a href=&quot;https://tc39.github.io/proposal-string-matchall/#sec-string-prototype-matchall&quot; rel=&quot;noreferrer&quot;&gt;Stage 3 Draft / December 7, 2018 proposal&lt;/a&gt;), simplifies acccess to all groups in the match object (mind that Group 0 is the whole match, while further groups correspond to the capturing groups in the pattern):&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;With &lt;code&gt;matchAll&lt;/code&gt; available, you can avoid the &lt;code&gt;while&lt;/code&gt; loop and &lt;code&gt;exec&lt;/code&gt; with &lt;code&gt;/g&lt;/code&gt;... Instead, by using &lt;code&gt;matchAll&lt;/code&gt;, you get back an iterator which you can use with the more convenient &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;for...of&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax&quot; rel=&quot;noreferrer&quot;&gt;array spread&lt;/a&gt;, or &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;Array.from()&lt;/code&gt;&lt;/a&gt; constructs&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;This method yields a similar output to &lt;code&gt;Regex.Matches&lt;/code&gt; in C#, &lt;code&gt;re.finditer&lt;/code&gt; in Python, &lt;code&gt;preg_match_all&lt;/code&gt; in PHP.&lt;/p&gt;\n\n&lt;p&gt;See a JS demo (tested in Google Chrome 73.0.3683.67 (official build), beta (64-bit)):&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myString = &lt;span class=&quot;hljs-string&quot;&gt;&quot;key1:value1, key2-value2!!@key3=value3&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = myString.&lt;span class=&quot;hljs-title function_&quot;&gt;matchAll&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/(\\w+)[:=-](\\w+)/g&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;([...matches]); &lt;span class=&quot;hljs-comment&quot;&gt;// All match with capturing group values&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif8&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;The &lt;code&gt;console.log([...matches])&lt;/code&gt; shows&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/hfFbK.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/hfFbK.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;You may also get match value or specific group values using&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; matchData = &lt;span class=&quot;hljs-string&quot;&gt;&quot;key1:value1, key2-value2!!@key3=value3&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;matchAll&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/(\\w+)[:=-](\\w+)/g&lt;/span&gt;)\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = [...matchData]; &lt;span class=&quot;hljs-comment&quot;&gt;// Note matchAll result is not re-iterable&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;from&lt;/span&gt;(matches, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;m&lt;/span&gt; =&amp;gt;&lt;/span&gt; m[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])); &lt;span class=&quot;hljs-comment&quot;&gt;// All match (Group 0) values&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; [ &quot;key1:value1&quot;, &quot;key2-value2&quot;, &quot;key3=value3&quot; ]&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;from&lt;/span&gt;(matches, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;m&lt;/span&gt; =&amp;gt;&lt;/span&gt; m[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])); &lt;span class=&quot;hljs-comment&quot;&gt;// All match (Group 1) values&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; [ &quot;key1&quot;, &quot;key2&quot;, &quot;key3&quot; ]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif9&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt;: See the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll#Browser_compatibility&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;browser compatibility&lt;/strong&gt;&lt;/a&gt; details.&lt;/p&gt;\n    ","\n&lt;h2&gt;Terminology used in this answer:&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Match&lt;/strong&gt; indicates the result of running your RegEx pattern against your string like so: &lt;code&gt;someString.match(regexPattern)&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Matched patterns&lt;/strong&gt; indicate all matched portions of the input string, which all reside inside the &lt;strong&gt;match&lt;/strong&gt; array. These are all instances of your pattern inside the input string.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Matched groups&lt;/strong&gt; indicate all groups to catch, defined in the RegEx pattern. (The patterns inside parentheses, like so: &lt;code&gt;/format_(.*?)/g&lt;/code&gt;, where &lt;code&gt;(.*?)&lt;/code&gt; would be a matched group.) These reside within &lt;strong&gt;matched patterns&lt;/strong&gt;.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;Description&lt;/h2&gt;\n\n&lt;p&gt;To get access to the &lt;em&gt;matched groups&lt;/em&gt;, in each of the &lt;em&gt;matched patterns&lt;/em&gt;, you need a function or something similar to iterate over the &lt;em&gt;match&lt;/em&gt;. There are a number of ways you can do this, as many of the other answers show. Most other answers use a while loop to iterate over all &lt;em&gt;matched patterns&lt;/em&gt;, but I think we all know the potential dangers with that approach. It is necessary to match against a &lt;code&gt;new RegExp()&lt;/code&gt; instead of just the pattern itself, which only got mentioned in a comment. This is because the &lt;code&gt;.exec()&lt;/code&gt; method behaves similar to a &lt;em&gt;generator function&lt;/em&gt;  &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec#Description&quot; rel=&quot;noreferrer&quot;&gt;it stops every time there is a match&lt;/a&gt;, but keeps its &lt;code&gt;.lastIndex&lt;/code&gt; to continue from there on the next &lt;code&gt;.exec()&lt;/code&gt; call.&lt;/p&gt;\n\n&lt;h2&gt;Code examples&lt;/h2&gt;\n\n&lt;p&gt;Below is an example of a function &lt;code&gt;searchString&lt;/code&gt; which returns an &lt;code&gt;Array&lt;/code&gt; of all &lt;em&gt;matched patterns&lt;/em&gt;, where each &lt;code&gt;match&lt;/code&gt; is an &lt;code&gt;Array&lt;/code&gt; with all the containing &lt;em&gt;matched groups&lt;/em&gt;. Instead of using a while loop, I have provided examples using both the &lt;code&gt;Array.prototype.map()&lt;/code&gt; function as well as a more performant way  using a plain &lt;code&gt;for&lt;/code&gt;-loop.&lt;/p&gt;\n\n&lt;h3&gt;Concise versions (less code, more syntactic sugar)&lt;/h3&gt;\n\n&lt;p&gt;These are less performant since they basically implement a &lt;code&gt;forEach&lt;/code&gt;-loop instead of the faster &lt;code&gt;for&lt;/code&gt;-loop.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Concise ES6/ES2015 syntax&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;searchString&lt;/span&gt; = \n    (&lt;span class=&quot;hljs-params&quot;&gt;string, pattern&lt;/span&gt;) =&amp;gt; \n        string\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(pattern.&lt;span class=&quot;hljs-property&quot;&gt;source&lt;/span&gt;, pattern.&lt;span class=&quot;hljs-property&quot;&gt;flags&lt;/span&gt;))\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;match&lt;/span&gt; =&amp;gt;&lt;/span&gt; \n            &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(pattern.&lt;span class=&quot;hljs-property&quot;&gt;source&lt;/span&gt;, pattern.&lt;span class=&quot;hljs-property&quot;&gt;flags&lt;/span&gt;)\n            .&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(match));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Or if you will, with ES5 syntax&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;searchString&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;string, pattern&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; string\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(pattern.&lt;span class=&quot;hljs-property&quot;&gt;source&lt;/span&gt;, pattern.&lt;span class=&quot;hljs-property&quot;&gt;flags&lt;/span&gt;))\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;match&lt;/span&gt; =&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(pattern.&lt;span class=&quot;hljs-property&quot;&gt;source&lt;/span&gt;, pattern.&lt;span class=&quot;hljs-property&quot;&gt;flags&lt;/span&gt;)\n            .&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(match));\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; string = &lt;span class=&quot;hljs-string&quot;&gt;&quot;something format_abc&quot;&lt;/span&gt;,\n    pattern = &lt;span class=&quot;hljs-regexp&quot;&gt;/(?:^|\\s)format_(.*?)(?:\\s|$)/&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; result = &lt;span class=&quot;hljs-title function_&quot;&gt;searchString&lt;/span&gt;(string, pattern);\n&lt;span class=&quot;hljs-comment&quot;&gt;// [[&quot; format_abc&quot;, &quot;abc&quot;], null]&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// The trailing `null` disappears if you add the `global` flag&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h3&gt;Performant versions (more code, less syntactic sugar)&lt;/h3&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Performant ES6/ES2015 syntax&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;searchString&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;string, pattern&lt;/span&gt;) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; result = [];\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; matches = string.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(pattern.&lt;span class=&quot;hljs-property&quot;&gt;source&lt;/span&gt;, pattern.&lt;span class=&quot;hljs-property&quot;&gt;flags&lt;/span&gt;));\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; matches.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n        result.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(pattern.&lt;span class=&quot;hljs-property&quot;&gt;source&lt;/span&gt;, pattern.&lt;span class=&quot;hljs-property&quot;&gt;flags&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(matches[i]));\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n};\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Same thing, but with ES5 syntax&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;searchString&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;string, pattern&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result = [];\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = string.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(pattern.&lt;span class=&quot;hljs-property&quot;&gt;source&lt;/span&gt;, pattern.&lt;span class=&quot;hljs-property&quot;&gt;flags&lt;/span&gt;));\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; matches.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n        result.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(pattern.&lt;span class=&quot;hljs-property&quot;&gt;source&lt;/span&gt;, pattern.&lt;span class=&quot;hljs-property&quot;&gt;flags&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(matches[i]));\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; string = &lt;span class=&quot;hljs-string&quot;&gt;&quot;something format_abc&quot;&lt;/span&gt;,\n    pattern = &lt;span class=&quot;hljs-regexp&quot;&gt;/(?:^|\\s)format_(.*?)(?:\\s|$)/&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; result = &lt;span class=&quot;hljs-title function_&quot;&gt;searchString&lt;/span&gt;(string, pattern);\n&lt;span class=&quot;hljs-comment&quot;&gt;// [[&quot; format_abc&quot;, &quot;abc&quot;], null]&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// The trailing `null` disappears if you add the `global` flag&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I have yet to compare these alternatives to the ones previously mentioned in the other answers, but I doubt this approach is less performant and less fail-safe than the others.&lt;/p&gt;\n    ","\n&lt;p&gt;Your syntax probably isn&apos;t the best to keep. FF/Gecko defines RegExp as an extension of Function.&lt;br&gt;\n(FF2 went as far as &lt;code&gt;typeof(/pattern/) == &apos;function&apos;&lt;/code&gt;)&lt;/p&gt;\n\n&lt;p&gt;It seems this is specific to FF -- IE, Opera, and Chrome all throw exceptions for it.&lt;/p&gt;\n\n&lt;p&gt;Instead, use either method previously mentioned by others: &lt;code&gt;RegExp#exec&lt;/code&gt; or &lt;code&gt;String#match&lt;/code&gt;.&lt;br&gt;\nThey offer the same results:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; regex = &lt;span class=&quot;hljs-regexp&quot;&gt;/(?:^|\\s)format_(.*?)(?:\\s|$)/&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; input = &lt;span class=&quot;hljs-string&quot;&gt;&quot;something format_abc&quot;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;regex&lt;/span&gt;(input);        &lt;span class=&quot;hljs-comment&quot;&gt;//=&amp;gt; [&quot; format_abc&quot;, &quot;abc&quot;]&lt;/span&gt;\nregex.&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(input);   &lt;span class=&quot;hljs-comment&quot;&gt;//=&amp;gt; [&quot; format_abc&quot;, &quot;abc&quot;]&lt;/span&gt;\ninput.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(regex);  &lt;span class=&quot;hljs-comment&quot;&gt;//=&amp;gt; [&quot; format_abc&quot;, &quot;abc&quot;]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;There is no need to invoke the &lt;code&gt;exec&lt;/code&gt; method! You can use &quot;match&quot; method directly on the string. Just don&apos;t forget the parentheses.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; str = &lt;span class=&quot;hljs-string&quot;&gt;&quot;This is cool&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = str.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/(This is)( cool)$/&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;( &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(matches) ); &lt;span class=&quot;hljs-comment&quot;&gt;// will print [&quot;This is cool&quot;,&quot;This is&quot;,&quot; cool&quot;] or something like that...&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Position 0 has a string with all the results. Position 1 has the first match represented by parentheses, and position 2 has the second match isolated in your parentheses. Nested parentheses are tricky, so beware!&lt;/p&gt;\n    ","\n&lt;p&gt;With es2018 you can now &lt;code&gt;String.match()&lt;/code&gt; with named groups, makes your regex more explicit of what it was trying to do.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; url =\n  &lt;span class=&quot;hljs-string&quot;&gt;&apos;https://stackoverflow.com/questions/432493/how-do-you-access-the-matched-groups-in-a-javascript-regular-expression?some=parameter&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; regex = &lt;span class=&quot;hljs-regexp&quot;&gt;/(?&amp;lt;protocol&amp;gt;https?):\\/\\/(?&amp;lt;hostname&amp;gt;[\\w-\\.]*)\\/(?&amp;lt;pathname&amp;gt;[\\w-\\./]+)\\??(?&amp;lt;querystring&amp;gt;.*?)?$/&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;groups&lt;/span&gt;: segments } = url.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(regex);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(segments);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and you&apos;ll get something like &lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;blockquote&gt;\n    &lt;blockquote&gt;\n      &lt;p&gt;{protocol: &quot;https&quot;, hostname: &quot;stackoverflow.com&quot;, pathname: &quot;questions/432493/how-do-you-access-the-matched-groups-in-a-javascript-regular-expression&quot;, querystring: &quot;some=parameter&quot;}&lt;/p&gt;\n    &lt;/blockquote&gt;\n  &lt;/blockquote&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;p&gt;A one liner that is practical only if you have a single pair of parenthesis:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; ( ( match = myRegex.&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;( myStr ) ) &amp;amp;&amp;amp; matches.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;( match[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] ) ) {};\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Using your code:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(arr[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);  &lt;span class=&quot;hljs-comment&quot;&gt;// prints: abc&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(arr[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]);  &lt;span class=&quot;hljs-comment&quot;&gt;// prints:  format_abc&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Edit: Safari 3, if it matters.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getMatches&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;string, regex, index&lt;/span&gt;) {\n  index || (index = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// default to the first capturing group&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = [];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; match;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (match = regex.&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(string)) {\n    matches.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(match[index]);\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; matches;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Example :&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myString = &lt;span class=&quot;hljs-string&quot;&gt;&apos;Rs.200 is Debited to A/c ...2031 on 02-12-14 20:05:49 (Clear Bal Rs.66248.77) AT ATM. TollFree 1800223344 18001024455 (6am-10pm)&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myRegEx = &lt;span class=&quot;hljs-regexp&quot;&gt;/clear bal.+?(\\d+\\.?\\d{2})/gi&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Get an array containing the first capturing group for every match&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = &lt;span class=&quot;hljs-title function_&quot;&gt;getMatches&lt;/span&gt;(myString, myRegEx, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Log results&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;write&lt;/span&gt;(matches.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&apos; matches found: &apos;&lt;/span&gt; + &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(matches))\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(matches);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif10&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getMatches&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;string, regex, index&lt;/span&gt;) {\n  index || (index = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// default to the first capturing group&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = [];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; match;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (match = regex.&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(string)) {\n    matches.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(match[index]);\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; matches;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Example :&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myString = &lt;span class=&quot;hljs-string&quot;&gt;&apos;something format_abc something format_def something format_ghi&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myRegEx = &lt;span class=&quot;hljs-regexp&quot;&gt;/(?:^|\\s)format_(.*?)(?:\\s|$)/g&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Get an array containing the first capturing group for every match&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; matches = &lt;span class=&quot;hljs-title function_&quot;&gt;getMatches&lt;/span&gt;(myString, myRegEx, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Log results&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;write&lt;/span&gt;(matches.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&apos; matches found: &apos;&lt;/span&gt; + &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(matches))\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(matches);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif11&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Your code works for me (FF3 on Mac) even if I agree with &lt;a href=&quot;https://stackoverflow.com/users/15459/philho&quot;&gt;PhiLo&lt;/a&gt; that the regex should probably be:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;/\\&lt;span class=&quot;hljs-title function_&quot;&gt;bformat_&lt;/span&gt;(.*?)\\b/\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;(But, of course, I&apos;m not sure because I don&apos;t know the context of the regex.)&lt;/p&gt;\n    ","\n&lt;p&gt;As @cms said in ECMAScript (ECMA-262) you can use &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;matchAll&lt;/code&gt;&lt;/a&gt;. It return an iterator and by putting it in &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;[... ]&lt;/code&gt;&lt;/a&gt; (spread operator) it converts to an array.(this regex extract urls of file names)&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; text = &lt;span class=&quot;hljs-string&quot;&gt;`&amp;lt;a href=&quot;http://myhost.com/myfile_01.mp4&quot;&amp;gt;File1&amp;lt;/a&amp;gt; &amp;lt;a href=&quot;http://myhost.com/myfile_02.mp4&quot;&amp;gt;File2&amp;lt;/a&amp;gt;`&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; fileUrls = [...text.&lt;span class=&quot;hljs-title function_&quot;&gt;matchAll&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/href=&quot;(http\\:\\/\\/[^&quot;]+\\.\\w{3})\\&quot;/g&lt;/span&gt;)].&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;r&lt;/span&gt; =&amp;gt;&lt;/span&gt; r[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(fileUrls);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif12&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/*Regex function for extracting object from &quot;window.location.search&quot; string.\n */&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; search = &lt;span class=&quot;hljs-string&quot;&gt;&quot;?a=3&amp;amp;b=4&amp;amp;c=7&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Example search string&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; getSearchObj = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;searchString&lt;/span&gt;) {\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; match, key, value, obj = {};\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; pattern = &lt;span class=&quot;hljs-regexp&quot;&gt;/(\\w+)=(\\w+)/g&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; search = searchString.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Remove &apos;?&apos;&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (match = pattern.&lt;span class=&quot;hljs-title function_&quot;&gt;exec&lt;/span&gt;(search)) {\n        obj[match[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;=&apos;&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]] = match[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;=&apos;&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;];\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj;\n\n};\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;getSearchObj&lt;/span&gt;(search));\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You don&apos;t really need an explicit loop to parse multiple matches  pass a replacement function as the second argument as described in: &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Using_an_inline_function_that_modifies_the_matched_characters&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;String.prototype.replace(regex, func)&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;false&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; str = &lt;span class=&quot;hljs-string&quot;&gt;&quot;Our chief weapon is {1}, {0} and {2}!&quot;&lt;/span&gt;; \n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; params= [&lt;span class=&quot;hljs-string&quot;&gt;&apos;surprise&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;fear&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;ruthless efficiency&apos;&lt;/span&gt;];\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; patt = &lt;span class=&quot;hljs-regexp&quot;&gt;/{([^}]+)}/g&lt;/span&gt;;\n\nstr=str.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(patt, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;m0, m1, position&lt;/span&gt;){&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; params[&lt;span class=&quot;hljs-built_in&quot;&gt;parseInt&lt;/span&gt;(m1)];});\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;write&lt;/span&gt;(str);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif13&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;The &lt;code&gt;m0&lt;/code&gt; argument represents the full matched substring &lt;code&gt;{0}&lt;/code&gt;, &lt;code&gt;{1}&lt;/code&gt;, etc. &lt;code&gt;m1&lt;/code&gt; represents the first matching group, i.e. the part enclosed in brackets in the regex which is &lt;code&gt;0&lt;/code&gt; for the first match. And &lt;code&gt;position&lt;/code&gt; is the starting index within the string where the matching group was found  unused in this case.&lt;/p&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;We can access the matched group in a regular expressions by using backslash followed by number of the matching group:&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;/([a-z])\\&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;/\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;In the code \\1 represented matched by first group ([a-z])&lt;/strong&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;One line solution:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;matches&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;text,regex&lt;/span&gt;) =&amp;gt; [...text.&lt;span class=&quot;hljs-title function_&quot;&gt;matchAll&lt;/span&gt;(regex)].&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;[match]&lt;/span&gt;)=&amp;gt;&lt;/span&gt;match)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;So you can use this way (must use /g):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;matches&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;something format_abc&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-regexp&quot;&gt;/(?:^|\\s)format_(.*?)(?:\\s|$)/g&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;result:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[&lt;span class=&quot;hljs-string&quot;&gt;&quot; format_abc&quot;&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;JUST USE RegExp.$1...$n th group\neg:&lt;/p&gt;\n\n&lt;p&gt;1.To match 1st group RegExp.$1&lt;/p&gt;\n\n&lt;ol start=&quot;2&quot;&gt;\n&lt;li&gt;To match 2nd group RegExp.$2&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;if you use 3 group in regex likey(note use after string.match(regex))&lt;/p&gt;\n\n&lt;p&gt;RegExp.$1 RegExp.$2 RegExp.$3&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; str = &lt;span class=&quot;hljs-string&quot;&gt;&quot;The rain in ${india} stays safe&quot;&lt;/span&gt;; \n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; res = str.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\${(.*?)\\}/ig&lt;/span&gt;);\n  &lt;span class=&quot;hljs-comment&quot;&gt;//i used only one group in above example so RegExp.$1&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;$1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif14&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//easiest way is use RegExp.$1 1st group in regex and 2nd grounp like&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;//RegExp.$2 if exist use after match&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; regex=&lt;span class=&quot;hljs-regexp&quot;&gt;/\\${(.*?)\\}/ig&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; str = &lt;span class=&quot;hljs-string&quot;&gt;&quot;The rain in ${SPAIN} stays ${mainly} in the plain&quot;&lt;/span&gt;; \n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; res = str.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(regex);\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; match &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; res) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; res = match.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(regex);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(match);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;$1&lt;/span&gt;)\n \n}&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif15&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Get all group occurrence &lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; m=[], s = &lt;span class=&quot;hljs-string&quot;&gt;&quot;something format_abc  format_def  format_ghi&quot;&lt;/span&gt;;\n\ns.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/(?:^|\\s)format_(.*?)(?:\\s|$)/g&lt;/span&gt;, &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x,y&lt;/span&gt;)=&amp;gt;&lt;/span&gt; m.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(y));\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(m);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif16&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I you are like me and wish regex would return an Object like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;{\n    &lt;span class=&quot;hljs-attr&quot;&gt;match&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;...&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;matchAtIndex&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;capturedGroups&lt;/span&gt;: [ &lt;span class=&quot;hljs-string&quot;&gt;&apos;...&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;...&apos;&lt;/span&gt; ]\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;then snip the function from below&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;true&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; {&lt;span class=&quot;hljs-type&quot;&gt;string | number&lt;/span&gt;} &lt;span class=&quot;hljs-variable&quot;&gt;input&lt;/span&gt;\n *          The input string to match\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; {&lt;span class=&quot;hljs-type&quot;&gt;regex | string&lt;/span&gt;}  &lt;span class=&quot;hljs-variable&quot;&gt;expression&lt;/span&gt;\n *          Regular expression \n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; {&lt;span class=&quot;hljs-type&quot;&gt;string&lt;/span&gt;} &lt;span class=&quot;hljs-variable&quot;&gt;flags&lt;/span&gt;\n *          Optional Flags\n * \n * &lt;span class=&quot;hljs-doctag&quot;&gt;@returns&lt;/span&gt; {&lt;span class=&quot;hljs-type&quot;&gt;array&lt;/span&gt;}\n * [{\n    match: &apos;...&apos;,\n    matchAtIndex: 0,\n    capturedGroups: [ &apos;...&apos;, &apos;...&apos; ]\n  }]     \n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;regexMatch&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;input, expression, flags = &lt;span class=&quot;hljs-string&quot;&gt;&quot;g&quot;&lt;/span&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; regex = expression &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt; ? expression : &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(expression, flags)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; matches = input.&lt;span class=&quot;hljs-title function_&quot;&gt;matchAll&lt;/span&gt;(regex)\n  matches = [...matches]\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; matches.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {\n      &lt;span class=&quot;hljs-attr&quot;&gt;match&lt;/span&gt;: item[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;],\n      &lt;span class=&quot;hljs-attr&quot;&gt;matchAtIndex&lt;/span&gt;: item.&lt;span class=&quot;hljs-property&quot;&gt;index&lt;/span&gt;,\n      &lt;span class=&quot;hljs-attr&quot;&gt;capturedGroups&lt;/span&gt;: item.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; ? item.&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) : &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;\n    }\n  })\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; input = &lt;span class=&quot;hljs-string&quot;&gt;&quot;key1:value1, key2:value2 &quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; regex = &lt;span class=&quot;hljs-regexp&quot;&gt;/(\\w+):(\\w+)/g&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; matches = &lt;span class=&quot;hljs-title function_&quot;&gt;regexMatch&lt;/span&gt;(input, regex)\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(matches)&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif17&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I thought you just want to grab all the words containing the &lt;strong&gt;abc&lt;/strong&gt; substring and &lt;strong&gt;store&lt;/strong&gt; the &lt;strong&gt;matched&lt;/strong&gt; group/entries, so I made this script:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;s = &lt;span class=&quot;hljs-string&quot;&gt;&apos;something format_abc another word abc abc_somestring&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(s.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\b\\w*abc\\w*\\b/igm&lt;/span&gt;));&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif18&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;\\b&lt;/code&gt;  - a word boundary&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;\\w*&lt;/code&gt; - 0+ word chars&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;abc&lt;/code&gt; - your exact match&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;\\w*&lt;/code&gt; - 0+ word chars&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;\\b&lt;/code&gt;  - a word boundary&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;References: &lt;a href=&quot;https://stackoverflow.com/questions/42535652/regex-match-all-the-words-that-contains-some-word&quot;&gt;Regex: Match all the words that contains some word&lt;/a&gt;\n&lt;a href=&quot;https://javascript.info/regexp-introduction&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://javascript.info/regexp-introduction&lt;/a&gt;&lt;/p&gt;\n    "]},"page":"21","randomQuestions":[{"title":"What is the meaning of single and double underscore before an object name?","slug":"what-is-the-meaning-of-single-and-double-underscore-before-an-object-name-1657387926929"},{"title":"Methods in ES6 objects: using arrow functions","slug":"methods-in-es6-objects:-using-arrow-functions-1657388249058"},{"title":"Reference: What is variable scope, which variables are accessible from where and what are \"undefined variable\" errors?","slug":"reference:-what-is-variable-scope-which-variables-are-accessible-from-where-and-what-are-\"undefined-variable\"-errors-1657384644697"},{"title":"Using i and j as variables in MATLAB","slug":"using-i-and-j-as-variables-in-matlab-1657388506358"},{"title":"HTTP GET with request body","slug":"http-get-with-request-body-1657387379038"},{"title":"What does this symbol mean in JavaScript?","slug":"what-does-this-symbol-mean-in-javascript-1657387632971"},{"title":"The definitive guide to form-based website authentication [closed]","slug":"the-definitive-guide-to-form-based-website-authentication-closed-1657388456475"},{"title":"What is a stack trace, and how can I use it to debug my application errors?","slug":"what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors-1657384750732"},{"title":"How do I set a variable to the output of a command in Bash?","slug":"how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-1657387250909"},{"title":"Using Auto Layout in UITableView for dynamic cell layouts & variable row heights","slug":"using-auto-layout-in-uitableview-for-dynamic-cell-layouts-and-variable-row-heights-1657387722263"},{"title":"Why does printf not flush after the call unless a newline is in the format string?","slug":"why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-string-1657387853407"},{"title":"How do I give text or an image a transparent background using CSS?","slug":"how-do-i-give-text-or-an-image-a-transparent-background-using-css-1657388188508"},{"title":"Difference between single and double quotes in Bash","slug":"difference-between-single-and-double-quotes-in-bash-1657385460827"},{"title":"Why does jQuery or a DOM method such as getElementById not find the element?","slug":"why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element-1657384326458"},{"title":"How to print a number with commas as thousands separators in JavaScript","slug":"how-to-print-a-number-with-commas-as-thousands-separators-in-javascript-1657387777379"},{"title":"Sending Email in Android using JavaMail API without using the default/built-in app","slug":"sending-email-in-android-using-javamail-api-without-using-the-defaultbuilt-in-app-1657387883400"},{"title":"How do I Pandas group-by to get sum?","slug":"how-do-i-pandas-group-by-to-get-sum-1657387908708"},{"title":"How do I split a list into equally-sized chunks?","slug":"how-do-i-split-a-list-into-equally-sized-chunks-1657384580399"},{"title":"I just assigned a variable, but echo $variable shows something else","slug":"i-just-assigned-a-variable-but-echo-dollarvariable-shows-something-else-1657387574561"},{"title":"How to return value from an asynchronous callback function? [duplicate]","slug":"how-to-return-value-from-an-asynchronous-callback-function-duplicate-1657387545611"}]},"__N_SSG":true}