<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="firebase-realtime-database,firebase,solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547","name":"Questions"}}]}</script><title>Query based on multiple where clauses in Firebase | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="{
  &quot;movies&quot;: {
    &quot;movie1&quot;: {
      &quot;genre&quot;: &quot;comedy&quot;,
      &quot;name&quot;: &quot;As good as it gets&quot;,
      &quot;lead&quot;: &quot;Jack Nicholson&quot;
    },
    &quot;movie2&quot;: {
      &quot;genre&quot;: &quot;Horror&quot;,
      &quot;name&quot;: &quot;The Shining&quot;,
      &quot;lead&quot;: &quot;Jack Nicholson&quot;
    },
    &quot;movie3&quot;: {
      &quot;genre&quot;: &quot;comedy&quot;,
      &quot;name&quot;: &quot;The Mask&quot;,
      &quot;lead&quot;: &quot;Jim Carrey&quot;
    }
  }
}

I am a Firebase newbie. How can I retrieve a result from the data above where genre = &#x27;comedy&#x27; AND lead = &#x27;Jack Nicholson&#x27;?
What options do I have?
    "/><meta property="og:title" content="Query based on multiple where clauses in Firebase | Solution Checker"/><meta property="og:description" content="{
  &quot;movies&quot;: {
    &quot;movie1&quot;: {
      &quot;genre&quot;: &quot;comedy&quot;,
      &quot;name&quot;: &quot;As good as it gets&quot;,
      &quot;lead&quot;: &quot;Jack Nicholson&quot;
    },
    &quot;movie2&quot;: {
      &quot;genre&quot;: &quot;Horror&quot;,
      &quot;name&quot;: &quot;The Shining&quot;,
      &quot;lead&quot;: &quot;Jack Nicholson&quot;
    },
    &quot;movie3&quot;: {
      &quot;genre&quot;: &quot;comedy&quot;,
      &quot;name&quot;: &quot;The Mask&quot;,
      &quot;lead&quot;: &quot;Jim Carrey&quot;
    }
  }
}

I am a Firebase newbie. How can I retrieve a result from the data above where genre = &#x27;comedy&#x27; AND lead = &#x27;Jack Nicholson&#x27;?
What options do I have?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Query based on multiple where clauses in Firebase","text":"{\n  &quot;movies&quot;: {\n    &quot;movie1&quot;: {\n      &quot;genre&quot;: &quot;comedy&quot;,\n      &quot;name&quot;: &quot;As good as it gets&quot;,\n      &quot;lead&quot;: &quot;Jack Nicholson&quot;\n    },\n    &quot;movie2&quot;: {\n      &quot;genre&quot;: &quot;Horror&quot;,\n      &quot;name&quot;: &quot;The Shining&quot;,\n      &quot;lead&quot;: &quot;Jack Nicholson&quot;\n    },\n    &quot;movie3&quot;: {\n      &quot;genre&quot;: &quot;comedy&quot;,\n      &quot;name&quot;: &quot;The Mask&quot;,\n      &quot;lead&quot;: &quot;Jim Carrey&quot;\n    }\n  }\n}\n\nI am a Firebase newbie. How can I retrieve a result from the data above where genre = &apos;comedy&apos; AND lead = &apos;Jack Nicholson&apos;?\nWhat options do I have?\n    ","answerCount":8,"upVoteCount":500,"suggestedAnswer":[{"text":"Using Firebase&apos;s Query API, you might be tempted to try this:\n// !!! THIS WILL NOT WORK !!!\nref\n  .orderBy(&apos;genre&apos;)\n  .startAt(&apos;comedy&apos;).endAt(&apos;comedy&apos;)\n  .orderBy(&apos;lead&apos;)                  // !!! THIS LINE WILL RAISE AN ERROR !!!\n  .startAt(&apos;Jack Nicholson&apos;).endAt(&apos;Jack Nicholson&apos;)\n  .on(&apos;value&apos;, function(snapshot) { \n      console.log(snapshot.val()); \n  });\n\nBut as @RobDiMarco from Firebase says in the comments:\n\nmultiple orderBy() calls will throw an error\n\nSo my code above will not work.\nI know of three approaches that will work.\n1. filter most on the server, do the rest on the client\nWhat you can do is execute one orderBy().startAt()./endAt() on the server, pull down the remaining data and filter that in JavaScript code on your client.\nref\n  .orderBy(&apos;genre&apos;)\n  .equalTo(&apos;comedy&apos;)\n  .on(&apos;child_added&apos;, function(snapshot) { \n      var movie = snapshot.val();\n      if (movie.lead == &apos;Jack Nicholson&apos;) {\n          console.log(movie);\n      }\n  });\n\n2. add a property that combines the values that you want to filter on\nIf that isn&apos;t good enough, you should consider modifying/expanding your data to allow your use-case. For example: you could stuff genre+lead into a single property that you just use for this filter.\n&quot;movie1&quot;: {\n    &quot;genre&quot;: &quot;comedy&quot;,\n    &quot;name&quot;: &quot;As good as it gets&quot;,\n    &quot;lead&quot;: &quot;Jack Nicholson&quot;,\n    &quot;genre_lead&quot;: &quot;comedy_Jack Nicholson&quot;\n}, //...\n\nYou&apos;re essentially building your own multi-column index that way and can query it with:\nref\n  .orderBy(&apos;genre_lead&apos;)\n  .equalTo(&apos;comedy_Jack Nicholson&apos;)\n  .on(&apos;child_added&apos;, function(snapshot) { \n      var movie = snapshot.val();\n      console.log(movie);\n  });\n\nDavid East has written a library called QueryBase that helps with generating such properties.\nYou could even do relative/range queries, let&apos;s say that you want to allow querying movies by category and year. You&apos;d use this data structure:\n&quot;movie1&quot;: {\n    &quot;genre&quot;: &quot;comedy&quot;,\n    &quot;name&quot;: &quot;As good as it gets&quot;,\n    &quot;lead&quot;: &quot;Jack Nicholson&quot;,\n    &quot;genre_year&quot;: &quot;comedy_1997&quot;\n}, //...\n\nAnd then query for comedies of the 90s with:\nref\n  .orderBy(&apos;genre_year&apos;)\n  .startAt(&apos;comedy_1990&apos;)\n  .endAt(&apos;comedy_2000&apos;)\n  .on(&apos;child_added&apos;, function(snapshot) { \n      var movie = snapshot.val();\n      console.log(movie);\n  });\n\nIf you need to filter on more than just the year, make sure to add the other date parts in descending order, e.g. &quot;comedy_1997-12-25&quot;. This way the lexicographical ordering that Firebase does on string values will be the same as the chronological ordering.\nThis combining of values in a property can work with more than two values, but you can only do a range filter on the last value in the composite property.\nA very special variant of this is implemented by the GeoFire library for Firebase. This library combines the latitude and longitude of a location into a so-called Geohash, which can then be used to do realtime range queries on Firebase.\n3. create a custom index programmatically\nYet another alternative is to do what we&apos;ve all done before this new Query API was added: create an index in a different node:\n  &quot;movies&quot;\n      // the same structure you have today\n  &quot;by_genre&quot;\n      &quot;comedy&quot;\n          &quot;by_lead&quot;\n              &quot;Jack Nicholson&quot;\n                  &quot;movie1&quot;\n              &quot;Jim Carrey&quot;\n                  &quot;movie3&quot;\n      &quot;Horror&quot;\n          &quot;by_lead&quot;\n              &quot;Jack Nicholson&quot;\n                  &quot;movie2&quot;\n      \n\nThere are probably more approaches. For example, this answer highlights an alternative tree-shaped custom index: https://stackoverflow.com/a/34105063\n\nIf none of these options work for you, but you still want to store your data in Firebase, you can also consider using its Cloud Firestore database.\nCloud Firestore can handle multiple equality filters in a single query, but only one range filter. Under the hood it essentially uses the same query model, but it&apos;s like it auto-generates the composite properties for you. See Firestore&apos;s documentation on compound queries.\n    ","url":"https://solutionschecker.com/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547#solution1","@type":"Answer","upvoteCount":0},{"text":"I&apos;ve written a personal library that allows you to order by multiple values, with all the ordering done on the server.\nMeet Querybase!\nQuerybase takes in a Firebase Database Reference and an array of fields you wish to index on. When you create new records it will automatically handle the generation of keys that allow for multiple querying. The caveat is that it only supports straight equivalence (no less than or greater than).\nconst databaseRef = firebase.database().ref().child(&apos;people&apos;);\nconst querybaseRef = querybase.ref(databaseRef, [&apos;name&apos;, &apos;age&apos;, &apos;location&apos;]);\n\n// Automatically handles composite keys\nquerybaseRef.push({ \n  name: &apos;David&apos;,\n  age: 27,\n  location: &apos;SF&apos;\n});\n\n// Find records by multiple fields\n// returns a Firebase Database ref\nconst queriedDbRef = querybaseRef\n .where({\n   name: &apos;David&apos;,\n   age: 27\n });\n\n// Listen for realtime updates\nqueriedDbRef.on(&apos;value&apos;, snap =&gt; console.log(snap));\n\n    ","url":"https://solutionschecker.com/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547#solution2","@type":"Answer","upvoteCount":0},{"text":"var ref = new Firebase(&apos;https://your.firebaseio.com/&apos;);\n\nQuery query = ref.orderByChild(&apos;genre&apos;).equalTo(&apos;comedy&apos;);\nquery.addValueEventListener(new ValueEventListener() {\n    @Override\n    public void onDataChange(DataSnapshot dataSnapshot) {\n        for (DataSnapshot movieSnapshot : dataSnapshot.getChildren()) {\n            Movie movie = dataSnapshot.getValue(Movie.class);\n            if (movie.getLead().equals(&apos;Jack Nicholson&apos;)) {\n                console.log(movieSnapshot.getKey());\n            }\n        }\n    }\n\n    @Override\n    public void onCancelled(FirebaseError firebaseError) {\n\n    }\n});\n\n    ","url":"https://solutionschecker.com/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547#solution3","@type":"Answer","upvoteCount":0},{"text":"Frank&apos;s answer is good but Firestore introduced array-contains recently that makes it easier to do AND queries.\nYou can create a filters field to add you filters. You can add as many values as you need. For example to filter by comedy and Jack Nicholson you can add the value comedy_Jack Nicholson but if you also you want to by comedy and 2014 you can add the value comedy_2014 without creating more fields.\n{\n  &quot;movies&quot;: {\n    &quot;movie1&quot;: {\n      &quot;genre&quot;: &quot;comedy&quot;,\n      &quot;name&quot;: &quot;As good as it gets&quot;,\n      &quot;lead&quot;: &quot;Jack Nicholson&quot;,\n      &quot;year&quot;: 2014,\n      &quot;filters&quot;: [\n        &quot;comedy_Jack Nicholson&quot;,\n        &quot;comedy_2014&quot;\n      ]\n    }\n  }\n}\n\n    ","url":"https://solutionschecker.com/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547#solution4","@type":"Answer","upvoteCount":0},{"text":"Firebase doesn&apos;t allow querying with multiple conditions. \nHowever, I did find a way around for this:\n\nWe need to download the initial filtered data from the database and store it in an array list.\n\n                Query query = databaseReference.orderByChild(&quot;genre&quot;).equalTo(&quot;comedy&quot;);\n                databaseReference.addValueEventListener(new ValueEventListener() {\n                    @Override\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n\n                        ArrayList&lt;Movie&gt; movies = new ArrayList&lt;&gt;();\n                        for (DataSnapshot dataSnapshot1 : dataSnapshot.getChildren()) {\n                            String lead = dataSnapshot1.child(&quot;lead&quot;).getValue(String.class);\n                            String genre = dataSnapshot1.child(&quot;genre&quot;).getValue(String.class);\n\n                            movie = new Movie(lead, genre);\n\n                            movies.add(movie);\n\n                        }\n\n                        filterResults(movies, &quot;Jack Nicholson&quot;);\n\n                        }\n\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\n\n                    }\n                });\n\n\nOnce we obtain the initial filtered data from the database, we need to do further filter in our backend.\n\npublic void filterResults(final List&lt;Movie&gt; list,  final String genre) {\n        List&lt;Movie&gt; movies = new ArrayList&lt;&gt;();\n        movies = list.stream().filter(o -&gt; o.getLead().equals(genre)).collect(Collectors.toList());\n        System.out.println(movies);\n\n        employees.forEach(movie -&gt; System.out.println(movie.getFirstName()));\n    }\n\n    ","url":"https://solutionschecker.com/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547#solution5","@type":"Answer","upvoteCount":0},{"text":"For Cloud Firestore\nhttps://firebase.google.com/docs/firestore/query-data/queries#compound_queries\nCompound queries\nYou can chain multiple equality operators (== or array-contains) methods to create more specific queries (logical AND). However, you must create a composite index to combine equality operators with the inequality operators, &lt;, &lt;=, &gt;, and !=.\ncitiesRef.where(&apos;state&apos;, &apos;==&apos;, &apos;CO&apos;).where(&apos;name&apos;, &apos;==&apos;, &apos;Denver&apos;);\ncitiesRef.where(&apos;state&apos;, &apos;==&apos;, &apos;CA&apos;).where(&apos;population&apos;, &apos;&lt;&apos;, 1000000);\nYou can perform range (&lt;, &lt;=, &gt;, &gt;=) or not equals (!=) comparisons only on a single field, and you can include at most one array-contains or array-contains-any clause in a compound query:\n    ","url":"https://solutionschecker.com/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547#solution6","@type":"Answer","upvoteCount":0},{"text":"The data from firebase realtime database is as _InternalLinkedHashMap&lt;dynamic, dynamic&gt;.\nYou can also just convert this it to your map and query very easily.\nFor example, I have a chat app and I use realtime database to store the uid of the user and the bool value whether the user is online or not. As the picture below.\n\nNow, I have a class RealtimeDatabase and a static method getAllUsersOnineStatus().\nstatic getOnilineUsersUID() {\nvar dbRef = FirebaseDatabase.instance;\nDatabaseReference reference = dbRef.reference().child(&quot;Online&quot;);\nreference.once().then((value) {\n  Map&lt;String, bool&gt; map = Map&lt;String, bool&gt;.from(value.value);\n  List users = [];\n  map.forEach((key, value) {\n    if (value) {\n      users.add(key);\n    }\n  });\n  print(users);\n});\n\n}\nIt will print [NOraDTGaQSZbIEszidCujw1AEym2]\nI am new to flutter If you know more please update the answer.\n    ","url":"https://solutionschecker.com/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547#solution7","@type":"Answer","upvoteCount":0},{"text":"ref.orderByChild(&quot;lead&quot;).startAt(&quot;Jack Nicholson&quot;).endAt(&quot;Jack Nicholson&quot;).listner....\n\n\nThis will work.\n    ","url":"https://solutionschecker.com/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547#solution8","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><script id="google-analytics" data-nscript="beforeInteractive">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NXVLL8B');</script><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-862498b6ec7885c3.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-47289857226115f9.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_buildManifest.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_ssgManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXVLL8B"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547"><h1>Query based on multiple where clauses in Firebase</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/firebase-realtime-database">firebase-realtime-database</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/firebase">firebase</a></div></div><div class="question-content mt-5">
                
<pre class="lang-json s-code-block"><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"movies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"movie1"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"genre"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"comedy"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"As good as it gets"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lead"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Jack Nicholson"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"movie2"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"genre"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Horror"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"The Shining"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lead"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Jack Nicholson"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"movie3"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"genre"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"comedy"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"The Mask"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lead"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Jim Carrey"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>I am a Firebase newbie. How can I retrieve a result from the data above <strong>where <code>genre = 'comedy'</code> AND <code>lead = 'Jack Nicholson'</code></strong>?</p>
<p>What options do I have?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase-realtime-database">firebase-realtime-database</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase">firebase</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using <a href="https://www.firebase.com/docs/beta/queries/web.html" rel="noreferrer">Firebase's Query API</a>, you might be tempted to try this:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">// !!! THIS WILL NOT WORK !!!</span>
ref
  .<span class="hljs-title function_">orderBy</span>(<span class="hljs-string">'genre'</span>)
  .<span class="hljs-title function_">startAt</span>(<span class="hljs-string">'comedy'</span>).<span class="hljs-title function_">endAt</span>(<span class="hljs-string">'comedy'</span>)
  .<span class="hljs-title function_">orderBy</span>(<span class="hljs-string">'lead'</span>)                  <span class="hljs-comment">// !!! THIS LINE WILL RAISE AN ERROR !!!</span>
  .<span class="hljs-title function_">startAt</span>(<span class="hljs-string">'Jack Nicholson'</span>).<span class="hljs-title function_">endAt</span>(<span class="hljs-string">'Jack Nicholson'</span>)
  .<span class="hljs-title function_">on</span>(<span class="hljs-string">'value'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">snapshot</span>) { 
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(snapshot.<span class="hljs-title function_">val</span>()); 
  });
</code></pre>
<p>But as @RobDiMarco from Firebase says in the comments:</p>
<blockquote>
<p>multiple <code>orderBy()</code> calls will throw an error</p>
</blockquote>
<p>So <strong>my code above will not work</strong>.</p>
<p>I know of three approaches that will work.</p>
<h3>1. filter most on the server, do the rest on the client</h3>
<p>What you <em>can</em> do is execute one <code>orderBy().startAt()./endAt()</code> on the server, pull down the remaining data and filter that in JavaScript code on your client.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">ref
  .<span class="hljs-title function_">orderBy</span>(<span class="hljs-string">'genre'</span>)
  .<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'comedy'</span>)
  .<span class="hljs-title function_">on</span>(<span class="hljs-string">'child_added'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">snapshot</span>) { 
      <span class="hljs-keyword">var</span> movie = snapshot.<span class="hljs-title function_">val</span>();
      <span class="hljs-keyword">if</span> (movie.<span class="hljs-property">lead</span> == <span class="hljs-string">'Jack Nicholson'</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(movie);
      }
  });
</code></pre>
<h3>2. add a property that combines the values that you want to filter on</h3>
<p>If that isn't good enough, you should consider modifying/expanding your data to allow your use-case. For example: you could stuff genre+lead into a single property that you just use for this filter.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-string">"movie1"</span>: {
    <span class="hljs-string">"genre"</span>: <span class="hljs-string">"comedy"</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"As good as it gets"</span>,
    <span class="hljs-string">"lead"</span>: <span class="hljs-string">"Jack Nicholson"</span>,
    <span class="hljs-string">"genre_lead"</span>: <span class="hljs-string">"comedy_Jack Nicholson"</span>
}, <span class="hljs-comment">//...</span>
</code></pre>
<p>You're essentially building your own multi-column index that way and can query it with:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">ref
  .<span class="hljs-title function_">orderBy</span>(<span class="hljs-string">'genre_lead'</span>)
  .<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'comedy_Jack Nicholson'</span>)
  .<span class="hljs-title function_">on</span>(<span class="hljs-string">'child_added'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">snapshot</span>) { 
      <span class="hljs-keyword">var</span> movie = snapshot.<span class="hljs-title function_">val</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(movie);
  });
</code></pre>
<p>David East has written a <a href="https://github.com/davideast/Querybase" rel="noreferrer">library called QueryBase that helps with generating such properties</a>.</p>
<p>You could even do relative/range queries, let's say that you want to allow querying movies by category and year. You'd use this data structure:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-string">"movie1"</span>: {
    <span class="hljs-string">"genre"</span>: <span class="hljs-string">"comedy"</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"As good as it gets"</span>,
    <span class="hljs-string">"lead"</span>: <span class="hljs-string">"Jack Nicholson"</span>,
    <span class="hljs-string">"genre_year"</span>: <span class="hljs-string">"comedy_1997"</span>
}, <span class="hljs-comment">//...</span>
</code></pre>
<p>And then query for comedies of the 90s with:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">ref
  .<span class="hljs-title function_">orderBy</span>(<span class="hljs-string">'genre_year'</span>)
  .<span class="hljs-title function_">startAt</span>(<span class="hljs-string">'comedy_1990'</span>)
  .<span class="hljs-title function_">endAt</span>(<span class="hljs-string">'comedy_2000'</span>)
  .<span class="hljs-title function_">on</span>(<span class="hljs-string">'child_added'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">snapshot</span>) { 
      <span class="hljs-keyword">var</span> movie = snapshot.<span class="hljs-title function_">val</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(movie);
  });
</code></pre>
<p>If you need to filter on more than just the year, make sure to add the other date parts in descending order, e.g. <code>"comedy_1997-12-25"</code>. This way the lexicographical ordering that Firebase does on string values will be the same as the chronological ordering.</p>
<p>This combining of values in a property can work with more than two values, but you can only do a range filter on the last value in the composite property.</p>
<p>A very special variant of this is implemented by the <a href="https://github.com/firebase/geofire-js" rel="noreferrer">GeoFire library for Firebase</a>. This library combines the latitude and longitude of a location into a so-called <a href="https://en.wikipedia.org/wiki/Geohash" rel="noreferrer">Geohash</a>, which can then be used to do realtime range queries on Firebase.</p>
<h3>3. create a custom index programmatically</h3>
<p>Yet another alternative is to do what we've all done before this new Query API was added: create an index in a different node:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">  <span class="hljs-string">"movies"</span>
      <span class="hljs-comment">// the same structure you have today</span>
  <span class="hljs-string">"by_genre"</span>
      <span class="hljs-string">"comedy"</span>
          <span class="hljs-string">"by_lead"</span>
              <span class="hljs-string">"Jack Nicholson"</span>
                  <span class="hljs-string">"movie1"</span>
              <span class="hljs-string">"Jim Carrey"</span>
                  <span class="hljs-string">"movie3"</span>
      <span class="hljs-string">"Horror"</span>
          <span class="hljs-string">"by_lead"</span>
              <span class="hljs-string">"Jack Nicholson"</span>
                  <span class="hljs-string">"movie2"</span>
      
</code></pre>
<p>There are probably more approaches. For example, this answer highlights an alternative tree-shaped custom index: <a href="https://stackoverflow.com/a/34105063">https://stackoverflow.com/a/34105063</a></p>
<hr>
<p>If none of these options work for you, but you still want to store your data in Firebase, you can also consider using its <a href="https://firebase.google.com/docs/firestore" rel="noreferrer">Cloud Firestore database</a>.</p>
<p>Cloud Firestore can handle multiple equality filters in a single query, but only one range filter. Under the hood it essentially uses the same query model, but it's like it auto-generates the composite properties for you. See Firestore's documentation on <a href="https://firebase.google.com/docs/firestore/query-data/queries#compound_queries" rel="noreferrer">compound queries</a>.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase-realtime-database">firebase-realtime-database</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase">firebase</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I've written a personal library that allows you to order by multiple values, with all the ordering done on the server.</p>
<h3><a href="https://github.com/davideast/Querybase" rel="nofollow noreferrer"><strong>Meet Querybase!</strong></a></h3>
<p>Querybase takes in a Firebase Database Reference and an array of fields you wish to index on. When you create new records it will automatically handle the generation of keys that allow for multiple querying. The caveat is that it only supports straight equivalence (no less than or greater than).</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> databaseRef = firebase.<span class="hljs-title function_">database</span>().<span class="hljs-title function_">ref</span>().<span class="hljs-title function_">child</span>(<span class="hljs-string">'people'</span>);
<span class="hljs-keyword">const</span> querybaseRef = querybase.<span class="hljs-title function_">ref</span>(databaseRef, [<span class="hljs-string">'name'</span>, <span class="hljs-string">'age'</span>, <span class="hljs-string">'location'</span>]);

<span class="hljs-comment">// Automatically handles composite keys</span>
querybaseRef.<span class="hljs-title function_">push</span>({ 
  <span class="hljs-attr">name</span>: <span class="hljs-string">'David'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">27</span>,
  <span class="hljs-attr">location</span>: <span class="hljs-string">'SF'</span>
});

<span class="hljs-comment">// Find records by multiple fields</span>
<span class="hljs-comment">// returns a Firebase Database ref</span>
<span class="hljs-keyword">const</span> queriedDbRef = querybaseRef
 .<span class="hljs-title function_">where</span>({
   <span class="hljs-attr">name</span>: <span class="hljs-string">'David'</span>,
   <span class="hljs-attr">age</span>: <span class="hljs-number">27</span>
 });

<span class="hljs-comment">// Listen for realtime updates</span>
queriedDbRef.<span class="hljs-title function_">on</span>(<span class="hljs-string">'value'</span>, <span class="hljs-function"><span class="hljs-params">snap</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(snap));
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase-realtime-database">firebase-realtime-database</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase">firebase</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre><code>var ref = new Firebase('https://your.firebaseio.com/');

Query query = ref.orderByChild('genre').equalTo('comedy');
query.addValueEventListener(new ValueEventListener() {
    @Override
    public void onDataChange(DataSnapshot dataSnapshot) {
        for (DataSnapshot movieSnapshot : dataSnapshot.getChildren()) {
            Movie movie = dataSnapshot.getValue(Movie.class);
            if (movie.getLead().equals('Jack Nicholson')) {
                console.log(movieSnapshot.getKey());
            }
        }
    }

    @Override
    public void onCancelled(FirebaseError firebaseError) {

    }
});
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase-realtime-database">firebase-realtime-database</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase">firebase</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Frank's answer is good but Firestore introduced <a href="https://firebase.google.com/docs/firestore/query-data/queries#array_membership" rel="nofollow noreferrer"><code>array-contains</code></a> recently that makes it easier to do AND queries.</p>
<p>You can create a <code>filters</code> field to add you filters. You can add as many values as you need. For example to filter by <em>comedy</em> and <em>Jack Nicholson</em> you can add the value <code>comedy_Jack Nicholson</code> but if you also you want to by <em>comedy</em> and <em>2014</em> you can add the value <code>comedy_2014</code> without creating more fields.</p>
<pre class="lang-json s-code-block"><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"movies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"movie1"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"genre"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"comedy"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"As good as it gets"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"lead"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Jack Nicholson"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"year"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2014</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"filters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"comedy_Jack Nicholson"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"comedy_2014"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase-realtime-database">firebase-realtime-database</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase">firebase</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Firebase doesn't allow querying with multiple conditions. 
However, I did find a way around for this:</p>

<p><strong>We need to download the initial filtered data from the database and store it in an array list.</strong></p>

<pre><code>                Query query = databaseReference.orderByChild("genre").equalTo("comedy");
                databaseReference.addValueEventListener(new ValueEventListener() {
                    @Override
                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {

                        ArrayList&lt;Movie&gt; movies = new ArrayList&lt;&gt;();
                        for (DataSnapshot dataSnapshot1 : dataSnapshot.getChildren()) {
                            String lead = dataSnapshot1.child("lead").getValue(String.class);
                            String genre = dataSnapshot1.child("genre").getValue(String.class);

                            movie = new Movie(lead, genre);

                            movies.add(movie);

                        }

                        filterResults(movies, "Jack Nicholson");

                        }

                    }

                    @Override
                    public void onCancelled(@NonNull DatabaseError databaseError) {

                    }
                });
</code></pre>

<p><strong>Once we obtain the initial filtered data from the database, we need to do further filter in our backend.</strong></p>

<pre><code>public void filterResults(final List&lt;Movie&gt; list,  final String genre) {
        List&lt;Movie&gt; movies = new ArrayList&lt;&gt;();
        movies = list.stream().filter(o -&gt; o.getLead().equals(genre)).collect(Collectors.toList());
        System.out.println(movies);

        employees.forEach(movie -&gt; System.out.println(movie.getFirstName()));
    }
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase-realtime-database">firebase-realtime-database</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase">firebase</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For Cloud Firestore</p>
<p><a href="https://firebase.google.com/docs/firestore/query-data/queries#compound_queries" rel="nofollow noreferrer">https://firebase.google.com/docs/firestore/query-data/queries#compound_queries</a></p>
<p>Compound queries
You can chain multiple equality operators (== or array-contains) methods to create more specific queries (logical AND). However, you must create a composite index to combine equality operators with the inequality operators, &lt;, &lt;=, &gt;, and !=.</p>
<p>citiesRef.where('state', '==', 'CO').where('name', '==', 'Denver');
citiesRef.where('state', '==', 'CA').where('population', '&lt;', 1000000);
You can perform range (&lt;, &lt;=, &gt;, &gt;=) or not equals (!=) comparisons only on a single field, and you can include at most one array-contains or array-contains-any clause in a compound query:</p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase-realtime-database">firebase-realtime-database</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase">firebase</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The data from firebase realtime database is as _InternalLinkedHashMap&lt;dynamic, dynamic&gt;.
You can also just convert this it to your map and query very easily.</p>
<p>For example, I have a chat app and I use realtime database to store the uid of the user and the bool value whether the user is online or not. As the picture below.</p>
<p><a href="https://i.stack.imgur.com/3WK64.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/3WK64.png" alt=""></a></p>
<p>Now, I have a class RealtimeDatabase and a static method getAllUsersOnineStatus().</p>
<pre><code>static getOnilineUsersUID() {
var dbRef = FirebaseDatabase.instance;
DatabaseReference reference = dbRef.reference().child("Online");
reference.once().then((value) {
  Map&lt;String, bool&gt; map = Map&lt;String, bool&gt;.from(value.value);
  List users = [];
  map.forEach((key, value) {
    if (value) {
      users.add(key);
    }
  });
  print(users);
});
</code></pre>
<p>}</p>
<p>It will print [NOraDTGaQSZbIEszidCujw1AEym2]</p>
<p>I am new to flutter If you know more please update the answer.</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase-realtime-database">firebase-realtime-database</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/firebase">firebase</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre><code>ref.orderByChild("lead").startAt("Jack Nicholson").endAt("Jack Nicholson").listner....
</code></pre>

<p>This will work.</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/why-can&#x27;t-i-store-a-value-and-a-reference-to-that-value-in-the-same-struct-1657387506828">Why can&#x27;t I store a value and a reference to that value in the same struct?</a><a href="/questions/javascript-infamous-loop-issue-duplicate-1657387498530">Javascript infamous Loop issue? [duplicate]</a><a href="/questions/how-to-find-the-&#x27;sizeof&#x27;-(a-pointer-pointing-to-an-array)-1657387354284">How to find the &#x27;sizeof&#x27; (a pointer pointing to an array)?</a><a href="/questions/with-arrays-why-is-it-the-case-that-a5-5a-1657387956216">With arrays, why is it the case that a[5] == 5[a]?</a><a href="/questions/how-to-replace-all-occurrences-of-a-string-in-javascript-1657384895467">How to replace all occurrences of a string in JavaScript</a><a href="/questions/mysqli-or-die-does-it-have-to-die-1657388533922">mysqli or die, does it have to die?</a><a href="/questions/importing-installed-package-from-script-raises-%22attributeerror:-module-has-no-attribute%22-or-%22importerror:-cannot-import-name%22-1657387790607">Importing installed package from script raises &quot;AttributeError: module has no attribute&quot; or &quot;ImportError: cannot import name&quot;</a><a href="/questions/using-global-variables-in-a-function-1657384796002">Using global variables in a function</a><a href="/questions/why-don&#x27;t-flex-items-shrink-past-content-size-1657384687282">Why don&#x27;t flex items shrink past content size?</a><a href="/questions/why-are-these-numbers-not-equal-1657384729559">Why are these numbers not equal?</a><a href="/questions/how-do-i-import-a-module-given-the-full-path-1657388139965">How do I import a module given the full path?</a><a href="/questions/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url-1657387618306">What is the best regular expression to check if a string is a valid URL?</a><a href="/questions/what-are-the-rules-for-javascript&#x27;s-automatic-semicolon-insertion-(asi)-1657387472789">What are the rules for JavaScript&#x27;s automatic semicolon insertion (ASI)?</a><a href="/questions/randomize-a-listlesstgreater-1657388172793">Randomize a List&lt;T&gt;</a><a href="/questions/what-does-%22fatal-error:-unexpectedly-found-nil-while-unwrapping-an-optional-value%22-mean-1657384593944">What does &quot;Fatal error: Unexpectedly found nil while unwrapping an Optional value&quot; mean?</a><a href="/questions/xmlhttprequest-cannot-load-xxx-no-&#x27;access-control-allow-origin&#x27;-header-1657384758362">XMLHttpRequest cannot load XXX No &#x27;Access-Control-Allow-Origin&#x27; header</a><a href="/questions/what-is-the-difference-between-json-and-object-literal-notation-1657387515710">What is the difference between JSON and Object Literal Notation?</a><a href="/questions/why-is-using-the-javascript-eval-function-a-bad-idea-1657387485165">Why is using the JavaScript eval function a bad idea?</a><a href="/questions/how-can-i-validate-an-email-address-in-javascript-1657385475959">How can I validate an email address in JavaScript?</a><a href="/questions/how-to-randomize-(shuffle)-a-javascript-array-1657384790171">How to randomize (shuffle) a JavaScript array?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;Using \u0026lt;a href=\u0026quot;https://www.firebase.com/docs/beta/queries/web.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Firebase\u0026apos;s Query API\u0026lt;/a\u0026gt;, you might be tempted to try this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// !!! THIS WILL NOT WORK !!!\u0026lt;/span\u0026gt;\nref\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;orderBy\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;genre\u0026apos;\u0026lt;/span\u0026gt;)\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;startAt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;comedy\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;endAt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;comedy\u0026apos;\u0026lt;/span\u0026gt;)\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;orderBy\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;lead\u0026apos;\u0026lt;/span\u0026gt;)                  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// !!! THIS LINE WILL RAISE AN ERROR !!!\u0026lt;/span\u0026gt;\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;startAt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Jack Nicholson\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;endAt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Jack Nicholson\u0026apos;\u0026lt;/span\u0026gt;)\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;on\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;value\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;snapshot\u0026lt;/span\u0026gt;) { \n      \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(snapshot.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;()); \n  });\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;But as @RobDiMarco from Firebase says in the comments:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;multiple \u0026lt;code\u0026gt;orderBy()\u0026lt;/code\u0026gt; calls will throw an error\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;So \u0026lt;strong\u0026gt;my code above will not work\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I know of three approaches that will work.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;1. filter most on the server, do the rest on the client\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;What you \u0026lt;em\u0026gt;can\u0026lt;/em\u0026gt; do is execute one \u0026lt;code\u0026gt;orderBy().startAt()./endAt()\u0026lt;/code\u0026gt; on the server, pull down the remaining data and filter that in JavaScript code on your client.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;ref\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;orderBy\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;genre\u0026apos;\u0026lt;/span\u0026gt;)\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equalTo\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;comedy\u0026apos;\u0026lt;/span\u0026gt;)\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;on\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;child_added\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;snapshot\u0026lt;/span\u0026gt;) { \n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; movie = snapshot.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;();\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (movie.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;lead\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Jack Nicholson\u0026apos;\u0026lt;/span\u0026gt;) {\n          \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(movie);\n      }\n  });\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;2. add a property that combines the values that you want to filter on\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;If that isn\u0026apos;t good enough, you should consider modifying/expanding your data to allow your use-case. For example: you could stuff genre+lead into a single property that you just use for this filter.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;movie1\u0026quot;\u0026lt;/span\u0026gt;: {\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;genre\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;comedy\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;name\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;As good as it gets\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;lead\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Jack Nicholson\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;genre_lead\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;comedy_Jack Nicholson\u0026quot;\u0026lt;/span\u0026gt;\n}, \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;You\u0026apos;re essentially building your own multi-column index that way and can query it with:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;ref\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;orderBy\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;genre_lead\u0026apos;\u0026lt;/span\u0026gt;)\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equalTo\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;comedy_Jack Nicholson\u0026apos;\u0026lt;/span\u0026gt;)\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;on\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;child_added\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;snapshot\u0026lt;/span\u0026gt;) { \n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; movie = snapshot.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;();\n      \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(movie);\n  });\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;David East has written a \u0026lt;a href=\u0026quot;https://github.com/davideast/Querybase\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;library called QueryBase that helps with generating such properties\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You could even do relative/range queries, let\u0026apos;s say that you want to allow querying movies by category and year. You\u0026apos;d use this data structure:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;movie1\u0026quot;\u0026lt;/span\u0026gt;: {\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;genre\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;comedy\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;name\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;As good as it gets\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;lead\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Jack Nicholson\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;genre_year\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;comedy_1997\u0026quot;\u0026lt;/span\u0026gt;\n}, \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And then query for comedies of the 90s with:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;ref\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;orderBy\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;genre_year\u0026apos;\u0026lt;/span\u0026gt;)\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;startAt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;comedy_1990\u0026apos;\u0026lt;/span\u0026gt;)\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;endAt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;comedy_2000\u0026apos;\u0026lt;/span\u0026gt;)\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;on\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;child_added\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;snapshot\u0026lt;/span\u0026gt;) { \n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; movie = snapshot.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;();\n      \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(movie);\n  });\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If you need to filter on more than just the year, make sure to add the other date parts in descending order, e.g. \u0026lt;code\u0026gt;\u0026quot;comedy_1997-12-25\u0026quot;\u0026lt;/code\u0026gt;. This way the lexicographical ordering that Firebase does on string values will be the same as the chronological ordering.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This combining of values in a property can work with more than two values, but you can only do a range filter on the last value in the composite property.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;A very special variant of this is implemented by the \u0026lt;a href=\u0026quot;https://github.com/firebase/geofire-js\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;GeoFire library for Firebase\u0026lt;/a\u0026gt;. This library combines the latitude and longitude of a location into a so-called \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Geohash\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Geohash\u0026lt;/a\u0026gt;, which can then be used to do realtime range queries on Firebase.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;3. create a custom index programmatically\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Yet another alternative is to do what we\u0026apos;ve all done before this new Query API was added: create an index in a different node:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;movies\u0026quot;\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// the same structure you have today\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;by_genre\u0026quot;\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;comedy\u0026quot;\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;by_lead\u0026quot;\u0026lt;/span\u0026gt;\n              \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Jack Nicholson\u0026quot;\u0026lt;/span\u0026gt;\n                  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;movie1\u0026quot;\u0026lt;/span\u0026gt;\n              \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Jim Carrey\u0026quot;\u0026lt;/span\u0026gt;\n                  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;movie3\u0026quot;\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Horror\u0026quot;\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;by_lead\u0026quot;\u0026lt;/span\u0026gt;\n              \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Jack Nicholson\u0026quot;\u0026lt;/span\u0026gt;\n                  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;movie2\u0026quot;\u0026lt;/span\u0026gt;\n      \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;There are probably more approaches. For example, this answer highlights an alternative tree-shaped custom index: \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/34105063\u0026quot;\u0026gt;https://stackoverflow.com/a/34105063\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;If none of these options work for you, but you still want to store your data in Firebase, you can also consider using its \u0026lt;a href=\u0026quot;https://firebase.google.com/docs/firestore\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Cloud Firestore database\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Cloud Firestore can handle multiple equality filters in a single query, but only one range filter. Under the hood it essentially uses the same query model, but it\u0026apos;s like it auto-generates the composite properties for you. See Firestore\u0026apos;s documentation on \u0026lt;a href=\u0026quot;https://firebase.google.com/docs/firestore/query-data/queries#compound_queries\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;compound queries\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I\u0026apos;ve written a personal library that allows you to order by multiple values, with all the ordering done on the server.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/davideast/Querybase\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;Meet Querybase!\u0026lt;/strong\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Querybase takes in a Firebase Database Reference and an array of fields you wish to index on. When you create new records it will automatically handle the generation of keys that allow for multiple querying. The caveat is that it only supports straight equivalence (no less than or greater than).\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; databaseRef = firebase.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;database\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ref\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;child\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;people\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; querybaseRef = querybase.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ref\u0026lt;/span\u0026gt;(databaseRef, [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;name\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;age\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;location\u0026apos;\u0026lt;/span\u0026gt;]);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Automatically handles composite keys\u0026lt;/span\u0026gt;\nquerybaseRef.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;({ \n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;David\u0026apos;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;age\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;27\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;location\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SF\u0026apos;\u0026lt;/span\u0026gt;\n});\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Find records by multiple fields\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// returns a Firebase Database ref\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; queriedDbRef = querybaseRef\n .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;where\u0026lt;/span\u0026gt;({\n   \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;David\u0026apos;\u0026lt;/span\u0026gt;,\n   \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;age\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;27\u0026lt;/span\u0026gt;\n });\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Listen for realtime updates\u0026lt;/span\u0026gt;\nqueriedDbRef.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;on\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;value\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;snap\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(snap));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;var ref = new Firebase(\u0026apos;https://your.firebaseio.com/\u0026apos;);\n\nQuery query = ref.orderByChild(\u0026apos;genre\u0026apos;).equalTo(\u0026apos;comedy\u0026apos;);\nquery.addValueEventListener(new ValueEventListener() {\n    @Override\n    public void onDataChange(DataSnapshot dataSnapshot) {\n        for (DataSnapshot movieSnapshot : dataSnapshot.getChildren()) {\n            Movie movie = dataSnapshot.getValue(Movie.class);\n            if (movie.getLead().equals(\u0026apos;Jack Nicholson\u0026apos;)) {\n                console.log(movieSnapshot.getKey());\n            }\n        }\n    }\n\n    @Override\n    public void onCancelled(FirebaseError firebaseError) {\n\n    }\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Frank\u0026apos;s answer is good but Firestore introduced \u0026lt;a href=\u0026quot;https://firebase.google.com/docs/firestore/query-data/queries#array_membership\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;array-contains\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; recently that makes it easier to do AND queries.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You can create a \u0026lt;code\u0026gt;filters\u0026lt;/code\u0026gt; field to add you filters. You can add as many values as you need. For example to filter by \u0026lt;em\u0026gt;comedy\u0026lt;/em\u0026gt; and \u0026lt;em\u0026gt;Jack Nicholson\u0026lt;/em\u0026gt; you can add the value \u0026lt;code\u0026gt;comedy_Jack Nicholson\u0026lt;/code\u0026gt; but if you also you want to by \u0026lt;em\u0026gt;comedy\u0026lt;/em\u0026gt; and \u0026lt;em\u0026gt;2014\u0026lt;/em\u0026gt; you can add the value \u0026lt;code\u0026gt;comedy_2014\u0026lt;/code\u0026gt; without creating more fields.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-json s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-json\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;movies\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;movie1\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;genre\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;comedy\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;name\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;As good as it gets\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;lead\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Jack Nicholson\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2014\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;filters\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;comedy_Jack Nicholson\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;comedy_2014\u0026quot;\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Firebase doesn\u0026apos;t allow querying with multiple conditions. \nHowever, I did find a way around for this:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;We need to download the initial filtered data from the database and store it in an array list.\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;                Query query = databaseReference.orderByChild(\u0026quot;genre\u0026quot;).equalTo(\u0026quot;comedy\u0026quot;);\n                databaseReference.addValueEventListener(new ValueEventListener() {\n                    @Override\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n\n                        ArrayList\u0026amp;lt;Movie\u0026amp;gt; movies = new ArrayList\u0026amp;lt;\u0026amp;gt;();\n                        for (DataSnapshot dataSnapshot1 : dataSnapshot.getChildren()) {\n                            String lead = dataSnapshot1.child(\u0026quot;lead\u0026quot;).getValue(String.class);\n                            String genre = dataSnapshot1.child(\u0026quot;genre\u0026quot;).getValue(String.class);\n\n                            movie = new Movie(lead, genre);\n\n                            movies.add(movie);\n\n                        }\n\n                        filterResults(movies, \u0026quot;Jack Nicholson\u0026quot;);\n\n                        }\n\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\n\n                    }\n                });\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Once we obtain the initial filtered data from the database, we need to do further filter in our backend.\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;public void filterResults(final List\u0026amp;lt;Movie\u0026amp;gt; list,  final String genre) {\n        List\u0026amp;lt;Movie\u0026amp;gt; movies = new ArrayList\u0026amp;lt;\u0026amp;gt;();\n        movies = list.stream().filter(o -\u0026amp;gt; o.getLead().equals(genre)).collect(Collectors.toList());\n        System.out.println(movies);\n\n        employees.forEach(movie -\u0026amp;gt; System.out.println(movie.getFirstName()));\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For Cloud Firestore\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://firebase.google.com/docs/firestore/query-data/queries#compound_queries\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://firebase.google.com/docs/firestore/query-data/queries#compound_queries\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Compound queries\nYou can chain multiple equality operators (== or array-contains) methods to create more specific queries (logical AND). However, you must create a composite index to combine equality operators with the inequality operators, \u0026amp;lt;, \u0026amp;lt;=, \u0026amp;gt;, and !=.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;citiesRef.where(\u0026apos;state\u0026apos;, \u0026apos;==\u0026apos;, \u0026apos;CO\u0026apos;).where(\u0026apos;name\u0026apos;, \u0026apos;==\u0026apos;, \u0026apos;Denver\u0026apos;);\ncitiesRef.where(\u0026apos;state\u0026apos;, \u0026apos;==\u0026apos;, \u0026apos;CA\u0026apos;).where(\u0026apos;population\u0026apos;, \u0026apos;\u0026amp;lt;\u0026apos;, 1000000);\nYou can perform range (\u0026amp;lt;, \u0026amp;lt;=, \u0026amp;gt;, \u0026amp;gt;=) or not equals (!=) comparisons only on a single field, and you can include at most one array-contains or array-contains-any clause in a compound query:\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The data from firebase realtime database is as _InternalLinkedHashMap\u0026amp;lt;dynamic, dynamic\u0026amp;gt;.\nYou can also just convert this it to your map and query very easily.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For example, I have a chat app and I use realtime database to store the uid of the user and the bool value whether the user is online or not. As the picture below.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/3WK64.png\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/3WK64.png\u0026quot; alt=\u0026quot;\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Now, I have a class RealtimeDatabase and a static method getAllUsersOnineStatus().\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;static getOnilineUsersUID() {\nvar dbRef = FirebaseDatabase.instance;\nDatabaseReference reference = dbRef.reference().child(\u0026quot;Online\u0026quot;);\nreference.once().then((value) {\n  Map\u0026amp;lt;String, bool\u0026amp;gt; map = Map\u0026amp;lt;String, bool\u0026amp;gt;.from(value.value);\n  List users = [];\n  map.forEach((key, value) {\n    if (value) {\n      users.add(key);\n    }\n  });\n  print(users);\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;}\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;It will print [NOraDTGaQSZbIEszidCujw1AEym2]\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I am new to flutter If you know more please update the answer.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;ref.orderByChild(\u0026quot;lead\u0026quot;).startAt(\u0026quot;Jack Nicholson\u0026quot;).endAt(\u0026quot;Jack Nicholson\u0026quot;).listner....\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This will work.\u0026lt;/p\u0026gt;\n    "],"id":280,"title":"Query based on multiple where clauses in Firebase","content":"\n                \n\u0026lt;pre class=\u0026quot;lang-json s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-json\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;movies\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;movie1\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;genre\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;comedy\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;name\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;As good as it gets\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;lead\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Jack Nicholson\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;movie2\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;genre\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Horror\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;name\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;The Shining\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;lead\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Jack Nicholson\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;movie3\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;genre\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;comedy\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;name\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;The Mask\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;\u0026quot;lead\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Jim Carrey\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I am a Firebase newbie. How can I retrieve a result from the data above \u0026lt;strong\u0026gt;where \u0026lt;code\u0026gt;genre = \u0026apos;comedy\u0026apos;\u0026lt;/code\u0026gt; AND \u0026lt;code\u0026gt;lead = \u0026apos;Jack Nicholson\u0026apos;\u0026lt;/code\u0026gt;\u0026lt;/strong\u0026gt;?\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;What options do I have?\u0026lt;/p\u0026gt;\n    ","slug":"query-based-on-multiple-where-clauses-in-firebase-1657387494547","postType":"QUESTION","createdAt":"2022-07-09T17:24:54.000Z","updatedAt":"2022-07-09T17:24:54.000Z","tags":[{"id":1723,"name":"firebase-realtime-database","slug":"firebase-realtime-database","createdAt":"2022-07-09T17:24:54.000Z","updatedAt":"2022-07-09T17:24:54.000Z","Questions_Tags":{"questionId":280,"tagId":1723}},{"id":1724,"name":"firebase","slug":"firebase","createdAt":"2022-07-09T17:24:54.000Z","updatedAt":"2022-07-09T17:24:54.000Z","Questions_Tags":{"questionId":280,"tagId":1724}}],"relatedQuestions":[{"title":"Query based on multiple where clauses in Firebase","slug":"query-based-on-multiple-where-clauses-in-firebase-1657387494547","tags":[{"name":"firebase-realtime-database","Questions_Tags":{"questionId":280,"tagId":1723}},{"name":"firebase","Questions_Tags":{"questionId":280,"tagId":1724}}]}]},"randomQuestions":[{"title":"Why can't I store a value and a reference to that value in the same struct?","slug":"why-can't-i-store-a-value-and-a-reference-to-that-value-in-the-same-struct-1657387506828"},{"title":"Javascript infamous Loop issue? [duplicate]","slug":"javascript-infamous-loop-issue-duplicate-1657387498530"},{"title":"How to find the 'sizeof' (a pointer pointing to an array)?","slug":"how-to-find-the-'sizeof'-(a-pointer-pointing-to-an-array)-1657387354284"},{"title":"With arrays, why is it the case that a[5] == 5[a]?","slug":"with-arrays-why-is-it-the-case-that-a5-5a-1657387956216"},{"title":"How to replace all occurrences of a string in JavaScript","slug":"how-to-replace-all-occurrences-of-a-string-in-javascript-1657384895467"},{"title":"mysqli or die, does it have to die?","slug":"mysqli-or-die-does-it-have-to-die-1657388533922"},{"title":"Importing installed package from script raises \"AttributeError: module has no attribute\" or \"ImportError: cannot import name\"","slug":"importing-installed-package-from-script-raises-\"attributeerror:-module-has-no-attribute\"-or-\"importerror:-cannot-import-name\"-1657387790607"},{"title":"Using global variables in a function","slug":"using-global-variables-in-a-function-1657384796002"},{"title":"Why don't flex items shrink past content size?","slug":"why-don't-flex-items-shrink-past-content-size-1657384687282"},{"title":"Why are these numbers not equal?","slug":"why-are-these-numbers-not-equal-1657384729559"},{"title":"How do I import a module given the full path?","slug":"how-do-i-import-a-module-given-the-full-path-1657388139965"},{"title":"What is the best regular expression to check if a string is a valid URL?","slug":"what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url-1657387618306"},{"title":"What are the rules for JavaScript's automatic semicolon insertion (ASI)?","slug":"what-are-the-rules-for-javascript's-automatic-semicolon-insertion-(asi)-1657387472789"},{"title":"Randomize a List\u003cT\u003e","slug":"randomize-a-listlesstgreater-1657388172793"},{"title":"What does \"Fatal error: Unexpectedly found nil while unwrapping an Optional value\" mean?","slug":"what-does-\"fatal-error:-unexpectedly-found-nil-while-unwrapping-an-optional-value\"-mean-1657384593944"},{"title":"XMLHttpRequest cannot load XXX No 'Access-Control-Allow-Origin' header","slug":"xmlhttprequest-cannot-load-xxx-no-'access-control-allow-origin'-header-1657384758362"},{"title":"What is the difference between JSON and Object Literal Notation?","slug":"what-is-the-difference-between-json-and-object-literal-notation-1657387515710"},{"title":"Why is using the JavaScript eval function a bad idea?","slug":"why-is-using-the-javascript-eval-function-a-bad-idea-1657387485165"},{"title":"How can I validate an email address in JavaScript?","slug":"how-can-i-validate-an-email-address-in-javascript-1657385475959"},{"title":"How to randomize (shuffle) a JavaScript array?","slug":"how-to-randomize-(shuffle)-a-javascript-array-1657384790171"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"query-based-on-multiple-where-clauses-in-firebase-1657387494547"},"buildId":"xZs8haGjOP63QuDE0kxeX","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>