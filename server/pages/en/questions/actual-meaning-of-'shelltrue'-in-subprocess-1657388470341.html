<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/actual-meaning-of-&apos;shelltrue&apos;-in-subprocess-1657388470341","name":"Questions"}}]}</script><title>Actual meaning of &#x27;shell=True&#x27; in subprocess | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I am calling different processes with the subprocess module. However, I have a question.

In the following codes:

callProcess = subprocess.Popen([&#x27;ls&#x27;, &#x27;-l&#x27;], shell=True)


and 

callProcess = subprocess.Popen([&#x27;ls&#x27;, &#x27;-l&#x27;]) # without shell


Both work. After reading the docs, I came to know that shell=True means executing the code through the shell. So that means in absence, the process is directly started. 

So what should I prefer for my case - I need to run a process and get its output. What benefit do I have from calling it from within the shell or outside of it.
    "/><meta property="og:title" content="Actual meaning of &#x27;shell=True&#x27; in subprocess | Solutions Checker"/><meta property="og:description" content="I am calling different processes with the subprocess module. However, I have a question.

In the following codes:

callProcess = subprocess.Popen([&#x27;ls&#x27;, &#x27;-l&#x27;], shell=True)


and 

callProcess = subprocess.Popen([&#x27;ls&#x27;, &#x27;-l&#x27;]) # without shell


Both work. After reading the docs, I came to know that shell=True means executing the code through the shell. So that means in absence, the process is directly started. 

So what should I prefer for my case - I need to run a process and get its output. What benefit do I have from calling it from within the shell or outside of it.
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Actual meaning of &apos;shell=True&apos; in subprocess","text":"I am calling different processes with the subprocess module. However, I have a question.\n\nIn the following codes:\n\ncallProcess = subprocess.Popen([&apos;ls&apos;, &apos;-l&apos;], shell=True)\n\n\nand \n\ncallProcess = subprocess.Popen([&apos;ls&apos;, &apos;-l&apos;]) # without shell\n\n\nBoth work. After reading the docs, I came to know that shell=True means executing the code through the shell. So that means in absence, the process is directly started. \n\nSo what should I prefer for my case - I need to run a process and get its output. What benefit do I have from calling it from within the shell or outside of it.\n    ","answerCount":7,"upVoteCount":500,"suggestedAnswer":[{"text":"The benefit of not calling via the shell is that you are not invoking a &apos;mystery program.&apos;  On POSIX, the environment variable SHELL controls which binary is invoked as the &quot;shell.&quot;  On Windows, there is no bourne shell descendent, only cmd.exe.\n\nSo invoking the shell invokes a program of the user&apos;s choosing and is platform-dependent.  Generally speaking, avoid invocations via the shell.\n\nInvoking via the shell does allow you to expand environment variables and file globs according to the shell&apos;s usual mechanism.  On POSIX systems, the shell expands file globs to a list of files.  On Windows, a file glob (e.g., &quot;*.*&quot;) is not expanded by the shell, anyway (but environment variables on a command line are expanded by cmd.exe).\n\nIf you think you want environment variable expansions and file globs, research the ILS attacks of 1992-ish on network services which performed subprogram invocations via the shell.  Examples include the various sendmail backdoors involving ILS.\n\nIn summary, use shell=False.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"&gt;&gt;&gt; import subprocess\n&gt;&gt;&gt; subprocess.call(&apos;echo $HOME&apos;)\nTraceback (most recent call last):\n...\nOSError: [Errno 2] No such file or directory\n&gt;&gt;&gt;\n&gt;&gt;&gt; subprocess.call(&apos;echo $HOME&apos;, shell=True)\n/user/khong\n0\n\n\n\n  Setting the shell argument to a true value causes subprocess to spawn an intermediate shell process, and tell it to run the command. In other words, using an intermediate shell means that variables, glob patterns, and other special shell features in the command string are processed before the command is run. Here, in the example, $HOME was processed before the echo command. Actually, this is the case of command with shell expansion while the command ls -l considered as a simple command.\n\n\nsource: Subprocess Module\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"An example where things could go wrong with Shell=True is shown here\n\n&gt;&gt;&gt; from subprocess import call\n&gt;&gt;&gt; filename = input(&quot;What file would you like to display?\\n&quot;)\nWhat file would you like to display?\nnon_existent; rm -rf / # THIS WILL DELETE EVERYTHING IN ROOT PARTITION!!!\n&gt;&gt;&gt; call(&quot;cat &quot; + filename, shell=True) # Uh-oh. This will end badly...\n\n\nCheck the doc here: subprocess.call()\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Executing programs through the shell means that all user input passed to the program is interpreted according to the syntax and semantic rules of the invoked shell.  At best, this only causes inconvenience to the user, because the user has to obey these rules.  For instance, paths containing special shell characters like quotation marks or blanks must be escaped.  At worst, it causes security leaks, because the user can execute arbitrary programs.\n\nshell=True is sometimes convenient to make use of specific shell features like word splitting or parameter expansion.  However, if such a feature is required, make use of other modules are given to you (e.g. os.path.expandvars() for parameter expansion or shlex for word splitting).  This means more work, but avoids other problems.\n\nIn short: Avoid shell=True by all means.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"The other answers here adequately explain the security caveats which are also mentioned in the subprocess documentation.  But in addition to that, the overhead of starting a shell to start the program you want to run is often unnecessary and definitely silly for situations where you don&apos;t actually use any of the shell&apos;s functionality.  Moreover, the additional hidden complexity should scare you, especially if you are not very familiar with the shell or the services it provides.\nWhere the interactions with the shell are nontrivial, you now require the reader and maintainer of the Python script (which may or may not be your future self) to understand both Python and shell script. Remember the Python motto &quot;explicit is better than implicit&quot;; even when the Python code is going to be somewhat more complex than the equivalent (and often very terse) shell script, you might be better off removing the shell and replacing the functionality with native Python constructs. Minimizing the work done in an external process and keeping control within your own code as far as possible is often a good idea simply because it improves visibility and reduces the risks of -- wanted or unwanted -- side effects.\nWildcard expansion, variable interpolation, and redirection are all simple to replace with native Python constructs.  A complex shell pipeline where parts or all cannot be reasonably rewritten in Python would be the one situation where perhaps you could consider using the shell.  You should still make sure you understand the performance and security implications.\nIn the trivial case, to avoid shell=True, simply replace\nsubprocess.Popen(&quot;command -with -options &apos;like this&apos; and\\\\ an\\\\ argument&quot;, shell=True)\n\nwith\nsubprocess.Popen([&apos;command&apos;, &apos;-with&apos;,&apos;-options&apos;, &apos;like this&apos;, &apos;and an argument&apos;])\n\nNotice how the first argument is a list of strings to pass to execvp(), and how quoting strings and backslash-escaping shell metacharacters is generally not necessary (or useful, or correct).\nMaybe see also When to wrap quotes around a shell variable?\nIf you don&apos;t want to figure this out yourself, the shlex.split() function can do this for you. It&apos;s part of the Python standard library, but of course, if your shell command string is static, you can just run it once, during development, and paste the result into your script.\nAs an aside, you very often want to avoid Popen if one of the simpler wrappers in the subprocess package does what you want. If you have a recent enough Python, you should probably use subprocess.run.\n\nWith check=True it will fail if the command you ran failed.\nWith stdout=subprocess.PIPE it will capture the command&apos;s output.\nWith text=True (or somewhat obscurely, with the synonym universal_newlines=True) it will decode output into a proper Unicode string (it&apos;s just bytes in the system encoding otherwise, on Python 3).\n\nIf not, for many tasks, you want check_output to obtain the output from a command, whilst checking that it succeeded, or check_call if there is no output to collect.\nI&apos;ll close with a quote from David Korn: &quot;It&apos;s easier to write a portable shell than a portable shell script.&quot; Even subprocess.run(&apos;echo &quot;$HOME&quot;&apos;, shell=True) is not portable to Windows.\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"Anwser above explains it correctly, but not straight enough.\nLet use ps command to see what happens.\nimport time\nimport subprocess\n\ns = subprocess.Popen([&quot;sleep 100&quot;], shell=True)\nprint(&quot;start&quot;)\nprint(s.pid)\ntime.sleep(5)\ns.kill()\nprint(&quot;finish&quot;)\n\nRun it, and shows\nstart\n832758\nfinish\n\nYou can then use ps -auxf &gt; 1 before finish, and then ps -auxf &gt; 2 after finish. Here is the output\n1\ncy         71209  0.0  0.0   9184  4580 pts/6    Ss   Oct20   0:00  |       \\_ /bin/bash\ncy        832757  0.2  0.0  13324  9600 pts/6    S+   19:31   0:00  |       |   \\_ python /home/cy/Desktop/test.py\ncy        832758  0.0  0.0   2616   612 pts/6    S+   19:31   0:00  |       |       \\_ /bin/sh -c sleep 100\ncy        832759  0.0  0.0   5448   532 pts/6    S+   19:31   0:00  |       |           \\_ sleep 100\n\nSee? Instead of directly running sleep 100. it actually runs /bin/sh. and the pid it prints out is actually the pid of /bin/sh. After if you call s.kill(), it kills /bin/sh but sleep is still there.\n2\ncy         69369  0.0  0.0 533764  8160 ?        Ssl  Oct20   0:12  \\_ /usr/libexec/xdg-desktop-portal\ncy         69411  0.0  0.0 491652 14856 ?        Ssl  Oct20   0:04  \\_ /usr/libexec/xdg-desktop-portal-gtk\ncy        832646  0.0  0.0   5448   596 pts/6    S    19:30   0:00  \\_ sleep 100\n\nSo the next question is , what can /bin/sh do? Every linux user knows it, heard it, and uses it. But i bet there are so many people who doesn&apos;t really understand what is shell indeed. Maybe you also hear /bin/bash, they&apos;re similar.\nOne obvious function of shell is for users convenience to run linux application. because of shell programm like sh or bash, you can directly use command like ls rather than /usr/bin/ls. it will search where ls is and runs it for you.\nOther function is it will interpret string after $ as environment variable. You can compare these two python script to findout yourself.\nsubprocess.call([&quot;echo $PATH&quot;], shell=True)\n\nsubprocess.call([&quot;echo&quot;, &quot;$PATH&quot;])\n\nAnd the most important, it makes possible to run linux command as script. Such as if else are introduced by shell. it&apos;s not native linux command\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"let&apos;s assume you are using shell=False and providing the command as a list. And some malicious  user tried injecting an &apos;rm&apos; command.\nYou will see, that &apos;rm&apos; will be interpreted as an argument and effectively &apos;ls&apos; will try to find a file called &apos;rm&apos;\n&gt;&gt;&gt; subprocess.run([&apos;ls&apos;,&apos;-ld&apos;,&apos;/home&apos;,&apos;rm&apos;,&apos;/etc/passwd&apos;])\nls: rm: No such file or directory\n-rw-r--r--    1 root     root          1172 May 28  2020 /etc/passwd\ndrwxr-xr-x    2 root     root          4096 May 29  2020 /home\nCompletedProcess(args=[&apos;ls&apos;, &apos;-ld&apos;, &apos;/home&apos;, &apos;rm&apos;, &apos;/etc/passwd&apos;], returncode=1)\n\nshell=False is not a secure by default, if you don&apos;t control the input properly. You can still execute dangerous commands.\n&gt;&gt;&gt; subprocess.run([&apos;rm&apos;,&apos;-rf&apos;,&apos;/home&apos;])\nCompletedProcess(args=[&apos;rm&apos;, &apos;-rf&apos;, &apos;/home&apos;], returncode=0)\n&gt;&gt;&gt; subprocess.run([&apos;ls&apos;,&apos;-ld&apos;,&apos;/home&apos;])\nls: /home: No such file or directory\nCompletedProcess(args=[&apos;ls&apos;, &apos;-ld&apos;, &apos;/home&apos;], returncode=1)\n&gt;&gt;&gt;\n\nI am writing most of my applications in container environments, I know which shell is being invoked and i am not taking any user input.\nSo in my use case, I see no security risk. And it is much easier creating long string of commands. Hope I am not wrong.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-7e79b78ef884195a.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-c1a73f3e758d48b9.js" defer=""></script><script src="/_next/static/XDXakEY6gSPdgAODPxtjg/_buildManifest.js" defer=""></script><script src="/_next/static/XDXakEY6gSPdgAODPxtjg/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/actual-meaning-of-&#x27;shelltrue&#x27;-in-subprocess-1657388470341#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/actual-meaning-of-&#x27;shelltrue&#x27;-in-subprocess-1657388470341"><h1>Actual meaning of &#x27;shell=True&#x27; in subprocess</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>I am calling different processes with the <code>subprocess</code> module. However, I have a question.</p>

<p>In the following codes:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">callProcess = subprocess.Popen([<span class="hljs-string">'ls'</span>, <span class="hljs-string">'-l'</span>], shell=<span class="hljs-literal">True</span>)
</code></pre>

<p>and </p>

<pre class="lang-py s-code-block"><code class="hljs language-python">callProcess = subprocess.Popen([<span class="hljs-string">'ls'</span>, <span class="hljs-string">'-l'</span>]) <span class="hljs-comment"># without shell</span>
</code></pre>

<p>Both work. After reading the docs, I came to know that <code>shell=True</code> means executing the code through the shell. So that means in absence, the process is directly started. </p>

<p>So what should I prefer for my case - I need to run a process and get its output. What benefit do I have from calling it from within the shell or outside of it.</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The benefit of not calling via the shell is that you are not invoking a 'mystery program.'  On POSIX, the environment variable <code>SHELL</code> controls which binary is invoked as the "shell."  On Windows, there is no bourne shell descendent, only cmd.exe.</p>

<p>So invoking the shell invokes a program of the user's choosing and is platform-dependent.  Generally speaking, avoid invocations via the shell.</p>

<p>Invoking via the shell does allow you to expand environment variables and file globs according to the shell's usual mechanism.  On POSIX systems, the shell expands file globs to a list of files.  On Windows, a file glob (e.g., "*.*") is not expanded by the shell, anyway (but environment variables on a command line <em>are</em> expanded by cmd.exe).</p>

<p>If you think you want environment variable expansions and file globs, research the <code>ILS</code> attacks of 1992-ish on network services which performed subprogram invocations via the shell.  Examples include the various <code>sendmail</code> backdoors involving <code>ILS</code>.</p>

<p>In summary, use <code>shell=False</code>.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> subprocess
<span class="hljs-meta">&gt;&gt;&gt; </span>subprocess.call(<span class="hljs-string">'echo $HOME'</span>)
Traceback (most recent call last):
...
OSError: [Errno <span class="hljs-number">2</span>] No such file <span class="hljs-keyword">or</span> directory
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>subprocess.call(<span class="hljs-string">'echo $HOME'</span>, shell=<span class="hljs-literal">True</span>)
/user/khong
<span class="hljs-number">0</span>
</code></pre>

<blockquote>
  <p>Setting the shell argument to a true value causes subprocess to spawn an intermediate shell process, and tell it to run the command. In other words, using an intermediate shell means that variables, glob patterns, and other special shell features in the command string are processed before the command is run. Here, in the example, $HOME was processed before the echo command. Actually, this is the case of command with shell expansion while the command ls -l considered as a simple command.</p>
</blockquote>

<p>source: <a href="http://www.bogotobogo.com/python/python_subprocess_module.php" rel="noreferrer">Subprocess Module</a></p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>An example where things could go wrong with Shell=True is shown here</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> subprocess <span class="hljs-keyword">import</span> call
<span class="hljs-meta">&gt;&gt;&gt; </span>filename = <span class="hljs-built_in">input</span>(<span class="hljs-string">"What file would you like to display?\n"</span>)
What file would you like to display?
non_existent; rm -rf / <span class="hljs-comment"># THIS WILL DELETE EVERYTHING IN ROOT PARTITION!!!</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>call(<span class="hljs-string">"cat "</span> + filename, shell=<span class="hljs-literal">True</span>) <span class="hljs-comment"># Uh-oh. This will end badly...</span>
</code></pre>

<p>Check the doc here: <a href="https://docs.python.org/2/library/subprocess.html#frequently-used-arguments">subprocess.call()</a></p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Executing programs through the shell means that all user input passed to the program is interpreted according to the syntax and semantic rules of the invoked shell.  At best, this only causes inconvenience to the user, because the user has to obey these rules.  For instance, paths containing special shell characters like quotation marks or blanks must be escaped.  At worst, it causes security leaks, because the user can execute arbitrary programs.</p>

<p><code>shell=True</code> is sometimes convenient to make use of specific shell features like word splitting or parameter expansion.  However, if such a feature is required, make use of other modules are given to you (e.g. <code>os.path.expandvars()</code> for parameter expansion or <code>shlex</code> for word splitting).  This means more work, but avoids other problems.</p>

<p>In short: Avoid <code>shell=True</code> by all means.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The other answers here adequately explain the security caveats which are also mentioned in the <code>subprocess</code> documentation.  But in addition to that, the overhead of starting a shell to start the program you want to run is often unnecessary and definitely silly for situations where you don't actually use any of the shell's functionality.  Moreover, the additional hidden complexity should scare you, <em>especially</em> if you are not very familiar with the shell or the services it provides.</p>
<p>Where the interactions with the shell are nontrivial, you now require the reader and maintainer of the Python script (which may or may not be your future self) to understand both Python and shell script. Remember the Python motto <em>"explicit is better than implicit";</em> even when the Python code is going to be somewhat more complex than the equivalent (and often very terse) shell script, you might be better off removing the shell and replacing the functionality with native Python constructs. Minimizing the work done in an external process and keeping control within your own code as far as possible is often a good idea simply because it improves visibility and reduces the risks of -- wanted or unwanted -- side effects.</p>
<p>Wildcard expansion, variable interpolation, and redirection are all simple to replace with native Python constructs.  A complex shell pipeline where parts or all cannot be reasonably rewritten in Python would be the one situation where perhaps you could consider using the shell.  You should still make sure you understand the performance and security implications.</p>
<p>In the trivial case, to avoid <code>shell=True</code>, simply replace</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">subprocess.Popen(<span class="hljs-string">"command -with -options 'like this' and\\ an\\ argument"</span>, shell=<span class="hljs-literal">True</span>)
</code></pre>
<p>with</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">subprocess.Popen([<span class="hljs-string">'command'</span>, <span class="hljs-string">'-with'</span>,<span class="hljs-string">'-options'</span>, <span class="hljs-string">'like this'</span>, <span class="hljs-string">'and an argument'</span>])
</code></pre>
<p>Notice how the first argument is a list of strings to pass to <code>execvp()</code>, and how quoting strings and backslash-escaping shell metacharacters is generally not necessary (or useful, or correct).
Maybe see also <a href="https://stackoverflow.com/questions/10067266/when-to-wrap-quotes-around-a-shell-variable/27701642">When to wrap quotes around a shell variable?</a></p>
<p>If you don't want to figure this out yourself, the <code>shlex.split()</code> function can do this for you. It's part of the Python standard library, but of course, if your shell command string is static, you can just run it once, during development, and paste the result into your script.</p>
<p>As an aside, you very often want to avoid <code>Popen</code> if one of the simpler wrappers in the <code>subprocess</code> package does what you want. If you have a recent enough Python, you should probably use <a href="https://docs.python.org/3/library/subprocess.html#subprocess.run" rel="noreferrer"><code>subprocess.run</code></a>.</p>
<ul>
<li>With <code>check=True</code> it will fail if the command you ran failed.</li>
<li>With <code>stdout=subprocess.PIPE</code> it will capture the command's output.</li>
<li>With <code>text=True</code> (or somewhat obscurely, with the synonym <code>universal_newlines=True</code>) it will decode output into a proper Unicode string (it's just <code>bytes</code> in the system encoding otherwise, on Python 3).</li>
</ul>
<p>If not, for many tasks, you want <a href="https://docs.python.org/2/library/subprocess.html#subprocess.check_output" rel="noreferrer"><code>check_output</code></a> to obtain the output from a command, whilst checking that it succeeded, or <a href="https://docs.python.org/2/library/subprocess.html#subprocess.check_call" rel="noreferrer"><code>check_call</code></a> if there is no output to collect.</p>
<p>I'll close with a quote from David Korn: "It's easier to write a portable shell than a portable shell script." Even <code>subprocess.run('echo "$HOME"', shell=True)</code> is not portable to Windows.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Anwser above explains it correctly, but not straight enough.
Let use <code>ps</code> command to see what happens.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> subprocess

s = subprocess.Popen([<span class="hljs-string">"sleep 100"</span>], shell=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"start"</span>)
<span class="hljs-built_in">print</span>(s.pid)
time.sleep(<span class="hljs-number">5</span>)
s.kill()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"finish"</span>)
</code></pre>
<p>Run it, and shows</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">start
<span class="hljs-number">832758</span>
finish
</code></pre>
<p>You can then use <code>ps -auxf &gt; 1</code> before <code>finish</code>, and then <code>ps -auxf &gt; 2</code> after <code>finish</code>. Here is the output</p>
<p><em><strong>1</strong></em></p>
<pre class="lang-py s-code-block"><code class="hljs language-python">cy         <span class="hljs-number">71209</span>  <span class="hljs-number">0.0</span>  <span class="hljs-number">0.0</span>   <span class="hljs-number">9184</span>  <span class="hljs-number">4580</span> pts/<span class="hljs-number">6</span>    Ss   Oct20   <span class="hljs-number">0</span>:<span class="hljs-number">00</span>  |       \_ /<span class="hljs-built_in">bin</span>/bash
cy        <span class="hljs-number">832757</span>  <span class="hljs-number">0.2</span>  <span class="hljs-number">0.0</span>  <span class="hljs-number">13324</span>  <span class="hljs-number">9600</span> pts/<span class="hljs-number">6</span>    S+   <span class="hljs-number">19</span>:<span class="hljs-number">31</span>   <span class="hljs-number">0</span>:<span class="hljs-number">00</span>  |       |   \_ python /home/cy/Desktop/test.py
cy        <span class="hljs-number">832758</span>  <span class="hljs-number">0.0</span>  <span class="hljs-number">0.0</span>   <span class="hljs-number">2616</span>   <span class="hljs-number">612</span> pts/<span class="hljs-number">6</span>    S+   <span class="hljs-number">19</span>:<span class="hljs-number">31</span>   <span class="hljs-number">0</span>:<span class="hljs-number">00</span>  |       |       \_ /<span class="hljs-built_in">bin</span>/sh -c sleep <span class="hljs-number">100</span>
cy        <span class="hljs-number">832759</span>  <span class="hljs-number">0.0</span>  <span class="hljs-number">0.0</span>   <span class="hljs-number">5448</span>   <span class="hljs-number">532</span> pts/<span class="hljs-number">6</span>    S+   <span class="hljs-number">19</span>:<span class="hljs-number">31</span>   <span class="hljs-number">0</span>:<span class="hljs-number">00</span>  |       |           \_ sleep <span class="hljs-number">100</span>
</code></pre>
<p>See? Instead of directly running <code>sleep 100</code>. it actually runs <code>/bin/sh</code>. and the <code>pid</code> it prints out is actually the <code>pid</code> of <code>/bin/sh</code>. After if you call <code>s.kill()</code>, it kills <code>/bin/sh</code> but <code>sleep</code> is still there.</p>
<p><em><strong>2</strong></em></p>
<pre class="lang-py s-code-block"><code class="hljs language-python">cy         <span class="hljs-number">69369</span>  <span class="hljs-number">0.0</span>  <span class="hljs-number">0.0</span> <span class="hljs-number">533764</span>  <span class="hljs-number">8160</span> ?        Ssl  Oct20   <span class="hljs-number">0</span>:<span class="hljs-number">12</span>  \_ /usr/libexec/xdg-desktop-portal
cy         <span class="hljs-number">69411</span>  <span class="hljs-number">0.0</span>  <span class="hljs-number">0.0</span> <span class="hljs-number">491652</span> <span class="hljs-number">14856</span> ?        Ssl  Oct20   <span class="hljs-number">0</span>:04  \_ /usr/libexec/xdg-desktop-portal-gtk
cy        <span class="hljs-number">832646</span>  <span class="hljs-number">0.0</span>  <span class="hljs-number">0.0</span>   <span class="hljs-number">5448</span>   <span class="hljs-number">596</span> pts/<span class="hljs-number">6</span>    S    <span class="hljs-number">19</span>:<span class="hljs-number">30</span>   <span class="hljs-number">0</span>:<span class="hljs-number">00</span>  \_ sleep <span class="hljs-number">100</span>
</code></pre>
<p>So the next question is , what can <code>/bin/sh</code> do? Every linux user knows it, heard it, and uses it. But i bet there are so many people who doesn't really understand what is <code>shell</code> indeed. Maybe you also hear <code>/bin/bash</code>, they're similar.</p>
<p>One obvious function of shell is for users convenience to run linux application. because of shell programm like <code>sh</code> or <code>bash</code>, you can directly use command like <code>ls</code> rather than <code>/usr/bin/ls</code>. it will search where <code>ls</code> is and runs it for you.</p>
<p>Other function is it will interpret string after <code>$</code> as environment variable. You can compare these two python script to findout yourself.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">subprocess.call([<span class="hljs-string">"echo $PATH"</span>], shell=<span class="hljs-literal">True</span>)
</code></pre>
<pre class="lang-py s-code-block"><code class="hljs language-python">subprocess.call([<span class="hljs-string">"echo"</span>, <span class="hljs-string">"$PATH"</span>])
</code></pre>
<p><strong>And the most important, it makes possible to run linux command as script. Such as <code>if</code> <code>else</code> are introduced by shell. it's not native linux command</strong></p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>let's assume you are using shell=False and providing the command as a list. And some malicious  user tried injecting an 'rm' command.
You will see, that 'rm' will be interpreted as an argument and effectively 'ls' will try to find a file called 'rm'</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>subprocess.run([<span class="hljs-string">'ls'</span>,<span class="hljs-string">'-ld'</span>,<span class="hljs-string">'/home'</span>,<span class="hljs-string">'rm'</span>,<span class="hljs-string">'/etc/passwd'</span>])
ls: rm: No such file <span class="hljs-keyword">or</span> directory
-rw-r--r--    <span class="hljs-number">1</span> root     root          <span class="hljs-number">1172</span> May <span class="hljs-number">28</span>  <span class="hljs-number">2020</span> /etc/passwd
drwxr-xr-x    <span class="hljs-number">2</span> root     root          <span class="hljs-number">4096</span> May <span class="hljs-number">29</span>  <span class="hljs-number">2020</span> /home
CompletedProcess(args=[<span class="hljs-string">'ls'</span>, <span class="hljs-string">'-ld'</span>, <span class="hljs-string">'/home'</span>, <span class="hljs-string">'rm'</span>, <span class="hljs-string">'/etc/passwd'</span>], returncode=<span class="hljs-number">1</span>)
</code></pre>
<p>shell=False is not a secure by default, if you don't control the input properly. You can still execute dangerous commands.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>subprocess.run([<span class="hljs-string">'rm'</span>,<span class="hljs-string">'-rf'</span>,<span class="hljs-string">'/home'</span>])
CompletedProcess(args=[<span class="hljs-string">'rm'</span>, <span class="hljs-string">'-rf'</span>, <span class="hljs-string">'/home'</span>], returncode=<span class="hljs-number">0</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>subprocess.run([<span class="hljs-string">'ls'</span>,<span class="hljs-string">'-ld'</span>,<span class="hljs-string">'/home'</span>])
ls: /home: No such file <span class="hljs-keyword">or</span> directory
CompletedProcess(args=[<span class="hljs-string">'ls'</span>, <span class="hljs-string">'-ld'</span>, <span class="hljs-string">'/home'</span>], returncode=<span class="hljs-number">1</span>)
&gt;&gt;&gt;
</code></pre>
<p>I am writing most of my applications in container environments, I know which shell is being invoked and i am not taking any user input.</p>
<p>So in my use case, I see no security risk. And it is much easier creating long string of commands. Hope I am not wrong.</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-can-i-upload-files-asynchronously-with-jquery-1657384815389">How can I upload files asynchronously with jQuery?</a><a href="/questions/how-to-use-php&#x27;s-password_hash-to-hash-and-verify-passwords-1657387808784">How to use PHP&#x27;s password_hash to hash and verify passwords</a><a href="/questions/why-is-iostream::eof-inside-a-loop-condition-(i.e.-while-(!stream.eof()))-considered-wrong-1657384355427">Why is iostream::eof inside a loop condition (i.e. `while (!stream.eof())`) considered wrong?</a><a href="/questions/how-do-you-remove-duplicates-from-a-list-whilst-preserving-order-1657387877978">How do you remove duplicates from a list whilst preserving order?</a><a href="/questions/how-to-create-recyclerview-with-multiple-view-types-1657388121512">How to create RecyclerView with multiple view types</a><a href="/questions/%22cross-origin-requests-are-only-supported-for-http.%22-error-when-loading-a-local-file-1657387942403">&quot;Cross origin requests are only supported for HTTP.&quot; error when loading a local file</a><a href="/questions/use-a-content-script-to-access-the-page-context-variables-and-functions-1657384842444">Use a content script to access the page context variables and functions</a><a href="/questions/how-can-i-pivot-a-dataframe-1657384433802">How can I pivot a dataframe?</a><a href="/questions/how-do-i-split-a-list-into-equally-sized-chunks-1657384580399">How do I split a list into equally-sized chunks?</a><a href="/questions/how-can-i-make-an-ajax-call-without-jquery-1657388448955">How can I make an AJAX call without jQuery?</a><a href="/questions/how-to-get-the-difference-between-two-arrays-in-javascript-1657388463384">How to get the difference between two arrays in JavaScript?</a><a href="/questions/is-javascript-a-pass-by-reference-or-pass-by-value-language-1657384675679">Is JavaScript a pass-by-reference or pass-by-value language?</a><a href="/questions/why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877">Why do I need to override the equals and hashCode methods in Java?</a><a href="/questions/when-should-static_cast-dynamic_cast-const_cast-and-reinterpret_cast-be-used-1657388406205">When should static_cast, dynamic_cast, const_cast, and reinterpret_cast be used?</a><a href="/questions/reference-what-does-this-regex-mean-1657384291445">Reference - What does this regex mean?</a><a href="/questions/iterator-invalidation-rules-for-c++-containers-1657387561090">Iterator invalidation rules for C++ containers</a><a href="/questions/what-is-event-bubbling-and-capturing-1657388059203">What is event bubbling and capturing?</a><a href="/questions/how-can-i-iterate-through-two-lists-in-parallel-1657387278930">How can I iterate through two lists in parallel?</a><a href="/questions/sort-a-maplesskey-valuegreater-by-values-1657387443904">Sort a Map&lt;Key, Value&gt; by values</a><a href="/questions/how-to-remove-%22noise%22-from-gccclang-assembly-output-1657387612391">How to remove &quot;noise&quot; from GCC/clang assembly output?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;The benefit of not calling via the shell is that you are not invoking a \u0026apos;mystery program.\u0026apos;  On POSIX, the environment variable \u0026lt;code\u0026gt;SHELL\u0026lt;/code\u0026gt; controls which binary is invoked as the \u0026quot;shell.\u0026quot;  On Windows, there is no bourne shell descendent, only cmd.exe.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So invoking the shell invokes a program of the user\u0026apos;s choosing and is platform-dependent.  Generally speaking, avoid invocations via the shell.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Invoking via the shell does allow you to expand environment variables and file globs according to the shell\u0026apos;s usual mechanism.  On POSIX systems, the shell expands file globs to a list of files.  On Windows, a file glob (e.g., \u0026quot;*.*\u0026quot;) is not expanded by the shell, anyway (but environment variables on a command line \u0026lt;em\u0026gt;are\u0026lt;/em\u0026gt; expanded by cmd.exe).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you think you want environment variable expansions and file globs, research the \u0026lt;code\u0026gt;ILS\u0026lt;/code\u0026gt; attacks of 1992-ish on network services which performed subprogram invocations via the shell.  Examples include the various \u0026lt;code\u0026gt;sendmail\u0026lt;/code\u0026gt; backdoors involving \u0026lt;code\u0026gt;ILS\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In summary, use \u0026lt;code\u0026gt;shell=False\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; subprocess\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;subprocess.call(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;echo $HOME\u0026apos;\u0026lt;/span\u0026gt;)\nTraceback (most recent call last):\n...\nOSError: [Errno \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] No such file \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt; directory\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;subprocess.call(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;echo $HOME\u0026apos;\u0026lt;/span\u0026gt;, shell=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n/user/khong\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Setting the shell argument to a true value causes subprocess to spawn an intermediate shell process, and tell it to run the command. In other words, using an intermediate shell means that variables, glob patterns, and other special shell features in the command string are processed before the command is run. Here, in the example, $HOME was processed before the echo command. Actually, this is the case of command with shell expansion while the command ls -l considered as a simple command.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;source: \u0026lt;a href=\u0026quot;http://www.bogotobogo.com/python/python_subprocess_module.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Subprocess Module\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;An example where things could go wrong with Shell=True is shown here\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; subprocess \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; call\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;filename = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;What file would you like to display?\\n\u0026quot;\u0026lt;/span\u0026gt;)\nWhat file would you like to display?\nnon_existent; rm -rf / \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# THIS WILL DELETE EVERYTHING IN ROOT PARTITION!!!\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;call(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;cat \u0026quot;\u0026lt;/span\u0026gt; + filename, shell=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Uh-oh. This will end badly...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Check the doc here: \u0026lt;a href=\u0026quot;https://docs.python.org/2/library/subprocess.html#frequently-used-arguments\u0026quot;\u0026gt;subprocess.call()\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Executing programs through the shell means that all user input passed to the program is interpreted according to the syntax and semantic rules of the invoked shell.  At best, this only causes inconvenience to the user, because the user has to obey these rules.  For instance, paths containing special shell characters like quotation marks or blanks must be escaped.  At worst, it causes security leaks, because the user can execute arbitrary programs.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;shell=True\u0026lt;/code\u0026gt; is sometimes convenient to make use of specific shell features like word splitting or parameter expansion.  However, if such a feature is required, make use of other modules are given to you (e.g. \u0026lt;code\u0026gt;os.path.expandvars()\u0026lt;/code\u0026gt; for parameter expansion or \u0026lt;code\u0026gt;shlex\u0026lt;/code\u0026gt; for word splitting).  This means more work, but avoids other problems.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In short: Avoid \u0026lt;code\u0026gt;shell=True\u0026lt;/code\u0026gt; by all means.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The other answers here adequately explain the security caveats which are also mentioned in the \u0026lt;code\u0026gt;subprocess\u0026lt;/code\u0026gt; documentation.  But in addition to that, the overhead of starting a shell to start the program you want to run is often unnecessary and definitely silly for situations where you don\u0026apos;t actually use any of the shell\u0026apos;s functionality.  Moreover, the additional hidden complexity should scare you, \u0026lt;em\u0026gt;especially\u0026lt;/em\u0026gt; if you are not very familiar with the shell or the services it provides.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Where the interactions with the shell are nontrivial, you now require the reader and maintainer of the Python script (which may or may not be your future self) to understand both Python and shell script. Remember the Python motto \u0026lt;em\u0026gt;\u0026quot;explicit is better than implicit\u0026quot;;\u0026lt;/em\u0026gt; even when the Python code is going to be somewhat more complex than the equivalent (and often very terse) shell script, you might be better off removing the shell and replacing the functionality with native Python constructs. Minimizing the work done in an external process and keeping control within your own code as far as possible is often a good idea simply because it improves visibility and reduces the risks of -- wanted or unwanted -- side effects.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Wildcard expansion, variable interpolation, and redirection are all simple to replace with native Python constructs.  A complex shell pipeline where parts or all cannot be reasonably rewritten in Python would be the one situation where perhaps you could consider using the shell.  You should still make sure you understand the performance and security implications.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In the trivial case, to avoid \u0026lt;code\u0026gt;shell=True\u0026lt;/code\u0026gt;, simply replace\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;subprocess.Popen(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;command -with -options \u0026apos;like this\u0026apos; and\\\\ an\\\\ argument\u0026quot;\u0026lt;/span\u0026gt;, shell=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;with\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;subprocess.Popen([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;command\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-with\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-options\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;like this\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;and an argument\u0026apos;\u0026lt;/span\u0026gt;])\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Notice how the first argument is a list of strings to pass to \u0026lt;code\u0026gt;execvp()\u0026lt;/code\u0026gt;, and how quoting strings and backslash-escaping shell metacharacters is generally not necessary (or useful, or correct).\nMaybe see also \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/10067266/when-to-wrap-quotes-around-a-shell-variable/27701642\u0026quot;\u0026gt;When to wrap quotes around a shell variable?\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you don\u0026apos;t want to figure this out yourself, the \u0026lt;code\u0026gt;shlex.split()\u0026lt;/code\u0026gt; function can do this for you. It\u0026apos;s part of the Python standard library, but of course, if your shell command string is static, you can just run it once, during development, and paste the result into your script.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As an aside, you very often want to avoid \u0026lt;code\u0026gt;Popen\u0026lt;/code\u0026gt; if one of the simpler wrappers in the \u0026lt;code\u0026gt;subprocess\u0026lt;/code\u0026gt; package does what you want. If you have a recent enough Python, you should probably use \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/subprocess.html#subprocess.run\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;subprocess.run\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;With \u0026lt;code\u0026gt;check=True\u0026lt;/code\u0026gt; it will fail if the command you ran failed.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;With \u0026lt;code\u0026gt;stdout=subprocess.PIPE\u0026lt;/code\u0026gt; it will capture the command\u0026apos;s output.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;With \u0026lt;code\u0026gt;text=True\u0026lt;/code\u0026gt; (or somewhat obscurely, with the synonym \u0026lt;code\u0026gt;universal_newlines=True\u0026lt;/code\u0026gt;) it will decode output into a proper Unicode string (it\u0026apos;s just \u0026lt;code\u0026gt;bytes\u0026lt;/code\u0026gt; in the system encoding otherwise, on Python 3).\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;If not, for many tasks, you want \u0026lt;a href=\u0026quot;https://docs.python.org/2/library/subprocess.html#subprocess.check_output\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;check_output\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to obtain the output from a command, whilst checking that it succeeded, or \u0026lt;a href=\u0026quot;https://docs.python.org/2/library/subprocess.html#subprocess.check_call\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;check_call\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; if there is no output to collect.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I\u0026apos;ll close with a quote from David Korn: \u0026quot;It\u0026apos;s easier to write a portable shell than a portable shell script.\u0026quot; Even \u0026lt;code\u0026gt;subprocess.run(\u0026apos;echo \u0026quot;$HOME\u0026quot;\u0026apos;, shell=True)\u0026lt;/code\u0026gt; is not portable to Windows.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Anwser above explains it correctly, but not straight enough.\nLet use \u0026lt;code\u0026gt;ps\u0026lt;/code\u0026gt; command to see what happens.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; time\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; subprocess\n\ns = subprocess.Popen([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sleep 100\u0026quot;\u0026lt;/span\u0026gt;], shell=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;start\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(s.pid)\ntime.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;)\ns.kill()\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;finish\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Run it, and shows\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;start\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;832758\u0026lt;/span\u0026gt;\nfinish\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;You can then use \u0026lt;code\u0026gt;ps -auxf \u0026amp;gt; 1\u0026lt;/code\u0026gt; before \u0026lt;code\u0026gt;finish\u0026lt;/code\u0026gt;, and then \u0026lt;code\u0026gt;ps -auxf \u0026amp;gt; 2\u0026lt;/code\u0026gt; after \u0026lt;code\u0026gt;finish\u0026lt;/code\u0026gt;. Here is the output\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;strong\u0026gt;1\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;cy         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;71209\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9184\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4580\u0026lt;/span\u0026gt; pts/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;    Ss   Oct20   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;  |       \\_ /\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bin\u0026lt;/span\u0026gt;/bash\ncy        \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;832757\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13324\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9600\u0026lt;/span\u0026gt; pts/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;    S+   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;19\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;31\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;  |       |   \\_ python /home/cy/Desktop/test.py\ncy        \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;832758\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2616\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;612\u0026lt;/span\u0026gt; pts/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;    S+   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;19\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;31\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;  |       |       \\_ /\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bin\u0026lt;/span\u0026gt;/sh -c sleep \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;\ncy        \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;832759\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5448\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;532\u0026lt;/span\u0026gt; pts/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;    S+   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;19\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;31\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;  |       |           \\_ sleep \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;See? Instead of directly running \u0026lt;code\u0026gt;sleep 100\u0026lt;/code\u0026gt;. it actually runs \u0026lt;code\u0026gt;/bin/sh\u0026lt;/code\u0026gt;. and the \u0026lt;code\u0026gt;pid\u0026lt;/code\u0026gt; it prints out is actually the \u0026lt;code\u0026gt;pid\u0026lt;/code\u0026gt; of \u0026lt;code\u0026gt;/bin/sh\u0026lt;/code\u0026gt;. After if you call \u0026lt;code\u0026gt;s.kill()\u0026lt;/code\u0026gt;, it kills \u0026lt;code\u0026gt;/bin/sh\u0026lt;/code\u0026gt; but \u0026lt;code\u0026gt;sleep\u0026lt;/code\u0026gt; is still there.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;strong\u0026gt;2\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;cy         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;69369\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;533764\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8160\u0026lt;/span\u0026gt; ?        Ssl  Oct20   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;  \\_ /usr/libexec/xdg-desktop-portal\ncy         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;69411\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;491652\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14856\u0026lt;/span\u0026gt; ?        Ssl  Oct20   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:04  \\_ /usr/libexec/xdg-desktop-portal-gtk\ncy        \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;832646\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5448\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;596\u0026lt;/span\u0026gt; pts/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;    S    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;19\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;  \\_ sleep \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;So the next question is , what can \u0026lt;code\u0026gt;/bin/sh\u0026lt;/code\u0026gt; do? Every linux user knows it, heard it, and uses it. But i bet there are so many people who doesn\u0026apos;t really understand what is \u0026lt;code\u0026gt;shell\u0026lt;/code\u0026gt; indeed. Maybe you also hear \u0026lt;code\u0026gt;/bin/bash\u0026lt;/code\u0026gt;, they\u0026apos;re similar.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;One obvious function of shell is for users convenience to run linux application. because of shell programm like \u0026lt;code\u0026gt;sh\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;bash\u0026lt;/code\u0026gt;, you can directly use command like \u0026lt;code\u0026gt;ls\u0026lt;/code\u0026gt; rather than \u0026lt;code\u0026gt;/usr/bin/ls\u0026lt;/code\u0026gt;. it will search where \u0026lt;code\u0026gt;ls\u0026lt;/code\u0026gt; is and runs it for you.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Other function is it will interpret string after \u0026lt;code\u0026gt;$\u0026lt;/code\u0026gt; as environment variable. You can compare these two python script to findout yourself.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;subprocess.call([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;echo $PATH\u0026quot;\u0026lt;/span\u0026gt;], shell=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;subprocess.call([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;echo\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;$PATH\u0026quot;\u0026lt;/span\u0026gt;])\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;And the most important, it makes possible to run linux command as script. Such as \u0026lt;code\u0026gt;if\u0026lt;/code\u0026gt; \u0026lt;code\u0026gt;else\u0026lt;/code\u0026gt; are introduced by shell. it\u0026apos;s not native linux command\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;let\u0026apos;s assume you are using shell=False and providing the command as a list. And some malicious  user tried injecting an \u0026apos;rm\u0026apos; command.\nYou will see, that \u0026apos;rm\u0026apos; will be interpreted as an argument and effectively \u0026apos;ls\u0026apos; will try to find a file called \u0026apos;rm\u0026apos;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;subprocess.run([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ls\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-ld\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/home\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;rm\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/etc/passwd\u0026apos;\u0026lt;/span\u0026gt;])\nls: rm: No such file \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt; directory\n-rw-r--r--    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; root     root          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1172\u0026lt;/span\u0026gt; May \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;28\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2020\u0026lt;/span\u0026gt; /etc/passwd\ndrwxr-xr-x    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; root     root          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4096\u0026lt;/span\u0026gt; May \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;29\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2020\u0026lt;/span\u0026gt; /home\nCompletedProcess(args=[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ls\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-ld\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/home\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;rm\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/etc/passwd\u0026apos;\u0026lt;/span\u0026gt;], returncode=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;shell=False is not a secure by default, if you don\u0026apos;t control the input properly. You can still execute dangerous commands.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;subprocess.run([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;rm\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-rf\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/home\u0026apos;\u0026lt;/span\u0026gt;])\nCompletedProcess(args=[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;rm\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-rf\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/home\u0026apos;\u0026lt;/span\u0026gt;], returncode=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;subprocess.run([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ls\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-ld\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/home\u0026apos;\u0026lt;/span\u0026gt;])\nls: /home: No such file \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt; directory\nCompletedProcess(args=[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ls\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-ld\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/home\u0026apos;\u0026lt;/span\u0026gt;], returncode=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I am writing most of my applications in container environments, I know which shell is being invoked and i am not taking any user input.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So in my use case, I see no security risk. And it is much easier creating long string of commands. Hope I am not wrong.\u0026lt;/p\u0026gt;\n    "],"id":577,"title":"Actual meaning of 'shell=True' in subprocess","content":"\n                \n\u0026lt;p\u0026gt;I am calling different processes with the \u0026lt;code\u0026gt;subprocess\u0026lt;/code\u0026gt; module. However, I have a question.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In the following codes:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;callProcess = subprocess.Popen([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ls\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-l\u0026apos;\u0026lt;/span\u0026gt;], shell=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;callProcess = subprocess.Popen([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ls\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-l\u0026apos;\u0026lt;/span\u0026gt;]) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# without shell\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Both work. After reading the docs, I came to know that \u0026lt;code\u0026gt;shell=True\u0026lt;/code\u0026gt; means executing the code through the shell. So that means in absence, the process is directly started. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So what should I prefer for my case - I need to run a process and get its output. What benefit do I have from calling it from within the shell or outside of it.\u0026lt;/p\u0026gt;\n    ","slug":"actual-meaning-of-'shelltrue'-in-subprocess-1657388470341","postType":"QUESTION","createdAt":"2022-07-09T17:41:10.000Z","updatedAt":"2022-07-09T17:41:10.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"How can I upload files asynchronously with jQuery?","slug":"how-can-i-upload-files-asynchronously-with-jquery-1657384815389"},{"title":"How to use PHP's password_hash to hash and verify passwords","slug":"how-to-use-php's-password_hash-to-hash-and-verify-passwords-1657387808784"},{"title":"Why is iostream::eof inside a loop condition (i.e. `while (!stream.eof())`) considered wrong?","slug":"why-is-iostream::eof-inside-a-loop-condition-(i.e.-while-(!stream.eof()))-considered-wrong-1657384355427"},{"title":"How do you remove duplicates from a list whilst preserving order?","slug":"how-do-you-remove-duplicates-from-a-list-whilst-preserving-order-1657387877978"},{"title":"How to create RecyclerView with multiple view types","slug":"how-to-create-recyclerview-with-multiple-view-types-1657388121512"},{"title":"\"Cross origin requests are only supported for HTTP.\" error when loading a local file","slug":"\"cross-origin-requests-are-only-supported-for-http.\"-error-when-loading-a-local-file-1657387942403"},{"title":"Use a content script to access the page context variables and functions","slug":"use-a-content-script-to-access-the-page-context-variables-and-functions-1657384842444"},{"title":"How can I pivot a dataframe?","slug":"how-can-i-pivot-a-dataframe-1657384433802"},{"title":"How do I split a list into equally-sized chunks?","slug":"how-do-i-split-a-list-into-equally-sized-chunks-1657384580399"},{"title":"How can I make an AJAX call without jQuery?","slug":"how-can-i-make-an-ajax-call-without-jquery-1657388448955"},{"title":"How to get the difference between two arrays in JavaScript?","slug":"how-to-get-the-difference-between-two-arrays-in-javascript-1657388463384"},{"title":"Is JavaScript a pass-by-reference or pass-by-value language?","slug":"is-javascript-a-pass-by-reference-or-pass-by-value-language-1657384675679"},{"title":"Why do I need to override the equals and hashCode methods in Java?","slug":"why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877"},{"title":"When should static_cast, dynamic_cast, const_cast, and reinterpret_cast be used?","slug":"when-should-static_cast-dynamic_cast-const_cast-and-reinterpret_cast-be-used-1657388406205"},{"title":"Reference - What does this regex mean?","slug":"reference-what-does-this-regex-mean-1657384291445"},{"title":"Iterator invalidation rules for C++ containers","slug":"iterator-invalidation-rules-for-c++-containers-1657387561090"},{"title":"What is event bubbling and capturing?","slug":"what-is-event-bubbling-and-capturing-1657388059203"},{"title":"How can I iterate through two lists in parallel?","slug":"how-can-i-iterate-through-two-lists-in-parallel-1657387278930"},{"title":"Sort a Map\u003cKey, Value\u003e by values","slug":"sort-a-maplesskey-valuegreater-by-values-1657387443904"},{"title":"How to remove \"noise\" from GCC/clang assembly output?","slug":"how-to-remove-\"noise\"-from-gccclang-assembly-output-1657387612391"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"actual-meaning-of-'shelltrue'-in-subprocess-1657388470341"},"buildId":"XDXakEY6gSPdgAODPxtjg","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>