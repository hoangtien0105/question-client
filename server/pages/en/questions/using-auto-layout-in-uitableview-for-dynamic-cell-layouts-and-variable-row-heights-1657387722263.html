<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>Using Auto Layout in UITableView for dynamic cell layouts &amp; variable row heights | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="How do you use Auto Layout within UITableViewCells in a table view to let each cell&#x27;s content and subviews determine the row height (itself/automatically), while maintaining smooth scrolling performance?
    "/><meta property="og:title" content="Using Auto Layout in UITableView for dynamic cell layouts &amp; variable row heights | Solutions Checker"/><meta property="og:description" content="How do you use Auto Layout within UITableViewCells in a table view to let each cell&#x27;s content and subviews determine the row height (itself/automatically), while maintaining smooth scrolling performance?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Using Auto Layout in UITableView for dynamic cell layouts &amp; variable row heights","text":"How do you use Auto Layout within UITableViewCells in a table view to let each cell&apos;s content and subviews determine the row height (itself/automatically), while maintaining smooth scrolling performance?\n    ","answerCount":28,"upVoteCount":500,"suggestedAnswer":[{"text":"TL;DR: Don&apos;t like reading? Jump straight to the sample projects on GitHub:\n\niOS 8 Sample Project - Requires iOS 8\niOS 7 Sample Project - Works on iOS 7+\n\nConceptual Description\nThe first 2 steps below are applicable regardless of which iOS versions you are developing for.\n1. Set Up &amp; Add Constraints\nIn your UITableViewCell subclass, add constraints so that the subviews of the cell have their edges pinned to the edges of the cell&apos;s contentView (most importantly to the top AND bottom edges). NOTE: don&apos;t pin subviews to the cell itself; only to the cell&apos;s contentView! Let the intrinsic content size of these subviews drive the height of the table view cell&apos;s content view by making sure the content compression resistance and content hugging constraints in the vertical dimension for each subview are not being overridden by higher-priority constraints you have added. (Huh? Click here.)\nRemember, the idea is to have the cell&apos;s subviews connected vertically to the cell&apos;s content view so that they can &quot;exert pressure&quot; and make the content view expand to fit them. Using an example cell with a few subviews, here is a visual illustration of what some (not all!) of your constraints would need to look like:\n\nYou can imagine that as more text is added to the multi-line body label in the example cell above, it will need to grow vertically to fit the text, which will effectively force the cell to grow in height. (Of course, you need to get the constraints right in order for this to work correctly!)\nGetting your constraints right is definitely the hardest and most important part of getting dynamic cell heights working with Auto Layout. If you make a mistake here, it could prevent everything else from working -- so take your time! I recommend setting up your constraints in code because you know exactly which constraints are being added where, and it&apos;s a lot easier to debug when things go wrong. Adding constraints in code can be just as easy as and significantly more powerful than Interface Builder using layout anchors, or one of the fantastic open source APIs available on GitHub.\n\nIf you&apos;re adding constraints in code, you should do this once from within the updateConstraints method of your UITableViewCell subclass. Note that updateConstraints may be called more than once, so to avoid adding the same constraints more than once, make sure to wrap your constraint-adding code within updateConstraints in a check for a boolean property such as didSetupConstraints (which you set to YES after you run your constraint-adding code once). On the other hand, if you have code that updates existing constraints (such as adjusting the constant property on some constraints), place this in updateConstraints but outside of the check for didSetupConstraints so it can run every time the method is called.\n\n2. Determine Unique Table View Cell Reuse Identifiers\nFor every unique set of constraints in the cell, use a unique cell reuse identifier. In other words, if your cells have more than one unique layout, each unique layout should receive its own reuse identifier. (A good hint that you need to use a new reuse identifier is when your cell variant has a different number of subviews, or the subviews are arranged in a distinct fashion.)\nFor example, if you were displaying an email message in each cell, you might have 4 unique layouts: messages with just a subject, messages with a subject and a body, messages with a subject and a photo attachment, and messages with a subject, body, and photo attachment. Each layout has completely different constraints required to achieve it, so once the cell is initialized and the constraints are added for one of these cell types, the cell should get a unique reuse identifier specific to that cell type. This means when you dequeue a cell for reuse, the constraints have already been added and are ready to go for that cell type.\nNote that due to differences in intrinsic content size, cells with the same constraints (type) may still have varying heights! Don&apos;t confuse fundamentally different layouts (different constraints) with different calculated view frames (solved from identical constraints) due to different sizes of content.\n\nDo not add cells with completely different sets of constraints to the same reuse pool (i.e. use the same reuse identifier) and then attempt to remove the old constraints and set up  new constraints from scratch after each dequeue. The internal Auto Layout engine is not designed to handle large scale changes in constraints, and you will see massive performance issues.\n\nFor iOS 8 - Self-Sizing Cells\n3. Enable Row Height Estimation\n\nTo enable self-sizing table view cells, you must set the table views\nrowHeight property to UITableViewAutomaticDimension. You must also\nassign a value to the estimatedRowHeight property. As soon as both of\nthese properties are set, the system uses Auto Layout to calculate the\nrows actual height\nApple: Working with Self-Sizing Table View Cells\n\nWith iOS 8, Apple has internalized much of the work that previously had to be implemented by you prior to iOS 8. In order to allow the self-sizing cell mechanism to work, you must first set the rowHeight property on the table view to the constant UITableView.automaticDimension. Then, you simply need to enable row height estimation by setting the table view&apos;s estimatedRowHeight property to a nonzero value, for example:\nself.tableView.rowHeight = UITableView.automaticDimension;\nself.tableView.estimatedRowHeight = 44.0; // set to whatever your &quot;average&quot; cell height is\n\nWhat this does is provide the table view with a temporary estimate/placeholder for the row heights of cells that are not yet onscreen. Then, when these cells are about to scroll on screen, the actual row height will be calculated. To determine the actual height for each row, the table view automatically asks each cell what height its contentView needs to be based on the known fixed width of the content view (which is based on the table view&apos;s width, minus any additional things like a section index or accessory view) and the auto layout constraints you have added to the cell&apos;s content view and subviews. Once this actual cell height has been determined, the old estimated height for the row is updated with the new actual height (and any adjustments to the table view&apos;s contentSize/contentOffset are made as needed for you).\nGenerally speaking, the estimate you provide doesn&apos;t have to be very accurate -- it is only used to correctly size the scroll indicator in the table view, and the table view does a good job of adjusting the scroll indicator for incorrect estimates as you scroll cells onscreen. You should set the estimatedRowHeight property on the table view (in viewDidLoad or similar) to a constant value that is the &quot;average&quot; row height. Only if your row heights have extreme variability (e.g. differ by an order of magnitude) and you notice the scroll indicator &quot;jumping&quot; as you scroll should you bother implementing tableView:estimatedHeightForRowAtIndexPath: to do the minimal calculation required to return a more accurate estimate for each row.\nFor iOS 7 support (implementing auto cell sizing yourself)\n3. Do a Layout Pass &amp; Get The Cell Height\nFirst, instantiate an offscreen instance of a table view cell, one instance for each reuse identifier, that is used strictly for height calculations. (Offscreen meaning the cell reference is stored in a property/ivar on the view controller and never returned from tableView:cellForRowAtIndexPath: for the table view to actually render onscreen.) Next, the cell must be configured with the exact content (e.g. text, images, etc) that it would hold if it were to be displayed in the table view.\nThen, force the cell to immediately layout its subviews, and then use the systemLayoutSizeFittingSize: method on the UITableViewCell&apos;s contentView to find out what the required height of the cell is. Use UILayoutFittingCompressedSize to get the smallest size required to fit all the contents of the cell. The height can then be returned from the tableView:heightForRowAtIndexPath: delegate method.\n4. Use Estimated Row Heights\nIf your table view has more than a couple dozen rows in it, you will find that doing the Auto Layout constraint solving can quickly bog down the main thread when first loading the table view, as tableView:heightForRowAtIndexPath: is called on each and every row upon first load (in order to calculate the size of the scroll indicator).\nAs of iOS 7, you can (and absolutely should) use the estimatedRowHeight property on the table view. What this does is provide the table view with a temporary estimate/placeholder for the row heights of cells that are not yet onscreen. Then, when these cells are about to scroll on screen, the actual row height will be calculated (by calling tableView:heightForRowAtIndexPath:), and the estimated height updated with the actual one.\nGenerally speaking, the estimate you provide doesn&apos;t have to be very accurate -- it is only used to correctly size the scroll indicator in the table view, and the table view does a good job of adjusting the scroll indicator for incorrect estimates as you scroll cells onscreen. You should set the estimatedRowHeight property on the table view (in viewDidLoad or similar) to a constant value that is the &quot;average&quot; row height. Only if your row heights have extreme variability (e.g. differ by an order of magnitude) and you notice the scroll indicator &quot;jumping&quot; as you scroll should you bother implementing tableView:estimatedHeightForRowAtIndexPath: to do the minimal calculation required to return a more accurate estimate for each row.\n5. (If Needed) Add Row Height Caching\nIf you&apos;ve done all the above and are still finding that performance is unacceptably slow when doing the constraint solving in tableView:heightForRowAtIndexPath:, you&apos;ll unfortunately need to implement some caching for cell heights. (This is the approach suggested by Apple&apos;s engineers.) The general idea is to let the Autolayout engine solve the constraints the first time, then cache the calculated height for that cell and use the cached value for all future requests for that cell&apos;s height. The trick of course is to make sure you clear the cached height for a cell when anything happens that could cause the cell&apos;s height to change -- primarily, this would be when that cell&apos;s content changes or when other important events occur (like the user adjusting the Dynamic Type text size slider).\niOS 7 Generic Sample Code (with lots of juicy comments)\n- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath\n{\n    // Determine which reuse identifier should be used for the cell at this \n    // index path, depending on the particular layout required (you may have\n    // just one, or may have many).\n    NSString *reuseIdentifier = ...;\n\n    // Dequeue a cell for the reuse identifier.\n    // Note that this method will init and return a new cell if there isn&apos;t\n    // one available in the reuse pool, so either way after this line of \n    // code you will have a cell with the correct constraints ready to go.\n    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:reuseIdentifier];\n         \n    // Configure the cell with content for the given indexPath, for example:\n    // cell.textLabel.text = someTextForThisCell;\n    // ...\n    \n    // Make sure the constraints have been set up for this cell, since it \n    // may have just been created from scratch. Use the following lines, \n    // assuming you are setting up constraints from within the cell&apos;s \n    // updateConstraints method:\n    [cell setNeedsUpdateConstraints];\n    [cell updateConstraintsIfNeeded];\n\n    // If you are using multi-line UILabels, don&apos;t forget that the \n    // preferredMaxLayoutWidth needs to be set correctly. Do it at this \n    // point if you are NOT doing it within the UITableViewCell subclass \n    // -[layoutSubviews] method. For example: \n    // cell.multiLineLabel.preferredMaxLayoutWidth = CGRectGetWidth(tableView.bounds);\n    \n    return cell;\n}\n\n- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath\n{\n    // Determine which reuse identifier should be used for the cell at this \n    // index path.\n    NSString *reuseIdentifier = ...;\n\n    // Use a dictionary of offscreen cells to get a cell for the reuse \n    // identifier, creating a cell and storing it in the dictionary if one \n    // hasn&apos;t already been added for the reuse identifier. WARNING: Don&apos;t \n    // call the table view&apos;s dequeueReusableCellWithIdentifier: method here \n    // because this will result in a memory leak as the cell is created but \n    // never returned from the tableView:cellForRowAtIndexPath: method!\n    UITableViewCell *cell = [self.offscreenCells objectForKey:reuseIdentifier];\n    if (!cell) {\n        cell = [[YourTableViewCellClass alloc] init];\n        [self.offscreenCells setObject:cell forKey:reuseIdentifier];\n    }\n    \n    // Configure the cell with content for the given indexPath, for example:\n    // cell.textLabel.text = someTextForThisCell;\n    // ...\n    \n    // Make sure the constraints have been set up for this cell, since it \n    // may have just been created from scratch. Use the following lines, \n    // assuming you are setting up constraints from within the cell&apos;s \n    // updateConstraints method:\n    [cell setNeedsUpdateConstraints];\n    [cell updateConstraintsIfNeeded];\n\n    // Set the width of the cell to match the width of the table view. This\n    // is important so that we&apos;ll get the correct cell height for different\n    // table view widths if the cell&apos;s height depends on its width (due to \n    // multi-line UILabels word wrapping, etc). We don&apos;t need to do this \n    // above in -[tableView:cellForRowAtIndexPath] because it happens \n    // automatically when the cell is used in the table view. Also note, \n    // the final width of the cell may not be the width of the table view in\n    // some cases, for example when a section index is displayed along \n    // the right side of the table view. You must account for the reduced \n    // cell width.\n    cell.bounds = CGRectMake(0.0, 0.0, CGRectGetWidth(tableView.bounds), CGRectGetHeight(cell.bounds));\n\n    // Do the layout pass on the cell, which will calculate the frames for \n    // all the views based on the constraints. (Note that you must set the \n    // preferredMaxLayoutWidth on multiline UILabels inside the \n    // -[layoutSubviews] method of the UITableViewCell subclass, or do it \n    // manually at this point before the below 2 lines!)\n    [cell setNeedsLayout];\n    [cell layoutIfNeeded];\n\n    // Get the actual height required for the cell&apos;s contentView\n    CGFloat height = [cell.contentView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize].height;\n\n    // Add an extra point to the height to account for the cell separator, \n    // which is added between the bottom of the cell&apos;s contentView and the \n    // bottom of the table view cell.\n    height += 1.0;\n\n    return height;\n}\n\n// NOTE: Set the table view&apos;s estimatedRowHeight property instead of \n// implementing the below method, UNLESS you have extreme variability in \n// your row heights and you notice the scroll indicator &quot;jumping&quot; \n// as you scroll.\n- (CGFloat)tableView:(UITableView *)tableView estimatedHeightForRowAtIndexPath:(NSIndexPath *)indexPath\n{\n    // Do the minimal calculations required to be able to return an \n    // estimated row height that&apos;s within an order of magnitude of the \n    // actual height. For example:\n    if ([self isTallCellAtIndexPath:indexPath]) {\n        return 350.0;\n    } else {\n        return 40.0;\n    }\n}\n\nSample Projects\n\niOS 8 Sample Project - Requires iOS 8\niOS 7 Sample Project - Works on iOS 7+\n\nThese projects are fully working examples of table views with variable row heights due to table view cells containing dynamic content in UILabels.\nXamarin (C#/.NET)\nIf you&apos;re using Xamarin, check out this sample project put together by @KentBoogaart.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"For iOS 8 above it&apos;s really simple:\n\noverride func viewDidLoad() {  \n    super.viewDidLoad()\n\n    self.tableView.estimatedRowHeight = 80\n    self.tableView.rowHeight = UITableView.automaticDimension\n}\n\n\nor \n\nfunc tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -&gt; CGFloat {\n    return UITableView.automaticDimension\n}\n\n\nBut for iOS 7, the key is calculate the height after autolayout:\n\nfunc calculateHeightForConfiguredSizingCell(cell: GSTableViewCell) -&gt; CGFloat {\n    cell.setNeedsLayout()\n    cell.layoutIfNeeded()\n    let height = cell.contentView.systemLayoutSizeFittingSize(UILayoutFittingExpandedSize).height + 1.0\n    return height\n}\n\n\nImportant \n\n\nIf multiple lines labels, don&apos;t forget set the numberOfLines to 0.\nDon&apos;t forget label.preferredMaxLayoutWidth = CGRectGetWidth(tableView.bounds)\n\n\nThe full example code is here.\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Swift example of a variable height UITableViewCell\n\nUpdated for Swift 3\n\nWilliam Hu&apos;s Swift answer is good, but it helps me to have some simple yet detailed steps when learning to do something for the first time. The example below is my test project while learning to make a UITableView with variable cell heights. I based it on this basic UITableView example for Swift.\n\nThe finished project should look like this:\n\n\n\nCreate a new project\n\nIt can be just a Single View Application.\n\nAdd the code\n\nAdd a new Swift file to your project. Name it MyCustomCell. This class will hold the outlets for the views that you add to your cell in the storyboard. In this basic example we will only have one label in each cell.\n\nimport UIKit\nclass MyCustomCell: UITableViewCell {\n    @IBOutlet weak var myCellLabel: UILabel!\n}\n\n\nWe will connect this outlet later.\n\nOpen ViewController.swift and make sure you have the following content:\n\nimport UIKit\nclass ViewController: UIViewController, UITableViewDelegate, UITableViewDataSource {\n\n    // These strings will be the data for the table view cells\n    let animals: [String] = [\n        &quot;Ten horses:  horse horse horse horse horse horse horse horse horse horse &quot;,\n        &quot;Three cows:  cow, cow, cow&quot;,\n        &quot;One camel:  camel&quot;,\n        &quot;Ninety-nine sheep:  sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep baaaa sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep&quot;,\n        &quot;Thirty goats:  goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat &quot;]\n\n    // Don&apos;t forget to enter this in IB also\n    let cellReuseIdentifier = &quot;cell&quot;\n\n    @IBOutlet var tableView: UITableView!\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        // delegate and data source\n        tableView.delegate = self\n        tableView.dataSource = self\n\n        // Along with auto layout, these are the keys for enabling variable cell height\n        tableView.estimatedRowHeight = 44.0\n        tableView.rowHeight = UITableViewAutomaticDimension\n    }\n\n    // number of rows in table view\n    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {\n        return self.animals.count\n    }\n\n    // create a cell for each table view row\n    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {\n\n        let cell:MyCustomCell = self.tableView.dequeueReusableCell(withIdentifier: cellReuseIdentifier) as! MyCustomCell\n        cell.myCellLabel.text = self.animals[indexPath.row]\n        return cell\n    }\n\n    // method to run when table view cell is tapped\n    func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {\n        print(&quot;You tapped cell number \\(indexPath.row).&quot;)\n    }\n}\n\n\nImportant Note:\n\n\nIt is the following two lines of code (along with auto layout) that make the variable cell height possible:\n\ntableView.estimatedRowHeight = 44.0\ntableView.rowHeight = UITableViewAutomaticDimension\n\n\n\nSetup the storyboard\n\nAdd a Table View to your view controller and use auto layout to pin it to the four sides. Then drag a Table View Cell onto the Table View. And onto the Prototype cell, drag a Label. Use auto layout to pin the label to the four edges of the content view of the Table View Cell.\n\n\n\nImportant note:\n\n\nAuto layout works together with the important two lines of code I mentioned above. If you don&apos;t use auto layout it isn&apos;t going to work.\n\n\nOther IB settings\n\nCustom class name and Identifier\n\nSelect the Table View Cell and set the custom class to be MyCustomCell (the name of the class in the Swift file we added). Also set the Identifier to be cell (the same string that we used for the cellReuseIdentifier in the code above.\n\n\n\nZero Lines for Label\n\nSet the number of lines to 0 in your Label. This means multi-line and allows the label to resize itself based on its content.\n\n  \n\nHook Up the Outlets\n\n\nControl drag from the Table View in the storyboard to the tableView variable in the ViewController code. \nDo the same for the Label in your Prototype cell to the myCellLabel variable in the MyCustomCell class.\n\n\nFinished\n\nYou should be able to run your project now and get cells with variable heights.\n\nNotes\n\n\nThis example only works for iOS 8 and after. If you are still needing to support iOS 7 then this won&apos;t work for you.\nYour own custom cells in your future projects will probably have more than a single label. Make sure that you get everything pinned right so that auto layout can determine the correct height to use. You may also have to use vertical compression resistance and hugging. See this article for more about that.\nIf you are not pinning the leading and trailing (left and right) edges, you may also need to set the label&apos;s preferredMaxLayoutWidth so that it knows when to line wrap. For example, if you had added a Center Horizontally constraint to the label in the project above rather than pin the leading and trailing edges, then you would need to add this line to the tableView:cellForRowAtIndexPath method:\n\n cell.myCellLabel.preferredMaxLayoutWidth = tableView.bounds.width\n\n\n\nSee also\n\n\nUnderstanding Self Sizing Cells and Dynamic Type in iOS 8\nTable View Cells with Varying Row Heights\nUITableView example for Swift\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"I wrapped @smileyborg&apos;s iOS7 solution in a category\n\nI decided to wrap this clever solution by @smileyborg into a UICollectionViewCell+AutoLayoutDynamicHeightCalculation category.\n\nThe category also rectifies the issues outlined in @wildmonkey&apos;s answer (loading a cell from a nib and systemLayoutSizeFittingSize: returning CGRectZero)\n\nIt doesn&apos;t take into account any caching but suits my needs right now. Feel free to copy, paste and hack at it.\n\nUICollectionViewCell+AutoLayoutDynamicHeightCalculation.h\n\n#import &lt;UIKit/UIKit.h&gt;\n\ntypedef void (^UICollectionViewCellAutoLayoutRenderBlock)(void);\n\n/**\n *  A category on UICollectionViewCell to aid calculating dynamic heights based on AutoLayout contraints.\n *\n *  Many thanks to @smileyborg and @wildmonkey\n *\n *  @see stackoverflow.com/questions/18746929/using-auto-layout-in-uitableview-for-dynamic-cell-layouts-variable-row-heights\n */\n@interface UICollectionViewCell (AutoLayoutDynamicHeightCalculation)\n\n/**\n *  Grab an instance of the receiving type to use in order to calculate AutoLayout contraint driven dynamic height. The method pulls the cell from a nib file and moves any Interface Builder defined contrainsts to the content view.\n *\n *  @param name Name of the nib file.\n *\n *  @return collection view cell for using to calculate content based height\n */\n+ (instancetype)heightCalculationCellFromNibWithName:(NSString *)name;\n\n/**\n *  Returns the height of the receiver after rendering with your model data and applying an AutoLayout pass\n *\n *  @param block Render the model data to your UI elements in this block\n *\n *  @return Calculated constraint derived height\n */\n- (CGFloat)heightAfterAutoLayoutPassAndRenderingWithBlock:(UICollectionViewCellAutoLayoutRenderBlock)block collectionViewWidth:(CGFloat)width;\n\n/**\n *  Directly calls `heightAfterAutoLayoutPassAndRenderingWithBlock:collectionViewWidth` assuming a collection view width spanning the [UIScreen mainScreen] bounds\n */\n- (CGFloat)heightAfterAutoLayoutPassAndRenderingWithBlock:(UICollectionViewCellAutoLayoutRenderBlock)block;\n\n@end\n\n\nUICollectionViewCell+AutoLayoutDynamicHeightCalculation.m\n\n#import &quot;UICollectionViewCell+AutoLayout.h&quot;\n\n@implementation UICollectionViewCell (AutoLayout)\n\n#pragma mark Dummy Cell Generator\n\n+ (instancetype)heightCalculationCellFromNibWithName:(NSString *)name\n{\n    UICollectionViewCell *heightCalculationCell = [[[NSBundle mainBundle] loadNibNamed:name owner:self options:nil] lastObject];\n    [heightCalculationCell moveInterfaceBuilderLayoutConstraintsToContentView];\n    return heightCalculationCell;\n}\n\n#pragma mark Moving Constraints\n\n- (void)moveInterfaceBuilderLayoutConstraintsToContentView\n{\n    [self.constraints enumerateObjectsUsingBlock:^(NSLayoutConstraint *constraint, NSUInteger idx, BOOL *stop) {\n        [self removeConstraint:constraint];\n        id firstItem = constraint.firstItem == self ? self.contentView : constraint.firstItem;\n        id secondItem = constraint.secondItem == self ? self.contentView : constraint.secondItem;\n        [self.contentView addConstraint:[NSLayoutConstraint constraintWithItem:firstItem\n                                                                     attribute:constraint.firstAttribute\n                                                                     relatedBy:constraint.relation\n                                                                        toItem:secondItem\n                                                                     attribute:constraint.secondAttribute\n                                                                    multiplier:constraint.multiplier\n                                                                      constant:constraint.constant]];\n    }];\n}\n\n#pragma mark Height\n\n- (CGFloat)heightAfterAutoLayoutPassAndRenderingWithBlock:(UICollectionViewCellAutoLayoutRenderBlock)block\n{\n    return [self heightAfterAutoLayoutPassAndRenderingWithBlock:block\n                                            collectionViewWidth:CGRectGetWidth([[UIScreen mainScreen] bounds])];\n}\n\n- (CGFloat)heightAfterAutoLayoutPassAndRenderingWithBlock:(UICollectionViewCellAutoLayoutRenderBlock)block collectionViewWidth:(CGFloat)width\n{\n    NSParameterAssert(block);\n\n    block();\n\n    [self setNeedsUpdateConstraints];\n    [self updateConstraintsIfNeeded];\n\n    self.bounds = CGRectMake(0.0f, 0.0f, width, CGRectGetHeight(self.bounds));\n\n    [self setNeedsLayout];\n    [self layoutIfNeeded];\n\n    CGSize calculatedSize = [self.contentView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize];\n\n    return calculatedSize.height;\n\n}\n\n@end\n\n\nUsage example:\n\n- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath\n{\n    MYSweetCell *cell = [MYSweetCell heightCalculationCellFromNibWithName:NSStringFromClass([MYSweetCell class])];\n    CGFloat height = [cell heightAfterAutoLayoutPassAndRenderingWithBlock:^{\n        [(id&lt;MYSweetCellRenderProtocol&gt;)cell renderWithModel:someModel];\n    }];\n    return CGSizeMake(CGRectGetWidth(self.collectionView.bounds), height);\n}\n\n\nThankfully we won&apos;t have to do this jazz in iOS8, but there it is for now!\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"Here is my solution:\n\nYou need to tell the TableView the estimatedHeight before it loads the view. Otherwise it wont be able to behave like expected.\n\nObjective-C\n\n- (void)viewWillAppear:(BOOL)animated {\n    _messageField.delegate = self;\n    _tableView.estimatedRowHeight = 65.0;\n    _tableView.rowHeight = UITableViewAutomaticDimension;\n}\n\n\nUpdate to Swift 4.2\n\noverride func viewWillAppear(_ animated: Bool) {\n    tableView.rowHeight = UITableView.automaticDimension\n    tableView.estimatedRowHeight = 65.0\n}\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"The solution proposed by @smileyborg is almost perfect. If you have a custom cell and you want one or more UILabel with dynamic heights then the systemLayoutSizeFittingSize method combined with AutoLayout enabled returns a CGSizeZero unless you move all your cell constraints from the cell to its contentView (as suggested by @TomSwift here How to resize superview to fit all subviews with autolayout?).\n\nTo do so you need to insert the following code in your custom UITableViewCell implementation (thanks to @Adrian).\n\n- (void)awakeFromNib{\n    [super awakeFromNib];\n    for (NSLayoutConstraint *cellConstraint in self.constraints) {\n        [self removeConstraint:cellConstraint];\n        id firstItem = cellConstraint.firstItem == self ? self.contentView : cellConstraint.firstItem;\n        id seccondItem = cellConstraint.secondItem == self ? self.contentView : cellConstraint.secondItem;\n        NSLayoutConstraint *contentViewConstraint =\n        [NSLayoutConstraint constraintWithItem:firstItem\n                                 attribute:cellConstraint.firstAttribute\n                                 relatedBy:cellConstraint.relation\n                                    toItem:seccondItem\n                                 attribute:cellConstraint.secondAttribute\n                                multiplier:cellConstraint.multiplier\n                                  constant:cellConstraint.constant];\n        [self.contentView addConstraint:contentViewConstraint];\n    }\n}\n\n\nMixing @smileyborg answer with this should works.\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"An important enough gotcha I just ran into to post as an answer.\n\n@smileyborg&apos;s answer is mostly correct. However, if you have any code in the layoutSubviews method of your custom cell class, for instance setting the preferredMaxLayoutWidth, then it won&apos;t be run with this code:\n\n[cell.contentView setNeedsLayout];\n[cell.contentView layoutIfNeeded];\n\n\nIt confounded me for awhile. Then I realized it&apos;s because those are only triggering layoutSubviews on the contentView, not the cell itself.\n\nMy working code looks like this:\n\nTCAnswerDetailAppSummaryCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@&quot;TCAnswerDetailAppSummaryCell&quot;];\n[cell configureWithThirdPartyObject:self.app];\n[cell layoutIfNeeded];\nCGFloat height = [cell.contentView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize].height;\nreturn height;\n\n\nNote that if you are creating a new cell, I&apos;m pretty sure you don&apos;t need to call setNeedsLayout as it should already be set. In cases where you save a reference to a cell, you should probably call it. Either way it shouldn&apos;t hurt anything.\n\nAnother tip if you are using cell subclasses where you are setting things like preferredMaxLayoutWidth. As @smileyborg mentions, &quot;your table view cell hasn&apos;t yet had its width fixed to the table view&apos;s width&quot;. This is true, and trouble if you are doing your work in your subclass and not in the view controller. However you can simply set the cell frame at this point using the table width:\n\nFor instance in the calculation for height:\n\nself.summaryCell = [self.tableView dequeueReusableCellWithIdentifier:@&quot;TCAnswerDetailDefaultSummaryCell&quot;];\nCGRect oldFrame = self.summaryCell.frame;\nself.summaryCell.frame = CGRectMake(oldFrame.origin.x, oldFrame.origin.y, self.tableView.frame.size.width, oldFrame.size.height);\n\n\n(I happen to cache this particular cell for re-use, but that&apos;s irrelevant).\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"(for Xcode 8.x / Xcode 9.x read at the bottom)\n\nBeware of the following issue in in Xcode 7.x, which might be a source of confusion:\n\nInterface Builder does not handle auto-sizing cell set-up properly. Even if your constraints are  absolutely valid, IB will still complain and give you confusing suggestions and errors. The reason is that IB is unwilling to change the row&apos;s height as your constraints dictate (so that the cell fits around your content). Instead, it keeps the row&apos;s height fixed and starts suggesting you change your constraints, which you should ignore.\n\nFor example, imagine you&apos;ve set up everything fine, no warnings, no errors, all works.\n\n\n\nNow if you change the font size (in this example I&apos;m changing the description label font size from 17.0 to 18.0).\n\n\n\nBecause the font size increased, the label now wants to occupy 3 rows (before that it was occupying 2 rows).\n\nIf Interface Builder worked as expected, it would resize the cell&apos;s height to accommodate the new label height. However what actually happens is that IB displays the red auto-layout error icon and suggest that you modify hugging/compression priorities.\n\n\n\nYou should ignore these warnings. What you can* do instead is to manually change the row&apos;s height in (select Cell &gt; Size Inspector &gt; Row Height).\n\n\n\nI was changing this height one click at a time (using the up/down stepper) until the red arrow errors disappear! (you will actually get yellow warnings, at which point just go ahead and do &apos;update frames&apos;, it should all work).\n\n* Note that you don&apos;t actually have to resolve these red errors or yellow warnings in Interface Builder - at runtime, everything will work correctly (even if IB shows errors/warnings). Just make sure that at runtime in the console log you&apos;re not getting any AutoLayout errors. \n\nIn fact trying to always update row height in IB is super annoying and sometimes close to impossible (because of fractional values).\n\nTo prevent the annoying IB warnings/errors, you can select the views involved and in Size Inspector for the property Ambiguity choose Verify Position Only\n\n\n\n\n\nXcode 8.x / Xcode 9.x seems to (sometimes) be doing things differently than Xcode 7.x, but still incorrectly. For example even when compression resistance priority / hugging priority are set to required (1000), Interface Builder might stretch or clip a label to fit the cell (instead of resizing cell height to fit around the label). And in such a case it might not even show any AutoLayout warnings or errors. Or sometimes it does exactly what Xcode 7.x did, described above.\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"In case people are still having trouble with this.  I wrote a quick blog post about using Autolayout with UITableViews Leveraging Autolayout For Dynamic Cell Heights as well as an open source component to help make this more abstract and easier to implement.\nhttps://github.com/Raizlabs/RZCellSizeManager\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"As long as your layout in your cell is good.\n\n-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {\n    UITableViewCell *cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];\n\n    return [cell.contentView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize].height;\n}\n\n\nUpdate:  You should use dynamic resizing introduced in iOS 8.\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"To set automatic dimension for row height &amp; estimated row height, ensure following steps to make, auto dimension effective for cell/row height layout. \n\n\nAssign and implement tableview dataSource and delegate\nAssign UITableViewAutomaticDimension to rowHeight &amp; estimatedRowHeight\nImplement delegate/dataSource methods (i.e. heightForRowAt and return a value UITableViewAutomaticDimension to it)\n\n\n-\n\nObjective C:\n\n// in ViewController.h\n#import &lt;UIKit/UIKit.h&gt;\n\n@interface ViewController : UIViewController &lt;UITableViewDelegate, UITableViewDataSource&gt;\n\n  @property IBOutlet UITableView * table;\n\n@end\n\n// in ViewController.m\n\n- (void)viewDidLoad {\n    [super viewDidLoad];\n    self.table.dataSource = self;\n    self.table.delegate = self;\n\n    self.table.rowHeight = UITableViewAutomaticDimension;\n    self.table.estimatedRowHeight = UITableViewAutomaticDimension;\n}\n\n-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {\n\n    return UITableViewAutomaticDimension;\n}\n\n\nSwift:\n\n@IBOutlet weak var table: UITableView!\n\noverride func viewDidLoad() {\n    super.viewDidLoad()\n\n    // Don&apos;t forget to set dataSource and delegate for table\n    table.dataSource = self\n    table.delegate = self\n\n    // Set automatic dimensions for row height\n    // Swift 4.2 onwards\n    table.rowHeight = UITableView.automaticDimension\n    table.estimatedRowHeight = UITableView.automaticDimension\n\n\n    // Swift 4.1 and below\n    table.rowHeight = UITableViewAutomaticDimension\n    table.estimatedRowHeight = UITableViewAutomaticDimension\n\n}\n\n\n\n// UITableViewAutomaticDimension calculates height of label contents/text\nfunc tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat {\n    // Swift 4.2 onwards\n    return UITableView.automaticDimension\n\n    // Swift 4.1 and below\n    return UITableViewAutomaticDimension\n}\n\n\nFor label instance in UITableviewCell\n\n\nSet number of lines = 0 (&amp; line break mode = truncate tail)\nSet all constraints (top, bottom, right left) with respect to its superview/ cell container.\nOptional: Set minimum height for label, if you want minimum vertical area covered by label, even if there is no data.\n\n\n\n\nNote: If you&apos;ve more than one labels (UIElements) with dynamic length, which should be adjusted according to its content size: Adjust &apos;Content Hugging and Compression Resistance Priority` for labels which you want to expand/compress with higher priority.\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"Like @Bob-Spryn I ran into an important enough gotcha that I&apos;m posting this as an answer.\n\nI struggled with @smileyborg&apos;s answer for a while. The gotcha that I ran into is if you&apos;ve defined your prototype cell in IB with additional elements (UILabels, UIButtons, etc.) in IB when you instantiate the cell with [[YourTableViewCellClass alloc] init] it will not instantiate all the other elements within that cell unless you&apos;ve written code to do that. (I had a similar experience with initWithStyle.)\n\nTo have the storyboard instantiate all the additional elements obtain your cell with [tableView dequeueReusableCellWithIdentifier:@&quot;DoseNeeded&quot;] (Not [tableView dequeueReusableCellWithIdentifier:forIndexPath:] as this&apos;ll cause interesting problems.) When you do this all the elements you defined in IB will be instantiated.\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"Dynamic Table View Cell Height and Auto Layout\n\nA good way to solve the problem with storyboard Auto Layout:\n\n- (CGFloat)heightForImageCellAtIndexPath:(NSIndexPath *)indexPath {\n  static RWImageCell *sizingCell = nil;\n  static dispatch_once_t onceToken;\n  dispatch_once(&amp;onceToken, ^{\n    sizingCell = [self.tableView dequeueReusableCellWithIdentifier:RWImageCellIdentifier];\n  });\n\n  [sizingCell setNeedsLayout];\n  [sizingCell layoutIfNeeded];\n\n  CGSize size = [sizingCell.contentView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize];\n  return size.height;\n}\n\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"tableView.estimatedRowHeight = 343.0\ntableView.rowHeight = UITableViewAutomaticDimension\n\n\n\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"Another &quot;solution&quot;: skip all this frustration and use a UIScrollView instead to get a result that looks and feels identical to UITableView.\nThat was the painful &quot;solution&quot; for me, after having put in literally 20+ very frustrating hours total trying to build something like what smileyborg suggested and failing over many months and three versions of App Store releases.\nMy take is that if you really need iOS 7 support (for us, it&apos;s essential) then the technology is just too brittle and you&apos;ll pull your hair out trying. And that UITableView is complete overkill generally unless you&apos;re using some of the advanced row editing features and/or really need to support 1000+ &quot;rows&quot; (in our app, it&apos;s realistically never more than 20 rows).\nThe added bonus is that the code gets insanely simple versus all the delegate crap and back and forth that comes with UITableView. It&apos;s just one single loop of code in viewOnLoad that looks elegant and is easy to manage.\nHere are some tips on how to do it:\n\nUsing either Storyboard or a nib file, create a ViewController and associated root view.\n\nDrag over a UIScrollView onto your root view.\n\nAdd constraints top, bottom, left, and right constraints to the top-level view so the UIScrollView fills the entire root view.\n\nAdd a UIView inside the UIScrollView and call it &quot;container&quot;. Add top, bottom, left and right constraints to the UIScrollView (its parent). KEY TRICK: Also add an &quot;Equal widths&quot; constraint to link the UIScrollView and UIView.\nNOTE: You will get an error &quot;scroll view has ambiguous scrollable content height&quot; and that your container UIView should have a height of 0 pixels. Neither error seems to matter when the app is running.\n\nCreate nib files and controllers for each of your &quot;cells&quot;. Use UIView not UITableViewCell.\n\nIn your root ViewController, you essentially add all the &quot;rows&quot; to the container UIView and programmatically add constraints linking their left and right edges to the container view, their top edges to either the container view top (for the first item) or the previous cell. Then link the final cell to the container bottom.\n\n\nFor us, each &quot;row&quot; is in a nib file. So the code looks something like this:\nclass YourRootViewController {\n\n    @IBOutlet var container: UIView! //container mentioned in step 4\n\n    override func viewDidLoad() {\n        \n        super.viewDidLoad()\n\n        var lastView: UIView?\n        for data in yourDataSource {\n\n            var cell = YourCellController(nibName: &quot;YourCellNibName&quot;, bundle: nil)\n            UITools.addViewToTop(container, child: cell.view, sibling: lastView)\n            lastView = cell.view\n            //Insert code here to populate your cell\n        }\n\n        if(lastView != nil) {\n            container.addConstraint(NSLayoutConstraint(\n                item: lastView!,\n                attribute: NSLayoutAttribute.Bottom,\n                relatedBy: NSLayoutRelation.Equal,\n                toItem: container,\n                attribute: NSLayoutAttribute.Bottom,\n                multiplier: 1,\n                constant: 0))\n        }\n\n        ///Add a refresh control, if you want - it seems to work fine in our app:\n        var refreshControl = UIRefreshControl()\n        container.addSubview(refreshControl!)\n    }\n}\n\nAnd here&apos;s the code for UITools.addViewToTop:\nclass UITools {\n    ///Add child to container, full width of the container and directly under sibling (or container if sibling nil):\n    class func addViewToTop(container: UIView, child: UIView, sibling: UIView? = nil)\n    {\n        child.setTranslatesAutoresizingMaskIntoConstraints(false)\n        container.addSubview(child)\n        \n        //Set left and right constraints so fills full horz width:\n        \n        container.addConstraint(NSLayoutConstraint(\n            item: child,\n            attribute: NSLayoutAttribute.Leading,\n            relatedBy: NSLayoutRelation.Equal,\n            toItem: container,\n            attribute: NSLayoutAttribute.Left,\n            multiplier: 1,\n            constant: 0))\n        \n        container.addConstraint(NSLayoutConstraint(\n            item: child,\n            attribute: NSLayoutAttribute.Trailing,\n            relatedBy: NSLayoutRelation.Equal,\n            toItem: container,\n            attribute: NSLayoutAttribute.Right,\n            multiplier: 1,\n            constant: 0))\n        \n        //Set vertical position from last item (or for first, from the superview):\n        container.addConstraint(NSLayoutConstraint(\n            item: child,\n            attribute: NSLayoutAttribute.Top,\n            relatedBy: NSLayoutRelation.Equal,\n            toItem: sibling == nil ? container : sibling,\n            attribute: sibling == nil ? NSLayoutAttribute.Top : NSLayoutAttribute.Bottom,\n            multiplier: 1,\n            constant: 0))\n    }\n}\n\nThe only &quot;gotcha&quot; I&apos;ve found with this approach so far is that UITableView has a nice feature of &quot;floating&quot; section headers at the top of the view as you scroll. The above solution won&apos;t do that unless you add more programming but for our particular case this feature wasn&apos;t 100% essential and nobody noticed when it went away.\nIf you want dividers between your cells, just add a 1 pixel high UIView at the bottom of your custom &quot;cell&quot; that looks like a divider.\nBe sure to turn on &quot;bounces&quot; and &quot;bounce vertically&quot; for the refresh control to work and so it seems more like a tableview.\nTableView shows some empty rows and dividers under your content, if it doesn&apos;t fill the full screen where as this solution doesn&apos;t. But personally, I prefer if those empty rows weren&apos;t there anyway - with variable cell height it always looked &quot;buggy&quot; to me anyway to have the empty rows in there.\nHere&apos;s hoping some other programmer reads my post BEFORE wasting 20+ hours trying to figure it out with Table View in their own app. :)\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"I had to use dynamic views (setup views and constraints by code) and when I wanted to set preferredMaxLayoutWidth label&apos;s width was 0. So I&apos;ve got wrong cell height.\n\nThen I added \n\n[cell layoutSubviews];\n\n\nbefore executing\n\n[cell setNeedsUpdateConstraints];\n[cell updateConstraintsIfNeeded];\n\n\nAfter that label&apos;s width was as expected and dynamic height was calculating right.\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"Let&apos;s say you have a cell with a subview, and you want the cell&apos;s height to be high enough to encompass the subview + padding.\n\n1) Set the subview&apos;s bottom constraint equal to the cell.contentView minus the padding you want. Do not set constraints on the cell or cell.contentView itself.\n\n2) Set either the tableView&apos;s rowHeight property or tableView:heightForRowAtIndexPath: to UITableViewAutomaticDimension.\n\n3) Set either the tableView&apos;s estimatedRowHeight property or tableView:estimatedHeightForRowAtIndexPath: to a best guess of the height.\n\nThat&apos;s it.\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"If you do you layout programmatically, here is what to consider for iOS 10 using anchors in Swift.\n\nThere are three rules/ steps\n\nNUMBER 1: set this two properties of tableview on viewDidLoad, the first one is telling to the tableview that should expect dynamic sizes on their cells, the second one is just to let the app calculate the size of the scrollbar indicator, so it helps for performance.\n\n    tableView.rowHeight = UITableViewAutomaticDimension\n    tableView.estimatedRowHeight = 100\n\n\nNUMBER 2: This is important you need to add the subviews to the contentView of the cell not to the view, and also use its layoutsmarginguide to anchor the subviews to the top and bottom, this is a working example of how to do it.\n\noverride init(style: UITableViewCellStyle, reuseIdentifier: String?) {\n    super.init(style: style, reuseIdentifier: reuseIdentifier)\n    setUpViews()\n}\n\nprivate func setUpViews() {\n\n    contentView.addSubview(movieImageView)\n    contentView.addSubview(descriptionLabel)\n    let marginGuide = contentView.layoutMarginsGuide\n\n    NSLayoutConstraint.activate([\n        movieImageView.heightAnchor.constraint(equalToConstant: 80),\n        movieImageView.widthAnchor.constraint(equalToConstant: 80),\n        movieImageView.leftAnchor.constraint(equalTo: marginGuide.leftAnchor),\n        movieImageView.topAnchor.constraint(equalTo: marginGuide.topAnchor, constant: 20),\n\n        descriptionLabel.leftAnchor.constraint(equalTo: movieImageView.rightAnchor, constant: 15),\n        descriptionLabel.rightAnchor.constraint(equalTo: marginGuide.rightAnchor),\n        descriptionLabel.bottomAnchor.constraint(equalTo: marginGuide.bottomAnchor, constant: -15),\n        descriptionLabel.topAnchor.constraint(equalTo: movieImageView.topAnchor)\n\n        ])\n}\n\n\nCreate a method that will add the subviews and perform the layout, call it in the init method. \n\nNUMBER 3: DON&apos;T CALL THE METHOD:\n\n  override func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat {\n    }\n\n\nIf you do it you will override your implementation.\n\nFollow this 3 rules for dynamic cells in tableviews.\n\nhere is a working implementation \nhttps://github.com/jamesrochabrun/MinimalViewController\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"If you have a long string. e.g. one which doesn&apos;t have a line break. Then you you might run into some problems.\n\nThe &quot;alleged&quot; fix is mentioned by the accepted answer and few other answers. You just need to add\n\ncell.myCellLabel.preferredMaxLayoutWidth = tableView.bounds.width\n\n\nI find Suragh&apos;s answer the most complete and concise, hence not confusing. \n\nThough non explain why these changes are needed. Let&apos;s do that. \n\nDrop the following code in to a project. \n\nimport UIKit\n\nclass ViewController: UIViewController {\n\n    lazy var label : UILabel = {\n        let lbl = UILabel()\n        lbl.translatesAutoresizingMaskIntoConstraints = false\n        lbl.backgroundColor = .red\n        lbl.textColor = .black\n        return lbl\n    }()\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        // step0: (0.0, 0.0)\n        print(&quot;empty Text intrinsicContentSize: \\(label.intrinsicContentSize)&quot;)\n        // ----------\n        // step1: (29.0, 20.5)\n        label.text = &quot;hiiiii&quot;\n        print(&quot;hiiiii intrinsicContentSize: \\(label.intrinsicContentSize)&quot;)\n        // ----------\n        // step2: (328.0, 20.5)\n        label.text = &quot;translatesAutoresizingMaskIntoConstraints&quot;\n        print(&quot;1 translate intrinsicContentSize: \\(label.intrinsicContentSize)&quot;)\n        // ----------\n        // step3: (992.0, 20.5)\n        label.text = &quot;translatesAutoresizingMaskIntoConstraints translatesAutoresizingMaskIntoConstraints translatesAutoresizingMaskIntoConstraints&quot;\n        print(&quot;3 translate intrinsicContentSize: \\(label.intrinsicContentSize)&quot;)\n        // ----------\n        // step4: (328.0, 20.5)\n        label.text = &quot;translatesAutoresizingMaskIntoConstraints\\ntranslatesAutoresizingMaskIntoConstraints\\ntranslatesAutoresizingMaskIntoConstraints&quot;\n        print(&quot;3 translate w/ line breaks (but the line breaks get ignored, because numberOfLines is defaulted to `1` and it will force it all to fit into one line! intrinsicContentSize: \\(label.intrinsicContentSize)&quot;)\n        // ----------\n        // step5: (328.0, 61.0)\n        label.numberOfLines = 0\n        print(&quot;3 translate w/ line breaks and &apos;0&apos; numberOfLines intrinsicContentSize: \\(label.intrinsicContentSize)&quot;)\n        // ----------\n        // step6: (98.5, 243.5)\n        label.preferredMaxLayoutWidth = 100\n        print(&quot;3 translate w/ line breaks | &apos;0&apos; numberOfLines | preferredMaxLayoutWidth: 100 intrinsicContentSize: \\(label.intrinsicContentSize)&quot;)\n\n        setupLayout()\n    }\n    func setupLayout(){\n        view.addSubview(label)\n        label.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive = true\n        label.centerYAnchor.constraint(equalTo: view.centerYAnchor).isActive = true\n    }\n}\n\n\nNote that I haven&apos;t added any size constraints. I&apos;ve only added centerX, centerY constraints. But still the label will be sized correctly Why? \n\nBecause of contentSize.\n\nTo better process this, first keep step0, then comment out out steps 1-6. Let setupLayout() stay. Observe the behavior. \n\nThen uncomment step1, and observe.\n\nThen uncomment step2 and observe. \n\nDo this until you&apos;ve uncommented all 6 steps and observed their behaviors. \n\nWhat can conclude from all this? What factors can change the contenSize?\n\n\nText Length: If you have a longer text then your intrinsicContentSize&apos;s width will increase\nLine breaks: If you add \\n then the intrinsicContentSize&apos;s width will the maximum width of all lines. If one line has 25 characters, another has 2 characters and another has 21 characters then your width will be calculated based the 25 characters\nNumber of allowed lines: You must set the numberOfLines to 0 otherwise the you won&apos;t have multiple lines. Your numberOfLines will adjust your intrinsicContentSize&apos;s height\nMaking adjustments: Imagine that based on your text, your intrinsicContentSize&apos;s width was 200 and height was 100, but you wanted to limited the width to the label&apos;s container what are you going to do? The solution is to set it to a desired width. You do that by setting preferredMaxLayoutWidth to 130 then your new intrinsicContentSize will have a width of roughly 130. The height would obviously be more than 100 because you&apos;d need more lines. \nThat being said if your constraints are set correctly then you won&apos;t need to use this at all! For more on that see this answer and its comments. You only need to use preferredMaxLayoutWidth if you don&apos;t have constraints restricting the width/height as in one might say &quot;don&apos;t wrap the text unless it exceeds the preferredMaxLayoutWidth&quot;. But with 100% certainty if you set the leading/trailing and numberOfLines to 0 then you&apos;re good! Long story short most answers here which recommend using it are WRONG! You don&apos;t need it. Needing it is a sign that your constraints are not set correctly or that you just don&apos;t have constraints\nFont Size: Also note that if you increase your fontSize then the intrinsicContentSize&apos;s height will increase. I didn&apos;t show that in my code. You can try that on your own.\n\n\nSo back to your tableViewCell example: \n\nAll you need to do is:\n\n\nset the numberOfLines to 0\nconstrain the label correctly to the margins/edges\nThere is no need to set preferredMaxLayoutWidth.\n\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0},{"text":"In my case i have to create a custom cell with a image which is coming from server and can be of any width and height. And two UILabels with dynamic size(both width &amp; height)\n\ni have achieved the same here in my answer with autolayout and programmatically:\n\nBasically above @smileyBorg answer helped but systemLayoutSizeFittingSize never worked for me, In my approach :\n\n1. No use of automatic row height calculation property. 2.No use of estimated height 3.No need of unnecessary updateConstraints. 4.No use of Automatic Preferred Max Layout Width. 5. No use of systemLayoutSizeFittingSize (should have use but not working for me, i dont know what it is doing internally), but instead my method -(float)getViewHeight working and i know what it&apos;s doing internally.\n\nIs it possible to have differing heights in a UITableView Cell when I use several different ways of displaying the cell?\n    ","url":"/questions/[slug]#solution20","@type":"Answer","upvoteCount":0},{"text":"In my case, the padding was because of the sectionHeader and sectionFooter heights, where storyboard allowed me to change it to minimum 1. So in viewDidLoad method:\n\ntableView.sectionHeaderHeight = 0\ntableView.sectionFooterHeight = 0\n\n    ","url":"/questions/[slug]#solution21","@type":"Answer","upvoteCount":0},{"text":"I just did some dumb try and error with the 2 values of rowHeight and estimatedRowHeight and just thought it might provide some debugging insight:\n\nIf you set them both OR only set the estimatedRowHeight you will get the desired behavior:\n\ntableView.rowHeight = UITableViewAutomaticDimension\ntableView.estimatedRowHeight = 1.00001 // MUST be greater than 1\n\n\nIt&apos;s suggested that you do your best to get the correct estimate, but the end result isn&apos;t different. It will just affect your performance.\n\n\n\n\n\nIf you only set the rowHeight ie only do:\n\ntableView.rowHeight = UITableViewAutomaticDimension\n\n\nyour end result would not be as desired:\n\n \n\n\n\nIf you set the estimatedRowHeight to 1 or smaller then you will crash regardless of the rowHeight. \n\ntableView.rowHeight = UITableViewAutomaticDimension\ntableView.estimatedRowHeight = 1 \n\n\nI crashed with the following error message:\n\nTerminating app due to uncaught exception\n&apos;NSInternalInconsistencyException&apos;, reason: &apos;table view row height\nmust not be negative - provided height for index path (&lt;NSIndexPath:\n0xc000000000000016&gt; {length = 2, path = 0 - 0}) is -1.000000&apos;\n    ...some other lines...\n\nlibc++abi.dylib: terminating with uncaught exception of type\nNSException\n\n    ","url":"/questions/[slug]#solution22","@type":"Answer","upvoteCount":0},{"text":"With regard to the accepted answer by @smileyborg, I have found\n\n[cell.contentView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize]\n\n\nto be unreliable in some cases where constraints are ambiguous.  Better to force the layout engine to calculate the height in one direction, by using the helper category on UIView below:\n\n-(CGFloat)systemLayoutHeightForWidth:(CGFloat)w{\n    [self setNeedsLayout];\n    [self layoutIfNeeded];\n    CGSize size = [self systemLayoutSizeFittingSize:CGSizeMake(w, 1) withHorizontalFittingPriority:UILayoutPriorityRequired verticalFittingPriority:UILayoutPriorityFittingSizeLevel];\n    CGFloat h = size.height;\n    return h;\n}\n\n\nWhere w: is the width of the tableview\n    ","url":"/questions/[slug]#solution23","@type":"Answer","upvoteCount":0},{"text":"Simply add these two functions in your viewcontroller it will solve your problem. Here, list is a string array which contain your string of every row.\n\n func tableView(_ tableView: UITableView, \n   estimatedHeightForRowAt indexPath: IndexPath) -&gt; CGFloat {\n        tableView.rowHeight = self.calculateHeight(inString: list[indexPath.row])\n\n    return (tableView.rowHeight) \n}\n\nfunc calculateHeight(inString:String) -&gt; CGFloat\n{\n    let messageString = input.text\n    let attributes : [NSAttributedStringKey : Any] = [NSAttributedStringKey(rawValue: NSAttributedStringKey.font.rawValue) : UIFont.systemFont(ofSize: 15.0)]\n\n    let attributedString : NSAttributedString = NSAttributedString(string: messageString!, attributes: attributes)\n\n    let rect : CGRect = attributedString.boundingRect(with: CGSize(width: 222.0, height: CGFloat.greatestFiniteMagnitude), options: .usesLineFragmentOrigin, context: nil)\n\n    let requredSize:CGRect = rect\n    return requredSize.height\n}\n\n    ","url":"/questions/[slug]#solution24","@type":"Answer","upvoteCount":0},{"text":"swift 4\n\n    @IBOutlet weak var tableViewHeightConstraint: NSLayoutConstraint!\n    @IBOutlet weak var tableView: UITableView!\n    private var context = 1\n override func viewDidLoad() {\n        super.viewDidLoad()\n\n        self.tableView.addObserver(self, forKeyPath: &quot;contentSize&quot;, options: [.new,.prior], context: &amp;context)\n    }\n  // Added observer to adjust tableview height based on the content\n\n    override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {\n        if context == &amp;self.context{\n            if let size = change?[NSKeyValueChangeKey.newKey] as? CGSize{\n                print(&quot;-----&quot;)\n                print(size.height)\n                tableViewHeightConstraint.constant = size.height + 50\n            }\n        }\n    }\n\n//Remove observer\n deinit {\n\n        NotificationCenter.default.removeObserver(self)\n\n    }\n\n    ","url":"/questions/[slug]#solution25","@type":"Answer","upvoteCount":0},{"text":"If the cell height is dynamic by the content, you should precisely count it out and then return the height value before the cell is rendered. An easy way is to define the counting method in the table view cell code for controller to call at the table cell height delegate method. Don&apos;t forget to count out the real cell frame width (default is 320) if the height is rely on the width of the table or screen. That is, in the table cell height delegate method, use cell.frame to correct the cell width first, then call the counting height method defined in the cell to get the suitable value and return it. \n\nPS. The code for generating cell object could be defined in another method for different table view cell delegate method to call.\n    ","url":"/questions/[slug]#solution26","@type":"Answer","upvoteCount":0},{"text":"UITableView.automaticDimension can be set via Interface Builder:\n\nXcode &gt; Storyboard &gt; Size Inspector\n\nTable View Cell &gt; Row Height &gt; Automatic\n\n\n    ","url":"/questions/[slug]#solution27","@type":"Answer","upvoteCount":0},{"text":"yet another iOs7+iOs8 solution in Swift\n\nvar cell2height:CGFloat=44\n\noverride func viewDidLoad() {\n    super.viewDidLoad()\n    theTable.rowHeight = UITableViewAutomaticDimension\n    theTable.estimatedRowHeight = 44.0;\n}\n\nfunc tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell {\n    let cell =  tableView.dequeueReusableCellWithIdentifier(&quot;myTableViewCell&quot;, forIndexPath: indexPath) as! myTableViewCell\n    cell2height=cell.contentView.height\n    return cell\n}\n\nfunc tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -&gt; CGFloat {\n    if #available(iOS 8.0, *) {\n        return UITableViewAutomaticDimension\n    } else {\n        return cell2height\n    }\n}\n\n    ","url":"/questions/[slug]#solution28","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-b06815e21c943e0d.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-79a1437acf654019.js" defer=""></script><script src="/_next/static/Zo3C7AOWQzKM9qqyzx2hf/_buildManifest.js" defer=""></script><script src="/_next/static/Zo3C7AOWQzKM9qqyzx2hf/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/using-auto-layout-in-uitableview-for-dynamic-cell-layouts-and-variable-row-heights-1657387722263#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/using-auto-layout-in-uitableview-for-dynamic-cell-layouts-and-variable-row-heights-1657387722263"><h1>Using Auto Layout in UITableView for dynamic cell layouts &amp; variable row heights</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/row-height">row-height</a></div></div><div class="question-content mt-5">
                
<p>How do you use Auto Layout within <code>UITableViewCell</code>s in a table view to let each cell's content and subviews determine the row height (itself/automatically), while maintaining smooth scrolling performance?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li><li class="pagination-solution-item"><span data-id="#solution20" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">20</span></li><li class="pagination-solution-item"><span data-id="#solution21" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">21</span></li><li class="pagination-solution-item"><span data-id="#solution22" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">22</span></li><li class="pagination-solution-item"><span data-id="#solution23" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">23</span></li><li class="pagination-solution-item"><span data-id="#solution24" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">24</span></li><li class="pagination-solution-item"><span data-id="#solution25" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">25</span></li><li class="pagination-solution-item"><span data-id="#solution26" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">26</span></li><li class="pagination-solution-item"><span data-id="#solution27" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">27</span></li><li class="pagination-solution-item"><span data-id="#solution28" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">28</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>TL;DR:</strong> Don't like reading? Jump straight to the sample projects on GitHub:</p>
<ul>
<li><a href="https://github.com/smileyborg/TableViewCellWithAutoLayoutiOS8" rel="noreferrer">iOS 8 Sample Project</a> - Requires iOS 8</li>
<li><a href="https://github.com/smileyborg/TableViewCellWithAutoLayout" rel="noreferrer">iOS 7 Sample Project</a> - Works on iOS 7+</li>
</ul>
<h1>Conceptual Description</h1>
<p>The first 2 steps below are applicable regardless of which iOS versions you are developing for.</p>
<h2>1. Set Up &amp; Add Constraints</h2>
<p>In your <code>UITableViewCell</code> subclass, add constraints so that the subviews of the cell have their edges pinned to the edges of the cell's <strong>contentView</strong> (most importantly to the top AND bottom edges). <strong>NOTE: don't pin subviews to the cell itself; only to the cell's <code>contentView</code>!</strong> Let the intrinsic content size of these subviews drive the height of the table view cell's content view by making sure the <em>content compression resistance</em> and <em>content hugging</em> constraints in the vertical dimension for each subview are not being overridden by higher-priority constraints you have added. (<a href="https://stackoverflow.com/questions/22599069/what-is-the-content-compression-resistance-and-content-hugging-of-a-uiview">Huh? Click here.</a>)</p>
<p>Remember, the idea is to have the cell's subviews connected vertically to the cell's content view so that they can "exert pressure" and make the content view expand to fit them. Using an example cell with a few subviews, here is a visual illustration of what <strong>some</strong> <em>(not all!)</em> of your constraints would need to look like:</p>
<p><img src="https://i.stack.imgur.com/CTUPi.png" alt="Example illustration of constraints on a table view cell."></p>
<p>You can imagine that as more text is added to the multi-line body label in the example cell above, it will need to grow vertically to fit the text, which will effectively force the cell to grow in height. (Of course, you need to get the constraints right in order for this to work correctly!)</p>
<p>Getting your constraints right is definitely the <strong>hardest and most important part</strong> of getting dynamic cell heights working with Auto Layout. If you make a mistake here, it could prevent everything else from working -- so take your time! I recommend setting up your constraints in code because you know exactly which constraints are being added where, and it's a lot easier to debug when things go wrong. Adding constraints in code can be just as easy as and significantly more powerful than Interface Builder using layout anchors, or one of the fantastic open source APIs available on GitHub.</p>
<ul>
<li>If you're adding constraints in code, you should do this once from within the <code>updateConstraints</code> method of your UITableViewCell subclass. Note that <code>updateConstraints</code> may be called more than once, so to avoid adding the same constraints more than once, make sure to wrap your constraint-adding code within <code>updateConstraints</code> in a check for a boolean property such as <code>didSetupConstraints</code> (which you set to YES after you run your constraint-adding code once). On the other hand, if you have code that updates existing constraints (such as adjusting the <code>constant</code> property on some constraints), place this in <code>updateConstraints</code> but outside of the check for <code>didSetupConstraints</code> so it can run every time the method is called.</li>
</ul>
<h2>2. Determine Unique Table View Cell Reuse Identifiers</h2>
<p>For every unique set of constraints in the cell, use a unique cell reuse identifier. In other words, if your cells have more than one unique layout, each unique layout should receive its own reuse identifier. (A good hint that you need to use a new reuse identifier is when your cell variant has a different number of subviews, or the subviews are arranged in a distinct fashion.)</p>
<p>For example, if you were displaying an email message in each cell, you might have 4 unique layouts: messages with just a subject, messages with a subject and a body, messages with a subject and a photo attachment, and messages with a subject, body, and photo attachment. Each layout has completely different constraints required to achieve it, so once the cell is initialized and the constraints are added for one of these cell types, the cell should get a unique reuse identifier specific to that cell type. This means when you dequeue a cell for reuse, the constraints have already been added and are ready to go for that cell type.</p>
<p>Note that due to differences in intrinsic content size, cells with the same constraints (type) may still have varying heights! Don't confuse fundamentally different layouts (different constraints) with different calculated view frames (solved from identical constraints) due to different sizes of content.</p>
<ul>
<li>Do not add cells with completely different sets of constraints to the same reuse pool (i.e. use the same reuse identifier) and then attempt to remove the old constraints and set up  new constraints from scratch after each dequeue. The internal Auto Layout engine is not designed to handle large scale changes in constraints, and you will see massive performance issues.</li>
</ul>
<h2>For iOS 8 - Self-Sizing Cells</h2>
<h3>3. Enable Row Height Estimation</h3>
<blockquote>
<p>To enable self-sizing table view cells, you must set the table views
rowHeight property to UITableViewAutomaticDimension. You must also
assign a value to the estimatedRowHeight property. As soon as both of
these properties are set, the system uses Auto Layout to calculate the
rows actual height</p>
<p><sub>Apple: <a href="https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/WorkingwithSelf-SizingTableViewCells.html" rel="noreferrer">Working with Self-Sizing Table View Cells</a></sub></p>
</blockquote>
<p>With iOS 8, Apple has internalized much of the work that previously had to be implemented by you prior to iOS 8. In order to allow the self-sizing cell mechanism to work, you must first set the <code>rowHeight</code> property on the table view to the constant <code>UITableView.automaticDimension</code>. Then, you simply need to enable row height estimation by setting the table view's <code>estimatedRowHeight</code> property to a nonzero value, for example:</p>
<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">self.tableView.rowHeight</span> = UITableView.automaticDimension<span class="hljs-comment">;</span>
<span class="hljs-attr">self.tableView.estimatedRowHeight</span> = <span class="hljs-number">44.0</span><span class="hljs-comment">; // set to whatever your "average" cell height is</span>
</code></pre>
<p>What this does is provide the table view with a temporary estimate/placeholder for the row heights of cells that are not yet onscreen. Then, when these cells are about to scroll on screen, the actual row height will be calculated. To determine the actual height for each row, the table view automatically asks each cell what height its <code>contentView</code> needs to be based on the known fixed width of the content view (which is based on the table view's width, minus any additional things like a section index or accessory view) and the auto layout constraints you have added to the cell's content view and subviews. Once this actual cell height has been determined, the old estimated height for the row is updated with the new actual height (and any adjustments to the table view's contentSize/contentOffset are made as needed for you).</p>
<p>Generally speaking, the estimate you provide doesn't have to be very accurate -- it is only used to correctly size the scroll indicator in the table view, and the table view does a good job of adjusting the scroll indicator for incorrect estimates as you scroll cells onscreen. You should set the <code>estimatedRowHeight</code> property on the table view (in <code>viewDidLoad</code> or similar) to a constant value that is the "average" row height. <em>Only if your row heights have extreme variability (e.g. differ by an order of magnitude) and you notice the scroll indicator "jumping" as you scroll should you bother implementing <code>tableView:estimatedHeightForRowAtIndexPath:</code> to do the minimal calculation required to return a more accurate estimate for each row.</em></p>
<h2>For iOS 7 support (implementing auto cell sizing yourself)</h2>
<h3>3. Do a Layout Pass &amp; Get The Cell Height</h3>
<p>First, instantiate an offscreen instance of a table view cell, <em>one instance for each reuse identifier</em>, that is used strictly for height calculations. (Offscreen meaning the cell reference is stored in a property/ivar on the view controller and never returned from <code>tableView:cellForRowAtIndexPath:</code> for the table view to actually render onscreen.) Next, the cell must be configured with the exact content (e.g. text, images, etc) that it would hold if it were to be displayed in the table view.</p>
<p>Then, force the cell to immediately layout its subviews, and then use the <code>systemLayoutSizeFittingSize:</code> method on the <code>UITableViewCell</code>'s <code>contentView</code> to find out what the required height of the cell is. Use <code>UILayoutFittingCompressedSize</code> to get the smallest size required to fit all the contents of the cell. The height can then be returned from the <code>tableView:heightForRowAtIndexPath:</code> delegate method.</p>
<h3>4. Use Estimated Row Heights</h3>
<p>If your table view has more than a couple dozen rows in it, you will find that doing the Auto Layout constraint solving can quickly bog down the main thread when first loading the table view, as <code>tableView:heightForRowAtIndexPath:</code> is called on each and every row upon first load (in order to calculate the size of the scroll indicator).</p>
<p>As of iOS 7, you can (and absolutely should) use the <code>estimatedRowHeight</code> property on the table view. What this does is provide the table view with a temporary estimate/placeholder for the row heights of cells that are not yet onscreen. Then, when these cells are about to scroll on screen, the actual row height will be calculated (by calling <code>tableView:heightForRowAtIndexPath:</code>), and the estimated height updated with the actual one.</p>
<p>Generally speaking, the estimate you provide doesn't have to be very accurate -- it is only used to correctly size the scroll indicator in the table view, and the table view does a good job of adjusting the scroll indicator for incorrect estimates as you scroll cells onscreen. You should set the <code>estimatedRowHeight</code> property on the table view (in <code>viewDidLoad</code> or similar) to a constant value that is the "average" row height. <em>Only if your row heights have extreme variability (e.g. differ by an order of magnitude) and you notice the scroll indicator "jumping" as you scroll should you bother implementing <code>tableView:estimatedHeightForRowAtIndexPath:</code> to do the minimal calculation required to return a more accurate estimate for each row.</em></p>
<h3>5. (If Needed) Add Row Height Caching</h3>
<p>If you've done all the above and are still finding that performance is unacceptably slow when doing the constraint solving in <code>tableView:heightForRowAtIndexPath:</code>, you'll unfortunately need to implement some caching for cell heights. (This is the approach suggested by Apple's engineers.) The general idea is to let the Autolayout engine solve the constraints the first time, then cache the calculated height for that cell and use the cached value for all future requests for that cell's height. The trick of course is to make sure you clear the cached height for a cell when anything happens that could cause the cell's height to change -- primarily, this would be when that cell's content changes or when other important events occur (like the user adjusting the Dynamic Type text size slider).</p>
<h3>iOS 7 Generic Sample Code (with lots of juicy comments)</h3>
<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-operator">-</span> (<span class="hljs-type">UITableViewCell</span> <span class="hljs-operator">*</span>)tableView:(<span class="hljs-type">UITableView</span> <span class="hljs-operator">*</span>)tableView cellForRowAtIndexPath:(<span class="hljs-type">NSIndexPath</span> <span class="hljs-operator">*</span>)indexPath
{
    <span class="hljs-comment">// Determine which reuse identifier should be used for the cell at this </span>
    <span class="hljs-comment">// index path, depending on the particular layout required (you may have</span>
    <span class="hljs-comment">// just one, or may have many).</span>
    <span class="hljs-type">NSString</span> <span class="hljs-operator">*</span>reuseIdentifier <span class="hljs-operator">=</span> <span class="hljs-operator">...</span>;

    <span class="hljs-comment">// Dequeue a cell for the reuse identifier.</span>
    <span class="hljs-comment">// Note that this method will init and return a new cell if there isn't</span>
    <span class="hljs-comment">// one available in the reuse pool, so either way after this line of </span>
    <span class="hljs-comment">// code you will have a cell with the correct constraints ready to go.</span>
    <span class="hljs-type">UITableViewCell</span> <span class="hljs-operator">*</span>cell <span class="hljs-operator">=</span> [tableView dequeueReusableCellWithIdentifier:reuseIdentifier];
         
    <span class="hljs-comment">// Configure the cell with content for the given indexPath, for example:</span>
    <span class="hljs-comment">// cell.textLabel.text = someTextForThisCell;</span>
    <span class="hljs-comment">// ...</span>
    
    <span class="hljs-comment">// Make sure the constraints have been set up for this cell, since it </span>
    <span class="hljs-comment">// may have just been created from scratch. Use the following lines, </span>
    <span class="hljs-comment">// assuming you are setting up constraints from within the cell's </span>
    <span class="hljs-comment">// updateConstraints method:</span>
    [cell setNeedsUpdateConstraints];
    [cell updateConstraintsIfNeeded];

    <span class="hljs-comment">// If you are using multi-line UILabels, don't forget that the </span>
    <span class="hljs-comment">// preferredMaxLayoutWidth needs to be set correctly. Do it at this </span>
    <span class="hljs-comment">// point if you are NOT doing it within the UITableViewCell subclass </span>
    <span class="hljs-comment">// -[layoutSubviews] method. For example: </span>
    <span class="hljs-comment">// cell.multiLineLabel.preferredMaxLayoutWidth = CGRectGetWidth(tableView.bounds);</span>
    
    <span class="hljs-keyword">return</span> cell;
}

<span class="hljs-operator">-</span> (<span class="hljs-type">CGFloat</span>)tableView:(<span class="hljs-type">UITableView</span> <span class="hljs-operator">*</span>)tableView heightForRowAtIndexPath:(<span class="hljs-type">NSIndexPath</span> <span class="hljs-operator">*</span>)indexPath
{
    <span class="hljs-comment">// Determine which reuse identifier should be used for the cell at this </span>
    <span class="hljs-comment">// index path.</span>
    <span class="hljs-type">NSString</span> <span class="hljs-operator">*</span>reuseIdentifier <span class="hljs-operator">=</span> <span class="hljs-operator">...</span>;

    <span class="hljs-comment">// Use a dictionary of offscreen cells to get a cell for the reuse </span>
    <span class="hljs-comment">// identifier, creating a cell and storing it in the dictionary if one </span>
    <span class="hljs-comment">// hasn't already been added for the reuse identifier. WARNING: Don't </span>
    <span class="hljs-comment">// call the table view's dequeueReusableCellWithIdentifier: method here </span>
    <span class="hljs-comment">// because this will result in a memory leak as the cell is created but </span>
    <span class="hljs-comment">// never returned from the tableView:cellForRowAtIndexPath: method!</span>
    <span class="hljs-type">UITableViewCell</span> <span class="hljs-operator">*</span>cell <span class="hljs-operator">=</span> [<span class="hljs-keyword">self</span>.offscreenCells objectForKey:reuseIdentifier];
    <span class="hljs-keyword">if</span> (<span class="hljs-operator">!</span>cell) {
        cell <span class="hljs-operator">=</span> [[<span class="hljs-type">YourTableViewCellClass</span> alloc] <span class="hljs-keyword">init</span>];
        [<span class="hljs-keyword">self</span>.offscreenCells setObject:cell forKey:reuseIdentifier];
    }
    
    <span class="hljs-comment">// Configure the cell with content for the given indexPath, for example:</span>
    <span class="hljs-comment">// cell.textLabel.text = someTextForThisCell;</span>
    <span class="hljs-comment">// ...</span>
    
    <span class="hljs-comment">// Make sure the constraints have been set up for this cell, since it </span>
    <span class="hljs-comment">// may have just been created from scratch. Use the following lines, </span>
    <span class="hljs-comment">// assuming you are setting up constraints from within the cell's </span>
    <span class="hljs-comment">// updateConstraints method:</span>
    [cell setNeedsUpdateConstraints];
    [cell updateConstraintsIfNeeded];

    <span class="hljs-comment">// Set the width of the cell to match the width of the table view. This</span>
    <span class="hljs-comment">// is important so that we'll get the correct cell height for different</span>
    <span class="hljs-comment">// table view widths if the cell's height depends on its width (due to </span>
    <span class="hljs-comment">// multi-line UILabels word wrapping, etc). We don't need to do this </span>
    <span class="hljs-comment">// above in -[tableView:cellForRowAtIndexPath] because it happens </span>
    <span class="hljs-comment">// automatically when the cell is used in the table view. Also note, </span>
    <span class="hljs-comment">// the final width of the cell may not be the width of the table view in</span>
    <span class="hljs-comment">// some cases, for example when a section index is displayed along </span>
    <span class="hljs-comment">// the right side of the table view. You must account for the reduced </span>
    <span class="hljs-comment">// cell width.</span>
    cell.bounds <span class="hljs-operator">=</span> <span class="hljs-type">CGRectMake</span>(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-type">CGRectGetWidth</span>(tableView.bounds), <span class="hljs-type">CGRectGetHeight</span>(cell.bounds));

    <span class="hljs-comment">// Do the layout pass on the cell, which will calculate the frames for </span>
    <span class="hljs-comment">// all the views based on the constraints. (Note that you must set the </span>
    <span class="hljs-comment">// preferredMaxLayoutWidth on multiline UILabels inside the </span>
    <span class="hljs-comment">// -[layoutSubviews] method of the UITableViewCell subclass, or do it </span>
    <span class="hljs-comment">// manually at this point before the below 2 lines!)</span>
    [cell setNeedsLayout];
    [cell layoutIfNeeded];

    <span class="hljs-comment">// Get the actual height required for the cell's contentView</span>
    <span class="hljs-type">CGFloat</span> height <span class="hljs-operator">=</span> [cell.contentView systemLayoutSizeFittingSize:<span class="hljs-type">UILayoutFittingCompressedSize</span>].height;

    <span class="hljs-comment">// Add an extra point to the height to account for the cell separator, </span>
    <span class="hljs-comment">// which is added between the bottom of the cell's contentView and the </span>
    <span class="hljs-comment">// bottom of the table view cell.</span>
    height <span class="hljs-operator">+=</span> <span class="hljs-number">1.0</span>;

    <span class="hljs-keyword">return</span> height;
}

<span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> Set the table view's estimatedRowHeight property instead of </span>
<span class="hljs-comment">// implementing the below method, UNLESS you have extreme variability in </span>
<span class="hljs-comment">// your row heights and you notice the scroll indicator "jumping" </span>
<span class="hljs-comment">// as you scroll.</span>
<span class="hljs-operator">-</span> (<span class="hljs-type">CGFloat</span>)tableView:(<span class="hljs-type">UITableView</span> <span class="hljs-operator">*</span>)tableView estimatedHeightForRowAtIndexPath:(<span class="hljs-type">NSIndexPath</span> <span class="hljs-operator">*</span>)indexPath
{
    <span class="hljs-comment">// Do the minimal calculations required to be able to return an </span>
    <span class="hljs-comment">// estimated row height that's within an order of magnitude of the </span>
    <span class="hljs-comment">// actual height. For example:</span>
    <span class="hljs-keyword">if</span> ([<span class="hljs-keyword">self</span> isTallCellAtIndexPath:indexPath]) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">350.0</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">40.0</span>;
    }
}
</code></pre>
<h1>Sample Projects</h1>
<ul>
<li><a href="https://github.com/smileyborg/TableViewCellWithAutoLayoutiOS8" rel="noreferrer">iOS 8 Sample Project</a> - Requires iOS 8</li>
<li><a href="https://github.com/smileyborg/TableViewCellWithAutoLayout" rel="noreferrer">iOS 7 Sample Project</a> - Works on iOS 7+</li>
</ul>
<p>These projects are fully working examples of table views with variable row heights due to table view cells containing dynamic content in UILabels.</p>
<h2>Xamarin (C#/.NET)</h2>
<p>If you're using Xamarin, check out this <a href="https://github.com/kentcb/TableViewCellWithAutoLayout_dotNET" rel="noreferrer">sample project</a> put together by <a href="https://stackoverflow.com/users/5380/kent-boogaart">@KentBoogaart</a>.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For iOS 8 above it's really simple:</p>

<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {  
    <span class="hljs-keyword">super</span>.viewDidLoad()

    <span class="hljs-keyword">self</span>.tableView.estimatedRowHeight <span class="hljs-operator">=</span> <span class="hljs-number">80</span>
    <span class="hljs-keyword">self</span>.tableView.rowHeight <span class="hljs-operator">=</span> <span class="hljs-type">UITableView</span>.automaticDimension
}
</code></pre>

<p>or </p>

<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">heightForRowAtIndexPath</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">NSIndexPath</span>) -&gt; <span class="hljs-type">CGFloat</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-type">UITableView</span>.automaticDimension
}
</code></pre>

<p>But for iOS 7, the key is calculate the height after autolayout:</p>

<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">calculateHeightForConfiguredSizingCell</span>(<span class="hljs-params">cell</span>: <span class="hljs-type">GSTableViewCell</span>) -&gt; <span class="hljs-type">CGFloat</span> {
    cell.setNeedsLayout()
    cell.layoutIfNeeded()
    <span class="hljs-keyword">let</span> height <span class="hljs-operator">=</span> cell.contentView.systemLayoutSizeFittingSize(<span class="hljs-type">UILayoutFittingExpandedSize</span>).height <span class="hljs-operator">+</span> <span class="hljs-number">1.0</span>
    <span class="hljs-keyword">return</span> height
}
</code></pre>

<p><strong>Important</strong> </p>

<ul>
<li><p>If multiple lines labels, don't forget set the <code>numberOfLines</code> to <code>0</code>.</p></li>
<li><p>Don't forget <code>label.preferredMaxLayoutWidth = CGRectGetWidth(tableView.bounds)</code></p></li>
</ul>

<p>The full example code is <a href="https://github.com/williamhqs/GSTableViewDynamicHeight" rel="noreferrer">here</a>.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>Swift example of a variable height UITableViewCell</h1>

<p><em>Updated for Swift 3</em></p>

<p>William Hu's Swift answer is good, but it helps me to have some simple yet detailed steps when learning to do something for the first time. The example below is my test project while learning to make a <code>UITableView</code> with variable cell heights. I based it on <a href="https://stackoverflow.com/a/33234181/3681880">this basic UITableView example for Swift</a>.</p>

<p>The finished project should look like this:</p>

<p><a href="https://i.stack.imgur.com/lxUhH.png" rel="noreferrer"><img src="https://i.stack.imgur.com/lxUhH.png" alt="enter image description here"></a></p>

<h1>Create a new project</h1>

<p>It can be just a Single View Application.</p>

<h1>Add the code</h1>

<p>Add a new Swift file to your project. Name it MyCustomCell. This class will hold the outlets for the views that you add to your cell in the storyboard. In this basic example we will only have one label in each cell.</p>

<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCustomCell</span>: <span class="hljs-title class_">UITableViewCell</span> {
    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> myCellLabel: <span class="hljs-type">UILabel</span>!
}
</code></pre>

<p>We will connect this outlet later.</p>

<p>Open ViewController.swift and make sure you have the following content:</p>

<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIViewController</span>, <span class="hljs-title class_">UITableViewDelegate</span>, <span class="hljs-title class_">UITableViewDataSource</span> {

    <span class="hljs-comment">// These strings will be the data for the table view cells</span>
    <span class="hljs-keyword">let</span> animals: [<span class="hljs-type">String</span>] <span class="hljs-operator">=</span> [
        <span class="hljs-string">"Ten horses:  horse horse horse horse horse horse horse horse horse horse "</span>,
        <span class="hljs-string">"Three cows:  cow, cow, cow"</span>,
        <span class="hljs-string">"One camel:  camel"</span>,
        <span class="hljs-string">"Ninety-nine sheep:  sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep baaaa sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep"</span>,
        <span class="hljs-string">"Thirty goats:  goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat "</span>]

    <span class="hljs-comment">// Don't forget to enter this in IB also</span>
    <span class="hljs-keyword">let</span> cellReuseIdentifier <span class="hljs-operator">=</span> <span class="hljs-string">"cell"</span>

    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">var</span> tableView: <span class="hljs-type">UITableView</span>!

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()

        <span class="hljs-comment">// delegate and data source</span>
        tableView.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>
        tableView.dataSource <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>

        <span class="hljs-comment">// Along with auto layout, these are the keys for enabling variable cell height</span>
        tableView.estimatedRowHeight <span class="hljs-operator">=</span> <span class="hljs-number">44.0</span>
        tableView.rowHeight <span class="hljs-operator">=</span> <span class="hljs-type">UITableViewAutomaticDimension</span>
    }

    <span class="hljs-comment">// number of rows in table view</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">numberOfRowsInSection</span> <span class="hljs-params">section</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.animals.count
    }

    <span class="hljs-comment">// create a cell for each table view row</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">cellForRowAt</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">IndexPath</span>) -&gt; <span class="hljs-type">UITableViewCell</span> {

        <span class="hljs-keyword">let</span> cell:<span class="hljs-type">MyCustomCell</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.tableView.dequeueReusableCell(withIdentifier: cellReuseIdentifier) <span class="hljs-keyword">as!</span> <span class="hljs-type">MyCustomCell</span>
        cell.myCellLabel.text <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.animals[indexPath.row]
        <span class="hljs-keyword">return</span> cell
    }

    <span class="hljs-comment">// method to run when table view cell is tapped</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">didSelectRowAt</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">IndexPath</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"You tapped cell number <span class="hljs-subst">\(indexPath.row)</span>."</span>)
    }
}
</code></pre>

<p><strong>Important Note:</strong></p>

<ul>
<li><p>It is the following two lines of code (along with auto layout) that make the variable cell height possible:</p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">tableView.estimatedRowHeight</span> = <span class="hljs-number">44.0</span>
<span class="hljs-attr">tableView.rowHeight</span> = UITableViewAutomaticDimension
</code></pre></li>
</ul>

<h1>Setup the storyboard</h1>

<p>Add a Table View to your view controller and use auto layout to pin it to the four sides. Then drag a Table View Cell onto the Table View. And onto the Prototype cell, drag a Label. Use auto layout to pin the label to the four edges of the content view of the Table View Cell.</p>

<p><a href="https://i.stack.imgur.com/KI5ky.png" rel="noreferrer"><img src="https://i.stack.imgur.com/KI5ky.png" alt="enter image description here"></a></p>

<p><strong>Important note:</strong></p>

<ul>
<li>Auto layout works together with the important two lines of code I mentioned above. If you don't use auto layout it isn't going to work.</li>
</ul>

<h1>Other IB settings</h1>

<p><strong>Custom class name and Identifier</strong></p>

<p>Select the Table View Cell and set the custom class to be <code>MyCustomCell</code> (the name of the class in the Swift file we added). Also set the Identifier to be <code>cell</code> (the same string that we used for the <code>cellReuseIdentifier</code> in the code above.</p>

<p><a href="https://i.stack.imgur.com/J7txO.png" rel="noreferrer"><img src="https://i.stack.imgur.com/J7txO.png" alt="enter image description here"></a></p>

<p><strong>Zero Lines for Label</strong></p>

<p>Set the number of lines to <code>0</code> in your Label. This means multi-line and allows the label to resize itself based on its content.</p>

<p><a href="https://i.stack.imgur.com/YbCl2.png" rel="noreferrer"><img src="https://i.stack.imgur.com/YbCl2.png" alt="enter image description here"></a>  </p>

<p><strong>Hook Up the Outlets</strong></p>

<ul>
<li>Control drag from the Table View in the storyboard to the <code>tableView</code> variable in the <code>ViewController</code> code. </li>
<li>Do the same for the Label in your Prototype cell to the <code>myCellLabel</code> variable in the <code>MyCustomCell</code> class.</li>
</ul>

<h1>Finished</h1>

<p>You should be able to run your project now and get cells with variable heights.</p>

<h1>Notes</h1>

<ul>
<li>This example only works for iOS 8 and after. If you are still needing to support iOS 7 then this won't work for you.</li>
<li>Your own custom cells in your future projects will probably have more than a single label. Make sure that you get everything pinned right so that auto layout can determine the correct height to use. You may also have to use vertical compression resistance and hugging. See <a href="http://useyourloaf.com/blog/table-view-cells-with-varying-row-heights/" rel="noreferrer">this article</a> for more about that.</li>
<li><p>If you are not pinning the leading and trailing (left and right) edges, you may also need to set the label's <code>preferredMaxLayoutWidth</code> so that it knows when to line wrap. For example, if you had added a Center Horizontally constraint to the label in the project above rather than pin the leading and trailing edges, then you would need to add this line to the <code>tableView:cellForRowAtIndexPath</code> method:</p>

<pre class="default s-code-block"><code class="hljs language-ini"> <span class="hljs-attr">cell.myCellLabel.preferredMaxLayoutWidth</span> = tableView.bounds.width
</code></pre></li>
</ul>

<h1>See also</h1>

<ul>
<li><a href="http://www.appcoda.com/self-sizing-cells/" rel="noreferrer">Understanding Self Sizing Cells and Dynamic Type in iOS 8</a></li>
<li><a href="http://useyourloaf.com/blog/table-view-cells-with-varying-row-heights/" rel="noreferrer">Table View Cells with Varying Row Heights</a></li>
<li><a href="https://stackoverflow.com/questions/33234180/uitableview-example-for-swift">UITableView example for Swift</a></li>
</ul>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>I wrapped @smileyborg's iOS7 solution in a category</h1>

<p>I decided to wrap this clever solution by @smileyborg into a <code>UICollectionViewCell+AutoLayoutDynamicHeightCalculation</code> category.</p>

<p>The category also rectifies the issues outlined in @wildmonkey's answer (loading a cell from a nib and <code>systemLayoutSizeFittingSize:</code> returning <code>CGRectZero</code>)</p>

<p>It doesn't take into account any caching but suits my needs right now. Feel free to copy, paste and hack at it.</p>

<h3>UICollectionViewCell+AutoLayoutDynamicHeightCalculation.h</h3>

<pre class="default s-code-block"><code class="hljs language-objectivec"><span class="hljs-meta">#import <span class="hljs-string">&lt;UIKit/UIKit.h&gt;</span></span>

<span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (^<span class="hljs-built_in">UICollectionViewCellAutoLayoutRenderBlock</span>)(<span class="hljs-type">void</span>);

<span class="hljs-comment">/**
 *  A category on UICollectionViewCell to aid calculating dynamic heights based on AutoLayout contraints.
 *
 *  Many thanks to @smileyborg and @wildmonkey
 *
 *  @see stackoverflow.com/questions/18746929/using-auto-layout-in-uitableview-for-dynamic-cell-layouts-variable-row-heights
 */</span>
<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">UICollectionViewCell</span> (<span class="hljs-title">AutoLayoutDynamicHeightCalculation</span>)</span>

<span class="hljs-comment">/**
 *  Grab an instance of the receiving type to use in order to calculate AutoLayout contraint driven dynamic height. The method pulls the cell from a nib file and moves any Interface Builder defined contrainsts to the content view.
 *
 *  @param name Name of the nib file.
 *
 *  @return collection view cell for using to calculate content based height
 */</span>
+ (<span class="hljs-keyword">instancetype</span>)heightCalculationCellFromNibWithName:(<span class="hljs-built_in">NSString</span> *)name;

<span class="hljs-comment">/**
 *  Returns the height of the receiver after rendering with your model data and applying an AutoLayout pass
 *
 *  @param block Render the model data to your UI elements in this block
 *
 *  @return Calculated constraint derived height
 */</span>
- (<span class="hljs-built_in">CGFloat</span>)heightAfterAutoLayoutPassAndRenderingWithBlock:(<span class="hljs-built_in">UICollectionViewCellAutoLayoutRenderBlock</span>)block collectionViewWidth:(<span class="hljs-built_in">CGFloat</span>)width;

<span class="hljs-comment">/**
 *  Directly calls `heightAfterAutoLayoutPassAndRenderingWithBlock:collectionViewWidth` assuming a collection view width spanning the [UIScreen mainScreen] bounds
 */</span>
- (<span class="hljs-built_in">CGFloat</span>)heightAfterAutoLayoutPassAndRenderingWithBlock:(<span class="hljs-built_in">UICollectionViewCellAutoLayoutRenderBlock</span>)block;

<span class="hljs-keyword">@end</span>
</code></pre>

<h3>UICollectionViewCell+AutoLayoutDynamicHeightCalculation.m</h3>

<pre class="default s-code-block"><code class="hljs language-objectivec"><span class="hljs-meta">#import <span class="hljs-string">"UICollectionViewCell+AutoLayout.h"</span></span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">UICollectionViewCell</span> (<span class="hljs-title">AutoLayout</span>)</span>

<span class="hljs-meta">#<span class="hljs-keyword">pragma</span> mark Dummy Cell Generator</span>

+ (<span class="hljs-keyword">instancetype</span>)heightCalculationCellFromNibWithName:(<span class="hljs-built_in">NSString</span> *)name
{
    <span class="hljs-built_in">UICollectionViewCell</span> *heightCalculationCell = [[[<span class="hljs-built_in">NSBundle</span> mainBundle] loadNibNamed:name owner:<span class="hljs-keyword">self</span> options:<span class="hljs-literal">nil</span>] lastObject];
    [heightCalculationCell moveInterfaceBuilderLayoutConstraintsToContentView];
    <span class="hljs-keyword">return</span> heightCalculationCell;
}

<span class="hljs-meta">#<span class="hljs-keyword">pragma</span> mark Moving Constraints</span>

- (<span class="hljs-type">void</span>)moveInterfaceBuilderLayoutConstraintsToContentView
{
    [<span class="hljs-keyword">self</span>.constraints enumerateObjectsUsingBlock:^(<span class="hljs-built_in">NSLayoutConstraint</span> *constraint, <span class="hljs-built_in">NSUInteger</span> idx, <span class="hljs-type">BOOL</span> *stop) {
        [<span class="hljs-keyword">self</span> removeConstraint:constraint];
        <span class="hljs-type">id</span> firstItem = constraint.firstItem == <span class="hljs-keyword">self</span> ? <span class="hljs-keyword">self</span>.contentView : constraint.firstItem;
        <span class="hljs-type">id</span> secondItem = constraint.secondItem == <span class="hljs-keyword">self</span> ? <span class="hljs-keyword">self</span>.contentView : constraint.secondItem;
        [<span class="hljs-keyword">self</span>.contentView addConstraint:[<span class="hljs-built_in">NSLayoutConstraint</span> constraintWithItem:firstItem
                                                                     attribute:constraint.firstAttribute
                                                                     relatedBy:constraint.relation
                                                                        toItem:secondItem
                                                                     attribute:constraint.secondAttribute
                                                                    multiplier:constraint.multiplier
                                                                      constant:constraint.constant]];
    }];
}

<span class="hljs-meta">#<span class="hljs-keyword">pragma</span> mark Height</span>

- (<span class="hljs-built_in">CGFloat</span>)heightAfterAutoLayoutPassAndRenderingWithBlock:(<span class="hljs-built_in">UICollectionViewCellAutoLayoutRenderBlock</span>)block
{
    <span class="hljs-keyword">return</span> [<span class="hljs-keyword">self</span> heightAfterAutoLayoutPassAndRenderingWithBlock:block
                                            collectionViewWidth:<span class="hljs-built_in">CGRectGetWidth</span>([[<span class="hljs-built_in">UIScreen</span> mainScreen] bounds])];
}

- (<span class="hljs-built_in">CGFloat</span>)heightAfterAutoLayoutPassAndRenderingWithBlock:(<span class="hljs-built_in">UICollectionViewCellAutoLayoutRenderBlock</span>)block collectionViewWidth:(<span class="hljs-built_in">CGFloat</span>)width
{
    <span class="hljs-built_in">NSParameterAssert</span>(block);

    block();

    [<span class="hljs-keyword">self</span> setNeedsUpdateConstraints];
    [<span class="hljs-keyword">self</span> updateConstraintsIfNeeded];

    <span class="hljs-keyword">self</span>.bounds = <span class="hljs-built_in">CGRectMake</span>(<span class="hljs-number">0.0</span>f, <span class="hljs-number">0.0</span>f, width, <span class="hljs-built_in">CGRectGetHeight</span>(<span class="hljs-keyword">self</span>.bounds));

    [<span class="hljs-keyword">self</span> setNeedsLayout];
    [<span class="hljs-keyword">self</span> layoutIfNeeded];

    <span class="hljs-built_in">CGSize</span> calculatedSize = [<span class="hljs-keyword">self</span>.contentView systemLayoutSizeFittingSize:<span class="hljs-built_in">UILayoutFittingCompressedSize</span>];

    <span class="hljs-keyword">return</span> calculatedSize.height;

}

<span class="hljs-keyword">@end</span>
</code></pre>

<h3>Usage example:</h3>

<pre class="default s-code-block"><code class="hljs language-objectivec">- (<span class="hljs-built_in">CGSize</span>)collectionView:(<span class="hljs-built_in">UICollectionView</span> *)collectionView layout:(<span class="hljs-built_in">UICollectionViewLayout</span> *)collectionViewLayout sizeForItemAtIndexPath:(<span class="hljs-built_in">NSIndexPath</span> *)indexPath
{
    MYSweetCell *cell = [MYSweetCell heightCalculationCellFromNibWithName:<span class="hljs-built_in">NSStringFromClass</span>([MYSweetCell <span class="hljs-keyword">class</span>])];
    <span class="hljs-built_in">CGFloat</span> height = [cell heightAfterAutoLayoutPassAndRenderingWithBlock:^{
        [(<span class="hljs-type">id</span>&lt;MYSweetCellRenderProtocol&gt;)cell renderWithModel:someModel];
    }];
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">CGSizeMake</span>(<span class="hljs-built_in">CGRectGetWidth</span>(<span class="hljs-keyword">self</span>.collectionView.bounds), height);
}
</code></pre>

<p>Thankfully we won't have to do this jazz in iOS8, but there it is for now!</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is my solution:</p>

<p>You need to tell the <code>TableView</code> the <code>estimatedHeight</code> before it loads the view. Otherwise it wont be able to behave like expected.</p>

<p><strong>Objective-C</strong></p>

<pre class="default s-code-block"><code class="hljs language-objectivec">- (<span class="hljs-type">void</span>)viewWillAppear:(<span class="hljs-type">BOOL</span>)animated {
    _messageField.delegate = <span class="hljs-keyword">self</span>;
    _tableView.estimatedRowHeight = <span class="hljs-number">65.0</span>;
    _tableView.rowHeight = <span class="hljs-built_in">UITableViewAutomaticDimension</span>;
}
</code></pre>

<p>Update to <strong>Swift 4.2</strong></p>

<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewWillAppear</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">animated</span>: <span class="hljs-type">Bool</span>) {
    tableView.rowHeight <span class="hljs-operator">=</span> <span class="hljs-type">UITableView</span>.automaticDimension
    tableView.estimatedRowHeight <span class="hljs-operator">=</span> <span class="hljs-number">65.0</span>
}
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The solution proposed by @smileyborg is almost perfect. If you have a custom cell and you want one or more <code>UILabel</code> with dynamic heights then the <em>systemLayoutSizeFittingSize</em> method combined with AutoLayout enabled returns a <code>CGSizeZero</code> unless you move all your cell constraints from the cell to its contentView (as suggested by @TomSwift here <a href="https://stackoverflow.com/questions/18118021/how-to-resize-superview-to-fit-all-subviews-with-autolayout">How to resize superview to fit all subviews with autolayout?</a>).</p>

<p>To do so you need to insert the following code in your custom UITableViewCell implementation (thanks to @Adrian).</p>

<pre class="default s-code-block"><code class="hljs language-objectivec">- (<span class="hljs-type">void</span>)awakeFromNib{
    [<span class="hljs-variable language_">super</span> awakeFromNib];
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">NSLayoutConstraint</span> *cellConstraint <span class="hljs-keyword">in</span> <span class="hljs-keyword">self</span>.constraints) {
        [<span class="hljs-keyword">self</span> removeConstraint:cellConstraint];
        <span class="hljs-type">id</span> firstItem = cellConstraint.firstItem == <span class="hljs-keyword">self</span> ? <span class="hljs-keyword">self</span>.contentView : cellConstraint.firstItem;
        <span class="hljs-type">id</span> seccondItem = cellConstraint.secondItem == <span class="hljs-keyword">self</span> ? <span class="hljs-keyword">self</span>.contentView : cellConstraint.secondItem;
        <span class="hljs-built_in">NSLayoutConstraint</span> *contentViewConstraint =
        [<span class="hljs-built_in">NSLayoutConstraint</span> constraintWithItem:firstItem
                                 attribute:cellConstraint.firstAttribute
                                 relatedBy:cellConstraint.relation
                                    toItem:seccondItem
                                 attribute:cellConstraint.secondAttribute
                                multiplier:cellConstraint.multiplier
                                  constant:cellConstraint.constant];
        [<span class="hljs-keyword">self</span>.contentView addConstraint:contentViewConstraint];
    }
}
</code></pre>

<p>Mixing @smileyborg answer with this should works.</p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>An important enough gotcha I just ran into to post as an answer.</p>

<p>@smileyborg's answer is mostly correct. However, if you have any code in the <code>layoutSubviews</code> method of your custom cell class, for instance setting the <code>preferredMaxLayoutWidth</code>, then it won't be run with this code:</p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-section">[cell.contentView setNeedsLayout]</span><span class="hljs-comment">;</span>
<span class="hljs-section">[cell.contentView layoutIfNeeded]</span><span class="hljs-comment">;</span>
</code></pre>

<p>It confounded me for awhile. Then I realized it's because those are only triggering layoutSubviews on the <code>contentView</code>, not the cell itself.</p>

<p>My working code looks like this:</p>

<pre class="default s-code-block"><code class="hljs language-objectivec">TCAnswerDetailAppSummaryCell *cell = [<span class="hljs-keyword">self</span>.tableView dequeueReusableCellWithIdentifier:<span class="hljs-string">@"TCAnswerDetailAppSummaryCell"</span>];
[cell configureWithThirdPartyObject:<span class="hljs-keyword">self</span>.app];
[cell layoutIfNeeded];
<span class="hljs-built_in">CGFloat</span> height = [cell.contentView systemLayoutSizeFittingSize:<span class="hljs-built_in">UILayoutFittingCompressedSize</span>].height;
<span class="hljs-keyword">return</span> height;
</code></pre>

<p>Note that if you are creating a new cell, I'm pretty sure you don't need to call <code>setNeedsLayout</code> as it should already be set. In cases where you save a reference to a cell, you should probably call it. Either way it shouldn't hurt anything.</p>

<p>Another tip if you are using cell subclasses where you are setting things like <code>preferredMaxLayoutWidth</code>. As @smileyborg mentions, "your table view cell hasn't yet had its width fixed to the table view's width". This is true, and trouble if you are doing your work in your subclass and not in the view controller. However you can simply set the cell frame at this point using the table width:</p>

<p>For instance in the calculation for height:</p>

<pre class="default s-code-block"><code class="hljs language-objectivec"><span class="hljs-keyword">self</span>.summaryCell = [<span class="hljs-keyword">self</span>.tableView dequeueReusableCellWithIdentifier:<span class="hljs-string">@"TCAnswerDetailDefaultSummaryCell"</span>];
<span class="hljs-built_in">CGRect</span> oldFrame = <span class="hljs-keyword">self</span>.summaryCell.frame;
<span class="hljs-keyword">self</span>.summaryCell.frame = <span class="hljs-built_in">CGRectMake</span>(oldFrame.origin.x, oldFrame.origin.y, <span class="hljs-keyword">self</span>.tableView.frame.size.width, oldFrame.size.height);
</code></pre>

<p>(I happen to cache this particular cell for re-use, but that's irrelevant).</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>(for Xcode 8.x / Xcode 9.x read at the bottom)</p>

<p>Beware of the following issue in in Xcode 7.x, which might be a source of confusion:</p>

<p>Interface Builder does not handle auto-sizing cell set-up properly. Even if your constraints are  absolutely valid, IB will still complain and give you confusing suggestions and errors. The reason is that IB is unwilling to change the row's height as your constraints dictate (so that the cell fits around your content). Instead, it keeps the row's height fixed and starts suggesting you change your constraints, which <strong><em>you should ignore</em></strong>.</p>

<p>For example, imagine you've set up everything fine, no warnings, no errors, all works.</p>

<p><a href="https://i.stack.imgur.com/qafNl.png" rel="noreferrer"><img src="https://i.stack.imgur.com/qafNl.png" alt="enter image description here"></a></p>

<p>Now if you change the font size (in this example I'm changing the description label font size from 17.0 to 18.0).</p>

<p><a href="https://i.stack.imgur.com/PSelQ.png" rel="noreferrer"><img src="https://i.stack.imgur.com/PSelQ.png" alt="enter image description here"></a></p>

<p>Because the font size increased, the label now wants to occupy 3 rows (before that it was occupying 2 rows).</p>

<p>If Interface Builder worked as expected, it would resize the cell's height to accommodate the new label height. However what actually happens is that IB displays the red auto-layout error icon and suggest that you modify hugging/compression priorities.</p>

<p><a href="https://i.stack.imgur.com/rUzCn.png" rel="noreferrer"><img src="https://i.stack.imgur.com/rUzCn.png" alt="enter image description here"></a></p>

<p>You should ignore these warnings. What you can* do instead is to manually change the row's height in (select Cell &gt; Size Inspector &gt; Row Height).</p>

<p><a href="https://i.stack.imgur.com/oC0pw.png" rel="noreferrer"><img src="https://i.stack.imgur.com/oC0pw.png" alt="enter image description here"></a></p>

<p>I was changing this height one click at a time (using the up/down stepper) until the red arrow errors disappear! (you will actually get yellow warnings, at which point just go ahead and do 'update frames', it should all work).</p>

<p>* Note that you don't actually have to resolve these red errors or yellow warnings in Interface Builder - at runtime, everything will work correctly (even if IB shows errors/warnings). Just make sure that at runtime in the console log you're not getting any AutoLayout errors. 
<br><br>
In fact trying to always update row height in IB is super annoying and sometimes close to impossible (because of fractional values).
<br><br>
To prevent the annoying IB warnings/errors, you can select the views involved and in <code>Size Inspector</code> for the property <code>Ambiguity</code> choose <code>Verify Position Only</code></p>

<p><a href="https://i.stack.imgur.com/LR7cI.png" rel="noreferrer"><img src="https://i.stack.imgur.com/LR7cI.png" alt="enter image description here"></a></p>

<hr>

<p>Xcode 8.x / Xcode 9.x seems to (sometimes) be doing things differently than Xcode 7.x, but still incorrectly. For example even when <code>compression resistance priority</code> / <code>hugging priority</code> are set to required (1000), Interface Builder might stretch or clip a label to fit the cell (instead of resizing cell height to fit around the label). And in such a case it might not even show any AutoLayout warnings or errors. Or sometimes it does exactly what Xcode 7.x did, described above.</p>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In case people are still having trouble with this.  I wrote a quick blog post about using Autolayout with UITableViews <a href="http://www.raizlabs.com/dev/2014/02/leveraging-auto-layout-for-dynamic-cell-heights/">Leveraging Autolayout For Dynamic Cell Heights</a> as well as an open source component to help make this more abstract and easier to implement.
<a href="https://github.com/Raizlabs/RZCellSizeManager">https://github.com/Raizlabs/RZCellSizeManager</a></p>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As long as your layout in your cell is good.</p>

<pre class="default s-code-block"><code class="hljs language-objectivec">-(<span class="hljs-built_in">CGFloat</span>)tableView:(<span class="hljs-built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="hljs-built_in">NSIndexPath</span> *)indexPath {
    <span class="hljs-built_in">UITableViewCell</span> *cell = [<span class="hljs-keyword">self</span> tableView:tableView cellForRowAtIndexPath:indexPath];

    <span class="hljs-keyword">return</span> [cell.contentView systemLayoutSizeFittingSize:<span class="hljs-built_in">UILayoutFittingCompressedSize</span>].height;
}
</code></pre>

<p>Update:  You should use dynamic resizing introduced in iOS 8.</p>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>To set automatic dimension for row height &amp; estimated row height, ensure following steps to make, auto dimension effective for cell/row height layout. </p>

<ul>
<li>Assign and implement tableview dataSource and delegate</li>
<li>Assign <code>UITableViewAutomaticDimension</code> to rowHeight &amp; estimatedRowHeight</li>
<li>Implement delegate/dataSource methods (i.e. <code>heightForRowAt</code> and return a value <code>UITableViewAutomaticDimension</code> to it)</li>
</ul>

<p>-</p>

<p><strong>Objective C:</strong></p>

<pre class="default s-code-block"><code class="hljs language-objectivec"><span class="hljs-comment">// in ViewController.h</span>
<span class="hljs-meta">#import <span class="hljs-string">&lt;UIKit/UIKit.h&gt;</span></span>

<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">ViewController</span> : <span class="hljs-title">UIViewController</span> &lt;<span class="hljs-title">UITableViewDelegate</span>, <span class="hljs-title">UITableViewDataSource</span>&gt;</span>

  <span class="hljs-keyword">@property</span> <span class="hljs-keyword">IBOutlet</span> <span class="hljs-built_in">UITableView</span> * table;

<span class="hljs-keyword">@end</span>

<span class="hljs-comment">// in ViewController.m</span>

- (<span class="hljs-type">void</span>)viewDidLoad {
    [<span class="hljs-variable language_">super</span> viewDidLoad];
    <span class="hljs-keyword">self</span>.table.dataSource = <span class="hljs-keyword">self</span>;
    <span class="hljs-keyword">self</span>.table.delegate = <span class="hljs-keyword">self</span>;

    <span class="hljs-keyword">self</span>.table.rowHeight = <span class="hljs-built_in">UITableViewAutomaticDimension</span>;
    <span class="hljs-keyword">self</span>.table.estimatedRowHeight = <span class="hljs-built_in">UITableViewAutomaticDimension</span>;
}

-(<span class="hljs-built_in">CGFloat</span>)tableView:(<span class="hljs-built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="hljs-built_in">NSIndexPath</span> *)indexPath {

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">UITableViewAutomaticDimension</span>;
}
</code></pre>

<p><strong>Swift:</strong></p>

<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> table: <span class="hljs-type">UITableView</span>!

<span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
    <span class="hljs-keyword">super</span>.viewDidLoad()

    <span class="hljs-comment">// Don't forget to set dataSource and delegate for table</span>
    table.dataSource <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>
    table.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>

    <span class="hljs-comment">// Set automatic dimensions for row height</span>
    <span class="hljs-comment">// Swift 4.2 onwards</span>
    table.rowHeight <span class="hljs-operator">=</span> <span class="hljs-type">UITableView</span>.automaticDimension
    table.estimatedRowHeight <span class="hljs-operator">=</span> <span class="hljs-type">UITableView</span>.automaticDimension


    <span class="hljs-comment">// Swift 4.1 and below</span>
    table.rowHeight <span class="hljs-operator">=</span> <span class="hljs-type">UITableViewAutomaticDimension</span>
    table.estimatedRowHeight <span class="hljs-operator">=</span> <span class="hljs-type">UITableViewAutomaticDimension</span>

}



<span class="hljs-comment">// UITableViewAutomaticDimension calculates height of label contents/text</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">heightForRowAt</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">IndexPath</span>) -&gt; <span class="hljs-type">CGFloat</span> {
    <span class="hljs-comment">// Swift 4.2 onwards</span>
    <span class="hljs-keyword">return</span> <span class="hljs-type">UITableView</span>.automaticDimension

    <span class="hljs-comment">// Swift 4.1 and below</span>
    <span class="hljs-keyword">return</span> <span class="hljs-type">UITableViewAutomaticDimension</span>
}
</code></pre>

<p>For label instance in UITableviewCell</p>

<ul>
<li>Set number of lines = 0 (&amp; line break mode = truncate tail)</li>
<li>Set all constraints (top, bottom, right left) with respect to its superview/ cell container.</li>
<li><em>Optional</em>: Set minimum height for label, if you want minimum vertical area covered by label, even if there is no data.</li>
</ul>

<p><img src="https://i.stack.imgur.com/T354s.png" alt="enter image description here"></p>

<p><strong>Note</strong>: If you've more than one labels (UIElements) with dynamic length, which should be adjusted according to its content size: Adjust 'Content Hugging and Compression Resistance Priority` for labels which you want to expand/compress with higher priority.</p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Like <a href="https://stackoverflow.com/users/287403/bob-spryn">@Bob-Spryn</a> I ran into an important enough gotcha that I'm posting this as an answer.</p>

<p>I struggled with <a href="https://stackoverflow.com/a/18746930/2591612">@smileyborg's</a> answer for a while. The gotcha that I ran into is if you've defined your prototype cell in IB with additional elements (<code>UILabels</code>, <code>UIButtons</code>, etc.) in IB when you instantiate the cell with [<code>[YourTableViewCellClass alloc] init]</code> it will not instantiate all the other elements within that cell unless you've written code to do that. (I had a similar experience with <code>initWithStyle</code>.)</p>

<p>To have the storyboard instantiate all the additional elements obtain your cell with <code>[tableView dequeueReusableCellWithIdentifier:@"DoseNeeded"]</code> (Not <code>[tableView dequeueReusableCellWithIdentifier:forIndexPath:]</code> as this'll cause interesting problems.) When you do this all the elements you defined in IB will be instantiated.</p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="http://www.raywenderlich.com/73602/dynamic-table-view-cell-height-auto-layout">Dynamic Table View Cell Height and Auto Layout</a></p>

<p>A good way to solve the problem with storyboard Auto Layout:</p>

<pre class="default s-code-block"><code class="hljs language-objectivec">- (<span class="hljs-built_in">CGFloat</span>)heightForImageCellAtIndexPath:(<span class="hljs-built_in">NSIndexPath</span> *)indexPath {
  <span class="hljs-keyword">static</span> RWImageCell *sizingCell = <span class="hljs-literal">nil</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">dispatch_once_t</span> onceToken;
  <span class="hljs-built_in">dispatch_once</span>(&amp;onceToken, ^{
    sizingCell = [<span class="hljs-keyword">self</span>.tableView dequeueReusableCellWithIdentifier:RWImageCellIdentifier];
  });

  [sizingCell setNeedsLayout];
  [sizingCell layoutIfNeeded];

  <span class="hljs-built_in">CGSize</span> size = [sizingCell.contentView systemLayoutSizeFittingSize:<span class="hljs-built_in">UILayoutFittingCompressedSize</span>];
  <span class="hljs-keyword">return</span> size.height;
}
</code></pre>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">tableView.estimatedRowHeight</span> = <span class="hljs-number">343.0</span>
<span class="hljs-attr">tableView.rowHeight</span> = UITableViewAutomaticDimension
</code></pre>

<p><a href="https://i.stack.imgur.com/Xa4V8.jpg"><img src="https://i.stack.imgur.com/Xa4V8.jpg" alt="enter image description here"></a></p>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Another "solution": skip all this frustration and use a UIScrollView instead to get a result that looks and feels identical to UITableView.</p>
<p>That was the painful "solution" for me, after having put in literally 20+ very frustrating hours total trying to build something like what smileyborg suggested and failing over many months and three versions of App Store releases.</p>
<p>My take is that if you really need iOS 7 support (for us, it's essential) then the technology is just too brittle and you'll pull your hair out trying. And that UITableView is complete overkill generally unless you're using some of the advanced row editing features and/or really need to support 1000+ "rows" (in our app, it's realistically never more than 20 rows).</p>
<p>The added bonus is that the code gets insanely simple versus all the delegate crap and back and forth that comes with UITableView. It's just one single loop of code in viewOnLoad that looks elegant and is easy to manage.</p>
<p>Here are some tips on how to do it:</p>
<ol>
<li><p>Using either Storyboard or a nib file, create a ViewController and associated root view.</p>
</li>
<li><p>Drag over a UIScrollView onto your root view.</p>
</li>
<li><p>Add constraints top, bottom, left, and right constraints to the top-level view so the UIScrollView fills the entire root view.</p>
</li>
<li><p>Add a UIView inside the UIScrollView and call it "container". Add top, bottom, left and right constraints to the UIScrollView (its parent). KEY TRICK: Also add an "Equal widths" constraint to link the UIScrollView and UIView.</p>
<p>NOTE: You will get an error "scroll view has ambiguous scrollable content height" and that your container UIView should have a height of 0 pixels. Neither error seems to matter when the app is running.</p>
</li>
<li><p>Create nib files and controllers for each of your "cells". Use UIView not UITableViewCell.</p>
</li>
<li><p>In your root ViewController, you essentially add all the "rows" to the container UIView and programmatically add constraints linking their left and right edges to the container view, their top edges to either the container view top (for the first item) or the previous cell. Then link the final cell to the container bottom.</p>
</li>
</ol>
<p>For us, each "row" is in a nib file. So the code looks something like this:</p>
<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">YourRootViewController</span> {

    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">var</span> container: <span class="hljs-type">UIView</span>! <span class="hljs-comment">//container mentioned in step 4</span>

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        
        <span class="hljs-keyword">super</span>.viewDidLoad()

        <span class="hljs-keyword">var</span> lastView: <span class="hljs-type">UIView</span>?
        <span class="hljs-keyword">for</span> data <span class="hljs-keyword">in</span> yourDataSource {

            <span class="hljs-keyword">var</span> cell <span class="hljs-operator">=</span> <span class="hljs-type">YourCellController</span>(nibName: <span class="hljs-string">"YourCellNibName"</span>, bundle: <span class="hljs-literal">nil</span>)
            <span class="hljs-type">UITools</span>.addViewToTop(container, child: cell.view, sibling: lastView)
            lastView <span class="hljs-operator">=</span> cell.view
            <span class="hljs-comment">//Insert code here to populate your cell</span>
        }

        <span class="hljs-keyword">if</span>(lastView <span class="hljs-operator">!=</span> <span class="hljs-literal">nil</span>) {
            container.addConstraint(<span class="hljs-type">NSLayoutConstraint</span>(
                item: lastView<span class="hljs-operator">!</span>,
                attribute: <span class="hljs-type">NSLayoutAttribute</span>.<span class="hljs-type">Bottom</span>,
                relatedBy: <span class="hljs-type">NSLayoutRelation</span>.<span class="hljs-type">Equal</span>,
                toItem: container,
                attribute: <span class="hljs-type">NSLayoutAttribute</span>.<span class="hljs-type">Bottom</span>,
                multiplier: <span class="hljs-number">1</span>,
                constant: <span class="hljs-number">0</span>))
        }

        <span class="hljs-comment">///Add a refresh control, if you want - it seems to work fine in our app:</span>
        <span class="hljs-keyword">var</span> refreshControl <span class="hljs-operator">=</span> <span class="hljs-type">UIRefreshControl</span>()
        container.addSubview(refreshControl<span class="hljs-operator">!</span>)
    }
}
</code></pre>
<p>And here's the code for UITools.addViewToTop:</p>
<pre class="default s-code-block"><code class="hljs language-haskell"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-type">UITools</span> {
    ///<span class="hljs-type">Add</span> child to container, full width of the container and directly under sibling (<span class="hljs-title">or</span> <span class="hljs-title">container</span> <span class="hljs-title">if</span> <span class="hljs-title">sibling</span> <span class="hljs-title">nil</span>):
    <span class="hljs-keyword">class</span> func addViewToTop(<span class="hljs-title">container</span>: <span class="hljs-type">UIView</span>, <span class="hljs-title">child</span>: <span class="hljs-type">UIView</span>, <span class="hljs-title">sibling</span>: <span class="hljs-type">UIView</span>? = <span class="hljs-title">nil</span>)
    {
        child.setTranslatesAutoresizingMaskIntoConstraints(<span class="hljs-title">false</span>)
        container.addSubview(<span class="hljs-title">child</span>)
        
        //<span class="hljs-type">Set</span> left and right constraints so fills full horz width:
        
        container.addConstraint(<span class="hljs-type">NSLayoutConstraint</span>(
            <span class="hljs-title">item</span>: <span class="hljs-title">child</span>,
            <span class="hljs-title">attribute</span>: <span class="hljs-type">NSLayoutAttribute</span>.<span class="hljs-type">Leading</span>,
            <span class="hljs-title">relatedBy</span>: <span class="hljs-type">NSLayoutRelation</span>.<span class="hljs-type">Equal</span>,
            <span class="hljs-title">toItem</span>: <span class="hljs-title">container</span>,
            <span class="hljs-title">attribute</span>: <span class="hljs-type">NSLayoutAttribute</span>.<span class="hljs-type">Left</span>,
            <span class="hljs-title">multiplier</span>: 1,
            <span class="hljs-title">constant</span>: 0))
        
        container.addConstraint(<span class="hljs-type">NSLayoutConstraint</span>(
            <span class="hljs-title">item</span>: <span class="hljs-title">child</span>,
            <span class="hljs-title">attribute</span>: <span class="hljs-type">NSLayoutAttribute</span>.<span class="hljs-type">Trailing</span>,
            <span class="hljs-title">relatedBy</span>: <span class="hljs-type">NSLayoutRelation</span>.<span class="hljs-type">Equal</span>,
            <span class="hljs-title">toItem</span>: <span class="hljs-title">container</span>,
            <span class="hljs-title">attribute</span>: <span class="hljs-type">NSLayoutAttribute</span>.<span class="hljs-type">Right</span>,
            <span class="hljs-title">multiplier</span>: 1,
            <span class="hljs-title">constant</span>: 0))
        
        //<span class="hljs-type">Set</span> vertical position from last item (<span class="hljs-title">or</span> <span class="hljs-title">for</span> <span class="hljs-title">first</span>, <span class="hljs-title">from</span> <span class="hljs-title">the</span> <span class="hljs-title">superview</span>):
        container.addConstraint(<span class="hljs-type">NSLayoutConstraint</span>(
            <span class="hljs-title">item</span>: <span class="hljs-title">child</span>,
            <span class="hljs-title">attribute</span>: <span class="hljs-type">NSLayoutAttribute</span>.<span class="hljs-type">Top</span>,
            <span class="hljs-title">relatedBy</span>: <span class="hljs-type">NSLayoutRelation</span>.<span class="hljs-type">Equal</span>,
            <span class="hljs-title">toItem</span>: <span class="hljs-title">sibling</span> == <span class="hljs-title">nil</span> ? <span class="hljs-title">container</span> : <span class="hljs-title">sibling</span>,
            <span class="hljs-title">attribute</span>: <span class="hljs-title">sibling</span> == <span class="hljs-title">nil</span> ? <span class="hljs-type">NSLayoutAttribute</span>.<span class="hljs-type">Top</span> : <span class="hljs-type">NSLayoutAttribute</span>.<span class="hljs-type">Bottom</span>,
            <span class="hljs-title">multiplier</span>: 1,
            <span class="hljs-title">constant</span>: 0))
    }
}
</span></code></pre>
<p>The only "gotcha" I've found with this approach so far is that UITableView has a nice feature of "floating" section headers at the top of the view as you scroll. The above solution won't do that unless you add more programming but for our particular case this feature wasn't 100% essential and nobody noticed when it went away.</p>
<p>If you want dividers between your cells, just add a 1 pixel high UIView at the bottom of your custom "cell" that looks like a divider.</p>
<p>Be sure to turn on "bounces" and "bounce vertically" for the refresh control to work and so it seems more like a tableview.</p>
<p>TableView shows some empty rows and dividers under your content, if it doesn't fill the full screen where as this solution doesn't. But personally, I prefer if those empty rows weren't there anyway - with variable cell height it always looked "buggy" to me anyway to have the empty rows in there.</p>
<p>Here's hoping some other programmer reads my post BEFORE wasting 20+ hours trying to figure it out with Table View in their own app. :)</p>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I had to use dynamic views (setup views and constraints by code) and when I wanted to set preferredMaxLayoutWidth label's width was 0. So I've got wrong cell height.</p>

<p>Then I added </p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-section">[cell layoutSubviews]</span><span class="hljs-comment">;</span>
</code></pre>

<p>before executing</p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-section">[cell setNeedsUpdateConstraints]</span><span class="hljs-comment">;</span>
<span class="hljs-section">[cell updateConstraintsIfNeeded]</span><span class="hljs-comment">;</span>
</code></pre>

<p>After that label's width was as expected and dynamic height was calculating right.</p>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Let's say you have a cell with a subview, and you want the cell's height to be high enough to encompass the subview + padding.</p>

<p>1) Set the subview's bottom constraint equal to the cell.contentView minus the padding you want. Do not set constraints on the cell or cell.contentView itself.</p>

<p>2) Set either the tableView's <code>rowHeight</code> property or <code>tableView:heightForRowAtIndexPath:</code> to <code>UITableViewAutomaticDimension</code>.</p>

<p>3) Set either the tableView's <code>estimatedRowHeight</code> property or <code>tableView:estimatedHeightForRowAtIndexPath:</code> to a best guess of the height.</p>

<p>That's it.</p>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you do you layout programmatically, here is what to consider for iOS 10 using anchors in Swift.</p>

<p>There are three rules/ steps</p>

<p>NUMBER 1: set this two properties of tableview on viewDidLoad, the first one is telling to the tableview that should expect dynamic sizes on their cells, the second one is just to let the app calculate the size of the scrollbar indicator, so it helps for performance.</p>

<pre class="default s-code-block"><code class="hljs language-ini">    <span class="hljs-attr">tableView.rowHeight</span> = UITableViewAutomaticDimension
    <span class="hljs-attr">tableView.estimatedRowHeight</span> = <span class="hljs-number">100</span>
</code></pre>

<p>NUMBER 2: This is important you need to add the subviews to the contentView of the cell not to the view, and also use its layoutsmarginguide to anchor the subviews to the top and bottom, this is a working example of how to do it.</p>

<pre class="default s-code-block"><code class="hljs language-php">override <span class="hljs-title function_ invoke__">init</span>(<span class="hljs-attr">style</span>: UITableViewCellStyle, <span class="hljs-attr">reuseIdentifier</span>: String?) {
    super.<span class="hljs-title function_ invoke__">init</span>(<span class="hljs-attr">style</span>: style, <span class="hljs-attr">reuseIdentifier</span>: reuseIdentifier)
    <span class="hljs-title function_ invoke__">setUpViews</span>()
}

<span class="hljs-keyword">private</span> func <span class="hljs-title function_ invoke__">setUpViews</span>() {

    contentView.<span class="hljs-title function_ invoke__">addSubview</span>(movieImageView)
    contentView.<span class="hljs-title function_ invoke__">addSubview</span>(descriptionLabel)
    let marginGuide = contentView.layoutMarginsGuide

    NSLayoutConstraint.<span class="hljs-title function_ invoke__">activate</span>([
        movieImageView.heightAnchor.<span class="hljs-title function_ invoke__">constraint</span>(<span class="hljs-attr">equalToConstant</span>: <span class="hljs-number">80</span>),
        movieImageView.widthAnchor.<span class="hljs-title function_ invoke__">constraint</span>(<span class="hljs-attr">equalToConstant</span>: <span class="hljs-number">80</span>),
        movieImageView.leftAnchor.<span class="hljs-title function_ invoke__">constraint</span>(<span class="hljs-attr">equalTo</span>: marginGuide.leftAnchor),
        movieImageView.topAnchor.<span class="hljs-title function_ invoke__">constraint</span>(<span class="hljs-attr">equalTo</span>: marginGuide.topAnchor, <span class="hljs-attr">constant</span>: <span class="hljs-number">20</span>),

        descriptionLabel.leftAnchor.<span class="hljs-title function_ invoke__">constraint</span>(<span class="hljs-attr">equalTo</span>: movieImageView.rightAnchor, <span class="hljs-attr">constant</span>: <span class="hljs-number">15</span>),
        descriptionLabel.rightAnchor.<span class="hljs-title function_ invoke__">constraint</span>(<span class="hljs-attr">equalTo</span>: marginGuide.rightAnchor),
        descriptionLabel.bottomAnchor.<span class="hljs-title function_ invoke__">constraint</span>(<span class="hljs-attr">equalTo</span>: marginGuide.bottomAnchor, <span class="hljs-attr">constant</span>: -<span class="hljs-number">15</span>),
        descriptionLabel.topAnchor.<span class="hljs-title function_ invoke__">constraint</span>(<span class="hljs-attr">equalTo</span>: movieImageView.topAnchor)

        ])
}
</code></pre>

<p>Create a method that will add the subviews and perform the layout, call it in the init method. </p>

<p>NUMBER 3: DON'T CALL THE METHOD:</p>

<pre class="default s-code-block"><code class="hljs language-swift">  <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">heightForRowAt</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">IndexPath</span>) -&gt; <span class="hljs-type">CGFloat</span> {
    }
</code></pre>

<p>If you do it you will override your implementation.</p>

<p>Follow this 3 rules for dynamic cells in tableviews.</p>

<p>here is a working implementation 
<a href="https://github.com/jamesrochabrun/MinimalViewController" rel="noreferrer">https://github.com/jamesrochabrun/MinimalViewController</a></p>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you have a <strong>long</strong> string. e.g. one which <strong>doesn't</strong> have a line break. Then you you might run into some problems.</p>

<p>The "alleged" fix is mentioned by the accepted answer and few other answers. You just need to add</p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">cell.myCellLabel.preferredMaxLayoutWidth</span> = tableView.bounds.width
</code></pre>

<p>I find <a href="https://stackoverflow.com/a/36422189/5175709">Suragh's answer</a> the most complete and <strong>concise</strong>, hence not confusing. </p>

<p>Though non explain <strong>why</strong> these changes are needed. Let's do that. </p>

<p>Drop the following code in to a project. </p>

<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-keyword">import</span> UIKit

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIViewController</span> {

    <span class="hljs-keyword">lazy</span> <span class="hljs-keyword">var</span> label : <span class="hljs-type">UILabel</span> <span class="hljs-operator">=</span> {
        <span class="hljs-keyword">let</span> lbl <span class="hljs-operator">=</span> <span class="hljs-type">UILabel</span>()
        lbl.translatesAutoresizingMaskIntoConstraints <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
        lbl.backgroundColor <span class="hljs-operator">=</span> .red
        lbl.textColor <span class="hljs-operator">=</span> .black
        <span class="hljs-keyword">return</span> lbl
    }()

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()
        <span class="hljs-comment">// step0: (0.0, 0.0)</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"empty Text intrinsicContentSize: <span class="hljs-subst">\(label.intrinsicContentSize)</span>"</span>)
        <span class="hljs-comment">// ----------</span>
        <span class="hljs-comment">// step1: (29.0, 20.5)</span>
        label.text <span class="hljs-operator">=</span> <span class="hljs-string">"hiiiii"</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"hiiiii intrinsicContentSize: <span class="hljs-subst">\(label.intrinsicContentSize)</span>"</span>)
        <span class="hljs-comment">// ----------</span>
        <span class="hljs-comment">// step2: (328.0, 20.5)</span>
        label.text <span class="hljs-operator">=</span> <span class="hljs-string">"translatesAutoresizingMaskIntoConstraints"</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"1 translate intrinsicContentSize: <span class="hljs-subst">\(label.intrinsicContentSize)</span>"</span>)
        <span class="hljs-comment">// ----------</span>
        <span class="hljs-comment">// step3: (992.0, 20.5)</span>
        label.text <span class="hljs-operator">=</span> <span class="hljs-string">"translatesAutoresizingMaskIntoConstraints translatesAutoresizingMaskIntoConstraints translatesAutoresizingMaskIntoConstraints"</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"3 translate intrinsicContentSize: <span class="hljs-subst">\(label.intrinsicContentSize)</span>"</span>)
        <span class="hljs-comment">// ----------</span>
        <span class="hljs-comment">// step4: (328.0, 20.5)</span>
        label.text <span class="hljs-operator">=</span> <span class="hljs-string">"translatesAutoresizingMaskIntoConstraints<span class="hljs-subst">\n</span>translatesAutoresizingMaskIntoConstraints<span class="hljs-subst">\n</span>translatesAutoresizingMaskIntoConstraints"</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"3 translate w/ line breaks (but the line breaks get ignored, because numberOfLines is defaulted to `1` and it will force it all to fit into one line! intrinsicContentSize: <span class="hljs-subst">\(label.intrinsicContentSize)</span>"</span>)
        <span class="hljs-comment">// ----------</span>
        <span class="hljs-comment">// step5: (328.0, 61.0)</span>
        label.numberOfLines <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"3 translate w/ line breaks and '0' numberOfLines intrinsicContentSize: <span class="hljs-subst">\(label.intrinsicContentSize)</span>"</span>)
        <span class="hljs-comment">// ----------</span>
        <span class="hljs-comment">// step6: (98.5, 243.5)</span>
        label.preferredMaxLayoutWidth <span class="hljs-operator">=</span> <span class="hljs-number">100</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"3 translate w/ line breaks | '0' numberOfLines | preferredMaxLayoutWidth: 100 intrinsicContentSize: <span class="hljs-subst">\(label.intrinsicContentSize)</span>"</span>)

        setupLayout()
    }
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">setupLayout</span>(){
        view.addSubview(label)
        label.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
        label.centerYAnchor.constraint(equalTo: view.centerYAnchor).isActive <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
    }
}
</code></pre>

<p>Note that I haven't added any <em>size</em> constraints. I've only added centerX, centerY constraints. But still the label will be sized correctly Why? </p>

<p><strong>Because of <code>contentSize</code>.</strong></p>

<p>To better process this, first keep step0, then comment out out steps 1-6. Let <code>setupLayout()</code> stay. Observe the behavior. </p>

<p>Then uncomment step1, and observe.</p>

<p>Then uncomment step2 and observe. </p>

<p>Do this until you've uncommented all 6 steps and observed their behaviors. </p>

<h1>What can conclude from all this? What factors can change the <code>contenSize</code>?</h1>

<ol>
<li><strong>Text Length:</strong> If you have a longer text then your intrinsicContentSize's <em>width</em> will increase</li>
<li><strong>Line breaks:</strong> If you add <code>\n</code> then the intrinsicContentSize's width will the maximum width of all lines. If one line has 25 characters, another has 2 characters and another has 21 characters then your width will be calculated based the 25 characters</li>
<li><strong>Number of allowed lines:</strong> You must set the <code>numberOfLines</code> to <code>0</code> otherwise the you won't have multiple lines. Your <code>numberOfLines</code> will adjust your intrinsicContentSize's <em>height</em></li>
<li><p><strong>Making adjustments:</strong> Imagine that based on your text, your intrinsicContentSize's width was <code>200</code> and height was <code>100</code>, but you wanted to limited the width to the label's container what are you going to do? The solution is to set it to a desired width. You do that by setting <a href="https://developer.apple.com/documentation/uikit/uilabel/1620534-preferredmaxlayoutwidth" rel="nofollow noreferrer"><code>preferredMaxLayoutWidth</code></a> to <code>130</code> then your new intrinsicContentSize will have a width of roughly <code>130</code>. The height would obviously be more than <code>100</code> because you'd need more lines. 
That being said if your constraints are set correctly then you won't need to use this at all! For more on that see <a href="https://stackoverflow.com/a/52709988/5175709">this answer</a> and its comments. You only need to use <code>preferredMaxLayoutWidth</code> if you don't have constraints restricting the width/height as in one might say "don't wrap the text unless it exceeds the <code>preferredMaxLayoutWidth</code>". But with 100% certainty if you set the leading/trailing and <code>numberOfLines</code> to <code>0</code> then you're good! <strong>Long story short most answers here which recommend using it are WRONG! You don't need it. Needing it is a sign that your constraints are not set correctly or that you just don't have constraints</strong></p></li>
<li><p><strong>Font Size:</strong> Also note that if you increase your fontSize then the intrinsicContentSize's <em>height</em> will increase. I didn't show that in my code. You can try that on your own.</p></li>
</ol>

<p><strong>So back to your tableViewCell example:</strong> </p>

<p>All you need to do is:</p>

<ul>
<li>set the <code>numberOfLines</code> to <code>0</code></li>
<li>constrain the label correctly to the margins/edges</li>
<li>There is no need to set <code>preferredMaxLayoutWidth</code>.</li>
</ul>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In my case i have to create a custom cell with a image which is coming from server and can be of any width and height. And two UILabels with dynamic size(both width &amp; height)</p>

<p>i have achieved the same here in my answer with autolayout and programmatically:</p>

<p>Basically above @smileyBorg answer helped but systemLayoutSizeFittingSize never worked for me, In my approach :</p>

<p><em>1. No use of automatic row height calculation property. 2.No use of estimated height 3.No need of unnecessary updateConstraints. 4.No use of Automatic Preferred Max Layout Width. 5. No use of <strong>systemLayoutSizeFittingSize</strong> (should have use but not working for me, i dont know what it is doing internally), but instead my method -(float)getViewHeight working and i know what it's doing internally.</em></p>

<p><a href="https://stackoverflow.com/questions/37235605/is-it-possible-to-have-differing-heights-in-a-uitableview-cell-when-i-use-severa/37236303#37236303">Is it possible to have differing heights in a UITableView Cell when I use several different ways of displaying the cell?</a></p>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 21</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In my case, the padding was because of the sectionHeader and sectionFooter heights, where storyboard allowed me to change it to minimum 1. So in viewDidLoad method:</p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">tableView.sectionHeaderHeight</span> = <span class="hljs-number">0</span>
<span class="hljs-attr">tableView.sectionFooterHeight</span> = <span class="hljs-number">0</span>
</code></pre>
    </div></div></div></div><div id="solution22" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 22</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I just did some dumb try and error with the 2 values of <code>rowHeight</code> and <code>estimatedRowHeight</code> and just thought it might provide some debugging insight:</p>

<p>If you set them both OR only set the <code>estimatedRowHeight</code> you will get the desired behavior:</p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">tableView.rowHeight</span> = UITableViewAutomaticDimension
<span class="hljs-attr">tableView.estimatedRowHeight</span> = <span class="hljs-number">1.00001</span> // MUST be greater than <span class="hljs-number">1</span>
</code></pre>

<p>It's suggested that you do your best to get the correct estimate, but the end result isn't different. It will just affect your performance.</p>

<p><a href="https://i.stack.imgur.com/b8pfSl.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/b8pfSl.png" alt="enter image description here"></a></p>

<hr>

<p>If you only set the rowHeight ie only do:</p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">tableView.rowHeight</span> = UITableViewAutomaticDimension
</code></pre>

<p>your end result would not be as desired:</p>

<p><a href="https://i.stack.imgur.com/koQnPl.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/koQnPl.png" alt="enter image description here"></a> </p>

<hr>

<p>If you set the <code>estimatedRowHeight</code> to 1 or smaller then you will <strong>crash</strong> regardless of the <code>rowHeight</code>. </p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">tableView.rowHeight</span> = UITableViewAutomaticDimension
<span class="hljs-attr">tableView.estimatedRowHeight</span> = <span class="hljs-number">1</span> 
</code></pre>

<p>I crashed with the following error message:</p>

<pre class="default s-code-block"><code class="hljs language-delphi">Terminating app due <span class="hljs-keyword">to</span> uncaught exception
<span class="hljs-string">'NSInternalInconsistencyException'</span>, reason: <span class="hljs-string">'table view row height
must not be negative - provided height for index path (&lt;NSIndexPath:
0xc000000000000016&gt; {length = 2, path = 0 - 0}) is -1.000000'</span>
    ...some other lines...

libc++abi.dylib: terminating <span class="hljs-keyword">with</span> uncaught exception <span class="hljs-keyword">of</span> <span class="hljs-keyword">type</span>
NSException
</code></pre>
    </div></div></div></div><div id="solution23" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 23</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>With regard to the accepted answer by @smileyborg, I have found</p>

<pre class="default s-code-block"><code class="hljs language-csharp">[<span class="hljs-meta">cell.contentView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize</span>]
</code></pre>

<p>to be unreliable in some cases where constraints are ambiguous.  Better to force the layout engine to calculate the height in one direction, by using the helper category on UIView below:</p>

<pre class="default s-code-block"><code class="hljs language-objectivec">-(<span class="hljs-built_in">CGFloat</span>)systemLayoutHeightForWidth:(<span class="hljs-built_in">CGFloat</span>)w{
    [<span class="hljs-keyword">self</span> setNeedsLayout];
    [<span class="hljs-keyword">self</span> layoutIfNeeded];
    <span class="hljs-built_in">CGSize</span> size = [<span class="hljs-keyword">self</span> systemLayoutSizeFittingSize:<span class="hljs-built_in">CGSizeMake</span>(w, <span class="hljs-number">1</span>) withHorizontalFittingPriority:<span class="hljs-built_in">UILayoutPriorityRequired</span> verticalFittingPriority:<span class="hljs-built_in">UILayoutPriorityFittingSizeLevel</span>];
    <span class="hljs-built_in">CGFloat</span> h = size.height;
    <span class="hljs-keyword">return</span> h;
}
</code></pre>

<p>Where w: is the width of the tableview</p>
    </div></div></div></div><div id="solution24" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 24</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Simply add these two functions in your viewcontroller it will solve your problem. Here, list is a string array which contain your string of every row.</p>

<pre class="default s-code-block"><code class="hljs language-swift"> <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, 
   <span class="hljs-params">estimatedHeightForRowAt</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">IndexPath</span>) -&gt; <span class="hljs-type">CGFloat</span> {
        tableView.rowHeight <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.calculateHeight(inString: list[indexPath.row])

    <span class="hljs-keyword">return</span> (tableView.rowHeight) 
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">calculateHeight</span>(<span class="hljs-params">inString</span>:<span class="hljs-type">String</span>) -&gt; <span class="hljs-type">CGFloat</span>
{
    <span class="hljs-keyword">let</span> messageString <span class="hljs-operator">=</span> input.text
    <span class="hljs-keyword">let</span> attributes : [<span class="hljs-type">NSAttributedStringKey</span> : <span class="hljs-keyword">Any</span>] <span class="hljs-operator">=</span> [<span class="hljs-type">NSAttributedStringKey</span>(rawValue: <span class="hljs-type">NSAttributedStringKey</span>.font.rawValue) : <span class="hljs-type">UIFont</span>.systemFont(ofSize: <span class="hljs-number">15.0</span>)]

    <span class="hljs-keyword">let</span> attributedString : <span class="hljs-type">NSAttributedString</span> <span class="hljs-operator">=</span> <span class="hljs-type">NSAttributedString</span>(string: messageString<span class="hljs-operator">!</span>, attributes: attributes)

    <span class="hljs-keyword">let</span> rect : <span class="hljs-type">CGRect</span> <span class="hljs-operator">=</span> attributedString.boundingRect(with: <span class="hljs-type">CGSize</span>(width: <span class="hljs-number">222.0</span>, height: <span class="hljs-type">CGFloat</span>.greatestFiniteMagnitude), options: .usesLineFragmentOrigin, context: <span class="hljs-literal">nil</span>)

    <span class="hljs-keyword">let</span> requredSize:<span class="hljs-type">CGRect</span> <span class="hljs-operator">=</span> rect
    <span class="hljs-keyword">return</span> requredSize.height
}
</code></pre>
    </div></div></div></div><div id="solution25" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 25</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="default s-code-block"><code class="hljs language-swift">swift <span class="hljs-number">4</span>

    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> tableViewHeightConstraint: <span class="hljs-type">NSLayoutConstraint</span>!
    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> tableView: <span class="hljs-type">UITableView</span>!
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> context <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
 <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()

        <span class="hljs-keyword">self</span>.tableView.addObserver(<span class="hljs-keyword">self</span>, forKeyPath: <span class="hljs-string">"contentSize"</span>, options: [.new,.prior], context: <span class="hljs-operator">&amp;</span>context)
    }
  <span class="hljs-comment">// Added observer to adjust tableview height based on the content</span>

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">observeValue</span>(<span class="hljs-params">forKeyPath</span> <span class="hljs-params">keyPath</span>: <span class="hljs-type">String</span>?, <span class="hljs-params">of</span> <span class="hljs-params">object</span>: <span class="hljs-keyword">Any</span><span class="hljs-operator">?</span>, <span class="hljs-params">change</span>: [<span class="hljs-params">NSKeyValueChangeKey</span> : <span class="hljs-keyword">Any</span>]<span class="hljs-operator">?</span>, <span class="hljs-params">context</span>: <span class="hljs-type">UnsafeMutableRawPointer</span>?) {
        <span class="hljs-keyword">if</span> context <span class="hljs-operator">==</span> <span class="hljs-operator">&amp;</span><span class="hljs-keyword">self</span>.context{
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> size <span class="hljs-operator">=</span> change<span class="hljs-operator">?</span>[<span class="hljs-type">NSKeyValueChangeKey</span>.newKey] <span class="hljs-keyword">as?</span> <span class="hljs-type">CGSize</span>{
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"-----"</span>)
                <span class="hljs-built_in">print</span>(size.height)
                tableViewHeightConstraint.constant <span class="hljs-operator">=</span> size.height <span class="hljs-operator">+</span> <span class="hljs-number">50</span>
            }
        }
    }

<span class="hljs-comment">//Remove observer</span>
 <span class="hljs-keyword">deinit</span> {

        <span class="hljs-type">NotificationCenter</span>.default.removeObserver(<span class="hljs-keyword">self</span>)

    }
</code></pre>
    </div></div></div></div><div id="solution26" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 26</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If the cell height is dynamic by the content, you should precisely count it out and then return the height value before the cell is rendered. An easy way is to define the counting method in the table view cell code for controller to call at the table cell height delegate method. Don't forget to count out the <strong>real cell frame width</strong> (default is 320) if the height is rely on the width of the table or screen. That is, <strong>in the table cell height delegate method, use cell.frame to correct the cell width first, then call the counting height method defined in the cell to get the suitable value and return it</strong>. </p>

<p>PS. The code for generating cell object could be defined in another method for different table view cell delegate method to call.</p>
    </div></div></div></div><div id="solution27" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 27</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><code>UITableView.automaticDimension</code> can be set via Interface Builder:</p>

<p>Xcode &gt; Storyboard &gt; Size Inspector</p>

<p>Table View Cell &gt; Row Height &gt; <strong>Automatic</strong></p>

<p><a href="https://i.stack.imgur.com/FsczL.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/FsczL.png" alt="Size Inspector"></a></p>
    </div></div></div></div><div id="solution28" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 28</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/uitableview">uitableview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/autolayout">autolayout</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/row-height">row-height</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>yet another iOs7+iOs8 solution in Swift</p>

<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-keyword">var</span> cell2height:<span class="hljs-type">CGFloat</span><span class="hljs-operator">=</span><span class="hljs-number">44</span>

<span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
    <span class="hljs-keyword">super</span>.viewDidLoad()
    theTable.rowHeight <span class="hljs-operator">=</span> <span class="hljs-type">UITableViewAutomaticDimension</span>
    theTable.estimatedRowHeight <span class="hljs-operator">=</span> <span class="hljs-number">44.0</span>;
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">cellForRowAtIndexPath</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">NSIndexPath</span>) -&gt; <span class="hljs-type">UITableViewCell</span> {
    <span class="hljs-keyword">let</span> cell <span class="hljs-operator">=</span>  tableView.dequeueReusableCellWithIdentifier(<span class="hljs-string">"myTableViewCell"</span>, forIndexPath: indexPath) <span class="hljs-keyword">as!</span> myTableViewCell
    cell2height<span class="hljs-operator">=</span>cell.contentView.height
    <span class="hljs-keyword">return</span> cell
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">heightForRowAtIndexPath</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">NSIndexPath</span>) -&gt; <span class="hljs-type">CGFloat</span> {
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">#available</span>(<span class="hljs-keyword">iOS</span> <span class="hljs-number">8.0</span>, <span class="hljs-operator">*</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-type">UITableViewAutomaticDimension</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> cell2height
    }
}
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-to-add-to-the-pythonpath-in-windows-so-it-finds-my-modulespackages-1657388540360">How to add to the PYTHONPATH in Windows, so it finds my modules/packages?</a><a href="/questions/how-to-get-all-possible-combinations-of-a-list&#x27;s-elements-1657388271070">How to get all possible combinations of a lists elements?</a><a href="/questions/what-is-__init__.py-for-1657388415243">What is __init__.py for?</a><a href="/questions/why-is-using-the-javascript-eval-function-a-bad-idea-1657387485165">Why is using the JavaScript eval function a bad idea?</a><a href="/questions/how-do-i-clone-a-list-so-that-it-doesn&#x27;t-change-unexpectedly-after-assignment-1657384423195">How do I clone a list so that it doesn&#x27;t change unexpectedly after assignment?</a><a href="/questions/how-should-i-use-servlets-and-ajax-1657385492684">How should I use servlets and Ajax?</a><a href="/questions/where-can-i-find-documentation-on-formatting-a-date-in-javascript-1657384878157">Where can I find documentation on formatting a date in JavaScript?</a><a href="/questions/what-is-the-difference-between-%22px%22-%22dip%22-%22dp%22-and-%22sp%22-1657388093250">What is the difference between &quot;px&quot;, &quot;dip&quot;, &quot;dp&quot; and &quot;sp&quot;?</a><a href="/questions/how-to-filter-pandas-dataframe-using-&#x27;in&#x27;-and-&#x27;not-in&#x27;-like-in-sql-1657387371355">How to filter Pandas dataframe using &#x27;in&#x27; and &#x27;not in&#x27; like in SQL</a><a href="/questions/how-can-i-avoid-java-code-in-jsp-files-using-jsp-2-1657384618866">How can I avoid Java code in JSP files, using JSP 2?</a><a href="/questions/how-to-return-datasnapshot-value-as-a-result-of-a-method-1657387538165">How to return DataSnapshot value as a result of a method?</a><a href="/questions/how-to-deal-with-mysqli-problems-mysqli_fetch_array():-argument-1-must-be-of-type-mysqli_result-1657384360922">How to deal with mysqli problems? mysqli_fetch_array(): Argument #1 must be of type mysqli_result</a><a href="/questions/how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-1657387250909">How do I set a variable to the output of a command in Bash?</a><a href="/questions/how-do-i-use-shell-variables-in-an-awk-script-1657387754261">How do I use shell variables in an awk script?</a><a href="/questions/php-parsesyntax-errors-and-how-to-solve-them-1657384264713">PHP parse/syntax errors; and how to solve them</a><a href="/questions/how-to-create-a-guid-uuid-1657387749530">How to create a GUID / UUID</a><a href="/questions/flexbox:-center-horizontally-and-vertically-1657384587888">Flexbox: center horizontally and vertically</a><a href="/questions/how-to-use-php&#x27;s-password_hash-to-hash-and-verify-passwords-1657387808784">How to use PHP&#x27;s password_hash to hash and verify passwords</a><a href="/questions/why-is-24.0000-not-equal-to-24.0000-in-matlab-1657388376753">Why is 24.0000 not equal to 24.0000 in MATLAB?</a><a href="/questions/how-do-i-profile-a-python-script-1657388346692">How do I profile a Python script?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;TL;DR:\u0026lt;/strong\u0026gt; Don\u0026apos;t like reading? Jump straight to the sample projects on GitHub:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/smileyborg/TableViewCellWithAutoLayoutiOS8\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;iOS 8 Sample Project\u0026lt;/a\u0026gt; - Requires iOS 8\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/smileyborg/TableViewCellWithAutoLayout\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;iOS 7 Sample Project\u0026lt;/a\u0026gt; - Works on iOS 7+\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h1\u0026gt;Conceptual Description\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;The first 2 steps below are applicable regardless of which iOS versions you are developing for.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;1. Set Up \u0026amp;amp; Add Constraints\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;In your \u0026lt;code\u0026gt;UITableViewCell\u0026lt;/code\u0026gt; subclass, add constraints so that the subviews of the cell have their edges pinned to the edges of the cell\u0026apos;s \u0026lt;strong\u0026gt;contentView\u0026lt;/strong\u0026gt; (most importantly to the top AND bottom edges). \u0026lt;strong\u0026gt;NOTE: don\u0026apos;t pin subviews to the cell itself; only to the cell\u0026apos;s \u0026lt;code\u0026gt;contentView\u0026lt;/code\u0026gt;!\u0026lt;/strong\u0026gt; Let the intrinsic content size of these subviews drive the height of the table view cell\u0026apos;s content view by making sure the \u0026lt;em\u0026gt;content compression resistance\u0026lt;/em\u0026gt; and \u0026lt;em\u0026gt;content hugging\u0026lt;/em\u0026gt; constraints in the vertical dimension for each subview are not being overridden by higher-priority constraints you have added. (\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/22599069/what-is-the-content-compression-resistance-and-content-hugging-of-a-uiview\u0026quot;\u0026gt;Huh? Click here.\u0026lt;/a\u0026gt;)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Remember, the idea is to have the cell\u0026apos;s subviews connected vertically to the cell\u0026apos;s content view so that they can \u0026quot;exert pressure\u0026quot; and make the content view expand to fit them. Using an example cell with a few subviews, here is a visual illustration of what \u0026lt;strong\u0026gt;some\u0026lt;/strong\u0026gt; \u0026lt;em\u0026gt;(not all!)\u0026lt;/em\u0026gt; of your constraints would need to look like:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/CTUPi.png\u0026quot; alt=\u0026quot;Example illustration of constraints on a table view cell.\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You can imagine that as more text is added to the multi-line body label in the example cell above, it will need to grow vertically to fit the text, which will effectively force the cell to grow in height. (Of course, you need to get the constraints right in order for this to work correctly!)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Getting your constraints right is definitely the \u0026lt;strong\u0026gt;hardest and most important part\u0026lt;/strong\u0026gt; of getting dynamic cell heights working with Auto Layout. If you make a mistake here, it could prevent everything else from working -- so take your time! I recommend setting up your constraints in code because you know exactly which constraints are being added where, and it\u0026apos;s a lot easier to debug when things go wrong. Adding constraints in code can be just as easy as and significantly more powerful than Interface Builder using layout anchors, or one of the fantastic open source APIs available on GitHub.\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;If you\u0026apos;re adding constraints in code, you should do this once from within the \u0026lt;code\u0026gt;updateConstraints\u0026lt;/code\u0026gt; method of your UITableViewCell subclass. Note that \u0026lt;code\u0026gt;updateConstraints\u0026lt;/code\u0026gt; may be called more than once, so to avoid adding the same constraints more than once, make sure to wrap your constraint-adding code within \u0026lt;code\u0026gt;updateConstraints\u0026lt;/code\u0026gt; in a check for a boolean property such as \u0026lt;code\u0026gt;didSetupConstraints\u0026lt;/code\u0026gt; (which you set to YES after you run your constraint-adding code once). On the other hand, if you have code that updates existing constraints (such as adjusting the \u0026lt;code\u0026gt;constant\u0026lt;/code\u0026gt; property on some constraints), place this in \u0026lt;code\u0026gt;updateConstraints\u0026lt;/code\u0026gt; but outside of the check for \u0026lt;code\u0026gt;didSetupConstraints\u0026lt;/code\u0026gt; so it can run every time the method is called.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;2. Determine Unique Table View Cell Reuse Identifiers\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;For every unique set of constraints in the cell, use a unique cell reuse identifier. In other words, if your cells have more than one unique layout, each unique layout should receive its own reuse identifier. (A good hint that you need to use a new reuse identifier is when your cell variant has a different number of subviews, or the subviews are arranged in a distinct fashion.)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For example, if you were displaying an email message in each cell, you might have 4 unique layouts: messages with just a subject, messages with a subject and a body, messages with a subject and a photo attachment, and messages with a subject, body, and photo attachment. Each layout has completely different constraints required to achieve it, so once the cell is initialized and the constraints are added for one of these cell types, the cell should get a unique reuse identifier specific to that cell type. This means when you dequeue a cell for reuse, the constraints have already been added and are ready to go for that cell type.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Note that due to differences in intrinsic content size, cells with the same constraints (type) may still have varying heights! Don\u0026apos;t confuse fundamentally different layouts (different constraints) with different calculated view frames (solved from identical constraints) due to different sizes of content.\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Do not add cells with completely different sets of constraints to the same reuse pool (i.e. use the same reuse identifier) and then attempt to remove the old constraints and set up  new constraints from scratch after each dequeue. The internal Auto Layout engine is not designed to handle large scale changes in constraints, and you will see massive performance issues.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;For iOS 8 - Self-Sizing Cells\u0026lt;/h2\u0026gt;\n\u0026lt;h3\u0026gt;3. Enable Row Height Estimation\u0026lt;/h3\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;To enable self-sizing table view cells, you must set the table views\nrowHeight property to UITableViewAutomaticDimension. You must also\nassign a value to the estimatedRowHeight property. As soon as both of\nthese properties are set, the system uses Auto Layout to calculate the\nrows actual height\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;sub\u0026gt;Apple: \u0026lt;a href=\u0026quot;https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/WorkingwithSelf-SizingTableViewCells.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Working with Self-Sizing Table View Cells\u0026lt;/a\u0026gt;\u0026lt;/sub\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;With iOS 8, Apple has internalized much of the work that previously had to be implemented by you prior to iOS 8. In order to allow the self-sizing cell mechanism to work, you must first set the \u0026lt;code\u0026gt;rowHeight\u0026lt;/code\u0026gt; property on the table view to the constant \u0026lt;code\u0026gt;UITableView.automaticDimension\u0026lt;/code\u0026gt;. Then, you simply need to enable row height estimation by setting the table view\u0026apos;s \u0026lt;code\u0026gt;estimatedRowHeight\u0026lt;/code\u0026gt; property to a nonzero value, for example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;self.tableView.rowHeight\u0026lt;/span\u0026gt; = UITableView.automaticDimension\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;self.tableView.estimatedRowHeight\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;44.0\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;; // set to whatever your \u0026quot;average\u0026quot; cell height is\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;What this does is provide the table view with a temporary estimate/placeholder for the row heights of cells that are not yet onscreen. Then, when these cells are about to scroll on screen, the actual row height will be calculated. To determine the actual height for each row, the table view automatically asks each cell what height its \u0026lt;code\u0026gt;contentView\u0026lt;/code\u0026gt; needs to be based on the known fixed width of the content view (which is based on the table view\u0026apos;s width, minus any additional things like a section index or accessory view) and the auto layout constraints you have added to the cell\u0026apos;s content view and subviews. Once this actual cell height has been determined, the old estimated height for the row is updated with the new actual height (and any adjustments to the table view\u0026apos;s contentSize/contentOffset are made as needed for you).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Generally speaking, the estimate you provide doesn\u0026apos;t have to be very accurate -- it is only used to correctly size the scroll indicator in the table view, and the table view does a good job of adjusting the scroll indicator for incorrect estimates as you scroll cells onscreen. You should set the \u0026lt;code\u0026gt;estimatedRowHeight\u0026lt;/code\u0026gt; property on the table view (in \u0026lt;code\u0026gt;viewDidLoad\u0026lt;/code\u0026gt; or similar) to a constant value that is the \u0026quot;average\u0026quot; row height. \u0026lt;em\u0026gt;Only if your row heights have extreme variability (e.g. differ by an order of magnitude) and you notice the scroll indicator \u0026quot;jumping\u0026quot; as you scroll should you bother implementing \u0026lt;code\u0026gt;tableView:estimatedHeightForRowAtIndexPath:\u0026lt;/code\u0026gt; to do the minimal calculation required to return a more accurate estimate for each row.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;For iOS 7 support (implementing auto cell sizing yourself)\u0026lt;/h2\u0026gt;\n\u0026lt;h3\u0026gt;3. Do a Layout Pass \u0026amp;amp; Get The Cell Height\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;First, instantiate an offscreen instance of a table view cell, \u0026lt;em\u0026gt;one instance for each reuse identifier\u0026lt;/em\u0026gt;, that is used strictly for height calculations. (Offscreen meaning the cell reference is stored in a property/ivar on the view controller and never returned from \u0026lt;code\u0026gt;tableView:cellForRowAtIndexPath:\u0026lt;/code\u0026gt; for the table view to actually render onscreen.) Next, the cell must be configured with the exact content (e.g. text, images, etc) that it would hold if it were to be displayed in the table view.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Then, force the cell to immediately layout its subviews, and then use the \u0026lt;code\u0026gt;systemLayoutSizeFittingSize:\u0026lt;/code\u0026gt; method on the \u0026lt;code\u0026gt;UITableViewCell\u0026lt;/code\u0026gt;\u0026apos;s \u0026lt;code\u0026gt;contentView\u0026lt;/code\u0026gt; to find out what the required height of the cell is. Use \u0026lt;code\u0026gt;UILayoutFittingCompressedSize\u0026lt;/code\u0026gt; to get the smallest size required to fit all the contents of the cell. The height can then be returned from the \u0026lt;code\u0026gt;tableView:heightForRowAtIndexPath:\u0026lt;/code\u0026gt; delegate method.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;4. Use Estimated Row Heights\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;If your table view has more than a couple dozen rows in it, you will find that doing the Auto Layout constraint solving can quickly bog down the main thread when first loading the table view, as \u0026lt;code\u0026gt;tableView:heightForRowAtIndexPath:\u0026lt;/code\u0026gt; is called on each and every row upon first load (in order to calculate the size of the scroll indicator).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As of iOS 7, you can (and absolutely should) use the \u0026lt;code\u0026gt;estimatedRowHeight\u0026lt;/code\u0026gt; property on the table view. What this does is provide the table view with a temporary estimate/placeholder for the row heights of cells that are not yet onscreen. Then, when these cells are about to scroll on screen, the actual row height will be calculated (by calling \u0026lt;code\u0026gt;tableView:heightForRowAtIndexPath:\u0026lt;/code\u0026gt;), and the estimated height updated with the actual one.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Generally speaking, the estimate you provide doesn\u0026apos;t have to be very accurate -- it is only used to correctly size the scroll indicator in the table view, and the table view does a good job of adjusting the scroll indicator for incorrect estimates as you scroll cells onscreen. You should set the \u0026lt;code\u0026gt;estimatedRowHeight\u0026lt;/code\u0026gt; property on the table view (in \u0026lt;code\u0026gt;viewDidLoad\u0026lt;/code\u0026gt; or similar) to a constant value that is the \u0026quot;average\u0026quot; row height. \u0026lt;em\u0026gt;Only if your row heights have extreme variability (e.g. differ by an order of magnitude) and you notice the scroll indicator \u0026quot;jumping\u0026quot; as you scroll should you bother implementing \u0026lt;code\u0026gt;tableView:estimatedHeightForRowAtIndexPath:\u0026lt;/code\u0026gt; to do the minimal calculation required to return a more accurate estimate for each row.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;5. (If Needed) Add Row Height Caching\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;If you\u0026apos;ve done all the above and are still finding that performance is unacceptably slow when doing the constraint solving in \u0026lt;code\u0026gt;tableView:heightForRowAtIndexPath:\u0026lt;/code\u0026gt;, you\u0026apos;ll unfortunately need to implement some caching for cell heights. (This is the approach suggested by Apple\u0026apos;s engineers.) The general idea is to let the Autolayout engine solve the constraints the first time, then cache the calculated height for that cell and use the cached value for all future requests for that cell\u0026apos;s height. The trick of course is to make sure you clear the cached height for a cell when anything happens that could cause the cell\u0026apos;s height to change -- primarily, this would be when that cell\u0026apos;s content changes or when other important events occur (like the user adjusting the Dynamic Type text size slider).\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;iOS 7 Generic Sample Code (with lots of juicy comments)\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableViewCell\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;)tableView:(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;)tableView cellForRowAtIndexPath:(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSIndexPath\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;)indexPath\n{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Determine which reuse identifier should be used for the cell at this \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// index path, depending on the particular layout required (you may have\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// just one, or may have many).\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSString\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;reuseIdentifier \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;...\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Dequeue a cell for the reuse identifier.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Note that this method will init and return a new cell if there isn\u0026apos;t\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// one available in the reuse pool, so either way after this line of \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// code you will have a cell with the correct constraints ready to go.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableViewCell\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;cell \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; [tableView dequeueReusableCellWithIdentifier:reuseIdentifier];\n         \n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Configure the cell with content for the given indexPath, for example:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cell.textLabel.text = someTextForThisCell;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n    \n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Make sure the constraints have been set up for this cell, since it \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// may have just been created from scratch. Use the following lines, \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// assuming you are setting up constraints from within the cell\u0026apos;s \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// updateConstraints method:\u0026lt;/span\u0026gt;\n    [cell setNeedsUpdateConstraints];\n    [cell updateConstraintsIfNeeded];\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// If you are using multi-line UILabels, don\u0026apos;t forget that the \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// preferredMaxLayoutWidth needs to be set correctly. Do it at this \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// point if you are NOT doing it within the UITableViewCell subclass \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// -[layoutSubviews] method. For example: \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cell.multiLineLabel.preferredMaxLayoutWidth = CGRectGetWidth(tableView.bounds);\u0026lt;/span\u0026gt;\n    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; cell;\n}\n\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)tableView:(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;)tableView heightForRowAtIndexPath:(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSIndexPath\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;)indexPath\n{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Determine which reuse identifier should be used for the cell at this \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// index path.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSString\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;reuseIdentifier \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;...\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Use a dictionary of offscreen cells to get a cell for the reuse \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// identifier, creating a cell and storing it in the dictionary if one \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// hasn\u0026apos;t already been added for the reuse identifier. WARNING: Don\u0026apos;t \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// call the table view\u0026apos;s dequeueReusableCellWithIdentifier: method here \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// because this will result in a memory leak as the cell is created but \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// never returned from the tableView:cellForRowAtIndexPath: method!\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableViewCell\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;cell \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.offscreenCells objectForKey:reuseIdentifier];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;!\u0026lt;/span\u0026gt;cell) {\n        cell \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; [[\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;YourTableViewCellClass\u0026lt;/span\u0026gt; alloc] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;init\u0026lt;/span\u0026gt;];\n        [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.offscreenCells setObject:cell forKey:reuseIdentifier];\n    }\n    \n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Configure the cell with content for the given indexPath, for example:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cell.textLabel.text = someTextForThisCell;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n    \n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Make sure the constraints have been set up for this cell, since it \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// may have just been created from scratch. Use the following lines, \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// assuming you are setting up constraints from within the cell\u0026apos;s \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// updateConstraints method:\u0026lt;/span\u0026gt;\n    [cell setNeedsUpdateConstraints];\n    [cell updateConstraintsIfNeeded];\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Set the width of the cell to match the width of the table view. This\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// is important so that we\u0026apos;ll get the correct cell height for different\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// table view widths if the cell\u0026apos;s height depends on its width (due to \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// multi-line UILabels word wrapping, etc). We don\u0026apos;t need to do this \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// above in -[tableView:cellForRowAtIndexPath] because it happens \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// automatically when the cell is used in the table view. Also note, \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// the final width of the cell may not be the width of the table view in\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// some cases, for example when a section index is displayed along \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// the right side of the table view. You must account for the reduced \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cell width.\u0026lt;/span\u0026gt;\n    cell.bounds \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGRectMake\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGRectGetWidth\u0026lt;/span\u0026gt;(tableView.bounds), \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGRectGetHeight\u0026lt;/span\u0026gt;(cell.bounds));\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do the layout pass on the cell, which will calculate the frames for \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// all the views based on the constraints. (Note that you must set the \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// preferredMaxLayoutWidth on multiline UILabels inside the \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// -[layoutSubviews] method of the UITableViewCell subclass, or do it \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// manually at this point before the below 2 lines!)\u0026lt;/span\u0026gt;\n    [cell setNeedsLayout];\n    [cell layoutIfNeeded];\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Get the actual height required for the cell\u0026apos;s contentView\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt; height \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; [cell.contentView systemLayoutSizeFittingSize:\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UILayoutFittingCompressedSize\u0026lt;/span\u0026gt;].height;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Add an extra point to the height to account for the cell separator, \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// which is added between the bottom of the cell\u0026apos;s contentView and the \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// bottom of the table view cell.\u0026lt;/span\u0026gt;\n    height \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; height;\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;NOTE:\u0026lt;/span\u0026gt; Set the table view\u0026apos;s estimatedRowHeight property instead of \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// implementing the below method, UNLESS you have extreme variability in \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// your row heights and you notice the scroll indicator \u0026quot;jumping\u0026quot; \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// as you scroll.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)tableView:(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;)tableView estimatedHeightForRowAtIndexPath:(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSIndexPath\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;)indexPath\n{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do the minimal calculations required to be able to return an \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// estimated row height that\u0026apos;s within an order of magnitude of the \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// actual height. For example:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; ([\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; isTallCellAtIndexPath:indexPath]) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;350.0\u0026lt;/span\u0026gt;;\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;40.0\u0026lt;/span\u0026gt;;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h1\u0026gt;Sample Projects\u0026lt;/h1\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/smileyborg/TableViewCellWithAutoLayoutiOS8\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;iOS 8 Sample Project\u0026lt;/a\u0026gt; - Requires iOS 8\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/smileyborg/TableViewCellWithAutoLayout\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;iOS 7 Sample Project\u0026lt;/a\u0026gt; - Works on iOS 7+\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;These projects are fully working examples of table views with variable row heights due to table view cells containing dynamic content in UILabels.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Xamarin (C#/.NET)\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;If you\u0026apos;re using Xamarin, check out this \u0026lt;a href=\u0026quot;https://github.com/kentcb/TableViewCellWithAutoLayout_dotNET\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;sample project\u0026lt;/a\u0026gt; put together by \u0026lt;a href=\u0026quot;https://stackoverflow.com/users/5380/kent-boogaart\u0026quot;\u0026gt;@KentBoogaart\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For iOS 8 above it\u0026apos;s really simple:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;viewDidLoad\u0026lt;/span\u0026gt;() {  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.viewDidLoad()\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.tableView.estimatedRowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.tableView.rowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;.automaticDimension\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;heightForRowAtIndexPath\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;indexPath\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSIndexPath\u0026lt;/span\u0026gt;) -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;.automaticDimension\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;But for iOS 7, the key is calculate the height after autolayout:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;calculateHeightForConfiguredSizingCell\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;cell\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;GSTableViewCell\u0026lt;/span\u0026gt;) -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt; {\n    cell.setNeedsLayout()\n    cell.layoutIfNeeded()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; height \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; cell.contentView.systemLayoutSizeFittingSize(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UILayoutFittingExpandedSize\u0026lt;/span\u0026gt;).height \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; height\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Important\u0026lt;/strong\u0026gt; \u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;If multiple lines labels, don\u0026apos;t forget set the \u0026lt;code\u0026gt;numberOfLines\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;0\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Don\u0026apos;t forget \u0026lt;code\u0026gt;label.preferredMaxLayoutWidth = CGRectGetWidth(tableView.bounds)\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;The full example code is \u0026lt;a href=\u0026quot;https://github.com/williamhqs/GSTableViewDynamicHeight\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h1\u0026gt;Swift example of a variable height UITableViewCell\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Updated for Swift 3\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;William Hu\u0026apos;s Swift answer is good, but it helps me to have some simple yet detailed steps when learning to do something for the first time. The example below is my test project while learning to make a \u0026lt;code\u0026gt;UITableView\u0026lt;/code\u0026gt; with variable cell heights. I based it on \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/33234181/3681880\u0026quot;\u0026gt;this basic UITableView example for Swift\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The finished project should look like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/lxUhH.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/lxUhH.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h1\u0026gt;Create a new project\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;It can be just a Single View Application.\u0026lt;/p\u0026gt;\n\n\u0026lt;h1\u0026gt;Add the code\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;Add a new Swift file to your project. Name it MyCustomCell. This class will hold the outlets for the views that you add to your cell in the storyboard. In this basic example we will only have one label in each cell.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; UIKit\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyCustomCell\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;UITableViewCell\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@IBOutlet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;weak\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; myCellLabel: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UILabel\u0026lt;/span\u0026gt;!\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;We will connect this outlet later.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Open ViewController.swift and make sure you have the following content:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; UIKit\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ViewController\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;UIViewController\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;UITableViewDelegate\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;UITableViewDataSource\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// These strings will be the data for the table view cells\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; animals: [\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; [\n        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Ten horses:  horse horse horse horse horse horse horse horse horse horse \u0026quot;\u0026lt;/span\u0026gt;,\n        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Three cows:  cow, cow, cow\u0026quot;\u0026lt;/span\u0026gt;,\n        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;One camel:  camel\u0026quot;\u0026lt;/span\u0026gt;,\n        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Ninety-nine sheep:  sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep baaaa sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep sheep\u0026quot;\u0026lt;/span\u0026gt;,\n        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Thirty goats:  goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat goat \u0026quot;\u0026lt;/span\u0026gt;]\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Don\u0026apos;t forget to enter this in IB also\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; cellReuseIdentifier \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;cell\u0026quot;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@IBOutlet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; tableView: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;!\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;viewDidLoad\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.viewDidLoad()\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// delegate and data source\u0026lt;/span\u0026gt;\n        tableView.delegate \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;\n        tableView.dataSource \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Along with auto layout, these are the keys for enabling variable cell height\u0026lt;/span\u0026gt;\n        tableView.estimatedRowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;44.0\u0026lt;/span\u0026gt;\n        tableView.rowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableViewAutomaticDimension\u0026lt;/span\u0026gt;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// number of rows in table view\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;_\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;numberOfRowsInSection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;section\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Int\u0026lt;/span\u0026gt;) -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Int\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.animals.count\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// create a cell for each table view row\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;_\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;cellForRowAt\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;indexPath\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;IndexPath\u0026lt;/span\u0026gt;) -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableViewCell\u0026lt;/span\u0026gt; {\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; cell:\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MyCustomCell\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.tableView.dequeueReusableCell(withIdentifier: cellReuseIdentifier) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as!\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MyCustomCell\u0026lt;/span\u0026gt;\n        cell.myCellLabel.text \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.animals[indexPath.row]\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; cell\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// method to run when table view cell is tapped\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;_\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;didSelectRowAt\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;indexPath\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;IndexPath\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;You tapped cell number \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;\\(indexPath.row)\u0026lt;/span\u0026gt;.\u0026quot;\u0026lt;/span\u0026gt;)\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Important Note:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;It is the following two lines of code (along with auto layout) that make the variable cell height possible:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.estimatedRowHeight\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;44.0\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.rowHeight\u0026lt;/span\u0026gt; = UITableViewAutomaticDimension\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h1\u0026gt;Setup the storyboard\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;Add a Table View to your view controller and use auto layout to pin it to the four sides. Then drag a Table View Cell onto the Table View. And onto the Prototype cell, drag a Label. Use auto layout to pin the label to the four edges of the content view of the Table View Cell.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/KI5ky.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/KI5ky.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Important note:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Auto layout works together with the important two lines of code I mentioned above. If you don\u0026apos;t use auto layout it isn\u0026apos;t going to work.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h1\u0026gt;Other IB settings\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Custom class name and Identifier\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Select the Table View Cell and set the custom class to be \u0026lt;code\u0026gt;MyCustomCell\u0026lt;/code\u0026gt; (the name of the class in the Swift file we added). Also set the Identifier to be \u0026lt;code\u0026gt;cell\u0026lt;/code\u0026gt; (the same string that we used for the \u0026lt;code\u0026gt;cellReuseIdentifier\u0026lt;/code\u0026gt; in the code above.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/J7txO.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/J7txO.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Zero Lines for Label\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Set the number of lines to \u0026lt;code\u0026gt;0\u0026lt;/code\u0026gt; in your Label. This means multi-line and allows the label to resize itself based on its content.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/YbCl2.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/YbCl2.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;  \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Hook Up the Outlets\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Control drag from the Table View in the storyboard to the \u0026lt;code\u0026gt;tableView\u0026lt;/code\u0026gt; variable in the \u0026lt;code\u0026gt;ViewController\u0026lt;/code\u0026gt; code. \u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Do the same for the Label in your Prototype cell to the \u0026lt;code\u0026gt;myCellLabel\u0026lt;/code\u0026gt; variable in the \u0026lt;code\u0026gt;MyCustomCell\u0026lt;/code\u0026gt; class.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h1\u0026gt;Finished\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;You should be able to run your project now and get cells with variable heights.\u0026lt;/p\u0026gt;\n\n\u0026lt;h1\u0026gt;Notes\u0026lt;/h1\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;This example only works for iOS 8 and after. If you are still needing to support iOS 7 then this won\u0026apos;t work for you.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Your own custom cells in your future projects will probably have more than a single label. Make sure that you get everything pinned right so that auto layout can determine the correct height to use. You may also have to use vertical compression resistance and hugging. See \u0026lt;a href=\u0026quot;http://useyourloaf.com/blog/table-view-cells-with-varying-row-heights/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;this article\u0026lt;/a\u0026gt; for more about that.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;If you are not pinning the leading and trailing (left and right) edges, you may also need to set the label\u0026apos;s \u0026lt;code\u0026gt;preferredMaxLayoutWidth\u0026lt;/code\u0026gt; so that it knows when to line wrap. For example, if you had added a Center Horizontally constraint to the label in the project above rather than pin the leading and trailing edges, then you would need to add this line to the \u0026lt;code\u0026gt;tableView:cellForRowAtIndexPath\u0026lt;/code\u0026gt; method:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;cell.myCellLabel.preferredMaxLayoutWidth\u0026lt;/span\u0026gt; = tableView.bounds.width\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h1\u0026gt;See also\u0026lt;/h1\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://www.appcoda.com/self-sizing-cells/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Understanding Self Sizing Cells and Dynamic Type in iOS 8\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://useyourloaf.com/blog/table-view-cells-with-varying-row-heights/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Table View Cells with Varying Row Heights\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/33234180/uitableview-example-for-swift\u0026quot;\u0026gt;UITableView example for Swift\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;h1\u0026gt;I wrapped @smileyborg\u0026apos;s iOS7 solution in a category\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;I decided to wrap this clever solution by @smileyborg into a \u0026lt;code\u0026gt;UICollectionViewCell+AutoLayoutDynamicHeightCalculation\u0026lt;/code\u0026gt; category.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The category also rectifies the issues outlined in @wildmonkey\u0026apos;s answer (loading a cell from a nib and \u0026lt;code\u0026gt;systemLayoutSizeFittingSize:\u0026lt;/code\u0026gt; returning \u0026lt;code\u0026gt;CGRectZero\u0026lt;/code\u0026gt;)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It doesn\u0026apos;t take into account any caching but suits my needs right now. Feel free to copy, paste and hack at it.\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;UICollectionViewCell+AutoLayoutDynamicHeightCalculation.h\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#import \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;UIKit/UIKit.h\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typedef\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; (^\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UICollectionViewCellAutoLayoutRenderBlock\u0026lt;/span\u0026gt;)(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n *  A category on UICollectionViewCell to aid calculating dynamic heights based on AutoLayout contraints.\n *\n *  Many thanks to @smileyborg and @wildmonkey\n *\n *  @see stackoverflow.com/questions/18746929/using-auto-layout-in-uitableview-for-dynamic-cell-layouts-variable-row-heights\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@interface\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;UICollectionViewCell\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;AutoLayoutDynamicHeightCalculation\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n *  Grab an instance of the receiving type to use in order to calculate AutoLayout contraint driven dynamic height. The method pulls the cell from a nib file and moves any Interface Builder defined contrainsts to the content view.\n *\n *  @param name Name of the nib file.\n *\n *  @return collection view cell for using to calculate content based height\n */\u0026lt;/span\u0026gt;\n+ (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instancetype\u0026lt;/span\u0026gt;)heightCalculationCellFromNibWithName:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSString\u0026lt;/span\u0026gt; *)name;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n *  Returns the height of the receiver after rendering with your model data and applying an AutoLayout pass\n *\n *  @param block Render the model data to your UI elements in this block\n *\n *  @return Calculated constraint derived height\n */\u0026lt;/span\u0026gt;\n- (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)heightAfterAutoLayoutPassAndRenderingWithBlock:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UICollectionViewCellAutoLayoutRenderBlock\u0026lt;/span\u0026gt;)block collectionViewWidth:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)width;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n *  Directly calls `heightAfterAutoLayoutPassAndRenderingWithBlock:collectionViewWidth` assuming a collection view width spanning the [UIScreen mainScreen] bounds\n */\u0026lt;/span\u0026gt;\n- (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)heightAfterAutoLayoutPassAndRenderingWithBlock:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UICollectionViewCellAutoLayoutRenderBlock\u0026lt;/span\u0026gt;)block;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@end\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h3\u0026gt;UICollectionViewCell+AutoLayoutDynamicHeightCalculation.m\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#import \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UICollectionViewCell+AutoLayout.h\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@implementation\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;UICollectionViewCell\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;AutoLayout\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;pragma\u0026lt;/span\u0026gt; mark Dummy Cell Generator\u0026lt;/span\u0026gt;\n\n+ (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instancetype\u0026lt;/span\u0026gt;)heightCalculationCellFromNibWithName:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSString\u0026lt;/span\u0026gt; *)name\n{\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UICollectionViewCell\u0026lt;/span\u0026gt; *heightCalculationCell = [[[\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSBundle\u0026lt;/span\u0026gt; mainBundle] loadNibNamed:name owner:\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; options:\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;nil\u0026lt;/span\u0026gt;] lastObject];\n    [heightCalculationCell moveInterfaceBuilderLayoutConstraintsToContentView];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; heightCalculationCell;\n}\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;pragma\u0026lt;/span\u0026gt; mark Moving Constraints\u0026lt;/span\u0026gt;\n\n- (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;)moveInterfaceBuilderLayoutConstraintsToContentView\n{\n    [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.constraints enumerateObjectsUsingBlock:^(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSLayoutConstraint\u0026lt;/span\u0026gt; *constraint, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSUInteger\u0026lt;/span\u0026gt; idx, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BOOL\u0026lt;/span\u0026gt; *stop) {\n        [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; removeConstraint:constraint];\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt; firstItem = constraint.firstItem == \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; ? \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.contentView : constraint.firstItem;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt; secondItem = constraint.secondItem == \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; ? \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.contentView : constraint.secondItem;\n        [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.contentView addConstraint:[\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSLayoutConstraint\u0026lt;/span\u0026gt; constraintWithItem:firstItem\n                                                                     attribute:constraint.firstAttribute\n                                                                     relatedBy:constraint.relation\n                                                                        toItem:secondItem\n                                                                     attribute:constraint.secondAttribute\n                                                                    multiplier:constraint.multiplier\n                                                                      constant:constraint.constant]];\n    }];\n}\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;pragma\u0026lt;/span\u0026gt; mark Height\u0026lt;/span\u0026gt;\n\n- (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)heightAfterAutoLayoutPassAndRenderingWithBlock:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UICollectionViewCellAutoLayoutRenderBlock\u0026lt;/span\u0026gt;)block\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; heightAfterAutoLayoutPassAndRenderingWithBlock:block\n                                            collectionViewWidth:\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGRectGetWidth\u0026lt;/span\u0026gt;([[\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UIScreen\u0026lt;/span\u0026gt; mainScreen] bounds])];\n}\n\n- (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)heightAfterAutoLayoutPassAndRenderingWithBlock:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UICollectionViewCellAutoLayoutRenderBlock\u0026lt;/span\u0026gt;)block collectionViewWidth:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)width\n{\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSParameterAssert\u0026lt;/span\u0026gt;(block);\n\n    block();\n\n    [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; setNeedsUpdateConstraints];\n    [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; updateConstraintsIfNeeded];\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.bounds = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGRectMake\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;f, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;f, width, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGRectGetHeight\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.bounds));\n\n    [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; setNeedsLayout];\n    [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; layoutIfNeeded];\n\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGSize\u0026lt;/span\u0026gt; calculatedSize = [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.contentView systemLayoutSizeFittingSize:\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UILayoutFittingCompressedSize\u0026lt;/span\u0026gt;];\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; calculatedSize.height;\n\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@end\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h3\u0026gt;Usage example:\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;- (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGSize\u0026lt;/span\u0026gt;)collectionView:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UICollectionView\u0026lt;/span\u0026gt; *)collectionView layout:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UICollectionViewLayout\u0026lt;/span\u0026gt; *)collectionViewLayout sizeForItemAtIndexPath:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSIndexPath\u0026lt;/span\u0026gt; *)indexPath\n{\n    MYSweetCell *cell = [MYSweetCell heightCalculationCellFromNibWithName:\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSStringFromClass\u0026lt;/span\u0026gt;([MYSweetCell \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt;])];\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt; height = [cell heightAfterAutoLayoutPassAndRenderingWithBlock:^{\n        [(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;\u0026amp;lt;MYSweetCellRenderProtocol\u0026amp;gt;)cell renderWithModel:someModel];\n    }];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGSizeMake\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGRectGetWidth\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.collectionView.bounds), height);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Thankfully we won\u0026apos;t have to do this jazz in iOS8, but there it is for now!\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is my solution:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You need to tell the \u0026lt;code\u0026gt;TableView\u0026lt;/code\u0026gt; the \u0026lt;code\u0026gt;estimatedHeight\u0026lt;/code\u0026gt; before it loads the view. Otherwise it wont be able to behave like expected.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Objective-C\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;- (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;)viewWillAppear:(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BOOL\u0026lt;/span\u0026gt;)animated {\n    _messageField.delegate = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;;\n    _tableView.estimatedRowHeight = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;65.0\u0026lt;/span\u0026gt;;\n    _tableView.rowHeight = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UITableViewAutomaticDimension\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Update to \u0026lt;strong\u0026gt;Swift 4.2\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;viewWillAppear\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;_\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;animated\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bool\u0026lt;/span\u0026gt;) {\n    tableView.rowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;.automaticDimension\n    tableView.estimatedRowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;65.0\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The solution proposed by @smileyborg is almost perfect. If you have a custom cell and you want one or more \u0026lt;code\u0026gt;UILabel\u0026lt;/code\u0026gt; with dynamic heights then the \u0026lt;em\u0026gt;systemLayoutSizeFittingSize\u0026lt;/em\u0026gt; method combined with AutoLayout enabled returns a \u0026lt;code\u0026gt;CGSizeZero\u0026lt;/code\u0026gt; unless you move all your cell constraints from the cell to its contentView (as suggested by @TomSwift here \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/18118021/how-to-resize-superview-to-fit-all-subviews-with-autolayout\u0026quot;\u0026gt;How to resize superview to fit all subviews with autolayout?\u0026lt;/a\u0026gt;).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To do so you need to insert the following code in your custom UITableViewCell implementation (thanks to @Adrian).\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;- (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;)awakeFromNib{\n    [\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt; awakeFromNib];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSLayoutConstraint\u0026lt;/span\u0026gt; *cellConstraint \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.constraints) {\n        [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; removeConstraint:cellConstraint];\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt; firstItem = cellConstraint.firstItem == \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; ? \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.contentView : cellConstraint.firstItem;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt; seccondItem = cellConstraint.secondItem == \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; ? \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.contentView : cellConstraint.secondItem;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSLayoutConstraint\u0026lt;/span\u0026gt; *contentViewConstraint =\n        [\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSLayoutConstraint\u0026lt;/span\u0026gt; constraintWithItem:firstItem\n                                 attribute:cellConstraint.firstAttribute\n                                 relatedBy:cellConstraint.relation\n                                    toItem:seccondItem\n                                 attribute:cellConstraint.secondAttribute\n                                multiplier:cellConstraint.multiplier\n                                  constant:cellConstraint.constant];\n        [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.contentView addConstraint:contentViewConstraint];\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Mixing @smileyborg answer with this should works.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;An important enough gotcha I just ran into to post as an answer.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;@smileyborg\u0026apos;s answer is mostly correct. However, if you have any code in the \u0026lt;code\u0026gt;layoutSubviews\u0026lt;/code\u0026gt; method of your custom cell class, for instance setting the \u0026lt;code\u0026gt;preferredMaxLayoutWidth\u0026lt;/code\u0026gt;, then it won\u0026apos;t be run with this code:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-section\u0026quot;\u0026gt;[cell.contentView setNeedsLayout]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-section\u0026quot;\u0026gt;[cell.contentView layoutIfNeeded]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It confounded me for awhile. Then I realized it\u0026apos;s because those are only triggering layoutSubviews on the \u0026lt;code\u0026gt;contentView\u0026lt;/code\u0026gt;, not the cell itself.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;My working code looks like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;TCAnswerDetailAppSummaryCell *cell = [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.tableView dequeueReusableCellWithIdentifier:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;@\u0026quot;TCAnswerDetailAppSummaryCell\u0026quot;\u0026lt;/span\u0026gt;];\n[cell configureWithThirdPartyObject:\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.app];\n[cell layoutIfNeeded];\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt; height = [cell.contentView systemLayoutSizeFittingSize:\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UILayoutFittingCompressedSize\u0026lt;/span\u0026gt;].height;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; height;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note that if you are creating a new cell, I\u0026apos;m pretty sure you don\u0026apos;t need to call \u0026lt;code\u0026gt;setNeedsLayout\u0026lt;/code\u0026gt; as it should already be set. In cases where you save a reference to a cell, you should probably call it. Either way it shouldn\u0026apos;t hurt anything.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Another tip if you are using cell subclasses where you are setting things like \u0026lt;code\u0026gt;preferredMaxLayoutWidth\u0026lt;/code\u0026gt;. As @smileyborg mentions, \u0026quot;your table view cell hasn\u0026apos;t yet had its width fixed to the table view\u0026apos;s width\u0026quot;. This is true, and trouble if you are doing your work in your subclass and not in the view controller. However you can simply set the cell frame at this point using the table width:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For instance in the calculation for height:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.summaryCell = [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.tableView dequeueReusableCellWithIdentifier:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;@\u0026quot;TCAnswerDetailDefaultSummaryCell\u0026quot;\u0026lt;/span\u0026gt;];\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGRect\u0026lt;/span\u0026gt; oldFrame = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.summaryCell.frame;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.summaryCell.frame = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGRectMake\u0026lt;/span\u0026gt;(oldFrame.origin.x, oldFrame.origin.y, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.tableView.frame.size.width, oldFrame.size.height);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;(I happen to cache this particular cell for re-use, but that\u0026apos;s irrelevant).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;(for Xcode 8.x / Xcode 9.x read at the bottom)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Beware of the following issue in in Xcode 7.x, which might be a source of confusion:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Interface Builder does not handle auto-sizing cell set-up properly. Even if your constraints are  absolutely valid, IB will still complain and give you confusing suggestions and errors. The reason is that IB is unwilling to change the row\u0026apos;s height as your constraints dictate (so that the cell fits around your content). Instead, it keeps the row\u0026apos;s height fixed and starts suggesting you change your constraints, which \u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;you should ignore\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example, imagine you\u0026apos;ve set up everything fine, no warnings, no errors, all works.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/qafNl.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/qafNl.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Now if you change the font size (in this example I\u0026apos;m changing the description label font size from 17.0 to 18.0).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/PSelQ.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/PSelQ.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Because the font size increased, the label now wants to occupy 3 rows (before that it was occupying 2 rows).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If Interface Builder worked as expected, it would resize the cell\u0026apos;s height to accommodate the new label height. However what actually happens is that IB displays the red auto-layout error icon and suggest that you modify hugging/compression priorities.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/rUzCn.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/rUzCn.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You should ignore these warnings. What you can* do instead is to manually change the row\u0026apos;s height in (select Cell \u0026amp;gt; Size Inspector \u0026amp;gt; Row Height).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/oC0pw.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/oC0pw.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I was changing this height one click at a time (using the up/down stepper) until the red arrow errors disappear! (you will actually get yellow warnings, at which point just go ahead and do \u0026apos;update frames\u0026apos;, it should all work).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;* Note that you don\u0026apos;t actually have to resolve these red errors or yellow warnings in Interface Builder - at runtime, everything will work correctly (even if IB shows errors/warnings). Just make sure that at runtime in the console log you\u0026apos;re not getting any AutoLayout errors. \n\u0026lt;br\u0026gt;\u0026lt;br\u0026gt;\nIn fact trying to always update row height in IB is super annoying and sometimes close to impossible (because of fractional values).\n\u0026lt;br\u0026gt;\u0026lt;br\u0026gt;\nTo prevent the annoying IB warnings/errors, you can select the views involved and in \u0026lt;code\u0026gt;Size Inspector\u0026lt;/code\u0026gt; for the property \u0026lt;code\u0026gt;Ambiguity\u0026lt;/code\u0026gt; choose \u0026lt;code\u0026gt;Verify Position Only\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/LR7cI.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/LR7cI.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;Xcode 8.x / Xcode 9.x seems to (sometimes) be doing things differently than Xcode 7.x, but still incorrectly. For example even when \u0026lt;code\u0026gt;compression resistance priority\u0026lt;/code\u0026gt; / \u0026lt;code\u0026gt;hugging priority\u0026lt;/code\u0026gt; are set to required (1000), Interface Builder might stretch or clip a label to fit the cell (instead of resizing cell height to fit around the label). And in such a case it might not even show any AutoLayout warnings or errors. Or sometimes it does exactly what Xcode 7.x did, described above.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In case people are still having trouble with this.  I wrote a quick blog post about using Autolayout with UITableViews \u0026lt;a href=\u0026quot;http://www.raizlabs.com/dev/2014/02/leveraging-auto-layout-for-dynamic-cell-heights/\u0026quot;\u0026gt;Leveraging Autolayout For Dynamic Cell Heights\u0026lt;/a\u0026gt; as well as an open source component to help make this more abstract and easier to implement.\n\u0026lt;a href=\u0026quot;https://github.com/Raizlabs/RZCellSizeManager\u0026quot;\u0026gt;https://github.com/Raizlabs/RZCellSizeManager\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As long as your layout in your cell is good.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;-(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)tableView:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt; *)tableView heightForRowAtIndexPath:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSIndexPath\u0026lt;/span\u0026gt; *)indexPath {\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UITableViewCell\u0026lt;/span\u0026gt; *cell = [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; tableView:tableView cellForRowAtIndexPath:indexPath];\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; [cell.contentView systemLayoutSizeFittingSize:\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UILayoutFittingCompressedSize\u0026lt;/span\u0026gt;].height;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Update:  You should use dynamic resizing introduced in iOS 8.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;To set automatic dimension for row height \u0026amp;amp; estimated row height, ensure following steps to make, auto dimension effective for cell/row height layout. \u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Assign and implement tableview dataSource and delegate\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Assign \u0026lt;code\u0026gt;UITableViewAutomaticDimension\u0026lt;/code\u0026gt; to rowHeight \u0026amp;amp; estimatedRowHeight\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Implement delegate/dataSource methods (i.e. \u0026lt;code\u0026gt;heightForRowAt\u0026lt;/code\u0026gt; and return a value \u0026lt;code\u0026gt;UITableViewAutomaticDimension\u0026lt;/code\u0026gt; to it)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;-\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Objective C:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// in ViewController.h\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#import \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;UIKit/UIKit.h\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@interface\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;ViewController\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;UIViewController\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;UITableViewDelegate\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;UITableViewDataSource\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@property\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IBOutlet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt; * table;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@end\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// in ViewController.m\u0026lt;/span\u0026gt;\n\n- (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;)viewDidLoad {\n    [\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt; viewDidLoad];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.table.dataSource = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.table.delegate = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.table.rowHeight = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UITableViewAutomaticDimension\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.table.estimatedRowHeight = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UITableViewAutomaticDimension\u0026lt;/span\u0026gt;;\n}\n\n-(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)tableView:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt; *)tableView heightForRowAtIndexPath:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSIndexPath\u0026lt;/span\u0026gt; *)indexPath {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UITableViewAutomaticDimension\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Swift:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@IBOutlet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;weak\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; table: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;!\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;viewDidLoad\u0026lt;/span\u0026gt;() {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.viewDidLoad()\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Don\u0026apos;t forget to set dataSource and delegate for table\u0026lt;/span\u0026gt;\n    table.dataSource \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;\n    table.delegate \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Set automatic dimensions for row height\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Swift 4.2 onwards\u0026lt;/span\u0026gt;\n    table.rowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;.automaticDimension\n    table.estimatedRowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;.automaticDimension\n\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Swift 4.1 and below\u0026lt;/span\u0026gt;\n    table.rowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableViewAutomaticDimension\u0026lt;/span\u0026gt;\n    table.estimatedRowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableViewAutomaticDimension\u0026lt;/span\u0026gt;\n\n}\n\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// UITableViewAutomaticDimension calculates height of label contents/text\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;_\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;heightForRowAt\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;indexPath\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;IndexPath\u0026lt;/span\u0026gt;) -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Swift 4.2 onwards\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;.automaticDimension\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Swift 4.1 and below\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableViewAutomaticDimension\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;For label instance in UITableviewCell\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Set number of lines = 0 (\u0026amp;amp; line break mode = truncate tail)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Set all constraints (top, bottom, right left) with respect to its superview/ cell container.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;em\u0026gt;Optional\u0026lt;/em\u0026gt;: Set minimum height for label, if you want minimum vertical area covered by label, even if there is no data.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/T354s.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Note\u0026lt;/strong\u0026gt;: If you\u0026apos;ve more than one labels (UIElements) with dynamic length, which should be adjusted according to its content size: Adjust \u0026apos;Content Hugging and Compression Resistance Priority` for labels which you want to expand/compress with higher priority.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Like \u0026lt;a href=\u0026quot;https://stackoverflow.com/users/287403/bob-spryn\u0026quot;\u0026gt;@Bob-Spryn\u0026lt;/a\u0026gt; I ran into an important enough gotcha that I\u0026apos;m posting this as an answer.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I struggled with \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/18746930/2591612\u0026quot;\u0026gt;@smileyborg\u0026apos;s\u0026lt;/a\u0026gt; answer for a while. The gotcha that I ran into is if you\u0026apos;ve defined your prototype cell in IB with additional elements (\u0026lt;code\u0026gt;UILabels\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;UIButtons\u0026lt;/code\u0026gt;, etc.) in IB when you instantiate the cell with [\u0026lt;code\u0026gt;[YourTableViewCellClass alloc] init]\u0026lt;/code\u0026gt; it will not instantiate all the other elements within that cell unless you\u0026apos;ve written code to do that. (I had a similar experience with \u0026lt;code\u0026gt;initWithStyle\u0026lt;/code\u0026gt;.)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To have the storyboard instantiate all the additional elements obtain your cell with \u0026lt;code\u0026gt;[tableView dequeueReusableCellWithIdentifier:@\u0026quot;DoseNeeded\u0026quot;]\u0026lt;/code\u0026gt; (Not \u0026lt;code\u0026gt;[tableView dequeueReusableCellWithIdentifier:forIndexPath:]\u0026lt;/code\u0026gt; as this\u0026apos;ll cause interesting problems.) When you do this all the elements you defined in IB will be instantiated.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://www.raywenderlich.com/73602/dynamic-table-view-cell-height-auto-layout\u0026quot;\u0026gt;Dynamic Table View Cell Height and Auto Layout\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;A good way to solve the problem with storyboard Auto Layout:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;- (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)heightForImageCellAtIndexPath:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;NSIndexPath\u0026lt;/span\u0026gt; *)indexPath {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; RWImageCell *sizingCell = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;nil\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;dispatch_once_t\u0026lt;/span\u0026gt; onceToken;\n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;dispatch_once\u0026lt;/span\u0026gt;(\u0026amp;amp;onceToken, ^{\n    sizingCell = [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.tableView dequeueReusableCellWithIdentifier:RWImageCellIdentifier];\n  });\n\n  [sizingCell setNeedsLayout];\n  [sizingCell layoutIfNeeded];\n\n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGSize\u0026lt;/span\u0026gt; size = [sizingCell.contentView systemLayoutSizeFittingSize:\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UILayoutFittingCompressedSize\u0026lt;/span\u0026gt;];\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; size.height;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.estimatedRowHeight\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;343.0\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.rowHeight\u0026lt;/span\u0026gt; = UITableViewAutomaticDimension\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/Xa4V8.jpg\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/Xa4V8.jpg\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Another \u0026quot;solution\u0026quot;: skip all this frustration and use a UIScrollView instead to get a result that looks and feels identical to UITableView.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;That was the painful \u0026quot;solution\u0026quot; for me, after having put in literally 20+ very frustrating hours total trying to build something like what smileyborg suggested and failing over many months and three versions of App Store releases.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;My take is that if you really need iOS 7 support (for us, it\u0026apos;s essential) then the technology is just too brittle and you\u0026apos;ll pull your hair out trying. And that UITableView is complete overkill generally unless you\u0026apos;re using some of the advanced row editing features and/or really need to support 1000+ \u0026quot;rows\u0026quot; (in our app, it\u0026apos;s realistically never more than 20 rows).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The added bonus is that the code gets insanely simple versus all the delegate crap and back and forth that comes with UITableView. It\u0026apos;s just one single loop of code in viewOnLoad that looks elegant and is easy to manage.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Here are some tips on how to do it:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Using either Storyboard or a nib file, create a ViewController and associated root view.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Drag over a UIScrollView onto your root view.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Add constraints top, bottom, left, and right constraints to the top-level view so the UIScrollView fills the entire root view.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Add a UIView inside the UIScrollView and call it \u0026quot;container\u0026quot;. Add top, bottom, left and right constraints to the UIScrollView (its parent). KEY TRICK: Also add an \u0026quot;Equal widths\u0026quot; constraint to link the UIScrollView and UIView.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;NOTE: You will get an error \u0026quot;scroll view has ambiguous scrollable content height\u0026quot; and that your container UIView should have a height of 0 pixels. Neither error seems to matter when the app is running.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Create nib files and controllers for each of your \u0026quot;cells\u0026quot;. Use UIView not UITableViewCell.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;In your root ViewController, you essentially add all the \u0026quot;rows\u0026quot; to the container UIView and programmatically add constraints linking their left and right edges to the container view, their top edges to either the container view top (for the first item) or the previous cell. Then link the final cell to the container bottom.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;For us, each \u0026quot;row\u0026quot; is in a nib file. So the code looks something like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;YourRootViewController\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@IBOutlet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; container: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UIView\u0026lt;/span\u0026gt;! \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//container mentioned in step 4\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;viewDidLoad\u0026lt;/span\u0026gt;() {\n        \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.viewDidLoad()\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; lastView: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UIView\u0026lt;/span\u0026gt;?\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; data \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; yourDataSource {\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; cell \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;YourCellController\u0026lt;/span\u0026gt;(nibName: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;YourCellNibName\u0026quot;\u0026lt;/span\u0026gt;, bundle: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;nil\u0026lt;/span\u0026gt;)\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITools\u0026lt;/span\u0026gt;.addViewToTop(container, child: cell.view, sibling: lastView)\n            lastView \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; cell.view\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Insert code here to populate your cell\u0026lt;/span\u0026gt;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(lastView \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;!=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;nil\u0026lt;/span\u0026gt;) {\n            container.addConstraint(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutConstraint\u0026lt;/span\u0026gt;(\n                item: lastView\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;!\u0026lt;/span\u0026gt;,\n                attribute: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutAttribute\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bottom\u0026lt;/span\u0026gt;,\n                relatedBy: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutRelation\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Equal\u0026lt;/span\u0026gt;,\n                toItem: container,\n                attribute: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutAttribute\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bottom\u0026lt;/span\u0026gt;,\n                multiplier: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\n                constant: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;))\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;///Add a refresh control, if you want - it seems to work fine in our app:\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; refreshControl \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UIRefreshControl\u0026lt;/span\u0026gt;()\n        container.addSubview(refreshControl\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;!\u0026lt;/span\u0026gt;)\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And here\u0026apos;s the code for UITools.addViewToTop:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-haskell\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITools\u0026lt;/span\u0026gt; {\n    ///\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Add\u0026lt;/span\u0026gt; child to container, full width of the container and directly under sibling (\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;container\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;sibling\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;nil\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; func addViewToTop(\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;container\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UIView\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;child\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UIView\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;sibling\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UIView\u0026lt;/span\u0026gt;? = \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;nil\u0026lt;/span\u0026gt;)\n    {\n        child.setTranslatesAutoresizingMaskIntoConstraints(\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;)\n        container.addSubview(\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;child\u0026lt;/span\u0026gt;)\n        \n        //\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Set\u0026lt;/span\u0026gt; left and right constraints so fills full horz width:\n        \n        container.addConstraint(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutConstraint\u0026lt;/span\u0026gt;(\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;item\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;child\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;attribute\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutAttribute\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Leading\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;relatedBy\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutRelation\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Equal\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;toItem\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;container\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;attribute\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutAttribute\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Left\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;multiplier\u0026lt;/span\u0026gt;: 1,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;constant\u0026lt;/span\u0026gt;: 0))\n        \n        container.addConstraint(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutConstraint\u0026lt;/span\u0026gt;(\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;item\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;child\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;attribute\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutAttribute\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Trailing\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;relatedBy\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutRelation\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Equal\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;toItem\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;container\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;attribute\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutAttribute\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Right\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;multiplier\u0026lt;/span\u0026gt;: 1,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;constant\u0026lt;/span\u0026gt;: 0))\n        \n        //\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Set\u0026lt;/span\u0026gt; vertical position from last item (\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;first\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;the\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;superview\u0026lt;/span\u0026gt;):\n        container.addConstraint(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutConstraint\u0026lt;/span\u0026gt;(\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;item\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;child\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;attribute\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutAttribute\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Top\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;relatedBy\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutRelation\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Equal\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;toItem\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;sibling\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;nil\u0026lt;/span\u0026gt; ? \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;container\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;sibling\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;attribute\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;sibling\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;nil\u0026lt;/span\u0026gt; ? \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutAttribute\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Top\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutAttribute\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bottom\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;multiplier\u0026lt;/span\u0026gt;: 1,\n            \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;constant\u0026lt;/span\u0026gt;: 0))\n    }\n}\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The only \u0026quot;gotcha\u0026quot; I\u0026apos;ve found with this approach so far is that UITableView has a nice feature of \u0026quot;floating\u0026quot; section headers at the top of the view as you scroll. The above solution won\u0026apos;t do that unless you add more programming but for our particular case this feature wasn\u0026apos;t 100% essential and nobody noticed when it went away.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you want dividers between your cells, just add a 1 pixel high UIView at the bottom of your custom \u0026quot;cell\u0026quot; that looks like a divider.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Be sure to turn on \u0026quot;bounces\u0026quot; and \u0026quot;bounce vertically\u0026quot; for the refresh control to work and so it seems more like a tableview.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;TableView shows some empty rows and dividers under your content, if it doesn\u0026apos;t fill the full screen where as this solution doesn\u0026apos;t. But personally, I prefer if those empty rows weren\u0026apos;t there anyway - with variable cell height it always looked \u0026quot;buggy\u0026quot; to me anyway to have the empty rows in there.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Here\u0026apos;s hoping some other programmer reads my post BEFORE wasting 20+ hours trying to figure it out with Table View in their own app. :)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I had to use dynamic views (setup views and constraints by code) and when I wanted to set preferredMaxLayoutWidth label\u0026apos;s width was 0. So I\u0026apos;ve got wrong cell height.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Then I added \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-section\u0026quot;\u0026gt;[cell layoutSubviews]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;before executing\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-section\u0026quot;\u0026gt;[cell setNeedsUpdateConstraints]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-section\u0026quot;\u0026gt;[cell updateConstraintsIfNeeded]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;After that label\u0026apos;s width was as expected and dynamic height was calculating right.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Let\u0026apos;s say you have a cell with a subview, and you want the cell\u0026apos;s height to be high enough to encompass the subview + padding.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;1) Set the subview\u0026apos;s bottom constraint equal to the cell.contentView minus the padding you want. Do not set constraints on the cell or cell.contentView itself.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;2) Set either the tableView\u0026apos;s \u0026lt;code\u0026gt;rowHeight\u0026lt;/code\u0026gt; property or \u0026lt;code\u0026gt;tableView:heightForRowAtIndexPath:\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;UITableViewAutomaticDimension\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;3) Set either the tableView\u0026apos;s \u0026lt;code\u0026gt;estimatedRowHeight\u0026lt;/code\u0026gt; property or \u0026lt;code\u0026gt;tableView:estimatedHeightForRowAtIndexPath:\u0026lt;/code\u0026gt; to a best guess of the height.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;That\u0026apos;s it.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you do you layout programmatically, here is what to consider for iOS 10 using anchors in Swift.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;There are three rules/ steps\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;NUMBER 1: set this two properties of tableview on viewDidLoad, the first one is telling to the tableview that should expect dynamic sizes on their cells, the second one is just to let the app calculate the size of the scrollbar indicator, so it helps for performance.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.rowHeight\u0026lt;/span\u0026gt; = UITableViewAutomaticDimension\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.estimatedRowHeight\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;NUMBER 2: This is important you need to add the subviews to the contentView of the cell not to the view, and also use its layoutsmarginguide to anchor the subviews to the top and bottom, this is a working example of how to do it.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;override \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;init\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;: UITableViewCellStyle, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;reuseIdentifier\u0026lt;/span\u0026gt;: String?) {\n    super.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;init\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;: style, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;reuseIdentifier\u0026lt;/span\u0026gt;: reuseIdentifier)\n    \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;setUpViews\u0026lt;/span\u0026gt;()\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; func \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;setUpViews\u0026lt;/span\u0026gt;() {\n\n    contentView.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;addSubview\u0026lt;/span\u0026gt;(movieImageView)\n    contentView.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;addSubview\u0026lt;/span\u0026gt;(descriptionLabel)\n    let marginGuide = contentView.layoutMarginsGuide\n\n    NSLayoutConstraint.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;activate\u0026lt;/span\u0026gt;([\n        movieImageView.heightAnchor.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;constraint\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;equalToConstant\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt;),\n        movieImageView.widthAnchor.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;constraint\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;equalToConstant\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt;),\n        movieImageView.leftAnchor.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;constraint\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;equalTo\u0026lt;/span\u0026gt;: marginGuide.leftAnchor),\n        movieImageView.topAnchor.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;constraint\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;equalTo\u0026lt;/span\u0026gt;: marginGuide.topAnchor, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;constant\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;),\n\n        descriptionLabel.leftAnchor.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;constraint\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;equalTo\u0026lt;/span\u0026gt;: movieImageView.rightAnchor, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;constant\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;),\n        descriptionLabel.rightAnchor.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;constraint\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;equalTo\u0026lt;/span\u0026gt;: marginGuide.rightAnchor),\n        descriptionLabel.bottomAnchor.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;constraint\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;equalTo\u0026lt;/span\u0026gt;: marginGuide.bottomAnchor, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;constant\u0026lt;/span\u0026gt;: -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;),\n        descriptionLabel.topAnchor.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;constraint\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;equalTo\u0026lt;/span\u0026gt;: movieImageView.topAnchor)\n\n        ])\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Create a method that will add the subviews and perform the layout, call it in the init method. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;NUMBER 3: DON\u0026apos;T CALL THE METHOD:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;_\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;heightForRowAt\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;indexPath\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;IndexPath\u0026lt;/span\u0026gt;) -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt; {\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If you do it you will override your implementation.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Follow this 3 rules for dynamic cells in tableviews.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;here is a working implementation \n\u0026lt;a href=\u0026quot;https://github.com/jamesrochabrun/MinimalViewController\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://github.com/jamesrochabrun/MinimalViewController\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you have a \u0026lt;strong\u0026gt;long\u0026lt;/strong\u0026gt; string. e.g. one which \u0026lt;strong\u0026gt;doesn\u0026apos;t\u0026lt;/strong\u0026gt; have a line break. Then you you might run into some problems.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The \u0026quot;alleged\u0026quot; fix is mentioned by the accepted answer and few other answers. You just need to add\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;cell.myCellLabel.preferredMaxLayoutWidth\u0026lt;/span\u0026gt; = tableView.bounds.width\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I find \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/36422189/5175709\u0026quot;\u0026gt;Suragh\u0026apos;s answer\u0026lt;/a\u0026gt; the most complete and \u0026lt;strong\u0026gt;concise\u0026lt;/strong\u0026gt;, hence not confusing. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Though non explain \u0026lt;strong\u0026gt;why\u0026lt;/strong\u0026gt; these changes are needed. Let\u0026apos;s do that. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Drop the following code in to a project. \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; UIKit\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ViewController\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;UIViewController\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lazy\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; label : \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UILabel\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; lbl \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UILabel\u0026lt;/span\u0026gt;()\n        lbl.translatesAutoresizingMaskIntoConstraints \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;\n        lbl.backgroundColor \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; .red\n        lbl.textColor \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; .black\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; lbl\n    }()\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;viewDidLoad\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.viewDidLoad()\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// step0: (0.0, 0.0)\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;empty Text intrinsicContentSize: \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;\\(label.intrinsicContentSize)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ----------\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// step1: (29.0, 20.5)\u0026lt;/span\u0026gt;\n        label.text \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hiiiii\u0026quot;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hiiiii intrinsicContentSize: \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;\\(label.intrinsicContentSize)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ----------\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// step2: (328.0, 20.5)\u0026lt;/span\u0026gt;\n        label.text \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;translatesAutoresizingMaskIntoConstraints\u0026quot;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;1 translate intrinsicContentSize: \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;\\(label.intrinsicContentSize)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ----------\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// step3: (992.0, 20.5)\u0026lt;/span\u0026gt;\n        label.text \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;translatesAutoresizingMaskIntoConstraints translatesAutoresizingMaskIntoConstraints translatesAutoresizingMaskIntoConstraints\u0026quot;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;3 translate intrinsicContentSize: \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;\\(label.intrinsicContentSize)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ----------\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// step4: (328.0, 20.5)\u0026lt;/span\u0026gt;\n        label.text \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;translatesAutoresizingMaskIntoConstraints\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;\\n\u0026lt;/span\u0026gt;translatesAutoresizingMaskIntoConstraints\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;\\n\u0026lt;/span\u0026gt;translatesAutoresizingMaskIntoConstraints\u0026quot;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;3 translate w/ line breaks (but the line breaks get ignored, because numberOfLines is defaulted to `1` and it will force it all to fit into one line! intrinsicContentSize: \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;\\(label.intrinsicContentSize)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ----------\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// step5: (328.0, 61.0)\u0026lt;/span\u0026gt;\n        label.numberOfLines \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;3 translate w/ line breaks and \u0026apos;0\u0026apos; numberOfLines intrinsicContentSize: \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;\\(label.intrinsicContentSize)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ----------\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// step6: (98.5, 243.5)\u0026lt;/span\u0026gt;\n        label.preferredMaxLayoutWidth \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;3 translate w/ line breaks | \u0026apos;0\u0026apos; numberOfLines | preferredMaxLayoutWidth: 100 intrinsicContentSize: \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;\\(label.intrinsicContentSize)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;)\n\n        setupLayout()\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setupLayout\u0026lt;/span\u0026gt;(){\n        view.addSubview(label)\n        label.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;\n        label.centerYAnchor.constraint(equalTo: view.centerYAnchor).isActive \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note that I haven\u0026apos;t added any \u0026lt;em\u0026gt;size\u0026lt;/em\u0026gt; constraints. I\u0026apos;ve only added centerX, centerY constraints. But still the label will be sized correctly Why? \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Because of \u0026lt;code\u0026gt;contentSize\u0026lt;/code\u0026gt;.\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To better process this, first keep step0, then comment out out steps 1-6. Let \u0026lt;code\u0026gt;setupLayout()\u0026lt;/code\u0026gt; stay. Observe the behavior. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Then uncomment step1, and observe.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Then uncomment step2 and observe. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Do this until you\u0026apos;ve uncommented all 6 steps and observed their behaviors. \u0026lt;/p\u0026gt;\n\n\u0026lt;h1\u0026gt;What can conclude from all this? What factors can change the \u0026lt;code\u0026gt;contenSize\u0026lt;/code\u0026gt;?\u0026lt;/h1\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Text Length:\u0026lt;/strong\u0026gt; If you have a longer text then your intrinsicContentSize\u0026apos;s \u0026lt;em\u0026gt;width\u0026lt;/em\u0026gt; will increase\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Line breaks:\u0026lt;/strong\u0026gt; If you add \u0026lt;code\u0026gt;\\n\u0026lt;/code\u0026gt; then the intrinsicContentSize\u0026apos;s width will the maximum width of all lines. If one line has 25 characters, another has 2 characters and another has 21 characters then your width will be calculated based the 25 characters\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Number of allowed lines:\u0026lt;/strong\u0026gt; You must set the \u0026lt;code\u0026gt;numberOfLines\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;0\u0026lt;/code\u0026gt; otherwise the you won\u0026apos;t have multiple lines. Your \u0026lt;code\u0026gt;numberOfLines\u0026lt;/code\u0026gt; will adjust your intrinsicContentSize\u0026apos;s \u0026lt;em\u0026gt;height\u0026lt;/em\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Making adjustments:\u0026lt;/strong\u0026gt; Imagine that based on your text, your intrinsicContentSize\u0026apos;s width was \u0026lt;code\u0026gt;200\u0026lt;/code\u0026gt; and height was \u0026lt;code\u0026gt;100\u0026lt;/code\u0026gt;, but you wanted to limited the width to the label\u0026apos;s container what are you going to do? The solution is to set it to a desired width. You do that by setting \u0026lt;a href=\u0026quot;https://developer.apple.com/documentation/uikit/uilabel/1620534-preferredmaxlayoutwidth\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;preferredMaxLayoutWidth\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to \u0026lt;code\u0026gt;130\u0026lt;/code\u0026gt; then your new intrinsicContentSize will have a width of roughly \u0026lt;code\u0026gt;130\u0026lt;/code\u0026gt;. The height would obviously be more than \u0026lt;code\u0026gt;100\u0026lt;/code\u0026gt; because you\u0026apos;d need more lines. \nThat being said if your constraints are set correctly then you won\u0026apos;t need to use this at all! For more on that see \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/52709988/5175709\u0026quot;\u0026gt;this answer\u0026lt;/a\u0026gt; and its comments. You only need to use \u0026lt;code\u0026gt;preferredMaxLayoutWidth\u0026lt;/code\u0026gt; if you don\u0026apos;t have constraints restricting the width/height as in one might say \u0026quot;don\u0026apos;t wrap the text unless it exceeds the \u0026lt;code\u0026gt;preferredMaxLayoutWidth\u0026lt;/code\u0026gt;\u0026quot;. But with 100% certainty if you set the leading/trailing and \u0026lt;code\u0026gt;numberOfLines\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;0\u0026lt;/code\u0026gt; then you\u0026apos;re good! \u0026lt;strong\u0026gt;Long story short most answers here which recommend using it are WRONG! You don\u0026apos;t need it. Needing it is a sign that your constraints are not set correctly or that you just don\u0026apos;t have constraints\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Font Size:\u0026lt;/strong\u0026gt; Also note that if you increase your fontSize then the intrinsicContentSize\u0026apos;s \u0026lt;em\u0026gt;height\u0026lt;/em\u0026gt; will increase. I didn\u0026apos;t show that in my code. You can try that on your own.\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;So back to your tableViewCell example:\u0026lt;/strong\u0026gt; \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;All you need to do is:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;set the \u0026lt;code\u0026gt;numberOfLines\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;0\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;constrain the label correctly to the margins/edges\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;There is no need to set \u0026lt;code\u0026gt;preferredMaxLayoutWidth\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In my case i have to create a custom cell with a image which is coming from server and can be of any width and height. And two UILabels with dynamic size(both width \u0026amp;amp; height)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;i have achieved the same here in my answer with autolayout and programmatically:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Basically above @smileyBorg answer helped but systemLayoutSizeFittingSize never worked for me, In my approach :\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;1. No use of automatic row height calculation property. 2.No use of estimated height 3.No need of unnecessary updateConstraints. 4.No use of Automatic Preferred Max Layout Width. 5. No use of \u0026lt;strong\u0026gt;systemLayoutSizeFittingSize\u0026lt;/strong\u0026gt; (should have use but not working for me, i dont know what it is doing internally), but instead my method -(float)getViewHeight working and i know what it\u0026apos;s doing internally.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/37235605/is-it-possible-to-have-differing-heights-in-a-uitableview-cell-when-i-use-severa/37236303#37236303\u0026quot;\u0026gt;Is it possible to have differing heights in a UITableView Cell when I use several different ways of displaying the cell?\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In my case, the padding was because of the sectionHeader and sectionFooter heights, where storyboard allowed me to change it to minimum 1. So in viewDidLoad method:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.sectionHeaderHeight\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.sectionFooterHeight\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I just did some dumb try and error with the 2 values of \u0026lt;code\u0026gt;rowHeight\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;estimatedRowHeight\u0026lt;/code\u0026gt; and just thought it might provide some debugging insight:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you set them both OR only set the \u0026lt;code\u0026gt;estimatedRowHeight\u0026lt;/code\u0026gt; you will get the desired behavior:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.rowHeight\u0026lt;/span\u0026gt; = UITableViewAutomaticDimension\n\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.estimatedRowHeight\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.00001\u0026lt;/span\u0026gt; // MUST be greater than \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It\u0026apos;s suggested that you do your best to get the correct estimate, but the end result isn\u0026apos;t different. It will just affect your performance.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/b8pfSl.png\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/b8pfSl.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;If you only set the rowHeight ie only do:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.rowHeight\u0026lt;/span\u0026gt; = UITableViewAutomaticDimension\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;your end result would not be as desired:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/koQnPl.png\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/koQnPl.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;If you set the \u0026lt;code\u0026gt;estimatedRowHeight\u0026lt;/code\u0026gt; to 1 or smaller then you will \u0026lt;strong\u0026gt;crash\u0026lt;/strong\u0026gt; regardless of the \u0026lt;code\u0026gt;rowHeight\u0026lt;/code\u0026gt;. \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.rowHeight\u0026lt;/span\u0026gt; = UITableViewAutomaticDimension\n\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tableView.estimatedRowHeight\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I crashed with the following error message:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-delphi\u0026quot;\u0026gt;Terminating app due \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;to\u0026lt;/span\u0026gt; uncaught exception\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;NSInternalInconsistencyException\u0026apos;\u0026lt;/span\u0026gt;, reason: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;table view row height\nmust not be negative - provided height for index path (\u0026amp;lt;NSIndexPath:\n0xc000000000000016\u0026amp;gt; {length = 2, path = 0 - 0}) is -1.000000\u0026apos;\u0026lt;/span\u0026gt;\n    ...some other lines...\n\nlibc++abi.dylib: terminating \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; uncaught exception \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;of\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;\nNSException\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;With regard to the accepted answer by @smileyborg, I have found\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;[\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;cell.contentView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;to be unreliable in some cases where constraints are ambiguous.  Better to force the layout engine to calculate the height in one direction, by using the helper category on UIView below:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;-(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)systemLayoutHeightForWidth:(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;)w{\n    [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; setNeedsLayout];\n    [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; layoutIfNeeded];\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGSize\u0026lt;/span\u0026gt; size = [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; systemLayoutSizeFittingSize:\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGSizeMake\u0026lt;/span\u0026gt;(w, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) withHorizontalFittingPriority:\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UILayoutPriorityRequired\u0026lt;/span\u0026gt; verticalFittingPriority:\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;UILayoutPriorityFittingSizeLevel\u0026lt;/span\u0026gt;];\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt; h = size.height;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; h;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Where w: is the width of the tableview\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Simply add these two functions in your viewcontroller it will solve your problem. Here, list is a string array which contain your string of every row.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;_\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;, \n   \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;estimatedHeightForRowAt\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;indexPath\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;IndexPath\u0026lt;/span\u0026gt;) -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt; {\n        tableView.rowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.calculateHeight(inString: list[indexPath.row])\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (tableView.rowHeight) \n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;calculateHeight\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;inString\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;) -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; messageString \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; input.text\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; attributes : [\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSAttributedStringKey\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;Any\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; [\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSAttributedStringKey\u0026lt;/span\u0026gt;(rawValue: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSAttributedStringKey\u0026lt;/span\u0026gt;.font.rawValue) : \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UIFont\u0026lt;/span\u0026gt;.systemFont(ofSize: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15.0\u0026lt;/span\u0026gt;)]\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; attributedString : \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSAttributedString\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSAttributedString\u0026lt;/span\u0026gt;(string: messageString\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;!\u0026lt;/span\u0026gt;, attributes: attributes)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; rect : \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGRect\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; attributedString.boundingRect(with: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGSize\u0026lt;/span\u0026gt;(width: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;222.0\u0026lt;/span\u0026gt;, height: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;.greatestFiniteMagnitude), options: .usesLineFragmentOrigin, context: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;nil\u0026lt;/span\u0026gt;)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; requredSize:\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGRect\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; rect\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; requredSize.height\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;swift \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@IBOutlet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;weak\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; tableViewHeightConstraint: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSLayoutConstraint\u0026lt;/span\u0026gt;!\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;@IBOutlet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;weak\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; tableView: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;!\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; context \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;viewDidLoad\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.viewDidLoad()\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.tableView.addObserver(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;, forKeyPath: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;contentSize\u0026quot;\u0026lt;/span\u0026gt;, options: [.new,.prior], context: \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt;context)\n    }\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Added observer to adjust tableview height based on the content\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;observeValue\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;forKeyPath\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;keyPath\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;?, \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;of\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;Any\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;?\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;change\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;NSKeyValueChangeKey\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;Any\u0026lt;/span\u0026gt;]\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;?\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;context\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UnsafeMutableRawPointer\u0026lt;/span\u0026gt;?) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; context \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;==\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;.context{\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; size \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; change\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;?\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSKeyValueChangeKey\u0026lt;/span\u0026gt;.newKey] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as?\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGSize\u0026lt;/span\u0026gt;{\n                \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-----\u0026quot;\u0026lt;/span\u0026gt;)\n                \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(size.height)\n                tableViewHeightConstraint.constant \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; size.height \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;\n            }\n        }\n    }\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Remove observer\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;deinit\u0026lt;/span\u0026gt; {\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NotificationCenter\u0026lt;/span\u0026gt;.default.removeObserver(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;)\n\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If the cell height is dynamic by the content, you should precisely count it out and then return the height value before the cell is rendered. An easy way is to define the counting method in the table view cell code for controller to call at the table cell height delegate method. Don\u0026apos;t forget to count out the \u0026lt;strong\u0026gt;real cell frame width\u0026lt;/strong\u0026gt; (default is 320) if the height is rely on the width of the table or screen. That is, \u0026lt;strong\u0026gt;in the table cell height delegate method, use cell.frame to correct the cell width first, then call the counting height method defined in the cell to get the suitable value and return it\u0026lt;/strong\u0026gt;. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;PS. The code for generating cell object could be defined in another method for different table view cell delegate method to call.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;UITableView.automaticDimension\u0026lt;/code\u0026gt; can be set via Interface Builder:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Xcode \u0026amp;gt; Storyboard \u0026amp;gt; Size Inspector\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Table View Cell \u0026amp;gt; Row Height \u0026amp;gt; \u0026lt;strong\u0026gt;Automatic\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/FsczL.png\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/FsczL.png\u0026quot; alt=\u0026quot;Size Inspector\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;yet another iOs7+iOs8 solution in Swift\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; cell2height:\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;44\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;viewDidLoad\u0026lt;/span\u0026gt;() {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.viewDidLoad()\n    theTable.rowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableViewAutomaticDimension\u0026lt;/span\u0026gt;\n    theTable.estimatedRowHeight \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;44.0\u0026lt;/span\u0026gt;;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;cellForRowAtIndexPath\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;indexPath\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSIndexPath\u0026lt;/span\u0026gt;) -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableViewCell\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; cell \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;  tableView.dequeueReusableCellWithIdentifier(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;myTableViewCell\u0026quot;\u0026lt;/span\u0026gt;, forIndexPath: indexPath) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as!\u0026lt;/span\u0026gt; myTableViewCell\n    cell2height\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;cell.contentView.height\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; cell\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tableView\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableView\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;heightForRowAtIndexPath\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;indexPath\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NSIndexPath\u0026lt;/span\u0026gt;) -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CGFloat\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;#available\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;iOS\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8.0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;UITableViewAutomaticDimension\u0026lt;/span\u0026gt;\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; cell2height\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":352,"title":"Using Auto Layout in UITableView for dynamic cell layouts \u0026 variable row heights","content":"\n                \n\u0026lt;p\u0026gt;How do you use Auto Layout within \u0026lt;code\u0026gt;UITableViewCell\u0026lt;/code\u0026gt;s in a table view to let each cell\u0026apos;s content and subviews determine the row height (itself/automatically), while maintaining smooth scrolling performance?\u0026lt;/p\u0026gt;\n    ","slug":"using-auto-layout-in-uitableview-for-dynamic-cell-layouts-and-variable-row-heights-1657387722263","postType":"QUESTION","createdAt":"2022-07-09T17:28:42.000Z","updatedAt":"2022-07-09T17:28:42.000Z","tags":[{"id":1974,"name":"uitableview","slug":"uitableview","createdAt":"2022-07-09T17:28:42.000Z","updatedAt":"2022-07-09T17:28:42.000Z","Questions_Tags":{"questionId":352,"tagId":1974}},{"id":1975,"name":"autolayout","slug":"autolayout","createdAt":"2022-07-09T17:28:42.000Z","updatedAt":"2022-07-09T17:28:42.000Z","Questions_Tags":{"questionId":352,"tagId":1975}},{"id":1976,"name":"row-height","slug":"row-height","createdAt":"2022-07-09T17:28:42.000Z","updatedAt":"2022-07-09T17:28:42.000Z","Questions_Tags":{"questionId":352,"tagId":1976}}],"relatedQuestions":[{"title":"Using Auto Layout in UITableView for dynamic cell layouts \u0026 variable row heights","slug":"using-auto-layout-in-uitableview-for-dynamic-cell-layouts-and-variable-row-heights-1657387722263","tags":[{"name":"uitableview","Questions_Tags":{"questionId":352,"tagId":1974}},{"name":"autolayout","Questions_Tags":{"questionId":352,"tagId":1975}},{"name":"row-height","Questions_Tags":{"questionId":352,"tagId":1976}}]}]},"randomQuestions":[{"title":"How to add to the PYTHONPATH in Windows, so it finds my modules/packages?","slug":"how-to-add-to-the-pythonpath-in-windows-so-it-finds-my-modulespackages-1657388540360"},{"title":"How to get all possible combinations of a lists elements?","slug":"how-to-get-all-possible-combinations-of-a-list's-elements-1657388271070"},{"title":"What is __init__.py for?","slug":"what-is-__init__.py-for-1657388415243"},{"title":"Why is using the JavaScript eval function a bad idea?","slug":"why-is-using-the-javascript-eval-function-a-bad-idea-1657387485165"},{"title":"How do I clone a list so that it doesn't change unexpectedly after assignment?","slug":"how-do-i-clone-a-list-so-that-it-doesn't-change-unexpectedly-after-assignment-1657384423195"},{"title":"How should I use servlets and Ajax?","slug":"how-should-i-use-servlets-and-ajax-1657385492684"},{"title":"Where can I find documentation on formatting a date in JavaScript?","slug":"where-can-i-find-documentation-on-formatting-a-date-in-javascript-1657384878157"},{"title":"What is the difference between \"px\", \"dip\", \"dp\" and \"sp\"?","slug":"what-is-the-difference-between-\"px\"-\"dip\"-\"dp\"-and-\"sp\"-1657388093250"},{"title":"How to filter Pandas dataframe using 'in' and 'not in' like in SQL","slug":"how-to-filter-pandas-dataframe-using-'in'-and-'not-in'-like-in-sql-1657387371355"},{"title":"How can I avoid Java code in JSP files, using JSP 2?","slug":"how-can-i-avoid-java-code-in-jsp-files-using-jsp-2-1657384618866"},{"title":"How to return DataSnapshot value as a result of a method?","slug":"how-to-return-datasnapshot-value-as-a-result-of-a-method-1657387538165"},{"title":"How to deal with mysqli problems? mysqli_fetch_array(): Argument #1 must be of type mysqli_result","slug":"how-to-deal-with-mysqli-problems-mysqli_fetch_array():-argument-1-must-be-of-type-mysqli_result-1657384360922"},{"title":"How do I set a variable to the output of a command in Bash?","slug":"how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-1657387250909"},{"title":"How do I use shell variables in an awk script?","slug":"how-do-i-use-shell-variables-in-an-awk-script-1657387754261"},{"title":"PHP parse/syntax errors; and how to solve them","slug":"php-parsesyntax-errors-and-how-to-solve-them-1657384264713"},{"title":"How to create a GUID / UUID","slug":"how-to-create-a-guid-uuid-1657387749530"},{"title":"Flexbox: center horizontally and vertically","slug":"flexbox:-center-horizontally-and-vertically-1657384587888"},{"title":"How to use PHP's password_hash to hash and verify passwords","slug":"how-to-use-php's-password_hash-to-hash-and-verify-passwords-1657387808784"},{"title":"Why is 24.0000 not equal to 24.0000 in MATLAB?","slug":"why-is-24.0000-not-equal-to-24.0000-in-matlab-1657388376753"},{"title":"How do I profile a Python script?","slug":"how-do-i-profile-a-python-script-1657388346692"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"using-auto-layout-in-uitableview-for-dynamic-cell-layouts-and-variable-row-heights-1657387722263"},"buildId":"Zo3C7AOWQzKM9qqyzx2hf","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>