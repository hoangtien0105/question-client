{"pageProps":{"data":{"answer":["\n&lt;p&gt;By using the &lt;code&gt;merge&lt;/code&gt; function and its optional parameters:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;em&gt;Inner join:&lt;/em&gt;&lt;/strong&gt; &lt;code&gt;merge(df1, df2)&lt;/code&gt; will work for these examples because R automatically joins the frames by common variable names, but you would most likely want to specify &lt;code&gt;merge(df1, df2, by = &quot;CustomerId&quot;)&lt;/code&gt; to make sure that you were matching on only the fields you desired.  You can also use the &lt;code&gt;by.x&lt;/code&gt; and &lt;code&gt;by.y&lt;/code&gt; parameters if the matching variables have different names in the different data frames.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;em&gt;Outer join:&lt;/em&gt;&lt;/strong&gt; &lt;code&gt;merge(x = df1, y = df2, by = &quot;CustomerId&quot;, all = TRUE)&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;em&gt;Left outer:&lt;/em&gt;&lt;/strong&gt; &lt;code&gt;merge(x = df1, y = df2, by = &quot;CustomerId&quot;, all.x = TRUE)&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;em&gt;Right outer:&lt;/em&gt;&lt;/strong&gt; &lt;code&gt;merge(x = df1, y = df2, by = &quot;CustomerId&quot;, all.y = TRUE)&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;em&gt;Cross join:&lt;/em&gt;&lt;/strong&gt; &lt;code&gt;merge(x = df1, y = df2, by = NULL)&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strike&gt;Just as with the inner join, you would probably want to explicitly pass &quot;CustomerId&quot; to R as the matching variable.&lt;/strike&gt;  I think it&apos;s almost always best to explicitly state the identifiers on which you want to merge; it&apos;s safer if the input data.frames change unexpectedly and easier to read later on.&lt;/p&gt;\n\n&lt;p&gt;You can merge on multiple columns by giving &lt;code&gt;by&lt;/code&gt; a vector, e.g., &lt;code&gt;by = c(&quot;CustomerId&quot;, &quot;OrderId&quot;)&lt;/code&gt;. &lt;/p&gt;\n\n&lt;p&gt;If the column names to merge on are not the same, you can specify, e.g., &lt;code&gt;by.x = &quot;CustomerId_in_df1&quot;, by.y = &quot;CustomerId_in_df2&quot;&lt;/code&gt; where &lt;code&gt;CustomerId_in_df1&lt;/code&gt; is the name of the column in the first data frame and &lt;code&gt;CustomerId_in_df2&lt;/code&gt; is the name of the column in the second data frame. (These can also be vectors if you need to merge on multiple columns.)&lt;/p&gt;\n    ","\n&lt;p&gt;I would recommend checking out &lt;a href=&quot;http://cran.r-project.org/web/packages/sqldf/index.html&quot; rel=&quot;noreferrer&quot;&gt;Gabor Grothendieck&apos;s sqldf package&lt;/a&gt;, which allows you to express these operations in SQL.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;## inner join&lt;/span&gt;\ndf3 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT CustomerId, Product, State \n              FROM df1\n              JOIN df2 USING(CustomerID)&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;## left join (substitute &apos;right&apos; for right join)&lt;/span&gt;\ndf4 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT CustomerId, Product, State \n              FROM df1\n              LEFT JOIN df2 USING(CustomerID)&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I find the SQL syntax to be simpler and more natural than its R equivalent (but this may just reflect my RDBMS bias).&lt;/p&gt;\n\n&lt;p&gt;See &lt;a href=&quot;https://github.com/ggrothendieck/sqldf#example-4-join&quot; rel=&quot;noreferrer&quot;&gt;Gabor&apos;s sqldf GitHub&lt;/a&gt; for more information on joins. &lt;/p&gt;\n    ","\n&lt;p&gt;There is the &lt;strong&gt;data.table&lt;/strong&gt; approach for an inner join, which is very time and memory efficient (and necessary for some larger data.frames):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\ndt1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; key &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;CustomerId&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; \ndt2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; key &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;CustomerId&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\njoined.dt1.dt.2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;code&gt;merge&lt;/code&gt; also works on data.tables (as it is generic and calls &lt;code&gt;merge.data.table&lt;/code&gt;)&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;data.table documented on stackoverflow:&lt;br&gt;\n&lt;a href=&quot;https://stackoverflow.com/questions/2232699/r-how-to-do-a-data-table-merge-operation&quot;&gt;How to do a data.table merge operation&lt;/a&gt;&lt;br&gt;\n&lt;a href=&quot;https://stackoverflow.com/questions/9914734/translating-sql-joins-on-foreign-keys-to-r-data-table-syntax&quot;&gt;Translating SQL joins on foreign keys to R data.table syntax&lt;/a&gt;&lt;br&gt;\n&lt;a href=&quot;https://stackoverflow.com/questions/11146967/efficient-alternatives-to-merge-for-larger-data-frames-r&quot;&gt;Efficient alternatives to merge for larger data.frames R&lt;/a&gt;&lt;br&gt;\n&lt;a href=&quot;https://stackoverflow.com/questions/7090621/how-to-do-a-basic-left-outer-join-with-data-table-in-r&quot;&gt;How to do a basic left outer join with data.table in R?&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Yet another option is the &lt;code&gt;join&lt;/code&gt; function found in the &lt;a href=&quot;http://cran.r-project.org/web/packages/plyr/index.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;plyr&lt;/strong&gt;&lt;/a&gt; package&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;plyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\njoin&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n     type &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;inner&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#   CustomerId Product   State&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 1          2 Toaster Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 2          4   Radio Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 3          6   Radio    Ohio&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Options for &lt;code&gt;type&lt;/code&gt;: &lt;code&gt;inner&lt;/code&gt;, &lt;code&gt;left&lt;/code&gt;, &lt;code&gt;right&lt;/code&gt;, &lt;code&gt;full&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;From &lt;code&gt;?join&lt;/code&gt;: Unlike &lt;code&gt;merge&lt;/code&gt;, [&lt;code&gt;join&lt;/code&gt;] preserves the order of x no matter what join type is used.&lt;/p&gt;\n    ","\n&lt;p&gt;You can do joins as well using Hadley Wickham&apos;s awesome &lt;a href=&quot;http://blog.rstudio.org/2014/01/17/introducing-dplyr/&quot;&gt;dplyr&lt;/a&gt; package.  &lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dplyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#make sure that CustomerId cols are both type numeric&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#they ARE not using the provided code in question and dplyr will complain&lt;/span&gt;\ndf1&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;CustomerId &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.numeric&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf2&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;CustomerId &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.numeric&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h2&gt;Mutating joins: add columns to df1 using matches in df2&lt;/h2&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;#inner&lt;/span&gt;\ninner_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#left outer&lt;/span&gt;\nleft_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#right outer&lt;/span&gt;\nright_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#alternate right outer&lt;/span&gt;\nleft_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#full join&lt;/span&gt;\nfull_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h2&gt;Filtering joins: filter out rows in df1, don&apos;t modify columns&lt;/h2&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;semi_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;#keep only observations in df1 that match in df2.&lt;/span&gt;\nanti_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;#drops all observations in df1 that match in df2.&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;There are some good examples of doing this over at the &lt;a href=&quot;http://wiki.r-project.org/rwiki/doku.php?id=tips:data-frames:merge&quot; rel=&quot;noreferrer&quot;&gt;R Wiki&lt;/a&gt;. I&apos;ll steal a couple here:&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Merge Method&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Since your keys are named the same the short way to do an inner join is merge():&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;a full inner join (all records from both tables) can be created with the &quot;all&quot; keyword:&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;a left outer join of df1 and df2:&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; all.x&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;a right outer join of df1 and df2:&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; all.y&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;you can flip &apos;em, slap &apos;em and rub &apos;em down to get the other two outer joins you asked about :)&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Subscript Method&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;A left outer join with df1 on the left using a subscript method would be:&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;State&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Product&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;State&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The other combination of outer joins can be created by mungling the left outer join subscript example. (yeah, I know that&apos;s the equivalent of saying &quot;I&apos;ll leave it as an exercise for the reader...&quot;)&lt;/p&gt;\n    ","\n&lt;p&gt;New in 2014: &lt;/p&gt;\n\n&lt;p&gt;Especially if you&apos;re also interested in data manipulation in general (including sorting, filtering, subsetting, summarizing etc.), you should definitely take a look at &lt;code&gt;dplyr&lt;/code&gt;, which comes with a variety of functions all designed to facilitate your work specifically with data frames and certain other database types. It even offers quite an elaborate SQL interface, and even a function to convert (most) SQL code directly into R.&lt;/p&gt;\n\n&lt;p&gt;The four joining-related functions in the dplyr package are (to quote):&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;inner_join(x, y, by = NULL, copy = FALSE, ...)&lt;/code&gt;: return all rows from\nx where there are matching values in y, and all columns from x and y &lt;/li&gt;\n&lt;li&gt;&lt;code&gt;left_join(x, y, by = NULL, copy = FALSE, ...)&lt;/code&gt;: return all rows from x, and all columns from x and y &lt;/li&gt;\n&lt;li&gt;&lt;code&gt;semi_join(x, y, by = NULL, copy = FALSE, ...)&lt;/code&gt;: return all rows from x where there are matching values in\ny, keeping just columns from x.  &lt;/li&gt;\n&lt;li&gt;&lt;code&gt;anti_join(x, y, by = NULL, copy = FALSE, ...)&lt;/code&gt;: return all rows from x\nwhere there are not matching values in y, keeping just columns from x&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;It&apos;s all &lt;a href=&quot;http://cran.r-project.org/web/packages/dplyr/vignettes/introduction.html&quot; rel=&quot;noreferrer&quot;&gt;here&lt;/a&gt; in great detail.&lt;/p&gt;\n\n&lt;p&gt;Selecting columns can be done by &lt;code&gt;select(df,&quot;column&quot;)&lt;/code&gt;. If that&apos;s not SQL-ish enough for you, then there&apos;s the &lt;code&gt;sql()&lt;/code&gt; function, into which you can enter SQL code as-is, and it will do the operation you specified just like you were writing in R all along (for more information, please refer to the &lt;a href=&quot;http://cran.r-project.org/web/packages/dplyr/vignettes/databases.html&quot; rel=&quot;noreferrer&quot;&gt;dplyr/databases vignette&lt;/a&gt;). For example, if applied correctly, &lt;code&gt;sql(&quot;SELECT * FROM hflights&quot;)&lt;/code&gt; will select all the columns from the &quot;hflights&quot; dplyr table (a &quot;tbl&quot;).&lt;/p&gt;\n    ","\n&lt;p&gt;Update on data.table methods for joining datasets. See below examples for each type of join. There are two methods, one from &lt;code&gt;[.data.table&lt;/code&gt; when passing second data.table as the first argument to subset, another way is to use &lt;code&gt;merge&lt;/code&gt; function which dispatches to fast data.table method.  &lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;df1 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;CustomerId &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; Product &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Toaster&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Radio&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;CustomerId &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;7L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; State &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Alabama&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Ohio&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;# one value changed to show full outer join&lt;/span&gt;\n\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\ndt1 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndt2 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nsetkey&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; CustomerId&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nsetkey&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; CustomerId&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# right outer join keyed data.tables&lt;/span&gt;\ndt1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n\nsetkey&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nsetkey&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# right outer join unkeyed data.tables - use `on` argument&lt;/span&gt;\ndt1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; on &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;CustomerId&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# left outer join - swap dt1 with dt2&lt;/span&gt;\ndt2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; on &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;CustomerId&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# inner join - use `nomatch` argument&lt;/span&gt;\ndt1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; nomatch&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; on &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;CustomerId&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# anti join - use `!` operator&lt;/span&gt;\ndt1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;!&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; on &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;CustomerId&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# inner join - using merge method&lt;/span&gt;\nmerge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;CustomerId&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# full outer join&lt;/span&gt;\nmerge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;CustomerId&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;all&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# see ?merge.data.table arguments for other cases&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Below benchmark tests base R, sqldf, dplyr and data.table.&lt;br&gt;\nBenchmark tests unkeyed/unindexed datasets.\nBenchmark is performed on 50M-1 rows datasets, there are 50M-2 common values on join column so each scenario (inner, left, right, full) can be tested and join is still not trivial to perform. It is type of join which well stress join algorithms. Timings are as of &lt;code&gt;sqldf:0.4.11&lt;/code&gt;, &lt;code&gt;dplyr:0.7.8&lt;/code&gt;, &lt;code&gt;data.table:1.12.0&lt;/code&gt;.  &lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;# inner&lt;/span&gt;\nUnit&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt; seconds\n   expr       &lt;span class=&quot;hljs-built_in&quot;&gt;min&lt;/span&gt;        lq      mean    median        uq       &lt;span class=&quot;hljs-built_in&quot;&gt;max&lt;/span&gt; neval\n   base &lt;span class=&quot;hljs-number&quot;&gt;111.66266&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;111.66266&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;111.66266&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;111.66266&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;111.66266&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;111.66266&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n  sqldf &lt;span class=&quot;hljs-number&quot;&gt;624.88388&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;624.88388&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;624.88388&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;624.88388&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;624.88388&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;624.88388&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n  dplyr  &lt;span class=&quot;hljs-number&quot;&gt;51.91233&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;51.91233&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;51.91233&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;51.91233&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;51.91233&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;51.91233&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n     DT  &lt;span class=&quot;hljs-number&quot;&gt;10.40552&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;10.40552&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;10.40552&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;10.40552&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;10.40552&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;10.40552&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# left&lt;/span&gt;\nUnit&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt; seconds\n   expr        &lt;span class=&quot;hljs-built_in&quot;&gt;min&lt;/span&gt;         lq       mean     median         uq        &lt;span class=&quot;hljs-built_in&quot;&gt;max&lt;/span&gt; \n   base &lt;span class=&quot;hljs-number&quot;&gt;142.782030&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;142.782030&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;142.782030&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;142.782030&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;142.782030&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;142.782030&lt;/span&gt;     \n  sqldf &lt;span class=&quot;hljs-number&quot;&gt;613.917109&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;613.917109&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;613.917109&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;613.917109&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;613.917109&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;613.917109&lt;/span&gt;     \n  dplyr  &lt;span class=&quot;hljs-number&quot;&gt;49.711912&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;49.711912&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;49.711912&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;49.711912&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;49.711912&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;49.711912&lt;/span&gt;     \n     DT   &lt;span class=&quot;hljs-number&quot;&gt;9.674348&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;9.674348&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;9.674348&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;9.674348&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;9.674348&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;9.674348&lt;/span&gt;       \n&lt;span class=&quot;hljs-comment&quot;&gt;# right&lt;/span&gt;\nUnit&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt; seconds\n   expr        &lt;span class=&quot;hljs-built_in&quot;&gt;min&lt;/span&gt;         lq       mean     median         uq        &lt;span class=&quot;hljs-built_in&quot;&gt;max&lt;/span&gt;\n   base &lt;span class=&quot;hljs-number&quot;&gt;122.366301&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;122.366301&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;122.366301&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;122.366301&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;122.366301&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;122.366301&lt;/span&gt;     \n  sqldf &lt;span class=&quot;hljs-number&quot;&gt;611.119157&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;611.119157&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;611.119157&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;611.119157&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;611.119157&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;611.119157&lt;/span&gt;     \n  dplyr  &lt;span class=&quot;hljs-number&quot;&gt;50.384841&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;50.384841&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;50.384841&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;50.384841&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;50.384841&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;50.384841&lt;/span&gt;     \n     DT   &lt;span class=&quot;hljs-number&quot;&gt;9.899145&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;9.899145&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;9.899145&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;9.899145&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;9.899145&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;9.899145&lt;/span&gt;     \n&lt;span class=&quot;hljs-comment&quot;&gt;# full&lt;/span&gt;\nUnit&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt; seconds\n  expr       &lt;span class=&quot;hljs-built_in&quot;&gt;min&lt;/span&gt;        lq      mean    median        uq       &lt;span class=&quot;hljs-built_in&quot;&gt;max&lt;/span&gt; neval\n  base &lt;span class=&quot;hljs-number&quot;&gt;141.79464&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;141.79464&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;141.79464&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;141.79464&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;141.79464&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;141.79464&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n dplyr  &lt;span class=&quot;hljs-number&quot;&gt;94.66436&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;94.66436&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;94.66436&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;94.66436&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;94.66436&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;94.66436&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n    DT  &lt;span class=&quot;hljs-number&quot;&gt;21.62573&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;21.62573&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;21.62573&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;21.62573&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;21.62573&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;21.62573&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Be aware there are other types of joins you can perform using &lt;code&gt;data.table&lt;/code&gt;:&lt;br&gt;\n  - &lt;a href=&quot;https://stackoverflow.com/q/3190118/2490497&quot;&gt;update on join&lt;/a&gt; - if you want to lookup values from another table to your main table&lt;br&gt;\n  - &lt;a href=&quot;https://stackoverflow.com/q/41684012/2490497&quot;&gt;aggregate on join&lt;/a&gt; - if you want to aggregate on key you are joining you do not have to materialize all join results&lt;br&gt;\n  - &lt;a href=&quot;https://stackoverflow.com/q/25815032/2490497&quot;&gt;overlapping join&lt;/a&gt; - if you want to merge by ranges&lt;br&gt;\n  - &lt;a href=&quot;https://stackoverflow.com/q/12030932/2490497&quot;&gt;rolling join&lt;/a&gt; - if you want merge to be able to match to values from preceeding/following rows by rolling them forward or backward&lt;br&gt;\n  - &lt;a href=&quot;https://stackoverflow.com/q/41043047/2490497&quot;&gt;non-equi join&lt;/a&gt; - if your join condition is non-equal  &lt;/p&gt;\n\n&lt;p&gt;Code to reproduce:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;microbenchmark&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dplyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nsapply&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;sqldf&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;dplyr&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;data.table&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; packageVersion&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; simplify&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\nn &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;5e7&lt;/span&gt;\nset.seed&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;108&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf1 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;n&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; y1&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;rnorm&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;n&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; y2&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;rnorm&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndt1 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndt2 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\nmb &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# inner join&lt;/span&gt;\nmicrobenchmark&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;times &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               base &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               sqldf &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT * FROM df1 INNER JOIN df2 ON df1.x = df2.x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               dplyr &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; inner_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               DT &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; nomatch&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; on &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&amp;gt;&lt;/span&gt; mb&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;inner\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# left outer join&lt;/span&gt;\nmicrobenchmark&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;times &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               base &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; all.x &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               sqldf &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT * FROM df1 LEFT OUTER JOIN df2 ON df1.x = df2.x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               dplyr &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; left_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               DT &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; on &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&amp;gt;&lt;/span&gt; mb&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;left\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# right outer join&lt;/span&gt;\nmicrobenchmark&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;times &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               base &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; all.y &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               sqldf &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT * FROM df2 LEFT OUTER JOIN df1 ON df2.x = df1.x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               dplyr &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; right_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               DT &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; on &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&amp;gt;&lt;/span&gt; mb&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;right\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# full outer join&lt;/span&gt;\nmicrobenchmark&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;times &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               base &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;all&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               dplyr &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; full_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n               DT &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;all&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&amp;gt;&lt;/span&gt; mb&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;full\n\nlapply&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;mb&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; print&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&amp;gt;&lt;/span&gt; nul\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;dplyr since 0.4 implemented all those joins including &lt;code&gt;outer_join&lt;/code&gt;, but it was worth noting that &lt;strong&gt;for the first few releases prior to 0.4 it used not to offer &lt;code&gt;outer_join&lt;/code&gt;, and as a result there was a lot of really bad hacky workaround user code floating around for quite a while afterwards (you can still find such code in SO, Kaggle answers, github from that period. Hence this answer still serves a useful purpose.)&lt;/strong&gt; &lt;/p&gt;\n\n&lt;p&gt;Join-related &lt;a href=&quot;https://cran.r-project.org/web/packages/dplyr/news/news.html&quot; rel=&quot;noreferrer&quot;&gt;release highlights&lt;/a&gt;:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://blog.rstudio.com/2016/06/27/dplyr-0-5-0/&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;&lt;em&gt;v0.5&lt;/em&gt;&lt;/strong&gt; (6/2016)&lt;/a&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Handling for POSIXct type, timezones, duplicates, different factor levels. Better errors and warnings.&lt;/li&gt;\n&lt;li&gt;New suffix argument to control what suffix duplicated variable names receive (#1296)&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://blog.rstudio.com/2015/01/09/dplyr-0-4-0/&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;&lt;em&gt;v0.4.0&lt;/em&gt;&lt;/strong&gt; (1/2015)&lt;/a&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/tidyverse/dplyr/issues/96&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;Implement right join and outer join&lt;/strong&gt; (#96)&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;Mutating joins, which add new variables to one table from matching rows in another. Filtering joins, which filter observations from one table based on whether or not they match an observation in the other table.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://blog.rstudio.com/2014/10/13/dplyr-0-3-2/&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;&lt;em&gt;v0.3&lt;/em&gt;&lt;/strong&gt; (10/2014)&lt;/a&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Can now left_join by different variables in each table: df1 %&amp;gt;% left_join(df2, c(&quot;var1&quot; = &quot;var2&quot;))&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://blog.rstudio.com/2014/05/21/dplyr-0-2/&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;&lt;em&gt;v0.2&lt;/em&gt;&lt;/strong&gt; (5/2014)&lt;/a&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;*_join() no longer reorders column names (#324)&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;em&gt;v0.1.3&lt;/em&gt;&lt;/strong&gt; (4/2014)&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;has &lt;strong&gt;inner_join, left_join, semi_join, anti_join&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;outer_join&lt;/strong&gt; not implemented yet, fallback is use base::merge() (or plyr::join())&lt;/li&gt;\n&lt;li&gt;didn&apos;t yet &lt;a href=&quot;https://github.com/hadley/dplyr/issues/96&quot; rel=&quot;noreferrer&quot;&gt;implement right_join and &lt;strong&gt;outer_join&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://groups.google.com/forum/#!topic/manipulatr/OuAPC4VyfIc&quot; rel=&quot;noreferrer&quot;&gt;Hadley mentioning other advantages here&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;one minor feature merge currently has that dplyr doesn&apos;t is &lt;a href=&quot;https://github.com/hadley/dplyr/issues/177&quot; rel=&quot;noreferrer&quot;&gt;the ability to have separate by.x,by.y columns&lt;/a&gt; as e.g. Python pandas does.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Workarounds per hadley&apos;s comments in that issue:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;right_join&lt;/strong&gt;(x,y) is the same as left_join(y,x) in terms of the rows, just the columns will be different orders. Easily worked around with select(new_column_order)&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;outer_join&lt;/strong&gt; is basically union(left_join(x, y), right_join(x, y)) - i.e. preserve all rows in both data frames.&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;For the case of a left join with a &lt;code&gt;0..*:0..1&lt;/code&gt; cardinality or a right join with a &lt;code&gt;0..1:0..*&lt;/code&gt; cardinality it is possible to assign in-place the unilateral columns from the joiner (the &lt;code&gt;0..1&lt;/code&gt; table) directly onto the joinee (the &lt;code&gt;0..*&lt;/code&gt; table), and thereby avoid the creation of an entirely new table of data. This requires matching the key columns from the joinee into the joiner and indexing+ordering the joiner&apos;s rows accordingly for the assignment.&lt;/p&gt;\n\n&lt;p&gt;If the key is a single column, then we can use a single call to &lt;a href=&quot;https://stat.ethz.ch/R-manual/R-devel/library/base/html/match.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;match()&lt;/code&gt;&lt;/a&gt; to do the matching. This is the case I&apos;ll cover in this answer.&lt;/p&gt;\n\n&lt;p&gt;Here&apos;s an example based on the OP, except I&apos;ve added an extra row to &lt;code&gt;df2&lt;/code&gt; with an id of 7 to test the case of a non-matching key in the joiner. This is effectively &lt;code&gt;df1&lt;/code&gt; left join &lt;code&gt;df2&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;df1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;Product&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;Toaster&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;Radio&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;6L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;7L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;State&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;Alabama&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;Ohio&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;Texas&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\ndf1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;match&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\ndf1;\n&lt;span class=&quot;hljs-comment&quot;&gt;##   CustomerId Product   State&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 1          1 Toaster    &amp;lt;NA&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 2          2 Toaster Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 3          3 Toaster    &amp;lt;NA&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 4          4   Radio Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 5          5   Radio    &amp;lt;NA&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 6          6   Radio    Ohio&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;In the above I hard-coded an assumption that the key column is the first column of both input tables. I would argue that, in general, this is not an unreasonable assumption, since, if you have a data.frame with a key column, it would be strange if it had not been set up as the first column of the data.frame from the outset. And you can always reorder the columns to make it so. An advantageous consequence of this assumption is that the name of the key column does not have to be hard-coded, although I suppose it&apos;s just replacing one assumption with another. Concision is another advantage of integer indexing, as well as speed. In the benchmarks below I&apos;ll change the implementation to use string name indexing to match the competing implementations.&lt;/p&gt;\n\n&lt;p&gt;I think this is a particularly appropriate solution if you have several tables that you want to left join against a single large table. Repeatedly rebuilding the entire table for each merge would be unnecessary and inefficient.&lt;/p&gt;\n\n&lt;p&gt;On the other hand, if you need the joinee to remain unaltered through this operation for whatever reason, then this solution cannot be used, since it modifies the joinee directly. Although in that case you could simply make a copy and perform the in-place assignment(s) on the copy.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;As a side note, I briefly looked into possible matching solutions for multicolumn keys. Unfortunately, the only matching solutions I found were:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;inefficient concatenations. e.g. &lt;code&gt;match(interaction(df1$a,df1$b),interaction(df2$a,df2$b))&lt;/code&gt;, or the same idea with &lt;code&gt;paste()&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;inefficient cartesian conjunctions, e.g. &lt;code&gt;outer(df1$a,df2$a,`==`) &amp;amp; outer(df1$b,df2$b,`==`)&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;base R &lt;code&gt;merge()&lt;/code&gt; and equivalent package-based merge functions, which always allocate a new table to return the merged result, and thus are not suitable for an in-place assignment-based solution.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;For example, see &lt;a href=&quot;https://stackoverflow.com/questions/13286881/matching-multiple-columns-on-different-data-frames-and-getting-other-column-as-r&quot;&gt;Matching multiple columns on different data frames and getting other column as result&lt;/a&gt;, &lt;a href=&quot;https://stackoverflow.com/questions/6880450/match-two-columns-with-two-other-columns&quot;&gt;match two columns with two other columns&lt;/a&gt;, &lt;a href=&quot;https://stat.ethz.ch/pipermail/r-help/2007-January/123488.html&quot; rel=&quot;noreferrer&quot;&gt;Matching on multiple columns&lt;/a&gt;, and the dupe of this question where I originally came up with the in-place solution, &lt;a href=&quot;https://stackoverflow.com/questions/38066077/combine-two-data-frames-with-different-number-of-rows-in-r/38066281#38066281&quot;&gt;Combine two data frames with different number of rows in R&lt;/a&gt;.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;h1&gt;Benchmarking&lt;/h1&gt;\n\n&lt;p&gt;I decided to do my own benchmarking to see how the in-place assignment approach compares to the other solutions that have been offered in this question.&lt;/p&gt;\n\n&lt;p&gt;Testing code:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;microbenchmark&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;plyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dplyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n\nsolSpecs &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n    merge&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;testFuncs&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        inner&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        left &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;all.x&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        right&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;all.y&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        full &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    data.table.unkeyed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpec&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;data.table.unkeyed&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;testFuncs&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        inner&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;on&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;nomatch&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;allow.cartesian&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        left &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;on&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;allow.cartesian&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        right&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;on&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;allow.cartesian&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        full &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;allow.cartesian&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;## calls merge.data.table()&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    data.table.keyed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpec&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;data.table.keyed&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;testFuncs&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        inner&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;nomatch&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;allow.cartesian&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        left &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;allow.cartesian&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        right&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;allow.cartesian&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        full &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dt1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;dt2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;allow.cartesian&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;## calls merge.data.table()&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    sqldf.unindexed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;testFuncs&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;## note: must pass connection=NULL to avoid running against the live DB connection, which would result in collisions with the residual tables from the last query upload&lt;/span&gt;\n        inner&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;paste0&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;select * from df1 inner join df2 using(&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;connection&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        left &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;paste0&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;select * from df1 left join df2 using(&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;connection&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        right&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;paste0&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;select * from df2 left join df1 using(&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;connection&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;## can&apos;t do right join proper, not yet supported; inverted left join is equivalent&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;##full =function(df1,df2,key) sqldf(paste0(&apos;select * from df1 full join df2 using(&apos;,paste(collapse=&apos;,&apos;,key),&apos;)&apos;),connection=NULL) ## can&apos;t do full join proper, not yet supported; possible to hack it with a union of left joins, but too unreasonable to include in testing&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    sqldf.indexed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;testFuncs&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;## important: requires an active DB connection with preindexed main.df1 and main.df2 ready to go; arguments are actually ignored&lt;/span&gt;\n        inner&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;paste0&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;select * from main.df1 inner join main.df2 using(&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        left &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;paste0&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;select * from main.df1 left join main.df2 using(&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        right&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;paste0&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;select * from main.df2 left join main.df1 using(&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;## can&apos;t do right join proper, not yet supported; inverted left join is equivalent&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;##full =function(df1,df2,key) sqldf(paste0(&apos;select * from main.df1 full join main.df2 using(&apos;,paste(collapse=&apos;,&apos;,key),&apos;)&apos;)) ## can&apos;t do full join proper, not yet supported; possible to hack it with a union of left joins, but too unreasonable to include in testing&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    plyr&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;testFuncs&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        inner&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;inner&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        left &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;left&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        right&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;right&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        full &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;full&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    dplyr&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;testFuncs&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        inner&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; inner_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        left &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; left_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        right&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; right_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        full &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; full_join&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    in.place&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;testFuncs&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        left &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt; cns &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; setdiff&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; df1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;cns&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;match&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;cns&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;; df1; &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        right&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt; cns &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; setdiff&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;cns&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; df1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;match&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;cns&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;; df2; &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n\ngetSolTypes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;solSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\ngetJoinTypes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; unique&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;unlist&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;lapply&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;solSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;testFuncs&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\ngetArgSpec &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;key&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;is.null&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; argSpecs&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;default &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;key&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n\ninitSqldf &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n    sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## creates sqlite connection on first run, cleans up and closes existing connection otherwise&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;exists&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;sqldfInitFlag&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;envir&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;globalenv&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;inherits&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sqldfInitFlag&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;## false only on first run&lt;/span&gt;\n        sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## creates a new connection&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n        assign&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;sqldfInitFlag&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;envir&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;globalenv&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## set to true for the one and only time&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end if&lt;/span&gt;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;invisible&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end initSqldf()&lt;/span&gt;\n\nsetUpBenchmarkCall &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;getSolTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;env&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;parent.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;## builds and returns a list of expressions suitable for passing to the list argument of microbenchmark(), and assigns variables to resolve symbol references in those expressions&lt;/span&gt;\n    callExpressions &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    nms &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; character&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;solType &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n        testFunc &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; solSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;solType&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;testFuncs&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;is.null&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;testFunc&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;next&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## this join type is not defined for this solution type&lt;/span&gt;\n        testFuncName &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; paste0&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;tf.&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solType&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        assign&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;testFuncName&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;testFunc&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;envir&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;env&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        argSpecKey &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; solSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;solType&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;argSpec;\n        argSpec &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; getArgSpec&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;argSpecKey&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        argList &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; setNames&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;nm&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpec&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;args&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;vector&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;list&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpec&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;args&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;seq_along&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpec&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;args&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n            argName &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; paste0&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;tfa.&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;argSpecKey&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;i&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n            assign&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argName&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;argSpec&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;args&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;i&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;envir&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;env&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n            argList&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;i&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;hljs-operator&quot;&gt;%in%&lt;/span&gt;argSpec&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;copySpec&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;copy&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;as.symbol&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argName&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; as.symbol&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argName&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end for&lt;/span&gt;\n        callExpressions&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;callExpressions&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; do.call&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;testFuncName&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;argList&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;quote&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        nms&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;nms&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; solType;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end for&lt;/span&gt;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;callExpressions&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; nms;\n    callExpressions;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end setUpBenchmarkCall()&lt;/span&gt;\n\nharmonize &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n    res &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; as.data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## coerce to data.frame&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;ci &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; which&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;sapply&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;is.factor&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; res&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;ci&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.character&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;ci&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## coerce factor columns to character&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;ci &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; which&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;sapply&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;is.logical&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; res&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;ci&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.integer&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;ci&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## coerce logical columns to integer (works around sqldf quirk of munging logicals to integers)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;##for (ci in which(sapply(res,inherits,&apos;POSIXct&apos;))) res[[ci]] &amp;lt;- as.double(res[[ci]]); ## coerce POSIXct columns to double (works around sqldf quirk of losing POSIXct class) ----- POSIXct doesn&apos;t work at all in sqldf.indexed&lt;/span&gt;\n    res &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; res&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;order&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## order columns&lt;/span&gt;\n    res &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; res&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;do.call&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;order&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## order rows&lt;/span&gt;\n    res;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end harmonize()&lt;/span&gt;\n\ncheckIdentical &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;getSolTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;joinType &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; getJoinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n        callExpressions &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; setUpBenchmarkCall&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;callExpressions&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;next&lt;/span&gt;;\n        ex &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; harmonize&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;eval&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;callExpressions&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; seq&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;len&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;callExpressions&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n            y &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; harmonize&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;eval&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;callExpressions&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;i&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;!&lt;/span&gt;isTRUE&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;all.equal&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;ex&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;check.attributes&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n                ex &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt; ex;\n                y &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt; y;\n                solType &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;callExpressions&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n                stop&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;paste0&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;non-identical: &apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solType&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n            &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end if&lt;/span&gt;\n        &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end for&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end for&lt;/span&gt;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;invisible&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end checkIdentical()&lt;/span&gt;\n\ntestJoinType &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;getSolTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;metric&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;times&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;100L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n    callExpressions &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; setUpBenchmarkCall&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    bm &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; microbenchmark&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;callExpressions&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;times&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;times&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;is.null&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;metric&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;bm&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    bm &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; summary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;bm&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    res &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; setNames&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;nm&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;callExpressions&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;bm&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;metric&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;unit&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;bm&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;unit&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    res;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end testJoinType()&lt;/span&gt;\n\ntestAllJoinTypes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;getSolTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;metric&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;times&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;100L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n    joinTypes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; getJoinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    resList &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; setNames&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;nm&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;lapply&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; testJoinType&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;metric&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;times&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;is.null&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;metric&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;resList&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    units &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; unname&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;unlist&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;lapply&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;resList&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;unit&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    res &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; do.call&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;join&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;setNames&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;nm&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NA_real_&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;unit&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;units&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;stringsAsFactors&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;seq_along&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;resList&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; res&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;match&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;resList&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;i&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; resList&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;i&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n    res;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end testAllJoinTypes()&lt;/span&gt;\n\ntestGrid &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;makeArgSpecsFunc&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sizes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;overlaps&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;getSolTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;getJoinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;metric&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;median&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;times&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;100L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n\n    res &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; expand.grid&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sizes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;overlap&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;overlaps&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;joinType&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;stringsAsFactors&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    res&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;NA_real_&lt;/span&gt;;\n    res&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;unit &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;NA_character_&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;ri &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;seq_len&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;nrow&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n\n        size &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; res&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;ri&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n        overlap &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; res&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;ri&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n        joinType &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; res&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;ri&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n\n        argSpecs &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; makeArgSpecsFunc&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n\n        checkIdentical&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n\n        cur &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; testJoinType&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;metric&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;times&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        res&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;ri&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;match&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;cur&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; cur;\n        res&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;unit&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;ri&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;cur&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;unit&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end for&lt;/span&gt;\n\n    res;\n\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end testGrid()&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Here&apos;s a benchmark of the example based on the OP that I demonstrated earlier:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;## OP&apos;s example, supplemented with a non-matching row in df2&lt;/span&gt;\nargSpecs &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n    default&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;copySpec&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;args&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        df1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;Product&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;Toaster&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;Radio&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        df2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;6L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;7L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;State&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;Alabama&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;Ohio&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;Texas&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;CustomerId&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    data.table.unkeyed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;copySpec&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;args&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;CustomerId&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    data.table.keyed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;copySpec&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;args&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        setkey&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        setkey&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;## prepare sqldf&lt;/span&gt;\ninitSqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\nsqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;create index df1_key on df1(CustomerId);&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## upload and create an sqlite index on df1&lt;/span&gt;\nsqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;create index df2_key on df2(CustomerId);&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## upload and create an sqlite index on df2&lt;/span&gt;\n\ncheckIdentical&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n\ntestAllJoinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;argSpecs&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;metric&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;median&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;##    join    merge data.table.unkeyed data.table.keyed sqldf.unindexed sqldf.indexed      plyr    dplyr in.place         unit&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 1 inner  644.259           861.9345          923.516        9157.752      1580.390  959.2250 270.9190       NA microseconds&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 2  left  713.539           888.0205          910.045        8820.334      1529.714  968.4195 270.9185 224.3045 microseconds&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 3 right 1221.804           909.1900          923.944        8930.668      1533.135 1063.7860 269.8495 218.1035 microseconds&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 4  full 1302.203          3107.5380         3184.729              NA            NA 1593.6475 270.7055       NA microseconds&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Here I benchmark on random input data, trying different scales and different patterns of key overlap between the two input tables. This benchmark is still restricted to the case of a single-column integer key. As well, to ensure that the in-place solution would work for both left and right joins of the same tables, all random test data uses &lt;code&gt;0..1:0..1&lt;/code&gt; cardinality. This is implemented by sampling without replacement the key column of the first data.frame when generating the key column of the second data.frame.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;makeArgSpecs.singleIntegerKey.optionalOneToOne &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n\n    com &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.integer&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n\n    argSpecs &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        default&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;copySpec&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;args&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n            df1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y1&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;rnorm&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y2&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;rnorm&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n            df2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;com&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;id&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;com&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; integer&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;seq&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;len&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;size&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;com&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y3&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;rnorm&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y4&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;rnorm&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n            &lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;\n        &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        data.table.unkeyed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;copySpec&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;args&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n            as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n            as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n            &lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;\n        &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        data.table.keyed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;copySpec&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;args&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n            setkey&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;id&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n            setkey&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;id&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n        &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    &lt;span class=&quot;hljs-comment&quot;&gt;## prepare sqldf&lt;/span&gt;\n    initSqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;create index df1_key on df1(id);&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## upload and create an sqlite index on df1&lt;/span&gt;\n    sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;create index df2_key on df2(id);&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## upload and create an sqlite index on df2&lt;/span&gt;\n\n    argSpecs;\n\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end makeArgSpecs.singleIntegerKey.optionalOneToOne()&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;## cross of various input sizes and key overlaps&lt;/span&gt;\nsizes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1e1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1e3L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1e6L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\noverlaps &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.99&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.01&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\nsystem.time&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt; res &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; testGrid&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;makeArgSpecs.singleIntegerKey.optionalOneToOne&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sizes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;overlaps&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;##     user   system  elapsed&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 22024.65 12308.63 34493.19&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I wrote some code to create log-log plots of the above results. I generated a separate plot for each overlap percentage. It&apos;s a little bit cluttered, but I like having all the solution types and join types represented in the same plot.&lt;/p&gt;\n\n&lt;p&gt;I used spline interpolation to show a smooth curve for each solution/join type combination, drawn with individual pch symbols. The join type is captured by the pch symbol, using a dot for inner, left and right angle brackets for left and right, and a diamond for full. The solution type is captured by the color as shown in the legend.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;plotRes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;titleFunc&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;useFloor&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n    solTypes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; setdiff&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;size&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;overlap&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;joinType&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;unit&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## derive from res&lt;/span&gt;\n    normMult &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;microseconds&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1e-3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;milliseconds&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## normalize to milliseconds&lt;/span&gt;\n    joinTypes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; getJoinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    cols &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;merge&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;purple&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;data.table.unkeyed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;blue&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;data.table.keyed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;#00DDDD&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sqldf.unindexed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;brown&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sqldf.indexed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;orange&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;plyr&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;red&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;dplyr&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;#00BB00&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;in.place&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;magenta&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    pchs &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;inner&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;20L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;left&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;right&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;gt;&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;full&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;23L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    cexs &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;inner&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.7&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;left&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;right&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;full&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.7&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    NP &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; 60L;\n    ord &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; order&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;decreasing&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;colMeans&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;res&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;size&lt;span class=&quot;hljs-operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;na.rm&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    ymajors &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;y&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1e3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;label&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;1ms&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;1s&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;stringsAsFactors&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;overlap &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; unique&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n        x1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; res&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;res&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;overlap&lt;span class=&quot;hljs-operator&quot;&gt;==&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n        x1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; x1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;normMult&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;x1&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;unit&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;; x1&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;unit &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;;\n        xlim &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1e1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x1&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        xticks &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; 10&lt;span class=&quot;hljs-operator&quot;&gt;^&lt;/span&gt;seq&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;log10&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;xlim&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;log10&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;xlim&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        ylim &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1e-1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;useFloor&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;floor&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;ceiling&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;log10&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;na.rm&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## use floor() to zoom in a little more, only sqldf.unindexed will break above, but xpd=NA will keep it visible&lt;/span&gt;\n        yticks &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; 10&lt;span class=&quot;hljs-operator&quot;&gt;^&lt;/span&gt;seq&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;log10&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;ylim&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;log10&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;ylim&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        yticks.minor &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;yticks&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;yticks&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;each&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;9L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;;\n        plot&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;xlim&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;xlim&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;ylim&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;ylim&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;xaxs&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;i&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;yaxs&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;i&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;axes&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;xlab&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;size (rows)&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;ylab&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;time (ms)&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;xy&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        abline&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;v&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;xticks&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;col&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;lightgrey&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        abline&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;h&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;yticks.minor&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;col&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;lightgrey&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;lty&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        abline&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;h&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;yticks&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;col&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;lightgrey&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        axis&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;xticks&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;parse&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;text&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sprintf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;10^%d&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;as.integer&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;log10&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;xticks&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        axis&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;yticks&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;parse&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;text&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sprintf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;10^%d&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;as.integer&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;log10&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;yticks&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;las&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        axis&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;ymajors&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;y&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;ymajors&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;label&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;las&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;tick&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;cex.axis&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.7&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;hadj&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;joinType &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; rev&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;## reverse to draw full first, since it&apos;s larger and would be more obtrusive if drawn last&lt;/span&gt;\n            x2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; x1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;x1&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;joinType&lt;span class=&quot;hljs-operator&quot;&gt;==&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;solType &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n                &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;is.na&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x2&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;solType&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n                    xy &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; spline&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x2&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;x2&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;solType&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;xout&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;seq&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;log10&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x2&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;log10&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x2&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;nrow&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;len&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;NP&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n                    points&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;xy&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;x&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;xy&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;y&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;pch&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;pchs&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;col&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;cols&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;solType&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;cex&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;cexs&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;xpd&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n                &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end if&lt;/span&gt;\n            &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end for&lt;/span&gt;\n        &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end for&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;## custom legend&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;## due to logarithmic skew, must do all distance calcs in inches, and convert to user coords afterward&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;## the bottom-left corner of the legend will be defined in normalized figure coords, although we can convert to inches immediately&lt;/span&gt;\n        leg.cex &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; 0.7;\n        leg.x.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; grconvertX&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.275&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;nfc&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.y.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; grconvertY&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.6&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;nfc&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.x.user &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; grconvertX&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.x.in&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.y.user &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; grconvertY&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.y.in&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.outpad.w.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; 0.1;\n        leg.outpad.h.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; 0.1;\n        leg.midpad.w.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; 0.1;\n        leg.midpad.h.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; 0.1;\n        leg.sol.w.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;strwidth&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;leg.cex&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.sol.h.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;strheight&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;leg.cex&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.5&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## multiplication factor for greater line height&lt;/span&gt;\n        leg.join.w.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;strheight&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;leg.cex&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.5&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## ditto&lt;/span&gt;\n        leg.join.h.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;strwidth&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;leg.cex&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.main.w.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; leg.join.w.in&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.main.h.in &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; leg.sol.h.in&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.x2.user &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; grconvertX&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.x.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.outpad.w.in&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.main.w.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.midpad.w.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.sol.w.in&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.y2.user &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; grconvertY&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.y.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.outpad.h.in&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.main.h.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.midpad.h.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.join.h.in&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.cols.x.user &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; grconvertX&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.x.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.outpad.w.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.join.w.in&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;seq&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.lines.y.user &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; grconvertY&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.y.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.outpad.h.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.main.h.in&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;leg.sol.h.in&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;seq&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.sol.x.user &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; grconvertX&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.x.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.outpad.w.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.main.w.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.midpad.w.in&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        leg.join.y.user &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; grconvertY&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.y.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.outpad.h.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.main.h.in&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;leg.midpad.h.in&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        rect&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.x.user&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;leg.y.user&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;leg.x2.user&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;leg.y2.user&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;col&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;white&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        text&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.sol.x.user&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;leg.lines.y.user&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;ord&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;cex&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;leg.cex&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;pos&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;offset&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        text&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.cols.x.user&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;leg.join.y.user&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;cex&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;leg.cex&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;pos&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;offset&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;srt&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## srt rotation applies *after* pos/offset positioning&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;seq_along&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n            joinType &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; joinTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n            points&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;leg.cols.x.user&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;ifelse&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;colSums&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;is.na&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;x1&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;joinType&lt;span class=&quot;hljs-operator&quot;&gt;==&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;ord&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;leg.lines.y.user&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;pch&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;pchs&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;joinType&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;col&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;cols&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;ord&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end for&lt;/span&gt;\n        title&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;titleFunc&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n        readline&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;sprintf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;overlap %.02f&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end for&lt;/span&gt;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end plotRes()&lt;/span&gt;\n\ntitleFunc &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; sprintf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;R merge solutions: single-column integer key, 0..1:0..1 cardinality, %d%% overlap&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;as.integer&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;overlap&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\nplotRes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;titleFunc&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/yvTPK.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/yvTPK.png&quot; alt=&quot;R-merge-benchmark-single-column-integer-key-optional-one-to-one-99&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/kUyPB.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/kUyPB.png&quot; alt=&quot;R-merge-benchmark-single-column-integer-key-optional-one-to-one-50&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/vAuxQ.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/vAuxQ.png&quot; alt=&quot;R-merge-benchmark-single-column-integer-key-optional-one-to-one-1&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Here&apos;s a second large-scale benchmark that&apos;s more heavy-duty, with respect to the number and types of key columns, as well as cardinality. For this benchmark I use three key columns: one character, one integer, and one logical, with no restrictions on cardinality (that is, &lt;code&gt;0..*:0..*&lt;/code&gt;). (In general it&apos;s not advisable to define key columns with double or complex values due to floating-point comparison complications, and basically no one ever uses the raw type, much less for key columns, so I haven&apos;t included those types in the key columns. Also, for information&apos;s sake, I initially tried to use four key columns by including a POSIXct key column, but the POSIXct type didn&apos;t play well with the &lt;code&gt;sqldf.indexed&lt;/code&gt; solution for some reason, possibly due to floating-point comparison anomalies, so I removed it.)&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;makeArgSpecs.assortedKey.optionalManyToMany &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;uniquePct&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;75&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;## number of unique keys in df1&lt;/span&gt;\n    u1Size &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.integer&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;uniquePct&lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;## (roughly) divide u1Size into bases, so we can use expand.grid() to produce the required number of unique key values with repetitions within individual key columns&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;## use ceiling() to ensure we cover u1Size; will truncate afterward&lt;/span&gt;\n    u1SizePerKeyColumn &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.integer&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;ceiling&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;u1Size&lt;span class=&quot;hljs-operator&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;## generate the unique key values for df1&lt;/span&gt;\n    keys1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; expand.grid&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;stringsAsFactors&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        idCharacter&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;replicate&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;u1SizePerKeyColumn&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;letters&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        idInteger&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;u1SizePerKeyColumn&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        idLogical&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;u1SizePerKeyColumn&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;##idPOSIXct=as.POSIXct(&apos;2016-01-01 00:00:00&apos;,&apos;UTC&apos;)+sample(u1SizePerKeyColumn)&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;seq_len&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;u1Size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;## rbind some repetitions of the unique keys; this will prepare one side of the many-to-many relationship&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;## also scramble the order afterward&lt;/span&gt;\n    keys1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; rbind&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;keys1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;keys1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;nrow&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;keys1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;size&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;u1Size&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;## common and unilateral key counts&lt;/span&gt;\n    com &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.integer&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    uni &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; size&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;com;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;## generate some unilateral keys for df2 by synthesizing outside of the idInteger range of df1&lt;/span&gt;\n    keys2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;stringsAsFactors&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        idCharacter&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;replicate&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;uni&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;letters&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        idInteger&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;u1SizePerKeyColumn&lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;uni&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        idLogical&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;uni&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;##idPOSIXct=as.POSIXct(&apos;2016-01-01 00:00:00&apos;,&apos;UTC&apos;)+u1SizePerKeyColumn+sample(uni)&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;## rbind random keys from df1; this will complete the many-to-many relationship&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;## also scramble the order afterward&lt;/span&gt;\n    keys2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; rbind&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;keys2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;keys1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;nrow&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;keys1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;com&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;##keyNames &amp;lt;- c(&apos;idCharacter&apos;,&apos;idInteger&apos;,&apos;idLogical&apos;,&apos;idPOSIXct&apos;);&lt;/span&gt;\n    keyNames &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;idCharacter&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;idInteger&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;idLogical&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    &lt;span class=&quot;hljs-comment&quot;&gt;## note: was going to use raw and complex type for two of the non-key columns, but data.table doesn&apos;t seem to fully support them&lt;/span&gt;\n    argSpecs &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        default&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;copySpec&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;args&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n            df1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; cbind&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;stringsAsFactors&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;keys1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y1&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y2&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y3&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;rnorm&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y4&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;replicate&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;letters&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n            df2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; cbind&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;stringsAsFactors&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;keys2&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y5&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y6&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y7&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;rnorm&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;y8&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;replicate&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;letters&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n            keyNames\n        &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        data.table.unkeyed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;copySpec&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;args&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n            as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n            as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n            keyNames\n        &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        data.table.keyed&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;copySpec&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;args&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n            setkeyv&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;keyNames&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n            setkeyv&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;as.data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;keyNames&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n        &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    &lt;span class=&quot;hljs-comment&quot;&gt;## prepare sqldf&lt;/span&gt;\n    initSqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n    sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;paste0&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;create index df1_key on df1(&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;keyNames&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;);&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## upload and create an sqlite index on df1&lt;/span&gt;\n    sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;paste0&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;create index df2_key on df2(&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;keyNames&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;);&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## upload and create an sqlite index on df2&lt;/span&gt;\n\n    argSpecs;\n\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## end makeArgSpecs.assortedKey.optionalManyToMany()&lt;/span&gt;\n\nsizes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1e1L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1e3L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1e5L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;## 1e5L instead of 1e6L to respect more heavy-duty inputs&lt;/span&gt;\noverlaps &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.99&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.01&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\nsolTypes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; setdiff&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;getSolTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;in.place&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\nsystem.time&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt; res &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; testGrid&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;makeArgSpecs.assortedKey.optionalManyToMany&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;sizes&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;overlaps&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;solTypes&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;##     user   system  elapsed&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 38895.50   784.19 39745.53&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The resulting plots, using the same plotting code given above:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;titleFunc &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;overlap&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; sprintf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;R merge solutions: character/integer/logical key, 0..*:0..* cardinality, %d%% overlap&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;as.integer&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;overlap&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\nplotRes&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;titleFunc&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/7gShO.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/7gShO.png&quot; alt=&quot;R-merge-benchmark-assorted-key-optional-many-to-many-99&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/yTeRO.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/yTeRO.png&quot; alt=&quot;R-merge-benchmark-assorted-key-optional-many-to-many-50&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/buxZ2.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/buxZ2.png&quot; alt=&quot;R-merge-benchmark-assorted-key-optional-many-to-many-1&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;In joining two data frames with ~1 million rows each, one with 2 columns and the other with ~20, I&apos;ve surprisingly found &lt;code&gt;merge(..., all.x = TRUE, all.y = TRUE)&lt;/code&gt; to be faster then &lt;code&gt;dplyr::full_join()&lt;/code&gt;. This is with dplyr v0.4 &lt;/p&gt;\n\n&lt;p&gt;Merge takes ~17 seconds, full_join takes ~65 seconds.  &lt;/p&gt;\n\n&lt;p&gt;Some food for though, since I generally default to dplyr for manipulation tasks.&lt;/p&gt;\n    ","\n&lt;ol&gt;\n&lt;li&gt;Using &lt;code&gt;merge&lt;/code&gt; function we can select the variable of left table or right table, same way like we all familiar with select statement in SQL (EX : Select a.* ...or Select b.* from .....)&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;We have to add extra code which will subset from the newly joined table .&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;SQL :-  &lt;code&gt;select a.* from df1 a inner join df2 b on a.CustomerId=b.CustomerId&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;R :- &lt;code&gt;merge(df1, df2, by.x = &quot;CustomerId&quot;, by.y = &quot;CustomerId&quot;)[,names(df1)]&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Same way &lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;SQL :- &lt;code&gt;select b.* from df1 a inner join df2 b on a.CustomerId=b.CustomerId&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;R :- &lt;code&gt;merge(df1, df2, by.x = &quot;CustomerId&quot;, by.y =\n&quot;CustomerId&quot;)[,names(df2)]&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;For an inner join on all columns, you could also use &lt;code&gt;fintersect&lt;/code&gt; from the &lt;em&gt;data.table&lt;/em&gt;-package or &lt;code&gt;intersect&lt;/code&gt; from the &lt;em&gt;dplyr&lt;/em&gt;-package as an alternative to &lt;code&gt;merge&lt;/code&gt; without specifying the &lt;code&gt;by&lt;/code&gt;-columns. This will give the rows that are equal between two dataframes:&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;merge&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#   V1 V2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 1  B  2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 2  C  3&lt;/span&gt;\n\ndplyr&lt;span class=&quot;hljs-operator&quot;&gt;::&lt;/span&gt;intersect&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#   V1 V2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 1  B  2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 2  C  3&lt;/span&gt;\n\ndata.table&lt;span class=&quot;hljs-operator&quot;&gt;::&lt;/span&gt;fintersect&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;setDT&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; setDT&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#    V1 V2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 1:  B  2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 2:  C  3&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;Example data:&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;df1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;V1 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;LETTERS&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; V2 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;V1 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;LETTERS&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; V2 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;Update join.&lt;/strong&gt; One other important SQL-style join is an &quot;&lt;a href=&quot;https://stackoverflow.com/q/7869592/&quot;&gt;update join&lt;/a&gt;&quot; where columns in one table are updated (or created) using another table. &lt;/p&gt;\n\n&lt;p&gt;Modifying the OP&apos;s example tables...&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;sales &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n  CustomerId &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; \n  Year &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2005&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n  Product &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Toaster&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Radio&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ncust &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n  CustomerId &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; \n  Year &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2001L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2002L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2002L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2002L&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n  State &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; state.name&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\nsales\n&lt;span class=&quot;hljs-comment&quot;&gt;# CustomerId Year Product&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          1 2000 Toaster&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          1 2001 Toaster&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          1 2002 Toaster&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          3 2003   Radio&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          4 2004   Radio&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          6 2005   Radio&lt;/span&gt;\n\ncust\n&lt;span class=&quot;hljs-comment&quot;&gt;# CustomerId Year    State&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          1 2001  Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          1 2002   Alaska&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          4 2002  Arizona&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          6 2002 Arkansas&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Suppose we want to add the customer&apos;s state from &lt;code&gt;cust&lt;/code&gt; to the purchases table, &lt;code&gt;sales&lt;/code&gt;, ignoring the year column. With base R, we can identify matching rows and then copy values over:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;sales&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;State &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; cust&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;State&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt; match&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;sales&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; cust&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# CustomerId Year Product    State&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          1 2000 Toaster  Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          1 2001 Toaster  Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          1 2002 Toaster  Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          3 2003   Radio     &amp;lt;NA&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          4 2004   Radio  Arizona&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#          6 2005   Radio Arkansas&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# cleanup for the next example&lt;/span&gt;\nsales&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;State &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;As can be seen here, &lt;code&gt;match&lt;/code&gt; selects the first matching row from the customer table.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;&lt;strong&gt;Update join with multiple columns.&lt;/strong&gt; The approach above works well when we are joining on only a single column and are satisfied with the first match. Suppose we want the year of measurement in the customer table to match the year of sale.&lt;/p&gt;\n\n&lt;p&gt;As @bgoldst&apos;s answer mentions, &lt;code&gt;match&lt;/code&gt; with &lt;code&gt;interaction&lt;/code&gt; might be an option for this case. More straightforwardly, one could use data.table:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nsetDT&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;sales&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;; setDT&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;cust&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\nsales&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; State &lt;span class=&quot;hljs-operator&quot;&gt;:=&lt;/span&gt; cust&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;sales&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; on&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;.&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; Year&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; x.State&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#    CustomerId Year Product   State&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 1:          1 2000 Toaster    &amp;lt;NA&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 2:          1 2001 Toaster Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 3:          1 2002 Toaster  Alaska&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 4:          3 2003   Radio    &amp;lt;NA&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 5:          4 2004   Radio    &amp;lt;NA&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 6:          6 2005   Radio    &amp;lt;NA&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# cleanup for next example&lt;/span&gt;\nsales&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; State &lt;span class=&quot;hljs-operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;&lt;strong&gt;Rolling update join.&lt;/strong&gt; Alternately, we may want to take the last state the customer was found in:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;sales&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; State &lt;span class=&quot;hljs-operator&quot;&gt;:=&lt;/span&gt; cust&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;sales&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; on&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;.&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;CustomerId&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; Year&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; roll&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; x.State&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#    CustomerId Year Product    State&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 1:          1 2000 Toaster     &amp;lt;NA&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 2:          1 2001 Toaster  Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 3:          1 2002 Toaster   Alaska&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 4:          3 2003   Radio     &amp;lt;NA&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 5:          4 2004   Radio  Arizona&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 6:          6 2005   Radio Arkansas&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;The three examples above all focus on creating/adding a new column. See &lt;a href=&quot;https://stackoverflow.com/q/6112260&quot;&gt;the related R FAQ&lt;/a&gt; for an example of updating/modifying an existing column.&lt;/p&gt;\n    "],"id":50,"title":"How to join (merge) data frames (inner, outer, left, right)","content":"\n                \n&lt;p&gt;Given two data frames:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;df1 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;CustomerId &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; Product &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Toaster&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Radio&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;CustomerId &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; State &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Alabama&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Ohio&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\ndf1\n&lt;span class=&quot;hljs-comment&quot;&gt;#  CustomerId Product&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#           1 Toaster&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#           2 Toaster&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#           3 Toaster&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#           4   Radio&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#           5   Radio&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#           6   Radio&lt;/span&gt;\n\ndf2\n&lt;span class=&quot;hljs-comment&quot;&gt;#  CustomerId   State&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#           2 Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#           4 Alabama&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#           6    Ohio&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;How can I do database style, i.e., &lt;a href=&quot;http://en.wikipedia.org/wiki/Join_%28SQL%29&quot; rel=&quot;noreferrer&quot;&gt;sql style, joins&lt;/a&gt;? That is, how do I get:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;An &lt;a href=&quot;http://en.wikipedia.org/wiki/Join_%28SQL%29#Inner_join&quot; rel=&quot;noreferrer&quot;&gt;inner join&lt;/a&gt; of &lt;code&gt;df1&lt;/code&gt; and &lt;code&gt;df2&lt;/code&gt;:&lt;br&gt;\nReturn only the rows in which the left table have matching keys in the right table.&lt;/li&gt;\n&lt;li&gt;An &lt;a href=&quot;http://en.wikipedia.org/wiki/Join_%28SQL%29#Outer_join&quot; rel=&quot;noreferrer&quot;&gt;outer join&lt;/a&gt; of &lt;code&gt;df1&lt;/code&gt; and &lt;code&gt;df2&lt;/code&gt;:&lt;br&gt;\nReturns all rows from both tables, join records from the left which have matching keys in the right table.&lt;/li&gt;\n&lt;li&gt;A &lt;a href=&quot;http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join&quot; rel=&quot;noreferrer&quot;&gt;left outer join (or simply left join)&lt;/a&gt; of &lt;code&gt;df1&lt;/code&gt; and &lt;code&gt;df2&lt;/code&gt;&lt;br&gt;\nReturn all rows from the left table, and any rows with matching keys from the right table.&lt;/li&gt;\n&lt;li&gt;A &lt;a href=&quot;http://en.wikipedia.org/wiki/Join_%28SQL%29#Right_outer_join&quot; rel=&quot;noreferrer&quot;&gt;right outer join&lt;/a&gt; of &lt;code&gt;df1&lt;/code&gt; and &lt;code&gt;df2&lt;/code&gt;&lt;br&gt;\nReturn all rows from the right table, and any rows with matching keys from the left table.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;&lt;strong&gt;Extra credit:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;How can I do a SQL style select statement?&lt;/p&gt;\n    ","slug":"how-to-join-(merge)-data-frames-(inner-outer-left-right)-1657384406445","postType":"QUESTION","createdAt":"2022-07-09T16:33:26.000Z","updatedAt":"2022-07-09T16:33:26.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"Cleansing User Passwords","slug":"cleansing-user-passwords-1657387365583"},{"title":"How to create a MySQL hierarchical recursive query?","slug":"how-to-create-a-mysql-hierarchical-recursive-query-1657387662163"},{"title":"How do I copy to the clipboard in JavaScript?","slug":"how-do-i-copy-to-the-clipboard-in-javascript-1657385501223"},{"title":"How can I save an activity state using the save instance state?","slug":"how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981"},{"title":"Why not use Double or Float to represent currency?","slug":"why-not-use-double-or-float-to-represent-currency-1657387417964"},{"title":"Error: could not find function ... in R","slug":"error:-could-not-find-function-...-in-r-1657388476492"},{"title":"What is array to pointer decay?","slug":"what-is-array-to-pointer-decay-1657384709608"},{"title":"How to create a GUID / UUID","slug":"how-to-create-a-guid-uuid-1657387749530"},{"title":"commandButton/commandLink/ajax action/listener method not invoked or input value not set/updated","slug":"commandbuttoncommandlinkajax-actionlistener-method-not-invoked-or-input-value-not-setupdated-1657384667519"},{"title":"Reference: mod_rewrite, URL rewriting and \"pretty links\" explained","slug":"reference:-mod_rewrite-url-rewriting-and-\"pretty-links\"-explained-1657384905504"},{"title":"Can I bind an array to an IN() condition in a PDO query?","slug":"can-i-bind-an-array-to-an-in()-condition-in-a-pdo-query-1657388382858"},{"title":"What is the JavaScript version of sleep()?","slug":"what-is-the-javascript-version-of-sleep()-1657387391406"},{"title":"Aggregate / summarize multiple variables per group (e.g. sum, mean)","slug":"aggregate-summarize-multiple-variables-per-group-(e.g.-sum-mean)-1657387764061"},{"title":"Why can templates only be implemented in the header file?","slug":"why-can-templates-only-be-implemented-in-the-header-file-1657384341933"},{"title":"Is there a CSS parent selector?","slug":"is-there-a-css-parent-selector-1657384430692"},{"title":"How to affect other elements when one element is hovered","slug":"how-to-affect-other-elements-when-one-element-is-hovered-1657387832363"},{"title":"How to manage startActivityForResult on Android","slug":"how-to-manage-startactivityforresult-on-android-1657387967393"},{"title":".prop() vs .attr()","slug":".prop()-vs-.attr()-1657384898328"},{"title":"Selecting and manipulating CSS pseudo-elements such as ::before and ::after using javascript (or jQuery)","slug":"selecting-and-manipulating-css-pseudo-elements-such-as-::before-and-::after-using-javascript-(or-jquery)-1657387406132"},{"title":"How can I get useful error messages in PHP?","slug":"how-can-i-get-useful-error-messages-in-php-1657384609065"}]},"__N_SSG":true}