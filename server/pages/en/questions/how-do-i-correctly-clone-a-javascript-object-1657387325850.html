<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>How do I correctly clone a JavaScript object? | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I have an object x. I&#x27;d like to copy it as object y, such that changes to y do not modify x. I realized that copying objects derived from built-in JavaScript objects will result in extra, unwanted properties. This isn&#x27;t a problem, since I&#x27;m copying one of my own literal-constructed objects.

How do I correctly clone a JavaScript object?
    "/><meta property="og:title" content="How do I correctly clone a JavaScript object? | Solutions Checker"/><meta property="og:description" content="I have an object x. I&#x27;d like to copy it as object y, such that changes to y do not modify x. I realized that copying objects derived from built-in JavaScript objects will result in extra, unwanted properties. This isn&#x27;t a problem, since I&#x27;m copying one of my own literal-constructed objects.

How do I correctly clone a JavaScript object?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How do I correctly clone a JavaScript object?","text":"I have an object x. I&apos;d like to copy it as object y, such that changes to y do not modify x. I realized that copying objects derived from built-in JavaScript objects will result in extra, unwanted properties. This isn&apos;t a problem, since I&apos;m copying one of my own literal-constructed objects.\n\nHow do I correctly clone a JavaScript object?\n    ","answerCount":30,"upVoteCount":500,"suggestedAnswer":[{"text":"2022 update\nThere&apos;s a new JS standard called &quot;structured cloning&quot;. It works on all browsers:\nconst clone = structuredClone(object);\n\nOld answer\nTo do this for any object in JavaScript will not be simple or straightforward. You will run into the problem of erroneously picking up attributes from the object&apos;s prototype that should be left in the prototype and not copied to the new instance. If, for instance, you are adding a clone method to Object.prototype, as some answers depict, you will need to explicitly skip that attribute. But what if there are other additional methods added to Object.prototype, or other intermediate prototypes, that you don&apos;t know about? In that case, you will copy attributes you shouldn&apos;t, so you need to detect unforeseen, non-local attributes with the hasOwnProperty method.\nIn addition to non-enumerable attributes, you&apos;ll encounter a tougher problem when you try to copy objects that have hidden properties. For example, prototype is a hidden property of a function. Also, an object&apos;s prototype is referenced with the attribute __proto__, which is also hidden, and will not be copied by a for/in loop iterating over the source object&apos;s attributes. I think __proto__ might be specific to Firefox&apos;s JavaScript interpreter and it may be something different in other browsers, but you get the picture. Not everything is enumerable. You can copy a hidden attribute if you know its name, but I don&apos;t know of any way to discover it automatically.\nYet another snag in the quest for an elegant solution is the problem of setting up the prototype inheritance correctly. If your source object&apos;s prototype is Object, then simply creating a new general object with {} will work, but if the source&apos;s prototype is some descendant of Object, then you are going to be missing the additional members from that prototype which you skipped using the hasOwnProperty filter, or which were in the prototype, but weren&apos;t enumerable in the first place. One solution might be to call the source object&apos;s constructor property to get the initial copy object and then copy over the attributes, but then you still will not get non-enumerable attributes. For example, a Date object stores its data as a hidden member:\nfunction clone(obj) {\n    if (null == obj || &quot;object&quot; != typeof obj) return obj;\n    var copy = obj.constructor();\n    for (var attr in obj) {\n        if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\n    }\n    return copy;\n}\n\nvar d1 = new Date();\n\n/* Executes function after 5 seconds. */\nsetTimeout(function(){\n    var d2 = clone(d1);\n    alert(&quot;d1 = &quot; + d1.toString() + &quot;\\nd2 = &quot; + d2.toString());\n}, 5000);\n\nThe date string for d1 will be 5 seconds behind that of d2. A way to make one Date the same as another is by calling the setTime method, but that is specific to the Date class. I don&apos;t think there is a bullet-proof general solution to this problem, though I would be happy to be wrong!\nWhen I had to implement general deep copying I ended up compromising by assuming that I would only need to copy a plain Object, Array, Date, String, Number, or Boolean. The last 3 types are immutable, so I could perform a shallow copy and not worry about it changing. I further assumed that any elements contained in Object or Array would also be one of the 6 simple types in that list. This can be accomplished with code like the following:\nfunction clone(obj) {\n    var copy;\n\n    // Handle the 3 simple types, and null or undefined\n    if (null == obj || &quot;object&quot; != typeof obj) return obj;\n\n    // Handle Date\n    if (obj instanceof Date) {\n        copy = new Date();\n        copy.setTime(obj.getTime());\n        return copy;\n    }\n\n    // Handle Array\n    if (obj instanceof Array) {\n        copy = [];\n        for (var i = 0, len = obj.length; i &lt; len; i++) {\n            copy[i] = clone(obj[i]);\n        }\n        return copy;\n    }\n\n    // Handle Object\n    if (obj instanceof Object) {\n        copy = {};\n        for (var attr in obj) {\n            if (obj.hasOwnProperty(attr)) copy[attr] = clone(obj[attr]);\n        }\n        return copy;\n    }\n\n    throw new Error(&quot;Unable to copy obj! Its type isn&apos;t supported.&quot;);\n}\n\nThe above function will work adequately for the 6 simple types I mentioned, as long as the data in the objects and arrays form a tree structure. That is, there isn&apos;t more than one reference to the same data in the object. For example:\n// This would be cloneable:\nvar tree = {\n    &quot;left&quot;  : { &quot;left&quot; : null, &quot;right&quot; : null, &quot;data&quot; : 3 },\n    &quot;right&quot; : null,\n    &quot;data&quot;  : 8\n};\n\n// This would kind-of work, but you would get 2 copies of the \n// inner node instead of 2 references to the same copy\nvar directedAcylicGraph = {\n    &quot;left&quot;  : { &quot;left&quot; : null, &quot;right&quot; : null, &quot;data&quot; : 3 },\n    &quot;data&quot;  : 8\n};\ndirectedAcyclicGraph[&quot;right&quot;] = directedAcyclicGraph[&quot;left&quot;];\n\n// Cloning this would cause a stack overflow due to infinite recursion:\nvar cyclicGraph = {\n    &quot;left&quot;  : { &quot;left&quot; : null, &quot;right&quot; : null, &quot;data&quot; : 3 },\n    &quot;data&quot;  : 8\n};\ncyclicGraph[&quot;right&quot;] = cyclicGraph;\n\nIt will not be able to handle any JavaScript object, but it may be sufficient for many purposes as long as you don&apos;t assume that it will just work for anything you throw at it.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"If you do not use Dates, functions, undefined, regExp or Infinity within your object, a very simple one liner is JSON.parse(JSON.stringify(object)):\n\n\n\nconst a = {\n  string: &apos;string&apos;,\n  number: 123,\n  bool: false,\n  nul: null,\n  date: new Date(),  // stringified\n  undef: undefined,  // lost\n  inf: Infinity,  // forced to &apos;null&apos;\n}\nconsole.log(a);\nconsole.log(typeof a.date);  // Date object\nconst clone = JSON.parse(JSON.stringify(a));\nconsole.log(clone);\nconsole.log(typeof clone.date);  // result of .toISOString()\n Run code snippetHide resultsExpand snippet\n\n\n\nThis works for all kind of objects containing objects, arrays, strings, booleans and numbers.\n\nSee also this article about the structured clone algorithm of browsers which is used when posting messages to and from a worker. It also contains a function for deep cloning.\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"With jQuery, you can shallow copy with extend:\n\nvar copiedObject = jQuery.extend({}, originalObject)\n\n\nsubsequent changes to the copiedObject will not affect the originalObject, and vice versa.\n\nOr to make a deep copy:\n\nvar copiedObject = jQuery.extend(true, {}, originalObject)\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"In ECMAScript 6 there is Object.assign method, which copies values of all enumerable own properties from one object to another. For example:\nvar x = {myProp: &quot;value&quot;};\nvar y = Object.assign({}, x); \n\nBut be aware this is a shallow copy - nested objects are still copied as reference.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"Per MDN:\n\n\nIf you want shallow copy, use Object.assign({}, a)\nFor &quot;deep&quot; copy, use JSON.parse(JSON.stringify(a))\n\n\nThere is no need for external libraries but you need to check browser compatibility first.\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"There are many answers, but none that mentions Object.create from ECMAScript 5, which admittedly does not give you an exact copy, but sets the source as the prototype of the new object.\n\nThus, this is not an exact answer to the question, but it is a one-line solution and thus elegant. And it works best for 2 cases:\n\n\nWhere such inheritance is useful (duh!)\nWhere the source object won&apos;t be modified, thus making the relation between the 2 objects a non issue.\n\n\nExample:\n\nvar foo = { a : 1 };\nvar bar = Object.create(foo);\nfoo.a; // 1\nbar.a; // 1\nfoo.a = 2;\nbar.a; // 2 - prototype changed\nbar.a = 3;\nfoo.a; // Still 2, since setting bar.a makes it an &quot;own&quot; property\n\n\nWhy do I consider this solution to be superior? It&apos;s native, thus no looping, no recursion. However, older browsers will need a polyfill.\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"An elegant way to clone a Javascript object in one line of code\nAn Object.assign method is part of the ECMAScript 2015 (ES6) standard and does exactly what you need.\nvar clone = Object.assign({}, obj);\n\n\nThe Object.assign() method is used to copy the values of all enumerable own properties from one or more source objects to a target object.\n\nRead more...\nThe polyfill to support older browsers:\nif (!Object.assign) {\n  Object.defineProperty(Object, &apos;assign&apos;, {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function(target) {\n      &apos;use strict&apos;;\n      if (target === undefined || target === null) {\n        throw new TypeError(&apos;Cannot convert first argument to object&apos;);\n      }\n\n      var to = Object(target);\n      for (var i = 1; i &lt; arguments.length; i++) {\n        var nextSource = arguments[i];\n        if (nextSource === undefined || nextSource === null) {\n          continue;\n        }\n        nextSource = Object(nextSource);\n\n        var keysArray = Object.keys(nextSource);\n        for (var nextIndex = 0, len = keysArray.length; nextIndex &lt; len; nextIndex++) {\n          var nextKey = keysArray[nextIndex];\n          var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n          if (desc !== undefined &amp;&amp; desc.enumerable) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n      return to;\n    }\n  });\n}\n\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"There are several issues with most solutions on the internet. So I decided to make a follow-up, which includes, why the accepted answer shouldn&apos;t be accepted.\n\nstarting situation\n\nI want to deep-copy a Javascript Object with all of its children and their children and so on. But since I&apos;m not kind of a normal developer, my Object has normal properties, circular structures and even nested objects.\n\nSo let&apos;s create a circular structure and a nested object first.\n\nfunction Circ() {\n    this.me = this;\n}\n\nfunction Nested(y) {\n    this.y = y;\n}\n\n\nLet&apos;s bring everything together in an Object named a.\n\nvar a = {\n    x: &apos;a&apos;,\n    circ: new Circ(),\n    nested: new Nested(&apos;a&apos;)\n};\n\n\nNext, we want to copy a into a variable named b and mutate it.\n\nvar b = a;\n\nb.x = &apos;b&apos;;\nb.nested.y = &apos;b&apos;;\n\n\nYou know what happened here because if not you wouldn&apos;t even land on this great question.\n\nconsole.log(a, b);\n\na --&gt; Object {\n    x: &quot;b&quot;,\n    circ: Circ {\n        me: Circ { ... }\n    },\n    nested: Nested {\n        y: &quot;b&quot;\n    }\n}\n\nb --&gt; Object {\n    x: &quot;b&quot;,\n    circ: Circ {\n        me: Circ { ... }\n    },\n    nested: Nested {\n        y: &quot;b&quot;\n    }\n}\n\n\nNow let&apos;s find a solution.\n\nJSON\n\nThe first attempt I tried was using JSON.\n\nvar b = JSON.parse( JSON.stringify( a ) );\n\nb.x = &apos;b&apos;;\nb.nested.y = &apos;b&apos;;\n\n\nDon&apos;t waste too much time on it, you&apos;ll get TypeError: Converting circular structure to JSON.\n\nRecursive copy (the accepted &quot;answer&quot;)\n\nLet&apos;s have a look at the accepted answer.\n\nfunction cloneSO(obj) {\n    // Handle the 3 simple types, and null or undefined\n    if (null == obj || &quot;object&quot; != typeof obj) return obj;\n\n    // Handle Date\n    if (obj instanceof Date) {\n        var copy = new Date();\n        copy.setTime(obj.getTime());\n        return copy;\n    }\n\n    // Handle Array\n    if (obj instanceof Array) {\n        var copy = [];\n        for (var i = 0, len = obj.length; i &lt; len; i++) {\n            copy[i] = cloneSO(obj[i]);\n        }\n        return copy;\n    }\n\n    // Handle Object\n    if (obj instanceof Object) {\n        var copy = {};\n        for (var attr in obj) {\n            if (obj.hasOwnProperty(attr)) copy[attr] = cloneSO(obj[attr]);\n        }\n        return copy;\n    }\n\n    throw new Error(&quot;Unable to copy obj! Its type isn&apos;t supported.&quot;);\n}\n\n\nLooks good, heh? It&apos;s a recursive copy of the object and handles other types as well, like Date, but that wasn&apos;t a requirement.\n\nvar b = cloneSO(a);\n\nb.x = &apos;b&apos;;\nb.nested.y = &apos;b&apos;;\n\n\nRecursion and circular structures doesn&apos;t work well together... RangeError: Maximum call stack size exceeded\n\nnative solution\n\nAfter arguing with my co-worker, my boss asked us what happened, and he found a simple solution after some googling. It&apos;s called Object.create.\n\nvar b = Object.create(a);\n\nb.x = &apos;b&apos;;\nb.nested.y = &apos;b&apos;;\n\n\nThis solution was added to Javascript some time ago and even handles circular structure.\n\nconsole.log(a, b);\n\na --&gt; Object {\n    x: &quot;a&quot;,\n    circ: Circ {\n        me: Circ { ... }\n    },\n    nested: Nested {\n        y: &quot;b&quot;\n    }\n}\n\nb --&gt; Object {\n    x: &quot;b&quot;,\n    circ: Circ {\n        me: Circ { ... }\n    },\n    nested: Nested {\n        y: &quot;b&quot;\n    }\n}\n\n\n... and you see, it didn&apos;t work with the nested structure inside.\n\npolyfill for the native solution\n\nThere&apos;s a polyfill for Object.create in the older browser just like the IE 8. It&apos;s something like recommended by Mozilla, and of course, it&apos;s not perfect and results in the same problem as the native solution.\n\nfunction F() {};\nfunction clonePF(o) {\n    F.prototype = o;\n    return new F();\n}\n\nvar b = clonePF(a);\n\nb.x = &apos;b&apos;;\nb.nested.y = &apos;b&apos;;\n\n\nI&apos;ve put F outside the scope so we can have a look at what instanceof tells us.\n\nconsole.log(a, b);\n\na --&gt; Object {\n    x: &quot;a&quot;,\n    circ: Circ {\n        me: Circ { ... }\n    },\n    nested: Nested {\n        y: &quot;b&quot;\n    }\n}\n\nb --&gt; F {\n    x: &quot;b&quot;,\n    circ: Circ {\n        me: Circ { ... }\n    },\n    nested: Nested {\n        y: &quot;b&quot;\n    }\n}\n\nconsole.log(typeof a, typeof b);\n\na --&gt; object\nb --&gt; object\n\nconsole.log(a instanceof Object, b instanceof Object);\n\na --&gt; true\nb --&gt; true\n\nconsole.log(a instanceof F, b instanceof F);\n\na --&gt; false\nb --&gt; true\n\n\nSame problem as the native solution, but a little bit worse output.\n\nthe better (but not perfect) solution\n\nWhen digging around, I found a similar question (In Javascript, when performing a deep copy, how do I avoid a cycle, due to a property being &quot;this&quot;?) to this one, but with a way better solution.\n\nfunction cloneDR(o) {\n    const gdcc = &quot;__getDeepCircularCopy__&quot;;\n    if (o !== Object(o)) {\n        return o; // primitive value\n    }\n\n    var set = gdcc in o,\n        cache = o[gdcc],\n        result;\n    if (set &amp;&amp; typeof cache == &quot;function&quot;) {\n        return cache();\n    }\n    // else\n    o[gdcc] = function() { return result; }; // overwrite\n    if (o instanceof Array) {\n        result = [];\n        for (var i=0; i&lt;o.length; i++) {\n            result[i] = cloneDR(o[i]);\n        }\n    } else {\n        result = {};\n        for (var prop in o)\n            if (prop != gdcc)\n                result[prop] = cloneDR(o[prop]);\n            else if (set)\n                result[prop] = cloneDR(cache);\n    }\n    if (set) {\n        o[gdcc] = cache; // reset\n    } else {\n        delete o[gdcc]; // unset again\n    }\n    return result;\n}\n\nvar b = cloneDR(a);\n\nb.x = &apos;b&apos;;\nb.nested.y = &apos;b&apos;;\n\n\nAnd let&apos;s have a look at the output...\n\nconsole.log(a, b);\n\na --&gt; Object {\n    x: &quot;a&quot;,\n    circ: Object {\n        me: Object { ... }\n    },\n    nested: Object {\n        y: &quot;a&quot;\n    }\n}\n\nb --&gt; Object {\n    x: &quot;b&quot;,\n    circ: Object {\n        me: Object { ... }\n    },\n    nested: Object {\n        y: &quot;b&quot;\n    }\n}\n\nconsole.log(typeof a, typeof b);\n\na --&gt; object\nb --&gt; object\n\nconsole.log(a instanceof Object, b instanceof Object);\n\na --&gt; true\nb --&gt; true\n\nconsole.log(a instanceof F, b instanceof F);\n\na --&gt; false\nb --&gt; false\n\n\nThe requirements are matched, but there are still some smaller issues, including changing the instance of nested and circ to Object.\n\n\n  The structure of trees that share a leaf won&apos;t be copied, they will become two independent leaves:\n\n\n        [Object]                     [Object]\n         /    \\                       /    \\\n        /      \\                     /      \\\n      |/_      _\\|                 |/_      _\\|  \n  [Object]    [Object]   ===&gt;  [Object]    [Object]\n       \\        /                 |           |\n        \\      /                  |           |\n        _\\|  |/_                 \\|/         \\|/\n        [Object]               [Object]    [Object]\n\n\nconclusion\n\nThe last solution using recursion and a cache, may not be the best, but it&apos;s a real deep-copy of the object. It handles simple properties, circular structures and nested object, but it will mess up the instance of them while cloning.\n\njsfiddle\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"If you&apos;re okay with a shallow copy, the underscore.js library has a clone method.\n\ny = _.clone(x);\n\n\nor you can extend it like\n\ncopiedObject = _.extend({},originalObject);\n\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"OK, imagine you have this object below and you want to clone it:\n\nlet obj = {a:1, b:2, c:3}; //ES6\n\n\nor\n\nvar obj = {a:1, b:2, c:3}; //ES5\n\n\nthe answer is mainly depeneds on which ECMAscript you using, in ES6+, you can simply use Object.assign to do the clone:\n\nlet cloned = Object.assign({}, obj); //new {a:1, b:2, c:3};\n\n\nor using spread operator like this:\n\nlet cloned = {...obj}; //new {a:1, b:2, c:3};\n\n\nBut if you using ES5, you can use few methods, but the JSON.stringify, just make sure you not using for a big chunk of data to copy, but it could be one line handy way in many cases, something like this:\n\nlet cloned = JSON.parse(JSON.stringify(obj)); \n//new {a:1, b:2, c:3};, can be handy, but avoid using on big chunk of data over and over\n\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"Update 06 July 2020\nThere are three (3) ways to clone objects in JavaScript. As objects in JavaScript are reference values, you can&apos;t simply just copy using the =.\nThe ways are:\nconst food = { food: &apos;apple&apos;, drink: &apos;milk&apos; }\n\n\n// 1. Using the &quot;Spread&quot;\n// ------------------\n\n{ ...food }\n\n\n// 2. Using &quot;Object.assign&quot;\n// ------------------\n\nObject.assign({}, food)\n\n\n// 3. &quot;JSON&quot;\n// ------------------\n\nJSON.parse(JSON.stringify(food))\n\n// RESULT:\n// { food: &apos;apple&apos;, drink: &apos;milk&apos; }\n\n\nThis can be used as a reference summary.\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"One particularly inelegant solution is to use JSON encoding to make deep copies of objects that do not have member methods. The methodology is to JSON encode your target object, then by decoding it, you get the copy you are looking for.  You can decode as many times as you want to make as many copies as you need.\n\nOf course, functions do not belong in JSON, so this only works for objects without member methods.\n\nThis methodology was perfect for my use case, since I&apos;m storing JSON blobs in a key-value store, and when they are exposed as objects in a JavaScript API, each object actually contains a copy of the original state of the object so we can calculate the delta after the caller has mutated the exposed object.\n\nvar object1 = {key:&quot;value&quot;};\nvar object2 = object1;\n\nobject2 = JSON.stringify(object1);\nobject2 = JSON.parse(object2);\n\nobject2.key = &quot;a change&quot;;\nconsole.log(object1);// returns value\n\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"You can simply use a spread property to copy an object without references. But be careful (see comments), the &apos;copy&apos; is just on the lowest object/array level. Nested properties are still references!\n\n\n\nComplete clone:\n\nlet x = {a: &apos;value1&apos;}\nlet x2 = {...x}\n\n// =&gt; mutate without references:\n\nx2.a = &apos;value2&apos;\nconsole.log(x.a)    // =&gt; &apos;value1&apos;\n\n\nClone with references on second level:\n\nconst y = {a: {b: &apos;value3&apos;}}\nconst y2 = {...y}\n\n// =&gt; nested object is still a references:\n\ny2.a.b = &apos;value4&apos;\nconsole.log(y.a.b)    // =&gt; &apos;value4&apos;\n\n\n\n\nJavaScript actually does not support deep clones natively. Use an utility function. For example Ramda:\n\n\n  http://ramdajs.com/docs/#clone\n\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"const objClone = { ...obj };\n\nBe aware that nested objects are still copied as a reference.\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"From this article: How to copy arrays and objects in Javascript by Brian Huisman:\n\nObject.prototype.clone = function() {\n  var newObj = (this instanceof Array) ? [] : {};\n  for (var i in this) {\n    if (i == &apos;clone&apos;) continue;\n    if (this[i] &amp;&amp; typeof this[i] == &quot;object&quot;) {\n      newObj[i] = this[i].clone();\n    } else newObj[i] = this[i]\n  } return newObj;\n};\n\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"For those using AngularJS, there is also direct method for cloning or extending of the objects in this library.\n\nvar destination = angular.copy(source);\n\n\nor\n\nangular.copy(source, destination);\n\n\nMore in angular.copy documentation...\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"function clone(obj) {\n    if(obj == null || typeof(obj) != &apos;object&apos;)\n        return obj;    \n    var temp = new obj.constructor(); \n    for(var key in obj)\n        temp[key] = clone(obj[key]);    \n    return temp;\n}\n\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"A.Levy&apos;s answer is almost complete, here is my little contribution: there is a way how to handle recursive references, see this line\n\nif(this[attr]==this) copy[attr] = copy;\n\nIf the object is XML DOM element, we must use cloneNode instead\n\nif(this.cloneNode) return this.cloneNode(true);\n\nInspired by A.Levy&apos;s exhaustive study and Calvin&apos;s prototyping approach, I offer this solution:\n\nObject.prototype.clone = function() {\n  if(this.cloneNode) return this.cloneNode(true);\n  var copy = this instanceof Array ? [] : {};\n  for(var attr in this) {\n    if(typeof this[attr] == &quot;function&quot; || this[attr]==null || !this[attr].clone)\n      copy[attr] = this[attr];\n    else if(this[attr]==this) copy[attr] = copy;\n    else copy[attr] = this[attr].clone();\n  }\n  return copy;\n}\n\nDate.prototype.clone = function() {\n  var copy = new Date();\n  copy.setTime(this.getTime());\n  return copy;\n}\n\nNumber.prototype.clone = \nBoolean.prototype.clone =\nString.prototype.clone = function() {\n  return this;\n}\n\n\nSee also Andy Burke&apos;s note in the answers.\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"Performance\n\nToday 2020.04.30 I perform tests of chosen solutions on Chrome v81.0, Safari v13.1 and Firefox v75.0 on MacOs High Sierra v10.13.6. \n\nI focus on speed of copy DATA (object with simple type fields, not methods etc.). The solutions A-I can make only shallow copy, solutions J-U can make deep copy.\n\nResults for shallow copy\n\n\nsolution {...obj} (A) is fastest on chrome and firefox and medium fast on safari\nsolution based on Object.assign (B) is fast on all browsers\njQuery (E) and lodash (F,G,H) solutions are medium/quite fast\nsolution JSON.parse/stringify (K) is quite slow\nsolutions D and U are slow on all browsers\n\n\n\n\nResults for deep copy\n\n\nsolution Q is fastest on all browsers\njQuery (L) and lodash (J) are medium fast\nsolution JSON.parse/stringify (K) is quite slow\nsolution U is slowest on all browsers\nlodash (J) and solution U crash on Chrome for 1000 level deep object\n\n\n\n\nDetails\n\nFor choosen solutions: \nA \nB\nC(my)\nD\nE\nF\nG\nH\nI\nJ\nK\nL\nM\nN\nO\nP\nQ\nR\nS\nT\nU,\n I perform 4 tests\n\n\nshallow-small: object with 10 non-nested fields - you can run it HERE\nshallow-big: object with 1000 non-nested fields - you can run it HERE\ndeep-small: object with 10 levels-nested fields - you can run it HERE\ndeep-big: object with 1000 levels-nested fields - you can run it HERE\n\n\nObjects used in tests are show in below snippet\n\nShow code snippet\n\nlet obj_ShallowSmall = {\n  field0: false,\n  field1: true,\n  field2: 1,\n  field3: 0,\n  field4: null,\n  field5: [],\n  field6: {},\n  field7: &quot;text7&quot;,\n  field8: &quot;text8&quot;,\n}\n\nlet obj_DeepSmall = {\n  level0: {\n   level1: {\n    level2: {\n     level3: {\n      level4: {\n       level5: {\n        level6: {\n         level7: {\n          level8: {\n           level9: [[[[[[[[[[&apos;abc&apos;]]]]]]]]]],\n  }}}}}}}}},\n};\n\nlet obj_ShallowBig = Array(1000).fill(0).reduce((a,c,i) =&gt; (a[&apos;field&apos;+i]=getField(i),a) ,{});\n\n\nlet obj_DeepBig = genDeepObject(1000);\n\n\n\n// ------------------\n// Show objects\n// ------------------\n\nconsole.log(&apos;obj_ShallowSmall:&apos;,JSON.stringify(obj_ShallowSmall));\nconsole.log(&apos;obj_DeepSmall:&apos;,JSON.stringify(obj_DeepSmall));\nconsole.log(&apos;obj_ShallowBig:&apos;,JSON.stringify(obj_ShallowBig));\nconsole.log(&apos;obj_DeepBig:&apos;,JSON.stringify(obj_DeepBig));\n\n\n\n\n// ------------------\n// HELPERS\n// ------------------\n\nfunction getField(k) {\n  let i=k%10;\n  if(i==0) return false;\n  if(i==1) return true;\n  if(i==2) return k;\n  if(i==3) return 0;\n  if(i==4) return null;\n  if(i==5) return [];\n  if(i==6) return {};  \n  if(i&gt;=7) return &quot;text&quot;+k;\n}\n\nfunction genDeepObject(N) {\n  // generate: {level0:{level1:{...levelN: {end:[[[...N-times...[&apos;abc&apos;]...]]] }}}...}}}\n  let obj={};\n  let o=obj;\n  let arr = [];\n  let a=arr;\n\n  for(let i=0; i&lt;N; i++) {\n    o[&apos;level&apos;+i]={};\n    o=o[&apos;level&apos;+i];\n    let aa=[];\n    a.push(aa);\n    a=aa;\n  }\n\n  a[0]=&apos;abc&apos;;\n  o[&apos;end&apos;]=arr;\n  return obj;\n}\n Run code snippetHide resultsExpand snippet\n\n\n\nBelow snippet presents tested solutions and shows differences between them\n\nShow code snippet\n\nfunction A(obj) {\n  return {...obj}\n}\n\nfunction B(obj) {\n  return Object.assign({}, obj); \n}\n\nfunction C(obj) {\n  return Object.keys(obj).reduce( (a,c) =&gt; (a[c]=obj[c], a), {})\n}\n\nfunction D(obj) {\n  let copyOfObject = {};\n  Object.defineProperties(copyOfObject, Object.getOwnPropertyDescriptors(obj));\n  return copyOfObject;\n}\n\nfunction E(obj) {\n  return jQuery.extend({}, obj) // shallow\n}\n\nfunction F(obj) {\n  return _.clone(obj);\n}\n\nfunction G(obj) {\n  return _.clone(obj,true);\n}\n\nfunction H(obj) {\n  return _.extend({},obj);\n}\n\nfunction I(obj) {\n    if (null == obj || &quot;object&quot; != typeof obj) return obj;\n    var copy = obj.constructor();\n    for (var attr in obj) {\n        if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\n    }\n    return copy;\n}\n\nfunction J(obj) {\n  return _.cloneDeep(obj,true);\n}\n\nfunction K(obj) {\n\treturn JSON.parse(JSON.stringify(obj));\n}\n\nfunction L(obj) {\n  return jQuery.extend(true, {}, obj) // deep\n}\n\nfunction M(obj) {\n  if(obj == null || typeof(obj) != &apos;object&apos;)\n    return obj;    \n  var temp = new obj.constructor(); \n  for(var key in obj)\n    temp[key] = M(obj[key]);    \n  return temp;\n}\n\nfunction N(obj) {\n  let EClone = function(obj) {\n    var newObj = (obj instanceof Array) ? [] : {};\n    for (var i in obj) {\n      if (i == &apos;EClone&apos;) continue;\n      if (obj[i] &amp;&amp; typeof obj[i] == &quot;object&quot;) {\n        newObj[i] = EClone(obj[i]);\n      } else newObj[i] = obj[i]\n    } return newObj;\n  };\n\n\treturn EClone(obj);\n};\n\nfunction O(obj) {\n    if (obj == null || typeof obj != &quot;object&quot;) return obj;\n    if (obj.constructor != Object &amp;&amp; obj.constructor != Array) return obj;\n    if (obj.constructor == Date || obj.constructor == RegExp || obj.constructor == Function ||\n        obj.constructor == String || obj.constructor == Number || obj.constructor == Boolean)\n        return new obj.constructor(obj);\n\n    let to = new obj.constructor();\n\n    for (var name in obj)\n    {\n        to[name] = typeof to[name] == &quot;undefined&quot; ? O(obj[name], null) : to[name];\n    }\n\n    return to;\n}\n\nfunction P(obj) {\n  function clone(target, source){\n\n      for(let key in source){\n\n          // Use getOwnPropertyDescriptor instead of source[key] to prevent from trigering setter/getter.\n          let descriptor = Object.getOwnPropertyDescriptor(source, key);\n          if(descriptor.value instanceof String){\n              target[key] = new String(descriptor.value);\n          }\n          else if(descriptor.value instanceof Array){\n              target[key] = clone([], descriptor.value);\n          }\n          else if(descriptor.value instanceof Object){\n              let prototype = Reflect.getPrototypeOf(descriptor.value);\n              let cloneObject = clone({}, descriptor.value);\n              Reflect.setPrototypeOf(cloneObject, prototype);\n              target[key] = cloneObject;\n          }\n          else {\n              Object.defineProperty(target, key, descriptor);\n          }\n      }\n      let prototype = Reflect.getPrototypeOf(source);\n      Reflect.setPrototypeOf(target, prototype);\n      return target;\n  }\n  return clone({},obj);\n}\n\nfunction Q(obj) {\n    var copy;\n\n    // Handle the 3 simple types, and null or undefined\n    if (null == obj || &quot;object&quot; != typeof obj) return obj;\n\n    // Handle Date\n    if (obj instanceof Date) {\n        copy = new Date();\n        copy.setTime(obj.getTime());\n        return copy;\n    }\n\n    // Handle Array\n    if (obj instanceof Array) {\n        copy = [];\n        for (var i = 0, len = obj.length; i &lt; len; i++) {\n            copy[i] = Q(obj[i]);\n        }\n        return copy;\n    }\n\n    // Handle Object\n    if (obj instanceof Object) {\n        copy = {};\n        for (var attr in obj) {\n            if (obj.hasOwnProperty(attr)) copy[attr] = Q(obj[attr]);\n        }\n        return copy;\n    }\n\n    throw new Error(&quot;Unable to copy obj! Its type isn&apos;t supported.&quot;);\n}\n\nfunction R(obj) {\n    const gdcc = &quot;__getDeepCircularCopy__&quot;;\n    if (obj !== Object(obj)) {\n        return obj; // primitive value\n    }\n\n    var set = gdcc in obj,\n        cache = obj[gdcc],\n        result;\n    if (set &amp;&amp; typeof cache == &quot;function&quot;) {\n        return cache();\n    }\n    // else\n    obj[gdcc] = function() { return result; }; // overwrite\n    if (obj instanceof Array) {\n        result = [];\n        for (var i=0; i&lt;obj.length; i++) {\n            result[i] = R(obj[i]);\n        }\n    } else {\n        result = {};\n        for (var prop in obj)\n            if (prop != gdcc)\n                result[prop] = R(obj[prop]);\n            else if (set)\n                result[prop] = R(cache);\n    }\n    if (set) {\n        obj[gdcc] = cache; // reset\n    } else {\n        delete obj[gdcc]; // unset again\n    }\n    return result;\n}\n\nfunction S(obj) {\n    const cache = new WeakMap(); // Map of old - new references\n\n    function copy(object) {\n        if (typeof object !== &apos;object&apos; ||\n            object === null ||\n            object instanceof HTMLElement\n        )\n            return object; // primitive value or HTMLElement\n\n        if (object instanceof Date) \n            return new Date().setTime(object.getTime());\n\n        if (object instanceof RegExp) \n            return new RegExp(object.source, object.flags);\n\n        if (cache.has(object)) \n            return cache.get(object);\n\n        const result = object instanceof Array ? [] : {};\n\n        cache.set(object, result); // store reference to object before the recursive starts\n\n        if (object instanceof Array) {\n            for(const o of object) {\n                 result.push(copy(o));\n            }\n            return result;\n        }\n\n        const keys = Object.keys(object); \n\n        for (const key of keys)\n            result[key] = copy(object[key]);\n\n        return result;\n    }\n\n    return copy(obj);\n}\n\nfunction T(obj){\n    var clonedObjectsArray = [];\n    var originalObjectsArray = []; //used to remove the unique ids when finished\n    var next_objid = 0;\n\n    function objectId(obj) {\n        if (obj == null) return null;\n        if (obj.__obj_id == undefined){\n            obj.__obj_id = next_objid++;\n            originalObjectsArray[obj.__obj_id] = obj;\n        }\n        return obj.__obj_id;\n    }\n\n    function cloneRecursive(obj) {\n        if (null == obj || typeof obj == &quot;string&quot; || typeof obj == &quot;number&quot; || typeof obj == &quot;boolean&quot;) return obj;\n\n        // Handle Date\n        if (obj instanceof Date) {\n            var copy = new Date();\n            copy.setTime(obj.getTime());\n            return copy;\n        }\n\n        // Handle Array\n        if (obj instanceof Array) {\n            var copy = [];\n            for (var i = 0; i &lt; obj.length; ++i) {\n                copy[i] = cloneRecursive(obj[i]);\n            }\n            return copy;\n        }\n\n        // Handle Object\n        if (obj instanceof Object) {\n            if (clonedObjectsArray[objectId(obj)] != undefined)\n                return clonedObjectsArray[objectId(obj)];\n\n            var copy;\n            if (obj instanceof Function)//Handle Function\n                copy = function(){return obj.apply(this, arguments);};\n            else\n                copy = {};\n\n            clonedObjectsArray[objectId(obj)] = copy;\n\n            for (var attr in obj)\n                if (attr != &quot;__obj_id&quot; &amp;&amp; obj.hasOwnProperty(attr))\n                    copy[attr] = cloneRecursive(obj[attr]);                 \n\n            return copy;\n        }       \n\n\n        throw new Error(&quot;Unable to copy obj! Its type isn&apos;t supported.&quot;);\n    }\n    var cloneObj = cloneRecursive(obj);\n\n\n\n    //remove the unique ids\n    for (var i = 0; i &lt; originalObjectsArray.length; i++)\n    {\n        delete originalObjectsArray[i].__obj_id;\n    };\n\n    return cloneObj;\n}\n\nfunction U(obj) {\n  /*\n    Deep copy objects by value rather than by reference,\n    exception: `Proxy`\n  */\n\n  const seen = new WeakMap()\n\n  return clone(obj)\n\n  function defineProp(object, key, descriptor = {}, copyFrom = {}) {\n    const { configurable: _configurable, writable: _writable }\n      = Object.getOwnPropertyDescriptor(object, key)\n      || { configurable: true, writable: true }\n\n    const test = _configurable // Can redefine property\n      &amp;&amp; (_writable === undefined || _writable) // Can assign to property\n\n    if (!test || arguments.length &lt;= 2) return test\n\n    const basisDesc = Object.getOwnPropertyDescriptor(copyFrom, key)\n      || { configurable: true, writable: true } // Custom\n      || {}; // or left to native default settings\n\n    [&quot;get&quot;, &quot;set&quot;, &quot;value&quot;, &quot;writable&quot;, &quot;enumerable&quot;, &quot;configurable&quot;]\n      .forEach(attr =&gt;\n        descriptor[attr] === undefined &amp;&amp;\n        (descriptor[attr] = basisDesc[attr])\n      )\n\n    const { get, set, value, writable, enumerable, configurable }\n      = descriptor\n\n    return Object.defineProperty(object, key, {\n      enumerable, configurable, ...get || set\n        ? { get, set } // Accessor descriptor\n        : { value, writable } // Data descriptor\n    })\n  }\n\n  function clone(object) {\n    if (object !== Object(object)) return object /*\n     Check if the object belongs to a primitive data type */\n\n    if (object instanceof Node) return object.cloneNode(true) /*\n     Clone DOM trees */\n\n    let _object // The clone of object\n\n    switch (object.constructor) {\n      case Array:\n      case Object:\n        _object = cloneObject(object)\n        break\n\n      case Date:\n        _object = new Date(+object)\n        break\n\n      case Function:\n        const fnStr = String(object)\n\n        _object = new Function(&quot;return &quot; +\n          (/^(?!function |[^{]+?=&gt;)[^(]+?\\(/.test(fnStr)\n            ? &quot;function &quot; : &quot;&quot;\n          ) + fnStr\n        )()\n\n        copyPropDescs(_object, object)\n        break\n\n      case RegExp:\n        _object = new RegExp(object)\n        break\n\n      default:\n        switch (Object.prototype.toString.call(object.constructor)) {\n          //                              // Stem from:\n          case &quot;[object Function]&quot;:       // `class`\n          case &quot;[object Undefined]&quot;:      // `Object.create(null)`\n            _object = cloneObject(object)\n            break\n\n          default:                        // `Proxy`\n            _object = object\n        }\n    }\n\n    return _object\n  }\n\n\n  function cloneObject(object) {\n    if (seen.has(object)) return seen.get(object) /*\n     Handle recursive references (circular structures) */\n\n    const _object = Array.isArray(object)\n      ? []\n      : Object.create(Object.getPrototypeOf(object)) /*\n         Assign [[Prototype]] for inheritance */\n\n    seen.set(object, _object) /*\n     Make `_object` the associative mirror of `object` */\n\n    Reflect.ownKeys(object).forEach(key =&gt;\n      defineProp(_object, key, { value: clone(object[key]) }, object)\n    )\n\n    return _object\n  }\n\n\n  function copyPropDescs(target, source) {\n    Object.defineProperties(target,\n      Object.getOwnPropertyDescriptors(source)\n    )\n  }\n}\n \n// ------------------------\n// Test properties\n// ------------------------\n\n\nconsole.log(`  shallow deep  func  circ  undefined date  RegExp bigInt`)\n\nlog(A);\nlog(B);\nlog(C);\nlog(D);\nlog(E);\nlog(F);\nlog(G);\nlog(H);\nlog(I);\nlog(J);\nlog(K);\nlog(L);\nlog(M);\nlog(N);\nlog(O);\nlog(P);\nlog(Q);\nlog(R);\nlog(S);\nlog(T);\nlog(U);\n\nconsole.log(`  shallow deep  func  circ  undefined date  RegExp bigInt\n----\nLEGEND:\nshallow - solution create shallow copy\ndeep - solution create deep copy\nfunc - solution copy functions\ncirc - solution can copy object with circular references\nundefined - solution copy fields with undefined value\ndate - solution can copy date\nRegExp - solution can copy fields with regular expressions\nbigInt - solution can copy BigInt\n`)\n\n\n// ------------------------\n// Helper functions\n// ------------------------\n\n\nfunction deepCompare(obj1,obj2) {\n  return JSON.stringify(obj1)===JSON.stringify(obj2);\n}\n\nfunction getCase() { // pure data case\n  return { \n    undef: undefined,\n    bool: true, num: 1, str: &quot;txt1&quot;,    \n    e1: null, e2: [], e3: {}, e4: 0, e5: false,\n    arr: [ false, 2, &quot;txt3&quot;, null, [], {},\n      [ true,4,&quot;txt5&quot;,null, [], {},  [true,6,&quot;txt7&quot;,null,[],{} ], \n        {bool: true,num: 8, str: &quot;txt9&quot;, e1:null, e2:[] ,e3:{} ,e4: 0, e5: false}\n      ],\n        {bool: true,num: 10, str: &quot;txt11&quot;, e1:null, e2:[] ,e3:{} ,e4: 0, e5: false}\n    ], \n    obj: { \n        bool: true, num: 12, str: &quot;txt13&quot;,\n        e1: null, e2: [], e3: {}, e4: 0, e5: false,\n        arr: [true,14,&quot;txt15&quot;,null,[],{} ],\n        obj: { \n          bool: true, num: 16, str: &quot;txt17&quot;,\n          e1: null, e2: [], e3: {}, e4: 0, e5: false,\n          arr: [true,18,&quot;txt19&quot;,null,[],{} ],\n          obj: {bool: true,num: 20, str: &quot;txt21&quot;, e1:null, e2:[] ,e3:{} ,e4: 0, e5: false}\n      } \n    } \n  };\n}\n\nfunction check(org, copy, field, newValue) {\n  copy[field] = newValue;\n  return deepCompare(org,copy); \n}\n\nfunction testFunc(f) {\n\tlet o = { a:1, fun: (i,j)=&gt; i+j };\n  let c = f(o);\n  \n  let val = false\n  try{\n    val = c.fun(3,4)==7;\n  } catch(e) { }\n  return val;\n} \n\nfunction testCirc(f) {\n\tfunction Circ() {\n    this.me = this;\n  }\n\n  var o = {\n      x: &apos;a&apos;,\n      circ: new Circ(),\n      obj_circ: null,\n  };\n  \n  o.obj_circ = o;\n\n  let val = false;\n\n  try{\n    let c = f(o);  \n    val = (o.obj_circ == o) &amp;&amp; (o.circ == o.circ.me);\n  } catch(e) { }\n  return val;\n} \n\nfunction testRegExp(f) {\n  let o = {\n    re: /a[0-9]+/,\n  };\n  \n  let val = false;\n\n  try{\n    let c = f(o);  \n    val = (String(c.re) == String(/a[0-9]+/));\n  } catch(e) { }\n  return val;\n}\n\nfunction testDate(f) {\n  let o = {\n    date: new Date(),\n  };\n  \n  let val = false;\n\n  try{\n    let c = f(o);  \n    val = (+new Date(c.date) == +new Date(o.date));\n  } catch(e) { }\n  return val;\n}\n\nfunction testBigInt(f) {\n  let val = false;\n  \n  try{\n    let o = {\n      big: 123n,\n    };\n  \n    let c = f(o);  \n  \n    val = o.big == c.big;\n  } catch(e) { }\n  \n  return val;\n}\n\nfunction log(f) {\n  let o = getCase();  // orginal object\n  let oB = getCase(); // &quot;backup&quot; used for shallow valid test\n  \n  let c1 = f(o); // copy 1 for reference\n  let c2 = f(o); // copy 2 for test shallow values\n  let c3 = f(o); // copy 3 for test deep values\n\n  let is_proper_copy = deepCompare(c1,o);  // shoud be true\n  \n  // shallow changes\n  let testShallow = \n    [ [&apos;bool&apos;,false],[&apos;num&apos;,666],[&apos;str&apos;,&apos;xyz&apos;],[&apos;arr&apos;,[]],[&apos;obj&apos;,{}] ]\n    .reduce((acc,curr)=&gt; acc &amp;&amp; check(c1,c2,curr[0], curr[1]), true );\n  \n  // should be true (original object shoud not have changed shallow fields)\n  let is_valid = deepCompare(o,oB); \n\n  // deep test (intruduce some change)\n  if (c3.arr[6]) c3.arr[6][7].num = 777;\n  \n  let diff_shallow = !testShallow; // shoud be true (shallow field was copied)\n  let diff_deep = !deepCompare(c1,c3);    // shoud be true (deep field was copied)\n  let can_copy_functions = testFunc(f);\n  let can_copy_circular = testCirc(f);\n  let can_copy_regexp = testRegExp(f);\n  let can_copy_date = testDate(f);\n  let can_copy_bigInt = testBigInt(f);\n  \n  let has_undefined = &apos;undef&apos; in c1; // field with undefined value is copied?  \n  let is_ok = is_valid &amp;&amp; is_proper_copy;\n  let b=(bool) =&gt; (bool+&apos;&apos;).padEnd(5,&apos; &apos;); // bool value to formated string\n  \n  testFunc(f);\n  \n  if(is_ok) {\n    console.log(`${f.name} ${b(diff_shallow)}   ${b(diff_deep)} ${b(can_copy_functions)} ${b(can_copy_circular)} ${b(has_undefined)}     ${b(can_copy_date)} ${b(can_copy_regexp)}  ${b(can_copy_bigInt)}`)\n  } else {\n    console.log(`${f.name}: INVALID ${is_valid} ${is_proper_copy}`,{c1})\n  }\n  \n}\n&lt;script src=&quot;https://code.jquery.com/jquery-3.5.0.min.js&quot; integrity=&quot;sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n&lt;script src=&quot;https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js&quot;&gt;&lt;/script&gt;\n\nThis snippet only presents tested solutions and show differences between them (but it no make performence tests)\n Run code snippetHide resultsExpand snippet\n\n\n\nBelow there are example results for Chrome for shallow-big object\n\n\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0},{"text":"Using Lodash: \n\nvar y = _.clone(x, true);\n\n    ","url":"/questions/[slug]#solution20","@type":"Answer","upvoteCount":0},{"text":"In ES-6 you can simply use Object.assign(...).\nEx:\n\nlet obj = {person: &apos;Thor Odinson&apos;};\nlet clone = Object.assign({}, obj);\n\n\nA good reference is here:\nhttps://googlechrome.github.io/samples/object-assign-es6/\n    ","url":"/questions/[slug]#solution21","@type":"Answer","upvoteCount":0},{"text":"Interested in cloning simple objects:\n\nJSON.parse(JSON.stringify(json_original));\n\nSource : How to copy JavaScript object to new variable NOT by reference?\n    ","url":"/questions/[slug]#solution22","@type":"Answer","upvoteCount":0},{"text":"You can clone an object and remove any reference from the previous one using a single line of code. Simply do:\n\nvar obj1 = { text: &apos;moo1&apos; };\nvar obj2 = Object.create(obj1); // Creates a new clone without references\n\nobj2.text = &apos;moo2&apos;; // Only updates obj2&apos;s text property\n\nconsole.log(obj1, obj2); // Outputs: obj1: {text:&apos;moo1&apos;}, obj2: {text:&apos;moo2&apos;}\n\n\nFor browsers / engines that do not currently support Object.create you can use this polyfill:\n\n// Polyfill Object.create if it does not exist\nif (!Object.create) {\n    Object.create = function (o) {\n        var F = function () {};\n        F.prototype = o;\n        return new F();\n    };\n}\n\n    ","url":"/questions/[slug]#solution23","@type":"Answer","upvoteCount":0},{"text":"let clone = Object.assign( Object.create( Object.getPrototypeOf(obj)), obj)\n\n\nES6 solution if you want to (shallow) clone a class instance and not just a property object.\n    ","url":"/questions/[slug]#solution24","@type":"Answer","upvoteCount":0},{"text":"New answer to an old question!  If you have the pleasure of having using ECMAScript 2016 (ES6) with Spread Syntax, it&apos;s easy.\n\nkeepMeTheSame = {first: &quot;Me!&quot;, second: &quot;You!&quot;};\ncloned = {...keepMeTheSame}\n\n\nThis provides a clean method for a shallow copy of an object.  Making a deep copy, meaning makign a new copy of every value in every recursively nested object, requires on of the heavier solutions above.\n\nJavaScript keeps evolving.\n    ","url":"/questions/[slug]#solution25","@type":"Answer","upvoteCount":0},{"text":"I think there is a simple and working answer. In deep copying there are two concerns:\n\n\nKeep properties independent to each other.\nAnd keep the methods alive on cloned object.\n\n\nSo I think one simple solution will be to first serialize and deserialize and then do an assign on it to copy functions too.\n\nlet deepCloned = JSON.parse(JSON.stringify(source));\nlet merged = Object.assign({}, source);\nObject.assign(merged, deepCloned);\n\n\nAlthough this question has many answers, I hope this one helps too.\n    ","url":"/questions/[slug]#solution26","@type":"Answer","upvoteCount":0},{"text":"For a deep copy and clone, JSON.stringify then JSON.parse the object:\n\nobj = { a: 0 , b: { c: 0}};\nlet deepClone = JSON.parse(JSON.stringify(obj));\nobj.a = 5;\nobj.b.c = 5;\nconsole.log(JSON.stringify(deepClone)); // { a: 0, b: { c: 0}}\n\n    ","url":"/questions/[slug]#solution27","@type":"Answer","upvoteCount":0},{"text":"Structured Cloning\n2022 update: The structuredClone() global function is already available in Node 17, Deno 1.14, and most major browsers (see Can I Use).\nYou can use the same structured clone mechanism that the HTML standard includes for sending data between realms.\nconst clone = structuredClone(original);\n\nSee the other answer for more details.\n    ","url":"/questions/[slug]#solution28","@type":"Answer","upvoteCount":0},{"text":"(The following was mainly an integration of @Maciej Bukowski, @A. Levy, @Jan Turo, @Redu&apos;s answers, and @LeviRoberts, @RobG&apos;s comments, many thanks to them!!!)\nDeep copy?  YES! (mostly);\nShallow copy?  NO! (except Proxy).\nI sincerely welcome everyone to test clone().\nIn addition, defineProp() is designed to easily and quickly (re)define or copy any type of descriptor.\nFunction\nfunction clone(object) {\n  /*\n    Deep copy objects by value rather than by reference,\n    exception: `Proxy`\n  */\n\n  const seen = new WeakMap()\n\n  return clone(object)\n\n\n  function clone(object) {\n    if (object !== Object(object)) return object /*\n     Check if the object belongs to a primitive data type */\n\n    if (object instanceof Node) return object.cloneNode(true) /*\n     Clone DOM trees */\n\n    let _object // The clone of object\n\n    switch (object.constructor) {\n      case Array:\n      case Object:\n        _object = cloneObject(object)\n        break\n\n      case Date:\n        _object = new Date(+object)\n        break\n\n      case Function:\n        _object = copyFn(object)\n        break\n\n      case RegExp:\n        _object = new RegExp(object)\n        break\n\n      default:\n        switch (Object.prototype.toString.call(object.constructor)) {\n          //                                  // Stem from:\n          case &quot;[object Function]&quot;:\n            switch (object[Symbol.toStringTag]) {\n              case undefined:\n                _object = cloneObject(object) // `class`\n                break\n\n              case &quot;AsyncFunction&quot;:\n              case &quot;GeneratorFunction&quot;:\n              case &quot;AsyncGeneratorFunction&quot;:\n                _object = copyFn(object)\n                break\n\n              default:\n                _object = object\n            }\n            break\n\n          case &quot;[object Undefined]&quot;:          // `Object.create(null)`\n            _object = cloneObject(object)\n            break\n\n          default:\n            _object = object                  // `Proxy`\n        }\n    }\n\n    return _object\n  }\n\n\n  function cloneObject(object) {\n    if (seen.has(object)) return seen.get(object) /*\n     Handle recursive references (circular structures) */\n\n    const _object = Array.isArray(object)\n      ? []\n      : Object.create(Object.getPrototypeOf(object)) /*\n         Assign [[Prototype]] for inheritance */\n\n    seen.set(object, _object) /*\n     Make `_object` the associative mirror of `object` */\n\n    Reflect.ownKeys(object).forEach(key =&gt;\n      defineProp(_object, key, { value: clone(object[key]) }, object)\n    )\n\n    return _object\n  }\n}\n\n\nfunction copyPropDescs(target, source) {\n  Object.defineProperties(target,\n    Object.getOwnPropertyDescriptors(source)\n  )\n}\n\n\nfunction convertFnToStr(fn) {\n  let fnStr = String(fn)\n  if (fn.name.startsWith(&quot;[&quot;)) // isSymbolKey\n    fnStr = fnStr.replace(/\\[Symbol\\..+?\\]/, &apos;&apos;)\n  fnStr = /^(?!(async )?(function\\b|[^{]+?=&gt;))[^(]+?\\(/.test(fnStr)\n    ? fnStr.replace(/^(async )?(\\*)?/, &quot;$1function$2 &quot;) : fnStr\n  return fnStr\n}\n\nfunction copyFn(fn) {\n  const newFn = new Function(`return ${convertFnToStr(fn)}`)()\n  copyPropDescs(newFn, fn)\n  return newFn\n}\n\n\n\nfunction defineProp(object, key, descriptor = {}, copyFrom = {}) {\n  const { configurable: _configurable, writable: _writable }\n    = Object.getOwnPropertyDescriptor(object, key)\n    || { configurable: true, writable: true }\n\n  const test = _configurable // Can redefine property\n    &amp;&amp; (_writable === undefined || _writable) // Can assign to property\n\n  if (!test || arguments.length &lt;= 2) return test\n\n  const basisDesc = Object.getOwnPropertyDescriptor(copyFrom, key)\n    || { configurable: true, writable: true } // Custom\n    || {}; // or left to native default settings\n\n  [&quot;get&quot;, &quot;set&quot;, &quot;value&quot;, &quot;writable&quot;, &quot;enumerable&quot;, &quot;configurable&quot;]\n    .forEach(attr =&gt;\n      descriptor[attr] === undefined &amp;&amp;\n      (descriptor[attr] = basisDesc[attr])\n    )\n\n  const { get, set, value, writable, enumerable, configurable }\n    = descriptor\n\n  return Object.defineProperty(object, key, {\n    enumerable, configurable, ...get || set\n      ? { get, set } // Accessor descriptor\n      : { value, writable } // Data descriptor\n  })\n}\n\n// Tests\nconst obj0 = {\n  u: undefined,\n  nul: null,\n  t: true,\n  num: 9,\n  str: &quot;&quot;,\n  sym: Symbol(&quot;symbol&quot;),\n  [Symbol(&quot;e&quot;)]: Math.E,\n  arr: [[0], [1, 2]],\n  d: new Date(),\n  re: /f/g,\n  get g() { return 0 },\n  o: {\n    n: 0,\n    o: { f: function (...args) { } }\n  },\n  f: {\n    getAccessorStr(object) {\n      return []\n        .concat(...\n          Object.values(Object.getOwnPropertyDescriptors(object))\n            .filter(desc =&gt; desc.writable === undefined)\n            .map(desc =&gt; Object.values(desc))\n        )\n        .filter(prop =&gt; typeof prop === &quot;function&quot;)\n        .map(String)\n    },\n    f0: function f0() { },\n    f1: function () { },\n    f2: a =&gt; a / (a + 1),\n    f3: () =&gt; 0,\n    f4(params) { return param =&gt; param + params },\n    f5: (a, b) =&gt; ({ c = 0 } = {}) =&gt; a + b + c\n  }\n}\n\ndefineProp(obj0, &quot;s&quot;, { set(v) { this._s = v } })\ndefineProp(obj0.arr, &quot;tint&quot;, { value: { is: &quot;non-enumerable&quot; } })\nobj0.arr[0].name = &quot;nested array&quot;\n\n\nlet obj1 = clone(obj0)\nobj1.o.n = 1\nobj1.o.o.g = function g(a = 0, b = 0) { return a + b }\nobj1.arr[1][1] = 3\nobj1.d.setTime(+obj0.d + 60 * 1000)\nobj1.arr.tint.is = &quot;enumerable? no&quot;\nobj1.arr[0].name = &quot;a nested arr&quot;\ndefineProp(obj1, &quot;s&quot;, { set(v) { this._s = v + 1 } })\ndefineProp(obj1.re, &quot;multiline&quot;, { value: true })\n\nconsole.log(&quot;\\n\\n&quot; + &quot;-&quot;.repeat(2 ** 6))\n\n\n\n\nconsole.log(&quot;&gt;:&gt;: Test - Routinely&quot;)\n\nconsole.log(&quot;obj0:\\n &quot;, JSON.stringify(obj0))\nconsole.log(&quot;obj1:\\n &quot;, JSON.stringify(obj1))\nconsole.log()\n\nconsole.log(&quot;obj0:\\n &quot;, obj0)\nconsole.log(&quot;obj1:\\n &quot;, obj1)\nconsole.log()\n\nconsole.log(&quot;obj0\\n &quot;,\n  &quot;.arr.tint:&quot;, obj0.arr.tint, &quot;\\n &quot;,\n  &quot;.arr[0].name:&quot;, obj0.arr[0].name\n)\nconsole.log(&quot;obj1\\n &quot;,\n  &quot;.arr.tint:&quot;, obj1.arr.tint, &quot;\\n &quot;,\n  &quot;.arr[0].name:&quot;, obj1.arr[0].name\n)\nconsole.log()\n\nconsole.log(&quot;Accessor-type descriptor\\n &quot;,\n  &quot;of obj0:&quot;, obj0.f.getAccessorStr(obj0), &quot;\\n &quot;,\n  &quot;of obj1:&quot;, obj1.f.getAccessorStr(obj1), &quot;\\n &quot;,\n  &quot;set (obj0 &amp; obj1) .s :&quot;, obj0.s = obj1.s = 0, &quot;\\n &quot;,\n  &quot;   (obj0 , obj1) ._s:&quot;, obj0._s, &quot;,&quot;, obj1._s\n)\n\nconsole.log(&quot; obj0 has not been interfered.&quot;)\n\nconsole.log(&quot;\\n\\n&quot; + &quot;-&quot;.repeat(2 ** 6))\n\n\n\n\nconsole.log(&quot;&gt;:&gt;: Test - More kinds of functions&quot;)\n\nconst fnsForTest = {\n  f(_) { return _ },\n  func: _ =&gt; _,\n  aFunc: async _ =&gt; _,\n  async function() { },\n  async asyncFunc() { },\n  aFn: async function () { },\n  *gen() { },\n  async *asyncGen() { },\n  aG1: async function* () { },\n  aG2: async function* gen() { },\n  *[Symbol.iterator]() { yield* Object.keys(this) }\n}\n\nconsole.log(Reflect.ownKeys(fnsForTest).map(k =&gt;\n  `${String(k)}:\n  ${fnsForTest[k].name}--&gt;\n    ${String(fnsForTest[k])}`\n).join(&quot;\\n&quot;))\n\nconst normedFnsStr = `{\n  f: function f(_) { return _ },\n  func: _ =&gt; _,\n  aFunc: async _ =&gt; _,\n  function: async function() { },\n  asyncFunc: async function asyncFunc() { },\n  aFn: async function () { },\n  gen: function* gen() { },\n  asyncGen: async function* asyncGen() { },\n  aG1: async function* () { },\n  aG2: async function* gen() { },\n  [Symbol.iterator]: function* () { yield* Object.keys(this) }\n}`\n\nconst copiedFnsForTest = clone(fnsForTest)\nconsole.log(&quot;fnsForTest:&quot;, fnsForTest)\nconsole.log(&quot;fnsForTest (copied):&quot;, copiedFnsForTest)\nconsole.log(&quot;fnsForTest (normed str):&quot;, eval(`(${normedFnsStr})`))\nconsole.log(&quot;Comparison of fnsForTest and its clone:&quot;,\n  Reflect.ownKeys(fnsForTest).map(k =&gt;\n    [k, fnsForTest[k] === copiedFnsForTest[k]]\n  )\n)\n\nconsole.log(&quot;\\n\\n&quot; + &quot;-&quot;.repeat(2 ** 6))\n\n\n\n\nconsole.log(&quot;&gt;:&gt;: Test - Circular structures&quot;)\n\nobj0.o.r = {}\nobj0.o.r.recursion = obj0.o\nobj0.arr[1] = obj0.arr\n\nobj1 = clone(obj0)\nconsole.log(&quot;obj0:\\n &quot;, obj0)\nconsole.log(&quot;obj1:\\n &quot;, obj1)\n\nconsole.log(&quot;Clear obj0&apos;s recursion:&quot;,\n  obj0.o.r.recursion = null, obj0.arr[1] = 1\n)\nconsole.log(\n  &quot;obj0\\n &quot;,\n  &quot;.o.r:&quot;, obj0.o.r, &quot;\\n &quot;,\n  &quot;.arr:&quot;, obj0.arr\n)\nconsole.log(\n  &quot;obj1\\n &quot;,\n  &quot;.o.r:&quot;, obj1.o.r, &quot;\\n &quot;,\n  &quot;.arr:&quot;, obj1.arr\n)\nconsole.log(&quot; obj1 has not been interfered.&quot;)\n\n\nconsole.log(&quot;\\n\\n&quot; + &quot;-&quot;.repeat(2 ** 6))\n\n\n\n\nconsole.log(&quot;&gt;:&gt;: Test - Classes&quot;)\n\nclass Person {\n  constructor(name) {\n    this.name = name\n  }\n}\n\nclass Boy extends Person { }\nBoy.prototype.sex = &quot;M&quot;\n\nconst boy0 = new Boy\nboy0.hobby = { sport: &quot;spaceflight&quot; }\n\nconst boy1 = clone(boy0)\nboy1.hobby.sport = &quot;superluminal flight&quot;\n\nboy0.name = &quot;one&quot;\nboy1.name = &quot;neo&quot;\n\nconsole.log(&quot;boy0:\\n &quot;, boy0)\nconsole.log(&quot;boy1:\\n &quot;, boy1)\nconsole.log(&quot;boy1&apos;s prototype === boy0&apos;s:&quot;,\n  Object.getPrototypeOf(boy1) === Object.getPrototypeOf(boy0)\n)\n\nReferences\n\nObject.create() | MDN\nObject.defineProperties() | MDN\nEnumerability and ownership of properties | MDN\nTypeError: cyclic object value | MDN\n\nLanguage tricks used\n\nConditionally add prop to object\n\n    ","url":"/questions/[slug]#solution29","@type":"Answer","upvoteCount":0},{"text":"\n  Use lodash _.cloneDeep().\n\n\nShallow Copy: lodash _.clone()\n\nA shallow copy can be made by simply copying the reference.\n\nlet obj1 = {\n    a: 0,\n    b: {\n        c: 0,\n        e: {\n            f: 0\n        }\n    }\n};\nlet obj3 = _.clone(obj1);\nobj1.a = 4;\nobj1.b.c = 4;\nobj1.b.e.f = 100;\n\nconsole.log(JSON.stringify(obj1));\n//{&quot;a&quot;:4,&quot;b&quot;:{&quot;c&quot;:4,&quot;e&quot;:{&quot;f&quot;:100}}}\n\nconsole.log(JSON.stringify(obj3));\n//{&quot;a&quot;:0,&quot;b&quot;:{&quot;c&quot;:4,&quot;e&quot;:{&quot;f&quot;:100}}}\n\n\n\n\nDeep Copy: lodash _.cloneDeep()\n\nfields are dereferenced: rather than references to objects being copied\n\nlet obj1 = {\n    a: 0,\n    b: {\n        c: 0,\n        e: {\n            f: 0\n        }\n    }\n};\nlet obj3 = _.cloneDeep(obj1);\nobj1.a = 100;\nobj1.b.c = 100;\nobj1.b.e.f = 100;\n\nconsole.log(JSON.stringify(obj1));\n{&quot;a&quot;:100,&quot;b&quot;:{&quot;c&quot;:100,&quot;e&quot;:{&quot;f&quot;:100}}}\n\nconsole.log(JSON.stringify(obj3));\n{&quot;a&quot;:0,&quot;b&quot;:{&quot;c&quot;:0,&quot;e&quot;:{&quot;f&quot;:0}}}\n\n\n\n    ","url":"/questions/[slug]#solution30","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-b06815e21c943e0d.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-79a1437acf654019.js" defer=""></script><script src="/_next/static/TQ2eYlCSdocSK-hq6gkM0/_buildManifest.js" defer=""></script><script src="/_next/static/TQ2eYlCSdocSK-hq6gkM0/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-do-i-correctly-clone-a-javascript-object-1657387325850#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-do-i-correctly-clone-a-javascript-object-1657387325850"><h1>How do I correctly clone a JavaScript object?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/javascript-objects">javascript-objects</a></div></div><div class="question-content mt-5">
                
<p>I have an object <code>x</code>. I'd like to copy it as object <code>y</code>, such that changes to <code>y</code> do not modify <code>x</code>. I realized that copying objects derived from built-in JavaScript objects will result in extra, unwanted properties. This isn't a problem, since I'm copying one of my own literal-constructed objects.</p>

<p>How do I correctly clone a JavaScript object?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li><li class="pagination-solution-item"><span data-id="#solution20" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">20</span></li><li class="pagination-solution-item"><span data-id="#solution21" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">21</span></li><li class="pagination-solution-item"><span data-id="#solution22" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">22</span></li><li class="pagination-solution-item"><span data-id="#solution23" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">23</span></li><li class="pagination-solution-item"><span data-id="#solution24" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">24</span></li><li class="pagination-solution-item"><span data-id="#solution25" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">25</span></li><li class="pagination-solution-item"><span data-id="#solution26" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">26</span></li><li class="pagination-solution-item"><span data-id="#solution27" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">27</span></li><li class="pagination-solution-item"><span data-id="#solution28" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">28</span></li><li class="pagination-solution-item"><span data-id="#solution29" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">29</span></li><li class="pagination-solution-item"><span data-id="#solution30" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">30</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h3>2022 update</h3>
<p>There's a new JS standard called "structured cloning". It works on all browsers:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> clone = <span class="hljs-title function_">structuredClone</span>(object);
</code></pre>
<h2>Old answer</h2>
<p>To do this for any object in JavaScript will not be simple or straightforward. You will run into the problem of erroneously picking up attributes from the object's prototype that should be left in the prototype and not copied to the new instance. If, for instance, you are adding a <code>clone</code> method to <code>Object.prototype</code>, as some answers depict, you will need to explicitly skip that attribute. But what if there are other additional methods added to <code>Object.prototype</code>, or other intermediate prototypes, that you don't know about? In that case, you will copy attributes you shouldn't, so you need to detect unforeseen, non-local attributes with the <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Object/hasOwnProperty" rel="noreferrer" title="Mozilla JavaScript Reference: Object.hasOwnProperty"><code>hasOwnProperty</code></a> method.</p>
<p>In addition to non-enumerable attributes, you'll encounter a tougher problem when you try to copy objects that have hidden properties. For example, <code>prototype</code> is a hidden property of a function. Also, an object's prototype is referenced with the attribute <code>__proto__</code>, which is also hidden, and will not be copied by a for/in loop iterating over the source object's attributes. I think <code>__proto__</code> might be specific to Firefox's JavaScript interpreter and it may be something different in other browsers, but you get the picture. Not everything is enumerable. You can copy a hidden attribute if you know its name, but I don't know of any way to discover it automatically.</p>
<p>Yet another snag in the quest for an elegant solution is the problem of setting up the prototype inheritance correctly. If your source object's prototype is <code>Object</code>, then simply creating a new general object with <code>{}</code> will work, but if the source's prototype is some descendant of <code>Object</code>, then you are going to be missing the additional members from that prototype which you skipped using the <code>hasOwnProperty</code> filter, or which were in the prototype, but weren't enumerable in the first place. One solution might be to call the source object's <code>constructor</code> property to get the initial copy object and then copy over the attributes, but then you still will not get non-enumerable attributes. For example, a <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Date" rel="noreferrer" title="Mozilla JavaScript Reference: Date"><code>Date</code></a> object stores its data as a hidden member:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == obj || <span class="hljs-string">"object"</span> != <span class="hljs-keyword">typeof</span> obj) <span class="hljs-keyword">return</span> obj;
    <span class="hljs-keyword">var</span> copy = obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> attr <span class="hljs-keyword">in</span> obj) {
        <span class="hljs-keyword">if</span> (obj.<span class="hljs-title function_">hasOwnProperty</span>(attr)) copy[attr] = obj[attr];
    }
    <span class="hljs-keyword">return</span> copy;
}

<span class="hljs-keyword">var</span> d1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();

<span class="hljs-comment">/* Executes function after 5 seconds. */</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">var</span> d2 = <span class="hljs-title function_">clone</span>(d1);
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">"d1 = "</span> + d1.<span class="hljs-title function_">toString</span>() + <span class="hljs-string">"\nd2 = "</span> + d2.<span class="hljs-title function_">toString</span>());
}, <span class="hljs-number">5000</span>);
</code></pre>
<p>The date string for <code>d1</code> will be 5 seconds behind that of <code>d2</code>. A way to make one <code>Date</code> the same as another is by calling the <code>setTime</code> method, but that is specific to the <code>Date</code> class. I don't think there is a bullet-proof general solution to this problem, though I would be happy to be wrong!</p>
<p>When I had to implement general deep copying I ended up compromising by assuming that I would only need to copy a plain <code>Object</code>, <code>Array</code>, <code>Date</code>, <code>String</code>, <code>Number</code>, or <code>Boolean</code>. The last 3 types are immutable, so I could perform a shallow copy and not worry about it changing. I further assumed that any elements contained in <code>Object</code> or <code>Array</code> would also be one of the 6 simple types in that list. This can be accomplished with code like the following:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">var</span> copy;

    <span class="hljs-comment">// Handle the 3 simple types, and null or undefined</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == obj || <span class="hljs-string">"object"</span> != <span class="hljs-keyword">typeof</span> obj) <span class="hljs-keyword">return</span> obj;

    <span class="hljs-comment">// Handle Date</span>
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>) {
        copy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
        copy.<span class="hljs-title function_">setTime</span>(obj.<span class="hljs-title function_">getTime</span>());
        <span class="hljs-keyword">return</span> copy;
    }

    <span class="hljs-comment">// Handle Array</span>
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) {
        copy = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = obj.<span class="hljs-property">length</span>; i &lt; len; i++) {
            copy[i] = <span class="hljs-title function_">clone</span>(obj[i]);
        }
        <span class="hljs-keyword">return</span> copy;
    }

    <span class="hljs-comment">// Handle Object</span>
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>) {
        copy = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> attr <span class="hljs-keyword">in</span> obj) {
            <span class="hljs-keyword">if</span> (obj.<span class="hljs-title function_">hasOwnProperty</span>(attr)) copy[attr] = <span class="hljs-title function_">clone</span>(obj[attr]);
        }
        <span class="hljs-keyword">return</span> copy;
    }

    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Unable to copy obj! Its type isn't supported."</span>);
}
</code></pre>
<p>The above function will work adequately for the 6 simple types I mentioned, as long as the data in the objects and arrays form a tree structure. That is, there isn't more than one reference to the same data in the object. For example:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">// This would be cloneable:</span>
<span class="hljs-keyword">var</span> tree = {
    <span class="hljs-string">"left"</span>  : { <span class="hljs-string">"left"</span> : <span class="hljs-literal">null</span>, <span class="hljs-string">"right"</span> : <span class="hljs-literal">null</span>, <span class="hljs-string">"data"</span> : <span class="hljs-number">3</span> },
    <span class="hljs-string">"right"</span> : <span class="hljs-literal">null</span>,
    <span class="hljs-string">"data"</span>  : <span class="hljs-number">8</span>
};

<span class="hljs-comment">// This would kind-of work, but you would get 2 copies of the </span>
<span class="hljs-comment">// inner node instead of 2 references to the same copy</span>
<span class="hljs-keyword">var</span> directedAcylicGraph = {
    <span class="hljs-string">"left"</span>  : { <span class="hljs-string">"left"</span> : <span class="hljs-literal">null</span>, <span class="hljs-string">"right"</span> : <span class="hljs-literal">null</span>, <span class="hljs-string">"data"</span> : <span class="hljs-number">3</span> },
    <span class="hljs-string">"data"</span>  : <span class="hljs-number">8</span>
};
directedAcyclicGraph[<span class="hljs-string">"right"</span>] = directedAcyclicGraph[<span class="hljs-string">"left"</span>];

<span class="hljs-comment">// Cloning this would cause a stack overflow due to infinite recursion:</span>
<span class="hljs-keyword">var</span> cyclicGraph = {
    <span class="hljs-string">"left"</span>  : { <span class="hljs-string">"left"</span> : <span class="hljs-literal">null</span>, <span class="hljs-string">"right"</span> : <span class="hljs-literal">null</span>, <span class="hljs-string">"data"</span> : <span class="hljs-number">3</span> },
    <span class="hljs-string">"data"</span>  : <span class="hljs-number">8</span>
};
cyclicGraph[<span class="hljs-string">"right"</span>] = cyclicGraph;
</code></pre>
<p>It will not be able to handle any JavaScript object, but it may be sufficient for many purposes as long as you don't assume that it will just work for anything you throw at it.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you do not use <code>Date</code>s, functions, undefined, regExp or Infinity within your object, a very simple one liner is <code>JSON.parse(JSON.stringify(object))</code>:</p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> a = {
  <span class="hljs-attr">string</span>: <span class="hljs-string">'string'</span>,
  <span class="hljs-attr">number</span>: <span class="hljs-number">123</span>,
  <span class="hljs-attr">bool</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">nul</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),  <span class="hljs-comment">// stringified</span>
  <span class="hljs-attr">undef</span>: <span class="hljs-literal">undefined</span>,  <span class="hljs-comment">// lost</span>
  <span class="hljs-attr">inf</span>: <span class="hljs-title class_">Infinity</span>,  <span class="hljs-comment">// forced to 'null'</span>
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> a.<span class="hljs-property">date</span>);  <span class="hljs-comment">// Date object</span>
<span class="hljs-keyword">const</span> clone = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(a));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(clone);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> clone.<span class="hljs-property">date</span>);  <span class="hljs-comment">// result of .toISOString()</span></code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif1" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>

<p>This works for all kind of objects containing objects, arrays, strings, booleans and numbers.</p>

<p>See also <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/The_structured_clone_algorithm" rel="noreferrer">this article about the structured clone algorithm of browsers</a> which is used when posting messages to and from a worker. It also contains a function for deep cloning.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>With jQuery, you can <strong>shallow copy</strong> with <a href="http://api.jquery.com/jQuery.extend" rel="noreferrer">extend</a>:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> copiedObject = jQuery.<span class="hljs-title function_">extend</span>({}, originalObject)
</code></pre>

<p>subsequent changes to the <code>copiedObject</code> will not affect the <code>originalObject</code>, and vice versa.</p>

<p>Or to make a <strong>deep copy</strong>:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> copiedObject = jQuery.<span class="hljs-title function_">extend</span>(<span class="hljs-literal">true</span>, {}, originalObject)
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In ECMAScript 6 there is <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" rel="noreferrer">Object.assign</a> method, which copies values of all enumerable own properties from one object to another. For example:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> x = {<span class="hljs-attr">myProp</span>: <span class="hljs-string">"value"</span>};
<span class="hljs-keyword">var</span> y = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, x); 
</code></pre>
<p>But be aware <strong>this is a shallow copy</strong> - nested objects are still copied as reference.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Per <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Deep_Clone" rel="noreferrer">MDN</a>:</p>

<ul>
<li>If you want shallow copy, use <code>Object.assign({}, a)</code></li>
<li>For "deep" copy, use <code>JSON.parse(JSON.stringify(a))</code></li>
</ul>

<p>There is no need for external libraries but you need to check <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Browser_compatibility" rel="noreferrer">browser compatibility first</a>.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are many answers, but none that mentions <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create" rel="noreferrer">Object.create</a> from ECMAScript 5, which admittedly does not give you an exact copy, but sets the source as the prototype of the new object.</p>

<p>Thus, this is not an exact answer to the question, but it is a one-line solution and thus elegant. And it works best for 2 cases:</p>

<ol>
<li>Where such inheritance is useful (duh!)</li>
<li>Where the source object won't be modified, thus making the relation between the 2 objects a non issue.</li>
</ol>

<p>Example:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> foo = { a : <span class="hljs-number">1</span> };
<span class="hljs-keyword">var</span> bar = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(foo);
foo.<span class="hljs-property">a</span>; <span class="hljs-comment">// 1</span>
bar.<span class="hljs-property">a</span>; <span class="hljs-comment">// 1</span>
foo.<span class="hljs-property">a</span> = <span class="hljs-number">2</span>;
bar.<span class="hljs-property">a</span>; <span class="hljs-comment">// 2 - prototype changed</span>
bar.<span class="hljs-property">a</span> = <span class="hljs-number">3</span>;
foo.<span class="hljs-property">a</span>; <span class="hljs-comment">// Still 2, since setting bar.a makes it an "own" property</span>
</code></pre>

<p>Why do I consider this solution to be superior? It's native, thus no looping, no recursion. However, older browsers will need a polyfill.</p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>An elegant way to clone a Javascript object in one line of code</h1>
<p>An <code>Object.assign</code> method is part of the ECMAScript 2015 (ES6) standard and does exactly what you need.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> clone = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, obj);
</code></pre>
<blockquote>
<p>The Object.assign() method is used to copy the values of all enumerable own properties from one or more source objects to a target object.</p>
</blockquote>
<p><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" rel="noreferrer">Read more...</a></p>
<p>The <strong>polyfill</strong> to support older browsers:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Object</span>.<span class="hljs-property">assign</span>) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-title class_">Object</span>, <span class="hljs-string">'assign'</span>, {
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">target</span>) {
      <span class="hljs-string">'use strict'</span>;
      <span class="hljs-keyword">if</span> (target === <span class="hljs-literal">undefined</span> || target === <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Cannot convert first argument to object'</span>);
      }

      <span class="hljs-keyword">var</span> to = <span class="hljs-title class_">Object</span>(target);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">var</span> nextSource = <span class="hljs-variable language_">arguments</span>[i];
        <span class="hljs-keyword">if</span> (nextSource === <span class="hljs-literal">undefined</span> || nextSource === <span class="hljs-literal">null</span>) {
          <span class="hljs-keyword">continue</span>;
        }
        nextSource = <span class="hljs-title class_">Object</span>(nextSource);

        <span class="hljs-keyword">var</span> keysArray = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(nextSource);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nextIndex = <span class="hljs-number">0</span>, len = keysArray.<span class="hljs-property">length</span>; nextIndex &lt; len; nextIndex++) {
          <span class="hljs-keyword">var</span> nextKey = keysArray[nextIndex];
          <span class="hljs-keyword">var</span> desc = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(nextSource, nextKey);
          <span class="hljs-keyword">if</span> (desc !== <span class="hljs-literal">undefined</span> &amp;&amp; desc.<span class="hljs-property">enumerable</span>) {
            to[nextKey] = nextSource[nextKey];
          }
        }
      }
      <span class="hljs-keyword">return</span> to;
    }
  });
}
</code></pre>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are several issues with most solutions on the internet. So I decided to make a follow-up, which includes, why the accepted answer shouldn't be accepted.</p>

<h2>starting situation</h2>

<p>I want to <strong>deep-copy</strong> a Javascript <code>Object</code> with all of its children and their children and so on. But since I'm not kind of a normal developer, my <code>Object</code> has <em>normal</em> <code>properties</code>, <code>circular structures</code> and even <code>nested objects</code>.</p>

<p>So let's create a <code>circular structure</code> and a <code>nested object</code> first.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Circ</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">me</span> = <span class="hljs-variable language_">this</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Nested</span>(<span class="hljs-params">y</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> = y;
}
</code></pre>

<p>Let's bring everything together in an <code>Object</code> named <code>a</code>.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> a = {
    <span class="hljs-attr">x</span>: <span class="hljs-string">'a'</span>,
    <span class="hljs-attr">circ</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circ</span>(),
    <span class="hljs-attr">nested</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Nested</span>(<span class="hljs-string">'a'</span>)
};
</code></pre>

<p>Next, we want to copy <code>a</code> into a variable named <code>b</code> and mutate it.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> b = a;

b.<span class="hljs-property">x</span> = <span class="hljs-string">'b'</span>;
b.<span class="hljs-property">nested</span>.<span class="hljs-property">y</span> = <span class="hljs-string">'b'</span>;
</code></pre>

<p>You know what happened here because if not you wouldn't even land on this great question.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, b);

a --&gt; <span class="hljs-title class_">Object</span> {
    <span class="hljs-attr">x</span>: <span class="hljs-string">"b"</span>,
    <span class="hljs-attr">circ</span>: <span class="hljs-title class_">Circ</span> {
        <span class="hljs-attr">me</span>: <span class="hljs-title class_">Circ</span> { ... }
    },
    <span class="hljs-attr">nested</span>: <span class="hljs-title class_">Nested</span> {
        <span class="hljs-attr">y</span>: <span class="hljs-string">"b"</span>
    }
}

b --&gt; <span class="hljs-title class_">Object</span> {
    <span class="hljs-attr">x</span>: <span class="hljs-string">"b"</span>,
    <span class="hljs-attr">circ</span>: <span class="hljs-title class_">Circ</span> {
        <span class="hljs-attr">me</span>: <span class="hljs-title class_">Circ</span> { ... }
    },
    <span class="hljs-attr">nested</span>: <span class="hljs-title class_">Nested</span> {
        <span class="hljs-attr">y</span>: <span class="hljs-string">"b"</span>
    }
}
</code></pre>

<p>Now let's find a solution.</p>

<h2>JSON</h2>

<p>The first attempt I tried was using <code>JSON</code>.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> b = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>( <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>( a ) );

b.<span class="hljs-property">x</span> = <span class="hljs-string">'b'</span>;
b.<span class="hljs-property">nested</span>.<span class="hljs-property">y</span> = <span class="hljs-string">'b'</span>;
</code></pre>

<p>Don't waste too much time on it, you'll get <code>TypeError: Converting circular structure to JSON</code>.</p>

<h2>Recursive copy <em>(the accepted "answer")</em></h2>

<p>Let's have a look at the accepted answer.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">cloneSO</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-comment">// Handle the 3 simple types, and null or undefined</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == obj || <span class="hljs-string">"object"</span> != <span class="hljs-keyword">typeof</span> obj) <span class="hljs-keyword">return</span> obj;

    <span class="hljs-comment">// Handle Date</span>
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>) {
        <span class="hljs-keyword">var</span> copy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
        copy.<span class="hljs-title function_">setTime</span>(obj.<span class="hljs-title function_">getTime</span>());
        <span class="hljs-keyword">return</span> copy;
    }

    <span class="hljs-comment">// Handle Array</span>
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) {
        <span class="hljs-keyword">var</span> copy = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = obj.<span class="hljs-property">length</span>; i &lt; len; i++) {
            copy[i] = <span class="hljs-title function_">cloneSO</span>(obj[i]);
        }
        <span class="hljs-keyword">return</span> copy;
    }

    <span class="hljs-comment">// Handle Object</span>
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>) {
        <span class="hljs-keyword">var</span> copy = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> attr <span class="hljs-keyword">in</span> obj) {
            <span class="hljs-keyword">if</span> (obj.<span class="hljs-title function_">hasOwnProperty</span>(attr)) copy[attr] = <span class="hljs-title function_">cloneSO</span>(obj[attr]);
        }
        <span class="hljs-keyword">return</span> copy;
    }

    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Unable to copy obj! Its type isn't supported."</span>);
}
</code></pre>

<p>Looks good, heh? It's a recursive copy of the object and handles other types as well, like <code>Date</code>, but that wasn't a requirement.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> b = <span class="hljs-title function_">cloneSO</span>(a);

b.<span class="hljs-property">x</span> = <span class="hljs-string">'b'</span>;
b.<span class="hljs-property">nested</span>.<span class="hljs-property">y</span> = <span class="hljs-string">'b'</span>;
</code></pre>

<p>Recursion and <code>circular structures</code> doesn't work well together... <code>RangeError: Maximum call stack size exceeded</code></p>

<h2>native solution</h2>

<p>After arguing with my co-worker, my boss asked us what happened, and he found a simple <em>solution</em> after some googling. It's called <code>Object.create</code>.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> b = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(a);

b.<span class="hljs-property">x</span> = <span class="hljs-string">'b'</span>;
b.<span class="hljs-property">nested</span>.<span class="hljs-property">y</span> = <span class="hljs-string">'b'</span>;
</code></pre>

<p>This solution was added to Javascript some time ago and even handles <code>circular structure</code>.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, b);

a --&gt; <span class="hljs-title class_">Object</span> {
    <span class="hljs-attr">x</span>: <span class="hljs-string">"a"</span>,
    <span class="hljs-attr">circ</span>: <span class="hljs-title class_">Circ</span> {
        <span class="hljs-attr">me</span>: <span class="hljs-title class_">Circ</span> { ... }
    },
    <span class="hljs-attr">nested</span>: <span class="hljs-title class_">Nested</span> {
        <span class="hljs-attr">y</span>: <span class="hljs-string">"b"</span>
    }
}

b --&gt; <span class="hljs-title class_">Object</span> {
    <span class="hljs-attr">x</span>: <span class="hljs-string">"b"</span>,
    <span class="hljs-attr">circ</span>: <span class="hljs-title class_">Circ</span> {
        <span class="hljs-attr">me</span>: <span class="hljs-title class_">Circ</span> { ... }
    },
    <span class="hljs-attr">nested</span>: <span class="hljs-title class_">Nested</span> {
        <span class="hljs-attr">y</span>: <span class="hljs-string">"b"</span>
    }
}
</code></pre>

<p>... and you see, it didn't work with the nested structure inside.</p>

<h2>polyfill for the native solution</h2>

<p>There's a polyfill for <code>Object.create</code> in the older browser just like the IE 8. It's something like recommended by Mozilla, and of course, it's not perfect and results in the same problem as the <em>native solution</em>.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">F</span>(<span class="hljs-params"></span>) {};
<span class="hljs-keyword">function</span> <span class="hljs-title function_">clonePF</span>(<span class="hljs-params">o</span>) {
    F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = o;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
}

<span class="hljs-keyword">var</span> b = <span class="hljs-title function_">clonePF</span>(a);

b.<span class="hljs-property">x</span> = <span class="hljs-string">'b'</span>;
b.<span class="hljs-property">nested</span>.<span class="hljs-property">y</span> = <span class="hljs-string">'b'</span>;
</code></pre>

<p>I've put <code>F</code> outside the scope so we can have a look at what <code>instanceof</code> tells us.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, b);

a --&gt; <span class="hljs-title class_">Object</span> {
    <span class="hljs-attr">x</span>: <span class="hljs-string">"a"</span>,
    <span class="hljs-attr">circ</span>: <span class="hljs-title class_">Circ</span> {
        <span class="hljs-attr">me</span>: <span class="hljs-title class_">Circ</span> { ... }
    },
    <span class="hljs-attr">nested</span>: <span class="hljs-title class_">Nested</span> {
        <span class="hljs-attr">y</span>: <span class="hljs-string">"b"</span>
    }
}

b --&gt; F {
    <span class="hljs-attr">x</span>: <span class="hljs-string">"b"</span>,
    <span class="hljs-attr">circ</span>: <span class="hljs-title class_">Circ</span> {
        <span class="hljs-attr">me</span>: <span class="hljs-title class_">Circ</span> { ... }
    },
    <span class="hljs-attr">nested</span>: <span class="hljs-title class_">Nested</span> {
        <span class="hljs-attr">y</span>: <span class="hljs-string">"b"</span>
    }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> a, <span class="hljs-keyword">typeof</span> b);

a --&gt; object
b --&gt; object

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>, b <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>);

a --&gt; <span class="hljs-literal">true</span>
b --&gt; <span class="hljs-literal">true</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a <span class="hljs-keyword">instanceof</span> F, b <span class="hljs-keyword">instanceof</span> F);

a --&gt; <span class="hljs-literal">false</span>
b --&gt; <span class="hljs-literal">true</span>
</code></pre>

<p>Same problem as the <em>native solution</em>, but a little bit worse output.</p>

<h2>the better (but not perfect) solution</h2>

<p>When digging around, I found a similar question (<a href="https://stackoverflow.com/questions/10728412/in-javascript-when-performing-a-deep-copy-how-do-i-avoid-a-cycle-due-to-a-pro">In Javascript, when performing a deep copy, how do I avoid a cycle, due to a property being "this"?</a>) to this one, but with a way better solution.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">cloneDR</span>(<span class="hljs-params">o</span>) {
    <span class="hljs-keyword">const</span> gdcc = <span class="hljs-string">"__getDeepCircularCopy__"</span>;
    <span class="hljs-keyword">if</span> (o !== <span class="hljs-title class_">Object</span>(o)) {
        <span class="hljs-keyword">return</span> o; <span class="hljs-comment">// primitive value</span>
    }

    <span class="hljs-keyword">var</span> set = gdcc <span class="hljs-keyword">in</span> o,
        cache = o[gdcc],
        result;
    <span class="hljs-keyword">if</span> (set &amp;&amp; <span class="hljs-keyword">typeof</span> cache == <span class="hljs-string">"function"</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">cache</span>();
    }
    <span class="hljs-comment">// else</span>
    o[gdcc] = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) { <span class="hljs-keyword">return</span> result; }; <span class="hljs-comment">// overwrite</span>
    <span class="hljs-keyword">if</span> (o <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) {
        result = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;o.<span class="hljs-property">length</span>; i++) {
            result[i] = <span class="hljs-title function_">cloneDR</span>(o[i]);
        }
    } <span class="hljs-keyword">else</span> {
        result = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> o)
            <span class="hljs-keyword">if</span> (prop != gdcc)
                result[prop] = <span class="hljs-title function_">cloneDR</span>(o[prop]);
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (set)
                result[prop] = <span class="hljs-title function_">cloneDR</span>(cache);
    }
    <span class="hljs-keyword">if</span> (set) {
        o[gdcc] = cache; <span class="hljs-comment">// reset</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">delete</span> o[gdcc]; <span class="hljs-comment">// unset again</span>
    }
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-keyword">var</span> b = <span class="hljs-title function_">cloneDR</span>(a);

b.<span class="hljs-property">x</span> = <span class="hljs-string">'b'</span>;
b.<span class="hljs-property">nested</span>.<span class="hljs-property">y</span> = <span class="hljs-string">'b'</span>;
</code></pre>

<p>And let's have a look at the output...</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, b);

a --&gt; <span class="hljs-title class_">Object</span> {
    <span class="hljs-attr">x</span>: <span class="hljs-string">"a"</span>,
    <span class="hljs-attr">circ</span>: <span class="hljs-title class_">Object</span> {
        <span class="hljs-attr">me</span>: <span class="hljs-title class_">Object</span> { ... }
    },
    <span class="hljs-attr">nested</span>: <span class="hljs-title class_">Object</span> {
        <span class="hljs-attr">y</span>: <span class="hljs-string">"a"</span>
    }
}

b --&gt; <span class="hljs-title class_">Object</span> {
    <span class="hljs-attr">x</span>: <span class="hljs-string">"b"</span>,
    <span class="hljs-attr">circ</span>: <span class="hljs-title class_">Object</span> {
        <span class="hljs-attr">me</span>: <span class="hljs-title class_">Object</span> { ... }
    },
    <span class="hljs-attr">nested</span>: <span class="hljs-title class_">Object</span> {
        <span class="hljs-attr">y</span>: <span class="hljs-string">"b"</span>
    }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> a, <span class="hljs-keyword">typeof</span> b);

a --&gt; object
b --&gt; object

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>, b <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>);

a --&gt; <span class="hljs-literal">true</span>
b --&gt; <span class="hljs-literal">true</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a <span class="hljs-keyword">instanceof</span> F, b <span class="hljs-keyword">instanceof</span> F);

a --&gt; <span class="hljs-literal">false</span>
b --&gt; <span class="hljs-literal">false</span>
</code></pre>

<p>The requirements are matched, but there are still some smaller issues, including changing the <code>instance</code> of <code>nested</code> and <code>circ</code> to <code>Object</code>.</p>

<blockquote>
  <p>The structure of trees that share a leaf won't be copied, they will become two independent leaves:</p>
</blockquote>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">        [<span class="hljs-title class_">Object</span>]                     [<span class="hljs-title class_">Object</span>]
         /    \                       /    \
        /      \                     /      \
      |<span class="hljs-regexp">/_      _\|                 |/</span>_      _\|  
  [<span class="hljs-title class_">Object</span>]    [<span class="hljs-title class_">Object</span>]   ===&gt;  [<span class="hljs-title class_">Object</span>]    [<span class="hljs-title class_">Object</span>]
       \        /                 |           |
        \      /                  |           |
        _\|  |<span class="hljs-regexp">/_                 \|/</span>         \|/
        [<span class="hljs-title class_">Object</span>]               [<span class="hljs-title class_">Object</span>]    [<span class="hljs-title class_">Object</span>]
</code></pre>

<h2>conclusion</h2>

<p>The last solution using recursion and a cache, may not be the best, but it's a <strong>real</strong> deep-copy of the object. It handles simple <code>properties</code>, <code>circular structures</code> and <code>nested object</code>, but it will mess up the instance of them while cloning.</p>

<p><a href="http://jsfiddle.net/einfallstoll/N4mr2/" rel="noreferrer">jsfiddle</a></p>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you're okay with a shallow copy, the underscore.js library has a <a href="http://underscorejs.org/#clone" rel="noreferrer">clone</a> method.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">y = _.<span class="hljs-title function_">clone</span>(x);
</code></pre>

<p>or you can extend it like</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">copiedObject = _.<span class="hljs-title function_">extend</span>({},originalObject);
</code></pre>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>OK,</strong> imagine you have this object below and you want to clone it:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> obj = {<span class="hljs-attr">a</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">b</span>:<span class="hljs-number">2</span>, <span class="hljs-attr">c</span>:<span class="hljs-number">3</span>}; <span class="hljs-comment">//ES6</span>
</code></pre>

<p>or</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj = {<span class="hljs-attr">a</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">b</span>:<span class="hljs-number">2</span>, <span class="hljs-attr">c</span>:<span class="hljs-number">3</span>}; <span class="hljs-comment">//ES5</span>
</code></pre>

<p>the answer is mainly depeneds on which <strong>ECMAscript</strong> you using, in <code>ES6+</code>, you can simply use <code>Object.assign</code> to do the clone:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> cloned = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, obj); <span class="hljs-comment">//new {a:1, b:2, c:3};</span>
</code></pre>

<p>or using spread operator like this:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> cloned = {...obj}; <span class="hljs-comment">//new {a:1, b:2, c:3};</span>
</code></pre>

<p>But if you using <code>ES5</code>, you can use few methods, but the <code>JSON.stringify</code>, just make sure you not using for a big chunk of data to copy, but it could be one line handy way in many cases, something like this:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> cloned = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj)); 
<span class="hljs-comment">//new {a:1, b:2, c:3};, can be handy, but avoid using on big chunk of data over and over</span>
</code></pre>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>Update 06 July 2020</h2>
<p>There are three (3) ways to clone objects in JavaScript. As objects in JavaScript are reference values, you can't simply just copy using the =.</p>
<p>The ways are:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> food = { <span class="hljs-attr">food</span>: <span class="hljs-string">'apple'</span>, <span class="hljs-attr">drink</span>: <span class="hljs-string">'milk'</span> }


<span class="hljs-comment">// 1. Using the "Spread"</span>
<span class="hljs-comment">// ------------------</span>

{ ...food }


<span class="hljs-comment">// 2. Using "Object.assign"</span>
<span class="hljs-comment">// ------------------</span>

<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, food)


<span class="hljs-comment">// 3. "JSON"</span>
<span class="hljs-comment">// ------------------</span>

<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(food))

<span class="hljs-comment">// RESULT:</span>
<span class="hljs-comment">// { food: 'apple', drink: 'milk' }</span>

</code></pre>
<p>This can be used as a reference summary.</p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>One particularly inelegant solution is to use JSON encoding to make deep copies of objects that do not have member methods. The methodology is to JSON encode your target object, then by decoding it, you get the copy you are looking for.  You can decode as many times as you want to make as many copies as you need.</p>

<p>Of course, functions do not belong in JSON, so this only works for objects without member methods.</p>

<p>This methodology was perfect for my use case, since I'm storing JSON blobs in a key-value store, and when they are exposed as objects in a JavaScript API, each object actually contains a copy of the original state of the object so we can calculate the delta after the caller has mutated the exposed object.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> object1 = {<span class="hljs-attr">key</span>:<span class="hljs-string">"value"</span>};
<span class="hljs-keyword">var</span> object2 = object1;

object2 = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(object1);
object2 = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(object2);

object2.<span class="hljs-property">key</span> = <span class="hljs-string">"a change"</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(object1);<span class="hljs-comment">// returns value</span>
</code></pre>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can simply use a <a href="https://github.com/sebmarkbage/ecmascript-rest-spread/blob/master/Spread.md" rel="noreferrer">spread property</a> to copy an object without references. But be careful (see comments), the 'copy' is just on the lowest object/array level. Nested properties are still references!</p>

<hr>

<p><strong>Complete clone:</strong></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> x = {<span class="hljs-attr">a</span>: <span class="hljs-string">'value1'</span>}
<span class="hljs-keyword">let</span> x2 = {...x}

<span class="hljs-comment">// =&gt; mutate without references:</span>

x2.<span class="hljs-property">a</span> = <span class="hljs-string">'value2'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x.<span class="hljs-property">a</span>)    <span class="hljs-comment">// =&gt; 'value1'</span>
</code></pre>

<p><strong>Clone with references on second level:</strong></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> y = {<span class="hljs-attr">a</span>: {<span class="hljs-attr">b</span>: <span class="hljs-string">'value3'</span>}}
<span class="hljs-keyword">const</span> y2 = {...y}

<span class="hljs-comment">// =&gt; nested object is still a references:</span>

y2.<span class="hljs-property">a</span>.<span class="hljs-property">b</span> = <span class="hljs-string">'value4'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(y.<span class="hljs-property">a</span>.<span class="hljs-property">b</span>)    <span class="hljs-comment">// =&gt; 'value4'</span>
</code></pre>

<hr>

<p>JavaScript actually does not support deep clones natively. Use an utility function. For example Ramda:</p>

<blockquote>
  <p><a href="http://ramdajs.com/docs/#clone" rel="noreferrer">http://ramdajs.com/docs/#clone</a></p>
</blockquote>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> objClone = { ...obj };
</code></pre>
<p>Be aware that <strong>nested objects</strong> are still copied <strong>as a reference.</strong></p>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>From this article: <a href="https://greywyvern.com/?post=363" rel="noreferrer">How to copy arrays and objects in Javascript</a> by Brian Huisman:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">clone</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">var</span> newObj = (<span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) ? [] : {};
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> <span class="hljs-variable language_">this</span>) {
    <span class="hljs-keyword">if</span> (i == <span class="hljs-string">'clone'</span>) <span class="hljs-keyword">continue</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>[i] &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">this</span>[i] == <span class="hljs-string">"object"</span>) {
      newObj[i] = <span class="hljs-variable language_">this</span>[i].<span class="hljs-title function_">clone</span>();
    } <span class="hljs-keyword">else</span> newObj[i] = <span class="hljs-variable language_">this</span>[i]
  } <span class="hljs-keyword">return</span> newObj;
};
</code></pre>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For those using AngularJS, there is also direct method for cloning or extending of the objects in this library.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> destination = angular.<span class="hljs-title function_">copy</span>(source);
</code></pre>

<p>or</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">angular.<span class="hljs-title function_">copy</span>(source, destination);
</code></pre>

<p>More in angular.copy <a href="https://docs.angularjs.org/api/ng/function/angular.copy">documentation</a>...</p>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span>(obj == <span class="hljs-literal">null</span> || <span class="hljs-title function_">typeof</span>(obj) != <span class="hljs-string">'object'</span>)
        <span class="hljs-keyword">return</span> obj;    
    <span class="hljs-keyword">var</span> temp = <span class="hljs-keyword">new</span> obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>); 
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj)
        temp[key] = <span class="hljs-title function_">clone</span>(obj[key]);    
    <span class="hljs-keyword">return</span> temp;
}
</code></pre>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A.Levy's answer is almost complete, here is my little contribution: <strong>there is a way how to handle recursive references</strong>, see this line</p>

<p><code>if(this[attr]==this) copy[attr] = copy;</code></p>

<p>If the object is XML DOM element, we must use <strong>cloneNode</strong> instead</p>

<p><code>if(this.cloneNode) return this.cloneNode(true);</code></p>

<p>Inspired by A.Levy's exhaustive study and Calvin's prototyping approach, I offer this solution:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">clone</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cloneNode</span>) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cloneNode</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">var</span> copy = <span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span> ? [] : {};
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> attr <span class="hljs-keyword">in</span> <span class="hljs-variable language_">this</span>) {
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">this</span>[attr] == <span class="hljs-string">"function"</span> || <span class="hljs-variable language_">this</span>[attr]==<span class="hljs-literal">null</span> || !<span class="hljs-variable language_">this</span>[attr].<span class="hljs-property">clone</span>)
      copy[attr] = <span class="hljs-variable language_">this</span>[attr];
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>[attr]==<span class="hljs-variable language_">this</span>) copy[attr] = copy;
    <span class="hljs-keyword">else</span> copy[attr] = <span class="hljs-variable language_">this</span>[attr].<span class="hljs-title function_">clone</span>();
  }
  <span class="hljs-keyword">return</span> copy;
}

<span class="hljs-title class_">Date</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">clone</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">var</span> copy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
  copy.<span class="hljs-title function_">setTime</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getTime</span>());
  <span class="hljs-keyword">return</span> copy;
}

<span class="hljs-title class_">Number</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">clone</span> = 
<span class="hljs-title class_">Boolean</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">clone</span> =
<span class="hljs-title class_">String</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">clone</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
}
</code></pre>

<p>See also Andy Burke's note in the answers.</p>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>Performance</h1>

<p>Today 2020.04.30 I perform tests of chosen solutions on Chrome v81.0, Safari v13.1 and Firefox v75.0 on MacOs High Sierra v10.13.6. </p>

<p>I focus on speed of copy DATA (object with simple type fields, not methods etc.). The solutions A-I can make only shallow copy, solutions J-U can make deep copy.</p>

<h3>Results for shallow copy</h3>

<ul>
<li>solution <code>{...obj}</code> (A) is fastest on chrome and firefox and medium fast on safari</li>
<li>solution based on <code>Object.assign</code> (B) is fast on all browsers</li>
<li>jQuery (E) and lodash (F,G,H) solutions are medium/quite fast</li>
<li>solution <code>JSON.parse/stringify</code> (K) is quite slow</li>
<li>solutions D and U are slow on all browsers</li>
</ul>

<p><a href="https://i.stack.imgur.com/mCte1.png" rel="noreferrer"><img src="https://i.stack.imgur.com/mCte1.png" alt="enter image description here"></a></p>

<h3>Results for deep copy</h3>

<ul>
<li>solution Q is fastest on all browsers</li>
<li>jQuery (L) and lodash (J) are medium fast</li>
<li>solution <code>JSON.parse/stringify</code> (K) is quite slow</li>
<li>solution U is slowest on all browsers</li>
<li>lodash (J) and solution U crash on Chrome for 1000 level deep object</li>
</ul>

<p><a href="https://i.stack.imgur.com/KxBqv.png" rel="noreferrer"><img src="https://i.stack.imgur.com/KxBqv.png" alt="enter image description here"></a></p>

<h2>Details</h2>

<p>For choosen solutions: 
<a href="https://stackoverflow.com/a/44950864/860099">A</a> 
<a href="https://stackoverflow.com/a/30042948/860099">B</a>
C(my)
<a href="https://stackoverflow.com/a/49497485/860099">D</a>
<a href="https://stackoverflow.com/a/5164215/860099">E</a>
<a href="https://stackoverflow.com/a/11024936/860099">F</a>
<a href="https://stackoverflow.com/a/13850856/860099">G</a>
<a href="https://stackoverflow.com/a/11024936/860099">H</a>
<a href="https://stackoverflow.com/a/728694/860099">I</a>
<a href="https://stackoverflow.com/a/57504513/860099">J</a>
<a href="https://stackoverflow.com/a/10869248/860099">K</a>
<a href="https://stackoverflow.com/a/5164215/860099">L</a>
<a href="https://stackoverflow.com/a/728400/860099">M</a>
<a href="https://stackoverflow.com/a/728395/860099">N</a>
<a href="https://stackoverflow.com/a/1042676/860099">O</a>
<a href="https://stackoverflow.com/a/33273256/860099">P</a>
<a href="https://stackoverflow.com/a/24648941/860099">Q</a>
<a href="https://stackoverflow.com/a/24648941/860099">R</a>
<a href="https://stackoverflow.com/a/39029912/860099">S</a>
<a href="https://stackoverflow.com/a/11462081/860099">T</a>
<a href="https://stackoverflow.com/a/53737490/860099">U</a>,
 I perform 4 tests</p>

<ul>
<li>shallow-small: object with 10 non-nested fields - you can run it <a href="https://jsbench.me/0xk9l5ci9x/1" rel="noreferrer">HERE</a></li>
<li>shallow-big: object with 1000 non-nested fields - you can run it <a href="https://jsbench.me/t0k9l64319/1" rel="noreferrer">HERE</a></li>
<li>deep-small: object with 10 levels-nested fields - you can run it <a href="https://jsbench.me/pvk9l6pzfj/1" rel="noreferrer">HERE</a></li>
<li>deep-big: object with 1000 levels-nested fields - you can run it <a href="https://jsbench.me/euk9l6x9jx/1" rel="noreferrer">HERE</a></li>
</ul>

<p>Objects used in tests are show in below snippet</p>

<p></p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false"><div class="snippet-display" style="vertical-align: center"><p><a class="snippet-show-link-chevron"><span class="expander-arrow-hide" style="vertical-align: middle;"></span></a><a class="snippet-show-link"><span class="show-hide" data-ishidden="true" style="vertical-align: middle">Show code snippet</span></a></p></div>
<div class="snippet-code snippet-currently-hidden" style="display: none;">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> obj_ShallowSmall = {
  <span class="hljs-attr">field0</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">field1</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">field2</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">field3</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">field4</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">field5</span>: [],
  <span class="hljs-attr">field6</span>: {},
  <span class="hljs-attr">field7</span>: <span class="hljs-string">"text7"</span>,
  <span class="hljs-attr">field8</span>: <span class="hljs-string">"text8"</span>,
}

<span class="hljs-keyword">let</span> obj_DeepSmall = {
  <span class="hljs-attr">level0</span>: {
   <span class="hljs-attr">level1</span>: {
    <span class="hljs-attr">level2</span>: {
     <span class="hljs-attr">level3</span>: {
      <span class="hljs-attr">level4</span>: {
       <span class="hljs-attr">level5</span>: {
        <span class="hljs-attr">level6</span>: {
         <span class="hljs-attr">level7</span>: {
          <span class="hljs-attr">level8</span>: {
           <span class="hljs-attr">level9</span>: [[[[[[[[[[<span class="hljs-string">'abc'</span>]]]]]]]]]],
  }}}}}}}}},
};

<span class="hljs-keyword">let</span> obj_ShallowBig = <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a,c,i</span>) =&gt;</span> (a[<span class="hljs-string">'field'</span>+i]=<span class="hljs-title function_">getField</span>(i),a) ,{});


<span class="hljs-keyword">let</span> obj_DeepBig = <span class="hljs-title function_">genDeepObject</span>(<span class="hljs-number">1000</span>);



<span class="hljs-comment">// ------------------</span>
<span class="hljs-comment">// Show objects</span>
<span class="hljs-comment">// ------------------</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'obj_ShallowSmall:'</span>,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj_ShallowSmall));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'obj_DeepSmall:'</span>,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj_DeepSmall));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'obj_ShallowBig:'</span>,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj_ShallowBig));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'obj_DeepBig:'</span>,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj_DeepBig));




<span class="hljs-comment">// ------------------</span>
<span class="hljs-comment">// HELPERS</span>
<span class="hljs-comment">// ------------------</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getField</span>(<span class="hljs-params">k</span>) {
  <span class="hljs-keyword">let</span> i=k%<span class="hljs-number">10</span>;
  <span class="hljs-keyword">if</span>(i==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span>(i==<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">if</span>(i==<span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> k;
  <span class="hljs-keyword">if</span>(i==<span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">if</span>(i==<span class="hljs-number">4</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">if</span>(i==<span class="hljs-number">5</span>) <span class="hljs-keyword">return</span> [];
  <span class="hljs-keyword">if</span>(i==<span class="hljs-number">6</span>) <span class="hljs-keyword">return</span> {};  
  <span class="hljs-keyword">if</span>(i&gt;=<span class="hljs-number">7</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"text"</span>+k;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">genDeepObject</span>(<span class="hljs-params">N</span>) {
  <span class="hljs-comment">// generate: {level0:{level1:{...levelN: {end:[[[...N-times...['abc']...]]] }}}...}}}</span>
  <span class="hljs-keyword">let</span> obj={};
  <span class="hljs-keyword">let</span> o=obj;
  <span class="hljs-keyword">let</span> arr = [];
  <span class="hljs-keyword">let</span> a=arr;

  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;N; i++) {
    o[<span class="hljs-string">'level'</span>+i]={};
    o=o[<span class="hljs-string">'level'</span>+i];
    <span class="hljs-keyword">let</span> aa=[];
    a.<span class="hljs-title function_">push</span>(aa);
    a=aa;
  }

  a[<span class="hljs-number">0</span>]=<span class="hljs-string">'abc'</span>;
  o[<span class="hljs-string">'end'</span>]=arr;
  <span class="hljs-keyword">return</span> obj;
}</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif2" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>

<p>Below snippet presents tested solutions and shows differences between them</p>

<p></p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false"><div class="snippet-display" style="vertical-align: center"><p><a class="snippet-show-link-chevron"><span class="expander-arrow-hide" style="vertical-align: middle;"></span></a><a class="snippet-show-link"><span class="show-hide" data-ishidden="true" style="vertical-align: middle">Show code snippet</span></a></p></div>
<div class="snippet-code snippet-currently-hidden" style="display: none;">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">A</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">return</span> {...obj}
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">B</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, obj); 
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">C</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">reduce</span>( <span class="hljs-function">(<span class="hljs-params">a,c</span>) =&gt;</span> (a[c]=obj[c], a), {})
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">D</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">let</span> copyOfObject = {};
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperties</span>(copyOfObject, <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptors</span>(obj));
  <span class="hljs-keyword">return</span> copyOfObject;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">E</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">return</span> jQuery.<span class="hljs-title function_">extend</span>({}, obj) <span class="hljs-comment">// shallow</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">F</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">return</span> _.<span class="hljs-title function_">clone</span>(obj);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">G</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">return</span> _.<span class="hljs-title function_">clone</span>(obj,<span class="hljs-literal">true</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">H</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">return</span> _.<span class="hljs-title function_">extend</span>({},obj);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">I</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == obj || <span class="hljs-string">"object"</span> != <span class="hljs-keyword">typeof</span> obj) <span class="hljs-keyword">return</span> obj;
    <span class="hljs-keyword">var</span> copy = obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> attr <span class="hljs-keyword">in</span> obj) {
        <span class="hljs-keyword">if</span> (obj.<span class="hljs-title function_">hasOwnProperty</span>(attr)) copy[attr] = obj[attr];
    }
    <span class="hljs-keyword">return</span> copy;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">J</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">return</span> _.<span class="hljs-title function_">cloneDeep</span>(obj,<span class="hljs-literal">true</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">K</span>(<span class="hljs-params">obj</span>) {
	<span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj));
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">L</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">return</span> jQuery.<span class="hljs-title function_">extend</span>(<span class="hljs-literal">true</span>, {}, obj) <span class="hljs-comment">// deep</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">M</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">if</span>(obj == <span class="hljs-literal">null</span> || <span class="hljs-title function_">typeof</span>(obj) != <span class="hljs-string">'object'</span>)
    <span class="hljs-keyword">return</span> obj;    
  <span class="hljs-keyword">var</span> temp = <span class="hljs-keyword">new</span> obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>); 
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj)
    temp[key] = <span class="hljs-title function_">M</span>(obj[key]);    
  <span class="hljs-keyword">return</span> temp;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">N</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">let</span> <span class="hljs-title class_">EClone</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">var</span> newObj = (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) ? [] : {};
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> obj) {
      <span class="hljs-keyword">if</span> (i == <span class="hljs-string">'EClone'</span>) <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">if</span> (obj[i] &amp;&amp; <span class="hljs-keyword">typeof</span> obj[i] == <span class="hljs-string">"object"</span>) {
        newObj[i] = <span class="hljs-title class_">EClone</span>(obj[i]);
      } <span class="hljs-keyword">else</span> newObj[i] = obj[i]
    } <span class="hljs-keyword">return</span> newObj;
  };

	<span class="hljs-keyword">return</span> <span class="hljs-title class_">EClone</span>(obj);
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">O</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span> (obj == <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> obj != <span class="hljs-string">"object"</span>) <span class="hljs-keyword">return</span> obj;
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-property">constructor</span> != <span class="hljs-title class_">Object</span> &amp;&amp; obj.<span class="hljs-property">constructor</span> != <span class="hljs-title class_">Array</span>) <span class="hljs-keyword">return</span> obj;
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">Date</span> || obj.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">RegExp</span> || obj.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">Function</span> ||
        obj.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">String</span> || obj.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">Number</span> || obj.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">Boolean</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params">obj</span>);

    <span class="hljs-keyword">let</span> to = <span class="hljs-keyword">new</span> obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> obj)
    {
        to[name] = <span class="hljs-keyword">typeof</span> to[name] == <span class="hljs-string">"undefined"</span> ? <span class="hljs-title function_">O</span>(obj[name], <span class="hljs-literal">null</span>) : to[name];
    }

    <span class="hljs-keyword">return</span> to;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">P</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">target, source</span>){

      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> source){

          <span class="hljs-comment">// Use getOwnPropertyDescriptor instead of source[key] to prevent from trigering setter/getter.</span>
          <span class="hljs-keyword">let</span> descriptor = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(source, key);
          <span class="hljs-keyword">if</span>(descriptor.<span class="hljs-property">value</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">String</span>){
              target[key] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(descriptor.<span class="hljs-property">value</span>);
          }
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(descriptor.<span class="hljs-property">value</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>){
              target[key] = <span class="hljs-title function_">clone</span>([], descriptor.<span class="hljs-property">value</span>);
          }
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(descriptor.<span class="hljs-property">value</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>){
              <span class="hljs-keyword">let</span> prototype = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getPrototypeOf</span>(descriptor.<span class="hljs-property">value</span>);
              <span class="hljs-keyword">let</span> cloneObject = <span class="hljs-title function_">clone</span>({}, descriptor.<span class="hljs-property">value</span>);
              <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">setPrototypeOf</span>(cloneObject, prototype);
              target[key] = cloneObject;
          }
          <span class="hljs-keyword">else</span> {
              <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(target, key, descriptor);
          }
      }
      <span class="hljs-keyword">let</span> prototype = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getPrototypeOf</span>(source);
      <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">setPrototypeOf</span>(target, prototype);
      <span class="hljs-keyword">return</span> target;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">clone</span>({},obj);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Q</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">var</span> copy;

    <span class="hljs-comment">// Handle the 3 simple types, and null or undefined</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == obj || <span class="hljs-string">"object"</span> != <span class="hljs-keyword">typeof</span> obj) <span class="hljs-keyword">return</span> obj;

    <span class="hljs-comment">// Handle Date</span>
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>) {
        copy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
        copy.<span class="hljs-title function_">setTime</span>(obj.<span class="hljs-title function_">getTime</span>());
        <span class="hljs-keyword">return</span> copy;
    }

    <span class="hljs-comment">// Handle Array</span>
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) {
        copy = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = obj.<span class="hljs-property">length</span>; i &lt; len; i++) {
            copy[i] = <span class="hljs-title function_">Q</span>(obj[i]);
        }
        <span class="hljs-keyword">return</span> copy;
    }

    <span class="hljs-comment">// Handle Object</span>
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>) {
        copy = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> attr <span class="hljs-keyword">in</span> obj) {
            <span class="hljs-keyword">if</span> (obj.<span class="hljs-title function_">hasOwnProperty</span>(attr)) copy[attr] = <span class="hljs-title function_">Q</span>(obj[attr]);
        }
        <span class="hljs-keyword">return</span> copy;
    }

    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Unable to copy obj! Its type isn't supported."</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">R</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">const</span> gdcc = <span class="hljs-string">"__getDeepCircularCopy__"</span>;
    <span class="hljs-keyword">if</span> (obj !== <span class="hljs-title class_">Object</span>(obj)) {
        <span class="hljs-keyword">return</span> obj; <span class="hljs-comment">// primitive value</span>
    }

    <span class="hljs-keyword">var</span> set = gdcc <span class="hljs-keyword">in</span> obj,
        cache = obj[gdcc],
        result;
    <span class="hljs-keyword">if</span> (set &amp;&amp; <span class="hljs-keyword">typeof</span> cache == <span class="hljs-string">"function"</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">cache</span>();
    }
    <span class="hljs-comment">// else</span>
    obj[gdcc] = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) { <span class="hljs-keyword">return</span> result; }; <span class="hljs-comment">// overwrite</span>
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) {
        result = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;obj.<span class="hljs-property">length</span>; i++) {
            result[i] = <span class="hljs-title function_">R</span>(obj[i]);
        }
    } <span class="hljs-keyword">else</span> {
        result = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> obj)
            <span class="hljs-keyword">if</span> (prop != gdcc)
                result[prop] = <span class="hljs-title function_">R</span>(obj[prop]);
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (set)
                result[prop] = <span class="hljs-title function_">R</span>(cache);
    }
    <span class="hljs-keyword">if</span> (set) {
        obj[gdcc] = cache; <span class="hljs-comment">// reset</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">delete</span> obj[gdcc]; <span class="hljs-comment">// unset again</span>
    }
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">S</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>(); <span class="hljs-comment">// Map of old - new references</span>

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">copy</span>(<span class="hljs-params">object</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> object !== <span class="hljs-string">'object'</span> ||
            object === <span class="hljs-literal">null</span> ||
            object <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">HTMLElement</span>
        )
            <span class="hljs-keyword">return</span> object; <span class="hljs-comment">// primitive value or HTMLElement</span>

        <span class="hljs-keyword">if</span> (object <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>) 
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">setTime</span>(object.<span class="hljs-title function_">getTime</span>());

        <span class="hljs-keyword">if</span> (object <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">RegExp</span>) 
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(object.<span class="hljs-property">source</span>, object.<span class="hljs-property">flags</span>);

        <span class="hljs-keyword">if</span> (cache.<span class="hljs-title function_">has</span>(object)) 
            <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">get</span>(object);

        <span class="hljs-keyword">const</span> result = object <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span> ? [] : {};

        cache.<span class="hljs-title function_">set</span>(object, result); <span class="hljs-comment">// store reference to object before the recursive starts</span>

        <span class="hljs-keyword">if</span> (object <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) {
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span> object) {
                 result.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">copy</span>(o));
            }
            <span class="hljs-keyword">return</span> result;
        }

        <span class="hljs-keyword">const</span> keys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(object); 

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">of</span> keys)
            result[key] = <span class="hljs-title function_">copy</span>(object[key]);

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-title function_">copy</span>(obj);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">T</span>(<span class="hljs-params">obj</span>){
    <span class="hljs-keyword">var</span> clonedObjectsArray = [];
    <span class="hljs-keyword">var</span> originalObjectsArray = []; <span class="hljs-comment">//used to remove the unique ids when finished</span>
    <span class="hljs-keyword">var</span> next_objid = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">objectId</span>(<span class="hljs-params">obj</span>) {
        <span class="hljs-keyword">if</span> (obj == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (obj.<span class="hljs-property">__obj_id</span> == <span class="hljs-literal">undefined</span>){
            obj.<span class="hljs-property">__obj_id</span> = next_objid++;
            originalObjectsArray[obj.<span class="hljs-property">__obj_id</span>] = obj;
        }
        <span class="hljs-keyword">return</span> obj.<span class="hljs-property">__obj_id</span>;
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">cloneRecursive</span>(<span class="hljs-params">obj</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == obj || <span class="hljs-keyword">typeof</span> obj == <span class="hljs-string">"string"</span> || <span class="hljs-keyword">typeof</span> obj == <span class="hljs-string">"number"</span> || <span class="hljs-keyword">typeof</span> obj == <span class="hljs-string">"boolean"</span>) <span class="hljs-keyword">return</span> obj;

        <span class="hljs-comment">// Handle Date</span>
        <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>) {
            <span class="hljs-keyword">var</span> copy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
            copy.<span class="hljs-title function_">setTime</span>(obj.<span class="hljs-title function_">getTime</span>());
            <span class="hljs-keyword">return</span> copy;
        }

        <span class="hljs-comment">// Handle Array</span>
        <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) {
            <span class="hljs-keyword">var</span> copy = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; obj.<span class="hljs-property">length</span>; ++i) {
                copy[i] = <span class="hljs-title function_">cloneRecursive</span>(obj[i]);
            }
            <span class="hljs-keyword">return</span> copy;
        }

        <span class="hljs-comment">// Handle Object</span>
        <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>) {
            <span class="hljs-keyword">if</span> (clonedObjectsArray[<span class="hljs-title function_">objectId</span>(obj)] != <span class="hljs-literal">undefined</span>)
                <span class="hljs-keyword">return</span> clonedObjectsArray[<span class="hljs-title function_">objectId</span>(obj)];

            <span class="hljs-keyword">var</span> copy;
            <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Function</span>)<span class="hljs-comment">//Handle Function</span>
                copy = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> obj.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);};
            <span class="hljs-keyword">else</span>
                copy = {};

            clonedObjectsArray[<span class="hljs-title function_">objectId</span>(obj)] = copy;

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> attr <span class="hljs-keyword">in</span> obj)
                <span class="hljs-keyword">if</span> (attr != <span class="hljs-string">"__obj_id"</span> &amp;&amp; obj.<span class="hljs-title function_">hasOwnProperty</span>(attr))
                    copy[attr] = <span class="hljs-title function_">cloneRecursive</span>(obj[attr]);                 

            <span class="hljs-keyword">return</span> copy;
        }       


        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Unable to copy obj! Its type isn't supported."</span>);
    }
    <span class="hljs-keyword">var</span> cloneObj = <span class="hljs-title function_">cloneRecursive</span>(obj);



    <span class="hljs-comment">//remove the unique ids</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; originalObjectsArray.<span class="hljs-property">length</span>; i++)
    {
        <span class="hljs-keyword">delete</span> originalObjectsArray[i].<span class="hljs-property">__obj_id</span>;
    };

    <span class="hljs-keyword">return</span> cloneObj;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">U</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-comment">/*
    Deep copy objects by value rather than by reference,
    exception: `Proxy`
  */</span>

  <span class="hljs-keyword">const</span> seen = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>()

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">clone</span>(obj)

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">defineProp</span>(<span class="hljs-params">object, key, descriptor = {}, copyFrom = {}</span>) {
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">configurable</span>: _configurable, <span class="hljs-attr">writable</span>: _writable }
      = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(object, key)
      || { <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span> }

    <span class="hljs-keyword">const</span> test = _configurable <span class="hljs-comment">// Can redefine property</span>
      &amp;&amp; (_writable === <span class="hljs-literal">undefined</span> || _writable) <span class="hljs-comment">// Can assign to property</span>

    <span class="hljs-keyword">if</span> (!test || <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> test

    <span class="hljs-keyword">const</span> basisDesc = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(copyFrom, key)
      || { <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span> } <span class="hljs-comment">// Custom</span>
      || {}; <span class="hljs-comment">// or left to native default settings</span>

    [<span class="hljs-string">"get"</span>, <span class="hljs-string">"set"</span>, <span class="hljs-string">"value"</span>, <span class="hljs-string">"writable"</span>, <span class="hljs-string">"enumerable"</span>, <span class="hljs-string">"configurable"</span>]
      .<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span>
        descriptor[attr] === <span class="hljs-literal">undefined</span> &amp;&amp;
        (descriptor[attr] = basisDesc[attr])
      )

    <span class="hljs-keyword">const</span> { get, set, value, writable, enumerable, configurable }
      = descriptor

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(object, key, {
      enumerable, configurable, ...get || set
        ? { get, set } <span class="hljs-comment">// Accessor descriptor</span>
        : { value, writable } <span class="hljs-comment">// Data descriptor</span>
    })
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">object</span>) {
    <span class="hljs-keyword">if</span> (object !== <span class="hljs-title class_">Object</span>(object)) <span class="hljs-keyword">return</span> object <span class="hljs-comment">/*
     Check if the object belongs to a primitive data type */</span>

    <span class="hljs-keyword">if</span> (object <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Node</span>) <span class="hljs-keyword">return</span> object.<span class="hljs-title function_">cloneNode</span>(<span class="hljs-literal">true</span>) <span class="hljs-comment">/*
     Clone DOM trees */</span>

    <span class="hljs-keyword">let</span> _object <span class="hljs-comment">// The clone of object</span>

    <span class="hljs-keyword">switch</span> (object.<span class="hljs-property">constructor</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">Array</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">Object</span>:
        _object = <span class="hljs-title function_">cloneObject</span>(object)
        <span class="hljs-keyword">break</span>

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">Date</span>:
        _object = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(+object)
        <span class="hljs-keyword">break</span>

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">Function</span>:
        <span class="hljs-keyword">const</span> fnStr = <span class="hljs-title class_">String</span>(object)

        _object = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">"return "</span> +
          (<span class="hljs-regexp">/^(?!function |[^{]+?=&gt;)[^(]+?\(/</span>.<span class="hljs-title function_">test</span>(fnStr)
            ? <span class="hljs-string">"function "</span> : <span class="hljs-string">""</span>
          ) + fnStr
        )()

        <span class="hljs-title function_">copyPropDescs</span>(_object, object)
        <span class="hljs-keyword">break</span>

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">RegExp</span>:
        _object = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(object)
        <span class="hljs-keyword">break</span>

      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">switch</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(object.<span class="hljs-property">constructor</span>)) {
          <span class="hljs-comment">//                              // Stem from:</span>
          <span class="hljs-keyword">case</span> <span class="hljs-string">"[object Function]"</span>:       <span class="hljs-comment">// `class`</span>
          <span class="hljs-keyword">case</span> <span class="hljs-string">"[object Undefined]"</span>:      <span class="hljs-comment">// `Object.create(null)`</span>
            _object = <span class="hljs-title function_">cloneObject</span>(object)
            <span class="hljs-keyword">break</span>

          <span class="hljs-attr">default</span>:                        <span class="hljs-comment">// `Proxy`</span>
            _object = object
        }
    }

    <span class="hljs-keyword">return</span> _object
  }


  <span class="hljs-keyword">function</span> <span class="hljs-title function_">cloneObject</span>(<span class="hljs-params">object</span>) {
    <span class="hljs-keyword">if</span> (seen.<span class="hljs-title function_">has</span>(object)) <span class="hljs-keyword">return</span> seen.<span class="hljs-title function_">get</span>(object) <span class="hljs-comment">/*
     Handle recursive references (circular structures) */</span>

    <span class="hljs-keyword">const</span> _object = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(object)
      ? []
      : <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(object)) <span class="hljs-comment">/*
         Assign [[Prototype]] for inheritance */</span>

    seen.<span class="hljs-title function_">set</span>(object, _object) <span class="hljs-comment">/*
     Make `_object` the associative mirror of `object` */</span>

    <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">ownKeys</span>(object).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span>
      <span class="hljs-title function_">defineProp</span>(_object, key, { <span class="hljs-attr">value</span>: <span class="hljs-title function_">clone</span>(object[key]) }, object)
    )

    <span class="hljs-keyword">return</span> _object
  }


  <span class="hljs-keyword">function</span> <span class="hljs-title function_">copyPropDescs</span>(<span class="hljs-params">target, source</span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperties</span>(target,
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptors</span>(source)
    )
  }
}
 
<span class="hljs-comment">// ------------------------</span>
<span class="hljs-comment">// Test properties</span>
<span class="hljs-comment">// ------------------------</span>


<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`  shallow deep  func  circ  undefined date  RegExp bigInt`</span>)

<span class="hljs-title function_">log</span>(A);
<span class="hljs-title function_">log</span>(B);
<span class="hljs-title function_">log</span>(C);
<span class="hljs-title function_">log</span>(D);
<span class="hljs-title function_">log</span>(E);
<span class="hljs-title function_">log</span>(F);
<span class="hljs-title function_">log</span>(G);
<span class="hljs-title function_">log</span>(H);
<span class="hljs-title function_">log</span>(I);
<span class="hljs-title function_">log</span>(J);
<span class="hljs-title function_">log</span>(K);
<span class="hljs-title function_">log</span>(L);
<span class="hljs-title function_">log</span>(M);
<span class="hljs-title function_">log</span>(N);
<span class="hljs-title function_">log</span>(O);
<span class="hljs-title function_">log</span>(P);
<span class="hljs-title function_">log</span>(Q);
<span class="hljs-title function_">log</span>(R);
<span class="hljs-title function_">log</span>(S);
<span class="hljs-title function_">log</span>(T);
<span class="hljs-title function_">log</span>(U);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`  shallow deep  func  circ  undefined date  RegExp bigInt
----
LEGEND:
shallow - solution create shallow copy
deep - solution create deep copy
func - solution copy functions
circ - solution can copy object with circular references
undefined - solution copy fields with undefined value
date - solution can copy date
RegExp - solution can copy fields with regular expressions
bigInt - solution can copy BigInt
`</span>)


<span class="hljs-comment">// ------------------------</span>
<span class="hljs-comment">// Helper functions</span>
<span class="hljs-comment">// ------------------------</span>


<span class="hljs-keyword">function</span> <span class="hljs-title function_">deepCompare</span>(<span class="hljs-params">obj1,obj2</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj1)===<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj2);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getCase</span>(<span class="hljs-params"></span>) { <span class="hljs-comment">// pure data case</span>
  <span class="hljs-keyword">return</span> { 
    <span class="hljs-attr">undef</span>: <span class="hljs-literal">undefined</span>,
    <span class="hljs-attr">bool</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">num</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">str</span>: <span class="hljs-string">"txt1"</span>,    
    <span class="hljs-attr">e1</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">e2</span>: [], <span class="hljs-attr">e3</span>: {}, <span class="hljs-attr">e4</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">e5</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">arr</span>: [ <span class="hljs-literal">false</span>, <span class="hljs-number">2</span>, <span class="hljs-string">"txt3"</span>, <span class="hljs-literal">null</span>, [], {},
      [ <span class="hljs-literal">true</span>,<span class="hljs-number">4</span>,<span class="hljs-string">"txt5"</span>,<span class="hljs-literal">null</span>, [], {},  [<span class="hljs-literal">true</span>,<span class="hljs-number">6</span>,<span class="hljs-string">"txt7"</span>,<span class="hljs-literal">null</span>,[],{} ], 
        {<span class="hljs-attr">bool</span>: <span class="hljs-literal">true</span>,<span class="hljs-attr">num</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">str</span>: <span class="hljs-string">"txt9"</span>, <span class="hljs-attr">e1</span>:<span class="hljs-literal">null</span>, <span class="hljs-attr">e2</span>:[] ,<span class="hljs-attr">e3</span>:{} ,<span class="hljs-attr">e4</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">e5</span>: <span class="hljs-literal">false</span>}
      ],
        {<span class="hljs-attr">bool</span>: <span class="hljs-literal">true</span>,<span class="hljs-attr">num</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">str</span>: <span class="hljs-string">"txt11"</span>, <span class="hljs-attr">e1</span>:<span class="hljs-literal">null</span>, <span class="hljs-attr">e2</span>:[] ,<span class="hljs-attr">e3</span>:{} ,<span class="hljs-attr">e4</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">e5</span>: <span class="hljs-literal">false</span>}
    ], 
    <span class="hljs-attr">obj</span>: { 
        <span class="hljs-attr">bool</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">num</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">str</span>: <span class="hljs-string">"txt13"</span>,
        <span class="hljs-attr">e1</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">e2</span>: [], <span class="hljs-attr">e3</span>: {}, <span class="hljs-attr">e4</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">e5</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">arr</span>: [<span class="hljs-literal">true</span>,<span class="hljs-number">14</span>,<span class="hljs-string">"txt15"</span>,<span class="hljs-literal">null</span>,[],{} ],
        <span class="hljs-attr">obj</span>: { 
          <span class="hljs-attr">bool</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">num</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">str</span>: <span class="hljs-string">"txt17"</span>,
          <span class="hljs-attr">e1</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">e2</span>: [], <span class="hljs-attr">e3</span>: {}, <span class="hljs-attr">e4</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">e5</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">arr</span>: [<span class="hljs-literal">true</span>,<span class="hljs-number">18</span>,<span class="hljs-string">"txt19"</span>,<span class="hljs-literal">null</span>,[],{} ],
          <span class="hljs-attr">obj</span>: {<span class="hljs-attr">bool</span>: <span class="hljs-literal">true</span>,<span class="hljs-attr">num</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">str</span>: <span class="hljs-string">"txt21"</span>, <span class="hljs-attr">e1</span>:<span class="hljs-literal">null</span>, <span class="hljs-attr">e2</span>:[] ,<span class="hljs-attr">e3</span>:{} ,<span class="hljs-attr">e4</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">e5</span>: <span class="hljs-literal">false</span>}
      } 
    } 
  };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">org, copy, field, newValue</span>) {
  copy[field] = newValue;
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">deepCompare</span>(org,copy); 
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">testFunc</span>(<span class="hljs-params">f</span>) {
	<span class="hljs-keyword">let</span> o = { <span class="hljs-attr">a</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">fun</span>: <span class="hljs-function">(<span class="hljs-params">i,j</span>)=&gt;</span> i+j };
  <span class="hljs-keyword">let</span> c = <span class="hljs-title function_">f</span>(o);
  
  <span class="hljs-keyword">let</span> val = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">try</span>{
    val = c.<span class="hljs-title function_">fun</span>(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>)==<span class="hljs-number">7</span>;
  } <span class="hljs-keyword">catch</span>(e) { }
  <span class="hljs-keyword">return</span> val;
} 

<span class="hljs-keyword">function</span> <span class="hljs-title function_">testCirc</span>(<span class="hljs-params">f</span>) {
	<span class="hljs-keyword">function</span> <span class="hljs-title function_">Circ</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">me</span> = <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-keyword">var</span> o = {
      <span class="hljs-attr">x</span>: <span class="hljs-string">'a'</span>,
      <span class="hljs-attr">circ</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circ</span>(),
      <span class="hljs-attr">obj_circ</span>: <span class="hljs-literal">null</span>,
  };
  
  o.<span class="hljs-property">obj_circ</span> = o;

  <span class="hljs-keyword">let</span> val = <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">try</span>{
    <span class="hljs-keyword">let</span> c = <span class="hljs-title function_">f</span>(o);  
    val = (o.<span class="hljs-property">obj_circ</span> == o) &amp;&amp; (o.<span class="hljs-property">circ</span> == o.<span class="hljs-property">circ</span>.<span class="hljs-property">me</span>);
  } <span class="hljs-keyword">catch</span>(e) { }
  <span class="hljs-keyword">return</span> val;
} 

<span class="hljs-keyword">function</span> <span class="hljs-title function_">testRegExp</span>(<span class="hljs-params">f</span>) {
  <span class="hljs-keyword">let</span> o = {
    <span class="hljs-attr">re</span>: <span class="hljs-regexp">/a[0-9]+/</span>,
  };
  
  <span class="hljs-keyword">let</span> val = <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">try</span>{
    <span class="hljs-keyword">let</span> c = <span class="hljs-title function_">f</span>(o);  
    val = (<span class="hljs-title class_">String</span>(c.<span class="hljs-property">re</span>) == <span class="hljs-title class_">String</span>(<span class="hljs-regexp">/a[0-9]+/</span>));
  } <span class="hljs-keyword">catch</span>(e) { }
  <span class="hljs-keyword">return</span> val;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">testDate</span>(<span class="hljs-params">f</span>) {
  <span class="hljs-keyword">let</span> o = {
    <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
  };
  
  <span class="hljs-keyword">let</span> val = <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">try</span>{
    <span class="hljs-keyword">let</span> c = <span class="hljs-title function_">f</span>(o);  
    val = (+<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(c.<span class="hljs-property">date</span>) == +<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(o.<span class="hljs-property">date</span>));
  } <span class="hljs-keyword">catch</span>(e) { }
  <span class="hljs-keyword">return</span> val;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">testBigInt</span>(<span class="hljs-params">f</span>) {
  <span class="hljs-keyword">let</span> val = <span class="hljs-literal">false</span>;
  
  <span class="hljs-keyword">try</span>{
    <span class="hljs-keyword">let</span> o = {
      <span class="hljs-attr">big</span>: <span class="hljs-number">123n</span>,
    };
  
    <span class="hljs-keyword">let</span> c = <span class="hljs-title function_">f</span>(o);  
  
    val = o.<span class="hljs-property">big</span> == c.<span class="hljs-property">big</span>;
  } <span class="hljs-keyword">catch</span>(e) { }
  
  <span class="hljs-keyword">return</span> val;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">f</span>) {
  <span class="hljs-keyword">let</span> o = <span class="hljs-title function_">getCase</span>();  <span class="hljs-comment">// orginal object</span>
  <span class="hljs-keyword">let</span> oB = <span class="hljs-title function_">getCase</span>(); <span class="hljs-comment">// "backup" used for shallow valid test</span>
  
  <span class="hljs-keyword">let</span> c1 = <span class="hljs-title function_">f</span>(o); <span class="hljs-comment">// copy 1 for reference</span>
  <span class="hljs-keyword">let</span> c2 = <span class="hljs-title function_">f</span>(o); <span class="hljs-comment">// copy 2 for test shallow values</span>
  <span class="hljs-keyword">let</span> c3 = <span class="hljs-title function_">f</span>(o); <span class="hljs-comment">// copy 3 for test deep values</span>

  <span class="hljs-keyword">let</span> is_proper_copy = <span class="hljs-title function_">deepCompare</span>(c1,o);  <span class="hljs-comment">// shoud be true</span>
  
  <span class="hljs-comment">// shallow changes</span>
  <span class="hljs-keyword">let</span> testShallow = 
    [ [<span class="hljs-string">'bool'</span>,<span class="hljs-literal">false</span>],[<span class="hljs-string">'num'</span>,<span class="hljs-number">666</span>],[<span class="hljs-string">'str'</span>,<span class="hljs-string">'xyz'</span>],[<span class="hljs-string">'arr'</span>,[]],[<span class="hljs-string">'obj'</span>,{}] ]
    .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc,curr</span>)=&gt;</span> acc &amp;&amp; <span class="hljs-title function_">check</span>(c1,c2,curr[<span class="hljs-number">0</span>], curr[<span class="hljs-number">1</span>]), <span class="hljs-literal">true</span> );
  
  <span class="hljs-comment">// should be true (original object shoud not have changed shallow fields)</span>
  <span class="hljs-keyword">let</span> is_valid = <span class="hljs-title function_">deepCompare</span>(o,oB); 

  <span class="hljs-comment">// deep test (intruduce some change)</span>
  <span class="hljs-keyword">if</span> (c3.<span class="hljs-property">arr</span>[<span class="hljs-number">6</span>]) c3.<span class="hljs-property">arr</span>[<span class="hljs-number">6</span>][<span class="hljs-number">7</span>].<span class="hljs-property">num</span> = <span class="hljs-number">777</span>;
  
  <span class="hljs-keyword">let</span> diff_shallow = !testShallow; <span class="hljs-comment">// shoud be true (shallow field was copied)</span>
  <span class="hljs-keyword">let</span> diff_deep = !<span class="hljs-title function_">deepCompare</span>(c1,c3);    <span class="hljs-comment">// shoud be true (deep field was copied)</span>
  <span class="hljs-keyword">let</span> can_copy_functions = <span class="hljs-title function_">testFunc</span>(f);
  <span class="hljs-keyword">let</span> can_copy_circular = <span class="hljs-title function_">testCirc</span>(f);
  <span class="hljs-keyword">let</span> can_copy_regexp = <span class="hljs-title function_">testRegExp</span>(f);
  <span class="hljs-keyword">let</span> can_copy_date = <span class="hljs-title function_">testDate</span>(f);
  <span class="hljs-keyword">let</span> can_copy_bigInt = <span class="hljs-title function_">testBigInt</span>(f);
  
  <span class="hljs-keyword">let</span> has_undefined = <span class="hljs-string">'undef'</span> <span class="hljs-keyword">in</span> c1; <span class="hljs-comment">// field with undefined value is copied?  </span>
  <span class="hljs-keyword">let</span> is_ok = is_valid &amp;&amp; is_proper_copy;
  <span class="hljs-keyword">let</span> <span class="hljs-title function_">b</span>=(<span class="hljs-params">bool</span>) =&gt; (bool+<span class="hljs-string">''</span>).<span class="hljs-title function_">padEnd</span>(<span class="hljs-number">5</span>,<span class="hljs-string">' '</span>); <span class="hljs-comment">// bool value to formated string</span>
  
  <span class="hljs-title function_">testFunc</span>(f);
  
  <span class="hljs-keyword">if</span>(is_ok) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${f.name}</span> <span class="hljs-subst">${b(diff_shallow)}</span>   <span class="hljs-subst">${b(diff_deep)}</span> <span class="hljs-subst">${b(can_copy_functions)}</span> <span class="hljs-subst">${b(can_copy_circular)}</span> <span class="hljs-subst">${b(has_undefined)}</span>     <span class="hljs-subst">${b(can_copy_date)}</span> <span class="hljs-subst">${b(can_copy_regexp)}</span>  <span class="hljs-subst">${b(can_copy_bigInt)}</span>`</span>)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${f.name}</span>: INVALID <span class="hljs-subst">${is_valid}</span> <span class="hljs-subst">${is_proper_copy}</span>`</span>,{c1})
  }
  
}</code></pre>
<pre class="snippet-code-html lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://code.jquery.com/jquery-3.5.0.min.js"</span> <span class="hljs-attr">integrity</span>=<span class="hljs-string">"sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ="</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

This snippet only presents tested solutions and show differences between them (but it no make performence tests)</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif3" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>

<p>Below there are example results for Chrome for shallow-big object</p>

<p><a href="https://i.stack.imgur.com/zluC1.png" rel="noreferrer"><img src="https://i.stack.imgur.com/zluC1.png" alt="enter image description here"></a></p>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using Lodash: </p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> y = _.<span class="hljs-title function_">clone</span>(x, <span class="hljs-literal">true</span>);
</code></pre>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 21</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In ES-6 you can simply use Object.assign(...).
Ex:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> obj = {<span class="hljs-attr">person</span>: <span class="hljs-string">'Thor Odinson'</span>};
<span class="hljs-keyword">let</span> clone = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, obj);
</code></pre>

<p>A good reference is here:
<a href="https://googlechrome.github.io/samples/object-assign-es6/" rel="noreferrer">https://googlechrome.github.io/samples/object-assign-es6/</a></p>
    </div></div></div></div><div id="solution22" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 22</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Interested in cloning simple objects:</p>

<p><code>JSON.parse(JSON.stringify(json_original));</code></p>

<p>Source : <a href="https://stackoverflow.com/questions/18359093/how-to-copy-javascript-object-to-new-variable-not-by-reference?answertab=votes#tab-top">How to copy JavaScript object to new variable NOT by reference?</a></p>
    </div></div></div></div><div id="solution23" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 23</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can clone an object and remove any reference from the previous one using a single line of code. Simply do:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj1 = { <span class="hljs-attr">text</span>: <span class="hljs-string">'moo1'</span> };
<span class="hljs-keyword">var</span> obj2 = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(obj1); <span class="hljs-comment">// Creates a new clone without references</span>

obj2.<span class="hljs-property">text</span> = <span class="hljs-string">'moo2'</span>; <span class="hljs-comment">// Only updates obj2's text property</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1, obj2); <span class="hljs-comment">// Outputs: obj1: {text:'moo1'}, obj2: {text:'moo2'}</span>
</code></pre>

<p>For browsers / engines that do not currently support Object.create you can use this polyfill:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">// Polyfill Object.create if it does not exist</span>
<span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Object</span>.<span class="hljs-property">create</span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-property">create</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">o</span>) {
        <span class="hljs-keyword">var</span> F = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {};
        F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = o;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
    };
}
</code></pre>
    </div></div></div></div><div id="solution24" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 24</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> clone = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>( <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>( <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(obj)), obj)
</code></pre>

<p>ES6 solution if you want to (shallow) clone a <strong>class instance</strong> and not just a property object.</p>
    </div></div></div></div><div id="solution25" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 25</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>New answer to an old question!  If you have the pleasure of having using ECMAScript 2016 (ES6) with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator" rel="noreferrer">Spread Syntax</a>, it's easy.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">keepMeTheSame = {<span class="hljs-attr">first</span>: <span class="hljs-string">"Me!"</span>, <span class="hljs-attr">second</span>: <span class="hljs-string">"You!"</span>};
cloned = {...keepMeTheSame}
</code></pre>

<p>This provides a clean method for a shallow copy of an object.  Making a deep copy, meaning makign a new copy of every value in every recursively nested object, requires on of the heavier solutions above.</p>

<p>JavaScript keeps evolving.</p>
    </div></div></div></div><div id="solution26" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 26</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I think there is a simple and working answer. In deep copying there are two concerns:</p>

<ol>
<li>Keep properties independent to each other.</li>
<li>And keep the methods alive on cloned object.</li>
</ol>

<p>So I think one simple solution will be to first serialize and deserialize and then do an assign on it to copy functions too.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> deepCloned = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(source));
<span class="hljs-keyword">let</span> merged = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, source);
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(merged, deepCloned);
</code></pre>

<p>Although this question has many answers, I hope this one helps too.</p>
    </div></div></div></div><div id="solution27" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 27</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For a deep copy and clone, JSON.stringify then JSON.parse the object:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">obj = { <span class="hljs-attr">a</span>: <span class="hljs-number">0</span> , <span class="hljs-attr">b</span>: { <span class="hljs-attr">c</span>: <span class="hljs-number">0</span>}};
<span class="hljs-keyword">let</span> deepClone = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj));
obj.<span class="hljs-property">a</span> = <span class="hljs-number">5</span>;
obj.<span class="hljs-property">b</span>.<span class="hljs-property">c</span> = <span class="hljs-number">5</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(deepClone)); <span class="hljs-comment">// { a: 0, b: { c: 0}}</span>
</code></pre>
    </div></div></div></div><div id="solution28" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 28</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>Structured Cloning</h1>
<p><strong>2022 update:</strong> The <a href="https://developer.mozilla.org/en-US/docs/Web/API/structuredClone" rel="nofollow noreferrer"><code>structuredClone()</code></a> global function is already available in Node 17, Deno 1.14, and most major browsers (see <a href="https://caniuse.com/?search=structuredClone" rel="nofollow noreferrer">Can I Use</a>).</p>
<p>You <em>can</em> use the same structured clone mechanism that the HTML standard includes for sending data between realms.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> clone = <span class="hljs-title function_">structuredClone</span>(original);
</code></pre>
<p>See <a href="https://stackoverflow.com/a/10916838/157247">the other answer</a> for more details.</p>
    </div></div></div></div><div id="solution29" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 29</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>(The following was mainly an integration of @<a href="https://stackoverflow.com/a/39029912">Maciej Bukowski</a>, @<a href="https://stackoverflow.com/a/728694">A. Levy</a>, @<a href="https://stackoverflow.com/a/9023088">Jan Turo</a>, @<a href="https://stackoverflow.com/a/37503916">Redu</a>'s answers, and @<a href="https://stackoverflow.com/questions/728360/how-do-i-correctly-clone-a-javascript-object/53737490#comment96229185_53737490">LeviRoberts</a>, @<a href="https://stackoverflow.com/q/728360#comment42972840_9023088">RobG</a>'s comments, many thanks to them!!!)</p>
<p><strong>Deep copy</strong>?  YES! (mostly);<br>
<strong>Shallow copy</strong>?  NO! (except <code>Proxy</code>).</p>
<p>I sincerely welcome everyone to test <code>clone()</code>.<br>
In addition, <code>defineProp()</code> is designed to easily and quickly <em>(re)define or copy</em> any type of descriptor.</p>
<h1>Function</h1>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">object</span>) {
  <span class="hljs-comment">/*
    Deep copy objects by value rather than by reference,
    exception: `Proxy`
  */</span>

  <span class="hljs-keyword">const</span> seen = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>()

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">clone</span>(object)


  <span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">object</span>) {
    <span class="hljs-keyword">if</span> (object !== <span class="hljs-title class_">Object</span>(object)) <span class="hljs-keyword">return</span> object <span class="hljs-comment">/*
     Check if the object belongs to a primitive data type */</span>

    <span class="hljs-keyword">if</span> (object <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Node</span>) <span class="hljs-keyword">return</span> object.<span class="hljs-title function_">cloneNode</span>(<span class="hljs-literal">true</span>) <span class="hljs-comment">/*
     Clone DOM trees */</span>

    <span class="hljs-keyword">let</span> _object <span class="hljs-comment">// The clone of object</span>

    <span class="hljs-keyword">switch</span> (object.<span class="hljs-property">constructor</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">Array</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">Object</span>:
        _object = <span class="hljs-title function_">cloneObject</span>(object)
        <span class="hljs-keyword">break</span>

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">Date</span>:
        _object = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(+object)
        <span class="hljs-keyword">break</span>

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">Function</span>:
        _object = <span class="hljs-title function_">copyFn</span>(object)
        <span class="hljs-keyword">break</span>

      <span class="hljs-keyword">case</span> <span class="hljs-title class_">RegExp</span>:
        _object = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(object)
        <span class="hljs-keyword">break</span>

      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">switch</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(object.<span class="hljs-property">constructor</span>)) {
          <span class="hljs-comment">//                                  // Stem from:</span>
          <span class="hljs-keyword">case</span> <span class="hljs-string">"[object Function]"</span>:
            <span class="hljs-keyword">switch</span> (object[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">toStringTag</span>]) {
              <span class="hljs-keyword">case</span> <span class="hljs-attr">undefined</span>:
                _object = <span class="hljs-title function_">cloneObject</span>(object) <span class="hljs-comment">// `class`</span>
                <span class="hljs-keyword">break</span>

              <span class="hljs-keyword">case</span> <span class="hljs-string">"AsyncFunction"</span>:
              <span class="hljs-keyword">case</span> <span class="hljs-string">"GeneratorFunction"</span>:
              <span class="hljs-keyword">case</span> <span class="hljs-string">"AsyncGeneratorFunction"</span>:
                _object = <span class="hljs-title function_">copyFn</span>(object)
                <span class="hljs-keyword">break</span>

              <span class="hljs-attr">default</span>:
                _object = object
            }
            <span class="hljs-keyword">break</span>

          <span class="hljs-keyword">case</span> <span class="hljs-string">"[object Undefined]"</span>:          <span class="hljs-comment">// `Object.create(null)`</span>
            _object = <span class="hljs-title function_">cloneObject</span>(object)
            <span class="hljs-keyword">break</span>

          <span class="hljs-attr">default</span>:
            _object = object                  <span class="hljs-comment">// `Proxy`</span>
        }
    }

    <span class="hljs-keyword">return</span> _object
  }


  <span class="hljs-keyword">function</span> <span class="hljs-title function_">cloneObject</span>(<span class="hljs-params">object</span>) {
    <span class="hljs-keyword">if</span> (seen.<span class="hljs-title function_">has</span>(object)) <span class="hljs-keyword">return</span> seen.<span class="hljs-title function_">get</span>(object) <span class="hljs-comment">/*
     Handle recursive references (circular structures) */</span>

    <span class="hljs-keyword">const</span> _object = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(object)
      ? []
      : <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(object)) <span class="hljs-comment">/*
         Assign [[Prototype]] for inheritance */</span>

    seen.<span class="hljs-title function_">set</span>(object, _object) <span class="hljs-comment">/*
     Make `_object` the associative mirror of `object` */</span>

    <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">ownKeys</span>(object).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span>
      <span class="hljs-title function_">defineProp</span>(_object, key, { <span class="hljs-attr">value</span>: <span class="hljs-title function_">clone</span>(object[key]) }, object)
    )

    <span class="hljs-keyword">return</span> _object
  }
}


<span class="hljs-keyword">function</span> <span class="hljs-title function_">copyPropDescs</span>(<span class="hljs-params">target, source</span>) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperties</span>(target,
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptors</span>(source)
  )
}


<span class="hljs-keyword">function</span> <span class="hljs-title function_">convertFnToStr</span>(<span class="hljs-params">fn</span>) {
  <span class="hljs-keyword">let</span> fnStr = <span class="hljs-title class_">String</span>(fn)
  <span class="hljs-keyword">if</span> (fn.<span class="hljs-property">name</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"["</span>)) <span class="hljs-comment">// isSymbolKey</span>
    fnStr = fnStr.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\[Symbol\..+?\]/</span>, <span class="hljs-string">''</span>)
  fnStr = <span class="hljs-regexp">/^(?!(async )?(function\b|[^{]+?=&gt;))[^(]+?\(/</span>.<span class="hljs-title function_">test</span>(fnStr)
    ? fnStr.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^(async )?(\*)?/</span>, <span class="hljs-string">"$1function$2 "</span>) : fnStr
  <span class="hljs-keyword">return</span> fnStr
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">copyFn</span>(<span class="hljs-params">fn</span>) {
  <span class="hljs-keyword">const</span> newFn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">`return <span class="hljs-subst">${convertFnToStr(fn)}</span>`</span>)()
  <span class="hljs-title function_">copyPropDescs</span>(newFn, fn)
  <span class="hljs-keyword">return</span> newFn
}



<span class="hljs-keyword">function</span> <span class="hljs-title function_">defineProp</span>(<span class="hljs-params">object, key, descriptor = {}, copyFrom = {}</span>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">configurable</span>: _configurable, <span class="hljs-attr">writable</span>: _writable }
    = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(object, key)
    || { <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span> }

  <span class="hljs-keyword">const</span> test = _configurable <span class="hljs-comment">// Can redefine property</span>
    &amp;&amp; (_writable === <span class="hljs-literal">undefined</span> || _writable) <span class="hljs-comment">// Can assign to property</span>

  <span class="hljs-keyword">if</span> (!test || <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> test

  <span class="hljs-keyword">const</span> basisDesc = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(copyFrom, key)
    || { <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span> } <span class="hljs-comment">// Custom</span>
    || {}; <span class="hljs-comment">// or left to native default settings</span>

  [<span class="hljs-string">"get"</span>, <span class="hljs-string">"set"</span>, <span class="hljs-string">"value"</span>, <span class="hljs-string">"writable"</span>, <span class="hljs-string">"enumerable"</span>, <span class="hljs-string">"configurable"</span>]
    .<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span>
      descriptor[attr] === <span class="hljs-literal">undefined</span> &amp;&amp;
      (descriptor[attr] = basisDesc[attr])
    )

  <span class="hljs-keyword">const</span> { get, set, value, writable, enumerable, configurable }
    = descriptor

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(object, key, {
    enumerable, configurable, ...get || set
      ? { get, set } <span class="hljs-comment">// Accessor descriptor</span>
      : { value, writable } <span class="hljs-comment">// Data descriptor</span>
  })
}
</code></pre>
<h2>// Tests</h2>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> obj0 = {
  <span class="hljs-attr">u</span>: <span class="hljs-literal">undefined</span>,
  <span class="hljs-attr">nul</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">t</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">num</span>: <span class="hljs-number">9</span>,
  <span class="hljs-attr">str</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">sym</span>: <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">"symbol"</span>),
  [<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">"e"</span>)]: <span class="hljs-title class_">Math</span>.<span class="hljs-property">E</span>,
  <span class="hljs-attr">arr</span>: [[<span class="hljs-number">0</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]],
  <span class="hljs-attr">d</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
  <span class="hljs-attr">re</span>: <span class="hljs-regexp">/f/g</span>,
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">g</span>() { <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> },
  <span class="hljs-attr">o</span>: {
    <span class="hljs-attr">n</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">o</span>: { <span class="hljs-attr">f</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) { } }
  },
  <span class="hljs-attr">f</span>: {
    <span class="hljs-title function_">getAccessorStr</span>(<span class="hljs-params">object</span>) {
      <span class="hljs-keyword">return</span> []
        .<span class="hljs-title function_">concat</span>(...
          <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptors</span>(object))
            .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">desc</span> =&gt;</span> desc.<span class="hljs-property">writable</span> === <span class="hljs-literal">undefined</span>)
            .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">desc</span> =&gt;</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(desc))
        )
        .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">prop</span> =&gt;</span> <span class="hljs-keyword">typeof</span> prop === <span class="hljs-string">"function"</span>)
        .<span class="hljs-title function_">map</span>(<span class="hljs-title class_">String</span>)
    },
    <span class="hljs-attr">f0</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">f0</span>(<span class="hljs-params"></span>) { },
    <span class="hljs-attr">f1</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) { },
    <span class="hljs-attr">f2</span>: <span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a / (a + <span class="hljs-number">1</span>),
    <span class="hljs-attr">f3</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-number">0</span>,
    <span class="hljs-title function_">f4</span>(<span class="hljs-params">params</span>) { <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">param</span> =&gt;</span> param + params },
    <span class="hljs-attr">f5</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">{ c = <span class="hljs-number">0</span> } = {}</span>) =&gt;</span> a + b + c
  }
}

<span class="hljs-title function_">defineProp</span>(obj0, <span class="hljs-string">"s"</span>, { <span class="hljs-title function_">set</span>(<span class="hljs-params">v</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">_s</span> = v } })
<span class="hljs-title function_">defineProp</span>(obj0.<span class="hljs-property">arr</span>, <span class="hljs-string">"tint"</span>, { <span class="hljs-attr">value</span>: { <span class="hljs-attr">is</span>: <span class="hljs-string">"non-enumerable"</span> } })
obj0.<span class="hljs-property">arr</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span> = <span class="hljs-string">"nested array"</span>


<span class="hljs-keyword">let</span> obj1 = <span class="hljs-title function_">clone</span>(obj0)
obj1.<span class="hljs-property">o</span>.<span class="hljs-property">n</span> = <span class="hljs-number">1</span>
obj1.<span class="hljs-property">o</span>.<span class="hljs-property">o</span>.<span class="hljs-property">g</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">g</span>(<span class="hljs-params">a = <span class="hljs-number">0</span>, b = <span class="hljs-number">0</span></span>) { <span class="hljs-keyword">return</span> a + b }
obj1.<span class="hljs-property">arr</span>[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">3</span>
obj1.<span class="hljs-property">d</span>.<span class="hljs-title function_">setTime</span>(+obj0.<span class="hljs-property">d</span> + <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>)
obj1.<span class="hljs-property">arr</span>.<span class="hljs-property">tint</span>.<span class="hljs-property">is</span> = <span class="hljs-string">"enumerable? no"</span>
obj1.<span class="hljs-property">arr</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span> = <span class="hljs-string">"a nested arr"</span>
<span class="hljs-title function_">defineProp</span>(obj1, <span class="hljs-string">"s"</span>, { <span class="hljs-title function_">set</span>(<span class="hljs-params">v</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">_s</span> = v + <span class="hljs-number">1</span> } })
<span class="hljs-title function_">defineProp</span>(obj1.<span class="hljs-property">re</span>, <span class="hljs-string">"multiline"</span>, { <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span> })

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\n\n"</span> + <span class="hljs-string">"-"</span>.<span class="hljs-title function_">repeat</span>(<span class="hljs-number">2</span> ** <span class="hljs-number">6</span>))




<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"&gt;:&gt;: Test - Routinely"</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"obj0:\n "</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj0))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"obj1:\n "</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj1))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>()

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"obj0:\n "</span>, obj0)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"obj1:\n "</span>, obj1)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>()

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"obj0\n "</span>,
  <span class="hljs-string">".arr.tint:"</span>, obj0.<span class="hljs-property">arr</span>.<span class="hljs-property">tint</span>, <span class="hljs-string">"\n "</span>,
  <span class="hljs-string">".arr[0].name:"</span>, obj0.<span class="hljs-property">arr</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>
)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"obj1\n "</span>,
  <span class="hljs-string">".arr.tint:"</span>, obj1.<span class="hljs-property">arr</span>.<span class="hljs-property">tint</span>, <span class="hljs-string">"\n "</span>,
  <span class="hljs-string">".arr[0].name:"</span>, obj1.<span class="hljs-property">arr</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>
)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>()

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Accessor-type descriptor\n "</span>,
  <span class="hljs-string">"of obj0:"</span>, obj0.<span class="hljs-property">f</span>.<span class="hljs-title function_">getAccessorStr</span>(obj0), <span class="hljs-string">"\n "</span>,
  <span class="hljs-string">"of obj1:"</span>, obj1.<span class="hljs-property">f</span>.<span class="hljs-title function_">getAccessorStr</span>(obj1), <span class="hljs-string">"\n "</span>,
  <span class="hljs-string">"set (obj0 &amp; obj1) .s :"</span>, obj0.<span class="hljs-property">s</span> = obj1.<span class="hljs-property">s</span> = <span class="hljs-number">0</span>, <span class="hljs-string">"\n "</span>,
  <span class="hljs-string">"   (obj0 , obj1) ._s:"</span>, obj0.<span class="hljs-property">_s</span>, <span class="hljs-string">","</span>, obj1.<span class="hljs-property">_s</span>
)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">" obj0 has not been interfered."</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\n\n"</span> + <span class="hljs-string">"-"</span>.<span class="hljs-title function_">repeat</span>(<span class="hljs-number">2</span> ** <span class="hljs-number">6</span>))




<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"&gt;:&gt;: Test - More kinds of functions"</span>)

<span class="hljs-keyword">const</span> fnsForTest = {
  <span class="hljs-title function_">f</span>(<span class="hljs-params">_</span>) { <span class="hljs-keyword">return</span> _ },
  <span class="hljs-attr">func</span>: <span class="hljs-function"><span class="hljs-params">_</span> =&gt;</span> _,
  <span class="hljs-attr">aFunc</span>: <span class="hljs-keyword">async</span> _ =&gt; _,
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) { },
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">asyncFunc</span>(<span class="hljs-params"></span>) { },
  <span class="hljs-attr">aFn</span>: <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) { },
  *<span class="hljs-title function_">gen</span>(<span class="hljs-params"></span>) { },
  <span class="hljs-keyword">async</span> *<span class="hljs-title function_">asyncGen</span>(<span class="hljs-params"></span>) { },
  <span class="hljs-attr">aG1</span>: <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>* () { },
  <span class="hljs-attr">aG2</span>: <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params"></span>) { },
  *[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]() { <span class="hljs-keyword">yield</span>* <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>) }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">ownKeys</span>(fnsForTest).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span>
  <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">String</span>(k)}</span>:
  <span class="hljs-subst">${fnsForTest[k].name}</span>--&gt;
    <span class="hljs-subst">${<span class="hljs-built_in">String</span>(fnsForTest[k])}</span>`</span>
).<span class="hljs-title function_">join</span>(<span class="hljs-string">"\n"</span>))

<span class="hljs-keyword">const</span> normedFnsStr = <span class="hljs-string">`{
  f: function f(_) { return _ },
  func: _ =&gt; _,
  aFunc: async _ =&gt; _,
  function: async function() { },
  asyncFunc: async function asyncFunc() { },
  aFn: async function () { },
  gen: function* gen() { },
  asyncGen: async function* asyncGen() { },
  aG1: async function* () { },
  aG2: async function* gen() { },
  [Symbol.iterator]: function* () { yield* Object.keys(this) }
}`</span>

<span class="hljs-keyword">const</span> copiedFnsForTest = <span class="hljs-title function_">clone</span>(fnsForTest)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"fnsForTest:"</span>, fnsForTest)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"fnsForTest (copied):"</span>, copiedFnsForTest)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"fnsForTest (normed str):"</span>, <span class="hljs-built_in">eval</span>(<span class="hljs-string">`(<span class="hljs-subst">${normedFnsStr}</span>)`</span>))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Comparison of fnsForTest and its clone:"</span>,
  <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">ownKeys</span>(fnsForTest).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span>
    [k, fnsForTest[k] === copiedFnsForTest[k]]
  )
)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\n\n"</span> + <span class="hljs-string">"-"</span>.<span class="hljs-title function_">repeat</span>(<span class="hljs-number">2</span> ** <span class="hljs-number">6</span>))




<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"&gt;:&gt;: Test - Circular structures"</span>)

obj0.<span class="hljs-property">o</span>.<span class="hljs-property">r</span> = {}
obj0.<span class="hljs-property">o</span>.<span class="hljs-property">r</span>.<span class="hljs-property">recursion</span> = obj0.<span class="hljs-property">o</span>
obj0.<span class="hljs-property">arr</span>[<span class="hljs-number">1</span>] = obj0.<span class="hljs-property">arr</span>

obj1 = <span class="hljs-title function_">clone</span>(obj0)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"obj0:\n "</span>, obj0)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"obj1:\n "</span>, obj1)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Clear obj0's recursion:"</span>,
  obj0.<span class="hljs-property">o</span>.<span class="hljs-property">r</span>.<span class="hljs-property">recursion</span> = <span class="hljs-literal">null</span>, obj0.<span class="hljs-property">arr</span>[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>
)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
  <span class="hljs-string">"obj0\n "</span>,
  <span class="hljs-string">".o.r:"</span>, obj0.<span class="hljs-property">o</span>.<span class="hljs-property">r</span>, <span class="hljs-string">"\n "</span>,
  <span class="hljs-string">".arr:"</span>, obj0.<span class="hljs-property">arr</span>
)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
  <span class="hljs-string">"obj1\n "</span>,
  <span class="hljs-string">".o.r:"</span>, obj1.<span class="hljs-property">o</span>.<span class="hljs-property">r</span>, <span class="hljs-string">"\n "</span>,
  <span class="hljs-string">".arr:"</span>, obj1.<span class="hljs-property">arr</span>
)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">" obj1 has not been interfered."</span>)


<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\n\n"</span> + <span class="hljs-string">"-"</span>.<span class="hljs-title function_">repeat</span>(<span class="hljs-number">2</span> ** <span class="hljs-number">6</span>))




<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"&gt;:&gt;: Test - Classes"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Boy</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Person</span> { }
<span class="hljs-title class_">Boy</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sex</span> = <span class="hljs-string">"M"</span>

<span class="hljs-keyword">const</span> boy0 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>
boy0.<span class="hljs-property">hobby</span> = { <span class="hljs-attr">sport</span>: <span class="hljs-string">"spaceflight"</span> }

<span class="hljs-keyword">const</span> boy1 = <span class="hljs-title function_">clone</span>(boy0)
boy1.<span class="hljs-property">hobby</span>.<span class="hljs-property">sport</span> = <span class="hljs-string">"superluminal flight"</span>

boy0.<span class="hljs-property">name</span> = <span class="hljs-string">"one"</span>
boy1.<span class="hljs-property">name</span> = <span class="hljs-string">"neo"</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"boy0:\n "</span>, boy0)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"boy1:\n "</span>, boy1)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"boy1's prototype === boy0's:"</span>,
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(boy1) === <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(boy0)
)
</code></pre>
<h1>References</h1>
<ol>
<li><a href="https://mdn.io/Object/create" rel="nofollow noreferrer"><code>Object.create()</code> | MDN</a></li>
<li><a href="https://mdn.io/Object/defineProperties" rel="nofollow noreferrer"><code>Object.defineProperties()</code> | MDN</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties#Detection_Table" rel="nofollow noreferrer">Enumerability and ownership of properties | MDN</a></li>
<li><a href="https://mdn.io/Errors/Cyclic_object_value" rel="nofollow noreferrer">TypeError: cyclic object value | MDN</a></li>
</ol>
<h1>Language tricks used</h1>
<ol>
<li><a href="https://stackoverflow.com/a/40560953">Conditionally add prop to object</a></li>
</ol>
    </div></div></div></div><div id="solution30" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 30</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/javascript-objects">javascript-objects</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
  <p><strong><em><a href="https://lodash.com/docs/4.17.15#cloneDeep" rel="noreferrer">Use lodash _.cloneDeep().</a></em></strong></p>
</blockquote>

<p><strong><em>Shallow Copy: lodash _.clone()</em></strong></p>

<p><em>A shallow copy can be made by simply copying the reference.</em></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> obj1 = {
    <span class="hljs-attr">a</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">b</span>: {
        <span class="hljs-attr">c</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">e</span>: {
            <span class="hljs-attr">f</span>: <span class="hljs-number">0</span>
        }
    }
};
<span class="hljs-keyword">let</span> obj3 = _.<span class="hljs-title function_">clone</span>(obj1);
obj1.<span class="hljs-property">a</span> = <span class="hljs-number">4</span>;
obj1.<span class="hljs-property">b</span>.<span class="hljs-property">c</span> = <span class="hljs-number">4</span>;
obj1.<span class="hljs-property">b</span>.<span class="hljs-property">e</span>.<span class="hljs-property">f</span> = <span class="hljs-number">100</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj1));
<span class="hljs-comment">//{"a":4,"b":{"c":4,"e":{"f":100}}}</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj3));
<span class="hljs-comment">//{"a":0,"b":{"c":4,"e":{"f":100}}}</span>
</code></pre>

<p><a href="https://i.stack.imgur.com/vmysI.png" rel="noreferrer"><img src="https://i.stack.imgur.com/vmysI.png" alt="Shallow Copy: lodash _.clone()"></a></p>

<p><strong><em>Deep Copy: lodash _.cloneDeep()</em></strong></p>

<p><em>fields are dereferenced: rather than references to objects being copied</em></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> obj1 = {
    <span class="hljs-attr">a</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">b</span>: {
        <span class="hljs-attr">c</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">e</span>: {
            <span class="hljs-attr">f</span>: <span class="hljs-number">0</span>
        }
    }
};
<span class="hljs-keyword">let</span> obj3 = _.<span class="hljs-title function_">cloneDeep</span>(obj1);
obj1.<span class="hljs-property">a</span> = <span class="hljs-number">100</span>;
obj1.<span class="hljs-property">b</span>.<span class="hljs-property">c</span> = <span class="hljs-number">100</span>;
obj1.<span class="hljs-property">b</span>.<span class="hljs-property">e</span>.<span class="hljs-property">f</span> = <span class="hljs-number">100</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj1));
{<span class="hljs-string">"a"</span>:<span class="hljs-number">100</span>,<span class="hljs-string">"b"</span>:{<span class="hljs-string">"c"</span>:<span class="hljs-number">100</span>,<span class="hljs-string">"e"</span>:{<span class="hljs-string">"f"</span>:<span class="hljs-number">100</span>}}}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj3));
{<span class="hljs-string">"a"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"b"</span>:{<span class="hljs-string">"c"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"e"</span>:{<span class="hljs-string">"f"</span>:<span class="hljs-number">0</span>}}}
</code></pre>

<p><a href="https://i.stack.imgur.com/z0M6n.png" rel="noreferrer"><img src="https://i.stack.imgur.com/z0M6n.png" alt="Deep Copy: lodash _.cloneDeep()"></a></p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/what-does-the-&#x27;static&#x27;-keyword-do-in-a-class-1657388554238">What does the &#x27;static&#x27; keyword do in a class?</a><a href="/questions/how-to-affect-other-elements-when-one-element-is-hovered-1657387832363">How to affect other elements when one element is hovered</a><a href="/questions/templated-check-for-the-existence-of-a-class-member-function-1657388363414">Templated check for the existence of a class member function?</a><a href="/questions/what-is-the-difference-between-client-side-and-server-side-programming-1657384372926">What is the difference between client-side and server-side programming?</a><a href="/questions/jquery-ajax-file-upload-1657387368970">jQuery Ajax File Upload</a><a href="/questions/how-can-i-access-the-contents-of-an-iframe-with-javascriptjquery-1657388369923">How can I access the contents of an iframe with JavaScript/jQuery?</a><a href="/questions/add-a-property-to-a-javascript-object-using-a-variable-as-the-name-1657388425650">Add a property to a JavaScript object using a variable as the name?</a><a href="/questions/what-is-an-undefined-referenceunresolved-external-symbol-error-and-how-do-i-fix-it-1657384255179">What is an undefined reference/unresolved external symbol error and how do I fix it?</a><a href="/questions/how-do-i-get-php-errors-to-display-1657384570095">How do I get PHP errors to display?</a><a href="/questions/what-do-queryselectorall-and-getelementsby*-methods-return-1657384425935">What do querySelectorAll and getElementsBy* methods return?</a><a href="/questions/how-to-filter-pandas-dataframe-using-&#x27;in&#x27;-and-&#x27;not-in&#x27;-like-in-sql-1657387371355">How to filter Pandas dataframe using &#x27;in&#x27; and &#x27;not in&#x27; like in SQL</a><a href="/questions/the-viewdata-item-that-has-the-key-&#x27;xxx&#x27;-is-of-type-&#x27;system.int32&#x27;-but-must-be-of-type-&#x27;ienumerablelessselectlistitemgreater&#x27;-1657388454191">The ViewData item that has the key &#x27;XXX&#x27; is of type &#x27;System.Int32&#x27; but must be of type &#x27;IEnumerable&lt;SelectListItem&gt;&#x27;</a><a href="/questions/deserialize-json-into-c-dynamic-object-1657388568720">Deserialize JSON into C# dynamic object?</a><a href="/questions/what-and-where-are-the-stack-and-heap-1657387415361">What and where are the stack and heap?</a><a href="/questions/when-to-use-virtual-destructors-1657388152135">When to use virtual destructors?</a><a href="/questions/how-to-append-text-to-an-existing-file-in-java-1657388492377">How to append text to an existing file in Java?</a><a href="/questions/reference-what-does-this-regex-mean-1657384291445">Reference - What does this regex mean?</a><a href="/questions/swing-gui-listeners-without-awt-1657387522426">Swing GUI listeners without AWT</a><a href="/questions/find-object-by-id-in-an-array-of-javascript-objects-1657387572087">Find object by id in an array of JavaScript objects</a><a href="/questions/how-to-remove-%22noise%22-from-gccclang-assembly-output-1657387612391">How to remove &quot;noise&quot; from GCC/clang assembly output?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;h3\u0026gt;2022 update\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;There\u0026apos;s a new JS standard called \u0026quot;structured cloning\u0026quot;. It works on all browsers:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt;(object);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Old answer\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;To do this for any object in JavaScript will not be simple or straightforward. You will run into the problem of erroneously picking up attributes from the object\u0026apos;s prototype that should be left in the prototype and not copied to the new instance. If, for instance, you are adding a \u0026lt;code\u0026gt;clone\u0026lt;/code\u0026gt; method to \u0026lt;code\u0026gt;Object.prototype\u0026lt;/code\u0026gt;, as some answers depict, you will need to explicitly skip that attribute. But what if there are other additional methods added to \u0026lt;code\u0026gt;Object.prototype\u0026lt;/code\u0026gt;, or other intermediate prototypes, that you don\u0026apos;t know about? In that case, you will copy attributes you shouldn\u0026apos;t, so you need to detect unforeseen, non-local attributes with the \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Object/hasOwnProperty\u0026quot; rel=\u0026quot;noreferrer\u0026quot; title=\u0026quot;Mozilla JavaScript Reference: Object.hasOwnProperty\u0026quot;\u0026gt;\u0026lt;code\u0026gt;hasOwnProperty\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; method.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In addition to non-enumerable attributes, you\u0026apos;ll encounter a tougher problem when you try to copy objects that have hidden properties. For example, \u0026lt;code\u0026gt;prototype\u0026lt;/code\u0026gt; is a hidden property of a function. Also, an object\u0026apos;s prototype is referenced with the attribute \u0026lt;code\u0026gt;__proto__\u0026lt;/code\u0026gt;, which is also hidden, and will not be copied by a for/in loop iterating over the source object\u0026apos;s attributes. I think \u0026lt;code\u0026gt;__proto__\u0026lt;/code\u0026gt; might be specific to Firefox\u0026apos;s JavaScript interpreter and it may be something different in other browsers, but you get the picture. Not everything is enumerable. You can copy a hidden attribute if you know its name, but I don\u0026apos;t know of any way to discover it automatically.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Yet another snag in the quest for an elegant solution is the problem of setting up the prototype inheritance correctly. If your source object\u0026apos;s prototype is \u0026lt;code\u0026gt;Object\u0026lt;/code\u0026gt;, then simply creating a new general object with \u0026lt;code\u0026gt;{}\u0026lt;/code\u0026gt; will work, but if the source\u0026apos;s prototype is some descendant of \u0026lt;code\u0026gt;Object\u0026lt;/code\u0026gt;, then you are going to be missing the additional members from that prototype which you skipped using the \u0026lt;code\u0026gt;hasOwnProperty\u0026lt;/code\u0026gt; filter, or which were in the prototype, but weren\u0026apos;t enumerable in the first place. One solution might be to call the source object\u0026apos;s \u0026lt;code\u0026gt;constructor\u0026lt;/code\u0026gt; property to get the initial copy object and then copy over the attributes, but then you still will not get non-enumerable attributes. For example, a \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Date\u0026quot; rel=\u0026quot;noreferrer\u0026quot; title=\u0026quot;Mozilla JavaScript Reference: Date\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Date\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; object stores its data as a hidden member:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; == obj || \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; attr \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(attr)) copy[attr] = obj[attr];\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; d1 = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;();\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* Executes function after 5 seconds. */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;setTimeout\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; d2 = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(d1);\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;d1 = \u0026quot;\u0026lt;/span\u0026gt; + d1.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toString\u0026lt;/span\u0026gt;() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\nd2 = \u0026quot;\u0026lt;/span\u0026gt; + d2.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toString\u0026lt;/span\u0026gt;());\n}, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5000\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The date string for \u0026lt;code\u0026gt;d1\u0026lt;/code\u0026gt; will be 5 seconds behind that of \u0026lt;code\u0026gt;d2\u0026lt;/code\u0026gt;. A way to make one \u0026lt;code\u0026gt;Date\u0026lt;/code\u0026gt; the same as another is by calling the \u0026lt;code\u0026gt;setTime\u0026lt;/code\u0026gt; method, but that is specific to the \u0026lt;code\u0026gt;Date\u0026lt;/code\u0026gt; class. I don\u0026apos;t think there is a bullet-proof general solution to this problem, though I would be happy to be wrong!\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;When I had to implement general deep copying I ended up compromising by assuming that I would only need to copy a plain \u0026lt;code\u0026gt;Object\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;Array\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;Date\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;String\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;Number\u0026lt;/code\u0026gt;, or \u0026lt;code\u0026gt;Boolean\u0026lt;/code\u0026gt;. The last 3 types are immutable, so I could perform a shallow copy and not worry about it changing. I further assumed that any elements contained in \u0026lt;code\u0026gt;Object\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;Array\u0026lt;/code\u0026gt; would also be one of the 6 simple types in that list. This can be accomplished with code like the following:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle the 3 simple types, and null or undefined\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; == obj || \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Date\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;) {\n        copy = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;();\n        copy.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setTime\u0026lt;/span\u0026gt;(obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getTime\u0026lt;/span\u0026gt;());\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Array\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) {\n        copy = [];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, len = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i \u0026amp;lt; len; i++) {\n            copy[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj[i]);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Object\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;) {\n        copy = {};\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; attr \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(attr)) copy[attr] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj[attr]);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Error\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Unable to copy obj! Its type isn\u0026apos;t supported.\u0026quot;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The above function will work adequately for the 6 simple types I mentioned, as long as the data in the objects and arrays form a tree structure. That is, there isn\u0026apos;t more than one reference to the same data in the object. For example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This would be cloneable:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; tree = {\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;left\u0026quot;\u0026lt;/span\u0026gt;  : { \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;left\u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;right\u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;data\u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; },\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;right\u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;data\u0026quot;\u0026lt;/span\u0026gt;  : \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\n};\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This would kind-of work, but you would get 2 copies of the \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// inner node instead of 2 references to the same copy\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; directedAcylicGraph = {\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;left\u0026quot;\u0026lt;/span\u0026gt;  : { \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;left\u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;right\u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;data\u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; },\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;data\u0026quot;\u0026lt;/span\u0026gt;  : \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\n};\ndirectedAcyclicGraph[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;right\u0026quot;\u0026lt;/span\u0026gt;] = directedAcyclicGraph[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;left\u0026quot;\u0026lt;/span\u0026gt;];\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Cloning this would cause a stack overflow due to infinite recursion:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; cyclicGraph = {\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;left\u0026quot;\u0026lt;/span\u0026gt;  : { \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;left\u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;right\u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;data\u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; },\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;data\u0026quot;\u0026lt;/span\u0026gt;  : \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\n};\ncyclicGraph[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;right\u0026quot;\u0026lt;/span\u0026gt;] = cyclicGraph;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;It will not be able to handle any JavaScript object, but it may be sufficient for many purposes as long as you don\u0026apos;t assume that it will just work for anything you throw at it.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you do not use \u0026lt;code\u0026gt;Date\u0026lt;/code\u0026gt;s, functions, undefined, regExp or Infinity within your object, a very simple one liner is \u0026lt;code\u0026gt;JSON.parse(JSON.stringify(object))\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;false\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; a = {\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;string\u0026apos;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nul\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(),  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// stringified\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;undef\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;,  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// lost\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;inf\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Infinity\u0026lt;/span\u0026gt;,  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// forced to \u0026apos;null\u0026apos;\u0026lt;/span\u0026gt;\n}\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(a);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Date object\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(a));\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(clone);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// result of .toISOString()\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif1\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This works for all kind of objects containing objects, arrays, strings, booleans and numbers.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;See also \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/The_structured_clone_algorithm\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;this article about the structured clone algorithm of browsers\u0026lt;/a\u0026gt; which is used when posting messages to and from a worker. It also contains a function for deep cloning.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;With jQuery, you can \u0026lt;strong\u0026gt;shallow copy\u0026lt;/strong\u0026gt; with \u0026lt;a href=\u0026quot;http://api.jquery.com/jQuery.extend\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;extend\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copiedObject = jQuery.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;({}, originalObject)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;subsequent changes to the \u0026lt;code\u0026gt;copiedObject\u0026lt;/code\u0026gt; will not affect the \u0026lt;code\u0026gt;originalObject\u0026lt;/code\u0026gt;, and vice versa.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Or to make a \u0026lt;strong\u0026gt;deep copy\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copiedObject = jQuery.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, {}, originalObject)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In ECMAScript 6 there is \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Object.assign\u0026lt;/a\u0026gt; method, which copies values of all enumerable own properties from one object to another. For example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; x = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;myProp\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value\u0026quot;\u0026lt;/span\u0026gt;};\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; y = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, x); \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;But be aware \u0026lt;strong\u0026gt;this is a shallow copy\u0026lt;/strong\u0026gt; - nested objects are still copied as reference.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Per \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Deep_Clone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;MDN\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;If you want shallow copy, use \u0026lt;code\u0026gt;Object.assign({}, a)\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;For \u0026quot;deep\u0026quot; copy, use \u0026lt;code\u0026gt;JSON.parse(JSON.stringify(a))\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;There is no need for external libraries but you need to check \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Browser_compatibility\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;browser compatibility first\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are many answers, but none that mentions \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Object.create\u0026lt;/a\u0026gt; from ECMAScript 5, which admittedly does not give you an exact copy, but sets the source as the prototype of the new object.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Thus, this is not an exact answer to the question, but it is a one-line solution and thus elegant. And it works best for 2 cases:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Where such inheritance is useful (duh!)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Where the source object won\u0026apos;t be modified, thus making the relation between the 2 objects a non issue.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;Example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; foo = { a : \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; };\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; bar = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt;(foo);\nfoo.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 1\u0026lt;/span\u0026gt;\nbar.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 1\u0026lt;/span\u0026gt;\nfoo.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;;\nbar.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 2 - prototype changed\u0026lt;/span\u0026gt;\nbar.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;\nfoo.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Still 2, since setting bar.a makes it an \u0026quot;own\u0026quot; property\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Why do I consider this solution to be superior? It\u0026apos;s native, thus no looping, no recursion. However, older browsers will need a polyfill.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h1\u0026gt;An elegant way to clone a Javascript object in one line of code\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;An \u0026lt;code\u0026gt;Object.assign\u0026lt;/code\u0026gt; method is part of the ECMAScript 2015 (ES6) standard and does exactly what you need.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, obj);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;The Object.assign() method is used to copy the values of all enumerable own properties from one or more source objects to a target object.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Read more...\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;strong\u0026gt;polyfill\u0026lt;/strong\u0026gt; to support older browsers:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProperty\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;assign\u0026apos;\u0026lt;/span\u0026gt;, {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;enumerable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;configurable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;writable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;target\u0026lt;/span\u0026gt;) {\n      \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;use strict\u0026apos;\u0026lt;/span\u0026gt;;\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (target === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt; || target === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;TypeError\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Cannot convert first argument to object\u0026apos;\u0026lt;/span\u0026gt;);\n      }\n\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; to = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;(target);\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;; i \u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;arguments\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i++) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; nextSource = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;arguments\u0026lt;/span\u0026gt;[i];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (nextSource === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt; || nextSource === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;continue\u0026lt;/span\u0026gt;;\n        }\n        nextSource = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;(nextSource);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; keysArray = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;keys\u0026lt;/span\u0026gt;(nextSource);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; nextIndex = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, len = keysArray.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; nextIndex \u0026amp;lt; len; nextIndex++) {\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; nextKey = keysArray[nextIndex];\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; desc = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptor\u0026lt;/span\u0026gt;(nextSource, nextKey);\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (desc !== \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; desc.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;enumerable\u0026lt;/span\u0026gt;) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; to;\n    }\n  });\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are several issues with most solutions on the internet. So I decided to make a follow-up, which includes, why the accepted answer shouldn\u0026apos;t be accepted.\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;starting situation\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;I want to \u0026lt;strong\u0026gt;deep-copy\u0026lt;/strong\u0026gt; a Javascript \u0026lt;code\u0026gt;Object\u0026lt;/code\u0026gt; with all of its children and their children and so on. But since I\u0026apos;m not kind of a normal developer, my \u0026lt;code\u0026gt;Object\u0026lt;/code\u0026gt; has \u0026lt;em\u0026gt;normal\u0026lt;/em\u0026gt; \u0026lt;code\u0026gt;properties\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;circular structures\u0026lt;/code\u0026gt; and even \u0026lt;code\u0026gt;nested objects\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So let\u0026apos;s create a \u0026lt;code\u0026gt;circular structure\u0026lt;/code\u0026gt; and a \u0026lt;code\u0026gt;nested object\u0026lt;/code\u0026gt; first.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;me\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Nested\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; = y;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Let\u0026apos;s bring everything together in an \u0026lt;code\u0026gt;Object\u0026lt;/code\u0026gt; named \u0026lt;code\u0026gt;a\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; a = {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt;(),\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Nested\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;)\n};\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Next, we want to copy \u0026lt;code\u0026gt;a\u0026lt;/code\u0026gt; into a variable named \u0026lt;code\u0026gt;b\u0026lt;/code\u0026gt; and mutate it.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; b = a;\n\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You know what happened here because if not you wouldn\u0026apos;t even land on this great question.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(a, b);\n\na --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;me\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; { ... }\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Nested\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;\n    }\n}\n\nb --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;me\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; { ... }\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Nested\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Now let\u0026apos;s find a solution.\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;JSON\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;The first attempt I tried was using \u0026lt;code\u0026gt;JSON\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; b = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;( a ) );\n\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Don\u0026apos;t waste too much time on it, you\u0026apos;ll get \u0026lt;code\u0026gt;TypeError: Converting circular structure to JSON\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;Recursive copy \u0026lt;em\u0026gt;(the accepted \u0026quot;answer\u0026quot;)\u0026lt;/em\u0026gt;\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;Let\u0026apos;s have a look at the accepted answer.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneSO\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle the 3 simple types, and null or undefined\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; == obj || \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Date\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;();\n        copy.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setTime\u0026lt;/span\u0026gt;(obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getTime\u0026lt;/span\u0026gt;());\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Array\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = [];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, len = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i \u0026amp;lt; len; i++) {\n            copy[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneSO\u0026lt;/span\u0026gt;(obj[i]);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Object\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = {};\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; attr \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(attr)) copy[attr] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneSO\u0026lt;/span\u0026gt;(obj[attr]);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Error\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Unable to copy obj! Its type isn\u0026apos;t supported.\u0026quot;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Looks good, heh? It\u0026apos;s a recursive copy of the object and handles other types as well, like \u0026lt;code\u0026gt;Date\u0026lt;/code\u0026gt;, but that wasn\u0026apos;t a requirement.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; b = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneSO\u0026lt;/span\u0026gt;(a);\n\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Recursion and \u0026lt;code\u0026gt;circular structures\u0026lt;/code\u0026gt; doesn\u0026apos;t work well together... \u0026lt;code\u0026gt;RangeError: Maximum call stack size exceeded\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;native solution\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;After arguing with my co-worker, my boss asked us what happened, and he found a simple \u0026lt;em\u0026gt;solution\u0026lt;/em\u0026gt; after some googling. It\u0026apos;s called \u0026lt;code\u0026gt;Object.create\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; b = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt;(a);\n\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This solution was added to Javascript some time ago and even handles \u0026lt;code\u0026gt;circular structure\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(a, b);\n\na --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;me\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; { ... }\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Nested\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;\n    }\n}\n\nb --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;me\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; { ... }\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Nested\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;... and you see, it didn\u0026apos;t work with the nested structure inside.\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;polyfill for the native solution\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;There\u0026apos;s a polyfill for \u0026lt;code\u0026gt;Object.create\u0026lt;/code\u0026gt; in the older browser just like the IE 8. It\u0026apos;s something like recommended by Mozilla, and of course, it\u0026apos;s not perfect and results in the same problem as the \u0026lt;em\u0026gt;native solution\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;F\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {};\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clonePF\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;) {\n    F.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; = o;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;F\u0026lt;/span\u0026gt;();\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; b = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clonePF\u0026lt;/span\u0026gt;(a);\n\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I\u0026apos;ve put \u0026lt;code\u0026gt;F\u0026lt;/code\u0026gt; outside the scope so we can have a look at what \u0026lt;code\u0026gt;instanceof\u0026lt;/code\u0026gt; tells us.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(a, b);\n\na --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;me\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; { ... }\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Nested\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;\n    }\n}\n\nb --\u0026amp;gt; F {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;me\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt; { ... }\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Nested\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; a, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; b);\n\na --\u0026amp;gt; object\nb --\u0026amp;gt; object\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(a \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;, b \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;);\n\na --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;\nb --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(a \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; F, b \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; F);\n\na --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;\nb --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Same problem as the \u0026lt;em\u0026gt;native solution\u0026lt;/em\u0026gt;, but a little bit worse output.\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;the better (but not perfect) solution\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;When digging around, I found a similar question (\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/10728412/in-javascript-when-performing-a-deep-copy-how-do-i-avoid-a-cycle-due-to-a-pro\u0026quot;\u0026gt;In Javascript, when performing a deep copy, how do I avoid a cycle, due to a property being \u0026quot;this\u0026quot;?\u0026lt;/a\u0026gt;) to this one, but with a way better solution.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDR\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; gdcc = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;__getDeepCircularCopy__\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (o !== \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;(o)) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; o; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// primitive value\u0026lt;/span\u0026gt;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; set = gdcc \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; o,\n        cache = o[gdcc],\n        result;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (set \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; cache == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;function\u0026quot;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cache\u0026lt;/span\u0026gt;();\n    }\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// else\u0026lt;/span\u0026gt;\n    o[gdcc] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; result; }; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// overwrite\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (o \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) {\n        result = [];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i\u0026amp;lt;o.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i++) {\n            result[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDR\u0026lt;/span\u0026gt;(o[i]);\n        }\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        result = {};\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; prop \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; o)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (prop != gdcc)\n                result[prop] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDR\u0026lt;/span\u0026gt;(o[prop]);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (set)\n                result[prop] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDR\u0026lt;/span\u0026gt;(cache);\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (set) {\n        o[gdcc] = cache; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// reset\u0026lt;/span\u0026gt;\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; o[gdcc]; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// unset again\u0026lt;/span\u0026gt;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; result;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; b = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDR\u0026lt;/span\u0026gt;(a);\n\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\nb.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And let\u0026apos;s have a look at the output...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(a, b);\n\na --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;me\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; { ... }\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;\n    }\n}\n\nb --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;me\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; { ... }\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nested\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; a, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; b);\n\na --\u0026amp;gt; object\nb --\u0026amp;gt; object\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(a \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;, b \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;);\n\na --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;\nb --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(a \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; F, b \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; F);\n\na --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;\nb --\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The requirements are matched, but there are still some smaller issues, including changing the \u0026lt;code\u0026gt;instance\u0026lt;/code\u0026gt; of \u0026lt;code\u0026gt;nested\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;circ\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;Object\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;The structure of trees that share a leaf won\u0026apos;t be copied, they will become two independent leaves:\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;        [\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;]                     [\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;]\n         /    \\                       /    \\\n        /      \\                     /      \\\n      |\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/_      _\\|                 |/\u0026lt;/span\u0026gt;_      _\\|  \n  [\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;]    [\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;]   ===\u0026amp;gt;  [\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;]    [\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;]\n       \\        /                 |           |\n        \\      /                  |           |\n        _\\|  |\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/_                 \\|/\u0026lt;/span\u0026gt;         \\|/\n        [\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;]               [\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;]    [\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h2\u0026gt;conclusion\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;The last solution using recursion and a cache, may not be the best, but it\u0026apos;s a \u0026lt;strong\u0026gt;real\u0026lt;/strong\u0026gt; deep-copy of the object. It handles simple \u0026lt;code\u0026gt;properties\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;circular structures\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;nested object\u0026lt;/code\u0026gt;, but it will mess up the instance of them while cloning.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://jsfiddle.net/einfallstoll/N4mr2/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;jsfiddle\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you\u0026apos;re okay with a shallow copy, the underscore.js library has a \u0026lt;a href=\u0026quot;http://underscorejs.org/#clone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;clone\u0026lt;/a\u0026gt; method.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;y = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(x);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or you can extend it like\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;copiedObject = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;({},originalObject);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;OK,\u0026lt;/strong\u0026gt; imagine you have this object below and you want to clone it:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;}; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//ES6\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;}; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//ES5\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;the answer is mainly depeneds on which \u0026lt;strong\u0026gt;ECMAscript\u0026lt;/strong\u0026gt; you using, in \u0026lt;code\u0026gt;ES6+\u0026lt;/code\u0026gt;, you can simply use \u0026lt;code\u0026gt;Object.assign\u0026lt;/code\u0026gt; to do the clone:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; cloned = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, obj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//new {a:1, b:2, c:3};\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or using spread operator like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; cloned = {...obj}; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//new {a:1, b:2, c:3};\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;But if you using \u0026lt;code\u0026gt;ES5\u0026lt;/code\u0026gt;, you can use few methods, but the \u0026lt;code\u0026gt;JSON.stringify\u0026lt;/code\u0026gt;, just make sure you not using for a big chunk of data to copy, but it could be one line handy way in many cases, something like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; cloned = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj)); \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//new {a:1, b:2, c:3};, can be handy, but avoid using on big chunk of data over and over\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;Update 06 July 2020\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;There are three (3) ways to clone objects in JavaScript. As objects in JavaScript are reference values, you can\u0026apos;t simply just copy using the =.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The ways are:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; food = { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;food\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;apple\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;drink\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;milk\u0026apos;\u0026lt;/span\u0026gt; }\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 1. Using the \u0026quot;Spread\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ------------------\u0026lt;/span\u0026gt;\n\n{ ...food }\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 2. Using \u0026quot;Object.assign\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ------------------\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, food)\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 3. \u0026quot;JSON\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ------------------\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(food))\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// RESULT:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { food: \u0026apos;apple\u0026apos;, drink: \u0026apos;milk\u0026apos; }\u0026lt;/span\u0026gt;\n\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This can be used as a reference summary.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;One particularly inelegant solution is to use JSON encoding to make deep copies of objects that do not have member methods. The methodology is to JSON encode your target object, then by decoding it, you get the copy you are looking for.  You can decode as many times as you want to make as many copies as you need.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Of course, functions do not belong in JSON, so this only works for objects without member methods.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This methodology was perfect for my use case, since I\u0026apos;m storing JSON blobs in a key-value store, and when they are exposed as objects in a JavaScript API, each object actually contains a copy of the original state of the object so we can calculate the delta after the caller has mutated the exposed object.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; object1 = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value\u0026quot;\u0026lt;/span\u0026gt;};\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; object2 = object1;\n\nobject2 = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(object1);\nobject2 = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(object2);\n\nobject2.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a change\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(object1);\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// returns value\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can simply use a \u0026lt;a href=\u0026quot;https://github.com/sebmarkbage/ecmascript-rest-spread/blob/master/Spread.md\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;spread property\u0026lt;/a\u0026gt; to copy an object without references. But be careful (see comments), the \u0026apos;copy\u0026apos; is just on the lowest object/array level. Nested properties are still references!\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Complete clone:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; x = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;value1\u0026apos;\u0026lt;/span\u0026gt;}\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; x2 = {...x}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// =\u0026amp;gt; mutate without references:\u0026lt;/span\u0026gt;\n\nx2.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;value2\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(x.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;)    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// =\u0026amp;gt; \u0026apos;value1\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Clone with references on second level:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; y = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;value3\u0026apos;\u0026lt;/span\u0026gt;}}\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; y2 = {...y}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// =\u0026amp;gt; nested object is still a references:\u0026lt;/span\u0026gt;\n\ny2.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;value4\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(y.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;)    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// =\u0026amp;gt; \u0026apos;value4\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;JavaScript actually does not support deep clones natively. Use an utility function. For example Ramda:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://ramdajs.com/docs/#clone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://ramdajs.com/docs/#clone\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; objClone = { ...obj };\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Be aware that \u0026lt;strong\u0026gt;nested objects\u0026lt;/strong\u0026gt; are still copied \u0026lt;strong\u0026gt;as a reference.\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;From this article: \u0026lt;a href=\u0026quot;https://greywyvern.com/?post=363\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;How to copy arrays and objects in Javascript\u0026lt;/a\u0026gt; by Brian Huisman:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObj = (\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) ? [] : {};\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (i == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;clone\u0026apos;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;continue\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[i] \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[i] == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt;) {\n      newObj[i] = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[i].\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;();\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; newObj[i] = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[i]\n  } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; newObj;\n};\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For those using AngularJS, there is also direct method for cloning or extending of the objects in this library.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; destination = angular.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copy\u0026lt;/span\u0026gt;(source);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;angular.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copy\u0026lt;/span\u0026gt;(source, destination);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;More in angular.copy \u0026lt;a href=\u0026quot;https://docs.angularjs.org/api/ng/function/angular.copy\u0026quot;\u0026gt;documentation\u0026lt;/a\u0026gt;...\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(obj == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt;(obj) != \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;object\u0026apos;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; temp = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;); \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj)\n        temp[key] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj[key]);    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; temp;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;A.Levy\u0026apos;s answer is almost complete, here is my little contribution: \u0026lt;strong\u0026gt;there is a way how to handle recursive references\u0026lt;/strong\u0026gt;, see this line\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;if(this[attr]==this) copy[attr] = copy;\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If the object is XML DOM element, we must use \u0026lt;strong\u0026gt;cloneNode\u0026lt;/strong\u0026gt; instead\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;if(this.cloneNode) return this.cloneNode(true);\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Inspired by A.Levy\u0026apos;s exhaustive study and Calvin\u0026apos;s prototyping approach, I offer this solution:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;cloneNode\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneNode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt; ? [] : {};\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; attr \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[attr] == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;function\u0026quot;\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[attr]==\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; || !\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[attr].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;)\n      copy[attr] = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[attr];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[attr]==\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;) copy[attr] = copy;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; copy[attr] = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[attr].\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;();\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n}\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;();\n  copy.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setTime\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getTime\u0026lt;/span\u0026gt;());\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n}\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Number\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt; = \n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Boolean\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt; =\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;See also Andy Burke\u0026apos;s note in the answers.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h1\u0026gt;Performance\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;Today 2020.04.30 I perform tests of chosen solutions on Chrome v81.0, Safari v13.1 and Firefox v75.0 on MacOs High Sierra v10.13.6. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I focus on speed of copy DATA (object with simple type fields, not methods etc.). The solutions A-I can make only shallow copy, solutions J-U can make deep copy.\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;Results for shallow copy\u0026lt;/h3\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;solution \u0026lt;code\u0026gt;{...obj}\u0026lt;/code\u0026gt; (A) is fastest on chrome and firefox and medium fast on safari\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;solution based on \u0026lt;code\u0026gt;Object.assign\u0026lt;/code\u0026gt; (B) is fast on all browsers\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;jQuery (E) and lodash (F,G,H) solutions are medium/quite fast\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;solution \u0026lt;code\u0026gt;JSON.parse/stringify\u0026lt;/code\u0026gt; (K) is quite slow\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;solutions D and U are slow on all browsers\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/mCte1.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/mCte1.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;Results for deep copy\u0026lt;/h3\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;solution Q is fastest on all browsers\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;jQuery (L) and lodash (J) are medium fast\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;solution \u0026lt;code\u0026gt;JSON.parse/stringify\u0026lt;/code\u0026gt; (K) is quite slow\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;solution U is slowest on all browsers\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;lodash (J) and solution U crash on Chrome for 1000 level deep object\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/KxBqv.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/KxBqv.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;Details\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;For choosen solutions: \n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/44950864/860099\u0026quot;\u0026gt;A\u0026lt;/a\u0026gt; \n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/30042948/860099\u0026quot;\u0026gt;B\u0026lt;/a\u0026gt;\nC(my)\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/49497485/860099\u0026quot;\u0026gt;D\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/5164215/860099\u0026quot;\u0026gt;E\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/11024936/860099\u0026quot;\u0026gt;F\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/13850856/860099\u0026quot;\u0026gt;G\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/11024936/860099\u0026quot;\u0026gt;H\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/728694/860099\u0026quot;\u0026gt;I\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/57504513/860099\u0026quot;\u0026gt;J\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/10869248/860099\u0026quot;\u0026gt;K\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/5164215/860099\u0026quot;\u0026gt;L\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/728400/860099\u0026quot;\u0026gt;M\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/728395/860099\u0026quot;\u0026gt;N\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/1042676/860099\u0026quot;\u0026gt;O\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/33273256/860099\u0026quot;\u0026gt;P\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/24648941/860099\u0026quot;\u0026gt;Q\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/24648941/860099\u0026quot;\u0026gt;R\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/39029912/860099\u0026quot;\u0026gt;S\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/11462081/860099\u0026quot;\u0026gt;T\u0026lt;/a\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/53737490/860099\u0026quot;\u0026gt;U\u0026lt;/a\u0026gt;,\n I perform 4 tests\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;shallow-small: object with 10 non-nested fields - you can run it \u0026lt;a href=\u0026quot;https://jsbench.me/0xk9l5ci9x/1\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HERE\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;shallow-big: object with 1000 non-nested fields - you can run it \u0026lt;a href=\u0026quot;https://jsbench.me/t0k9l64319/1\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HERE\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;deep-small: object with 10 levels-nested fields - you can run it \u0026lt;a href=\u0026quot;https://jsbench.me/pvk9l6pzfj/1\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HERE\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;deep-big: object with 1000 levels-nested fields - you can run it \u0026lt;a href=\u0026quot;https://jsbench.me/euk9l6x9jx/1\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HERE\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;Objects used in tests are show in below snippet\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;true\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-display\u0026quot; style=\u0026quot;vertical-align: center\u0026quot;\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link-chevron\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;expander-arrow-hide\u0026quot; style=\u0026quot;vertical-align: middle;\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;show-hide\u0026quot; data-ishidden=\u0026quot;true\u0026quot; style=\u0026quot;vertical-align: middle\u0026quot;\u0026gt;Show code snippet\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code snippet-currently-hidden\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj_ShallowSmall = {\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;field0\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;field1\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;field2\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;field3\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;field4\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;field5\u0026lt;/span\u0026gt;: [],\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;field6\u0026lt;/span\u0026gt;: {},\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;field7\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text7\u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;field8\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text8\u0026quot;\u0026lt;/span\u0026gt;,\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj_DeepSmall = {\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;level0\u0026lt;/span\u0026gt;: {\n   \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;level1\u0026lt;/span\u0026gt;: {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;level2\u0026lt;/span\u0026gt;: {\n     \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;level3\u0026lt;/span\u0026gt;: {\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;level4\u0026lt;/span\u0026gt;: {\n       \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;level5\u0026lt;/span\u0026gt;: {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;level6\u0026lt;/span\u0026gt;: {\n         \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;level7\u0026lt;/span\u0026gt;: {\n          \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;level8\u0026lt;/span\u0026gt;: {\n           \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;level9\u0026lt;/span\u0026gt;: [[[[[[[[[[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;abc\u0026apos;\u0026lt;/span\u0026gt;]]]]]]]]]],\n  }}}}}}}}},\n};\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj_ShallowBig = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fill\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;reduce\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;a,c,i\u0026lt;/span\u0026gt;) =\u0026amp;gt;\u0026lt;/span\u0026gt; (a[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;field\u0026apos;\u0026lt;/span\u0026gt;+i]=\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getField\u0026lt;/span\u0026gt;(i),a) ,{});\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj_DeepBig = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;genDeepObject\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;);\n\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Show objects\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ------------------\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;obj_ShallowSmall:\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj_ShallowSmall));\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;obj_DeepSmall:\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj_DeepSmall));\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;obj_ShallowBig:\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj_ShallowBig));\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;obj_DeepBig:\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj_DeepBig));\n\n\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// HELPERS\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ------------------\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getField\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;k\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; i=k%\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(i==\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(i==\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(i==\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; k;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(i==\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(i==\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(i==\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; [];\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(i==\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; {};  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(i\u0026amp;gt;=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text\u0026quot;\u0026lt;/span\u0026gt;+k;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;genDeepObject\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;N\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// generate: {level0:{level1:{...levelN: {end:[[[...N-times...[\u0026apos;abc\u0026apos;]...]]] }}}...}}}\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj={};\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; o=obj;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr = [];\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; a=arr;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i\u0026amp;lt;N; i++) {\n    o[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;level\u0026apos;\u0026lt;/span\u0026gt;+i]={};\n    o=o[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;level\u0026apos;\u0026lt;/span\u0026gt;+i];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; aa=[];\n    a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(aa);\n    a=aa;\n  }\n\n  a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;abc\u0026apos;\u0026lt;/span\u0026gt;;\n  o[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;end\u0026apos;\u0026lt;/span\u0026gt;]=arr;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n}\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif2\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Below snippet presents tested solutions and shows differences between them\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;true\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-display\u0026quot; style=\u0026quot;vertical-align: center\u0026quot;\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link-chevron\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;expander-arrow-hide\u0026quot; style=\u0026quot;vertical-align: middle;\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;show-hide\u0026quot; data-ishidden=\u0026quot;true\u0026quot; style=\u0026quot;vertical-align: middle\u0026quot;\u0026gt;Show code snippet\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code snippet-currently-hidden\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;A\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; {...obj}\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;B\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, obj); \n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;C\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;keys\u0026lt;/span\u0026gt;(obj).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;reduce\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;a,c\u0026lt;/span\u0026gt;) =\u0026amp;gt;\u0026lt;/span\u0026gt; (a[c]=obj[c], a), {})\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;D\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; copyOfObject = {};\n  \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProperties\u0026lt;/span\u0026gt;(copyOfObject, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptors\u0026lt;/span\u0026gt;(obj));\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copyOfObject;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;E\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; jQuery.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;({}, obj) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// shallow\u0026lt;/span\u0026gt;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;F\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj);\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;G\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj,\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;H\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;({},obj);\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;I\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; == obj || \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; attr \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(attr)) copy[attr] = obj[attr];\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;J\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDeep\u0026lt;/span\u0026gt;(obj,\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;K\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n\t\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj));\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; jQuery.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, {}, obj) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// deep\u0026lt;/span\u0026gt;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;M\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(obj == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt;(obj) != \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;object\u0026apos;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;    \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; temp = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;); \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj)\n    temp[key] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;M\u0026lt;/span\u0026gt;(obj[key]);    \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; temp;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;N\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;EClone\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObj = (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) ? [] : {};\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (i == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;EClone\u0026apos;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;continue\u0026lt;/span\u0026gt;;\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj[i] \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj[i] == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt;) {\n        newObj[i] = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;EClone\u0026lt;/span\u0026gt;(obj[i]);\n      } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; newObj[i] = obj[i]\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; newObj;\n  };\n\n\t\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;EClone\u0026lt;/span\u0026gt;(obj);\n};\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;O\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj != \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt; || obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt; || obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Function\u0026lt;/span\u0026gt; ||\n        obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; || obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Number\u0026lt;/span\u0026gt; || obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Boolean\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; to = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; name \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj)\n    {\n        to[name] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; to[name] == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;undefined\u0026quot;\u0026lt;/span\u0026gt; ? \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;O\u0026lt;/span\u0026gt;(obj[name], \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) : to[name];\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; to;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;P\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;target, source\u0026lt;/span\u0026gt;){\n\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; source){\n\n          \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Use getOwnPropertyDescriptor instead of source[key] to prevent from trigering setter/getter.\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; descriptor = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptor\u0026lt;/span\u0026gt;(source, key);\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;){\n              target[key] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;);\n          }\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;){\n              target[key] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;([], descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;);\n          }\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;){\n              \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; prototype = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPrototypeOf\u0026lt;/span\u0026gt;(descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;);\n              \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; cloneObject = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;({}, descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;);\n              \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setPrototypeOf\u0026lt;/span\u0026gt;(cloneObject, prototype);\n              target[key] = cloneObject;\n          }\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n              \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProperty\u0026lt;/span\u0026gt;(target, key, descriptor);\n          }\n      }\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; prototype = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPrototypeOf\u0026lt;/span\u0026gt;(source);\n      \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setPrototypeOf\u0026lt;/span\u0026gt;(target, prototype);\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; target;\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;({},obj);\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Q\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle the 3 simple types, and null or undefined\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; == obj || \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Date\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;) {\n        copy = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;();\n        copy.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setTime\u0026lt;/span\u0026gt;(obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getTime\u0026lt;/span\u0026gt;());\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Array\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) {\n        copy = [];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, len = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i \u0026amp;lt; len; i++) {\n            copy[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Q\u0026lt;/span\u0026gt;(obj[i]);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Object\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;) {\n        copy = {};\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; attr \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(attr)) copy[attr] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Q\u0026lt;/span\u0026gt;(obj[attr]);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Error\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Unable to copy obj! Its type isn\u0026apos;t supported.\u0026quot;\u0026lt;/span\u0026gt;);\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; gdcc = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;__getDeepCircularCopy__\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj !== \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;(obj)) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// primitive value\u0026lt;/span\u0026gt;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; set = gdcc \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj,\n        cache = obj[gdcc],\n        result;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (set \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; cache == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;function\u0026quot;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cache\u0026lt;/span\u0026gt;();\n    }\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// else\u0026lt;/span\u0026gt;\n    obj[gdcc] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; result; }; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// overwrite\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) {\n        result = [];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i\u0026amp;lt;obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i++) {\n            result[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;(obj[i]);\n        }\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        result = {};\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; prop \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (prop != gdcc)\n                result[prop] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;(obj[prop]);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (set)\n                result[prop] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;(cache);\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (set) {\n        obj[gdcc] = cache; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// reset\u0026lt;/span\u0026gt;\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; obj[gdcc]; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// unset again\u0026lt;/span\u0026gt;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; result;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;S\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; cache = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;WeakMap\u0026lt;/span\u0026gt;(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Map of old - new references\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copy\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; object !== \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;object\u0026apos;\u0026lt;/span\u0026gt; ||\n            object === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; ||\n            object \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HTMLElement\u0026lt;/span\u0026gt;\n        )\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; object; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// primitive value or HTMLElement\u0026lt;/span\u0026gt;\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (object \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;) \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setTime\u0026lt;/span\u0026gt;(object.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getTime\u0026lt;/span\u0026gt;());\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (object \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;) \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(object.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;source\u0026lt;/span\u0026gt;, object.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;flags\u0026lt;/span\u0026gt;);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (cache.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;has\u0026lt;/span\u0026gt;(object)) \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; cache.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(object);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; result = object \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt; ? [] : {};\n\n        cache.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(object, result); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// store reference to object before the recursive starts\u0026lt;/span\u0026gt;\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (object \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; o \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;of\u0026lt;/span\u0026gt; object) {\n                 result.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copy\u0026lt;/span\u0026gt;(o));\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; result;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; keys = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;keys\u0026lt;/span\u0026gt;(object); \n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;of\u0026lt;/span\u0026gt; keys)\n            result[key] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copy\u0026lt;/span\u0026gt;(object[key]);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; result;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copy\u0026lt;/span\u0026gt;(obj);\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;T\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; clonedObjectsArray = [];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; originalObjectsArray = []; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//used to remove the unique ids when finished\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; next_objid = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;objectId\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;__obj_id\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;){\n            obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;__obj_id\u0026lt;/span\u0026gt; = next_objid++;\n            originalObjectsArray[obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;__obj_id\u0026lt;/span\u0026gt;] = obj;\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;__obj_id\u0026lt;/span\u0026gt;;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneRecursive\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; == obj || \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;string\u0026quot;\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;number\u0026quot;\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;boolean\u0026quot;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Date\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;();\n            copy.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setTime\u0026lt;/span\u0026gt;(obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getTime\u0026lt;/span\u0026gt;());\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Array\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = [];\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; ++i) {\n                copy[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneRecursive\u0026lt;/span\u0026gt;(obj[i]);\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Handle Object\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (clonedObjectsArray[\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;objectId\u0026lt;/span\u0026gt;(obj)] != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;)\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; clonedObjectsArray[\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;objectId\u0026lt;/span\u0026gt;(obj)];\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Function\u0026lt;/span\u0026gt;)\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Handle Function\u0026lt;/span\u0026gt;\n                copy = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;){\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;apply\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;arguments\u0026lt;/span\u0026gt;);};\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n                copy = {};\n\n            clonedObjectsArray[\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;objectId\u0026lt;/span\u0026gt;(obj)] = copy;\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; attr \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj)\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (attr != \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;__obj_id\u0026quot;\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(attr))\n                    copy[attr] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneRecursive\u0026lt;/span\u0026gt;(obj[attr]);                 \n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n        }       \n\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Error\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Unable to copy obj! Its type isn\u0026apos;t supported.\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; cloneObj = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneRecursive\u0026lt;/span\u0026gt;(obj);\n\n\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//remove the unique ids\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; originalObjectsArray.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i++)\n    {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; originalObjectsArray[i].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;__obj_id\u0026lt;/span\u0026gt;;\n    };\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; cloneObj;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;U\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n    Deep copy objects by value rather than by reference,\n    exception: `Proxy`\n  */\u0026lt;/span\u0026gt;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; seen = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;WeakMap\u0026lt;/span\u0026gt;()\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj)\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;object, key, descriptor = {}, copyFrom = {}\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;configurable\u0026lt;/span\u0026gt;: _configurable, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;writable\u0026lt;/span\u0026gt;: _writable }\n      = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptor\u0026lt;/span\u0026gt;(object, key)\n      || { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;configurable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;writable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt; }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; test = _configurable \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Can redefine property\u0026lt;/span\u0026gt;\n      \u0026amp;amp;\u0026amp;amp; (_writable === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt; || _writable) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Can assign to property\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!test || \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;arguments\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt; \u0026amp;lt;= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; test\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; basisDesc = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptor\u0026lt;/span\u0026gt;(copyFrom, key)\n      || { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;configurable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;writable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt; } \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Custom\u0026lt;/span\u0026gt;\n      || {}; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// or left to native default settings\u0026lt;/span\u0026gt;\n\n    [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;get\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;set\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;writable\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;enumerable\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;configurable\u0026quot;\u0026lt;/span\u0026gt;]\n      .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;forEach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;attr\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt;\n        descriptor[attr] === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp;\n        (descriptor[attr] = basisDesc[attr])\n      )\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; { get, set, value, writable, enumerable, configurable }\n      = descriptor\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProperty\u0026lt;/span\u0026gt;(object, key, {\n      enumerable, configurable, ...get || set\n        ? { get, set } \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Accessor descriptor\u0026lt;/span\u0026gt;\n        : { value, writable } \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Data descriptor\u0026lt;/span\u0026gt;\n    })\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (object !== \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;(object)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; object \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n     Check if the object belongs to a primitive data type */\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (object \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Node\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; object.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneNode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n     Clone DOM trees */\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; _object \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// The clone of object\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;switch\u0026lt;/span\u0026gt; (object.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;) {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;:\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;:\n        _object = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(object)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;:\n        _object = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(+object)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Function\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; fnStr = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(object)\n\n        _object = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;return \u0026quot;\u0026lt;/span\u0026gt; +\n          (\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/^(?!function |[^{]+?=\u0026amp;gt;)[^(]+?\\(/\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(fnStr)\n            ? \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;function \u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n          ) + fnStr\n        )()\n\n        \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copyPropDescs\u0026lt;/span\u0026gt;(_object, object)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;:\n        _object = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(object)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;default\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;switch\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;toString\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(object.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;)) {\n          \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//                              // Stem from:\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[object Function]\u0026quot;\u0026lt;/span\u0026gt;:       \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// `class`\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[object Undefined]\u0026quot;\u0026lt;/span\u0026gt;:      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// `Object.create(null)`\u0026lt;/span\u0026gt;\n            _object = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(object)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n          \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;default\u0026lt;/span\u0026gt;:                        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// `Proxy`\u0026lt;/span\u0026gt;\n            _object = object\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _object\n  }\n\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (seen.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;has\u0026lt;/span\u0026gt;(object)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; seen.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(object) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n     Handle recursive references (circular structures) */\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; _object = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isArray\u0026lt;/span\u0026gt;(object)\n      ? []\n      : \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPrototypeOf\u0026lt;/span\u0026gt;(object)) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n         Assign [[Prototype]] for inheritance */\u0026lt;/span\u0026gt;\n\n    seen.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(object, _object) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n     Make `_object` the associative mirror of `object` */\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ownKeys\u0026lt;/span\u0026gt;(object).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;forEach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProp\u0026lt;/span\u0026gt;(_object, key, { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(object[key]) }, object)\n    )\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _object\n  }\n\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copyPropDescs\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;target, source\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProperties\u0026lt;/span\u0026gt;(target,\n      \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptors\u0026lt;/span\u0026gt;(source)\n    )\n  }\n}\n \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Test properties\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ------------------------\u0026lt;/span\u0026gt;\n\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`  shallow deep  func  circ  undefined date  RegExp bigInt`\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(A);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(B);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(C);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(D);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(E);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(F);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(G);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(H);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(I);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(J);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(K);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(L);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(M);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(N);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(O);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(P);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(Q);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(R);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(S);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(T);\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(U);\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`  shallow deep  func  circ  undefined date  RegExp bigInt\n----\nLEGEND:\nshallow - solution create shallow copy\ndeep - solution create deep copy\nfunc - solution copy functions\ncirc - solution can copy object with circular references\nundefined - solution copy fields with undefined value\ndate - solution can copy date\nRegExp - solution can copy fields with regular expressions\nbigInt - solution can copy BigInt\n`\u0026lt;/span\u0026gt;)\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Helper functions\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ------------------------\u0026lt;/span\u0026gt;\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCompare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj1,obj2\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj1)===\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj2);\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getCase\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// pure data case\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; { \n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;undef\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;txt1\u0026quot;\u0026lt;/span\u0026gt;,    \n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e1\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e2\u0026lt;/span\u0026gt;: [], \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e3\u0026lt;/span\u0026gt;: {}, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e4\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e5\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;: [ \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;txt3\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, [], {},\n      [ \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;txt5\u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, [], {},  [\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;txt7\u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;,[],{} ], \n        {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;txt9\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e1\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e2\u0026lt;/span\u0026gt;:[] ,\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e3\u0026lt;/span\u0026gt;:{} ,\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e4\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e5\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;}\n      ],\n        {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;txt11\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e1\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e2\u0026lt;/span\u0026gt;:[] ,\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e3\u0026lt;/span\u0026gt;:{} ,\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e4\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e5\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;}\n    ], \n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;: { \n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;txt13\u0026quot;\u0026lt;/span\u0026gt;,\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e1\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e2\u0026lt;/span\u0026gt;: [], \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e3\u0026lt;/span\u0026gt;: {}, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e4\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e5\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;,\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;txt15\u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;,[],{} ],\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;: { \n          \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;txt17\u0026quot;\u0026lt;/span\u0026gt;,\n          \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e1\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e2\u0026lt;/span\u0026gt;: [], \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e3\u0026lt;/span\u0026gt;: {}, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e4\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e5\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;,\n          \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;18\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;txt19\u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;,[],{} ],\n          \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;: {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;txt21\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e1\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e2\u0026lt;/span\u0026gt;:[] ,\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e3\u0026lt;/span\u0026gt;:{} ,\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e4\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e5\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;}\n      } \n    } \n  };\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;check\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;org, copy, field, newValue\u0026lt;/span\u0026gt;) {\n  copy[field] = newValue;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCompare\u0026lt;/span\u0026gt;(org,copy); \n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testFunc\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;) {\n\t\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; o = { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;fun\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;i,j\u0026lt;/span\u0026gt;)=\u0026amp;gt;\u0026lt;/span\u0026gt; i+j };\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; c = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;(o);\n  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; val = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;{\n    val = c.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fun\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;)==\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;;\n  } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(e) { }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; val;\n} \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testCirc\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;) {\n\t\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;me\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;;\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; o = {\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;,\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Circ\u0026lt;/span\u0026gt;(),\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;obj_circ\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;,\n  };\n  \n  o.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;obj_circ\u0026lt;/span\u0026gt; = o;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; val = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; c = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;(o);  \n    val = (o.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;obj_circ\u0026lt;/span\u0026gt; == o) \u0026amp;amp;\u0026amp;amp; (o.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt; == o.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;circ\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;me\u0026lt;/span\u0026gt;);\n  } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(e) { }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; val;\n} \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testRegExp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; o = {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;re\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/a[0-9]+/\u0026lt;/span\u0026gt;,\n  };\n  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; val = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; c = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;(o);  \n    val = (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(c.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;re\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/a[0-9]+/\u0026lt;/span\u0026gt;));\n  } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(e) { }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; val;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testDate\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; o = {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(),\n  };\n  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; val = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; c = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;(o);  \n    val = (+\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(c.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;) == +\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(o.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;));\n  } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(e) { }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; val;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testBigInt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; val = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; o = {\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;big\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123n\u0026lt;/span\u0026gt;,\n    };\n  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; c = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;(o);  \n  \n    val = o.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;big\u0026lt;/span\u0026gt; == c.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;big\u0026lt;/span\u0026gt;;\n  } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(e) { }\n  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; val;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; o = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getCase\u0026lt;/span\u0026gt;();  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// orginal object\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; oB = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getCase\u0026lt;/span\u0026gt;(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// \u0026quot;backup\u0026quot; used for shallow valid test\u0026lt;/span\u0026gt;\n  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; c1 = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;(o); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// copy 1 for reference\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; c2 = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;(o); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// copy 2 for test shallow values\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; c3 = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;(o); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// copy 3 for test deep values\u0026lt;/span\u0026gt;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; is_proper_copy = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCompare\u0026lt;/span\u0026gt;(c1,o);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// shoud be true\u0026lt;/span\u0026gt;\n  \n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// shallow changes\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; testShallow = \n    [ [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;bool\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;],[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;num\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;666\u0026lt;/span\u0026gt;],[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;str\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;xyz\u0026apos;\u0026lt;/span\u0026gt;],[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;arr\u0026apos;\u0026lt;/span\u0026gt;,[]],[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;obj\u0026apos;\u0026lt;/span\u0026gt;,{}] ]\n    .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;reduce\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;acc,curr\u0026lt;/span\u0026gt;)=\u0026amp;gt;\u0026lt;/span\u0026gt; acc \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;check\u0026lt;/span\u0026gt;(c1,c2,curr[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;], curr[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]), \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt; );\n  \n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// should be true (original object shoud not have changed shallow fields)\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; is_valid = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCompare\u0026lt;/span\u0026gt;(o,oB); \n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// deep test (intruduce some change)\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (c3.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]) c3.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;777\u0026lt;/span\u0026gt;;\n  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; diff_shallow = !testShallow; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// shoud be true (shallow field was copied)\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; diff_deep = !\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCompare\u0026lt;/span\u0026gt;(c1,c3);    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// shoud be true (deep field was copied)\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; can_copy_functions = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testFunc\u0026lt;/span\u0026gt;(f);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; can_copy_circular = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testCirc\u0026lt;/span\u0026gt;(f);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; can_copy_regexp = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testRegExp\u0026lt;/span\u0026gt;(f);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; can_copy_date = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testDate\u0026lt;/span\u0026gt;(f);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; can_copy_bigInt = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testBigInt\u0026lt;/span\u0026gt;(f);\n  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; has_undefined = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;undef\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; c1; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// field with undefined value is copied?  \u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; is_ok = is_valid \u0026amp;amp;\u0026amp;amp; is_proper_copy;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;=(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt;) =\u0026amp;gt; (bool+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;padEnd\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; \u0026apos;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// bool value to formated string\u0026lt;/span\u0026gt;\n  \n  \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testFunc\u0026lt;/span\u0026gt;(f);\n  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(is_ok) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${f.name}\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${b(diff_shallow)}\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${b(diff_deep)}\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${b(can_copy_functions)}\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${b(can_copy_circular)}\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${b(has_undefined)}\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${b(can_copy_date)}\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${b(can_copy_regexp)}\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${b(can_copy_bigInt)}\u0026lt;/span\u0026gt;`\u0026lt;/span\u0026gt;)\n  } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${f.name}\u0026lt;/span\u0026gt;: INVALID \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${is_valid}\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${is_proper_copy}\u0026lt;/span\u0026gt;`\u0026lt;/span\u0026gt;,{c1})\n  }\n  \n}\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-html lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;src\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;https://code.jquery.com/jquery-3.5.0.min.js\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;integrity\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;crossorigin\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;anonymous\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;src\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\nThis snippet only presents tested solutions and show differences between them (but it no make performence tests)\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif3\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Below there are example results for Chrome for shallow-big object\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/zluC1.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/zluC1.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Using Lodash: \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; y = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(x, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In ES-6 you can simply use Object.assign(...).\nEx:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;person\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Thor Odinson\u0026apos;\u0026lt;/span\u0026gt;};\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, obj);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;A good reference is here:\n\u0026lt;a href=\u0026quot;https://googlechrome.github.io/samples/object-assign-es6/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://googlechrome.github.io/samples/object-assign-es6/\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Interested in cloning simple objects:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;JSON.parse(JSON.stringify(json_original));\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Source : \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/18359093/how-to-copy-javascript-object-to-new-variable-not-by-reference?answertab=votes#tab-top\u0026quot;\u0026gt;How to copy JavaScript object to new variable NOT by reference?\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can clone an object and remove any reference from the previous one using a single line of code. Simply do:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj1 = { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;text\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;moo1\u0026apos;\u0026lt;/span\u0026gt; };\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj2 = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt;(obj1); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Creates a new clone without references\u0026lt;/span\u0026gt;\n\nobj2.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;text\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;moo2\u0026apos;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Only updates obj2\u0026apos;s text property\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(obj1, obj2); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Outputs: obj1: {text:\u0026apos;moo1\u0026apos;}, obj2: {text:\u0026apos;moo2\u0026apos;}\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;For browsers / engines that do not currently support Object.create you can use this polyfill:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Polyfill Object.create if it does not exist\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; F = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {};\n        F.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; = o;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;F\u0026lt;/span\u0026gt;();\n    };\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPrototypeOf\u0026lt;/span\u0026gt;(obj)), obj)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;ES6 solution if you want to (shallow) clone a \u0026lt;strong\u0026gt;class instance\u0026lt;/strong\u0026gt; and not just a property object.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;New answer to an old question!  If you have the pleasure of having using ECMAScript 2016 (ES6) with \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Spread Syntax\u0026lt;/a\u0026gt;, it\u0026apos;s easy.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;keepMeTheSame = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;first\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Me!\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;second\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;You!\u0026quot;\u0026lt;/span\u0026gt;};\ncloned = {...keepMeTheSame}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This provides a clean method for a shallow copy of an object.  Making a deep copy, meaning makign a new copy of every value in every recursively nested object, requires on of the heavier solutions above.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;JavaScript keeps evolving.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I think there is a simple and working answer. In deep copying there are two concerns:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Keep properties independent to each other.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;And keep the methods alive on cloned object.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;So I think one simple solution will be to first serialize and deserialize and then do an assign on it to copy functions too.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; deepCloned = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(source));\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; merged = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, source);\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;(merged, deepCloned);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Although this question has many answers, I hope this one helps too.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For a deep copy and clone, JSON.stringify then JSON.parse the object:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;obj = { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt; , \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;}};\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; deepClone = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj));\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(deepClone)); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 0, b: { c: 0}}\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h1\u0026gt;Structured Cloning\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;2022 update:\u0026lt;/strong\u0026gt; The \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/structuredClone\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;structuredClone()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; global function is already available in Node 17, Deno 1.14, and most major browsers (see \u0026lt;a href=\u0026quot;https://caniuse.com/?search=structuredClone\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Can I Use\u0026lt;/a\u0026gt;).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You \u0026lt;em\u0026gt;can\u0026lt;/em\u0026gt; use the same structured clone mechanism that the HTML standard includes for sending data between realms.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt;(original);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;See \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/10916838/157247\u0026quot;\u0026gt;the other answer\u0026lt;/a\u0026gt; for more details.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;(The following was mainly an integration of @\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/39029912\u0026quot;\u0026gt;Maciej Bukowski\u0026lt;/a\u0026gt;, @\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/728694\u0026quot;\u0026gt;A. Levy\u0026lt;/a\u0026gt;, @\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/9023088\u0026quot;\u0026gt;Jan Turo\u0026lt;/a\u0026gt;, @\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/37503916\u0026quot;\u0026gt;Redu\u0026lt;/a\u0026gt;\u0026apos;s answers, and @\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/728360/how-do-i-correctly-clone-a-javascript-object/53737490#comment96229185_53737490\u0026quot;\u0026gt;LeviRoberts\u0026lt;/a\u0026gt;, @\u0026lt;a href=\u0026quot;https://stackoverflow.com/q/728360#comment42972840_9023088\u0026quot;\u0026gt;RobG\u0026lt;/a\u0026gt;\u0026apos;s comments, many thanks to them!!!)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Deep copy\u0026lt;/strong\u0026gt;?  YES! (mostly);\u0026lt;br\u0026gt;\n\u0026lt;strong\u0026gt;Shallow copy\u0026lt;/strong\u0026gt;?  NO! (except \u0026lt;code\u0026gt;Proxy\u0026lt;/code\u0026gt;).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I sincerely welcome everyone to test \u0026lt;code\u0026gt;clone()\u0026lt;/code\u0026gt;.\u0026lt;br\u0026gt;\nIn addition, \u0026lt;code\u0026gt;defineProp()\u0026lt;/code\u0026gt; is designed to easily and quickly \u0026lt;em\u0026gt;(re)define or copy\u0026lt;/em\u0026gt; any type of descriptor.\u0026lt;/p\u0026gt;\n\u0026lt;h1\u0026gt;Function\u0026lt;/h1\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n    Deep copy objects by value rather than by reference,\n    exception: `Proxy`\n  */\u0026lt;/span\u0026gt;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; seen = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;WeakMap\u0026lt;/span\u0026gt;()\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(object)\n\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (object !== \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;(object)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; object \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n     Check if the object belongs to a primitive data type */\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (object \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Node\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; object.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneNode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n     Clone DOM trees */\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; _object \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// The clone of object\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;switch\u0026lt;/span\u0026gt; (object.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;) {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;:\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;:\n        _object = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(object)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;:\n        _object = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(+object)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Function\u0026lt;/span\u0026gt;:\n        _object = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copyFn\u0026lt;/span\u0026gt;(object)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;:\n        _object = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(object)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;default\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;switch\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;toString\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(object.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;)) {\n          \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//                                  // Stem from:\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[object Function]\u0026quot;\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;switch\u0026lt;/span\u0026gt; (object[\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Symbol\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;toStringTag\u0026lt;/span\u0026gt;]) {\n              \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;:\n                _object = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(object) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// `class`\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n              \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;AsyncFunction\u0026quot;\u0026lt;/span\u0026gt;:\n              \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;GeneratorFunction\u0026quot;\u0026lt;/span\u0026gt;:\n              \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;AsyncGeneratorFunction\u0026quot;\u0026lt;/span\u0026gt;:\n                _object = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copyFn\u0026lt;/span\u0026gt;(object)\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n              \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;default\u0026lt;/span\u0026gt;:\n                _object = object\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[object Undefined]\u0026quot;\u0026lt;/span\u0026gt;:          \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// `Object.create(null)`\u0026lt;/span\u0026gt;\n            _object = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(object)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n          \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;default\u0026lt;/span\u0026gt;:\n            _object = object                  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// `Proxy`\u0026lt;/span\u0026gt;\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _object\n  }\n\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (seen.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;has\u0026lt;/span\u0026gt;(object)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; seen.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(object) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n     Handle recursive references (circular structures) */\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; _object = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isArray\u0026lt;/span\u0026gt;(object)\n      ? []\n      : \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPrototypeOf\u0026lt;/span\u0026gt;(object)) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n         Assign [[Prototype]] for inheritance */\u0026lt;/span\u0026gt;\n\n    seen.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(object, _object) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n     Make `_object` the associative mirror of `object` */\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ownKeys\u0026lt;/span\u0026gt;(object).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;forEach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProp\u0026lt;/span\u0026gt;(_object, key, { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(object[key]) }, object)\n    )\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _object\n  }\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copyPropDescs\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;target, source\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProperties\u0026lt;/span\u0026gt;(target,\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptors\u0026lt;/span\u0026gt;(source)\n  )\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;convertFnToStr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; fnStr = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(fn)\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (fn.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;startsWith\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[\u0026quot;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// isSymbolKey\u0026lt;/span\u0026gt;\n    fnStr = fnStr.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/\\[Symbol\\..+?\\]/\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;)\n  fnStr = \u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/^(?!(async )?(function\\b|[^{]+?=\u0026amp;gt;))[^(]+?\\(/\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(fnStr)\n    ? fnStr.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/^(async )?(\\*)?/\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;$1function$2 \u0026quot;\u0026lt;/span\u0026gt;) : fnStr\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; fnStr\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copyFn\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; newFn = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`return \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${convertFnToStr(fn)}\u0026lt;/span\u0026gt;`\u0026lt;/span\u0026gt;)()\n  \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copyPropDescs\u0026lt;/span\u0026gt;(newFn, fn)\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; newFn\n}\n\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;object, key, descriptor = {}, copyFrom = {}\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;configurable\u0026lt;/span\u0026gt;: _configurable, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;writable\u0026lt;/span\u0026gt;: _writable }\n    = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptor\u0026lt;/span\u0026gt;(object, key)\n    || { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;configurable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;writable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt; }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; test = _configurable \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Can redefine property\u0026lt;/span\u0026gt;\n    \u0026amp;amp;\u0026amp;amp; (_writable === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt; || _writable) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Can assign to property\u0026lt;/span\u0026gt;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!test || \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;arguments\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt; \u0026amp;lt;= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; test\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; basisDesc = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptor\u0026lt;/span\u0026gt;(copyFrom, key)\n    || { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;configurable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;writable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt; } \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Custom\u0026lt;/span\u0026gt;\n    || {}; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// or left to native default settings\u0026lt;/span\u0026gt;\n\n  [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;get\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;set\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;writable\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;enumerable\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;configurable\u0026quot;\u0026lt;/span\u0026gt;]\n    .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;forEach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;attr\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt;\n      descriptor[attr] === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp;\n      (descriptor[attr] = basisDesc[attr])\n    )\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; { get, set, value, writable, enumerable, configurable }\n    = descriptor\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProperty\u0026lt;/span\u0026gt;(object, key, {\n    enumerable, configurable, ...get || set\n      ? { get, set } \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Accessor descriptor\u0026lt;/span\u0026gt;\n      : { value, writable } \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Data descriptor\u0026lt;/span\u0026gt;\n  })\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;// Tests\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; obj0 = {\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;u\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nul\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;t\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;sym\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Symbol\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;symbol\u0026quot;\u0026lt;/span\u0026gt;),\n  [\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Symbol\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;e\u0026quot;\u0026lt;/span\u0026gt;)]: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Math\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;E\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;: [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]],\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;d\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(),\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;re\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/f/g\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;g\u0026lt;/span\u0026gt;() { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt; },\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;: {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;n\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;...args\u0026lt;/span\u0026gt;) { } }\n  },\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;: {\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getAccessorStr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;) {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; []\n        .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;concat\u0026lt;/span\u0026gt;(...\n          \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;values\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptors\u0026lt;/span\u0026gt;(object))\n            .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;filter\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;desc\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; desc.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;writable\u0026lt;/span\u0026gt; === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;)\n            .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;desc\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;values\u0026lt;/span\u0026gt;(desc))\n        )\n        .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;filter\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;prop\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; prop === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;function\u0026quot;\u0026lt;/span\u0026gt;)\n        .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;)\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;f0\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f0\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;f1\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;f2\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; a / (a + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;),\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;f3\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;() =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f4\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;params\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; param + params },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;f5\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;a, b\u0026lt;/span\u0026gt;) =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;{ c = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt; } = {}\u0026lt;/span\u0026gt;) =\u0026amp;gt;\u0026lt;/span\u0026gt; a + b + c\n  }\n}\n\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProp\u0026lt;/span\u0026gt;(obj0, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;s\u0026quot;\u0026lt;/span\u0026gt;, { \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;_s\u0026lt;/span\u0026gt; = v } })\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProp\u0026lt;/span\u0026gt;(obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;tint\u0026quot;\u0026lt;/span\u0026gt;, { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;non-enumerable\u0026quot;\u0026lt;/span\u0026gt; } })\nobj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;nested array\u0026quot;\u0026lt;/span\u0026gt;\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj1 = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj0)\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;n\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;g\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;g\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;a = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, b = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; a + b }\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;d\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setTime\u0026lt;/span\u0026gt;(+obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;d\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;60\u0026lt;/span\u0026gt; * \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;)\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;tint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;enumerable? no\u0026quot;\u0026lt;/span\u0026gt;\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a nested arr\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProp\u0026lt;/span\u0026gt;(obj1, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;s\u0026quot;\u0026lt;/span\u0026gt;, { \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;_s\u0026lt;/span\u0026gt; = v + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; } })\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProp\u0026lt;/span\u0026gt;(obj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;re\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multiline\u0026quot;\u0026lt;/span\u0026gt;, { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt; })\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\\n\u0026quot;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;repeat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; ** \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;))\n\n\n\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;gt;:\u0026amp;gt;: Test - Routinely\u0026quot;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;obj0:\\n \u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj0))\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;obj1:\\n \u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj1))\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;()\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;obj0:\\n \u0026quot;\u0026lt;/span\u0026gt;, obj0)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;obj1:\\n \u0026quot;\u0026lt;/span\u0026gt;, obj1)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;()\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;obj0\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.arr.tint:\u0026quot;\u0026lt;/span\u0026gt;, obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;tint\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.arr[0].name:\u0026quot;\u0026lt;/span\u0026gt;, obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;\n)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;obj1\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.arr.tint:\u0026quot;\u0026lt;/span\u0026gt;, obj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;tint\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.arr[0].name:\u0026quot;\u0026lt;/span\u0026gt;, obj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;\n)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;()\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Accessor-type descriptor\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;of obj0:\u0026quot;\u0026lt;/span\u0026gt;, obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getAccessorStr\u0026lt;/span\u0026gt;(obj0), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;of obj1:\u0026quot;\u0026lt;/span\u0026gt;, obj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getAccessorStr\u0026lt;/span\u0026gt;(obj1), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;set (obj0 \u0026amp;amp; obj1) .s :\u0026quot;\u0026lt;/span\u0026gt;, obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;s\u0026lt;/span\u0026gt; = obj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;s\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;   (obj0 , obj1) ._s:\u0026quot;\u0026lt;/span\u0026gt;, obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;_s\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt;, obj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;_s\u0026lt;/span\u0026gt;\n)\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; obj0 has not been interfered.\u0026quot;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\\n\u0026quot;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;repeat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; ** \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;))\n\n\n\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;gt;:\u0026amp;gt;: Test - More kinds of functions\u0026quot;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; fnsForTest = {\n  \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;_\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _ },\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;_\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; _,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;aFunc\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;async\u0026lt;/span\u0026gt; _ =\u0026amp;gt; _,\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;async\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { },\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;async\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;asyncFunc\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { },\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;aFn\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;async\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { },\n  *\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;gen\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { },\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;async\u0026lt;/span\u0026gt; *\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;asyncGen\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { },\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;aG1\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;async\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;* () { },\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;aG2\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;async\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;* \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;gen\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { },\n  *[\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Symbol\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;iterator\u0026lt;/span\u0026gt;]() { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt;* \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;keys\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;) }\n}\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ownKeys\u0026lt;/span\u0026gt;(fnsForTest).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;k\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(k)}\u0026lt;/span\u0026gt;:\n  \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${fnsForTest[k].name}\u0026lt;/span\u0026gt;--\u0026amp;gt;\n    \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(fnsForTest[k])}\u0026lt;/span\u0026gt;`\u0026lt;/span\u0026gt;\n).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;join\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\u0026quot;\u0026lt;/span\u0026gt;))\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; normedFnsStr = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`{\n  f: function f(_) { return _ },\n  func: _ =\u0026amp;gt; _,\n  aFunc: async _ =\u0026amp;gt; _,\n  function: async function() { },\n  asyncFunc: async function asyncFunc() { },\n  aFn: async function () { },\n  gen: function* gen() { },\n  asyncGen: async function* asyncGen() { },\n  aG1: async function* () { },\n  aG2: async function* gen() { },\n  [Symbol.iterator]: function* () { yield* Object.keys(this) }\n}`\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; copiedFnsForTest = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(fnsForTest)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fnsForTest:\u0026quot;\u0026lt;/span\u0026gt;, fnsForTest)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fnsForTest (copied):\u0026quot;\u0026lt;/span\u0026gt;, copiedFnsForTest)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fnsForTest (normed str):\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;eval\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`(\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${normedFnsStr}\u0026lt;/span\u0026gt;)`\u0026lt;/span\u0026gt;))\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Comparison of fnsForTest and its clone:\u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ownKeys\u0026lt;/span\u0026gt;(fnsForTest).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;k\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt;\n    [k, fnsForTest[k] === copiedFnsForTest[k]]\n  )\n)\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\\n\u0026quot;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;repeat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; ** \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;))\n\n\n\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;gt;:\u0026amp;gt;: Test - Circular structures\u0026quot;\u0026lt;/span\u0026gt;)\n\nobj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;r\u0026lt;/span\u0026gt; = {}\nobj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;r\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;recursion\u0026lt;/span\u0026gt; = obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;\nobj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] = obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;\n\nobj1 = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj0)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;obj0:\\n \u0026quot;\u0026lt;/span\u0026gt;, obj0)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;obj1:\\n \u0026quot;\u0026lt;/span\u0026gt;, obj1)\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Clear obj0\u0026apos;s recursion:\u0026quot;\u0026lt;/span\u0026gt;,\n  obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;r\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;recursion\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;obj0\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.o.r:\u0026quot;\u0026lt;/span\u0026gt;, obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;r\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.arr:\u0026quot;\u0026lt;/span\u0026gt;, obj0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;\n)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;obj1\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.o.r:\u0026quot;\u0026lt;/span\u0026gt;, obj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;r\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n \u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.arr:\u0026quot;\u0026lt;/span\u0026gt;, obj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;arr\u0026lt;/span\u0026gt;\n)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; obj1 has not been interfered.\u0026quot;\u0026lt;/span\u0026gt;)\n\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\\n\u0026quot;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;repeat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; ** \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;))\n\n\n\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;gt;:\u0026amp;gt;: Test - Classes\u0026quot;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Person\u0026lt;/span\u0026gt; {\n  \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt; = name\n  }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Boy\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;Person\u0026lt;/span\u0026gt; { }\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Boy\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;sex\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;M\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; boy0 = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Boy\u0026lt;/span\u0026gt;\nboy0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;hobby\u0026lt;/span\u0026gt; = { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;sport\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;spaceflight\u0026quot;\u0026lt;/span\u0026gt; }\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; boy1 = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(boy0)\nboy1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;hobby\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;sport\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;superluminal flight\u0026quot;\u0026lt;/span\u0026gt;\n\nboy0.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;one\u0026quot;\u0026lt;/span\u0026gt;\nboy1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;neo\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;boy0:\\n \u0026quot;\u0026lt;/span\u0026gt;, boy0)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;boy1:\\n \u0026quot;\u0026lt;/span\u0026gt;, boy1)\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;boy1\u0026apos;s prototype === boy0\u0026apos;s:\u0026quot;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPrototypeOf\u0026lt;/span\u0026gt;(boy1) === \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPrototypeOf\u0026lt;/span\u0026gt;(boy0)\n)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h1\u0026gt;References\u0026lt;/h1\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://mdn.io/Object/create\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Object.create()\u0026lt;/code\u0026gt; | MDN\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://mdn.io/Object/defineProperties\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Object.defineProperties()\u0026lt;/code\u0026gt; | MDN\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties#Detection_Table\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Enumerability and ownership of properties | MDN\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://mdn.io/Errors/Cyclic_object_value\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;TypeError: cyclic object value | MDN\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;h1\u0026gt;Language tricks used\u0026lt;/h1\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/40560953\u0026quot;\u0026gt;Conditionally add prop to object\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://lodash.com/docs/4.17.15#cloneDeep\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Use lodash _.cloneDeep().\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;Shallow Copy: lodash _.clone()\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;A shallow copy can be made by simply copying the reference.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj1 = {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e\u0026lt;/span\u0026gt;: {\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n        }\n    }\n};\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj3 = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj1);\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;e\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj1));\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//{\u0026quot;a\u0026quot;:4,\u0026quot;b\u0026quot;:{\u0026quot;c\u0026quot;:4,\u0026quot;e\u0026quot;:{\u0026quot;f\u0026quot;:100}}}\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj3));\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//{\u0026quot;a\u0026quot;:0,\u0026quot;b\u0026quot;:{\u0026quot;c\u0026quot;:4,\u0026quot;e\u0026quot;:{\u0026quot;f\u0026quot;:100}}}\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/vmysI.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/vmysI.png\u0026quot; alt=\u0026quot;Shallow Copy: lodash _.clone()\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;Deep Copy: lodash _.cloneDeep()\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;fields are dereferenced: rather than references to objects being copied\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj1 = {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;e\u0026lt;/span\u0026gt;: {\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n        }\n    }\n};\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj3 = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDeep\u0026lt;/span\u0026gt;(obj1);\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;;\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;;\nobj1.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;e\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj1));\n{\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;:{\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;c\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;e\u0026quot;\u0026lt;/span\u0026gt;:{\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;f\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;}}}\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj3));\n{\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;:{\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;c\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;e\u0026quot;\u0026lt;/span\u0026gt;:{\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;f\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;}}}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/z0M6n.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/z0M6n.png\u0026quot; alt=\u0026quot;Deep Copy: lodash _.cloneDeep()\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    "],"id":223,"title":"How do I correctly clone a JavaScript object?","content":"\n                \n\u0026lt;p\u0026gt;I have an object \u0026lt;code\u0026gt;x\u0026lt;/code\u0026gt;. I\u0026apos;d like to copy it as object \u0026lt;code\u0026gt;y\u0026lt;/code\u0026gt;, such that changes to \u0026lt;code\u0026gt;y\u0026lt;/code\u0026gt; do not modify \u0026lt;code\u0026gt;x\u0026lt;/code\u0026gt;. I realized that copying objects derived from built-in JavaScript objects will result in extra, unwanted properties. This isn\u0026apos;t a problem, since I\u0026apos;m copying one of my own literal-constructed objects.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;How do I correctly clone a JavaScript object?\u0026lt;/p\u0026gt;\n    ","slug":"how-do-i-correctly-clone-a-javascript-object-1657387325850","postType":"QUESTION","createdAt":"2022-07-09T17:22:05.000Z","updatedAt":"2022-07-09T17:22:05.000Z","tags":[{"id":1521,"name":"javascript-objects","slug":"javascript-objects","createdAt":"2022-07-09T17:22:05.000Z","updatedAt":"2022-07-09T17:22:05.000Z","Questions_Tags":{"questionId":223,"tagId":1521}}],"relatedQuestions":[{"title":"How do I correctly clone a JavaScript object?","slug":"how-do-i-correctly-clone-a-javascript-object-1657387325850","tags":[{"name":"javascript-objects","Questions_Tags":{"questionId":223,"tagId":1521}}]}]},"randomQuestions":[{"title":"What does the 'static' keyword do in a class?","slug":"what-does-the-'static'-keyword-do-in-a-class-1657388554238"},{"title":"How to affect other elements when one element is hovered","slug":"how-to-affect-other-elements-when-one-element-is-hovered-1657387832363"},{"title":"Templated check for the existence of a class member function?","slug":"templated-check-for-the-existence-of-a-class-member-function-1657388363414"},{"title":"What is the difference between client-side and server-side programming?","slug":"what-is-the-difference-between-client-side-and-server-side-programming-1657384372926"},{"title":"jQuery Ajax File Upload","slug":"jquery-ajax-file-upload-1657387368970"},{"title":"How can I access the contents of an iframe with JavaScript/jQuery?","slug":"how-can-i-access-the-contents-of-an-iframe-with-javascriptjquery-1657388369923"},{"title":"Add a property to a JavaScript object using a variable as the name?","slug":"add-a-property-to-a-javascript-object-using-a-variable-as-the-name-1657388425650"},{"title":"What is an undefined reference/unresolved external symbol error and how do I fix it?","slug":"what-is-an-undefined-referenceunresolved-external-symbol-error-and-how-do-i-fix-it-1657384255179"},{"title":"How do I get PHP errors to display?","slug":"how-do-i-get-php-errors-to-display-1657384570095"},{"title":"What do querySelectorAll and getElementsBy* methods return?","slug":"what-do-queryselectorall-and-getelementsby*-methods-return-1657384425935"},{"title":"How to filter Pandas dataframe using 'in' and 'not in' like in SQL","slug":"how-to-filter-pandas-dataframe-using-'in'-and-'not-in'-like-in-sql-1657387371355"},{"title":"The ViewData item that has the key 'XXX' is of type 'System.Int32' but must be of type 'IEnumerable\u003cSelectListItem\u003e'","slug":"the-viewdata-item-that-has-the-key-'xxx'-is-of-type-'system.int32'-but-must-be-of-type-'ienumerablelessselectlistitemgreater'-1657388454191"},{"title":"Deserialize JSON into C# dynamic object?","slug":"deserialize-json-into-c-dynamic-object-1657388568720"},{"title":"What and where are the stack and heap?","slug":"what-and-where-are-the-stack-and-heap-1657387415361"},{"title":"When to use virtual destructors?","slug":"when-to-use-virtual-destructors-1657388152135"},{"title":"How to append text to an existing file in Java?","slug":"how-to-append-text-to-an-existing-file-in-java-1657388492377"},{"title":"Reference - What does this regex mean?","slug":"reference-what-does-this-regex-mean-1657384291445"},{"title":"Swing GUI listeners without AWT","slug":"swing-gui-listeners-without-awt-1657387522426"},{"title":"Find object by id in an array of JavaScript objects","slug":"find-object-by-id-in-an-array-of-javascript-objects-1657387572087"},{"title":"How to remove \"noise\" from GCC/clang assembly output?","slug":"how-to-remove-\"noise\"-from-gccclang-assembly-output-1657387612391"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-do-i-correctly-clone-a-javascript-object-1657387325850"},"buildId":"TQ2eYlCSdocSK-hq6gkM0","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>