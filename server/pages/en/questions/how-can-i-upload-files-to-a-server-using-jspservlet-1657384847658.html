<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>How can I upload files to a server using JSP/Servlet? | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="How can I upload files to server using JSP/Servlet?
I tried this:
&lt;form action=&quot;upload&quot; method=&quot;post&quot;&gt;
    &lt;input type=&quot;text&quot; name=&quot;description&quot; /&gt;
    &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;
    &lt;input type=&quot;submit&quot; /&gt;
&lt;/form&gt;

However, I only get the file name, not the file content. When I add  enctype=&quot;multipart/form-data&quot; to the &lt;form&gt;, then request.getParameter() returns null.
During research I stumbled upon Apache Common FileUpload. I tried this:
FileItemFactory factory = new DiskFileItemFactory();
ServletFileUpload upload = new ServletFileUpload(factory);
List items = upload.parseRequest(request); // This line is where it died.

Unfortunately, the servlet threw an exception without a clear message and cause. Here is the stacktrace:
SEVERE: Servlet.service() for servlet UploadServlet threw exception
javax.servlet.ServletException: Servlet execution threw an exception
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:313)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:637)

    "/><meta property="og:title" content="How can I upload files to a server using JSP/Servlet? | Solutions Checker"/><meta property="og:description" content="How can I upload files to server using JSP/Servlet?
I tried this:
&lt;form action=&quot;upload&quot; method=&quot;post&quot;&gt;
    &lt;input type=&quot;text&quot; name=&quot;description&quot; /&gt;
    &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;
    &lt;input type=&quot;submit&quot; /&gt;
&lt;/form&gt;

However, I only get the file name, not the file content. When I add  enctype=&quot;multipart/form-data&quot; to the &lt;form&gt;, then request.getParameter() returns null.
During research I stumbled upon Apache Common FileUpload. I tried this:
FileItemFactory factory = new DiskFileItemFactory();
ServletFileUpload upload = new ServletFileUpload(factory);
List items = upload.parseRequest(request); // This line is where it died.

Unfortunately, the servlet threw an exception without a clear message and cause. Here is the stacktrace:
SEVERE: Servlet.service() for servlet UploadServlet threw exception
javax.servlet.ServletException: Servlet execution threw an exception
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:313)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:637)

    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How can I upload files to a server using JSP/Servlet?","text":"How can I upload files to server using JSP/Servlet?\nI tried this:\n&lt;form action=&quot;upload&quot; method=&quot;post&quot;&gt;\n    &lt;input type=&quot;text&quot; name=&quot;description&quot; /&gt;\n    &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;\n    &lt;input type=&quot;submit&quot; /&gt;\n&lt;/form&gt;\n\nHowever, I only get the file name, not the file content. When I add  enctype=&quot;multipart/form-data&quot; to the &lt;form&gt;, then request.getParameter() returns null.\nDuring research I stumbled upon Apache Common FileUpload. I tried this:\nFileItemFactory factory = new DiskFileItemFactory();\nServletFileUpload upload = new ServletFileUpload(factory);\nList items = upload.parseRequest(request); // This line is where it died.\n\nUnfortunately, the servlet threw an exception without a clear message and cause. Here is the stacktrace:\nSEVERE: Servlet.service() for servlet UploadServlet threw exception\njavax.servlet.ServletException: Servlet execution threw an exception\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:313)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n    at java.lang.Thread.run(Thread.java:637)\n\n    ","answerCount":14,"upVoteCount":500,"suggestedAnswer":[{"text":"Introduction\nTo browse and select a file for upload you need a HTML &lt;input type=&quot;file&quot;&gt; field in the form. As stated in the HTML specification you have to use the POST method and the enctype attribute of the form has to be set to &quot;multipart/form-data&quot;.\n&lt;form action=&quot;upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\n    &lt;input type=&quot;text&quot; name=&quot;description&quot; /&gt;\n    &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;\n    &lt;input type=&quot;submit&quot; /&gt;\n&lt;/form&gt;\n\nAfter submitting such a form, the binary multipart form data is available in the request body in a different format than when the enctype isn&apos;t set.\nBefore Servlet 3.0 (Dec 2009), the Servlet API didn&apos;t natively support multipart/form-data. It supports only the default form enctype of application/x-www-form-urlencoded. The request.getParameter() and consorts would all return null when using multipart form data. This is where the well known Apache Commons FileUpload came into the picture.\nDon&apos;t manually parse it!\nYou can in theory parse the request body yourself based on ServletRequest#getInputStream(). However, this is a precise and tedious work which requires precise knowledge of RFC2388. You shouldn&apos;t try to do this on your own or copypaste some homegrown library-less code found elsewhere on the Internet. Many online sources have failed hard in this, such as roseindia.net. See also uploading of pdf file. You should rather use a real library which is used (and implicitly tested!) by millions of users for years. Such a library has proven its robustness.\nWhen you&apos;re already on Servlet 3.0 or newer, use native API\nIf you&apos;re using at least Servlet 3.0 (Tomcat 7, Jetty 9, JBoss AS 6, GlassFish 3, etc, they exist already since 2010), then you can just use standard API provided HttpServletRequest#getPart() to collect the individual multipart form data items (most Servlet 3.0 implementations actually use Apache Commons FileUpload under the covers for this!). Also, normal form fields are available by getParameter() the usual way.\nFirst annotate your servlet with @MultipartConfig in order to let it recognize and support multipart/form-data requests and thus get getPart() to work:\n@WebServlet(&quot;/upload&quot;)\n@MultipartConfig\npublic class UploadServlet extends HttpServlet {\n    // ...\n}\n\nThen, implement its doPost() as follows:\nprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    String description = request.getParameter(&quot;description&quot;); // Retrieves &lt;input type=&quot;text&quot; name=&quot;description&quot;&gt;\n    Part filePart = request.getPart(&quot;file&quot;); // Retrieves &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt;\n    String fileName = Paths.get(filePart.getSubmittedFileName()).getFileName().toString(); // MSIE fix.\n    InputStream fileContent = filePart.getInputStream();\n    // ... (do your job here)\n}\n\nNote the Path#getFileName(). This is a MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.\nIn case you want to upload multiple files via either multiple=&quot;true&quot;,\n&lt;input type=&quot;file&quot; name=&quot;files&quot; multiple=&quot;true&quot; /&gt;\n\nor the old-fashioned way with multiple inputs,\n&lt;input type=&quot;file&quot; name=&quot;files&quot; /&gt;\n&lt;input type=&quot;file&quot; name=&quot;files&quot; /&gt;\n&lt;input type=&quot;file&quot; name=&quot;files&quot; /&gt;\n...\n\nthen you can collect them as below (unfortunately there is no such method as request.getParts(&quot;files&quot;)):\nprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    // ...\n    List&lt;Part&gt; fileParts = request.getParts().stream().filter(part -&gt; &quot;files&quot;.equals(part.getName()) &amp;&amp; part.getSize() &gt; 0).collect(Collectors.toList()); // Retrieves &lt;input type=&quot;file&quot; name=&quot;files&quot; multiple=&quot;true&quot;&gt;\n\n    for (Part filePart : fileParts) {\n        String fileName = Paths.get(filePart.getSubmittedFileName()).getFileName().toString(); // MSIE fix.\n        InputStream fileContent = filePart.getInputStream();\n        // ... (do your job here)\n    }\n}\n\nWhen you&apos;re not on Servlet 3.1 yet, manually get submitted file name\nNote that Part#getSubmittedFileName() was introduced in Servlet 3.1 (Tomcat 8, Jetty 9, WildFly 8, GlassFish 4, etc, they exist since 2013 already). If you&apos;re not on Servlet 3.1 yet (really?), then you need an additional utility method to obtain the submitted file name.\nprivate static String getSubmittedFileName(Part part) {\n    for (String cd : part.getHeader(&quot;content-disposition&quot;).split(&quot;;&quot;)) {\n        if (cd.trim().startsWith(&quot;filename&quot;)) {\n            String fileName = cd.substring(cd.indexOf(&apos;=&apos;) + 1).trim().replace(&quot;\\&quot;&quot;, &quot;&quot;);\n            return fileName.substring(fileName.lastIndexOf(&apos;/&apos;) + 1).substring(fileName.lastIndexOf(&apos;\\\\&apos;) + 1); // MSIE fix.\n        }\n    }\n    return null;\n}\n\n\nString fileName = getSubmittedFileName(filePart);\n\nNote the MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.\nWhen you&apos;re not on Servlet 3.0 yet, use Apache Commons FileUpload\nIf you&apos;re not on Servlet 3.0 yet (isn&apos;t it about time to upgrade? it&apos;s released over a decade ago!), the common practice is to make use of Apache Commons FileUpload to parse the multpart form data requests. It has an excellent User Guide and FAQ (carefully go through both). There&apos;s also the O&apos;Reilly (&quot;cos&quot;) MultipartRequest, but it has some (minor) bugs and isn&apos;t actively maintained anymore for years. I wouldn&apos;t recommend using it. Apache Commons FileUpload is still actively maintained and currently very mature.\nIn order to use Apache Commons FileUpload, you need to have at least the following files in your webapp&apos;s /WEB-INF/lib:\n\ncommons-fileupload.jar\ncommons-io.jar\n\nYour initial attempt failed most likely because you forgot the commons IO.\nHere&apos;s a kickoff example how the doPost() of your UploadServlet may look like when using Apache Commons FileUpload:\nprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    try {\n        List&lt;FileItem&gt; items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);\n        for (FileItem item : items) {\n            if (item.isFormField()) {\n                // Process regular form field (input type=&quot;text|radio|checkbox|etc&quot;, select, etc).\n                String fieldName = item.getFieldName();\n                String fieldValue = item.getString();\n                // ... (do your job here)\n            } else {\n                // Process form file field (input type=&quot;file&quot;).\n                String fieldName = item.getFieldName();\n                String fileName = FilenameUtils.getName(item.getName());\n                InputStream fileContent = item.getInputStream();\n                // ... (do your job here)\n            }\n        }\n    } catch (FileUploadException e) {\n        throw new ServletException(&quot;Cannot parse multipart request.&quot;, e);\n    }\n\n    // ...\n}\n\nIt&apos;s very important that you don&apos;t call getParameter(), getParameterMap(), getParameterValues(), getInputStream(), getReader(), etc on the same request beforehand. Otherwise the servlet container will read and parse the request body and thus Apache Commons FileUpload will get an empty request body. See also a.o. ServletFileUpload#parseRequest(request) returns an empty list.\nNote the FilenameUtils#getName(). This is a MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.\nAlternatively you can also wrap this all in a Filter which parses it all automagically and put the stuff back in the parametermap of the request so that you can continue using request.getParameter() the usual way and retrieve the uploaded file by request.getAttribute(). You can find an example in this blog article.\nWorkaround for GlassFish3 bug of getParameter() still returning null\nNote that Glassfish versions older than 3.1.2 had a bug wherein the getParameter() still returns null. If you are targeting such a container and can&apos;t upgrade it, then you need to extract the value from getPart() with help of this utility method:\nprivate static String getValue(Part part) throws IOException {\n    BufferedReader reader = new BufferedReader(new InputStreamReader(part.getInputStream(), &quot;UTF-8&quot;));\n    StringBuilder value = new StringBuilder();\n    char[] buffer = new char[1024];\n    for (int length = 0; (length = reader.read(buffer)) &gt; 0;) {\n        value.append(buffer, 0, length);\n    }\n    return value.toString();\n}\n\n\nString description = getValue(request.getPart(&quot;description&quot;)); // Retrieves &lt;input type=&quot;text&quot; name=&quot;description&quot;&gt;\n    \n\nSaving uploaded file (don&apos;t use getRealPath() nor part.write()!)\nHead to the following answers for detail on properly saving the obtained InputStream (the fileContent variable as shown in the above code snippets) to disk or database:\n\nRecommended way to save uploaded files in a servlet application\nHow to upload an image and save it in database?\nHow to convert Part to Blob, so I can store it in MySQL?\n\nServing uploaded file\nHead to the following answers for detail on properly serving the saved file from disk or database back to the client:\n\nLoad images from outside of webapps / webcontext / deploy folder using &lt;h:graphicImage&gt; or &lt;img&gt; tag\nHow to retrieve and display images from a database in a JSP page?\nSimplest way to serve static data from outside the application server in a Java web application\nAbstract template for static resource servlet supporting HTTP caching\n\nAjaxifying the form\nHead to the following answers how to upload using Ajax (and jQuery). Do note that the servlet code to collect the form data does not need to be changed for this! Only the way how you respond may be changed, but this is rather trivial (i.e. instead of forwarding to JSP, just print some JSON or XML or even plain text depending on whatever the script responsible for the Ajax call is expecting).\n\nHow can I upload files to a server using JSP/Servlet and Ajax?\nSend a file as multipart through XMLHttpRequest\nHTML5 drag and drop file upload to Java Servlet\n\n\nHope this all helps :)\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"If you happen to use Spring MVC, this is how to (I&apos;m leaving this here in case someone find it useful):\nUse a form with enctype attribute set to &quot;multipart/form-data&quot; (the same as BalusC&apos;s answer):\n&lt;form action=&quot;upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\n    &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Upload&quot;/&gt;\n&lt;/form&gt;\n\nIn your controller, map the request parameter file to MultipartFile type as follows:\n@RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST)\npublic void handleUpload(@RequestParam(&quot;file&quot;) MultipartFile file) throws IOException {\n    if (!file.isEmpty()) {\n            byte[] bytes = file.getBytes(); // alternatively, file.getInputStream();\n            // application logic\n    }\n}\n\nYou can get the filename and size using MultipartFile&apos;s getOriginalFilename() and getSize().\nI&apos;ve tested this with Spring version 4.1.1.RELEASE.\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Without components or external libraries in Tomcat 6 or Tomcat 7\nEnabling upload in the web.xml file:\nManually Installing PHP, Tomcat and Httpd Lounge.\n&lt;servlet&gt;\n    &lt;servlet-name&gt;jsp&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.apache.jasper.servlet.JspServlet&lt;/servlet-class&gt;\n    &lt;multipart-config&gt;\n      &lt;max-file-size&gt;3145728&lt;/max-file-size&gt;\n      &lt;max-request-size&gt;5242880&lt;/max-request-size&gt;\n    &lt;/multipart-config&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;fork&lt;/param-name&gt;\n        &lt;param-value&gt;false&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;xpoweredBy&lt;/param-name&gt;\n        &lt;param-value&gt;false&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;3&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\nAs you can see:\n&lt;multipart-config&gt;\n  &lt;max-file-size&gt;3145728&lt;/max-file-size&gt;\n  &lt;max-request-size&gt;5242880&lt;/max-request-size&gt;\n&lt;/multipart-config&gt;\n\nUploading files using JSP. files:\nIn the HTML file\n&lt;form method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; name=&quot;Form&quot; &gt;\n\n  &lt;input type=&quot;file&quot; name=&quot;fFoto&quot; id=&quot;fFoto&quot; value=&quot;&quot; /&gt;&lt;/td&gt;\n  &lt;input type=&quot;file&quot; name=&quot;fResumen&quot; id=&quot;fResumen&quot; value=&quot;&quot;/&gt;\n\nIn the JSP File or Servlet\nInputStream isFoto = request.getPart(&quot;fFoto&quot;).getInputStream();\nInputStream isResu = request.getPart(&quot;fResumen&quot;).getInputStream();\nByteArrayOutputStream baos = new ByteArrayOutputStream();\nbyte buf[] = new byte[8192];\nint qt = 0;\nwhile ((qt = isResu.read(buf)) != -1) {\n  baos.write(buf, 0, qt);\n}\nString sResumen = baos.toString();\n\nEdit your code to servlet requirements, like max-file-size, max-request-size and other options that you can to set...\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"You need the common-io.1.4.jar file to be included in your lib directory, or if you&apos;re working in any editor, like NetBeans, then you need to go to project properties and just add the JAR file and you will be done. \n\nTo get the common.io.jar file just google it or just go to the Apache Tomcat website where you get the option for a free download of this file. But remember one thing: download the binary ZIP file if you&apos;re a Windows user.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"I am using a common Servlet for every HTML form whether it has attachments or not.\nThis Servlet returns a TreeMap where the keys are JSP name parameters and values are user inputs and saves all attachments in a fixed directory and later you rename the directory of your choice. Here Connections is our custom interface having a connection object.\npublic class ServletCommonfunctions extends HttpServlet implements\n        Connections {\n\n    private static final long serialVersionUID = 1L;\n\n    public ServletCommonfunctions() {}\n\n    protected void doPost(HttpServletRequest request,\n                          HttpServletResponse response) throws ServletException,\n                          IOException {}\n\n    public SortedMap&lt;String, String&gt; savefilesindirectory(\n            HttpServletRequest request, HttpServletResponse response)\n            throws IOException {\n\n        // Map&lt;String, String&gt; key_values = Collections.synchronizedMap(new\n        // TreeMap&lt;String, String&gt;());\n        SortedMap&lt;String, String&gt; key_values = new TreeMap&lt;String, String&gt;();\n        String dist = null, fact = null;\n        PrintWriter out = response.getWriter();\n        File file;\n        String filePath = &quot;E:\\\\FSPATH1\\\\2KL06CS048\\\\&quot;;\n        System.out.println(&quot;Directory Created   ????????????&quot;\n            + new File(filePath).mkdir());\n        int maxFileSize = 5000 * 1024;\n        int maxMemSize = 5000 * 1024;\n\n        // Verify the content type\n        String contentType = request.getContentType();\n        if ((contentType.indexOf(&quot;multipart/form-data&quot;) &gt;= 0)) {\n            DiskFileItemFactory factory = new DiskFileItemFactory();\n            // Maximum size that will be stored in memory\n            factory.setSizeThreshold(maxMemSize);\n            // Location to save data that is larger than maxMemSize.\n            factory.setRepository(new File(filePath));\n            // Create a new file upload handler\n            ServletFileUpload upload = new ServletFileUpload(factory);\n            // maximum file size to be uploaded.\n            upload.setSizeMax(maxFileSize);\n            try {\n                // Parse the request to get file items.\n                @SuppressWarnings(&quot;unchecked&quot;)\n                List&lt;FileItem&gt; fileItems = upload.parseRequest(request);\n                // Process the uploaded file items\n                Iterator&lt;FileItem&gt; i = fileItems.iterator();\n                while (i.hasNext()) {\n                    FileItem fi = (FileItem) i.next();\n                    if (!fi.isFormField()) {\n                        // Get the uploaded file parameters\n                        String fileName = fi.getName();\n                        // Write the file\n                        if (fileName.lastIndexOf(&quot;\\\\&quot;) &gt;= 0) {\n                            file = new File(filePath\n                                + fileName.substring(fileName\n                                        .lastIndexOf(&quot;\\\\&quot;)));\n                        } else {\n                            file = new File(filePath\n                                + fileName.substring(fileName\n                                        .lastIndexOf(&quot;\\\\&quot;) + 1));\n                        }\n                        fi.write(file);\n                    } else {\n                        key_values.put(fi.getFieldName(), fi.getString());\n                    }\n                }\n            } catch (Exception ex) {\n                System.out.println(ex);\n            }\n        }\n        return key_values;\n    }\n}\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"For Spring MVC\nI managed to have a simpler version that worked for taking form input, both data and images.\n&lt;form action=&quot;/handleform&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\n    &lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;\n    &lt;input type=&quot;text&quot; name=&quot;age&quot; /&gt;\n    &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;\n    &lt;input type=&quot;submit&quot; /&gt;\n&lt;/form&gt;\n\nController to handle\n@Controller\npublic class FormController {\n    @RequestMapping(value=&quot;/handleform&quot;,method= RequestMethod.POST)\n    ModelAndView register(@RequestParam String name, @RequestParam int age, @RequestParam MultipartFile file)\n            throws ServletException, IOException {\n\n        System.out.println(name);\n        System.out.println(age);\n        if(!file.isEmpty()){\n            byte[] bytes = file.getBytes();\n            String filename = file.getOriginalFilename();\n            BufferedOutputStream stream =new BufferedOutputStream(new FileOutputStream(new File(&quot;D:/&quot; + filename)));\n            stream.write(bytes);\n            stream.flush();\n            stream.close();\n        }\n        return new ModelAndView(&quot;index&quot;);\n    }\n}\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"Another source of this problem occurs if you are using Geronimo with its embedded Tomcat. In this case, after many iterations of testing Commons IO and commons-fileupload, the problem arises from a parent classloader handling the commons-xxx JAR files. This has to be prevented. The crash always occurred at:\nfileItems = uploader.parseRequest(request);\n\nNote that the List type of fileItems has changed with the current version of commons-fileupload to be specifically List&lt;FileItem&gt; as opposed to prior versions where it was generic List.\nI added the source code for commons-fileupload and Commons IO into my Eclipse project to trace the actual error and finally got some insight. First, the exception thrown is of type Throwable not the stated FileIOException nor even Exception (these will not be trapped). Second, the error message is obfuscatory in that it stated class not found because axis2 could not find commons-io.  Axis2 is not used in my project at all, but it exists as a folder in the Geronimo repository subdirectory as part of standard installation.\nFinally, I found one place that posed a working solution which successfully solved my problem. You must hide the JAR files from the parent loader in the deployment plan. This was put into the geronimo-web.xml file with my full file shown below.\nPasted from http://osdir.com/ml/user-geronimo-apache/2011-03/msg00026.html:\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;web:web-app xmlns:app=&quot;http://geronimo.apache.org/xml/ns/j2ee/application-2.0&quot; xmlns:client=&quot;http://geronimo.apache.org/xml/ns/j2ee/application-client-2.0&quot; xmlns:conn=&quot;http://geronimo.apache.org/xml/ns/j2ee/connector-1.2&quot; xmlns:dep=&quot;http://geronimo.apache.org/xml/ns/deployment-1.2&quot; xmlns:ejb=&quot;http://openejb.apache.org/xml/ns/openejb-jar-2.2&quot; xmlns:log=&quot;http://geronimo.apache.org/xml/ns/loginconfig-2.0&quot; xmlns:name=&quot;http://geronimo.apache.org/xml/ns/naming-1.2&quot; xmlns:pers=&quot;http://java.sun.com/xml/ns/persistence&quot; xmlns:pkgen=&quot;http://openejb.apache.org/xml/ns/pkgen-2.1&quot; xmlns:sec=&quot;http://geronimo.apache.org/xml/ns/security-2.0&quot; xmlns:web=&quot;http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1&quot;&gt;\n    &lt;dep:environment&gt;\n        &lt;dep:moduleId&gt;\n            &lt;dep:groupId&gt;DataStar&lt;/dep:groupId&gt;\n            &lt;dep:artifactId&gt;DataStar&lt;/dep:artifactId&gt;\n            &lt;dep:version&gt;1.0&lt;/dep:version&gt;\n            &lt;dep:type&gt;car&lt;/dep:type&gt;\n        &lt;/dep:moduleId&gt;\n\n        &lt;!-- Don&apos;t load commons-io or fileupload from parent classloaders --&gt;\n        &lt;dep:hidden-classes&gt;\n            &lt;dep:filter&gt;org.apache.commons.io&lt;/dep:filter&gt;\n            &lt;dep:filter&gt;org.apache.commons.fileupload&lt;/dep:filter&gt;\n        &lt;/dep:hidden-classes&gt;\n        &lt;dep:inverse-classloading/&gt;\n\n    &lt;/dep:environment&gt;\n    &lt;web:context-root&gt;/DataStar&lt;/web:context-root&gt;\n&lt;/web:web-app&gt;\n\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"Here&apos;s an example using apache commons-fileupload:\n\n// apache commons-fileupload to handle file upload\nDiskFileItemFactory factory = new DiskFileItemFactory();\nfactory.setRepository(new File(DataSources.TORRENTS_DIR()));\nServletFileUpload fileUpload = new ServletFileUpload(factory);\n\nList&lt;FileItem&gt; items = fileUpload.parseRequest(req.raw());\nFileItem item = items.stream()\n  .filter(e -&gt;\n  &quot;the_upload_name&quot;.equals(e.getFieldName()))\n  .findFirst().get();\nString fileName = item.getName();\n\nitem.write(new File(dir, fileName));\nlog.info(fileName);\n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"You first have to set the enctype attribute of the form to &quot;multipart/form-data&quot;\nThis is shown below.\n&lt;form action=&quot;Controller&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\n     &lt;label class=&quot;file-upload&quot;&gt; Click here to upload an Image &lt;/label&gt;\n     &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot; required&gt;\n&lt;/form&gt;\n\nAnd then, in the Servlet &quot;Controller&quot; add the Annotation for a Multi-part to indicate multipart data is processed in the servlet.\nAfter doing this, retrieve the part sent through the form and then retrieve the file name (with path)of the submitted file. Use this to create a new file in the desired path and write the parts of the file to the newly created file to recreate the file.\nAs shown below:\n@MultipartConfig\n\npublic class Controller extends HttpServlet {\n\n    protected void doPost(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n        insertImage(request, response);\n    }\n\n    private void addProduct(HttpServletRequest request, HttpServletResponse response) {\n        Part filePart = request.getPart(&quot;file&quot;);\n        String imageName = Paths.get(filePart.getSubmittedFileName()).getFileName().toString();\n\n        String imageSavePath = &quot;specify image path to save image&quot;; //path to save image\n        FileOutputStream outputStream = null;\n        InputStream fileContent = null;\n\n        try {\n            outputStream = new FileOutputStream(new File(imageSavePath + File.separator + imageName));\n            // Creating a new file with file path and the file name\n            fileContent = filePart.getInputStream();\n            // Getting the input stream\n            int readBytes = 0;\n            byte[] readArray = new byte[1024];\n            // Initializing a byte array with size 1024\n\n            while ((readBytes = fileContent.read(readArray)) != -1) {\n                outputStream.write(readArray, 0, readBytes);\n            } // This loop will write the contents of the byte array unitl the end to the output stream\n        } catch (Exception ex) {\n            System.out.println(&quot;Error Writing File: &quot; + ex);\n        } finally {\n            if (outputStream != null) {\n                outputStream.close();\n                // Closing the output stream\n            }\n            if (fileContent != null) {\n                fileContent.close();\n                // Closing the input stream\n            }\n        }\n    }\n}\n\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"The simplest way I could come up with for files and input controls, without a billion libraries:\n  &lt;%\n      if (request.getContentType() == null)\n          return;\n      // For input type=text controls\n      String v_Text =\n          (new BufferedReader(new InputStreamReader(request.getPart(&quot;Text1&quot;).getInputStream()))).readLine();\n\n      // For input type=file controls\n      InputStream inStr = request.getPart(&quot;File1&quot;).getInputStream();\n      char charArray[] = new char[inStr.available()];\n      new InputStreamReader(inStr).read(charArray);\n      String contents = new String(charArray);\n  %&gt;\n\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"Use:\nDiskFileUpload upload = new DiskFileUpload();\n\nFrom this object you have to get the file items and fields, and then you can store into the server like the following:\nString loc = &quot;./webapps/prjct name/server folder/&quot; + contentid + extension;\nFile uploadFile = new File(loc);\nitem.write(uploadFile);\n\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"You can upload a file using JSP /servlet.\n&lt;form action=&quot;UploadFileServlet&quot; method=&quot;post&quot;&gt;\n    &lt;input type=&quot;text&quot; name=&quot;description&quot; /&gt;\n    &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;\n    &lt;input type=&quot;submit&quot; /&gt;\n&lt;/form&gt;\n\nOn the other hand, on the server side, use the following code.\npackage com.abc..servlet;\n\nimport java.io.File;\n---------\n--------\n\n\n/**\n * Servlet implementation class UploadFileServlet\n */\npublic class UploadFileServlet extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n\n    public UploadFileServlet() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        // TODO Auto-generated method stub\n        response.sendRedirect(&quot;../jsp/ErrorPage.jsp&quot;);\n    }\n\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        // TODO Auto-generated method stub\n\n        PrintWriter out = response.getWriter();\n        HttpSession httpSession = request.getSession();\n        String filePathUpload = (String) httpSession.getAttribute(&quot;path&quot;) != null ? httpSession.getAttribute(&quot;path&quot;).toString() : &quot;&quot; ;\n\n        String path1 = filePathUpload;\n        String filename = null;\n        File path = null;\n        FileItem item = null;\n\n\n        boolean isMultipart = ServletFileUpload.isMultipartContent(request);\n\n        if (isMultipart) {\n            FileItemFactory factory = new DiskFileItemFactory();\n            ServletFileUpload upload = new ServletFileUpload(factory);\n            String FieldName = &quot;&quot;;\n            try {\n                List items = upload.parseRequest(request);\n                Iterator iterator = items.iterator();\n                while (iterator.hasNext()) {\n                     item = (FileItem) iterator.next();\n\n                        if (fieldname.equals(&quot;description&quot;)) {\n                            description = item.getString();\n                        }\n                    }\n                    if (!item.isFormField()) {\n                        filename = item.getName();\n                        path = new File(path1 + File.separator);\n                        if (!path.exists()) {\n                            boolean status = path.mkdirs();\n                        }\n                        /* Start of code fro privilege */\n\n                        File uploadedFile = new File(path + Filename);  // for copy file\n                        item.write(uploadedFile);\n                        }\n                    } else {\n                        f1 = item.getName();\n                    }\n\n                } // END OF WHILE\n                response.sendRedirect(&quot;welcome.jsp&quot;);\n            } catch (FileUploadException e) {\n                e.printStackTrace();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"HTML page\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;File Uploading Form&lt;/title&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n        &lt;h3&gt;File Upload:&lt;/h3&gt;\n        Select a file to upload: &lt;br /&gt;\n        &lt;form action=&quot;UploadServlet&quot; method=&quot;post&quot;\n              enctype=&quot;multipart/form-data&quot;&gt;\n\n            &lt;input type=&quot;file&quot; name=&quot;file&quot; size=&quot;50&quot; /&gt;\n            &lt;br /&gt;\n            &lt;input type=&quot;submit&quot; value=&quot;Upload File&quot; /&gt;\n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n\nServlet file\n// Import required java libraries\nimport java.io.*;\nimport java.util.*;\n\nimport javax.servlet.ServletConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.apache.commons.fileupload.FileItem;\nimport org.apache.commons.fileupload.FileUploadException;\nimport org.apache.commons.fileupload.disk.DiskFileItemFactory;\nimport org.apache.commons.fileupload.servlet.ServletFileUpload;\nimport org.apache.commons.io.output.*;\n\npublic class UploadServlet extends HttpServlet {\n\n    private boolean isMultipart;\n    private String filePath;\n    private int maxFileSize = 50 * 1024;\n    private int maxMemSize = 4 * 1024;\n    private File file;\n\n    public void init() {\n        // Get the file location where it would be stored.\n        filePath =\n               getServletContext().getInitParameter(&quot;file-upload&quot;);\n    }\n\n    public void doPost(HttpServletRequest request,\n                       HttpServletResponse response)\n               throws ServletException, java.io.IOException {\n\n        // Check that we have a file upload request\n        isMultipart = ServletFileUpload.isMultipartContent(request);\n        response.setContentType(&quot;text/html&quot;);\n        java.io.PrintWriter out = response.getWriter();\n        if (!isMultipart) {\n            out.println(&quot;&lt;html&gt;&quot;);\n            out.println(&quot;&lt;head&gt;&quot;);\n            out.println(&quot;&lt;title&gt;Servlet upload&lt;/title&gt;&quot;);\n            out.println(&quot;&lt;/head&gt;&quot;);\n            out.println(&quot;&lt;body&gt;&quot;);\n            out.println(&quot;&lt;p&gt;No file uploaded&lt;/p&gt;&quot;);\n            out.println(&quot;&lt;/body&gt;&quot;);\n            out.println(&quot;&lt;/html&gt;&quot;);\n            return;\n        }\n\n        DiskFileItemFactory factory = new DiskFileItemFactory();\n        // Maximum size that will be stored in memory\n        factory.setSizeThreshold(maxMemSize);\n        // Location to save data that is larger than maxMemSize.\n        factory.setRepository(new File(&quot;c:\\\\temp&quot;));\n\n        // Create a new file upload handler\n        ServletFileUpload upload = new ServletFileUpload(factory);\n        // maximum file size to be uploaded.\n        upload.setSizeMax(maxFileSize);\n\n        try {\n            // Parse the request to get file items.\n            List fileItems = upload.parseRequest(request);\n\n            // Process the uploaded file items\n            Iterator i = fileItems.iterator();\n\n            out.println(&quot;&lt;html&gt;&quot;);\n            out.println(&quot;&lt;head&gt;&quot;);\n            out.println(&quot;&lt;title&gt;Servlet upload&lt;/title&gt;&quot;);\n            out.println(&quot;&lt;/head&gt;&quot;);\n            out.println(&quot;&lt;body&gt;&quot;);\n            while (i.hasNext())\n            {\n                FileItem fi = (FileItem)i.next();\n                if (!fi.isFormField())\n                {\n                     // Get the uploaded file parameters\n                     String fieldName = fi.getFieldName();\n                     String fileName = fi.getName();\n                     String contentType = fi.getContentType();\n                     boolean isInMemory = fi.isInMemory();\n                     long sizeInBytes = fi.getSize();\n\n                     // Write the file\n                     if (fileName.lastIndexOf(&quot;\\\\&quot;) &gt;= 0) {\n                         file = new File(filePath +\n                         fileName.substring(fileName.lastIndexOf(&quot;\\\\&quot;)));\n                     }\n                     else {\n                         file = new File(filePath +\n                         fileName.substring(fileName.lastIndexOf(&quot;\\\\&quot;) + 1));\n                     }\n                     fi.write(file);\n                     out.println(&quot;Uploaded Filename: &quot; + fileName + &quot;&lt;br&gt;&quot;);\n                }\n            }\n            out.println(&quot;&lt;/body&gt;&quot;);\n            out.println(&quot;&lt;/html&gt;&quot;);\n        }\n        catch(Exception ex) {\n            System.out.println(ex);\n        }\n    }\n\n    public void doGet(HttpServletRequest request,\n                        HttpServletResponse response)\n            throws ServletException, java.io.IOException {\n\n        throw new ServletException(&quot;GET method used with &quot; +\n                 getClass().getName() + &quot;: POST method required.&quot;);\n    }\n}\n\nFile web.xml\nCompile the above servlet UploadServlet and create the required entry in the web.xml file as follows.\n&lt;servlet&gt;\n   &lt;servlet-name&gt;UploadServlet&lt;/servlet-name&gt;\n   &lt;servlet-class&gt;UploadServlet&lt;/servlet-class&gt;\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt;\n   &lt;servlet-name&gt;UploadServlet&lt;/servlet-name&gt;\n   &lt;url-pattern&gt;/UploadServlet&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"Sending multiple files for file, we have to use enctype=&quot;multipart/form-data&quot;.\nAnd to send multiple files, use multiple=&quot;multiple&quot; in the input tag:\n&lt;form action=&quot;upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\n    &lt;input type=&quot;file&quot; name=&quot;fileattachments&quot;  multiple=&quot;multiple&quot;/&gt;\n    &lt;input type=&quot;submit&quot; /&gt;\n&lt;/form&gt;\n\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-b06815e21c943e0d.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-79a1437acf654019.js" defer=""></script><script src="/_next/static/TQ2eYlCSdocSK-hq6gkM0/_buildManifest.js" defer=""></script><script src="/_next/static/TQ2eYlCSdocSK-hq6gkM0/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658"><h1>How can I upload files to a server using JSP/Servlet?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/file-upload">file-upload</a></div></div><div class="question-content mt-5">
                
<p>How can I upload files to server using JSP/Servlet?</p>
<p>I tried this:</p>
<pre class="lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"upload"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"description"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"file"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<p>However, I only get the file name, not the file content. When I add  <code>enctype="multipart/form-data"</code> to the <code>&lt;form&gt;</code>, then <code>request.getParameter()</code> returns <code>null</code>.</p>
<p>During research I stumbled upon <a href="http://commons.apache.org/fileupload" rel="noreferrer">Apache Common FileUpload</a>. I tried this:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">FileItemFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiskFileItemFactory</span>();
<span class="hljs-type">ServletFileUpload</span> <span class="hljs-variable">upload</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletFileUpload</span>(factory);
<span class="hljs-type">List</span> <span class="hljs-variable">items</span> <span class="hljs-operator">=</span> upload.parseRequest(request); <span class="hljs-comment">// This line is where it died.</span>
</code></pre>
<p>Unfortunately, the servlet threw an exception without a clear message and cause. Here is the stacktrace:</p>
<pre class="lang-none s-code-block"><code>SEVERE: Servlet.service() for servlet UploadServlet threw exception
javax.servlet.ServletException: Servlet execution threw an exception
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:313)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:637)
</code></pre>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>Introduction</h2>
<p>To browse and select a file for upload you need a HTML <code>&lt;input type="file"&gt;</code> field in the form. As stated in the <a href="http://www.w3.org/TR/html4/interact/forms.html" rel="noreferrer">HTML specification</a> you have to use the <code>POST</code> method and the <code>enctype</code> attribute of the form has to be set to <code>"multipart/form-data"</code>.</p>
<pre class="lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"upload"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"description"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"file"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<p>After submitting such a form, the binary multipart form data is available in the request body in <a href="https://stackoverflow.com/questions/13372775/servlet-handling-file-upload-why-bigger-than-the-original/13399437#13399437">a different format</a> than when the <code>enctype</code> isn't set.</p>
<p>Before Servlet 3.0 (Dec 2009), the Servlet API didn't natively support <code>multipart/form-data</code>. It supports only the default form enctype of <code>application/x-www-form-urlencoded</code>. The <code>request.getParameter()</code> and consorts would all return <code>null</code> when using multipart form data. This is where the well known <a href="http://commons.apache.org/fileupload" rel="noreferrer">Apache Commons FileUpload</a> came into the picture.</p>
<h2>Don't manually parse it!</h2>
<p>You can in theory parse the request body yourself based on <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getInputStream%28%29" rel="noreferrer"><code>ServletRequest#getInputStream()</code></a>. However, this is a precise and tedious work which requires precise knowledge of <a href="http://www.faqs.org/rfcs/rfc2388.html" rel="noreferrer">RFC2388</a>. You shouldn't try to do this on your own or copypaste some homegrown library-less code found elsewhere on the Internet. Many online sources have failed hard in this, such as roseindia.net. See also <a href="https://stackoverflow.com/questions/5038798/uploading-of-pdf-file">uploading of pdf file</a>. You should rather use a real library which is used (and implicitly tested!) by millions of users for years. Such a library has proven its robustness.</p>
<h2>When you're already on Servlet 3.0 or newer, use native API</h2>
<p>If you're using at least Servlet 3.0 (Tomcat 7, Jetty 9, JBoss AS 6, GlassFish 3, etc, they exist already since 2010), then you can just use standard API provided <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getParts()" rel="noreferrer"><code>HttpServletRequest#getPart()</code></a> to collect the individual multipart form data items (most Servlet 3.0 implementations <em>actually</em> use Apache Commons FileUpload under the covers for this!). Also, normal form fields are available by <code>getParameter()</code> the usual way.</p>
<p>First annotate your servlet with <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/MultipartConfig.html" rel="noreferrer"><code>@MultipartConfig</code></a> in order to let it recognize and support <code>multipart/form-data</code> requests and thus get <code>getPart()</code> to work:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-meta">@WebServlet("/upload")</span>
<span class="hljs-meta">@MultipartConfig</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UploadServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>Then, implement its <code>doPost()</code> as follows:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException {
    <span class="hljs-type">String</span> <span class="hljs-variable">description</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">"description"</span>); <span class="hljs-comment">// Retrieves &lt;input type="text" name="description"&gt;</span>
    <span class="hljs-type">Part</span> <span class="hljs-variable">filePart</span> <span class="hljs-operator">=</span> request.getPart(<span class="hljs-string">"file"</span>); <span class="hljs-comment">// Retrieves &lt;input type="file" name="file"&gt;</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> Paths.get(filePart.getSubmittedFileName()).getFileName().toString(); <span class="hljs-comment">// MSIE fix.</span>
    <span class="hljs-type">InputStream</span> <span class="hljs-variable">fileContent</span> <span class="hljs-operator">=</span> filePart.getInputStream();
    <span class="hljs-comment">// ... (do your job here)</span>
}
</code></pre>
<p>Note the <code>Path#getFileName()</code>. This is a MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.</p>
<p>In case you want to upload multiple files via either <code>multiple="true"</code>,</p>
<pre class="lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"files"</span> <span class="hljs-attr">multiple</span>=<span class="hljs-string">"true"</span> /&gt;</span>
</code></pre>
<p>or the old-fashioned way with multiple inputs,</p>
<pre class="lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"files"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"files"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"files"</span> /&gt;</span>
...
</code></pre>
<p>then you can collect them as below (unfortunately there is no such method as <code>request.getParts("files")</code>):</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException {
    <span class="hljs-comment">// ...</span>
    List&lt;Part&gt; fileParts = request.getParts().stream().filter(part -&gt; <span class="hljs-string">"files"</span>.equals(part.getName()) &amp;&amp; part.getSize() &gt; <span class="hljs-number">0</span>).collect(Collectors.toList()); <span class="hljs-comment">// Retrieves &lt;input type="file" name="files" multiple="true"&gt;</span>

    <span class="hljs-keyword">for</span> (Part filePart : fileParts) {
        <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> Paths.get(filePart.getSubmittedFileName()).getFileName().toString(); <span class="hljs-comment">// MSIE fix.</span>
        <span class="hljs-type">InputStream</span> <span class="hljs-variable">fileContent</span> <span class="hljs-operator">=</span> filePart.getInputStream();
        <span class="hljs-comment">// ... (do your job here)</span>
    }
}
</code></pre>
<h2>When you're not on Servlet 3.1 yet, manually get submitted file name</h2>
<p>Note that <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/Part.html#getSubmittedFileName()" rel="noreferrer"><code>Part#getSubmittedFileName()</code></a> was introduced in Servlet 3.1 (Tomcat 8, Jetty 9, WildFly 8, GlassFish 4, etc, they exist since 2013 already). If you're not on Servlet 3.1 yet (really?), then you need an additional utility method to obtain the submitted file name.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getSubmittedFileName</span><span class="hljs-params">(Part part)</span> {
    <span class="hljs-keyword">for</span> (String cd : part.getHeader(<span class="hljs-string">"content-disposition"</span>).split(<span class="hljs-string">";"</span>)) {
        <span class="hljs-keyword">if</span> (cd.trim().startsWith(<span class="hljs-string">"filename"</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> cd.substring(cd.indexOf(<span class="hljs-string">'='</span>) + <span class="hljs-number">1</span>).trim().replace(<span class="hljs-string">"\""</span>, <span class="hljs-string">""</span>);
            <span class="hljs-keyword">return</span> fileName.substring(fileName.lastIndexOf(<span class="hljs-string">'/'</span>) + <span class="hljs-number">1</span>).substring(fileName.lastIndexOf(<span class="hljs-string">'\\'</span>) + <span class="hljs-number">1</span>); <span class="hljs-comment">// MSIE fix.</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> getSubmittedFileName(filePart);
</code></pre>
<p>Note the MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.</p>
<h2>When you're not on Servlet 3.0 yet, use Apache Commons FileUpload</h2>
<p>If you're not on Servlet 3.0 yet (isn't it about time to upgrade? it's released over a decade ago!), the common practice is to make use of <a href="http://commons.apache.org/fileupload" rel="noreferrer">Apache Commons FileUpload</a> to parse the multpart form data requests. It has an excellent <a href="http://commons.apache.org/fileupload/using.html" rel="noreferrer">User Guide</a> and <a href="http://commons.apache.org/fileupload/faq.html" rel="noreferrer">FAQ</a> (carefully go through both). There's also the O'Reilly ("<a href="http://www.servlets.com/cos/" rel="noreferrer">cos</a>") <code>MultipartRequest</code>, but it has some (minor) bugs and isn't actively maintained anymore for years. I wouldn't recommend using it. Apache Commons FileUpload is still actively maintained and currently very mature.</p>
<p>In order to use Apache Commons FileUpload, you need to have at least the following files in your webapp's <code>/WEB-INF/lib</code>:</p>
<ul>
<li><a href="http://commons.apache.org/proper/commons-fileupload/download_fileupload.cgi" rel="noreferrer"><code>commons-fileupload.jar</code></a></li>
<li><a href="http://commons.apache.org/proper/commons-io/download_io.cgi" rel="noreferrer"><code>commons-io.jar</code></a></li>
</ul>
<p>Your initial attempt failed most likely because you forgot the commons IO.</p>
<p>Here's a kickoff example how the <code>doPost()</code> of your <code>UploadServlet</code> may look like when using Apache Commons FileUpload:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException {
    <span class="hljs-keyword">try</span> {
        List&lt;FileItem&gt; items = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletFileUpload</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DiskFileItemFactory</span>()).parseRequest(request);
        <span class="hljs-keyword">for</span> (FileItem item : items) {
            <span class="hljs-keyword">if</span> (item.isFormField()) {
                <span class="hljs-comment">// Process regular form field (input type="text|radio|checkbox|etc", select, etc).</span>
                <span class="hljs-type">String</span> <span class="hljs-variable">fieldName</span> <span class="hljs-operator">=</span> item.getFieldName();
                <span class="hljs-type">String</span> <span class="hljs-variable">fieldValue</span> <span class="hljs-operator">=</span> item.getString();
                <span class="hljs-comment">// ... (do your job here)</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// Process form file field (input type="file").</span>
                <span class="hljs-type">String</span> <span class="hljs-variable">fieldName</span> <span class="hljs-operator">=</span> item.getFieldName();
                <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> FilenameUtils.getName(item.getName());
                <span class="hljs-type">InputStream</span> <span class="hljs-variable">fileContent</span> <span class="hljs-operator">=</span> item.getInputStream();
                <span class="hljs-comment">// ... (do your job here)</span>
            }
        }
    } <span class="hljs-keyword">catch</span> (FileUploadException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletException</span>(<span class="hljs-string">"Cannot parse multipart request."</span>, e);
    }

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>It's very important that you don't call <code>getParameter()</code>, <code>getParameterMap()</code>, <code>getParameterValues()</code>, <code>getInputStream()</code>, <code>getReader()</code>, etc on the same request beforehand. Otherwise the servlet container will read and parse the request body and thus Apache Commons FileUpload will get an empty request body. See also a.o. <a href="https://stackoverflow.com/questions/13881272/servletfileuploadparserequestrequest-returns-an-empty-list">ServletFileUpload#parseRequest(request) returns an empty list</a>.</p>
<p>Note the <code>FilenameUtils#getName()</code>. This is a MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.</p>
<p>Alternatively you can also wrap this all in a <code>Filter</code> which parses it all automagically and put the stuff back in the parametermap of the request so that you can continue using <code>request.getParameter()</code> the usual way and retrieve the uploaded file by <code>request.getAttribute()</code>. <a href="http://balusc.blogspot.com/2007/11/multipartfilter.html" rel="noreferrer">You can find an example in this blog article</a>.</p>
<h2>Workaround for GlassFish3 bug of <code>getParameter()</code> still returning <code>null</code></h2>
<p>Note that Glassfish versions older than 3.1.2 had <a href="http://java.net/jira/browse/GLASSFISH-16740" rel="noreferrer">a bug</a> wherein the <code>getParameter()</code> still returns <code>null</code>. If you are targeting such a container and can't upgrade it, then you need to extract the value from <code>getPart()</code> with help of this utility method:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getValue</span><span class="hljs-params">(Part part)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(part.getInputStream(), <span class="hljs-string">"UTF-8"</span>));
    <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
    <span class="hljs-type">char</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">1024</span>];
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; (length = reader.read(buffer)) &gt; <span class="hljs-number">0</span>;) {
        value.append(buffer, <span class="hljs-number">0</span>, length);
    }
    <span class="hljs-keyword">return</span> value.toString();
}
</code></pre>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">String</span> <span class="hljs-variable">description</span> <span class="hljs-operator">=</span> getValue(request.getPart(<span class="hljs-string">"description"</span>)); <span class="hljs-comment">// Retrieves &lt;input type="text" name="description"&gt;</span>
    
</code></pre>
<h2>Saving uploaded file (don't use <code>getRealPath()</code> nor <code>part.write()</code>!)</h2>
<p>Head to the following answers for detail on properly saving the obtained <code>InputStream</code> (the <code>fileContent</code> variable as shown in the above code snippets) to disk or database:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/18664579/recommended-way-to-save-files-uploaded-to-a-tomcat-servlet/18664715#18664715">Recommended way to save uploaded files in a servlet application</a></li>
<li><a href="https://stackoverflow.com/questions/7033676/how-to-upload-an-image-and-save-it-in-database/7033945#7033945">How to upload an image and save it in database?</a></li>
<li><a href="https://stackoverflow.com/questions/19138706/how-to-convert-part-to-blob-so-i-can-store-it-in-mysql/19139125#19139125">How to convert Part to Blob, so I can store it in MySQL?</a></li>
</ul>
<h2>Serving uploaded file</h2>
<p>Head to the following answers for detail on properly serving the saved file from disk or database back to the client:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/4543936/load-images-from-outside-of-webapps-webcontext-deploy-folder-using-hgraphi/4543951#4543951">Load images from outside of webapps / webcontext / deploy folder using &lt;h:graphicImage&gt; or &lt;img&gt; tag</a></li>
<li><a href="https://stackoverflow.com/questions/2340406/how-to-retrieve-and-display-images-from-a-database-in-a-jsp-page/2341322#2341322">How to retrieve and display images from a database in a JSP page?</a></li>
<li><a href="https://stackoverflow.com/questions/1812244/simplest-way-to-serve-static-data-from-outside-the-application-server-in-a-java/1812356#1812356">Simplest way to serve static data from outside the application server in a Java web application</a></li>
<li><a href="https://stackoverflow.com/questions/132052/servlet-for-serving-static-content/29991447#29991447">Abstract template for static resource servlet supporting HTTP caching</a></li>
</ul>
<h2>Ajaxifying the form</h2>
<p>Head to the following answers how to upload using Ajax (and jQuery). Do note that the servlet code to collect the form data does not need to be changed for this! Only the way how you respond may be changed, but this is rather trivial (i.e. instead of forwarding to JSP, just print some JSON or XML or even plain text depending on whatever the script responsible for the Ajax call is expecting).</p>
<ul>
<li><a href="https://stackoverflow.com/questions/6914152/how-to-upload-files-to-server-using-jsp-servlet-and-ajax">How can I upload files to a server using JSP/Servlet and Ajax?</a></li>
<li><a href="https://stackoverflow.com/questions/9395911/sending-a-file-as-multipart-through-xmlhttprequest">Send a file as multipart through XMLHttpRequest</a></li>
<li><a href="https://stackoverflow.com/questions/7114087/html5-file-upload-to-java-servlet">HTML5 drag and drop file upload to Java Servlet</a></li>
</ul>
<hr>
<p>Hope this all helps :)</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you happen to use <a href="https://en.wikipedia.org/wiki/Spring_Framework#Model-view-controller_framework" rel="nofollow noreferrer">Spring MVC</a>, this is how to (I'm leaving this here in case someone find it useful):</p>
<p>Use a form with <code>enctype</code> attribute set to "<code>multipart/form-data</code>" (the same as <a href="https://stackoverflow.com/questions/2422468/how-can-i-upload-files-to-a-server-using-jsp-servlet/2424824#2424824">BalusC's answer</a>):</p>
<pre class="lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"upload"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"file"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Upload"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<p>In your controller, map the request parameter <code>file</code> to <code>MultipartFile</code> type as follows:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-meta">@RequestMapping(value = "/upload", method = RequestMethod.POST)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleUpload</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam("file")</span> MultipartFile file)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-keyword">if</span> (!file.isEmpty()) {
            <span class="hljs-type">byte</span>[] bytes = file.getBytes(); <span class="hljs-comment">// alternatively, file.getInputStream();</span>
            <span class="hljs-comment">// application logic</span>
    }
}
</code></pre>
<p>You can get the filename and size using <code>MultipartFile</code>'s <code>getOriginalFilename()</code> and <code>getSize()</code>.</p>
<p>I've tested this with Spring version <code>4.1.1.RELEASE</code>.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Without components or external libraries in Tomcat 6 or Tomcat 7</strong></p>
<p>Enabling upload in the <strong>web.xml</strong> file:</p>
<p><em><a href="http://joseluisbz.wordpress.com/2014/01/17/manually-installing-php-tomcat-and-httpd-lounge/#Enabling%20File%20Uploads" rel="nofollow noreferrer">Manually Installing PHP, Tomcat and Httpd Lounge</a></em>.</p>
<pre class="lang-xml s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>jsp<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.apache.jasper.servlet.JspServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">multipart-config</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">max-file-size</span>&gt;</span>3145728<span class="hljs-tag">&lt;/<span class="hljs-name">max-file-size</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">max-request-size</span>&gt;</span>5242880<span class="hljs-tag">&lt;/<span class="hljs-name">max-request-size</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">multipart-config</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>fork<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>xpoweredBy<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>
</code></pre>
<p><em>As you can see</em>:</p>
<pre class="lang-xml s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">multipart-config</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">max-file-size</span>&gt;</span>3145728<span class="hljs-tag">&lt;/<span class="hljs-name">max-file-size</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">max-request-size</span>&gt;</span>5242880<span class="hljs-tag">&lt;/<span class="hljs-name">max-request-size</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">multipart-config</span>&gt;</span>
</code></pre>
<p><strong>Uploading files using JSP. files:</strong></p>
<p><em>In the HTML file</em></p>
<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;form method=<span class="hljs-string">"post"</span> enctype=<span class="hljs-string">"multipart/form-data"</span> name=<span class="hljs-string">"Form"</span> &gt;

  &lt;input type=<span class="hljs-string">"file"</span> name=<span class="hljs-string">"fFoto"</span> id=<span class="hljs-string">"fFoto"</span> value=<span class="hljs-string">""</span> /&gt;&lt;/td&gt;
  &lt;input type=<span class="hljs-string">"file"</span> name=<span class="hljs-string">"fResumen"</span> id=<span class="hljs-string">"fResumen"</span> value=<span class="hljs-string">""</span>/&gt;
</code></pre>
<p><em>In the JSP File</em> or <em>Servlet</em></p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">InputStream</span> <span class="hljs-variable">isFoto</span> <span class="hljs-operator">=</span> request.getPart(<span class="hljs-string">"fFoto"</span>).getInputStream();
<span class="hljs-type">InputStream</span> <span class="hljs-variable">isResu</span> <span class="hljs-operator">=</span> request.getPart(<span class="hljs-string">"fResumen"</span>).getInputStream();
<span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">baos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();
<span class="hljs-type">byte</span> buf[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">8192</span>];
<span class="hljs-type">int</span> <span class="hljs-variable">qt</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-keyword">while</span> ((qt = isResu.read(buf)) != -<span class="hljs-number">1</span>) {
  baos.write(buf, <span class="hljs-number">0</span>, qt);
}
<span class="hljs-type">String</span> <span class="hljs-variable">sResumen</span> <span class="hljs-operator">=</span> baos.toString();
</code></pre>
<p>Edit your code to servlet requirements, like <em>max-file-size</em>, <em>max-request-size</em> and other options that you can to set...</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You need the <code>common-io.1.4.jar</code> file to be included in your <code>lib</code> directory, or if you're working in any editor, like NetBeans, then you need to go to project properties and just add the JAR file and you will be done. </p>

<p>To get the <code>common.io.jar</code> file just google it or just go to the Apache <a href="http://en.wikipedia.org/wiki/Apache_Tomcat">Tomcat</a> website where you get the option for a free download of this file. But remember one thing: download the binary ZIP file if you're a Windows user.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I am using a common Servlet for <strong>every</strong> HTML form whether it has attachments or not.</p>
<p>This Servlet returns a <code>TreeMap</code> where the keys are JSP name parameters and values are user inputs and saves all attachments in a fixed directory and later you rename the directory of your choice. Here <em>Connections</em> is our custom interface having a connection object.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServletCommonfunctions</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> <span class="hljs-keyword">implements</span>
        <span class="hljs-title class_">Connections</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ServletCommonfunctions</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request,
                          HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException,
                          IOException {}

    <span class="hljs-keyword">public</span> SortedMap&lt;String, String&gt; <span class="hljs-title function_">savefilesindirectory</span><span class="hljs-params">(
            HttpServletRequest request, HttpServletResponse response)</span>
            <span class="hljs-keyword">throws</span> IOException {

        <span class="hljs-comment">// Map&lt;String, String&gt; key_values = Collections.synchronizedMap(new</span>
        <span class="hljs-comment">// TreeMap&lt;String, String&gt;());</span>
        SortedMap&lt;String, String&gt; key_values = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&lt;String, String&gt;();
        <span class="hljs-type">String</span> <span class="hljs-variable">dist</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>, fact = <span class="hljs-literal">null</span>;
        <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> response.getWriter();
        File file;
        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">"E:\\FSPATH1\\2KL06CS048\\"</span>;
        System.out.println(<span class="hljs-string">"Directory Created   ????????????"</span>
            + <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath).mkdir());
        <span class="hljs-type">int</span> <span class="hljs-variable">maxFileSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">5000</span> * <span class="hljs-number">1024</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">maxMemSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">5000</span> * <span class="hljs-number">1024</span>;

        <span class="hljs-comment">// Verify the content type</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">contentType</span> <span class="hljs-operator">=</span> request.getContentType();
        <span class="hljs-keyword">if</span> ((contentType.indexOf(<span class="hljs-string">"multipart/form-data"</span>) &gt;= <span class="hljs-number">0</span>)) {
            <span class="hljs-type">DiskFileItemFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiskFileItemFactory</span>();
            <span class="hljs-comment">// Maximum size that will be stored in memory</span>
            factory.setSizeThreshold(maxMemSize);
            <span class="hljs-comment">// Location to save data that is larger than maxMemSize.</span>
            factory.setRepository(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath));
            <span class="hljs-comment">// Create a new file upload handler</span>
            <span class="hljs-type">ServletFileUpload</span> <span class="hljs-variable">upload</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletFileUpload</span>(factory);
            <span class="hljs-comment">// maximum file size to be uploaded.</span>
            upload.setSizeMax(maxFileSize);
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// Parse the request to get file items.</span>
                <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
                List&lt;FileItem&gt; fileItems = upload.parseRequest(request);
                <span class="hljs-comment">// Process the uploaded file items</span>
                Iterator&lt;FileItem&gt; i = fileItems.iterator();
                <span class="hljs-keyword">while</span> (i.hasNext()) {
                    <span class="hljs-type">FileItem</span> <span class="hljs-variable">fi</span> <span class="hljs-operator">=</span> (FileItem) i.next();
                    <span class="hljs-keyword">if</span> (!fi.isFormField()) {
                        <span class="hljs-comment">// Get the uploaded file parameters</span>
                        <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> fi.getName();
                        <span class="hljs-comment">// Write the file</span>
                        <span class="hljs-keyword">if</span> (fileName.lastIndexOf(<span class="hljs-string">"\\"</span>) &gt;= <span class="hljs-number">0</span>) {
                            file = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath
                                + fileName.substring(fileName
                                        .lastIndexOf(<span class="hljs-string">"\\"</span>)));
                        } <span class="hljs-keyword">else</span> {
                            file = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath
                                + fileName.substring(fileName
                                        .lastIndexOf(<span class="hljs-string">"\\"</span>) + <span class="hljs-number">1</span>));
                        }
                        fi.write(file);
                    } <span class="hljs-keyword">else</span> {
                        key_values.put(fi.getFieldName(), fi.getString());
                    }
                }
            } <span class="hljs-keyword">catch</span> (Exception ex) {
                System.out.println(ex);
            }
        }
        <span class="hljs-keyword">return</span> key_values;
    }
}
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>For Spring MVC</strong></p>
<p>I managed to have a simpler version that worked for taking form input, both data and images.</p>
<pre class="lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"/handleform"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"age"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"file"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<h3>Controller to handle</h3>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-meta">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FormController</span> {
    <span class="hljs-meta">@RequestMapping(value="/handleform",method= RequestMethod.POST)</span>
    ModelAndView <span class="hljs-title function_">register</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String name, <span class="hljs-meta">@RequestParam</span> <span class="hljs-type">int</span> age, <span class="hljs-meta">@RequestParam</span> MultipartFile file)</span>
            <span class="hljs-keyword">throws</span> ServletException, IOException {

        System.out.println(name);
        System.out.println(age);
        <span class="hljs-keyword">if</span>(!file.isEmpty()){
            <span class="hljs-type">byte</span>[] bytes = file.getBytes();
            <span class="hljs-type">String</span> <span class="hljs-variable">filename</span> <span class="hljs-operator">=</span> file.getOriginalFilename();
            <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"D:/"</span> + filename)));
            stream.write(bytes);
            stream.flush();
            stream.close();
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelAndView</span>(<span class="hljs-string">"index"</span>);
    }
}
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Another source of this problem occurs if you are using <a href="https://en.wikipedia.org/wiki/Apache_Geronimo" rel="nofollow noreferrer">Geronimo</a> with its embedded Tomcat. In this case, after many iterations of testing <a href="https://commons.apache.org/proper/commons-io/" rel="nofollow noreferrer">Commons IO</a> and commons-fileupload, the problem arises from a parent classloader handling the commons-xxx JAR files. This has to be prevented. The crash always occurred at:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">fileItems = uploader.parseRequest(request);
</code></pre>
<p>Note that the List type of fileItems has changed with the current version of commons-fileupload to be specifically <code>List&lt;FileItem&gt;</code> as opposed to prior versions where it was generic <code>List</code>.</p>
<p>I added the source code for commons-fileupload and Commons IO into my <a href="https://en.wikipedia.org/wiki/Eclipse_%28software%29" rel="nofollow noreferrer">Eclipse</a> project to trace the actual error and finally got some insight. First, the exception thrown is of type Throwable not the stated FileIOException nor even Exception (these will not be trapped). Second, the error message is obfuscatory in that it stated class not found because axis2 could not find commons-io.  Axis2 is not used in my project at all, but it exists as a folder in the Geronimo repository subdirectory as part of standard installation.</p>
<p>Finally, I found one place that posed a working solution which successfully solved my problem. You must hide the JAR files from the parent loader in the deployment plan. This was put into the <em>geronimo-web.xml</em> file with my full file shown below.</p>
<p>Pasted from <em><a href="http://osdir.com/ml/user-geronimo-apache/2011-03/msg00026.html" rel="nofollow noreferrer">http://osdir.com/ml/user-geronimo-apache/2011-03/msg00026.html</a></em>:</p>
<pre class="lang-xml s-code-block"><code class="hljs language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span> standalone=<span class="hljs-string">"no"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">web:web-app</span> <span class="hljs-attr">xmlns:app</span>=<span class="hljs-string">"http://geronimo.apache.org/xml/ns/j2ee/application-2.0"</span> <span class="hljs-attr">xmlns:client</span>=<span class="hljs-string">"http://geronimo.apache.org/xml/ns/j2ee/application-client-2.0"</span> <span class="hljs-attr">xmlns:conn</span>=<span class="hljs-string">"http://geronimo.apache.org/xml/ns/j2ee/connector-1.2"</span> <span class="hljs-attr">xmlns:dep</span>=<span class="hljs-string">"http://geronimo.apache.org/xml/ns/deployment-1.2"</span> <span class="hljs-attr">xmlns:ejb</span>=<span class="hljs-string">"http://openejb.apache.org/xml/ns/openejb-jar-2.2"</span> <span class="hljs-attr">xmlns:log</span>=<span class="hljs-string">"http://geronimo.apache.org/xml/ns/loginconfig-2.0"</span> <span class="hljs-attr">xmlns:name</span>=<span class="hljs-string">"http://geronimo.apache.org/xml/ns/naming-1.2"</span> <span class="hljs-attr">xmlns:pers</span>=<span class="hljs-string">"http://java.sun.com/xml/ns/persistence"</span> <span class="hljs-attr">xmlns:pkgen</span>=<span class="hljs-string">"http://openejb.apache.org/xml/ns/pkgen-2.1"</span> <span class="hljs-attr">xmlns:sec</span>=<span class="hljs-string">"http://geronimo.apache.org/xml/ns/security-2.0"</span> <span class="hljs-attr">xmlns:web</span>=<span class="hljs-string">"http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dep:environment</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dep:moduleId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dep:groupId</span>&gt;</span>DataStar<span class="hljs-tag">&lt;/<span class="hljs-name">dep:groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dep:artifactId</span>&gt;</span>DataStar<span class="hljs-tag">&lt;/<span class="hljs-name">dep:artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dep:version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-name">dep:version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dep:type</span>&gt;</span>car<span class="hljs-tag">&lt;/<span class="hljs-name">dep:type</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dep:moduleId</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Don't load commons-io or fileupload from parent classloaders --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dep:hidden-classes</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dep:filter</span>&gt;</span>org.apache.commons.io<span class="hljs-tag">&lt;/<span class="hljs-name">dep:filter</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dep:filter</span>&gt;</span>org.apache.commons.fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">dep:filter</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dep:hidden-classes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dep:inverse-classloading</span>/&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">dep:environment</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">web:context-root</span>&gt;</span>/DataStar<span class="hljs-tag">&lt;/<span class="hljs-name">web:context-root</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">web:web-app</span>&gt;</span>
</code></pre>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here's an example using apache commons-fileupload:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// apache commons-fileupload to handle file upload</span>
<span class="hljs-type">DiskFileItemFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiskFileItemFactory</span>();
factory.setRepository(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(DataSources.TORRENTS_DIR()));
<span class="hljs-type">ServletFileUpload</span> <span class="hljs-variable">fileUpload</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletFileUpload</span>(factory);

List&lt;FileItem&gt; items = fileUpload.parseRequest(req.raw());
<span class="hljs-type">FileItem</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> items.stream()
  .filter(e -&gt;
  <span class="hljs-string">"the_upload_name"</span>.equals(e.getFieldName()))
  .findFirst().get();
<span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> item.getName();

item.write(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(dir, fileName));
log.info(fileName);
</code></pre>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You first have to set the enctype attribute of the form to "multipart/form-data"</p>
<p>This is shown below.</p>
<pre class="lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"Controller"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"file-upload"</span>&gt;</span> Click here to upload an Image <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">required</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<p>And then, in the Servlet "Controller" add the Annotation for a Multi-part to indicate multipart data is processed in the servlet.</p>
<p>After doing this, retrieve the part sent through the form and then retrieve the file name (with path)of the submitted file. Use this to create a new file in the desired path and write the parts of the file to the newly created file to recreate the file.</p>
<p>As shown below:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-meta">@MultipartConfig</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Controller</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> {

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span>
            <span class="hljs-keyword">throws</span> ServletException, IOException {
        insertImage(request, response);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addProduct</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> {
        <span class="hljs-type">Part</span> <span class="hljs-variable">filePart</span> <span class="hljs-operator">=</span> request.getPart(<span class="hljs-string">"file"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">imageName</span> <span class="hljs-operator">=</span> Paths.get(filePart.getSubmittedFileName()).getFileName().toString();

        <span class="hljs-type">String</span> <span class="hljs-variable">imageSavePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">"specify image path to save image"</span>; <span class="hljs-comment">//path to save image</span>
        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">InputStream</span> <span class="hljs-variable">fileContent</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">try</span> {
            outputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(imageSavePath + File.separator + imageName));
            <span class="hljs-comment">// Creating a new file with file path and the file name</span>
            fileContent = filePart.getInputStream();
            <span class="hljs-comment">// Getting the input stream</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">readBytes</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-type">byte</span>[] readArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];
            <span class="hljs-comment">// Initializing a byte array with size 1024</span>

            <span class="hljs-keyword">while</span> ((readBytes = fileContent.read(readArray)) != -<span class="hljs-number">1</span>) {
                outputStream.write(readArray, <span class="hljs-number">0</span>, readBytes);
            } <span class="hljs-comment">// This loop will write the contents of the byte array unitl the end to the output stream</span>
        } <span class="hljs-keyword">catch</span> (Exception ex) {
            System.out.println(<span class="hljs-string">"Error Writing File: "</span> + ex);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (outputStream != <span class="hljs-literal">null</span>) {
                outputStream.close();
                <span class="hljs-comment">// Closing the output stream</span>
            }
            <span class="hljs-keyword">if</span> (fileContent != <span class="hljs-literal">null</span>) {
                fileContent.close();
                <span class="hljs-comment">// Closing the input stream</span>
            }
        }
    }
}
</code></pre>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The simplest way I could come up with for files and input controls, without a billion libraries:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">  &lt;%
      <span class="hljs-keyword">if</span> (request.getContentType() == <span class="hljs-literal">null</span>)
          <span class="hljs-keyword">return</span>;
      <span class="hljs-comment">// For input type=text controls</span>
      <span class="hljs-type">String</span> <span class="hljs-variable">v_Text</span> <span class="hljs-operator">=</span>
          (<span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(request.getPart(<span class="hljs-string">"Text1"</span>).getInputStream()))).readLine();

      <span class="hljs-comment">// For input type=file controls</span>
      <span class="hljs-type">InputStream</span> <span class="hljs-variable">inStr</span> <span class="hljs-operator">=</span> request.getPart(<span class="hljs-string">"File1"</span>).getInputStream();
      <span class="hljs-type">char</span> charArray[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[inStr.available()];
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inStr).read(charArray);
      <span class="hljs-type">String</span> <span class="hljs-variable">contents</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(charArray);
  %&gt;
</code></pre>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Use:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">DiskFileUpload</span> <span class="hljs-variable">upload</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiskFileUpload</span>();
</code></pre>
<p>From this object you have to get the file items and fields, and then you can store into the server like the following:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">String</span> <span class="hljs-variable">loc</span> <span class="hljs-operator">=</span> <span class="hljs-string">"./webapps/prjct name/server folder/"</span> + contentid + extension;
<span class="hljs-type">File</span> <span class="hljs-variable">uploadFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(loc);
item.write(uploadFile);
</code></pre>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can upload a file using JSP /servlet.</p>
<pre class="lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"UploadFileServlet"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"description"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"file"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<p>On the other hand, on the server side, use the following code.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">package</span> com.abc..servlet;

<span class="hljs-keyword">import</span> java.io.File;
---------
--------


<span class="hljs-comment">/**
 * Servlet implementation class UploadFileServlet
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UploadFileServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UploadFileServlet</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>();
        <span class="hljs-comment">// TODO Auto-generated constructor stub</span>
    }
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException {
        <span class="hljs-comment">// TODO Auto-generated method stub</span>
        response.sendRedirect(<span class="hljs-string">"../jsp/ErrorPage.jsp"</span>);
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException {
        <span class="hljs-comment">// TODO Auto-generated method stub</span>

        <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> response.getWriter();
        <span class="hljs-type">HttpSession</span> <span class="hljs-variable">httpSession</span> <span class="hljs-operator">=</span> request.getSession();
        <span class="hljs-type">String</span> <span class="hljs-variable">filePathUpload</span> <span class="hljs-operator">=</span> (String) httpSession.getAttribute(<span class="hljs-string">"path"</span>) != <span class="hljs-literal">null</span> ? httpSession.getAttribute(<span class="hljs-string">"path"</span>).toString() : <span class="hljs-string">""</span> ;

        <span class="hljs-type">String</span> <span class="hljs-variable">path1</span> <span class="hljs-operator">=</span> filePathUpload;
        <span class="hljs-type">String</span> <span class="hljs-variable">filename</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">File</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">FileItem</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;


        <span class="hljs-type">boolean</span> <span class="hljs-variable">isMultipart</span> <span class="hljs-operator">=</span> ServletFileUpload.isMultipartContent(request);

        <span class="hljs-keyword">if</span> (isMultipart) {
            <span class="hljs-type">FileItemFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiskFileItemFactory</span>();
            <span class="hljs-type">ServletFileUpload</span> <span class="hljs-variable">upload</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletFileUpload</span>(factory);
            <span class="hljs-type">String</span> <span class="hljs-variable">FieldName</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">List</span> <span class="hljs-variable">items</span> <span class="hljs-operator">=</span> upload.parseRequest(request);
                <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> items.iterator();
                <span class="hljs-keyword">while</span> (iterator.hasNext()) {
                     item = (FileItem) iterator.next();

                        <span class="hljs-keyword">if</span> (fieldname.equals(<span class="hljs-string">"description"</span>)) {
                            description = item.getString();
                        }
                    }
                    <span class="hljs-keyword">if</span> (!item.isFormField()) {
                        filename = item.getName();
                        path = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(path1 + File.separator);
                        <span class="hljs-keyword">if</span> (!path.exists()) {
                            <span class="hljs-type">boolean</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> path.mkdirs();
                        }
                        <span class="hljs-comment">/* Start of code fro privilege */</span>

                        <span class="hljs-type">File</span> <span class="hljs-variable">uploadedFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(path + Filename);  <span class="hljs-comment">// for copy file</span>
                        item.write(uploadedFile);
                        }
                    } <span class="hljs-keyword">else</span> {
                        f1 = item.getName();
                    }

                } <span class="hljs-comment">// END OF WHILE</span>
                response.sendRedirect(<span class="hljs-string">"welcome.jsp"</span>);
            } <span class="hljs-keyword">catch</span> (FileUploadException e) {
                e.printStackTrace();
            } <span class="hljs-keyword">catch</span> (Exception e) {
                e.printStackTrace();
            }
        }
    }
}
</code></pre>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h3>HTML page</h3>
<pre class="lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>File Uploading Form<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>File Upload:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        Select a file to upload: <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"UploadServlet"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>
              <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"50"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Upload File"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3>Servlet file</h3>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// Import required java libraries</span>
<span class="hljs-keyword">import</span> java.io.*;
<span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">import</span> javax.servlet.ServletConfig;
<span class="hljs-keyword">import</span> javax.servlet.ServletException;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;

<span class="hljs-keyword">import</span> org.apache.commons.fileupload.FileItem;
<span class="hljs-keyword">import</span> org.apache.commons.fileupload.FileUploadException;
<span class="hljs-keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;
<span class="hljs-keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;
<span class="hljs-keyword">import</span> org.apache.commons.io.output.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UploadServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> isMultipart;
    <span class="hljs-keyword">private</span> String filePath;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">maxFileSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">50</span> * <span class="hljs-number">1024</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">maxMemSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span> * <span class="hljs-number">1024</span>;
    <span class="hljs-keyword">private</span> File file;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// Get the file location where it would be stored.</span>
        filePath =
               getServletContext().getInitParameter(<span class="hljs-string">"file-upload"</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request,
                       HttpServletResponse response)</span>
               <span class="hljs-keyword">throws</span> ServletException, java.io.IOException {

        <span class="hljs-comment">// Check that we have a file upload request</span>
        isMultipart = ServletFileUpload.isMultipartContent(request);
        response.setContentType(<span class="hljs-string">"text/html"</span>);
        java.io.<span class="hljs-type">PrintWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> response.getWriter();
        <span class="hljs-keyword">if</span> (!isMultipart) {
            out.println(<span class="hljs-string">"&lt;html&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;head&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;title&gt;Servlet upload&lt;/title&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;/head&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;body&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;p&gt;No file uploaded&lt;/p&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;/body&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;/html&gt;"</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-type">DiskFileItemFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiskFileItemFactory</span>();
        <span class="hljs-comment">// Maximum size that will be stored in memory</span>
        factory.setSizeThreshold(maxMemSize);
        <span class="hljs-comment">// Location to save data that is larger than maxMemSize.</span>
        factory.setRepository(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"c:\\temp"</span>));

        <span class="hljs-comment">// Create a new file upload handler</span>
        <span class="hljs-type">ServletFileUpload</span> <span class="hljs-variable">upload</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletFileUpload</span>(factory);
        <span class="hljs-comment">// maximum file size to be uploaded.</span>
        upload.setSizeMax(maxFileSize);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// Parse the request to get file items.</span>
            <span class="hljs-type">List</span> <span class="hljs-variable">fileItems</span> <span class="hljs-operator">=</span> upload.parseRequest(request);

            <span class="hljs-comment">// Process the uploaded file items</span>
            <span class="hljs-type">Iterator</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> fileItems.iterator();

            out.println(<span class="hljs-string">"&lt;html&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;head&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;title&gt;Servlet upload&lt;/title&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;/head&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;body&gt;"</span>);
            <span class="hljs-keyword">while</span> (i.hasNext())
            {
                <span class="hljs-type">FileItem</span> <span class="hljs-variable">fi</span> <span class="hljs-operator">=</span> (FileItem)i.next();
                <span class="hljs-keyword">if</span> (!fi.isFormField())
                {
                     <span class="hljs-comment">// Get the uploaded file parameters</span>
                     <span class="hljs-type">String</span> <span class="hljs-variable">fieldName</span> <span class="hljs-operator">=</span> fi.getFieldName();
                     <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> fi.getName();
                     <span class="hljs-type">String</span> <span class="hljs-variable">contentType</span> <span class="hljs-operator">=</span> fi.getContentType();
                     <span class="hljs-type">boolean</span> <span class="hljs-variable">isInMemory</span> <span class="hljs-operator">=</span> fi.isInMemory();
                     <span class="hljs-type">long</span> <span class="hljs-variable">sizeInBytes</span> <span class="hljs-operator">=</span> fi.getSize();

                     <span class="hljs-comment">// Write the file</span>
                     <span class="hljs-keyword">if</span> (fileName.lastIndexOf(<span class="hljs-string">"\\"</span>) &gt;= <span class="hljs-number">0</span>) {
                         file = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath +
                         fileName.substring(fileName.lastIndexOf(<span class="hljs-string">"\\"</span>)));
                     }
                     <span class="hljs-keyword">else</span> {
                         file = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath +
                         fileName.substring(fileName.lastIndexOf(<span class="hljs-string">"\\"</span>) + <span class="hljs-number">1</span>));
                     }
                     fi.write(file);
                     out.println(<span class="hljs-string">"Uploaded Filename: "</span> + fileName + <span class="hljs-string">"&lt;br&gt;"</span>);
                }
            }
            out.println(<span class="hljs-string">"&lt;/body&gt;"</span>);
            out.println(<span class="hljs-string">"&lt;/html&gt;"</span>);
        }
        <span class="hljs-keyword">catch</span>(Exception ex) {
            System.out.println(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request,
                        HttpServletResponse response)</span>
            <span class="hljs-keyword">throws</span> ServletException, java.io.IOException {

        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletException</span>(<span class="hljs-string">"GET method used with "</span> +
                 getClass().getName() + <span class="hljs-string">": POST method required."</span>);
    }
}
</code></pre>
<h3>File <em>web.xml</em></h3>
<p>Compile the above servlet UploadServlet and create the required entry in the <em>web.xml</em> file as follows.</p>
<pre class="lang-xml s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>UploadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>UploadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>UploadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/UploadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span>
</code></pre>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/servlets">servlets</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/jakarta-ee">jakarta-ee</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/file-upload">file-upload</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Sending multiple files for file, we have to use <code>enctype="multipart/form-data"</code>.</p>
<p>And to send multiple files, use <code>multiple="multiple"</code> in the <em>input</em> tag:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;form action=<span class="hljs-string">"upload"</span> method=<span class="hljs-string">"post"</span> enctype=<span class="hljs-string">"multipart/form-data"</span>&gt;
    &lt;input type=<span class="hljs-string">"file"</span> name=<span class="hljs-string">"fileattachments"</span>  multiple=<span class="hljs-string">"multiple"</span>/&gt;
    &lt;input type=<span class="hljs-string">"submit"</span> /&gt;
&lt;/form&gt;
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/what-is-the-difference-between-json-and-object-literal-notation-1657387515710">What is the difference between JSON and Object Literal Notation?</a><a href="/questions/center-one-and-rightleft-align-other-flexbox-element-1657387899083">Center one and right/left align other flexbox element</a><a href="/questions/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs-1657387340067">What are the nuances of scope prototypal / prototypical inheritance in AngularJS?</a><a href="/questions/how-do-you-remove-duplicates-from-a-list-whilst-preserving-order-1657387877978">How do you remove duplicates from a list whilst preserving order?</a><a href="/questions/how-do-i-generate-random-integers-within-a-specific-range-in-java-1657385458888">How do I generate random integers within a specific range in Java?</a><a href="/questions/use-dynamic-variable-names-in-javascript-1657388468075">Use dynamic variable names in JavaScript</a><a href="/questions/what-does-the-&#x27;static&#x27;-keyword-do-in-a-class-1657388554238">What does the &#x27;static&#x27; keyword do in a class?</a><a href="/questions/is-there-a-javascript-jquery-dom-change-listener-1657387961200">Is there a JavaScript / jQuery DOM change listener?</a><a href="/questions/how-to-choose-the-right-bean-scope-1657387596513">How to choose the right bean scope?</a><a href="/questions/secure-hash-and-salt-for-php-passwords-1657387363258">Secure hash and salt for PHP passwords</a><a href="/questions/can-i-mix-mysql-apis-in-php-1657384597444">Can I mix MySQL APIs in PHP?</a><a href="/questions/how-do-i-properly-clean-up-excel-interop-objects-1657388329706">How do I properly clean up Excel interop objects?</a><a href="/questions/persist-variables-between-page-loads-1657388558452">Persist variables between page loads</a><a href="/questions/how-to-use-variables-in-sql-statement-in-python-1657388479077">How to use variables in SQL statement in Python?</a><a href="/questions/what-is-the-copy-and-swap-idiom-1657384840329">What is the copy-and-swap idiom?</a><a href="/questions/what-is-the-javascript-version-of-sleep()-1657387391406">What is the JavaScript version of sleep()?</a><a href="/questions/are-dictionaries-ordered-in-python-3.6+-1657387834234">Are dictionaries ordered in Python 3.6+?</a><a href="/questions/how-to-check-whether-a-string-contains-a-substring-in-javascript-1657388080698">How to check whether a string contains a substring in JavaScript?</a><a href="/questions/how-to-compare-arrays-in-javascript-1657387352277">How to compare arrays in JavaScript?</a><a href="/questions/why-does-my-function-that-calls-an-api-or-launches-a-coroutine-return-an-empty-or-null-value-1657388483820">Why does my function that calls an API or launches a coroutine return an empty or null value?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;h2\u0026gt;Introduction\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;To browse and select a file for upload you need a HTML \u0026lt;code\u0026gt;\u0026amp;lt;input type=\u0026quot;file\u0026quot;\u0026amp;gt;\u0026lt;/code\u0026gt; field in the form. As stated in the \u0026lt;a href=\u0026quot;http://www.w3.org/TR/html4/interact/forms.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTML specification\u0026lt;/a\u0026gt; you have to use the \u0026lt;code\u0026gt;POST\u0026lt;/code\u0026gt; method and the \u0026lt;code\u0026gt;enctype\u0026lt;/code\u0026gt; attribute of the form has to be set to \u0026lt;code\u0026gt;\u0026quot;multipart/form-data\u0026quot;\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;action\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;upload\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;method\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;enctype\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/form-data\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;description\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;submit\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;After submitting such a form, the binary multipart form data is available in the request body in \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/13372775/servlet-handling-file-upload-why-bigger-than-the-original/13399437#13399437\u0026quot;\u0026gt;a different format\u0026lt;/a\u0026gt; than when the \u0026lt;code\u0026gt;enctype\u0026lt;/code\u0026gt; isn\u0026apos;t set.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Before Servlet 3.0 (Dec 2009), the Servlet API didn\u0026apos;t natively support \u0026lt;code\u0026gt;multipart/form-data\u0026lt;/code\u0026gt;. It supports only the default form enctype of \u0026lt;code\u0026gt;application/x-www-form-urlencoded\u0026lt;/code\u0026gt;. The \u0026lt;code\u0026gt;request.getParameter()\u0026lt;/code\u0026gt; and consorts would all return \u0026lt;code\u0026gt;null\u0026lt;/code\u0026gt; when using multipart form data. This is where the well known \u0026lt;a href=\u0026quot;http://commons.apache.org/fileupload\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Apache Commons FileUpload\u0026lt;/a\u0026gt; came into the picture.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Don\u0026apos;t manually parse it!\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;You can in theory parse the request body yourself based on \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getInputStream%28%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;ServletRequest#getInputStream()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;. However, this is a precise and tedious work which requires precise knowledge of \u0026lt;a href=\u0026quot;http://www.faqs.org/rfcs/rfc2388.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;RFC2388\u0026lt;/a\u0026gt;. You shouldn\u0026apos;t try to do this on your own or copypaste some homegrown library-less code found elsewhere on the Internet. Many online sources have failed hard in this, such as roseindia.net. See also \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/5038798/uploading-of-pdf-file\u0026quot;\u0026gt;uploading of pdf file\u0026lt;/a\u0026gt;. You should rather use a real library which is used (and implicitly tested!) by millions of users for years. Such a library has proven its robustness.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;When you\u0026apos;re already on Servlet 3.0 or newer, use native API\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;If you\u0026apos;re using at least Servlet 3.0 (Tomcat 7, Jetty 9, JBoss AS 6, GlassFish 3, etc, they exist already since 2010), then you can just use standard API provided \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getParts()\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServletRequest#getPart()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to collect the individual multipart form data items (most Servlet 3.0 implementations \u0026lt;em\u0026gt;actually\u0026lt;/em\u0026gt; use Apache Commons FileUpload under the covers for this!). Also, normal form fields are available by \u0026lt;code\u0026gt;getParameter()\u0026lt;/code\u0026gt; the usual way.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;First annotate your servlet with \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/MultipartConfig.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;@MultipartConfig\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; in order to let it recognize and support \u0026lt;code\u0026gt;multipart/form-data\u0026lt;/code\u0026gt; requests and thus get \u0026lt;code\u0026gt;getPart()\u0026lt;/code\u0026gt; to work:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@WebServlet(\u0026quot;/upload\u0026quot;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@MultipartConfig\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;UploadServlet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpServlet\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then, implement its \u0026lt;code\u0026gt;doPost()\u0026lt;/code\u0026gt; as follows:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doPost\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpServletRequest request, HttpServletResponse response)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ServletException, IOException {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;description\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; request.getParameter(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;description\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Retrieves \u0026amp;lt;input type=\u0026quot;text\u0026quot; name=\u0026quot;description\u0026quot;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Part\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;filePart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; request.getPart(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Retrieves \u0026amp;lt;input type=\u0026quot;file\u0026quot; name=\u0026quot;file\u0026quot;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Paths.get(filePart.getSubmittedFileName()).getFileName().toString(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// MSIE fix.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileContent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; filePart.getInputStream();\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ... (do your job here)\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Note the \u0026lt;code\u0026gt;Path#getFileName()\u0026lt;/code\u0026gt;. This is a MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In case you want to upload multiple files via either \u0026lt;code\u0026gt;multiple=\u0026quot;true\u0026quot;\u0026lt;/code\u0026gt;,\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;files\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;multiple\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;or the old-fashioned way with multiple inputs,\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;files\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;files\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;files\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n...\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;then you can collect them as below (unfortunately there is no such method as \u0026lt;code\u0026gt;request.getParts(\u0026quot;files\u0026quot;)\u0026lt;/code\u0026gt;):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doPost\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpServletRequest request, HttpServletResponse response)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ServletException, IOException {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n    List\u0026amp;lt;Part\u0026amp;gt; fileParts = request.getParts().stream().filter(part -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;files\u0026quot;\u0026lt;/span\u0026gt;.equals(part.getName()) \u0026amp;amp;\u0026amp;amp; part.getSize() \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;).collect(Collectors.toList()); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Retrieves \u0026amp;lt;input type=\u0026quot;file\u0026quot; name=\u0026quot;files\u0026quot; multiple=\u0026quot;true\u0026quot;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (Part filePart : fileParts) {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Paths.get(filePart.getSubmittedFileName()).getFileName().toString(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// MSIE fix.\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileContent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; filePart.getInputStream();\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ... (do your job here)\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;When you\u0026apos;re not on Servlet 3.1 yet, manually get submitted file name\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Note that \u0026lt;a href=\u0026quot;https://docs.oracle.com/javaee/7/api/javax/servlet/http/Part.html#getSubmittedFileName()\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Part#getSubmittedFileName()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; was introduced in Servlet 3.1 (Tomcat 8, Jetty 9, WildFly 8, GlassFish 4, etc, they exist since 2013 already). If you\u0026apos;re not on Servlet 3.1 yet (really?), then you need an additional utility method to obtain the submitted file name.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getSubmittedFileName\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Part part)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (String cd : part.getHeader(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;content-disposition\u0026quot;\u0026lt;/span\u0026gt;).split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;;\u0026quot;\u0026lt;/span\u0026gt;)) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (cd.trim().startsWith(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;filename\u0026quot;\u0026lt;/span\u0026gt;)) {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; cd.substring(cd.indexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;=\u0026apos;\u0026lt;/span\u0026gt;) + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;).trim().replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; fileName.substring(fileName.lastIndexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/\u0026apos;\u0026lt;/span\u0026gt;) + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;).substring(fileName.lastIndexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\\u0026apos;\u0026lt;/span\u0026gt;) + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// MSIE fix.\u0026lt;/span\u0026gt;\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getSubmittedFileName(filePart);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Note the MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;When you\u0026apos;re not on Servlet 3.0 yet, use Apache Commons FileUpload\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;If you\u0026apos;re not on Servlet 3.0 yet (isn\u0026apos;t it about time to upgrade? it\u0026apos;s released over a decade ago!), the common practice is to make use of \u0026lt;a href=\u0026quot;http://commons.apache.org/fileupload\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Apache Commons FileUpload\u0026lt;/a\u0026gt; to parse the multpart form data requests. It has an excellent \u0026lt;a href=\u0026quot;http://commons.apache.org/fileupload/using.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;User Guide\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;http://commons.apache.org/fileupload/faq.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;FAQ\u0026lt;/a\u0026gt; (carefully go through both). There\u0026apos;s also the O\u0026apos;Reilly (\u0026quot;\u0026lt;a href=\u0026quot;http://www.servlets.com/cos/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;cos\u0026lt;/a\u0026gt;\u0026quot;) \u0026lt;code\u0026gt;MultipartRequest\u0026lt;/code\u0026gt;, but it has some (minor) bugs and isn\u0026apos;t actively maintained anymore for years. I wouldn\u0026apos;t recommend using it. Apache Commons FileUpload is still actively maintained and currently very mature.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In order to use Apache Commons FileUpload, you need to have at least the following files in your webapp\u0026apos;s \u0026lt;code\u0026gt;/WEB-INF/lib\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://commons.apache.org/proper/commons-fileupload/download_fileupload.cgi\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;commons-fileupload.jar\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://commons.apache.org/proper/commons-io/download_io.cgi\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;commons-io.jar\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;Your initial attempt failed most likely because you forgot the commons IO.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Here\u0026apos;s a kickoff example how the \u0026lt;code\u0026gt;doPost()\u0026lt;/code\u0026gt; of your \u0026lt;code\u0026gt;UploadServlet\u0026lt;/code\u0026gt; may look like when using Apache Commons FileUpload:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doPost\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpServletRequest request, HttpServletResponse response)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ServletException, IOException {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        List\u0026amp;lt;FileItem\u0026amp;gt; items = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ServletFileUpload\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DiskFileItemFactory\u0026lt;/span\u0026gt;()).parseRequest(request);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (FileItem item : items) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (item.isFormField()) {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Process regular form field (input type=\u0026quot;text|radio|checkbox|etc\u0026quot;, select, etc).\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fieldName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; item.getFieldName();\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fieldValue\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; item.getString();\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ... (do your job here)\u0026lt;/span\u0026gt;\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Process form file field (input type=\u0026quot;file\u0026quot;).\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fieldName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; item.getFieldName();\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; FilenameUtils.getName(item.getName());\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileContent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; item.getInputStream();\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ... (do your job here)\u0026lt;/span\u0026gt;\n            }\n        }\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (FileUploadException e) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ServletException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Cannot parse multipart request.\u0026quot;\u0026lt;/span\u0026gt;, e);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;It\u0026apos;s very important that you don\u0026apos;t call \u0026lt;code\u0026gt;getParameter()\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;getParameterMap()\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;getParameterValues()\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;getInputStream()\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;getReader()\u0026lt;/code\u0026gt;, etc on the same request beforehand. Otherwise the servlet container will read and parse the request body and thus Apache Commons FileUpload will get an empty request body. See also a.o. \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/13881272/servletfileuploadparserequestrequest-returns-an-empty-list\u0026quot;\u0026gt;ServletFileUpload#parseRequest(request) returns an empty list\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Note the \u0026lt;code\u0026gt;FilenameUtils#getName()\u0026lt;/code\u0026gt;. This is a MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Alternatively you can also wrap this all in a \u0026lt;code\u0026gt;Filter\u0026lt;/code\u0026gt; which parses it all automagically and put the stuff back in the parametermap of the request so that you can continue using \u0026lt;code\u0026gt;request.getParameter()\u0026lt;/code\u0026gt; the usual way and retrieve the uploaded file by \u0026lt;code\u0026gt;request.getAttribute()\u0026lt;/code\u0026gt;. \u0026lt;a href=\u0026quot;http://balusc.blogspot.com/2007/11/multipartfilter.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;You can find an example in this blog article\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Workaround for GlassFish3 bug of \u0026lt;code\u0026gt;getParameter()\u0026lt;/code\u0026gt; still returning \u0026lt;code\u0026gt;null\u0026lt;/code\u0026gt;\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Note that Glassfish versions older than 3.1.2 had \u0026lt;a href=\u0026quot;http://java.net/jira/browse/GLASSFISH-16740\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;a bug\u0026lt;/a\u0026gt; wherein the \u0026lt;code\u0026gt;getParameter()\u0026lt;/code\u0026gt; still returns \u0026lt;code\u0026gt;null\u0026lt;/code\u0026gt;. If you are targeting such a container and can\u0026apos;t upgrade it, then you need to extract the value from \u0026lt;code\u0026gt;getPart()\u0026lt;/code\u0026gt; with help of this utility method:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getValue\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Part part)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BufferedReader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;reader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BufferedReader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InputStreamReader\u0026lt;/span\u0026gt;(part.getInputStream(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UTF-8\u0026quot;\u0026lt;/span\u0026gt;));\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;StringBuilder\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StringBuilder\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;[] buffer = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1024\u0026lt;/span\u0026gt;];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; (length = reader.read(buffer)) \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;) {\n        value.append(buffer, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, length);\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; value.toString();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;description\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getValue(request.getPart(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;description\u0026quot;\u0026lt;/span\u0026gt;)); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Retrieves \u0026amp;lt;input type=\u0026quot;text\u0026quot; name=\u0026quot;description\u0026quot;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Saving uploaded file (don\u0026apos;t use \u0026lt;code\u0026gt;getRealPath()\u0026lt;/code\u0026gt; nor \u0026lt;code\u0026gt;part.write()\u0026lt;/code\u0026gt;!)\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Head to the following answers for detail on properly saving the obtained \u0026lt;code\u0026gt;InputStream\u0026lt;/code\u0026gt; (the \u0026lt;code\u0026gt;fileContent\u0026lt;/code\u0026gt; variable as shown in the above code snippets) to disk or database:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/18664579/recommended-way-to-save-files-uploaded-to-a-tomcat-servlet/18664715#18664715\u0026quot;\u0026gt;Recommended way to save uploaded files in a servlet application\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/7033676/how-to-upload-an-image-and-save-it-in-database/7033945#7033945\u0026quot;\u0026gt;How to upload an image and save it in database?\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/19138706/how-to-convert-part-to-blob-so-i-can-store-it-in-mysql/19139125#19139125\u0026quot;\u0026gt;How to convert Part to Blob, so I can store it in MySQL?\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;Serving uploaded file\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Head to the following answers for detail on properly serving the saved file from disk or database back to the client:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/4543936/load-images-from-outside-of-webapps-webcontext-deploy-folder-using-hgraphi/4543951#4543951\u0026quot;\u0026gt;Load images from outside of webapps / webcontext / deploy folder using \u0026amp;lt;h:graphicImage\u0026amp;gt; or \u0026amp;lt;img\u0026amp;gt; tag\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/2340406/how-to-retrieve-and-display-images-from-a-database-in-a-jsp-page/2341322#2341322\u0026quot;\u0026gt;How to retrieve and display images from a database in a JSP page?\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/1812244/simplest-way-to-serve-static-data-from-outside-the-application-server-in-a-java/1812356#1812356\u0026quot;\u0026gt;Simplest way to serve static data from outside the application server in a Java web application\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/132052/servlet-for-serving-static-content/29991447#29991447\u0026quot;\u0026gt;Abstract template for static resource servlet supporting HTTP caching\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;Ajaxifying the form\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Head to the following answers how to upload using Ajax (and jQuery). Do note that the servlet code to collect the form data does not need to be changed for this! Only the way how you respond may be changed, but this is rather trivial (i.e. instead of forwarding to JSP, just print some JSON or XML or even plain text depending on whatever the script responsible for the Ajax call is expecting).\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/6914152/how-to-upload-files-to-server-using-jsp-servlet-and-ajax\u0026quot;\u0026gt;How can I upload files to a server using JSP/Servlet and Ajax?\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/9395911/sending-a-file-as-multipart-through-xmlhttprequest\u0026quot;\u0026gt;Send a file as multipart through XMLHttpRequest\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/7114087/html5-file-upload-to-java-servlet\u0026quot;\u0026gt;HTML5 drag and drop file upload to Java Servlet\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;Hope this all helps :)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you happen to use \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Spring_Framework#Model-view-controller_framework\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Spring MVC\u0026lt;/a\u0026gt;, this is how to (I\u0026apos;m leaving this here in case someone find it useful):\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Use a form with \u0026lt;code\u0026gt;enctype\u0026lt;/code\u0026gt; attribute set to \u0026quot;\u0026lt;code\u0026gt;multipart/form-data\u0026lt;/code\u0026gt;\u0026quot; (the same as \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/2422468/how-can-i-upload-files-to-a-server-using-jsp-servlet/2424824#2424824\u0026quot;\u0026gt;BalusC\u0026apos;s answer\u0026lt;/a\u0026gt;):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;action\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;upload\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;method\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;enctype\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/form-data\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;submit\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Upload\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;In your controller, map the request parameter \u0026lt;code\u0026gt;file\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;MultipartFile\u0026lt;/code\u0026gt; type as follows:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@RequestMapping(value = \u0026quot;/upload\u0026quot;, method = RequestMethod.POST)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;handleUpload\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@RequestParam(\u0026quot;file\u0026quot;)\u0026lt;/span\u0026gt; MultipartFile file)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!file.isEmpty()) {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[] bytes = file.getBytes(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// alternatively, file.getInputStream();\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// application logic\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;You can get the filename and size using \u0026lt;code\u0026gt;MultipartFile\u0026lt;/code\u0026gt;\u0026apos;s \u0026lt;code\u0026gt;getOriginalFilename()\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;getSize()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I\u0026apos;ve tested this with Spring version \u0026lt;code\u0026gt;4.1.1.RELEASE\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Without components or external libraries in Tomcat 6 or Tomcat 7\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Enabling upload in the \u0026lt;strong\u0026gt;web.xml\u0026lt;/strong\u0026gt; file:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;http://joseluisbz.wordpress.com/2014/01/17/manually-installing-php-tomcat-and-httpd-lounge/#Enabling%20File%20Uploads\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Manually Installing PHP, Tomcat and Httpd Lounge\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-xml s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-name\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;jsp\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-name\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-class\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;org.apache.jasper.servlet.JspServlet\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-class\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;multipart-config\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;max-file-size\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;3145728\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;max-file-size\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;max-request-size\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;5242880\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;max-request-size\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;multipart-config\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;init-param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param-name\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;fork\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param-name\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param-value\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;false\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param-value\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;init-param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;init-param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param-name\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;xpoweredBy\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param-name\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param-value\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;false\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param-value\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;init-param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;load-on-startup\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;3\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;load-on-startup\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;As you can see\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-xml s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;multipart-config\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;max-file-size\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;3145728\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;max-file-size\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;max-request-size\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;5242880\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;max-request-size\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;multipart-config\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Uploading files using JSP. files:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;In the HTML file\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;form method=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post\u0026quot;\u0026lt;/span\u0026gt; enctype=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/form-data\u0026quot;\u0026lt;/span\u0026gt; name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Form\u0026quot;\u0026lt;/span\u0026gt; \u0026amp;gt;\n\n  \u0026amp;lt;input type=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fFoto\u0026quot;\u0026lt;/span\u0026gt; id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fFoto\u0026quot;\u0026lt;/span\u0026gt; value=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026amp;lt;/td\u0026amp;gt;\n  \u0026amp;lt;input type=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fResumen\u0026quot;\u0026lt;/span\u0026gt; id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fResumen\u0026quot;\u0026lt;/span\u0026gt; value=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;In the JSP File\u0026lt;/em\u0026gt; or \u0026lt;em\u0026gt;Servlet\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;isFoto\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; request.getPart(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fFoto\u0026quot;\u0026lt;/span\u0026gt;).getInputStream();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;isResu\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; request.getPart(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fResumen\u0026quot;\u0026lt;/span\u0026gt;).getInputStream();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ByteArrayOutputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;baos\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ByteArrayOutputStream\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt; buf[] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8192\u0026lt;/span\u0026gt;];\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;qt\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; ((qt = isResu.read(buf)) != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) {\n  baos.write(buf, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, qt);\n}\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;sResumen\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; baos.toString();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Edit your code to servlet requirements, like \u0026lt;em\u0026gt;max-file-size\u0026lt;/em\u0026gt;, \u0026lt;em\u0026gt;max-request-size\u0026lt;/em\u0026gt; and other options that you can to set...\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You need the \u0026lt;code\u0026gt;common-io.1.4.jar\u0026lt;/code\u0026gt; file to be included in your \u0026lt;code\u0026gt;lib\u0026lt;/code\u0026gt; directory, or if you\u0026apos;re working in any editor, like NetBeans, then you need to go to project properties and just add the JAR file and you will be done. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To get the \u0026lt;code\u0026gt;common.io.jar\u0026lt;/code\u0026gt; file just google it or just go to the Apache \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Apache_Tomcat\u0026quot;\u0026gt;Tomcat\u0026lt;/a\u0026gt; website where you get the option for a free download of this file. But remember one thing: download the binary ZIP file if you\u0026apos;re a Windows user.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I am using a common Servlet for \u0026lt;strong\u0026gt;every\u0026lt;/strong\u0026gt; HTML form whether it has attachments or not.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This Servlet returns a \u0026lt;code\u0026gt;TreeMap\u0026lt;/code\u0026gt; where the keys are JSP name parameters and values are user inputs and saves all attachments in a fixed directory and later you rename the directory of your choice. Here \u0026lt;em\u0026gt;Connections\u0026lt;/em\u0026gt; is our custom interface having a connection object.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ServletCommonfunctions\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpServlet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;implements\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Connections\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;long\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;serialVersionUID\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1L\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ServletCommonfunctions\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {}\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doPost\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpServletRequest request,\n                          HttpServletResponse response)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ServletException,\n                          IOException {}\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; SortedMap\u0026amp;lt;String, String\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;savefilesindirectory\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n            HttpServletRequest request, HttpServletResponse response)\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Map\u0026amp;lt;String, String\u0026amp;gt; key_values = Collections.synchronizedMap(new\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TreeMap\u0026amp;lt;String, String\u0026amp;gt;());\u0026lt;/span\u0026gt;\n        SortedMap\u0026amp;lt;String, String\u0026amp;gt; key_values = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;TreeMap\u0026lt;/span\u0026gt;\u0026amp;lt;String, String\u0026amp;gt;();\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;dist\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, fact = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;PrintWriter\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;out\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; response.getWriter();\n        File file;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;filePath\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;E:\\\\FSPATH1\\\\2KL06CS048\\\\\u0026quot;\u0026lt;/span\u0026gt;;\n        System.out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Directory Created   ????????????\u0026quot;\u0026lt;/span\u0026gt;\n            + \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(filePath).mkdir());\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;maxFileSize\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5000\u0026lt;/span\u0026gt; * \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1024\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;maxMemSize\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5000\u0026lt;/span\u0026gt; * \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1024\u0026lt;/span\u0026gt;;\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Verify the content type\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;contentType\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; request.getContentType();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; ((contentType.indexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/form-data\u0026quot;\u0026lt;/span\u0026gt;) \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)) {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DiskFileItemFactory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;factory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DiskFileItemFactory\u0026lt;/span\u0026gt;();\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Maximum size that will be stored in memory\u0026lt;/span\u0026gt;\n            factory.setSizeThreshold(maxMemSize);\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Location to save data that is larger than maxMemSize.\u0026lt;/span\u0026gt;\n            factory.setRepository(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(filePath));\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Create a new file upload handler\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ServletFileUpload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;upload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ServletFileUpload\u0026lt;/span\u0026gt;(factory);\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// maximum file size to be uploaded.\u0026lt;/span\u0026gt;\n            upload.setSizeMax(maxFileSize);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Parse the request to get file items.\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@SuppressWarnings(\u0026quot;unchecked\u0026quot;)\u0026lt;/span\u0026gt;\n                List\u0026amp;lt;FileItem\u0026amp;gt; fileItems = upload.parseRequest(request);\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Process the uploaded file items\u0026lt;/span\u0026gt;\n                Iterator\u0026amp;lt;FileItem\u0026amp;gt; i = fileItems.iterator();\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (i.hasNext()) {\n                    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;FileItem\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fi\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (FileItem) i.next();\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!fi.isFormField()) {\n                        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Get the uploaded file parameters\u0026lt;/span\u0026gt;\n                        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fi.getName();\n                        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Write the file\u0026lt;/span\u0026gt;\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (fileName.lastIndexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\\\u0026quot;\u0026lt;/span\u0026gt;) \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) {\n                            file = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(filePath\n                                + fileName.substring(fileName\n                                        .lastIndexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\\\u0026quot;\u0026lt;/span\u0026gt;)));\n                        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                            file = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(filePath\n                                + fileName.substring(fileName\n                                        .lastIndexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\\\u0026quot;\u0026lt;/span\u0026gt;) + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;));\n                        }\n                        fi.write(file);\n                    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                        key_values.put(fi.getFieldName(), fi.getString());\n                    }\n                }\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n                System.out.println(ex);\n            }\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; key_values;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;For Spring MVC\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I managed to have a simpler version that worked for taking form input, both data and images.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;action\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/handleform\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;method\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;enctype\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/form-data\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;name\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;age\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;submit\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Controller to handle\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Controller\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FormController\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@RequestMapping(value=\u0026quot;/handleform\u0026quot;,method= RequestMethod.POST)\u0026lt;/span\u0026gt;\n    ModelAndView \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;register\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@RequestParam\u0026lt;/span\u0026gt; String name, \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@RequestParam\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; age, \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@RequestParam\u0026lt;/span\u0026gt; MultipartFile file)\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ServletException, IOException {\n\n        System.out.println(name);\n        System.out.println(age);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(!file.isEmpty()){\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[] bytes = file.getBytes();\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;filename\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; file.getOriginalFilename();\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BufferedOutputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;stream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BufferedOutputStream\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FileOutputStream\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;D:/\u0026quot;\u0026lt;/span\u0026gt; + filename)));\n            stream.write(bytes);\n            stream.flush();\n            stream.close();\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ModelAndView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;index\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Another source of this problem occurs if you are using \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Apache_Geronimo\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Geronimo\u0026lt;/a\u0026gt; with its embedded Tomcat. In this case, after many iterations of testing \u0026lt;a href=\u0026quot;https://commons.apache.org/proper/commons-io/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Commons IO\u0026lt;/a\u0026gt; and commons-fileupload, the problem arises from a parent classloader handling the commons-xxx JAR files. This has to be prevented. The crash always occurred at:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;fileItems = uploader.parseRequest(request);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Note that the List type of fileItems has changed with the current version of commons-fileupload to be specifically \u0026lt;code\u0026gt;List\u0026amp;lt;FileItem\u0026amp;gt;\u0026lt;/code\u0026gt; as opposed to prior versions where it was generic \u0026lt;code\u0026gt;List\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I added the source code for commons-fileupload and Commons IO into my \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Eclipse_%28software%29\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Eclipse\u0026lt;/a\u0026gt; project to trace the actual error and finally got some insight. First, the exception thrown is of type Throwable not the stated FileIOException nor even Exception (these will not be trapped). Second, the error message is obfuscatory in that it stated class not found because axis2 could not find commons-io.  Axis2 is not used in my project at all, but it exists as a folder in the Geronimo repository subdirectory as part of standard installation.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Finally, I found one place that posed a working solution which successfully solved my problem. You must hide the JAR files from the parent loader in the deployment plan. This was put into the \u0026lt;em\u0026gt;geronimo-web.xml\u0026lt;/em\u0026gt; file with my full file shown below.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Pasted from \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;http://osdir.com/ml/user-geronimo-apache/2011-03/msg00026.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;http://osdir.com/ml/user-geronimo-apache/2011-03/msg00026.html\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-xml s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?xml version=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;1.0\u0026quot;\u0026lt;/span\u0026gt; encoding=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UTF-8\u0026quot;\u0026lt;/span\u0026gt; standalone=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;no\u0026quot;\u0026lt;/span\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;web:web-app\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xmlns:app\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://geronimo.apache.org/xml/ns/j2ee/application-2.0\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xmlns:client\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://geronimo.apache.org/xml/ns/j2ee/application-client-2.0\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xmlns:conn\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://geronimo.apache.org/xml/ns/j2ee/connector-1.2\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xmlns:dep\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://geronimo.apache.org/xml/ns/deployment-1.2\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xmlns:ejb\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://openejb.apache.org/xml/ns/openejb-jar-2.2\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xmlns:log\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://geronimo.apache.org/xml/ns/loginconfig-2.0\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xmlns:name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://geronimo.apache.org/xml/ns/naming-1.2\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xmlns:pers\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://java.sun.com/xml/ns/persistence\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xmlns:pkgen\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://openejb.apache.org/xml/ns/pkgen-2.1\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xmlns:sec\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://geronimo.apache.org/xml/ns/security-2.0\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xmlns:web\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:environment\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:moduleId\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:groupId\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;DataStar\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:groupId\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:artifactId\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;DataStar\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:artifactId\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:version\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;1.0\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:version\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:type\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;car\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:type\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:moduleId\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;\u0026amp;lt;!-- Don\u0026apos;t load commons-io or fileupload from parent classloaders --\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:hidden-classes\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:filter\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;org.apache.commons.io\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:filter\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:filter\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;org.apache.commons.fileupload\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:filter\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:hidden-classes\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:inverse-classloading\u0026lt;/span\u0026gt;/\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;dep:environment\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;web:context-root\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;/DataStar\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;web:context-root\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;web:web-app\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here\u0026apos;s an example using apache commons-fileupload:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// apache commons-fileupload to handle file upload\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DiskFileItemFactory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;factory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DiskFileItemFactory\u0026lt;/span\u0026gt;();\nfactory.setRepository(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(DataSources.TORRENTS_DIR()));\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ServletFileUpload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileUpload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ServletFileUpload\u0026lt;/span\u0026gt;(factory);\n\nList\u0026amp;lt;FileItem\u0026amp;gt; items = fileUpload.parseRequest(req.raw());\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;FileItem\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;item\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; items.stream()\n  .filter(e -\u0026amp;gt;\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;the_upload_name\u0026quot;\u0026lt;/span\u0026gt;.equals(e.getFieldName()))\n  .findFirst().get();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; item.getName();\n\nitem.write(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(dir, fileName));\nlog.info(fileName);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You first have to set the enctype attribute of the form to \u0026quot;multipart/form-data\u0026quot;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This is shown below.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;action\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Controller\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;method\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;enctype\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/form-data\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;label\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file-upload\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; Click here to upload an Image \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;label\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;required\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And then, in the Servlet \u0026quot;Controller\u0026quot; add the Annotation for a Multi-part to indicate multipart data is processed in the servlet.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;After doing this, retrieve the part sent through the form and then retrieve the file name (with path)of the submitted file. Use this to create a new file in the desired path and write the parts of the file to the newly created file to recreate the file.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As shown below:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@MultipartConfig\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Controller\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpServlet\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doPost\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpServletRequest request, HttpServletResponse response)\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ServletException, IOException {\n        insertImage(request, response);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addProduct\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpServletRequest request, HttpServletResponse response)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Part\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;filePart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; request.getPart(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;imageName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Paths.get(filePart.getSubmittedFileName()).getFileName().toString();\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;imageSavePath\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;specify image path to save image\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//path to save image\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;FileOutputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;outputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileContent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            outputStream = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FileOutputStream\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(imageSavePath + File.separator + imageName));\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Creating a new file with file path and the file name\u0026lt;/span\u0026gt;\n            fileContent = filePart.getInputStream();\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Getting the input stream\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;readBytes\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[] readArray = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1024\u0026lt;/span\u0026gt;];\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Initializing a byte array with size 1024\u0026lt;/span\u0026gt;\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; ((readBytes = fileContent.read(readArray)) != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) {\n                outputStream.write(readArray, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, readBytes);\n            } \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This loop will write the contents of the byte array unitl the end to the output stream\u0026lt;/span\u0026gt;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n            System.out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Error Writing File: \u0026quot;\u0026lt;/span\u0026gt; + ex);\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;finally\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (outputStream != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n                outputStream.close();\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Closing the output stream\u0026lt;/span\u0026gt;\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (fileContent != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n                fileContent.close();\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Closing the input stream\u0026lt;/span\u0026gt;\n            }\n        }\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The simplest way I could come up with for files and input controls, without a billion libraries:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;  \u0026amp;lt;%\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (request.getContentType() == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;)\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// For input type=text controls\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;v_Text\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\n          (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BufferedReader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InputStreamReader\u0026lt;/span\u0026gt;(request.getPart(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Text1\u0026quot;\u0026lt;/span\u0026gt;).getInputStream()))).readLine();\n\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// For input type=file controls\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;inStr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; request.getPart(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;File1\u0026quot;\u0026lt;/span\u0026gt;).getInputStream();\n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; charArray[] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;[inStr.available()];\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InputStreamReader\u0026lt;/span\u0026gt;(inStr).read(charArray);\n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;contents\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(charArray);\n  %\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Use:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DiskFileUpload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;upload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DiskFileUpload\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;From this object you have to get the file items and fields, and then you can store into the server like the following:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;loc\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;./webapps/prjct name/server folder/\u0026quot;\u0026lt;/span\u0026gt; + contentid + extension;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;uploadFile\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(loc);\nitem.write(uploadFile);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can upload a file using JSP /servlet.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;action\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UploadFileServlet\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;method\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;description\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;submit\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;On the other hand, on the server side, use the following code.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; com.abc..servlet;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.io.File;\n---------\n--------\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n * Servlet implementation class UploadFileServlet\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;UploadFileServlet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpServlet\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;long\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;serialVersionUID\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1L\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;UploadFileServlet\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;();\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TODO Auto-generated constructor stub\u0026lt;/span\u0026gt;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doGet\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpServletRequest request, HttpServletResponse response)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ServletException, IOException {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TODO Auto-generated method stub\u0026lt;/span\u0026gt;\n        response.sendRedirect(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;../jsp/ErrorPage.jsp\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doPost\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpServletRequest request, HttpServletResponse response)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ServletException, IOException {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TODO Auto-generated method stub\u0026lt;/span\u0026gt;\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;PrintWriter\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;out\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; response.getWriter();\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpSession\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;httpSession\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; request.getSession();\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;filePathUpload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (String) httpSession.getAttribute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;path\u0026quot;\u0026lt;/span\u0026gt;) != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; ? httpSession.getAttribute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;path\u0026quot;\u0026lt;/span\u0026gt;).toString() : \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; ;\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;path1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; filePathUpload;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;filename\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;path\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;FileItem\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;item\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;isMultipart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; ServletFileUpload.isMultipartContent(request);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (isMultipart) {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;FileItemFactory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;factory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DiskFileItemFactory\u0026lt;/span\u0026gt;();\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ServletFileUpload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;upload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ServletFileUpload\u0026lt;/span\u0026gt;(factory);\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;FieldName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;List\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;items\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; upload.parseRequest(request);\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Iterator\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;iterator\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; items.iterator();\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (iterator.hasNext()) {\n                     item = (FileItem) iterator.next();\n\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (fieldname.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;description\u0026quot;\u0026lt;/span\u0026gt;)) {\n                            description = item.getString();\n                        }\n                    }\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!item.isFormField()) {\n                        filename = item.getName();\n                        path = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(path1 + File.separator);\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!path.exists()) {\n                            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;status\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; path.mkdirs();\n                        }\n                        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* Start of code fro privilege */\u0026lt;/span\u0026gt;\n\n                        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;uploadedFile\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(path + Filename);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// for copy file\u0026lt;/span\u0026gt;\n                        item.write(uploadedFile);\n                        }\n                    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                        f1 = item.getName();\n                    }\n\n                } \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// END OF WHILE\u0026lt;/span\u0026gt;\n                response.sendRedirect(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;welcome.jsp\u0026quot;\u0026lt;/span\u0026gt;);\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (FileUploadException e) {\n                e.printStackTrace();\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h3\u0026gt;HTML page\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;html\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;head\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;title\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;File Uploading Form\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;title\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;head\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;h3\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;File Upload:\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;h3\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        Select a file to upload: \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;br\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;action\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UploadServlet\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;method\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post\u0026quot;\u0026lt;/span\u0026gt;\n              \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;enctype\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/form-data\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n            \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;size\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;50\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;br\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;submit\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Upload File\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;html\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Servlet file\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Import required java libraries\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.io.*;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.*;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.servlet.ServletConfig;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.servlet.ServletException;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.servlet.http.HttpServlet;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.servlet.http.HttpServletRequest;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.servlet.http.HttpServletResponse;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; org.apache.commons.fileupload.FileItem;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; org.apache.commons.fileupload.FileUploadException;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; org.apache.commons.fileupload.disk.DiskFileItemFactory;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; org.apache.commons.fileupload.servlet.ServletFileUpload;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; org.apache.commons.io.output.*;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;UploadServlet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpServlet\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; isMultipart;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String filePath;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;maxFileSize\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt; * \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1024\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;maxMemSize\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; * \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1024\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; File file;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;init\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Get the file location where it would be stored.\u0026lt;/span\u0026gt;\n        filePath =\n               getServletContext().getInitParameter(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file-upload\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doPost\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpServletRequest request,\n                       HttpServletResponse response)\u0026lt;/span\u0026gt;\n               \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ServletException, java.io.IOException {\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Check that we have a file upload request\u0026lt;/span\u0026gt;\n        isMultipart = ServletFileUpload.isMultipartContent(request);\n        response.setContentType(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/html\u0026quot;\u0026lt;/span\u0026gt;);\n        java.io.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;PrintWriter\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;out\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; response.getWriter();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!isMultipart) {\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;html\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;head\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;title\u0026amp;gt;Servlet upload\u0026amp;lt;/title\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/head\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;body\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;p\u0026amp;gt;No file uploaded\u0026amp;lt;/p\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/body\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/html\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DiskFileItemFactory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;factory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DiskFileItemFactory\u0026lt;/span\u0026gt;();\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Maximum size that will be stored in memory\u0026lt;/span\u0026gt;\n        factory.setSizeThreshold(maxMemSize);\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Location to save data that is larger than maxMemSize.\u0026lt;/span\u0026gt;\n        factory.setRepository(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;c:\\\\temp\u0026quot;\u0026lt;/span\u0026gt;));\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Create a new file upload handler\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ServletFileUpload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;upload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ServletFileUpload\u0026lt;/span\u0026gt;(factory);\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// maximum file size to be uploaded.\u0026lt;/span\u0026gt;\n        upload.setSizeMax(maxFileSize);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Parse the request to get file items.\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;List\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileItems\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; upload.parseRequest(request);\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Process the uploaded file items\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Iterator\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;i\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fileItems.iterator();\n\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;html\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;head\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;title\u0026amp;gt;Servlet upload\u0026amp;lt;/title\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/head\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;body\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (i.hasNext())\n            {\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;FileItem\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fi\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (FileItem)i.next();\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!fi.isFormField())\n                {\n                     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Get the uploaded file parameters\u0026lt;/span\u0026gt;\n                     \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fieldName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fi.getFieldName();\n                     \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fileName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fi.getName();\n                     \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;contentType\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fi.getContentType();\n                     \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;isInMemory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fi.isInMemory();\n                     \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;long\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;sizeInBytes\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fi.getSize();\n\n                     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Write the file\u0026lt;/span\u0026gt;\n                     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (fileName.lastIndexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\\\u0026quot;\u0026lt;/span\u0026gt;) \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) {\n                         file = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(filePath +\n                         fileName.substring(fileName.lastIndexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\\\u0026quot;\u0026lt;/span\u0026gt;)));\n                     }\n                     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                         file = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(filePath +\n                         fileName.substring(fileName.lastIndexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\\\u0026quot;\u0026lt;/span\u0026gt;) + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;));\n                     }\n                     fi.write(file);\n                     out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Uploaded Filename: \u0026quot;\u0026lt;/span\u0026gt; + fileName + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;br\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n                }\n            }\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/body\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n            out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/html\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(Exception ex) {\n            System.out.println(ex);\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doGet\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpServletRequest request,\n                        HttpServletResponse response)\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ServletException, java.io.IOException {\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ServletException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;GET method used with \u0026quot;\u0026lt;/span\u0026gt; +\n                 getClass().getName() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;: POST method required.\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;File \u0026lt;em\u0026gt;web.xml\u0026lt;/em\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Compile the above servlet UploadServlet and create the required entry in the \u0026lt;em\u0026gt;web.xml\u0026lt;/em\u0026gt; file as follows.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-xml s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n   \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-name\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;UploadServlet\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-name\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n   \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-class\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;UploadServlet\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-class\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-mapping\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n   \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-name\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;UploadServlet\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-name\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n   \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;url-pattern\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;/UploadServlet\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;url-pattern\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;servlet-mapping\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Sending multiple files for file, we have to use \u0026lt;code\u0026gt;enctype=\u0026quot;multipart/form-data\u0026quot;\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;And to send multiple files, use \u0026lt;code\u0026gt;multiple=\u0026quot;multiple\u0026quot;\u0026lt;/code\u0026gt; in the \u0026lt;em\u0026gt;input\u0026lt;/em\u0026gt; tag:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;form action=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;upload\u0026quot;\u0026lt;/span\u0026gt; method=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post\u0026quot;\u0026lt;/span\u0026gt; enctype=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/form-data\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\n    \u0026amp;lt;input type=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fileattachments\u0026quot;\u0026lt;/span\u0026gt;  multiple=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multiple\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n    \u0026amp;lt;input type=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;submit\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\u0026amp;lt;/form\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":170,"title":"How can I upload files to a server using JSP/Servlet?","content":"\n                \n\u0026lt;p\u0026gt;How can I upload files to server using JSP/Servlet?\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I tried this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;action\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;upload\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;method\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;description\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;submit\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;However, I only get the file name, not the file content. When I add  \u0026lt;code\u0026gt;enctype=\u0026quot;multipart/form-data\u0026quot;\u0026lt;/code\u0026gt; to the \u0026lt;code\u0026gt;\u0026amp;lt;form\u0026amp;gt;\u0026lt;/code\u0026gt;, then \u0026lt;code\u0026gt;request.getParameter()\u0026lt;/code\u0026gt; returns \u0026lt;code\u0026gt;null\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;During research I stumbled upon \u0026lt;a href=\u0026quot;http://commons.apache.org/fileupload\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Apache Common FileUpload\u0026lt;/a\u0026gt;. I tried this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;FileItemFactory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;factory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DiskFileItemFactory\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ServletFileUpload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;upload\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ServletFileUpload\u0026lt;/span\u0026gt;(factory);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;List\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;items\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; upload.parseRequest(request); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This line is where it died.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Unfortunately, the servlet threw an exception without a clear message and cause. Here is the stacktrace:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-none s-code-block\u0026quot;\u0026gt;\u0026lt;code\u0026gt;SEVERE: Servlet.service() for servlet UploadServlet threw exception\njavax.servlet.ServletException: Servlet execution threw an exception\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:313)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n    at java.lang.Thread.run(Thread.java:637)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","slug":"how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658","postType":"QUESTION","createdAt":"2022-07-09T16:40:47.000Z","updatedAt":"2022-07-09T16:40:47.000Z","tags":[{"id":624,"name":"servlets","slug":"servlets","createdAt":"2022-07-09T16:40:47.000Z","updatedAt":"2022-07-09T16:40:47.000Z","Questions_Tags":{"questionId":170,"tagId":624}},{"id":625,"name":"jakarta-ee","slug":"jakarta-ee","createdAt":"2022-07-09T16:40:47.000Z","updatedAt":"2022-07-09T16:40:47.000Z","Questions_Tags":{"questionId":170,"tagId":625}},{"id":626,"name":"file-upload","slug":"file-upload","createdAt":"2022-07-09T16:40:47.000Z","updatedAt":"2022-07-09T16:40:47.000Z","Questions_Tags":{"questionId":170,"tagId":626}}],"relatedQuestions":[{"title":"How can I upload files to a server using JSP/Servlet?","slug":"how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658","tags":[{"name":"servlets","Questions_Tags":{"questionId":170,"tagId":624}},{"name":"jakarta-ee","Questions_Tags":{"questionId":170,"tagId":625}},{"name":"file-upload","Questions_Tags":{"questionId":170,"tagId":626}}]}]},"randomQuestions":[{"title":"What is the difference between JSON and Object Literal Notation?","slug":"what-is-the-difference-between-json-and-object-literal-notation-1657387515710"},{"title":"Center one and right/left align other flexbox element","slug":"center-one-and-rightleft-align-other-flexbox-element-1657387899083"},{"title":"What are the nuances of scope prototypal / prototypical inheritance in AngularJS?","slug":"what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs-1657387340067"},{"title":"How do you remove duplicates from a list whilst preserving order?","slug":"how-do-you-remove-duplicates-from-a-list-whilst-preserving-order-1657387877978"},{"title":"How do I generate random integers within a specific range in Java?","slug":"how-do-i-generate-random-integers-within-a-specific-range-in-java-1657385458888"},{"title":"Use dynamic variable names in JavaScript","slug":"use-dynamic-variable-names-in-javascript-1657388468075"},{"title":"What does the 'static' keyword do in a class?","slug":"what-does-the-'static'-keyword-do-in-a-class-1657388554238"},{"title":"Is there a JavaScript / jQuery DOM change listener?","slug":"is-there-a-javascript-jquery-dom-change-listener-1657387961200"},{"title":"How to choose the right bean scope?","slug":"how-to-choose-the-right-bean-scope-1657387596513"},{"title":"Secure hash and salt for PHP passwords","slug":"secure-hash-and-salt-for-php-passwords-1657387363258"},{"title":"Can I mix MySQL APIs in PHP?","slug":"can-i-mix-mysql-apis-in-php-1657384597444"},{"title":"How do I properly clean up Excel interop objects?","slug":"how-do-i-properly-clean-up-excel-interop-objects-1657388329706"},{"title":"Persist variables between page loads","slug":"persist-variables-between-page-loads-1657388558452"},{"title":"How to use variables in SQL statement in Python?","slug":"how-to-use-variables-in-sql-statement-in-python-1657388479077"},{"title":"What is the copy-and-swap idiom?","slug":"what-is-the-copy-and-swap-idiom-1657384840329"},{"title":"What is the JavaScript version of sleep()?","slug":"what-is-the-javascript-version-of-sleep()-1657387391406"},{"title":"Are dictionaries ordered in Python 3.6+?","slug":"are-dictionaries-ordered-in-python-3.6+-1657387834234"},{"title":"How to check whether a string contains a substring in JavaScript?","slug":"how-to-check-whether-a-string-contains-a-substring-in-javascript-1657388080698"},{"title":"How to compare arrays in JavaScript?","slug":"how-to-compare-arrays-in-javascript-1657387352277"},{"title":"Why does my function that calls an API or launches a coroutine return an empty or null value?","slug":"why-does-my-function-that-calls-an-api-or-launches-a-coroutine-return-an-empty-or-null-value-1657388483820"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658"},"buildId":"TQ2eYlCSdocSK-hq6gkM0","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>