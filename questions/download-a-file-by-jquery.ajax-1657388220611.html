<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>Download a file by jQuery.Ajax | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I have a Struts2 action in the server side for file downloading.

&lt;action name=&quot;download&quot; class=&quot;com.xxx.DownAction&quot;&gt;
    &lt;result name=&quot;success&quot; type=&quot;stream&quot;&gt;
        &lt;param name=&quot;contentType&quot;&gt;text/plain&lt;/param&gt;
        &lt;param name=&quot;inputName&quot;&gt;imageStream&lt;/param&gt;
        &lt;param name=&quot;contentDisposition&quot;&gt;attachment;filename={fileName}&lt;/param&gt;
        &lt;param name=&quot;bufferSize&quot;&gt;1024&lt;/param&gt;
    &lt;/result&gt;
&lt;/action&gt;


However when I call the action using the jQuery:

$.post(
  &quot;/download.action&quot;,{
    para1:value1,
    para2:value2
    ....
  },function(data){
      console.info(data);
   }
);


in Firebug I see the data is retrieved with the Binary stream. I wonder how to open the file downloading window with which the user can save the file locally?
    "/><meta property="og:title" content="Download a file by jQuery.Ajax | Solutions Checker"/><meta property="og:description" content="I have a Struts2 action in the server side for file downloading.

&lt;action name=&quot;download&quot; class=&quot;com.xxx.DownAction&quot;&gt;
    &lt;result name=&quot;success&quot; type=&quot;stream&quot;&gt;
        &lt;param name=&quot;contentType&quot;&gt;text/plain&lt;/param&gt;
        &lt;param name=&quot;inputName&quot;&gt;imageStream&lt;/param&gt;
        &lt;param name=&quot;contentDisposition&quot;&gt;attachment;filename={fileName}&lt;/param&gt;
        &lt;param name=&quot;bufferSize&quot;&gt;1024&lt;/param&gt;
    &lt;/result&gt;
&lt;/action&gt;


However when I call the action using the jQuery:

$.post(
  &quot;/download.action&quot;,{
    para1:value1,
    para2:value2
    ....
  },function(data){
      console.info(data);
   }
);


in Firebug I see the data is retrieved with the Binary stream. I wonder how to open the file downloading window with which the user can save the file locally?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Download a file by jQuery.Ajax","text":"I have a Struts2 action in the server side for file downloading.\n\n&lt;action name=&quot;download&quot; class=&quot;com.xxx.DownAction&quot;&gt;\n    &lt;result name=&quot;success&quot; type=&quot;stream&quot;&gt;\n        &lt;param name=&quot;contentType&quot;&gt;text/plain&lt;/param&gt;\n        &lt;param name=&quot;inputName&quot;&gt;imageStream&lt;/param&gt;\n        &lt;param name=&quot;contentDisposition&quot;&gt;attachment;filename={fileName}&lt;/param&gt;\n        &lt;param name=&quot;bufferSize&quot;&gt;1024&lt;/param&gt;\n    &lt;/result&gt;\n&lt;/action&gt;\n\n\nHowever when I call the action using the jQuery:\n\n$.post(\n  &quot;/download.action&quot;,{\n    para1:value1,\n    para2:value2\n    ....\n  },function(data){\n      console.info(data);\n   }\n);\n\n\nin Firebug I see the data is retrieved with the Binary stream. I wonder how to open the file downloading window with which the user can save the file locally?\n    ","answerCount":26,"upVoteCount":500,"suggestedAnswer":[{"text":"2019 modern browsers update\n\nThis is the approach I&apos;d now recommend with a few caveats:\n\n\nA relatively modern browser is required\nIf the file is expected to be very large you should likely do something similar to the original approach (iframe and cookie) because some of the below operations could likely consume system memory at least as large as the file being downloaded and/or other interesting CPU side effects.\n\n\n\n\nfetch(&apos;https://jsonplaceholder.typicode.com/todos/1&apos;)\n  .then(resp =&gt; resp.blob())\n  .then(blob =&gt; {\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement(&apos;a&apos;);\n    a.style.display = &apos;none&apos;;\n    a.href = url;\n    // the filename you want\n    a.download = &apos;todo-1.json&apos;;\n    document.body.appendChild(a);\n    a.click();\n    window.URL.revokeObjectURL(url);\n    alert(&apos;your file has downloaded!&apos;); // or you know, something with better UX...\n  })\n  .catch(() =&gt; alert(&apos;oh no!&apos;));\n Run code snippetHide resultsExpand snippet\n\n\n\n2012 Original jQuery/iframe/Cookie based approach\n\nBluish is completely right about this, you can&apos;t do it through Ajax because JavaScript cannot save files directly to a user&apos;s computer (out of security concerns). Unfortunately pointing the main window&apos;s URL at your file download means you have little control over what the user experience is when a file download occurs.\n\nI created jQuery File Download which allows for an &quot;Ajax like&quot; experience with file downloads complete with OnSuccess and OnFailure callbacks to provide for a better user experience. Take a look at my blog post on the common problem that the plugin solves and some ways to use it and also a demo of jQuery File Download in action. Here is the source\n\nHere is a simple use case demo using the plugin source with promises. The demo page includes many other, &apos;better UX&apos; examples as well.\n\n$.fileDownload(&apos;some/file.pdf&apos;)\n    .done(function () { alert(&apos;File download a success!&apos;); })\n    .fail(function () { alert(&apos;File download failed!&apos;); });\n\n\nDepending on what browsers you need to support you may be able to use https://github.com/eligrey/FileSaver.js/ which allows more explicit control than the IFRAME method jQuery File Download uses.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"Noone posted this @Pekka&apos;s solution... so I&apos;ll post it. It can help someone.\n\nYou don&apos;t need to do this through Ajax. Just use\n\nwindow.location=&quot;download.action?para1=value1....&quot;\n\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"You can with HTML5\n\nNB: The file data returned MUST be base64 encoded because you cannot JSON encode binary data\n\nIn my AJAX response I have a data structure that looks like this:\n\n{\n    result: &apos;OK&apos;,\n    download: {\n        mimetype: string(mimetype in the form &apos;major/minor&apos;),\n        filename: string(the name of the file to download),\n        data: base64(the binary data as base64 to download)\n    }\n}\n\n\nThat means that I can do the following to save a file via AJAX\n\nvar a = document.createElement(&apos;a&apos;);\nif (window.URL &amp;&amp; window.Blob &amp;&amp; (&apos;download&apos; in a) &amp;&amp; window.atob) {\n    // Do it the HTML5 compliant way\n    var blob = base64ToBlob(result.download.data, result.download.mimetype);\n    var url = window.URL.createObjectURL(blob);\n    a.href = url;\n    a.download = result.download.filename;\n    a.click();\n    window.URL.revokeObjectURL(url);\n}\n\n\nThe function base64ToBlob was taken from here and must be used in compliance with this function \n\nfunction base64ToBlob(base64, mimetype, slicesize) {\n    if (!window.atob || !window.Uint8Array) {\n        // The current browser doesn&apos;t have the atob function. Cannot continue\n        return null;\n    }\n    mimetype = mimetype || &apos;&apos;;\n    slicesize = slicesize || 512;\n    var bytechars = atob(base64);\n    var bytearrays = [];\n    for (var offset = 0; offset &lt; bytechars.length; offset += slicesize) {\n        var slice = bytechars.slice(offset, offset + slicesize);\n        var bytenums = new Array(slice.length);\n        for (var i = 0; i &lt; slice.length; i++) {\n            bytenums[i] = slice.charCodeAt(i);\n        }\n        var bytearray = new Uint8Array(bytenums);\n        bytearrays[bytearrays.length] = bytearray;\n    }\n    return new Blob(bytearrays, {type: mimetype});\n};\n\n\nThis is good if your server is dumping filedata to be saved. However, I&apos;ve not quite worked out how one would implement a HTML4 fallback\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"The simple way to make the browser downloads a file is to make the request like that:\n\n function downloadFile(urlToSend) {\n     var req = new XMLHttpRequest();\n     req.open(&quot;GET&quot;, urlToSend, true);\n     req.responseType = &quot;blob&quot;;\n     req.onload = function (event) {\n         var blob = req.response;\n         var fileName = req.getResponseHeader(&quot;fileName&quot;) //if you have the fileName header available\n         var link=document.createElement(&apos;a&apos;);\n         link.href=window.URL.createObjectURL(blob);\n         link.download=fileName;\n         link.click();\n     };\n\n     req.send();\n }\n\n\nThis opens the browser download pop up.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"1. Framework agnostic: Servlet downloading file as attachment\n\n&lt;!-- with JS --&gt;\n&lt;a href=&quot;javascript:window.location=&apos;downloadServlet?param1=value1&apos;&quot;&gt;\n    download\n&lt;/a&gt;\n\n&lt;!-- without JS --&gt;\n&lt;a href=&quot;downloadServlet?param1=value1&quot; &gt;download&lt;/a&gt;\n\n\n2. Struts2 Framework: Action downloading file as attachment\n\n&lt;!-- with JS --&gt;\n&lt;a href=&quot;javascript:window.location=&apos;downloadAction.action?param1=value1&apos;&quot;&gt;\n    download\n&lt;/a&gt;\n\n&lt;!-- without JS --&gt;\n&lt;a href=&quot;downloadAction.action?param1=value1&quot; &gt;download&lt;/a&gt;\n\n\nIt would be better to use &lt;s:a&gt; tag pointing with OGNL to an URL created with &lt;s:url&gt; tag:\n\n&lt;!-- without JS, with Struts tags: THE RIGHT WAY --&gt;    \n&lt;s:url action=&quot;downloadAction.action&quot; var=&quot;url&quot;&gt;\n    &lt;s:param name=&quot;param1&quot;&gt;value1&lt;/s:param&gt;\n&lt;/s:ulr&gt;\n&lt;s:a href=&quot;%{url}&quot; &gt;download&lt;/s:a&gt;\n\n\nIn the above cases, you need to write the Content-Disposition header to the response, specifying that the file needs to be downloaded (attachment) and not opened by the browser (inline). You need to specify the Content Type too, and you may want to add the file name and length (to help the browser drawing a realistic progressbar). \n\nFor example, when downloading a ZIP:\n\nresponse.setContentType(&quot;application/zip&quot;);\nresponse.addHeader(&quot;Content-Disposition&quot;, \n                   &quot;attachment; filename=\\&quot;name of my file.zip\\&quot;&quot;);\nresponse.setHeader(&quot;Content-Length&quot;, myFile.length()); // or myByte[].length...\n\n\nWith Struts2 (unless you are using the Action as a Servlet, an hack for direct streaming, for example), you don&apos;t need to directly write anything to the response; simply using the Stream result type and configuring it in struts.xml will work: EXAMPLE\n\n&lt;result name=&quot;success&quot; type=&quot;stream&quot;&gt;\n   &lt;param name=&quot;contentType&quot;&gt;application/zip&lt;/param&gt;\n   &lt;param name=&quot;contentDisposition&quot;&gt;attachment;filename=&quot;${fileName}&quot;&lt;/param&gt;\n   &lt;param name=&quot;contentLength&quot;&gt;${fileLength}&lt;/param&gt;\n&lt;/result&gt;\n\n\n3. Framework agnostic (/ Struts2 framework): Servlet(/Action) opening file inside the browser\n\nIf you want to open the file inside the browser, instead of downloading it, the Content-disposition must be set to inline, but the target can&apos;t be the current window location; you must target a new window created by javascript, an &lt;iframe&gt; in the page, or a new window created on-the-fly with the &quot;discussed&quot; target=&quot;_blank&quot;:\n\n&lt;!-- From a parent page into an IFrame without javascript --&gt;   \n&lt;a href=&quot;downloadServlet?param1=value1&quot; target=&quot;iFrameName&quot;&gt;\n    download\n&lt;/a&gt;\n\n&lt;!-- In a new window without javascript --&gt; \n&lt;a href=&quot;downloadServlet?param1=value1&quot; target=&quot;_blank&quot;&gt;\n    download\n&lt;/a&gt;\n\n&lt;!-- In a new window with javascript --&gt;    \n&lt;a href=&quot;javascript:window.open(&apos;downloadServlet?param1=value1&apos;);&quot; &gt;\n    download\n&lt;/a&gt;\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"I have created little function as workaround solution (inspired by @JohnCulviner plugin):\n\n// creates iframe and form in it with hidden field,\n// then submit form with provided data\n// url - form url\n// data - data to form field\n// input_name - form hidden input name\n\nfunction ajax_download(url, data, input_name) {\n    var $iframe,\n        iframe_doc,\n        iframe_html;\n\n    if (($iframe = $(&apos;#download_iframe&apos;)).length === 0) {\n        $iframe = $(&quot;&lt;iframe id=&apos;download_iframe&apos;&quot; +\n                    &quot; style=&apos;display: none&apos; src=&apos;about:blank&apos;&gt;&lt;/iframe&gt;&quot;\n                   ).appendTo(&quot;body&quot;);\n    }\n\n    iframe_doc = $iframe[0].contentWindow || $iframe[0].contentDocument;\n    if (iframe_doc.document) {\n        iframe_doc = iframe_doc.document;\n    }\n\n    iframe_html = &quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;form method=&apos;POST&apos; action=&apos;&quot; +\n                  url +&quot;&apos;&gt;&quot; +\n                  &quot;&lt;input type=hidden name=&apos;&quot; + input_name + &quot;&apos; value=&apos;&quot; +\n                  JSON.stringify(data) +&quot;&apos;/&gt;&lt;/form&gt;&quot; +\n                  &quot;&lt;/body&gt;&lt;/html&gt;&quot;;\n\n    iframe_doc.open();\n    iframe_doc.write(iframe_html);\n    $(iframe_doc).find(&apos;form&apos;).submit();\n}\n\n\nDemo with click event:\n\n$(&apos;#someid&apos;).on(&apos;click&apos;, function() {\n    ajax_download(&apos;/download.action&apos;, {&apos;para1&apos;: 1, &apos;para2&apos;: 2}, &apos;dataname&apos;);\n});\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"I faced the same issue and successfully solved it. My use-case is this.\n\n&quot;Post JSON data to the server and receive an excel file.\nThat excel file is created by the server and returned as a response to the client. Download that response as a file with custom name in browser&quot;\n\n$(&quot;#my-button&quot;).on(&quot;click&quot;, function(){\n\n// Data to post\ndata = {\n    ids: [1, 2, 3, 4, 5]\n};\n\n// Use XMLHttpRequest instead of Jquery $ajax\nxhttp = new XMLHttpRequest();\nxhttp.onreadystatechange = function() {\n    var a;\n    if (xhttp.readyState === 4 &amp;&amp; xhttp.status === 200) {\n        // Trick for making downloadable link\n        a = document.createElement(&apos;a&apos;);\n        a.href = window.URL.createObjectURL(xhttp.response);\n        // Give filename you wish to download\n        a.download = &quot;test-file.xls&quot;;\n        a.style.display = &apos;none&apos;;\n        document.body.appendChild(a);\n        a.click();\n    }\n};\n// Post data to URL which handles post request\nxhttp.open(&quot;POST&quot;, excelDownloadUrl);\nxhttp.setRequestHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);\n// You should set responseType as blob for binary responses\nxhttp.responseType = &apos;blob&apos;;\nxhttp.send(JSON.stringify(data));\n});\n\n\nThe above snippet is just doing following\n\n\nPosting an array as JSON to the server using XMLHttpRequest.\nAfter fetching content as a blob(binary), we are creating a downloadable URL and attaching it to invisible &quot;a&quot; link then clicking it. I did a POST request here. Instead, you can go for a simple GET too. We cannot download the file through Ajax, must use XMLHttpRequest.\n\n\nHere we need to carefully set few things on the server side. I set few headers in Python Django HttpResponse. You need to set them accordingly if you use other programming languages.\n\n# In python django code\nresponse = HttpResponse(file_content, content_type=&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;)\n\n\nSince I download xls(excel) here, I adjusted contentType to above one. You need to set it according to your file type. You can use this technique to download any kind of files.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"Ok, based on ndpu&apos;s code heres an improved (I think) version of ajax_download;-\n\nfunction ajax_download(url, data) {\n    var $iframe,\n        iframe_doc,\n        iframe_html;\n\n    if (($iframe = $(&apos;#download_iframe&apos;)).length === 0) {\n        $iframe = $(&quot;&lt;iframe id=&apos;download_iframe&apos;&quot; +\n                    &quot; style=&apos;display: none&apos; src=&apos;about:blank&apos;&gt;&lt;/iframe&gt;&quot;\n                   ).appendTo(&quot;body&quot;);\n    }\n\n    iframe_doc = $iframe[0].contentWindow || $iframe[0].contentDocument;\n    if (iframe_doc.document) {\n        iframe_doc = iframe_doc.document;\n    }\n\n    iframe_html = &quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;form method=&apos;POST&apos; action=&apos;&quot; +\n                  url +&quot;&apos;&gt;&quot; \n\n    Object.keys(data).forEach(function(key){\n        iframe_html += &quot;&lt;input type=&apos;hidden&apos; name=&apos;&quot;+key+&quot;&apos; value=&apos;&quot;+data[key]+&quot;&apos;&gt;&quot;;\n\n    });\n\n        iframe_html +=&quot;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\n\n    iframe_doc.open();\n    iframe_doc.write(iframe_html);\n    $(iframe_doc).find(&apos;form&apos;).submit();\n}\n\n\nUse this like this;-\n\n$(&apos;#someid&apos;).on(&apos;click&apos;, function() {\n    ajax_download(&apos;/download.action&apos;, {&apos;para1&apos;: 1, &apos;para2&apos;: 2});\n});\n\n\nThe params are sent as proper post params as if coming from an input rather than as a json encoded string as per the previous example.\n\nCAVEAT: Be wary about the potential for variable injection on those forms. There might be a safer way to encode those variables. Alternatively contemplate escaping them.\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"Here is what I did, pure javascript and html. Did not test it but this should work in all browsers.\n\n\n  Javascript Function\n\n\nvar iframe = document.createElement(&apos;iframe&apos;);\niframe.id = &quot;IFRAMEID&quot;;\niframe.style.display = &apos;none&apos;;\ndocument.body.appendChild(iframe);\niframe.src = &apos;SERVERURL&apos;+&apos;?&apos; + $.param($scope.filtro);\niframe.addEventListener(&quot;load&quot;, function () {\n     console.log(&quot;FILE LOAD DONE.. Download should start now&quot;);\n});\n\n\n\n  Using just components that is supported in all browsers no additional\n  libraries.\n\n\n\n\n\n\n  Here is my server side JAVA Spring controller code.\n\n\n@RequestMapping(value = &quot;/rootto/my/xlsx&quot;, method = RequestMethod.GET)\npublic void downloadExcelFile(@RequestParam(value = &quot;param1&quot;, required = false) String param1,\n    HttpServletRequest request, HttpServletResponse response)\n            throws ParseException {\n\n    Workbook wb = service.getWorkbook(param1);\n    if (wb != null) {\n        try {\n            String fileName = &quot;myfile_&quot; + sdf.format(new Date());\n            response.setContentType(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;);\n            response.setHeader(&quot;Content-disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + fileName + &quot;.xlsx\\&quot;&quot;);\n            wb.write(response.getOutputStream());\n            response.getOutputStream().close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n    }\n\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"My approach is completly based on jQuery. The problem for me was that it has to be a POST-HTTP call. And I wanted it to be done by jQuery alone.\nThe solution:\n$.ajax({\n    type: &quot;POST&quot;,\n    url: &quot;/some/webpage&quot;,\n    headers: {&apos;X-CSRF-TOKEN&apos;: csrfToken},\n    data: additionalDataToSend,\n    dataType: &quot;text&quot;,\n    success: function(result) {\n        let blob = new Blob([result], { type: &quot;application/octetstream&quot; }); \n\n        let a = document.createElement(&apos;a&apos;);\n        a.href = window.URL.createObjectURL(blob);\n        a.download = &quot;test.xml&quot;;;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        window.URL.revokeObjectURL(a.href);\n                        \n        ...\n    },\n    error: errorDialog\n});\n\nExplanation:\nWhat I and many others do is to create a link on the webpage, indicating that the target should be downloaded and putting the result of the http-request as the target. After that I append the link to the document than simply clicking the link and removing the link afterwards. You don&apos;t need an iframe anymore.\nThe magic lies in the lines\nlet blob = new Blob([result], { type: &quot;application/octetstream&quot; }); \na.href = window.URL.createObjectURL(blob);\n\nThe interesting point is that this solution is only working with a &quot;blob&quot;. As you can see in other answers, some are simply using a blob but not explaining why and how to create it.\nAs you can read e.g. in the Mozilla developer documentation you need a file, media ressource or blob for the function &quot;createObjectURL()&quot; to work. The problem is that your http-response might not be any of those.\nTherefore the first thing you must do is to convert your response to a blob. This is what the first line does. Then you can use the &quot;createObjectURL&quot; with your newly created blob.\nIf you than click the link your browser will open a file-save dialog and you can save your data. Obviously it s possible that you cannot define a fixed filename for your file to download. Then you must make your response more complex like in the answer from Luke.\nAnd don&apos;t forget to free up the memory especially when you are working with large files. For more examples and information you can look at the details of the JS blob object\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"How to DOWNLOAD a file after receiving it by AJAX\n\nIts convenient when the file is created for a long time and you need to show PRELOADER\n\nExample when submitting a web form:\n\n&lt;script&gt;\n$(function () {\n    $(&apos;form&apos;).submit(function () {\n        $(&apos;#loader&apos;).show();\n        $.ajax({\n            url: $(this).attr(&apos;action&apos;),\n            data: $(this).serialize(),\n            dataType: &apos;binary&apos;,\n            xhrFields: {\n                &apos;responseType&apos;: &apos;blob&apos;\n            },\n            success: function(data, status, xhr) {\n                $(&apos;#loader&apos;).hide();\n                // if(data.type.indexOf(&apos;text/html&apos;) != -1){//If instead of a file you get an error page\n                //     var reader = new FileReader();\n                //     reader.readAsText(data);\n                //     reader.onload = function() {alert(reader.result);};\n                //     return;\n                // }\n                var link = document.createElement(&apos;a&apos;),\n                    filename = &apos;file.xlsx&apos;;\n                // if(xhr.getResponseHeader(&apos;Content-Disposition&apos;)){//filename \n                //     filename = xhr.getResponseHeader(&apos;Content-Disposition&apos;);\n                //     filename=filename.match(/filename=&quot;(.*?)&quot;/)[1];\n                //     filename=decodeURIComponent(escape(filename));\n                // }\n                link.href = URL.createObjectURL(data);\n                link.download = filename;\n                link.click();\n            }\n        });\n        return false;\n    });\n});\n&lt;/script&gt;\n\n\nOptional functional is commented out to simplify the example.\n\nNo need to create temporary files on the server.\n\nOn jQuery v2.2.4 OK. There will be an error on the old version:\n\nUncaught DOMException: Failed to read the &apos;responseText&apos; property from &apos;XMLHttpRequest&apos;: The value is only accessible if the object&apos;s &apos;responseType&apos; is &apos;&apos; or &apos;text&apos; (was &apos;blob&apos;).\n\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"function downloadURI(uri, name) \n{\n    var link = document.createElement(&quot;a&quot;);\n    link.download = name;\n    link.href = uri;\n    link.click();\n}\n\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"I try to download a CSV file and then do something after download has finished. So I need to implement an appropriate callback function.\n\nUsing window.location=&quot;...&quot; is not a good idea because I cannot operate the program after finishing download.  Something like this, change header so it is not a good idea.\n\nfetch is a good alternative however it cannot support IE 11. And window.URL.createObjectURL cannot support IE 11.You can refer this.\n\nThis is my code, it is similar to the code of Shahrukh Alam. But you should take care that window.URL.createObjectURL maybe create memory leaks. You can refer this. When response has arrived, data will be stored into memory of browser. So before you click a link, the file has been downloaded. It means that you can do anything after download.\n\n$.ajax({\n    url: &apos;your download url&apos;,\n    type: &apos;GET&apos;,\n}).done(function (data, textStatus, request) {\n    // csv =&gt; Blob\n    var blob = new Blob([data]);\n\n    // the file name from server.\n    var fileName = request.getResponseHeader(&apos;fileName&apos;);\n\n    if (window.navigator &amp;&amp; window.navigator.msSaveOrOpenBlob) { // for IE\n    window.navigator.msSaveOrOpenBlob(blob, fileName);\n    } else { // for others\n    var url = window.URL.createObjectURL(blob);\n    const a = document.createElement(&apos;a&apos;);\n    a.style.display = &apos;none&apos;;\n    a.href = url;\n    a.download = fileName;\n    document.body.appendChild(a);\n    a.click();\n    window.URL.revokeObjectURL(url);\n\n    //Do something after download \n    ...\n\n    }\n}).then(after_download)\n}\n\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"Adding some more things to  above answer for downloading a file\n\nBelow is some java spring code which generates byte Array\n\n@RequestMapping(value = &quot;/downloadReport&quot;, method = { RequestMethod.POST })\n    public ResponseEntity&lt;byte[]&gt; downloadReport(\n            @RequestBody final SomeObejct obj, HttpServletResponse response) throws Exception {\n\n        OutputStream out = new ByteArrayOutputStream();\n        // write something to output stream\n        HttpHeaders respHeaders = new HttpHeaders();\n        respHeaders.setContentType(MediaType.APPLICATION_OCTET_STREAM);\n        respHeaders.add(&quot;X-File-Name&quot;, name);\n        ByteArrayOutputStream bos = (ByteArrayOutputStream) out;\n        return new ResponseEntity&lt;byte[]&gt;(bos.toByteArray(), respHeaders, HttpStatus.CREATED);\n    }\n\n\nNow in  javascript code using FileSaver.js ,can download a file with below code \n\nvar json=angular.toJson(&quot;somejsobject&quot;);\nvar url=apiEndPoint+&apos;some url&apos;;\nvar xhr = new XMLHttpRequest();\n//headers(&apos;X-File-Name&apos;)\nxhr.onreadystatechange = function() {\n    if (this.readyState == 4 &amp;&amp; this.status == 201) {\n        var res = this.response;\n        var fileName=this.getResponseHeader(&apos;X-File-Name&apos;);\n        var data = new Blob([res]);\n        saveAs(data, fileName); //this from FileSaver.js\n    }\n}    \nxhr.open(&apos;POST&apos;, url);\nxhr.setRequestHeader(&apos;Authorization&apos;,&apos;Bearer &apos; + token);\nxhr.setRequestHeader(&apos;Content-Type&apos;, &apos;application/json&apos;);\nxhr.responseType = &apos;arraybuffer&apos;;\nxhr.send(json);\n\n\nThe above will download file \n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"In Rails, I do it this way: \n\nfunction download_file(file_id) {\n  let url       = &apos;/files/&apos; + file_id + &apos;/download_file&apos;;\n    $.ajax({\n    type: &apos;GET&apos;,\n    url: url,\n    processData: false,\n    success: function (data) {\n       window.location = url;\n    },\n    error: function (xhr) {\n     console.log(&apos; Error:  &gt;&gt;&gt;&gt; &apos; + JSON.stringify(xhr));\n    }\n   });\n }\n\n\nThe trick is the window.location part. The controller&apos;s method looks like:\n\n# GET /files/{:id}/download_file/\ndef download_file\n    send_file(@file.file,\n          :disposition =&gt; &apos;attachment&apos;,\n          :url_based_filename =&gt; false)\nend\n\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"Use window.open https://developer.mozilla.org/en-US/docs/Web/API/Window/open\n\nFor example, you can put this line of code in a click handler:\n\nwindow.open(&apos;/file.txt&apos;, &apos;_blank&apos;);\n\n\nIt will open a new tab (because of the &apos;_blank&apos; window-name) and that tab will open the URL.\n\nYour server-side code should also have something like this:\n\nres.set(&apos;Content-Disposition&apos;, &apos;attachment; filename=file.txt&apos;);\n\n\nAnd that way, the browser should prompt the user to save the file to disk, instead of just showing them the file. It will also automatically close the tab that it just opened.\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"The HTML Code :\n&lt;button type=&quot;button&quot; id=&quot;GetFile&quot;&gt;Get File!&lt;/button&gt;\n\nThe jQuery Code :\n$(&apos;#GetFile&apos;).on(&apos;click&apos;, function () {\n    $.ajax({\n        url: &apos;https://s3-us-west-2.amazonaws.com/s.cdpn.io/172905/test.pdf&apos;,\n        method: &apos;GET&apos;,\n        xhrFields: {\n            responseType: &apos;blob&apos;\n        },\n        success: function (data) {\n            var a = document.createElement(&apos;a&apos;);\n            var url = window.URL.createObjectURL(data);\n            a.href = url;\n            a.download = &apos;myfile.pdf&apos;;\n            document.body.append(a);\n            a.click();\n            a.remove();\n            window.URL.revokeObjectURL(url);\n        }\n    });\n});\n\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"Ok so here is the working code when Using MVC and you are getting your file from a controller\n\nlets say you have your byte array declare and populate,  the only thing you need to do is to use the File function (using System.Web.Mvc)\n\nbyte[] bytes = .... insert your bytes in the array\nreturn File(bytes, System.Net.Mime.MediaTypeNames.Application.Octet, &quot;nameoffile.exe&quot;);\n\n\nand then,  in the same controller,  add thoses 2 functions\n\nprotected override void OnResultExecuting(ResultExecutingContext context)\n    {\n        CheckAndHandleFileResult(context);\n\n        base.OnResultExecuting(context);\n    }\n\n    private const string FILE_DOWNLOAD_COOKIE_NAME = &quot;fileDownload&quot;;\n\n    /// &lt;summary&gt;\n    /// If the current response is a FileResult (an MVC base class for files) then write a\n    /// cookie to inform jquery.fileDownload that a successful file download has occured\n    /// &lt;/summary&gt;\n    /// &lt;param name=&quot;context&quot;&gt;&lt;/param&gt;\n    private void CheckAndHandleFileResult(ResultExecutingContext context)\n    {\n        if (context.Result is FileResult)\n            //jquery.fileDownload uses this cookie to determine that a file download has completed successfully\n            Response.SetCookie(new HttpCookie(FILE_DOWNLOAD_COOKIE_NAME, &quot;true&quot;) { Path = &quot;/&quot; });\n        else\n            //ensure that the cookie is removed in case someone did a file download without using jquery.fileDownload\n            if (Request.Cookies[FILE_DOWNLOAD_COOKIE_NAME] != null)\n                Response.Cookies[FILE_DOWNLOAD_COOKIE_NAME].Expires = DateTime.Now.AddYears(-1);\n    }\n\n\nand then you will be able to call your controller to download and get the &quot;success&quot; or &quot;failure&quot; callback\n\n$.fileDownload(mvcUrl(&apos;name of the controller&apos;), {\n            httpMethod: &apos;POST&apos;,\n            successCallback: function (url) {\n            //insert success code\n\n            },\n            failCallback: function (html, url) {\n            //insert fail code\n            }\n        });\n\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"I found a fix that while it&apos;s not actually using ajax it does allow you to use a javascript call to request the download and then get a callback when the download actually starts.  I found this helpful if the link runs a server side script that takes a little bit to compose the file before sending it. so you can alert them that it&apos;s processing, and then when it does finally send the file remove that processing notification. which is why I wanted to try to load the file via ajax to begin with so that I could have an event happen when the file is requested and another when it actually starts downloading.\n\nthe js on the front page\n\nfunction expdone()\n{\n    document.getElementById(&apos;exportdiv&apos;).style.display=&apos;none&apos;;\n}\nfunction expgo()\n{\n   document.getElementById(&apos;exportdiv&apos;).style.display=&apos;block&apos;;\n   document.getElementById(&apos;exportif&apos;).src=&apos;test2.php?arguments=data&apos;;\n}\n\n\nthe iframe\n\n&lt;div id=&quot;exportdiv&quot; style=&quot;display:none;&quot;&gt;\n&lt;img src=&quot;loader.gif&quot;&gt;&lt;br&gt;&lt;h1&gt;Generating Report&lt;/h1&gt;\n&lt;iframe id=&quot;exportif&quot; src=&quot;&quot; style=&quot;width: 1px;height: 1px; border:0px;&quot;&gt;&lt;/iframe&gt;\n&lt;/div&gt;\n\n\nthen the other file:\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;script&gt;\nfunction expdone()\n{\n    window.parent.expdone();\n}\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;iframe id=&quot;exportif&quot; src=&quot;&lt;?php echo &quot;http://10.192.37.211/npdtracker/exportthismonth.php?arguments=&quot;.$_GET[&quot;arguments&quot;]; ?&gt;&quot;&gt;&lt;/iframe&gt;\n&lt;script&gt;document.getElementById(&apos;exportif&apos;).onload= expdone;&lt;/script&gt;\n&lt;/body&gt;&lt;/html&gt;\n\n\nI think there&apos;s a way to read get data using js so then no php would be needed. but I don&apos;t know it off hand and the server I&apos;m using supports php so this works for me.  thought I&apos;d share it in case it helps anyone.\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0},{"text":"If the server is writing the file back in the response (including cookies if\nyou use them to determine whether the file download started), Simply create a form with the values and submit it:\nfunction ajaxPostDownload(url, data) {\n    var $form;\n    if (($form = $(&apos;#download_form&apos;)).length === 0) {\n        $form = $(&quot;&lt;form id=&apos;download_form&apos;&quot; + &quot; style=&apos;display: none; width: 1px; height: 1px; position: absolute; top: -10000px&apos; method=&apos;POST&apos; action=&apos;&quot; + url + &quot;&apos;&gt;&lt;/form&gt;&quot;);\n        $form.appendTo(&quot;body&quot;);\n    }\n    //Clear the form fields\n    $form.html(&quot;&quot;);\n    //Create new form fields\n    Object.keys(data).forEach(function (key) {\n        $form.append(&quot;&lt;input type=&apos;hidden&apos; name=&apos;&quot; + key + &quot;&apos; value=&apos;&quot; + data[key] + &quot;&apos;&gt;&quot;);\n    });\n    //Submit the form post\n    $form.submit();\n}\n\nUsage:\najaxPostDownload(&apos;/fileController/ExportFile&apos;, {\n    DownloadToken: &apos;newDownloadToken&apos;,\n    Name: $txtName.val(),\n    Type: $txtType.val()\n});\n\nController Method:\n[HttpPost]\npublic FileResult ExportFile(string DownloadToken, string Name, string Type)\n{\n    //Set DownloadToken Cookie.\n    Response.SetCookie(new HttpCookie(&quot;downloadToken&quot;, DownloadToken)\n    {\n        Expires = DateTime.UtcNow.AddDays(1),\n        Secure = false\n    });\n\n    using (var output = new MemoryStream())\n    {\n        //get File\n        return File(output.ToArray(), &quot;application/vnd.ms-excel&quot;, &quot;NewFile.xls&quot;);\n    }\n}\n\n    ","url":"/questions/[slug]#solution20","@type":"Answer","upvoteCount":0},{"text":"If you want to use  jQuery File Download , please note this for IE.\nYou need to reset the response or it will not download\n\n    //The IE will only work if you reset response\n    getServletResponse().reset();\n    //The jquery.fileDownload needs a cookie be set\n    getServletResponse().setHeader(&quot;Set-Cookie&quot;, &quot;fileDownload=true; path=/&quot;);\n    //Do the reset of your action create InputStream and return\n\n\nYour action can implement ServletResponseAware  to access getServletResponse() \n    ","url":"/questions/[slug]#solution21","@type":"Answer","upvoteCount":0},{"text":"It is certain that you can not do it through Ajax call.\n\nHowever, there is a workaround.\n\nSteps :\n\nIf you are using form.submit() for downloading the file, what you can do is :\n\n\nCreate an ajax call from client to server and store the file stream inside the session.\nUpon &quot;success&quot; being returned from server, call your form.submit() to just stream the file stream stored in the session.\n\n\nThis is helpful in case when you want to decide whether or not file needs to be downloaded after making form.submit(), eg: there can be a case where on form.submit(), an exception occurs on the server side and instead of crashing, you might need to show a custom message on the client side, in such case this implementation might help.\n    ","url":"/questions/[slug]#solution22","@type":"Answer","upvoteCount":0},{"text":"there is another solution to download a web page in ajax. But I am referring to a page that must first be processed and then downloaded.\n\nFirst you need to separate the page processing from the results download.\n\n1) Only the page calculations are made in the ajax call.\n\n$.post(&quot;CalculusPage.php&quot;, { calculusFunction: true, ID: 29, data1: &quot;a&quot;, data2: &quot;b&quot; },\n\n       function(data, status) \n       {\n            if (status == &quot;success&quot;) \n            {\n                /* 2) In the answer the page that uses the previous calculations is downloaded. For example, this can be a page that prints the results of a table calculated in the ajax call. */\n                window.location.href = DownloadPage.php+&quot;?ID=&quot;+29;\n            }               \n       }\n);\n\n// For example: in the CalculusPage.php\n\n    if ( !empty($_POST[&quot;calculusFunction&quot;]) ) \n    {\n        $ID = $_POST[&quot;ID&quot;];\n\n        $query = &quot;INSERT INTO ExamplePage (data1, data2) VALUES (&apos;&quot;.$_POST[&quot;data1&quot;].&quot;&apos;, &apos;&quot;.$_POST[&quot;data2&quot;].&quot;&apos;) WHERE id = &quot;.$ID;\n        ...\n    }\n\n// For example: in the DownloadPage.php\n\n    $ID = $_GET[&quot;ID&quot;];\n\n    $sede = &quot;SELECT * FROM ExamplePage WHERE id = &quot;.$ID;\n    ...\n\n    $filename=&quot;Export_Data.xls&quot;;\n    header(&quot;Content-Type: application/vnd.ms-excel&quot;);\n    header(&quot;Content-Disposition: inline; filename=$filename&quot;);\n\n    ...\n\n\nI hope this solution can be useful for many, as it was for me.\n    ","url":"/questions/[slug]#solution23","@type":"Answer","upvoteCount":0},{"text":"That&apos;s it works so fine in any browser (I&apos;m using asp.net core)\n\n\n\n            function onDownload() {\n\n  const api = &apos;@Url.Action(&quot;myaction&quot;, &quot;mycontroller&quot;)&apos;; \n  var form = new FormData(document.getElementById(&apos;form1&apos;));\n\n  fetch(api, { body: form, method: &quot;POST&quot;})\n      .then(resp =&gt; resp.blob())\n      .then(blob =&gt; {\n          const url = window.URL.createObjectURL(blob);\n        $(&apos;#linkdownload&apos;).attr(&apos;download&apos;, &apos;Attachement.zip&apos;);\n          $(&apos;#linkdownload&apos;).attr(&quot;href&quot;, url);\n          $(&apos;#linkdownload&apos;)\n              .fadeIn(3000,\n                  function() { });\n\n      })\n      .catch(() =&gt; alert(&apos;An error occurred&apos;));\n\n\n\n}\n \n &lt;button type=&quot;button&quot; onclick=&quot;onDownload()&quot; class=&quot;btn btn-primary btn-sm&quot;&gt;Click to Process Files&lt;/button&gt;\n \n \n \n &lt;a role=&quot;button&quot; href=&quot;#&quot; style=&quot;display: none&quot; class=&quot;btn btn-sm btn-secondary&quot; id=&quot;linkdownload&quot;&gt;Click to download Attachments&lt;/a&gt;\n \n \n &lt;form asp-controller=&quot;mycontroller&quot; asp-action=&quot;myaction&quot; id=&quot;form1&quot;&gt;&lt;/form&gt;\n \n \n Run code snippetHide resultsExpand snippet\n\n\n\n        function onDownload() {\n            const api = &apos;@Url.Action(&quot;myaction&quot;, &quot;mycontroller&quot;)&apos;; \n            //form1 is your id form, and to get data content of form\n            var form = new FormData(document.getElementById(&apos;form1&apos;));\n\n            fetch(api, { body: form, method: &quot;POST&quot;})\n                .then(resp =&gt; resp.blob())\n                .then(blob =&gt; {\n                    const url = window.URL.createObjectURL(blob);\n                    $(&apos;#linkdownload&apos;).attr(&apos;download&apos;, &apos;Attachments.zip&apos;);\n                    $(&apos;#linkdownload&apos;).attr(&quot;href&quot;, url);\n                    $(&apos;#linkdownload&apos;)\n                        .fadeIn(3000,\n                            function() {\n\n                            });\n                })\n                .catch(() =&gt; alert(&apos;An error occurred&apos;));                 \n\n        }\n\n    ","url":"/questions/[slug]#solution24","@type":"Answer","upvoteCount":0},{"text":"I have tried Ajax and HttpRequest ways to get my result download file but I&apos;ve failed, finally I&apos;ve solved my problem using these steps:\nimplemented a simple hidden form in my html code:\n&lt;form method=&quot;post&quot; id=&quot;post_form&quot; style=&quot;display:none&quot; action=&quot;amin.php&quot; &gt;\n    &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;export_xlsx&quot; /&gt;\n    &lt;input type=&quot;hidden&quot; name=&quot;post_form_data&quot; value=&quot;&quot; /&gt;\n&lt;/form&gt;\n\ninput with &apos;action&apos; name is for calling function in my php code,\ninput with &apos;post_form_data&apos; name for sending long data of a table which were not possible to send with GET. this data was encoded to json, and put json in input:\nvar list = new Array();\n    $(&apos;#table_name tr&apos;).each(function() {\n        var row = new Array();\n        $(this).find(&apos;td&apos;).each(function() {\n            row.push($(this).text());\n        });\n        list.push(row);\n    });\nlist    = JSON.stringify(list);\n\n$(&quot;input[name=post_form_data]&quot;).val(list);\n\nnow, the form is ready with my desire values in inputs, just need to trigger the submit.\ndocument.getElementById(&apos;post_form&apos;).submit();\n\nand done!\nwhile my result is a file (xlsx file for me) the page wouldn&apos;t be redirected and instantly the file starts to download in last page, so no need to  useiframe or window.open etc.\nif you are trying to do something like this, this should be an easy trick .\n    ","url":"/questions/[slug]#solution25","@type":"Answer","upvoteCount":0},{"text":"I struggled with this issue for a long time. Finally an elegant external library suggested here helped me out.\n    ","url":"/questions/[slug]#solution26","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/9fb80f4eb9e2d3c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9fb80f4eb9e2d3c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-18d80dcb3110b1ad.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/532-fec3344a80918110.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/817-363561828babdd16.js" defer=""></script><script src="/_next/static/chunks/81-89fd2eaadd8354ed.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-16d8c84aea765d4e.js" defer=""></script><script src="/_next/static/D-Vv5KfwuaE883xCdWfex/_buildManifest.js" defer=""></script><script src="/_next/static/D-Vv5KfwuaE883xCdWfex/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.dlbxiY code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-344134f6-0"]{content:"dlbxiY,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo.svg" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/download-a-file-by-jquery.ajax-1657388220611#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-344134f6-0 dlbxiY flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/download-a-file-by-jquery.ajax-1657388220611">Download a file by jQuery.Ajax</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/download">download</a></div></div><div class="question-content mt-5">
                
<p>I have a Struts2 action in the server side for file downloading.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;action name=<span class="hljs-string">"download"</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">"com.xxx.DownAction"</span>&gt;
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"success"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"stream"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"contentType"</span>&gt;</span>text/plain<span class="hljs-tag">&lt;/<span class="hljs-name">param</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"inputName"</span>&gt;</span>imageStream<span class="hljs-tag">&lt;/<span class="hljs-name">param</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"contentDisposition"</span>&gt;</span>attachment;filename={fileName}<span class="hljs-tag">&lt;/<span class="hljs-name">param</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"bufferSize"</span>&gt;</span>1024<span class="hljs-tag">&lt;/<span class="hljs-name">param</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span></span>
&lt;/action&gt;
</code></pre>

<p>However when I call the action using the jQuery:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">$.<span class="hljs-title function_">post</span>(
  <span class="hljs-string">"/download.action"</span>,{
    <span class="hljs-attr">para1</span>:value1,
    <span class="hljs-attr">para2</span>:value2
    ....
  },<span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>){
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(data);
   }
);
</code></pre>

<p>in Firebug I see the data is retrieved with the <strong>Binary stream</strong>. I wonder how to open the <strong>file downloading window</strong> with which the user can save the file locally?</p>
    </div></div></div><div class="sc-344134f6-2 EUowZ"><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>2019 modern browsers update</strong></p>

<p>This is the approach I'd now recommend with a few caveats:</p>

<ul>
<li>A relatively modern browser is required</li>
<li>If the file is expected to be <strong>very large</strong> you should likely do something similar to the original approach (iframe and cookie) because some of the below operations could likely consume system memory at least as large as the file being downloaded and/or other interesting CPU side effects.</li>
</ul>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="false" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://jsonplaceholder.typicode.com/todos/1'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">resp</span> =&gt;</span> resp.<span class="hljs-title function_">blob</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">blob</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> url = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
    <span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
    a.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
    a.<span class="hljs-property">href</span> = url;
    <span class="hljs-comment">// the filename you want</span>
    a.<span class="hljs-property">download</span> = <span class="hljs-string">'todo-1.json'</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a);
    a.<span class="hljs-title function_">click</span>();
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(url);
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'your file has downloaded!'</span>); <span class="hljs-comment">// or you know, something with better UX...</span>
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">'oh no!'</span>));</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif1" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>

<p><strong>2012 Original jQuery/iframe/Cookie based approach</strong></p>

<p><a href="https://stackoverflow.com/a/7660817/107768">Bluish</a> is completely right about this, you can't do it through Ajax because JavaScript cannot save files directly to a user's computer (out of security concerns). Unfortunately pointing the <em>main window's</em> URL at your file download means you have little control over what the user experience is when a file download occurs.</p>

<p>I created <a href="http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx" rel="noreferrer">jQuery File Download</a> which allows for an "Ajax like" experience with file downloads complete with OnSuccess and OnFailure callbacks to provide for a better user experience. Take a look at my <a href="http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx" rel="noreferrer">blog post</a> on the common problem that the plugin solves and some ways to use it and also a <a href="http://jqueryfiledownload.apphb.com/" rel="noreferrer">demo of jQuery File Download in action</a>. Here is the <a href="http://github.com/johnculviner/jquery.fileDownload/blob/master/src/Scripts/jquery.fileDownload.js" rel="noreferrer">source</a></p>

<p>Here is a simple use case demo using the plugin <a href="http://github.com/johnculviner/jquery.fileDownload/blob/master/src/Scripts/jquery.fileDownload.js" rel="noreferrer">source</a> with promises. The <a href="http://jqueryfiledownload.apphb.com/" rel="noreferrer">demo page</a> includes many other, 'better UX' examples as well.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">$.<span class="hljs-title function_">fileDownload</span>(<span class="hljs-string">'some/file.pdf'</span>)
    .<span class="hljs-title function_">done</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) { <span class="hljs-title function_">alert</span>(<span class="hljs-string">'File download a success!'</span>); })
    .<span class="hljs-title function_">fail</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) { <span class="hljs-title function_">alert</span>(<span class="hljs-string">'File download failed!'</span>); });
</code></pre>

<p>Depending on what browsers you need to support you may be able to use <a href="https://github.com/eligrey/FileSaver.js/" rel="noreferrer">https://github.com/eligrey/FileSaver.js/</a> which allows more explicit control than the IFRAME method jQuery File Download uses.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><em>Noone posted this <a href="https://stackoverflow.com/questions/4545311/download-a-file-by-jquery-ajax#comment4981707_4545311">@Pekka's solution</a>... so I'll post it. It can help someone.</em></p>

<p>You don't need to do this through Ajax. Just use</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>=<span class="hljs-string">"download.action?para1=value1...."</span>
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>You can with HTML5</strong></p>

<p>NB: The file data returned MUST be base64 encoded because you cannot JSON encode binary data</p>

<p>In my <code>AJAX</code> response I have a data structure that looks like this:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">{
    <span class="hljs-attr">result</span>: <span class="hljs-string">'OK'</span>,
    <span class="hljs-attr">download</span>: {
        <span class="hljs-attr">mimetype</span>: <span class="hljs-title function_">string</span>(mimetype <span class="hljs-keyword">in</span> the form <span class="hljs-string">'major/minor'</span>),
        <span class="hljs-attr">filename</span>: <span class="hljs-title function_">string</span>(the name <span class="hljs-keyword">of</span> the file to download),
        <span class="hljs-attr">data</span>: <span class="hljs-title function_">base64</span>(the binary data <span class="hljs-keyword">as</span> base64 to download)
    }
}
</code></pre>

<p>That means that I can do the following to save a file via AJAX</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">Blob</span> &amp;&amp; (<span class="hljs-string">'download'</span> <span class="hljs-keyword">in</span> a) &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">atob</span>) {
    <span class="hljs-comment">// Do it the HTML5 compliant way</span>
    <span class="hljs-keyword">var</span> blob = <span class="hljs-title function_">base64ToBlob</span>(result.<span class="hljs-property">download</span>.<span class="hljs-property">data</span>, result.<span class="hljs-property">download</span>.<span class="hljs-property">mimetype</span>);
    <span class="hljs-keyword">var</span> url = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
    a.<span class="hljs-property">href</span> = url;
    a.<span class="hljs-property">download</span> = result.<span class="hljs-property">download</span>.<span class="hljs-property">filename</span>;
    a.<span class="hljs-title function_">click</span>();
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(url);
}
</code></pre>

<p>The function base64ToBlob was taken from <a href="https://stackoverflow.com/a/16245768">here</a> and must be used in compliance with this function </p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">base64ToBlob</span>(<span class="hljs-params">base64, mimetype, slicesize</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">atob</span> || !<span class="hljs-variable language_">window</span>.<span class="hljs-property">Uint8Array</span>) {
        <span class="hljs-comment">// The current browser doesn't have the atob function. Cannot continue</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    mimetype = mimetype || <span class="hljs-string">''</span>;
    slicesize = slicesize || <span class="hljs-number">512</span>;
    <span class="hljs-keyword">var</span> bytechars = <span class="hljs-title function_">atob</span>(base64);
    <span class="hljs-keyword">var</span> bytearrays = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> offset = <span class="hljs-number">0</span>; offset &lt; bytechars.<span class="hljs-property">length</span>; offset += slicesize) {
        <span class="hljs-keyword">var</span> slice = bytechars.<span class="hljs-title function_">slice</span>(offset, offset + slicesize);
        <span class="hljs-keyword">var</span> bytenums = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(slice.<span class="hljs-property">length</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; slice.<span class="hljs-property">length</span>; i++) {
            bytenums[i] = slice.<span class="hljs-title function_">charCodeAt</span>(i);
        }
        <span class="hljs-keyword">var</span> bytearray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(bytenums);
        bytearrays[bytearrays.<span class="hljs-property">length</span>] = bytearray;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>(bytearrays, {<span class="hljs-attr">type</span>: mimetype});
};
</code></pre>

<p>This is good if your server is dumping filedata to be saved. However, I've not quite worked out how one would implement a HTML4 fallback</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The simple way to make the browser downloads a file is to make the request like that:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"> <span class="hljs-keyword">function</span> <span class="hljs-title function_">downloadFile</span>(<span class="hljs-params">urlToSend</span>) {
     <span class="hljs-keyword">var</span> req = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
     req.<span class="hljs-title function_">open</span>(<span class="hljs-string">"GET"</span>, urlToSend, <span class="hljs-literal">true</span>);
     req.<span class="hljs-property">responseType</span> = <span class="hljs-string">"blob"</span>;
     req.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {
         <span class="hljs-keyword">var</span> blob = req.<span class="hljs-property">response</span>;
         <span class="hljs-keyword">var</span> fileName = req.<span class="hljs-title function_">getResponseHeader</span>(<span class="hljs-string">"fileName"</span>) <span class="hljs-comment">//if you have the fileName header available</span>
         <span class="hljs-keyword">var</span> link=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
         link.<span class="hljs-property">href</span>=<span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
         link.<span class="hljs-property">download</span>=fileName;
         link.<span class="hljs-title function_">click</span>();
     };

     req.<span class="hljs-title function_">send</span>();
 }
</code></pre>

<p>This opens the browser download pop up.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>1. Framework agnostic: Servlet downloading file as attachment</strong></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;!-- <span class="hljs-keyword">with</span> <span class="hljs-variable constant_">JS</span> --&gt;
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:window.location='downloadServlet?param1=value1'"</span>&gt;</span>
    download
<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>

&lt;!-- without <span class="hljs-variable constant_">JS</span> --&gt;
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"downloadServlet?param1=value1"</span> &gt;</span>download<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
</code></pre>

<p><strong>2. Struts2 Framework: Action downloading file as attachment</strong></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;!-- <span class="hljs-keyword">with</span> <span class="hljs-variable constant_">JS</span> --&gt;
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:window.location='downloadAction.action?param1=value1'"</span>&gt;</span>
    download
<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>

&lt;!-- without <span class="hljs-variable constant_">JS</span> --&gt;
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"downloadAction.action?param1=value1"</span> &gt;</span>download<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
</code></pre>

<p>It would be better to use <code>&lt;s:a&gt;</code> tag pointing with <em>OGNL</em> to an <em>URL</em> created with <code>&lt;s:url&gt;</code> tag:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;!-- without <span class="hljs-variable constant_">JS</span>, <span class="hljs-keyword">with</span> <span class="hljs-title class_">Struts</span> <span class="hljs-attr">tags</span>: <span class="hljs-variable constant_">THE</span> <span class="hljs-variable constant_">RIGHT</span> <span class="hljs-variable constant_">WAY</span> --&gt;    
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">s:url</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"downloadAction.action"</span> <span class="hljs-attr">var</span>=<span class="hljs-string">"url"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">s:param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"param1"</span>&gt;</span>value1<span class="hljs-tag">&lt;/<span class="hljs-name">s:param</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">s:ulr</span>&gt;</span></span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">s:a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"%{url}"</span> &gt;</span>download<span class="hljs-tag">&lt;/<span class="hljs-name">s:a</span>&gt;</span></span>
</code></pre>

<p>In the above cases, you <strong>need</strong> to write the <em>Content-Disposition</em> header to the <em>response</em>, specifying that the file needs to be downloaded (<code>attachment</code>) and not opened by the browser (<code>inline</code>). You <strong>need</strong> to specify the <em>Content Type</em> too, and you may want to add the file name and length (to help the browser drawing a realistic progressbar). </p>

<p>For example, when downloading a ZIP:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">response.<span class="hljs-title function_">setContentType</span>(<span class="hljs-string">"application/zip"</span>);
response.<span class="hljs-title function_">addHeader</span>(<span class="hljs-string">"Content-Disposition"</span>, 
                   <span class="hljs-string">"attachment; filename=\"name of my file.zip\""</span>);
response.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Content-Length"</span>, myFile.<span class="hljs-title function_">length</span>()); <span class="hljs-comment">// or myByte[].length...</span>
</code></pre>

<p>With Struts2 (unless you are using the Action as a Servlet, an hack <a href="https://stackoverflow.com/a/16654313/1654265">for direct streaming</a>, for example), you don't need to directly write anything to the response; simply using the <a href="http://struts.apache.org/release/2.3.x/struts2-core/apidocs/org/apache/struts2/dispatcher/StreamResult.html" rel="noreferrer">Stream result type</a> and configuring it in struts.xml will work: <a href="http://www.mkyong.com/struts2/struts-2-download-file-example/" rel="noreferrer">EXAMPLE</a></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;result name=<span class="hljs-string">"success"</span> type=<span class="hljs-string">"stream"</span>&gt;
   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"contentType"</span>&gt;</span>application/zip<span class="hljs-tag">&lt;/<span class="hljs-name">param</span>&gt;</span></span>
   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"contentDisposition"</span>&gt;</span>attachment;filename="${fileName}"<span class="hljs-tag">&lt;/<span class="hljs-name">param</span>&gt;</span></span>
   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"contentLength"</span>&gt;</span>${fileLength}<span class="hljs-tag">&lt;/<span class="hljs-name">param</span>&gt;</span></span>
&lt;/result&gt;
</code></pre>

<p><strong>3. Framework agnostic (/ Struts2 framework): Servlet(/Action) opening file inside the browser</strong></p>

<p>If you want to open the file inside the browser, instead of downloading it, the <em>Content-disposition</em> must be set to <em>inline</em>, but the target can't be the current window location; you must target a new window created by javascript, an <code>&lt;iframe&gt;</code> in the page, or a new window created on-the-fly with the "discussed" target="_blank":</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;!-- <span class="hljs-title class_">From</span> a parent page into an <span class="hljs-title class_">IFrame</span> without javascript --&gt;   
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"downloadServlet?param1=value1"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"iFrameName"</span>&gt;</span>
    download
<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>

&lt;!-- <span class="hljs-title class_">In</span> a <span class="hljs-keyword">new</span> <span class="hljs-variable language_">window</span> without javascript --&gt; 
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"downloadServlet?param1=value1"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span>&gt;</span>
    download
<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>

&lt;!-- <span class="hljs-title class_">In</span> a <span class="hljs-keyword">new</span> <span class="hljs-variable language_">window</span> <span class="hljs-keyword">with</span> javascript --&gt;    
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:window.open('downloadServlet?param1=value1');"</span> &gt;</span>
    download
<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I have created little function as workaround solution (inspired by @JohnCulviner plugin):</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">// creates iframe and form in it with hidden field,</span>
<span class="hljs-comment">// then submit form with provided data</span>
<span class="hljs-comment">// url - form url</span>
<span class="hljs-comment">// data - data to form field</span>
<span class="hljs-comment">// input_name - form hidden input name</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ajax_download</span>(<span class="hljs-params">url, data, input_name</span>) {
    <span class="hljs-keyword">var</span> $iframe,
        iframe_doc,
        iframe_html;

    <span class="hljs-keyword">if</span> (($iframe = $(<span class="hljs-string">'#download_iframe'</span>)).<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
        $iframe = $(<span class="hljs-string">"&lt;iframe id='download_iframe'"</span> +
                    <span class="hljs-string">" style='display: none' src='about:blank'&gt;&lt;/iframe&gt;"</span>
                   ).<span class="hljs-title function_">appendTo</span>(<span class="hljs-string">"body"</span>);
    }

    iframe_doc = $iframe[<span class="hljs-number">0</span>].<span class="hljs-property">contentWindow</span> || $iframe[<span class="hljs-number">0</span>].<span class="hljs-property">contentDocument</span>;
    <span class="hljs-keyword">if</span> (iframe_doc.<span class="hljs-property">document</span>) {
        iframe_doc = iframe_doc.<span class="hljs-property">document</span>;
    }

    iframe_html = <span class="hljs-string">"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;form method='POST' action='"</span> +
                  url +<span class="hljs-string">"'&gt;"</span> +
                  <span class="hljs-string">"&lt;input type=hidden name='"</span> + input_name + <span class="hljs-string">"' value='"</span> +
                  <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data) +<span class="hljs-string">"'/&gt;&lt;/form&gt;"</span> +
                  <span class="hljs-string">"&lt;/body&gt;&lt;/html&gt;"</span>;

    iframe_doc.<span class="hljs-title function_">open</span>();
    iframe_doc.<span class="hljs-title function_">write</span>(iframe_html);
    $(iframe_doc).<span class="hljs-title function_">find</span>(<span class="hljs-string">'form'</span>).<span class="hljs-title function_">submit</span>();
}
</code></pre>

<p>Demo with click event:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">$(<span class="hljs-string">'#someid'</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-title function_">ajax_download</span>(<span class="hljs-string">'/download.action'</span>, {<span class="hljs-string">'para1'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'para2'</span>: <span class="hljs-number">2</span>}, <span class="hljs-string">'dataname'</span>);
});
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I faced the same issue and successfully solved it. My use-case is this.</p>

<p>"<i>Post JSON data to the server and receive an excel file.
That excel file is created by the server and returned as a response to the client. Download that response as a file with custom name in browser</i>"</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">$(<span class="hljs-string">"#my-button"</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){

<span class="hljs-comment">// Data to post</span>
data = {
    <span class="hljs-attr">ids</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
};

<span class="hljs-comment">// Use XMLHttpRequest instead of Jquery $ajax</span>
xhttp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
xhttp.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">var</span> a;
    <span class="hljs-keyword">if</span> (xhttp.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span> &amp;&amp; xhttp.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {
        <span class="hljs-comment">// Trick for making downloadable link</span>
        a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
        a.<span class="hljs-property">href</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(xhttp.<span class="hljs-property">response</span>);
        <span class="hljs-comment">// Give filename you wish to download</span>
        a.<span class="hljs-property">download</span> = <span class="hljs-string">"test-file.xls"</span>;
        a.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a);
        a.<span class="hljs-title function_">click</span>();
    }
};
<span class="hljs-comment">// Post data to URL which handles post request</span>
xhttp.<span class="hljs-title function_">open</span>(<span class="hljs-string">"POST"</span>, excelDownloadUrl);
xhttp.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>);
<span class="hljs-comment">// You should set responseType as blob for binary responses</span>
xhttp.<span class="hljs-property">responseType</span> = <span class="hljs-string">'blob'</span>;
xhttp.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
});
</code></pre>

<p>The above snippet is just doing following</p>

<ul>
<li>Posting an array as JSON to the server using XMLHttpRequest.</li>
<li>After fetching content as a blob(binary), we are creating a downloadable URL and attaching it to invisible "a" link then clicking it. I did a POST request here. Instead, you can go for a simple GET too. We cannot download the file through Ajax, must use XMLHttpRequest.</li>
</ul>

<p>Here we need to carefully set few things on the server side. I set few headers in Python Django HttpResponse. You need to set them accordingly if you use other programming languages.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"># <span class="hljs-title class_">In</span> python django code
response = <span class="hljs-title class_">HttpResponse</span>(file_content, content_type=<span class="hljs-string">"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"</span>)
</code></pre>

<p>Since I download xls(excel) here, I adjusted contentType to above one. You need to set it according to your file type. You can use this technique to download any kind of files.</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Ok, based on ndpu's code heres an improved (I think) version of ajax_download;-</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ajax_download</span>(<span class="hljs-params">url, data</span>) {
    <span class="hljs-keyword">var</span> $iframe,
        iframe_doc,
        iframe_html;

    <span class="hljs-keyword">if</span> (($iframe = $(<span class="hljs-string">'#download_iframe'</span>)).<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
        $iframe = $(<span class="hljs-string">"&lt;iframe id='download_iframe'"</span> +
                    <span class="hljs-string">" style='display: none' src='about:blank'&gt;&lt;/iframe&gt;"</span>
                   ).<span class="hljs-title function_">appendTo</span>(<span class="hljs-string">"body"</span>);
    }

    iframe_doc = $iframe[<span class="hljs-number">0</span>].<span class="hljs-property">contentWindow</span> || $iframe[<span class="hljs-number">0</span>].<span class="hljs-property">contentDocument</span>;
    <span class="hljs-keyword">if</span> (iframe_doc.<span class="hljs-property">document</span>) {
        iframe_doc = iframe_doc.<span class="hljs-property">document</span>;
    }

    iframe_html = <span class="hljs-string">"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;form method='POST' action='"</span> +
                  url +<span class="hljs-string">"'&gt;"</span> 

    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(data).<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>){
        iframe_html += <span class="hljs-string">"&lt;input type='hidden' name='"</span>+key+<span class="hljs-string">"' value='"</span>+data[key]+<span class="hljs-string">"'&gt;"</span>;

    });

        iframe_html +=<span class="hljs-string">"&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;"</span>;

    iframe_doc.<span class="hljs-title function_">open</span>();
    iframe_doc.<span class="hljs-title function_">write</span>(iframe_html);
    $(iframe_doc).<span class="hljs-title function_">find</span>(<span class="hljs-string">'form'</span>).<span class="hljs-title function_">submit</span>();
}
</code></pre>

<p>Use this like this;-</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">$(<span class="hljs-string">'#someid'</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-title function_">ajax_download</span>(<span class="hljs-string">'/download.action'</span>, {<span class="hljs-string">'para1'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'para2'</span>: <span class="hljs-number">2</span>});
});
</code></pre>

<p>The params are sent as proper post params as if coming from an input rather than as a json encoded string as per the previous example.</p>

<p>CAVEAT: Be wary about the potential for variable injection on those forms. There might be a safer way to encode those variables. Alternatively contemplate escaping them.</p>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is what I did, pure javascript and html. Did not test it but this should work in all browsers.</p>

<blockquote>
  <p>Javascript Function</p>
</blockquote>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> iframe = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'iframe'</span>);
iframe.<span class="hljs-property">id</span> = <span class="hljs-string">"IFRAMEID"</span>;
iframe.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(iframe);
iframe.<span class="hljs-property">src</span> = <span class="hljs-string">'SERVERURL'</span>+<span class="hljs-string">'?'</span> + $.<span class="hljs-title function_">param</span>($scope.<span class="hljs-property">filtro</span>);
iframe.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"load"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"FILE LOAD DONE.. Download should start now"</span>);
});
</code></pre>

<blockquote>
  <p>Using just components that is supported in all browsers no additional
  libraries.</p>
</blockquote>

<p><img src="https://i.stack.imgur.com/JghC5.png" alt="enter image description here">
<img src="https://i.stack.imgur.com/wNPAx.png" alt="enter image description here"></p>

<blockquote>
  <p>Here is my server side JAVA Spring controller code.</p>
</blockquote>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">@<span class="hljs-title class_">RequestMapping</span>(value = <span class="hljs-string">"/rootto/my/xlsx"</span>, method = <span class="hljs-title class_">RequestMethod</span>.<span class="hljs-property">GET</span>)
public <span class="hljs-keyword">void</span> <span class="hljs-title function_">downloadExcelFile</span>(@<span class="hljs-title class_">RequestParam</span>(value = <span class="hljs-string">"param1"</span>, required = <span class="hljs-literal">false</span>) <span class="hljs-title class_">String</span> param1,
    <span class="hljs-title class_">HttpServletRequest</span> request, <span class="hljs-title class_">HttpServletResponse</span> response)
            throws <span class="hljs-title class_">ParseException</span> {

    <span class="hljs-title class_">Workbook</span> wb = service.<span class="hljs-title function_">getWorkbook</span>(param1);
    <span class="hljs-keyword">if</span> (wb != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-title class_">String</span> fileName = <span class="hljs-string">"myfile_"</span> + sdf.<span class="hljs-title function_">format</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
            response.<span class="hljs-title function_">setContentType</span>(<span class="hljs-string">"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"</span>);
            response.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Content-disposition"</span>, <span class="hljs-string">"attachment; filename=\""</span> + fileName + <span class="hljs-string">".xlsx\""</span>);
            wb.<span class="hljs-title function_">write</span>(response.<span class="hljs-title function_">getOutputStream</span>());
            response.<span class="hljs-title function_">getOutputStream</span>().<span class="hljs-title function_">close</span>();
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">IOException</span> e) {
            e.<span class="hljs-title function_">printStackTrace</span>();
        }
    }
    }
</code></pre>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>My approach is completly based on jQuery. The problem for me was that it has to be a POST-HTTP call. And I wanted it to be done by jQuery alone.</p>
<p>The solution:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">$.<span class="hljs-title function_">ajax</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"POST"</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">"/some/webpage"</span>,
    <span class="hljs-attr">headers</span>: {<span class="hljs-string">'X-CSRF-TOKEN'</span>: csrfToken},
    <span class="hljs-attr">data</span>: additionalDataToSend,
    <span class="hljs-attr">dataType</span>: <span class="hljs-string">"text"</span>,
    <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) {
        <span class="hljs-keyword">let</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([result], { <span class="hljs-attr">type</span>: <span class="hljs-string">"application/octetstream"</span> }); 

        <span class="hljs-keyword">let</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
        a.<span class="hljs-property">href</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
        a.<span class="hljs-property">download</span> = <span class="hljs-string">"test.xml"</span>;;
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a);
        a.<span class="hljs-title function_">click</span>();
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(a);
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(a.<span class="hljs-property">href</span>);
                        
        ...
    },
    <span class="hljs-attr">error</span>: errorDialog
});
</code></pre>
<p>Explanation:</p>
<p>What I and many others do is to create a link on the webpage, indicating that the target should be downloaded and putting the result of the http-request as the target. After that I append the link to the document than simply <em>clicking</em> the link and removing the link afterwards. You don't need an iframe anymore.</p>
<p>The magic lies in the lines</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([result], { <span class="hljs-attr">type</span>: <span class="hljs-string">"application/octetstream"</span> }); 
a.<span class="hljs-property">href</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
</code></pre>
<p>The interesting point is that this solution is only working with a "<em>blob</em>". As you can see in other answers, some are simply using a blob but not explaining why and how to create it.
As you can read e.g. in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL" rel="noreferrer">Mozilla developer documentation</a> you need a file, media ressource or blob for the function "<em>createObjectURL()</em>" to work. The problem is that your http-response might not be any of those.
Therefore the first thing you must do is to convert your response to a blob. This is what the first line does. Then you can use the "<em>createObjectURL</em>" with your newly created blob.
If you than click the link your browser will open a file-save dialog and you can save your data. Obviously it s possible that you cannot define a fixed filename for your file to download. Then you must make your response more complex like in the answer from Luke.</p>
<p>And don't forget to free up the memory especially when you are working with large files. For more examples and information you can look at <a href="https://javascript.info/blob" rel="noreferrer">the details of the JS blob object</a></p>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>How to DOWNLOAD a file after receiving it by AJAX</strong></p>

<p>Its convenient when the file is created for a long time and you need to show PRELOADER</p>

<p>Example when submitting a web form:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;script&gt;
$(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
    $(<span class="hljs-string">'form'</span>).<span class="hljs-title function_">submit</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
        $(<span class="hljs-string">'#loader'</span>).<span class="hljs-title function_">show</span>();
        $.<span class="hljs-title function_">ajax</span>({
            <span class="hljs-attr">url</span>: $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">'action'</span>),
            <span class="hljs-attr">data</span>: $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">serialize</span>(),
            <span class="hljs-attr">dataType</span>: <span class="hljs-string">'binary'</span>,
            <span class="hljs-attr">xhrFields</span>: {
                <span class="hljs-string">'responseType'</span>: <span class="hljs-string">'blob'</span>
            },
            <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">data, status, xhr</span>) {
                $(<span class="hljs-string">'#loader'</span>).<span class="hljs-title function_">hide</span>();
                <span class="hljs-comment">// if(data.type.indexOf('text/html') != -1){//If instead of a file you get an error page</span>
                <span class="hljs-comment">//     var reader = new FileReader();</span>
                <span class="hljs-comment">//     reader.readAsText(data);</span>
                <span class="hljs-comment">//     reader.onload = function() {alert(reader.result);};</span>
                <span class="hljs-comment">//     return;</span>
                <span class="hljs-comment">// }</span>
                <span class="hljs-keyword">var</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>),
                    filename = <span class="hljs-string">'file.xlsx'</span>;
                <span class="hljs-comment">// if(xhr.getResponseHeader('Content-Disposition')){//filename </span>
                <span class="hljs-comment">//     filename = xhr.getResponseHeader('Content-Disposition');</span>
                <span class="hljs-comment">//     filename=filename.match(/filename="(.*?)"/)[1];</span>
                <span class="hljs-comment">//     filename=decodeURIComponent(escape(filename));</span>
                <span class="hljs-comment">// }</span>
                link.<span class="hljs-property">href</span> = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(data);
                link.<span class="hljs-property">download</span> = filename;
                link.<span class="hljs-title function_">click</span>();
            }
        });
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    });
});
&lt;/script&gt;
</code></pre>

<p>Optional functional is commented out to simplify the example.</p>

<p>No need to create temporary files on the server.</p>

<p>On jQuery v2.2.4 OK. There will be an error on the old version:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">Uncaught</span> <span class="hljs-title class_">DOMException</span>: <span class="hljs-title class_">Failed</span> to read the <span class="hljs-string">'responseText'</span> property <span class="hljs-keyword">from</span> <span class="hljs-string">'XMLHttpRequest'</span>: <span class="hljs-title class_">The</span> value is only accessible <span class="hljs-keyword">if</span> the object<span class="hljs-string">'s '</span>responseType<span class="hljs-string">' is '</span><span class="hljs-string">' or '</span>text<span class="hljs-string">' (was '</span>blob<span class="hljs-string">').
</span></code></pre>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">downloadURI</span>(<span class="hljs-params">uri, name</span>) 
{
    <span class="hljs-keyword">var</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"a"</span>);
    link.<span class="hljs-property">download</span> = name;
    link.<span class="hljs-property">href</span> = uri;
    link.<span class="hljs-title function_">click</span>();
}
</code></pre>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I try to download a CSV file and then do something after download has finished. So I need to implement an appropriate <code>callback</code> function.</p>

<p>Using <code>window.location="..."</code> is not a good idea because I cannot operate the program after finishing download.  Something like this, change header so it is not a good idea.</p>

<p><code>fetch</code> is a good alternative however <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" rel="noreferrer">it cannot support IE 11</a>. And <code>window.URL.createObjectURL</code> cannot support IE 11.You can refer <a href="https://stackoverflow.com/questions/24007073/open-links-made-by-createobjecturl-in-ie11">this</a>.</p>

<p>This is my code, it is similar to the code of Shahrukh Alam. But you should take care that <code>window.URL.createObjectURL</code> maybe create memory leaks. You can refer <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL" rel="noreferrer">this</a>. When response has arrived, data will be stored into memory of browser. So before you click <code>a</code> link, the file has been downloaded. It means that you can do anything after download.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">$.<span class="hljs-title function_">ajax</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'your download url'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'GET'</span>,
}).<span class="hljs-title function_">done</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">data, textStatus, request</span>) {
    <span class="hljs-comment">// csv =&gt; Blob</span>
    <span class="hljs-keyword">var</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([data]);

    <span class="hljs-comment">// the file name from server.</span>
    <span class="hljs-keyword">var</span> fileName = request.<span class="hljs-title function_">getResponseHeader</span>(<span class="hljs-string">'fileName'</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span>.<span class="hljs-property">msSaveOrOpenBlob</span>) { <span class="hljs-comment">// for IE</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span>.<span class="hljs-title function_">msSaveOrOpenBlob</span>(blob, fileName);
    } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// for others</span>
    <span class="hljs-keyword">var</span> url = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
    <span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
    a.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
    a.<span class="hljs-property">href</span> = url;
    a.<span class="hljs-property">download</span> = fileName;
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a);
    a.<span class="hljs-title function_">click</span>();
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(url);

    <span class="hljs-comment">//Do something after download </span>
    ...

    }
}).<span class="hljs-title function_">then</span>(after_download)
}
</code></pre>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Adding some more things to  above answer for downloading a file</p>

<p>Below is some java spring code which generates byte Array</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">@<span class="hljs-title class_">RequestMapping</span>(value = <span class="hljs-string">"/downloadReport"</span>, method = { <span class="hljs-title class_">RequestMethod</span>.<span class="hljs-property">POST</span> })
    public <span class="hljs-title class_">ResponseEntity</span>&lt;byte[]&gt; <span class="hljs-title function_">downloadReport</span>(
            @<span class="hljs-title class_">RequestBody</span> final <span class="hljs-title class_">SomeObejct</span> obj, <span class="hljs-title class_">HttpServletResponse</span> response) throws <span class="hljs-title class_">Exception</span> {

        <span class="hljs-title class_">OutputStream</span> out = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();
        <span class="hljs-comment">// write something to output stream</span>
        <span class="hljs-title class_">HttpHeaders</span> respHeaders = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();
        respHeaders.<span class="hljs-title function_">setContentType</span>(<span class="hljs-title class_">MediaType</span>.<span class="hljs-property">APPLICATION_OCTET_STREAM</span>);
        respHeaders.<span class="hljs-title function_">add</span>(<span class="hljs-string">"X-File-Name"</span>, name);
        <span class="hljs-title class_">ByteArrayOutputStream</span> bos = (<span class="hljs-title class_">ByteArrayOutputStream</span>) out;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseEntity</span>&lt;byte[]&gt;(bos.<span class="hljs-title function_">toByteArray</span>(), respHeaders, <span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">CREATED</span>);
    }
</code></pre>

<p>Now in  javascript code using FileSaver.js ,can download a file with below code </p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> json=angular.<span class="hljs-title function_">toJson</span>(<span class="hljs-string">"somejsobject"</span>);
<span class="hljs-keyword">var</span> url=apiEndPoint+<span class="hljs-string">'some url'</span>;
<span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
<span class="hljs-comment">//headers('X-File-Name')</span>
xhr.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">readyState</span> == <span class="hljs-number">4</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> == <span class="hljs-number">201</span>) {
        <span class="hljs-keyword">var</span> res = <span class="hljs-variable language_">this</span>.<span class="hljs-property">response</span>;
        <span class="hljs-keyword">var</span> fileName=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getResponseHeader</span>(<span class="hljs-string">'X-File-Name'</span>);
        <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([res]);
        <span class="hljs-title function_">saveAs</span>(data, fileName); <span class="hljs-comment">//this from FileSaver.js</span>
    }
}    
xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">'POST'</span>, url);
xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">'Authorization'</span>,<span class="hljs-string">'Bearer '</span> + token);
xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/json'</span>);
xhr.<span class="hljs-property">responseType</span> = <span class="hljs-string">'arraybuffer'</span>;
xhr.<span class="hljs-title function_">send</span>(json);
</code></pre>

<p>The above will download file </p>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In Rails, I do it this way: </p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">download_file</span>(<span class="hljs-params">file_id</span>) {
  <span class="hljs-keyword">let</span> url       = <span class="hljs-string">'/files/'</span> + file_id + <span class="hljs-string">'/download_file'</span>;
    $.<span class="hljs-title function_">ajax</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'GET'</span>,
    <span class="hljs-attr">url</span>: url,
    <span class="hljs-attr">processData</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {
       <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span> = url;
    },
    <span class="hljs-attr">error</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">xhr</span>) {
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">' Error:  &gt;&gt;&gt;&gt; '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(xhr));
    }
   });
 }
</code></pre>

<p>The trick is the <em>window.location</em> part. The controller's method looks like:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"># <span class="hljs-variable constant_">GET</span> /files/{:id}/download_file/
def download_file
    <span class="hljs-title function_">send_file</span>(@file.<span class="hljs-property">file</span>,
          :<span class="hljs-function"><span class="hljs-params">disposition</span> =&gt;</span> <span class="hljs-string">'attachment'</span>,
          :<span class="hljs-function"><span class="hljs-params">url_based_filename</span> =&gt;</span> <span class="hljs-literal">false</span>)
end
</code></pre>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Use <code>window.open</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/open" rel="nofollow noreferrer">https://developer.mozilla.org/en-US/docs/Web/API/Window/open</a></p>

<p>For example, you can put this line of code in a click handler:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(<span class="hljs-string">'/file.txt'</span>, <span class="hljs-string">'_blank'</span>);
</code></pre>

<p>It will open a new tab (because of the '_blank' window-name) and that tab will open the URL.</p>

<p>Your server-side code should also have something like this:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">res.<span class="hljs-title function_">set</span>(<span class="hljs-string">'Content-Disposition'</span>, <span class="hljs-string">'attachment; filename=file.txt'</span>);
</code></pre>

<p>And that way, the browser should prompt the user to save the file to disk, instead of just showing them the file. It will also automatically close the tab that it just opened.</p>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The HTML Code :</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;button type=<span class="hljs-string">"button"</span> id=<span class="hljs-string">"GetFile"</span>&gt;<span class="hljs-title class_">Get</span> <span class="hljs-title class_">File</span>!&lt;/button&gt;
</code></pre>
<p>The jQuery Code :</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">$(<span class="hljs-string">'#GetFile'</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
    $.<span class="hljs-title function_">ajax</span>({
        <span class="hljs-attr">url</span>: <span class="hljs-string">'https://s3-us-west-2.amazonaws.com/s.cdpn.io/172905/test.pdf'</span>,
        <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
        <span class="hljs-attr">xhrFields</span>: {
            <span class="hljs-attr">responseType</span>: <span class="hljs-string">'blob'</span>
        },
        <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {
            <span class="hljs-keyword">var</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
            <span class="hljs-keyword">var</span> url = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(data);
            a.<span class="hljs-property">href</span> = url;
            a.<span class="hljs-property">download</span> = <span class="hljs-string">'myfile.pdf'</span>;
            <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">append</span>(a);
            a.<span class="hljs-title function_">click</span>();
            a.<span class="hljs-title function_">remove</span>();
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(url);
        }
    });
});
</code></pre>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Ok so here is the working code when Using MVC and you are getting your file from a controller</p>

<p>lets say you have your byte array declare and populate,  the only thing you need to do is to use the File function (using System.Web.Mvc)</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">byte[] bytes = .... insert your bytes <span class="hljs-keyword">in</span> the array
<span class="hljs-keyword">return</span> <span class="hljs-title class_">File</span>(bytes, <span class="hljs-title class_">System</span>.<span class="hljs-property">Net</span>.<span class="hljs-property">Mime</span>.<span class="hljs-property">MediaTypeNames</span>.<span class="hljs-property">Application</span>.<span class="hljs-property">Octet</span>, <span class="hljs-string">"nameoffile.exe"</span>);
</code></pre>

<p>and then,  in the same controller,  add thoses 2 functions</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">protected override <span class="hljs-keyword">void</span> <span class="hljs-title class_">OnResultExecuting</span>(<span class="hljs-title class_">ResultExecutingContext</span> context)
    {
        <span class="hljs-title class_">CheckAndHandleFileResult</span>(context);

        base.<span class="hljs-title class_">OnResultExecuting</span>(context);
    }

    private <span class="hljs-keyword">const</span> string <span class="hljs-variable constant_">FILE_DOWNLOAD_COOKIE_NAME</span> = <span class="hljs-string">"fileDownload"</span>;

    <span class="hljs-comment">/// &lt;summary&gt;</span>
    <span class="hljs-comment">/// If the current response is a FileResult (an MVC base class for files) then write a</span>
    <span class="hljs-comment">/// cookie to inform jquery.fileDownload that a successful file download has occured</span>
    <span class="hljs-comment">/// &lt;/summary&gt;</span>
    <span class="hljs-comment">/// &lt;param name="context"&gt;&lt;/param&gt;</span>
    private <span class="hljs-keyword">void</span> <span class="hljs-title class_">CheckAndHandleFileResult</span>(<span class="hljs-title class_">ResultExecutingContext</span> context)
    {
        <span class="hljs-keyword">if</span> (context.<span class="hljs-property">Result</span> is <span class="hljs-title class_">FileResult</span>)
            <span class="hljs-comment">//jquery.fileDownload uses this cookie to determine that a file download has completed successfully</span>
            <span class="hljs-title class_">Response</span>.<span class="hljs-title class_">SetCookie</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpCookie</span>(<span class="hljs-variable constant_">FILE_DOWNLOAD_COOKIE_NAME</span>, <span class="hljs-string">"true"</span>) { <span class="hljs-title class_">Path</span> = <span class="hljs-string">"/"</span> });
        <span class="hljs-keyword">else</span>
            <span class="hljs-comment">//ensure that the cookie is removed in case someone did a file download without using jquery.fileDownload</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Request</span>.<span class="hljs-property">Cookies</span>[<span class="hljs-variable constant_">FILE_DOWNLOAD_COOKIE_NAME</span>] != <span class="hljs-literal">null</span>)
                <span class="hljs-title class_">Response</span>.<span class="hljs-property">Cookies</span>[<span class="hljs-variable constant_">FILE_DOWNLOAD_COOKIE_NAME</span>].<span class="hljs-property">Expires</span> = <span class="hljs-title class_">DateTime</span>.<span class="hljs-property">Now</span>.<span class="hljs-title class_">AddYears</span>(-<span class="hljs-number">1</span>);
    }
</code></pre>

<p>and then you will be able to call your controller to download and get the "success" or "failure" callback</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">$.<span class="hljs-title function_">fileDownload</span>(<span class="hljs-title function_">mvcUrl</span>(<span class="hljs-string">'name of the controller'</span>), {
            <span class="hljs-attr">httpMethod</span>: <span class="hljs-string">'POST'</span>,
            <span class="hljs-attr">successCallback</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">url</span>) {
            <span class="hljs-comment">//insert success code</span>

            },
            <span class="hljs-attr">failCallback</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">html, url</span>) {
            <span class="hljs-comment">//insert fail code</span>
            }
        });
</code></pre>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I found a fix that while it's not actually using ajax it does allow you to use a javascript call to request the download and then get a callback when the download actually starts.  I found this helpful if the link runs a server side script that takes a little bit to compose the file before sending it. so you can alert them that it's processing, and then when it does finally send the file remove that processing notification. which is why I wanted to try to load the file via ajax to begin with so that I could have an event happen when the file is requested and another when it actually starts downloading.</p>

<p>the js on the front page</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">expdone</span>(<span class="hljs-params"></span>)
{
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'exportdiv'</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span>=<span class="hljs-string">'none'</span>;
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">expgo</span>(<span class="hljs-params"></span>)
{
   <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'exportdiv'</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span>=<span class="hljs-string">'block'</span>;
   <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'exportif'</span>).<span class="hljs-property">src</span>=<span class="hljs-string">'test2.php?arguments=data'</span>;
}
</code></pre>

<p>the iframe</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;div id=<span class="hljs-string">"exportdiv"</span> style=<span class="hljs-string">"display:none;"</span>&gt;
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"loader.gif"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Generating Report<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"exportif"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">""</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 1px;height: 1px; border:0px;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</span></code></pre>

<p>then the other file:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">expdone</span>(<span class="hljs-params"></span>)
{
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">expdone</span>();
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"exportif"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"&lt;?php echo "</span><span class="hljs-attr">http:</span>//<span class="hljs-attr">10.192.37.211</span>/<span class="hljs-attr">npdtracker</span>/<span class="hljs-attr">exportthismonth.php</span>?<span class="hljs-attr">arguments</span>=<span class="hljs-string">".$_GET["</span><span class="hljs-attr">arguments</span>"]; ?&gt;</span>"&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'exportif'</span>).<span class="hljs-property">onload</span>= expdone;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
</code></pre>

<p>I think there's a way to read get data using js so then no php would be needed. but I don't know it off hand and the server I'm using supports php so this works for me.  thought I'd share it in case it helps anyone.</p>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If the server is writing the file back in the response (including cookies if
you use them to determine whether the file download started), Simply create a form with the values and submit it:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ajaxPostDownload</span>(<span class="hljs-params">url, data</span>) {
    <span class="hljs-keyword">var</span> $form;
    <span class="hljs-keyword">if</span> (($form = $(<span class="hljs-string">'#download_form'</span>)).<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
        $form = $(<span class="hljs-string">"&lt;form id='download_form'"</span> + <span class="hljs-string">" style='display: none; width: 1px; height: 1px; position: absolute; top: -10000px' method='POST' action='"</span> + url + <span class="hljs-string">"'&gt;&lt;/form&gt;"</span>);
        $form.<span class="hljs-title function_">appendTo</span>(<span class="hljs-string">"body"</span>);
    }
    <span class="hljs-comment">//Clear the form fields</span>
    $form.<span class="hljs-title function_">html</span>(<span class="hljs-string">""</span>);
    <span class="hljs-comment">//Create new form fields</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(data).<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) {
        $form.<span class="hljs-title function_">append</span>(<span class="hljs-string">"&lt;input type='hidden' name='"</span> + key + <span class="hljs-string">"' value='"</span> + data[key] + <span class="hljs-string">"'&gt;"</span>);
    });
    <span class="hljs-comment">//Submit the form post</span>
    $form.<span class="hljs-title function_">submit</span>();
}
</code></pre>
<p>Usage:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title function_">ajaxPostDownload</span>(<span class="hljs-string">'/fileController/ExportFile'</span>, {
    <span class="hljs-title class_">DownloadToken</span>: <span class="hljs-string">'newDownloadToken'</span>,
    <span class="hljs-title class_">Name</span>: $txtName.<span class="hljs-title function_">val</span>(),
    <span class="hljs-title class_">Type</span>: $txtType.<span class="hljs-title function_">val</span>()
});
</code></pre>
<p>Controller Method:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">[<span class="hljs-title class_">HttpPost</span>]
public <span class="hljs-title class_">FileResult</span> <span class="hljs-title class_">ExportFile</span>(string <span class="hljs-title class_">DownloadToken</span>, string <span class="hljs-title class_">Name</span>, string <span class="hljs-title class_">Type</span>)
{
    <span class="hljs-comment">//Set DownloadToken Cookie.</span>
    <span class="hljs-title class_">Response</span>.<span class="hljs-title class_">SetCookie</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpCookie</span>(<span class="hljs-string">"downloadToken"</span>, <span class="hljs-title class_">DownloadToken</span>)
    {
        <span class="hljs-title class_">Expires</span> = <span class="hljs-title class_">DateTime</span>.<span class="hljs-property">UtcNow</span>.<span class="hljs-title class_">AddDays</span>(<span class="hljs-number">1</span>),
        <span class="hljs-title class_">Secure</span> = <span class="hljs-literal">false</span>
    });

    using (<span class="hljs-keyword">var</span> output = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MemoryStream</span>())
    {
        <span class="hljs-comment">//get File</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">File</span>(output.<span class="hljs-title class_">ToArray</span>(), <span class="hljs-string">"application/vnd.ms-excel"</span>, <span class="hljs-string">"NewFile.xls"</span>);
    }
}
</code></pre>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 21</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you want to use  jQuery File Download , please note this for IE.
You need to reset the response or it will not download</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">    <span class="hljs-comment">//The IE will only work if you reset response</span>
    <span class="hljs-title function_">getServletResponse</span>().<span class="hljs-title function_">reset</span>();
    <span class="hljs-comment">//The jquery.fileDownload needs a cookie be set</span>
    <span class="hljs-title function_">getServletResponse</span>().<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Set-Cookie"</span>, <span class="hljs-string">"fileDownload=true; path=/"</span>);
    <span class="hljs-comment">//Do the reset of your action create InputStream and return</span>
</code></pre>

<p>Your action can implement <code>ServletResponseAware</code>  to access <code>getServletResponse()</code> </p>
    </div></div></div></div><div id="solution22" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 22</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It is certain that you can not do it through Ajax call.</p>

<p>However, there is a workaround.</p>

<p>Steps :</p>

<p>If you are using form.submit() for downloading the file, what you can do is :</p>

<ol>
<li>Create an ajax call from client to server and store the file stream inside the session.</li>
<li>Upon "success" being returned from server, call your form.submit() to just stream the file stream stored in the session.</li>
</ol>

<p>This is helpful in case when you want to decide whether or not file needs to be downloaded after making form.submit(), eg: there can be a case where on form.submit(), an exception occurs on the server side and instead of crashing, you might need to show a custom message on the client side, in such case this implementation might help.</p>
    </div></div></div></div><div id="solution23" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 23</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>there is another solution to download a web page in ajax. But I am referring to a page that must first be processed and then downloaded.</p>

<p>First you need to separate the page processing from the results download.</p>

<p>1) Only the page calculations are made in the ajax call.</p>

<pre>$.post("CalculusPage.php", { calculusFunction: true, ID: 29, data1: "a", data2: "b" },

       function(data, status) 
       {
            if (status == "success") 
            {
                /* 2) In the answer the page that uses the previous calculations is downloaded. For example, this can be a page that prints the results of a table calculated in the ajax call. */
                window.location.href = DownloadPage.php+"?ID="+29;
            }               
       }
);

// For example: in the CalculusPage.php

    if ( !empty($_POST["calculusFunction"]) ) 
    {
        $ID = $_POST["ID"];

        $query = "INSERT INTO ExamplePage (data1, data2) VALUES ('".$_POST["data1"]."', '".$_POST["data2"]."') WHERE id = ".$ID;
        ...
    }

// For example: in the DownloadPage.php

    $ID = $_GET["ID"];

    $sede = "SELECT * FROM ExamplePage WHERE id = ".$ID;
    ...

    $filename="Export_Data.xls";
    header("Content-Type: application/vnd.ms-excel");
    header("Content-Disposition: inline; filename=$filename");

    ...
</pre>

<p>I hope this solution can be useful for many, as it was for me.</p>
    </div></div></div></div><div id="solution24" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 24</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>That's it works so fine in any browser (I'm using asp.net core)</p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript">            <span class="hljs-keyword">function</span> <span class="hljs-title function_">onDownload</span>(<span class="hljs-params"></span>) {

  <span class="hljs-keyword">const</span> api = <span class="hljs-string">'@Url.Action("myaction", "mycontroller")'</span>; 
  <span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'form1'</span>));

  <span class="hljs-title function_">fetch</span>(api, { <span class="hljs-attr">body</span>: form, <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>})
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">resp</span> =&gt;</span> resp.<span class="hljs-title function_">blob</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">blob</span> =&gt;</span> {
          <span class="hljs-keyword">const</span> url = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
        $(<span class="hljs-string">'#linkdownload'</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">'download'</span>, <span class="hljs-string">'Attachement.zip'</span>);
          $(<span class="hljs-string">'#linkdownload'</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">"href"</span>, url);
          $(<span class="hljs-string">'#linkdownload'</span>)
              .<span class="hljs-title function_">fadeIn</span>(<span class="hljs-number">3000</span>,
                  <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) { });

      })
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">'An error occurred'</span>));



}</code></pre>
<pre class="snippet-code-html lang-html s-code-block"><code class="hljs language-xml"> 
 <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"onDownload()"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary btn-sm"</span>&gt;</span>Click to Process Files<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 
 
 
 <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: none"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-sm btn-secondary"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"linkdownload"</span>&gt;</span>Click to download Attachments<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
 
 
 <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">asp-controller</span>=<span class="hljs-string">"mycontroller"</span> <span class="hljs-attr">asp-action</span>=<span class="hljs-string">"myaction"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"form1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
 
 </code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif2" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">onDownload</span>(<span class="hljs-params"></span>) {
            <span class="hljs-keyword">const</span> api = <span class="hljs-string">'@Url.Action("myaction", "mycontroller")'</span>; 
            <span class="hljs-comment">//form1 is your id form, and to get data content of form</span>
            <span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'form1'</span>));

            <span class="hljs-title function_">fetch</span>(api, { <span class="hljs-attr">body</span>: form, <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>})
                .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">resp</span> =&gt;</span> resp.<span class="hljs-title function_">blob</span>())
                .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">blob</span> =&gt;</span> {
                    <span class="hljs-keyword">const</span> url = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
                    $(<span class="hljs-string">'#linkdownload'</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">'download'</span>, <span class="hljs-string">'Attachments.zip'</span>);
                    $(<span class="hljs-string">'#linkdownload'</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">"href"</span>, url);
                    $(<span class="hljs-string">'#linkdownload'</span>)
                        .<span class="hljs-title function_">fadeIn</span>(<span class="hljs-number">3000</span>,
                            <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {

                            });
                })
                .<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">'An error occurred'</span>));                 

        }
</code></pre>
    </div></div></div></div><div id="solution25" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 25</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I have tried Ajax and HttpRequest ways to get my result download file but I've failed, finally I've solved my problem using these steps:</p>
<p>implemented a simple hidden form in my html code:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;form method=<span class="hljs-string">"post"</span> id=<span class="hljs-string">"post_form"</span> style=<span class="hljs-string">"display:none"</span> action=<span class="hljs-string">"amin.php"</span> &gt;
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"action"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"export_xlsx"</span> /&gt;</span></span>
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"post_form_data"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span> /&gt;</span></span>
&lt;/form&gt;
</code></pre>
<p>input with 'action' name is for calling function in my php code,
input with 'post_form_data' name for sending long data of a table which were not possible to send with GET. this data was encoded to json, and put json in input:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();
    $(<span class="hljs-string">'#table_name tr'</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();
        $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">find</span>(<span class="hljs-string">'td'</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
            row.<span class="hljs-title function_">push</span>($(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">text</span>());
        });
        list.<span class="hljs-title function_">push</span>(row);
    });
list    = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(list);

$(<span class="hljs-string">"input[name=post_form_data]"</span>).<span class="hljs-title function_">val</span>(list);
</code></pre>
<p>now, the form is ready with my desire values in inputs, just need to trigger the submit.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'post_form'</span>).<span class="hljs-title function_">submit</span>();
</code></pre>
<p>and done!
while my result is a file (xlsx file for me) the page wouldn't be redirected and instantly the file starts to download in last page, so no need to  useiframe or window.open etc.</p>
<p>if you are trying to do something like this, this should be an easy trick .</p>
    </div></div></div></div><div id="solution26" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 26</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I struggled with this issue for a long time. Finally an elegant external library suggested <a href="https://github.com/axios/axios/issues/1660#issuecomment-404858057" rel="nofollow noreferrer">here</a> helped me out.</p>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;2019 modern browsers update\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This is the approach I\u0026apos;d now recommend with a few caveats:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;A relatively modern browser is required\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;If the file is expected to be \u0026lt;strong\u0026gt;very large\u0026lt;/strong\u0026gt; you should likely do something similar to the original approach (iframe and cookie) because some of the below operations could likely consume system memory at least as large as the file being downloaded and/or other interesting CPU side effects.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;false\u0026quot; data-console=\u0026quot;false\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fetch\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;https://jsonplaceholder.typicode.com/todos/1\u0026apos;\u0026lt;/span\u0026gt;)\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;then\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;resp\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; resp.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;blob\u0026lt;/span\u0026gt;())\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;then\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;blob\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; url = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createObjectURL\u0026lt;/span\u0026gt;(blob);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; a = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createElement\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;);\n    a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;display\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;none\u0026apos;\u0026lt;/span\u0026gt;;\n    a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt; = url;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// the filename you want\u0026lt;/span\u0026gt;\n    a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;todo-1.json\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;appendChild\u0026lt;/span\u0026gt;(a);\n    a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;click\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;revokeObjectURL\u0026lt;/span\u0026gt;(url);\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;your file has downloaded!\u0026apos;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// or you know, something with better UX...\u0026lt;/span\u0026gt;\n  })\n  .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;() =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;oh no!\u0026apos;\u0026lt;/span\u0026gt;));\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif1\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;2012 Original jQuery/iframe/Cookie based approach\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/7660817/107768\u0026quot;\u0026gt;Bluish\u0026lt;/a\u0026gt; is completely right about this, you can\u0026apos;t do it through Ajax because JavaScript cannot save files directly to a user\u0026apos;s computer (out of security concerns). Unfortunately pointing the \u0026lt;em\u0026gt;main window\u0026apos;s\u0026lt;/em\u0026gt; URL at your file download means you have little control over what the user experience is when a file download occurs.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I created \u0026lt;a href=\u0026quot;http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;jQuery File Download\u0026lt;/a\u0026gt; which allows for an \u0026quot;Ajax like\u0026quot; experience with file downloads complete with OnSuccess and OnFailure callbacks to provide for a better user experience. Take a look at my \u0026lt;a href=\u0026quot;http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;blog post\u0026lt;/a\u0026gt; on the common problem that the plugin solves and some ways to use it and also a \u0026lt;a href=\u0026quot;http://jqueryfiledownload.apphb.com/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;demo of jQuery File Download in action\u0026lt;/a\u0026gt;. Here is the \u0026lt;a href=\u0026quot;http://github.com/johnculviner/jquery.fileDownload/blob/master/src/Scripts/jquery.fileDownload.js\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;source\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here is a simple use case demo using the plugin \u0026lt;a href=\u0026quot;http://github.com/johnculviner/jquery.fileDownload/blob/master/src/Scripts/jquery.fileDownload.js\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;source\u0026lt;/a\u0026gt; with promises. The \u0026lt;a href=\u0026quot;http://jqueryfiledownload.apphb.com/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;demo page\u0026lt;/a\u0026gt; includes many other, \u0026apos;better UX\u0026apos; examples as well.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;$.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fileDownload\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;some/file.pdf\u0026apos;\u0026lt;/span\u0026gt;)\n    .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;done\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;File download a success!\u0026apos;\u0026lt;/span\u0026gt;); })\n    .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fail\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;File download failed!\u0026apos;\u0026lt;/span\u0026gt;); });\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Depending on what browsers you need to support you may be able to use \u0026lt;a href=\u0026quot;https://github.com/eligrey/FileSaver.js/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://github.com/eligrey/FileSaver.js/\u0026lt;/a\u0026gt; which allows more explicit control than the IFRAME method jQuery File Download uses.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Noone posted this \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/4545311/download-a-file-by-jquery-ajax#comment4981707_4545311\u0026quot;\u0026gt;@Pekka\u0026apos;s solution\u0026lt;/a\u0026gt;... so I\u0026apos;ll post it. It can help someone.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You don\u0026apos;t need to do this through Ajax. Just use\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;location\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;download.action?para1=value1....\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;You can with HTML5\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;NB: The file data returned MUST be base64 encoded because you cannot JSON encode binary data\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In my \u0026lt;code\u0026gt;AJAX\u0026lt;/code\u0026gt; response I have a data structure that looks like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;OK\u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt;: {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;mimetype\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;(mimetype \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; the form \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;major/minor\u0026apos;\u0026lt;/span\u0026gt;),\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;filename\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;(the name \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;of\u0026lt;/span\u0026gt; the file to download),\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;base64\u0026lt;/span\u0026gt;(the binary data \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; base64 to download)\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;That means that I can do the following to save a file via AJAX\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; a = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createElement\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Blob\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;download\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; a) \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;atob\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do it the HTML5 compliant way\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; blob = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;base64ToBlob\u0026lt;/span\u0026gt;(result.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;, result.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;mimetype\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; url = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createObjectURL\u0026lt;/span\u0026gt;(blob);\n    a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt; = url;\n    a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt; = result.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;filename\u0026lt;/span\u0026gt;;\n    a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;click\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;revokeObjectURL\u0026lt;/span\u0026gt;(url);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The function base64ToBlob was taken from \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/16245768\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt; and must be used in compliance with this function \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;base64ToBlob\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;base64, mimetype, slicesize\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;atob\u0026lt;/span\u0026gt; || !\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Uint8Array\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// The current browser doesn\u0026apos;t have the atob function. Cannot continue\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n    mimetype = mimetype || \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;;\n    slicesize = slicesize || \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;512\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; bytechars = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;atob\u0026lt;/span\u0026gt;(base64);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; bytearrays = [];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; offset = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; offset \u0026amp;lt; bytechars.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; offset += slicesize) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; slice = bytechars.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;(offset, offset + slicesize);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; bytenums = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;(slice.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; slice.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i++) {\n            bytenums[i] = slice.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;charCodeAt\u0026lt;/span\u0026gt;(i);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; bytearray = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Uint8Array\u0026lt;/span\u0026gt;(bytenums);\n        bytearrays[bytearrays.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;] = bytearray;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Blob\u0026lt;/span\u0026gt;(bytearrays, {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;: mimetype});\n};\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This is good if your server is dumping filedata to be saved. However, I\u0026apos;ve not quite worked out how one would implement a HTML4 fallback\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The simple way to make the browser downloads a file is to make the request like that:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;downloadFile\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;urlToSend\u0026lt;/span\u0026gt;) {\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; req = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;XMLHttpRequest\u0026lt;/span\u0026gt;();\n     req.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;open\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;GET\u0026quot;\u0026lt;/span\u0026gt;, urlToSend, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n     req.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;responseType\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;blob\u0026quot;\u0026lt;/span\u0026gt;;\n     req.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;onload\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;event\u0026lt;/span\u0026gt;) {\n         \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; blob = req.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt;;\n         \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; fileName = req.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getResponseHeader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fileName\u0026quot;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//if you have the fileName header available\u0026lt;/span\u0026gt;\n         \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; link=\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createElement\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;);\n         link.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createObjectURL\u0026lt;/span\u0026gt;(blob);\n         link.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt;=fileName;\n         link.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;click\u0026lt;/span\u0026gt;();\n     };\n\n     req.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;send\u0026lt;/span\u0026gt;();\n }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This opens the browser download pop up.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;1. Framework agnostic: Servlet downloading file as attachment\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;!-- \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;JS\u0026lt;/span\u0026gt; --\u0026amp;gt;\n\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;javascript:window.location=\u0026apos;downloadServlet?param1=value1\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    download\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026amp;lt;!-- without \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;JS\u0026lt;/span\u0026gt; --\u0026amp;gt;\n\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;downloadServlet?param1=value1\u0026quot;\u0026lt;/span\u0026gt; \u0026amp;gt;\u0026lt;/span\u0026gt;download\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;2. Struts2 Framework: Action downloading file as attachment\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;!-- \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;JS\u0026lt;/span\u0026gt; --\u0026amp;gt;\n\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;javascript:window.location=\u0026apos;downloadAction.action?param1=value1\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    download\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026amp;lt;!-- without \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;JS\u0026lt;/span\u0026gt; --\u0026amp;gt;\n\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;downloadAction.action?param1=value1\u0026quot;\u0026lt;/span\u0026gt; \u0026amp;gt;\u0026lt;/span\u0026gt;download\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It would be better to use \u0026lt;code\u0026gt;\u0026amp;lt;s:a\u0026amp;gt;\u0026lt;/code\u0026gt; tag pointing with \u0026lt;em\u0026gt;OGNL\u0026lt;/em\u0026gt; to an \u0026lt;em\u0026gt;URL\u0026lt;/em\u0026gt; created with \u0026lt;code\u0026gt;\u0026amp;lt;s:url\u0026amp;gt;\u0026lt;/code\u0026gt; tag:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;!-- without \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;JS\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Struts\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;tags\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;THE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;RIGHT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;WAY\u0026lt;/span\u0026gt; --\u0026amp;gt;    \n\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;s:url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;action\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;downloadAction.action\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;url\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;s:param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;param1\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;value1\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;s:param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;s:ulr\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;s:a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%{url}\u0026quot;\u0026lt;/span\u0026gt; \u0026amp;gt;\u0026lt;/span\u0026gt;download\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;s:a\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;In the above cases, you \u0026lt;strong\u0026gt;need\u0026lt;/strong\u0026gt; to write the \u0026lt;em\u0026gt;Content-Disposition\u0026lt;/em\u0026gt; header to the \u0026lt;em\u0026gt;response\u0026lt;/em\u0026gt;, specifying that the file needs to be downloaded (\u0026lt;code\u0026gt;attachment\u0026lt;/code\u0026gt;) and not opened by the browser (\u0026lt;code\u0026gt;inline\u0026lt;/code\u0026gt;). You \u0026lt;strong\u0026gt;need\u0026lt;/strong\u0026gt; to specify the \u0026lt;em\u0026gt;Content Type\u0026lt;/em\u0026gt; too, and you may want to add the file name and length (to help the browser drawing a realistic progressbar). \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example, when downloading a ZIP:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;response.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setContentType\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/zip\u0026quot;\u0026lt;/span\u0026gt;);\nresponse.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addHeader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Disposition\u0026quot;\u0026lt;/span\u0026gt;, \n                   \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;attachment; filename=\\\u0026quot;name of my file.zip\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;);\nresponse.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setHeader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Length\u0026quot;\u0026lt;/span\u0026gt;, myFile.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;()); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// or myByte[].length...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;With Struts2 (unless you are using the Action as a Servlet, an hack \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/16654313/1654265\u0026quot;\u0026gt;for direct streaming\u0026lt;/a\u0026gt;, for example), you don\u0026apos;t need to directly write anything to the response; simply using the \u0026lt;a href=\u0026quot;http://struts.apache.org/release/2.3.x/struts2-core/apidocs/org/apache/struts2/dispatcher/StreamResult.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Stream result type\u0026lt;/a\u0026gt; and configuring it in struts.xml will work: \u0026lt;a href=\u0026quot;http://www.mkyong.com/struts2/struts-2-download-file-example/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;EXAMPLE\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;result name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;success\u0026quot;\u0026lt;/span\u0026gt; type=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;stream\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\n   \u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;contentType\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;application/zip\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n   \u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;contentDisposition\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;attachment;filename=\u0026quot;${fileName}\u0026quot;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n   \u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;contentLength\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;${fileLength}\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026amp;lt;/result\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;3. Framework agnostic (/ Struts2 framework): Servlet(/Action) opening file inside the browser\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you want to open the file inside the browser, instead of downloading it, the \u0026lt;em\u0026gt;Content-disposition\u0026lt;/em\u0026gt; must be set to \u0026lt;em\u0026gt;inline\u0026lt;/em\u0026gt;, but the target can\u0026apos;t be the current window location; you must target a new window created by javascript, an \u0026lt;code\u0026gt;\u0026amp;lt;iframe\u0026amp;gt;\u0026lt;/code\u0026gt; in the page, or a new window created on-the-fly with the \u0026quot;discussed\u0026quot; target=\u0026quot;_blank\u0026quot;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;!-- \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;From\u0026lt;/span\u0026gt; a parent page into an \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;IFrame\u0026lt;/span\u0026gt; without javascript --\u0026amp;gt;   \n\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;downloadServlet?param1=value1\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;target\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;iFrameName\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    download\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026amp;lt;!-- \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;In\u0026lt;/span\u0026gt; a \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt; without javascript --\u0026amp;gt; \n\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;downloadServlet?param1=value1\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;target\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;_blank\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    download\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026amp;lt;!-- \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;In\u0026lt;/span\u0026gt; a \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; javascript --\u0026amp;gt;    \n\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;javascript:window.open(\u0026apos;downloadServlet?param1=value1\u0026apos;);\u0026quot;\u0026lt;/span\u0026gt; \u0026amp;gt;\u0026lt;/span\u0026gt;\n    download\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I have created little function as workaround solution (inspired by @JohnCulviner plugin):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// creates iframe and form in it with hidden field,\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// then submit form with provided data\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// url - form url\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// data - data to form field\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// input_name - form hidden input name\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ajax_download\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;url, data, input_name\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; $iframe,\n        iframe_doc,\n        iframe_html;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (($iframe = $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#download_iframe\u0026apos;\u0026lt;/span\u0026gt;)).\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt; === \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) {\n        $iframe = $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;iframe id=\u0026apos;download_iframe\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; +\n                    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; style=\u0026apos;display: none\u0026apos; src=\u0026apos;about:blank\u0026apos;\u0026amp;gt;\u0026amp;lt;/iframe\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n                   ).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;appendTo\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;body\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n\n    iframe_doc = $iframe[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;contentWindow\u0026lt;/span\u0026gt; || $iframe[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;contentDocument\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (iframe_doc.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;) {\n        iframe_doc = iframe_doc.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;;\n    }\n\n    iframe_html = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;html\u0026amp;gt;\u0026amp;lt;head\u0026amp;gt;\u0026amp;lt;/head\u0026amp;gt;\u0026amp;lt;body\u0026amp;gt;\u0026amp;lt;form method=\u0026apos;POST\u0026apos; action=\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; +\n                  url +\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; +\n                  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;input type=hidden name=\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + input_name + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos; value=\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; +\n                  \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(data) +\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;/\u0026amp;gt;\u0026amp;lt;/form\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; +\n                  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/body\u0026amp;gt;\u0026amp;lt;/html\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;;\n\n    iframe_doc.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;open\u0026lt;/span\u0026gt;();\n    iframe_doc.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;write\u0026lt;/span\u0026gt;(iframe_html);\n    $(iframe_doc).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;find\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;form\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;submit\u0026lt;/span\u0026gt;();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Demo with click event:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;$(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#someid\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;on\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;click\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ajax_download\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/download.action\u0026apos;\u0026lt;/span\u0026gt;, {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;para1\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;para2\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;}, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dataname\u0026apos;\u0026lt;/span\u0026gt;);\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I faced the same issue and successfully solved it. My use-case is this.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026quot;\u0026lt;i\u0026gt;Post JSON data to the server and receive an excel file.\nThat excel file is created by the server and returned as a response to the client. Download that response as a file with custom name in browser\u0026lt;/i\u0026gt;\u0026quot;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;$(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#my-button\u0026quot;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;on\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;click\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;){\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Data to post\u0026lt;/span\u0026gt;\ndata = {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;ids\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]\n};\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Use XMLHttpRequest instead of Jquery $ajax\u0026lt;/span\u0026gt;\nxhttp = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;XMLHttpRequest\u0026lt;/span\u0026gt;();\nxhttp.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;onreadystatechange\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; a;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (xhttp.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;readyState\u0026lt;/span\u0026gt; === \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; xhttp.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;status\u0026lt;/span\u0026gt; === \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;200\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Trick for making downloadable link\u0026lt;/span\u0026gt;\n        a = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createElement\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;);\n        a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createObjectURL\u0026lt;/span\u0026gt;(xhttp.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Give filename you wish to download\u0026lt;/span\u0026gt;\n        a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;test-file.xls\u0026quot;\u0026lt;/span\u0026gt;;\n        a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;display\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;none\u0026apos;\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;appendChild\u0026lt;/span\u0026gt;(a);\n        a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;click\u0026lt;/span\u0026gt;();\n    }\n};\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Post data to URL which handles post request\u0026lt;/span\u0026gt;\nxhttp.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;open\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;POST\u0026quot;\u0026lt;/span\u0026gt;, excelDownloadUrl);\nxhttp.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setRequestHeader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/json\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// You should set responseType as blob for binary responses\u0026lt;/span\u0026gt;\nxhttp.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;responseType\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;blob\u0026apos;\u0026lt;/span\u0026gt;;\nxhttp.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;send\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(data));\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The above snippet is just doing following\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Posting an array as JSON to the server using XMLHttpRequest.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;After fetching content as a blob(binary), we are creating a downloadable URL and attaching it to invisible \u0026quot;a\u0026quot; link then clicking it. I did a POST request here. Instead, you can go for a simple GET too. We cannot download the file through Ajax, must use XMLHttpRequest.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;Here we need to carefully set few things on the server side. I set few headers in Python Django HttpResponse. You need to set them accordingly if you use other programming languages.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;# \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;In\u0026lt;/span\u0026gt; python django code\nresponse = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpResponse\u0026lt;/span\u0026gt;(file_content, content_type=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Since I download xls(excel) here, I adjusted contentType to above one. You need to set it according to your file type. You can use this technique to download any kind of files.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Ok, based on ndpu\u0026apos;s code heres an improved (I think) version of ajax_download;-\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ajax_download\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;url, data\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; $iframe,\n        iframe_doc,\n        iframe_html;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (($iframe = $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#download_iframe\u0026apos;\u0026lt;/span\u0026gt;)).\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt; === \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) {\n        $iframe = $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;iframe id=\u0026apos;download_iframe\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; +\n                    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; style=\u0026apos;display: none\u0026apos; src=\u0026apos;about:blank\u0026apos;\u0026amp;gt;\u0026amp;lt;/iframe\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n                   ).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;appendTo\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;body\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n\n    iframe_doc = $iframe[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;contentWindow\u0026lt;/span\u0026gt; || $iframe[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;contentDocument\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (iframe_doc.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;) {\n        iframe_doc = iframe_doc.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;;\n    }\n\n    iframe_html = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;html\u0026amp;gt;\u0026amp;lt;head\u0026amp;gt;\u0026amp;lt;/head\u0026amp;gt;\u0026amp;lt;body\u0026amp;gt;\u0026amp;lt;form method=\u0026apos;POST\u0026apos; action=\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; +\n                  url +\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; \n\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;keys\u0026lt;/span\u0026gt;(data).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;forEach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;){\n        iframe_html += \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;input type=\u0026apos;hidden\u0026apos; name=\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;+key+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos; value=\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;+data[key]+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;;\n\n    });\n\n        iframe_html +=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/form\u0026amp;gt;\u0026amp;lt;/body\u0026amp;gt;\u0026amp;lt;/html\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;;\n\n    iframe_doc.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;open\u0026lt;/span\u0026gt;();\n    iframe_doc.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;write\u0026lt;/span\u0026gt;(iframe_html);\n    $(iframe_doc).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;find\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;form\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;submit\u0026lt;/span\u0026gt;();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Use this like this;-\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;$(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#someid\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;on\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;click\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ajax_download\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/download.action\u0026apos;\u0026lt;/span\u0026gt;, {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;para1\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;para2\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;});\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The params are sent as proper post params as if coming from an input rather than as a json encoded string as per the previous example.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;CAVEAT: Be wary about the potential for variable injection on those forms. There might be a safer way to encode those variables. Alternatively contemplate escaping them.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is what I did, pure javascript and html. Did not test it but this should work in all browsers.\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Javascript Function\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; iframe = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createElement\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;iframe\u0026apos;\u0026lt;/span\u0026gt;);\niframe.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;IFRAMEID\u0026quot;\u0026lt;/span\u0026gt;;\niframe.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;display\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;none\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;appendChild\u0026lt;/span\u0026gt;(iframe);\niframe.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;src\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SERVERURL\u0026apos;\u0026lt;/span\u0026gt;+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;?\u0026apos;\u0026lt;/span\u0026gt; + $.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt;($scope.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;filtro\u0026lt;/span\u0026gt;);\niframe.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addEventListener\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;load\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n     \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;FILE LOAD DONE.. Download should start now\u0026quot;\u0026lt;/span\u0026gt;);\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Using just components that is supported in all browsers no additional\n  libraries.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/JghC5.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\n\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/wNPAx.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Here is my server side JAVA Spring controller code.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;@\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RequestMapping\u0026lt;/span\u0026gt;(value = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/rootto/my/xlsx\u0026quot;\u0026lt;/span\u0026gt;, method = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RequestMethod\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;GET\u0026lt;/span\u0026gt;)\npublic \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;downloadExcelFile\u0026lt;/span\u0026gt;(@\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RequestParam\u0026lt;/span\u0026gt;(value = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;param1\u0026quot;\u0026lt;/span\u0026gt;, required = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; param1,\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpServletRequest\u0026lt;/span\u0026gt; request, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpServletResponse\u0026lt;/span\u0026gt; response)\n            throws \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ParseException\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Workbook\u0026lt;/span\u0026gt; wb = service.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getWorkbook\u0026lt;/span\u0026gt;(param1);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (wb != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; fileName = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;myfile_\u0026quot;\u0026lt;/span\u0026gt; + sdf.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;());\n            response.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setContentType\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\u0026quot;\u0026lt;/span\u0026gt;);\n            response.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setHeader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-disposition\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;attachment; filename=\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; + fileName + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.xlsx\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;);\n            wb.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;write\u0026lt;/span\u0026gt;(response.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOutputStream\u0026lt;/span\u0026gt;());\n            response.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOutputStream\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;close\u0026lt;/span\u0026gt;();\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;IOException\u0026lt;/span\u0026gt; e) {\n            e.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;printStackTrace\u0026lt;/span\u0026gt;();\n        }\n    }\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;My approach is completly based on jQuery. The problem for me was that it has to be a POST-HTTP call. And I wanted it to be done by jQuery alone.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The solution:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;$.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ajax\u0026lt;/span\u0026gt;({\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;POST\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/some/webpage\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;headers\u0026lt;/span\u0026gt;: {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;X-CSRF-TOKEN\u0026apos;\u0026lt;/span\u0026gt;: csrfToken},\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;: additionalDataToSend,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;dataType\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;success\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; blob = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Blob\u0026lt;/span\u0026gt;([result], { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/octetstream\u0026quot;\u0026lt;/span\u0026gt; }); \n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; a = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createElement\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;);\n        a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createObjectURL\u0026lt;/span\u0026gt;(blob);\n        a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;test.xml\u0026quot;\u0026lt;/span\u0026gt;;;\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;appendChild\u0026lt;/span\u0026gt;(a);\n        a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;click\u0026lt;/span\u0026gt;();\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;removeChild\u0026lt;/span\u0026gt;(a);\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;revokeObjectURL\u0026lt;/span\u0026gt;(a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt;);\n                        \n        ...\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;error\u0026lt;/span\u0026gt;: errorDialog\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Explanation:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;What I and many others do is to create a link on the webpage, indicating that the target should be downloaded and putting the result of the http-request as the target. After that I append the link to the document than simply \u0026lt;em\u0026gt;clicking\u0026lt;/em\u0026gt; the link and removing the link afterwards. You don\u0026apos;t need an iframe anymore.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The magic lies in the lines\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; blob = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Blob\u0026lt;/span\u0026gt;([result], { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/octetstream\u0026quot;\u0026lt;/span\u0026gt; }); \na.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createObjectURL\u0026lt;/span\u0026gt;(blob);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The interesting point is that this solution is only working with a \u0026quot;\u0026lt;em\u0026gt;blob\u0026lt;/em\u0026gt;\u0026quot;. As you can see in other answers, some are simply using a blob but not explaining why and how to create it.\nAs you can read e.g. in the \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Mozilla developer documentation\u0026lt;/a\u0026gt; you need a file, media ressource or blob for the function \u0026quot;\u0026lt;em\u0026gt;createObjectURL()\u0026lt;/em\u0026gt;\u0026quot; to work. The problem is that your http-response might not be any of those.\nTherefore the first thing you must do is to convert your response to a blob. This is what the first line does. Then you can use the \u0026quot;\u0026lt;em\u0026gt;createObjectURL\u0026lt;/em\u0026gt;\u0026quot; with your newly created blob.\nIf you than click the link your browser will open a file-save dialog and you can save your data. Obviously it s possible that you cannot define a fixed filename for your file to download. Then you must make your response more complex like in the answer from Luke.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;And don\u0026apos;t forget to free up the memory especially when you are working with large files. For more examples and information you can look at \u0026lt;a href=\u0026quot;https://javascript.info/blob\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;the details of the JS blob object\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;How to DOWNLOAD a file after receiving it by AJAX\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Its convenient when the file is created for a long time and you need to show PRELOADER\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Example when submitting a web form:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;script\u0026amp;gt;\n$(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;form\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;submit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n        $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#loader\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;show\u0026lt;/span\u0026gt;();\n        $.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ajax\u0026lt;/span\u0026gt;({\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt;: $(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;attr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;action\u0026apos;\u0026lt;/span\u0026gt;),\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;: $(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;serialize\u0026lt;/span\u0026gt;(),\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;dataType\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;binary\u0026apos;\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xhrFields\u0026lt;/span\u0026gt;: {\n                \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;responseType\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;blob\u0026apos;\u0026lt;/span\u0026gt;\n            },\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;success\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;data, status, xhr\u0026lt;/span\u0026gt;) {\n                $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#loader\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hide\u0026lt;/span\u0026gt;();\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// if(data.type.indexOf(\u0026apos;text/html\u0026apos;) != -1){//If instead of a file you get an error page\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//     var reader = new FileReader();\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//     reader.readAsText(data);\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//     reader.onload = function() {alert(reader.result);};\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//     return;\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// }\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; link = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createElement\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;),\n                    filename = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file.xlsx\u0026apos;\u0026lt;/span\u0026gt;;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// if(xhr.getResponseHeader(\u0026apos;Content-Disposition\u0026apos;)){//filename \u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//     filename = xhr.getResponseHeader(\u0026apos;Content-Disposition\u0026apos;);\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//     filename=filename.match(/filename=\u0026quot;(.*?)\u0026quot;/)[1];\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//     filename=decodeURIComponent(escape(filename));\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// }\u0026lt;/span\u0026gt;\n                link.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createObjectURL\u0026lt;/span\u0026gt;(data);\n                link.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt; = filename;\n                link.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;click\u0026lt;/span\u0026gt;();\n            }\n        });\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n    });\n});\n\u0026amp;lt;/script\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Optional functional is commented out to simplify the example.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;No need to create temporary files on the server.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;On jQuery v2.2.4 OK. There will be an error on the old version:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Uncaught\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DOMException\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Failed\u0026lt;/span\u0026gt; to read the \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;responseText\u0026apos;\u0026lt;/span\u0026gt; property \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;XMLHttpRequest\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;The\u0026lt;/span\u0026gt; value is only accessible \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; the object\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;s \u0026apos;\u0026lt;/span\u0026gt;responseType\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; is \u0026apos;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; or \u0026apos;\u0026lt;/span\u0026gt;text\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; (was \u0026apos;\u0026lt;/span\u0026gt;blob\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;).\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;downloadURI\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;uri, name\u0026lt;/span\u0026gt;) \n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; link = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createElement\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;);\n    link.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt; = name;\n    link.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt; = uri;\n    link.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;click\u0026lt;/span\u0026gt;();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I try to download a CSV file and then do something after download has finished. So I need to implement an appropriate \u0026lt;code\u0026gt;callback\u0026lt;/code\u0026gt; function.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Using \u0026lt;code\u0026gt;window.location=\u0026quot;...\u0026quot;\u0026lt;/code\u0026gt; is not a good idea because I cannot operate the program after finishing download.  Something like this, change header so it is not a good idea.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;fetch\u0026lt;/code\u0026gt; is a good alternative however \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;it cannot support IE 11\u0026lt;/a\u0026gt;. And \u0026lt;code\u0026gt;window.URL.createObjectURL\u0026lt;/code\u0026gt; cannot support IE 11.You can refer \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/24007073/open-links-made-by-createobjecturl-in-ie11\u0026quot;\u0026gt;this\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This is my code, it is similar to the code of Shahrukh Alam. But you should take care that \u0026lt;code\u0026gt;window.URL.createObjectURL\u0026lt;/code\u0026gt; maybe create memory leaks. You can refer \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;this\u0026lt;/a\u0026gt;. When response has arrived, data will be stored into memory of browser. So before you click \u0026lt;code\u0026gt;a\u0026lt;/code\u0026gt; link, the file has been downloaded. It means that you can do anything after download.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;$.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ajax\u0026lt;/span\u0026gt;({\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;your download url\u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;GET\u0026apos;\u0026lt;/span\u0026gt;,\n}).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;done\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;data, textStatus, request\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// csv =\u0026amp;gt; Blob\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; blob = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Blob\u0026lt;/span\u0026gt;([data]);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// the file name from server.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; fileName = request.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getResponseHeader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;fileName\u0026apos;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;navigator\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;navigator\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;msSaveOrOpenBlob\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// for IE\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;navigator\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;msSaveOrOpenBlob\u0026lt;/span\u0026gt;(blob, fileName);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// for others\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; url = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createObjectURL\u0026lt;/span\u0026gt;(blob);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; a = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createElement\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;);\n    a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;display\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;none\u0026apos;\u0026lt;/span\u0026gt;;\n    a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt; = url;\n    a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt; = fileName;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;appendChild\u0026lt;/span\u0026gt;(a);\n    a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;click\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;revokeObjectURL\u0026lt;/span\u0026gt;(url);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Do something after download \u0026lt;/span\u0026gt;\n    ...\n\n    }\n}).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;then\u0026lt;/span\u0026gt;(after_download)\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Adding some more things to  above answer for downloading a file\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Below is some java spring code which generates byte Array\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;@\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RequestMapping\u0026lt;/span\u0026gt;(value = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/downloadReport\u0026quot;\u0026lt;/span\u0026gt;, method = { \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RequestMethod\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;POST\u0026lt;/span\u0026gt; })\n    public \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ResponseEntity\u0026lt;/span\u0026gt;\u0026amp;lt;byte[]\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;downloadReport\u0026lt;/span\u0026gt;(\n            @\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RequestBody\u0026lt;/span\u0026gt; final \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SomeObejct\u0026lt;/span\u0026gt; obj, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpServletResponse\u0026lt;/span\u0026gt; response) throws \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Exception\u0026lt;/span\u0026gt; {\n\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OutputStream\u0026lt;/span\u0026gt; out = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ByteArrayOutputStream\u0026lt;/span\u0026gt;();\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// write something to output stream\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpHeaders\u0026lt;/span\u0026gt; respHeaders = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpHeaders\u0026lt;/span\u0026gt;();\n        respHeaders.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setContentType\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MediaType\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;APPLICATION_OCTET_STREAM\u0026lt;/span\u0026gt;);\n        respHeaders.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;add\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;X-File-Name\u0026quot;\u0026lt;/span\u0026gt;, name);\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ByteArrayOutputStream\u0026lt;/span\u0026gt; bos = (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ByteArrayOutputStream\u0026lt;/span\u0026gt;) out;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ResponseEntity\u0026lt;/span\u0026gt;\u0026amp;lt;byte[]\u0026amp;gt;(bos.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toByteArray\u0026lt;/span\u0026gt;(), respHeaders, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpStatus\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;CREATED\u0026lt;/span\u0026gt;);\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Now in  javascript code using FileSaver.js ,can download a file with below code \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; json=angular.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toJson\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;somejsobject\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; url=apiEndPoint+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;some url\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; xhr = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;XMLHttpRequest\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//headers(\u0026apos;X-File-Name\u0026apos;)\u0026lt;/span\u0026gt;\nxhr.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;onreadystatechange\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;readyState\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;status\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;201\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; res = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; fileName=\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getResponseHeader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;X-File-Name\u0026apos;\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; data = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Blob\u0026lt;/span\u0026gt;([res]);\n        \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;saveAs\u0026lt;/span\u0026gt;(data, fileName); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//this from FileSaver.js\u0026lt;/span\u0026gt;\n    }\n}    \nxhr.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;open\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;POST\u0026apos;\u0026lt;/span\u0026gt;, url);\nxhr.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setRequestHeader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Authorization\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Bearer \u0026apos;\u0026lt;/span\u0026gt; + token);\nxhr.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setRequestHeader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Content-Type\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;application/json\u0026apos;\u0026lt;/span\u0026gt;);\nxhr.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;responseType\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;arraybuffer\u0026apos;\u0026lt;/span\u0026gt;;\nxhr.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;send\u0026lt;/span\u0026gt;(json);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The above will download file \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In Rails, I do it this way: \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;download_file\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;file_id\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; url       = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/files/\u0026apos;\u0026lt;/span\u0026gt; + file_id + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/download_file\u0026apos;\u0026lt;/span\u0026gt;;\n    $.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ajax\u0026lt;/span\u0026gt;({\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;GET\u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt;: url,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;processData\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;success\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;) {\n       \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;location\u0026lt;/span\u0026gt; = url;\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;error\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;xhr\u0026lt;/span\u0026gt;) {\n     \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; Error:  \u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026apos;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(xhr));\n    }\n   });\n }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The trick is the \u0026lt;em\u0026gt;window.location\u0026lt;/em\u0026gt; part. The controller\u0026apos;s method looks like:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;# \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;GET\u0026lt;/span\u0026gt; /files/{:id}/download_file/\ndef download_file\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;send_file\u0026lt;/span\u0026gt;(@file.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;file\u0026lt;/span\u0026gt;,\n          :\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;disposition\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;attachment\u0026apos;\u0026lt;/span\u0026gt;,\n          :\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;url_based_filename\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;)\nend\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Use \u0026lt;code\u0026gt;window.open\u0026lt;/code\u0026gt; \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/Window/open\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://developer.mozilla.org/en-US/docs/Web/API/Window/open\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example, you can put this line of code in a click handler:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;open\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/file.txt\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;_blank\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It will open a new tab (because of the \u0026apos;_blank\u0026apos; window-name) and that tab will open the URL.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Your server-side code should also have something like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;res.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Content-Disposition\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;attachment; filename=file.txt\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And that way, the browser should prompt the user to save the file to disk, instead of just showing them the file. It will also automatically close the tab that it just opened.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The HTML Code :\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;button type=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;button\u0026quot;\u0026lt;/span\u0026gt; id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;GetFile\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Get\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;!\u0026amp;lt;/button\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The jQuery Code :\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;$(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#GetFile\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;on\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;click\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    $.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ajax\u0026lt;/span\u0026gt;({\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;https://s3-us-west-2.amazonaws.com/s.cdpn.io/172905/test.pdf\u0026apos;\u0026lt;/span\u0026gt;,\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;method\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;GET\u0026apos;\u0026lt;/span\u0026gt;,\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xhrFields\u0026lt;/span\u0026gt;: {\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;responseType\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;blob\u0026apos;\u0026lt;/span\u0026gt;\n        },\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;success\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; a = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createElement\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; url = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createObjectURL\u0026lt;/span\u0026gt;(data);\n            a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt; = url;\n            a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;myfile.pdf\u0026apos;\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;append\u0026lt;/span\u0026gt;(a);\n            a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;click\u0026lt;/span\u0026gt;();\n            a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;remove\u0026lt;/span\u0026gt;();\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;revokeObjectURL\u0026lt;/span\u0026gt;(url);\n        }\n    });\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Ok so here is the working code when Using MVC and you are getting your file from a controller\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;lets say you have your byte array declare and populate,  the only thing you need to do is to use the File function (using System.Web.Mvc)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;byte[] bytes = .... insert your bytes \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; the array\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(bytes, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;System\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Net\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Mime\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;MediaTypeNames\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Application\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Octet\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;nameoffile.exe\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and then,  in the same controller,  add thoses 2 functions\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;protected override \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OnResultExecuting\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ResultExecutingContext\u0026lt;/span\u0026gt; context)\n    {\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;CheckAndHandleFileResult\u0026lt;/span\u0026gt;(context);\n\n        base.\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OnResultExecuting\u0026lt;/span\u0026gt;(context);\n    }\n\n    private \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; string \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;FILE_DOWNLOAD_COOKIE_NAME\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fileDownload\u0026quot;\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/// \u0026amp;lt;summary\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/// If the current response is a FileResult (an MVC base class for files) then write a\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/// cookie to inform jquery.fileDownload that a successful file download has occured\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/// \u0026amp;lt;/summary\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/// \u0026amp;lt;param name=\u0026quot;context\u0026quot;\u0026amp;gt;\u0026amp;lt;/param\u0026amp;gt;\u0026lt;/span\u0026gt;\n    private \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;CheckAndHandleFileResult\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ResultExecutingContext\u0026lt;/span\u0026gt; context)\n    {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (context.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Result\u0026lt;/span\u0026gt; is \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FileResult\u0026lt;/span\u0026gt;)\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//jquery.fileDownload uses this cookie to determine that a file download has completed successfully\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Response\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SetCookie\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpCookie\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;FILE_DOWNLOAD_COOKIE_NAME\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Path\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/\u0026quot;\u0026lt;/span\u0026gt; });\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//ensure that the cookie is removed in case someone did a file download without using jquery.fileDownload\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Request\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Cookies\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;FILE_DOWNLOAD_COOKIE_NAME\u0026lt;/span\u0026gt;] != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;)\n                \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Response\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Cookies\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;FILE_DOWNLOAD_COOKIE_NAME\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Expires\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DateTime\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Now\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AddYears\u0026lt;/span\u0026gt;(-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and then you will be able to call your controller to download and get the \u0026quot;success\u0026quot; or \u0026quot;failure\u0026quot; callback\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;$.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fileDownload\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;mvcUrl\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;name of the controller\u0026apos;\u0026lt;/span\u0026gt;), {\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;httpMethod\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;POST\u0026apos;\u0026lt;/span\u0026gt;,\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;successCallback\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//insert success code\u0026lt;/span\u0026gt;\n\n            },\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;failCallback\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;html, url\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//insert fail code\u0026lt;/span\u0026gt;\n            }\n        });\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I found a fix that while it\u0026apos;s not actually using ajax it does allow you to use a javascript call to request the download and then get a callback when the download actually starts.  I found this helpful if the link runs a server side script that takes a little bit to compose the file before sending it. so you can alert them that it\u0026apos;s processing, and then when it does finally send the file remove that processing notification. which is why I wanted to try to load the file via ajax to begin with so that I could have an event happen when the file is requested and another when it actually starts downloading.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;the js on the front page\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;expdone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;)\n{\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;exportdiv\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;display\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;none\u0026apos;\u0026lt;/span\u0026gt;;\n}\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;expgo\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;)\n{\n   \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;exportdiv\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;display\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;block\u0026apos;\u0026lt;/span\u0026gt;;\n   \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;exportif\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;src\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;test2.php?arguments=data\u0026apos;\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;the iframe\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;div id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;exportdiv\u0026quot;\u0026lt;/span\u0026gt; style=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;display:none;\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;img\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;src\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;loader.gif\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;br\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;h1\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;Generating Report\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;h1\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;iframe\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;exportif\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;src\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;width: 1px;height: 1px; border:0px;\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;iframe\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;div\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;then the other file:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;!\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;DOCTYPE\u0026lt;/span\u0026gt; html\u0026amp;gt;\n\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;html\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;head\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;expdone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;)\n{\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;parent\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;expdone\u0026lt;/span\u0026gt;();\n}\n\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;head\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;iframe\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;exportif\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;src\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;?php echo \u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;http:\u0026lt;/span\u0026gt;//\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;10.192.37.211\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;npdtracker\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;exportthismonth.php\u0026lt;/span\u0026gt;?\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;arguments\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.$_GET[\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;arguments\u0026lt;/span\u0026gt;\u0026quot;]; ?\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026quot;\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;iframe\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;exportif\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;onload\u0026lt;/span\u0026gt;= expdone;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;html\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I think there\u0026apos;s a way to read get data using js so then no php would be needed. but I don\u0026apos;t know it off hand and the server I\u0026apos;m using supports php so this works for me.  thought I\u0026apos;d share it in case it helps anyone.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If the server is writing the file back in the response (including cookies if\nyou use them to determine whether the file download started), Simply create a form with the values and submit it:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ajaxPostDownload\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;url, data\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; $form;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (($form = $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#download_form\u0026apos;\u0026lt;/span\u0026gt;)).\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt; === \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) {\n        $form = $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;form id=\u0026apos;download_form\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; style=\u0026apos;display: none; width: 1px; height: 1px; position: absolute; top: -10000px\u0026apos; method=\u0026apos;POST\u0026apos; action=\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + url + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026amp;gt;\u0026amp;lt;/form\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n        $form.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;appendTo\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;body\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Clear the form fields\u0026lt;/span\u0026gt;\n    $form.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;html\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Create new form fields\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;keys\u0026lt;/span\u0026gt;(data).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;forEach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;) {\n        $form.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;append\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;input type=\u0026apos;hidden\u0026apos; name=\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + key + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos; value=\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + data[key] + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;);\n    });\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Submit the form post\u0026lt;/span\u0026gt;\n    $form.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;submit\u0026lt;/span\u0026gt;();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Usage:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ajaxPostDownload\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/fileController/ExportFile\u0026apos;\u0026lt;/span\u0026gt;, {\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DownloadToken\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;newDownloadToken\u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Name\u0026lt;/span\u0026gt;: $txtName.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;(),\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Type\u0026lt;/span\u0026gt;: $txtType.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;()\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Controller Method:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;[\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpPost\u0026lt;/span\u0026gt;]\npublic \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FileResult\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ExportFile\u0026lt;/span\u0026gt;(string \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DownloadToken\u0026lt;/span\u0026gt;, string \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Name\u0026lt;/span\u0026gt;, string \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Type\u0026lt;/span\u0026gt;)\n{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Set DownloadToken Cookie.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Response\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SetCookie\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpCookie\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;downloadToken\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DownloadToken\u0026lt;/span\u0026gt;)\n    {\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Expires\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DateTime\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;UtcNow\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AddDays\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;),\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Secure\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;\n    });\n\n    using (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; output = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MemoryStream\u0026lt;/span\u0026gt;())\n    {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//get File\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(output.\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ToArray\u0026lt;/span\u0026gt;(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/vnd.ms-excel\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;NewFile.xls\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you want to use  jQuery File Download , please note this for IE.\nYou need to reset the response or it will not download\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//The IE will only work if you reset response\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getServletResponse\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;reset\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//The jquery.fileDownload needs a cookie be set\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getServletResponse\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setHeader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Set-Cookie\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fileDownload=true; path=/\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Do the reset of your action create InputStream and return\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Your action can implement \u0026lt;code\u0026gt;ServletResponseAware\u0026lt;/code\u0026gt;  to access \u0026lt;code\u0026gt;getServletResponse()\u0026lt;/code\u0026gt; \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It is certain that you can not do it through Ajax call.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;However, there is a workaround.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Steps :\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you are using form.submit() for downloading the file, what you can do is :\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Create an ajax call from client to server and store the file stream inside the session.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Upon \u0026quot;success\u0026quot; being returned from server, call your form.submit() to just stream the file stream stored in the session.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;This is helpful in case when you want to decide whether or not file needs to be downloaded after making form.submit(), eg: there can be a case where on form.submit(), an exception occurs on the server side and instead of crashing, you might need to show a custom message on the client side, in such case this implementation might help.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;there is another solution to download a web page in ajax. But I am referring to a page that must first be processed and then downloaded.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;First you need to separate the page processing from the results download.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;1) Only the page calculations are made in the ajax call.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;$.post(\u0026quot;CalculusPage.php\u0026quot;, { calculusFunction: true, ID: 29, data1: \u0026quot;a\u0026quot;, data2: \u0026quot;b\u0026quot; },\n\n       function(data, status) \n       {\n            if (status == \u0026quot;success\u0026quot;) \n            {\n                /* 2) In the answer the page that uses the previous calculations is downloaded. For example, this can be a page that prints the results of a table calculated in the ajax call. */\n                window.location.href = DownloadPage.php+\u0026quot;?ID=\u0026quot;+29;\n            }               \n       }\n);\n\n// For example: in the CalculusPage.php\n\n    if ( !empty($_POST[\u0026quot;calculusFunction\u0026quot;]) ) \n    {\n        $ID = $_POST[\u0026quot;ID\u0026quot;];\n\n        $query = \u0026quot;INSERT INTO ExamplePage (data1, data2) VALUES (\u0026apos;\u0026quot;.$_POST[\u0026quot;data1\u0026quot;].\u0026quot;\u0026apos;, \u0026apos;\u0026quot;.$_POST[\u0026quot;data2\u0026quot;].\u0026quot;\u0026apos;) WHERE id = \u0026quot;.$ID;\n        ...\n    }\n\n// For example: in the DownloadPage.php\n\n    $ID = $_GET[\u0026quot;ID\u0026quot;];\n\n    $sede = \u0026quot;SELECT * FROM ExamplePage WHERE id = \u0026quot;.$ID;\n    ...\n\n    $filename=\u0026quot;Export_Data.xls\u0026quot;;\n    header(\u0026quot;Content-Type: application/vnd.ms-excel\u0026quot;);\n    header(\u0026quot;Content-Disposition: inline; filename=$filename\u0026quot;);\n\n    ...\n\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I hope this solution can be useful for many, as it was for me.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;That\u0026apos;s it works so fine in any browser (I\u0026apos;m using asp.net core)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;false\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onDownload\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; api = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;@Url.Action(\u0026quot;myaction\u0026quot;, \u0026quot;mycontroller\u0026quot;)\u0026apos;\u0026lt;/span\u0026gt;; \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; form = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FormData\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;form1\u0026apos;\u0026lt;/span\u0026gt;));\n\n  \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fetch\u0026lt;/span\u0026gt;(api, { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;: form, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;method\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;POST\u0026quot;\u0026lt;/span\u0026gt;})\n      .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;then\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;resp\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; resp.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;blob\u0026lt;/span\u0026gt;())\n      .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;then\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;blob\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; {\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; url = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createObjectURL\u0026lt;/span\u0026gt;(blob);\n        $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#linkdownload\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;attr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;download\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Attachement.zip\u0026apos;\u0026lt;/span\u0026gt;);\n          $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#linkdownload\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;attr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;href\u0026quot;\u0026lt;/span\u0026gt;, url);\n          $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#linkdownload\u0026apos;\u0026lt;/span\u0026gt;)\n              .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fadeIn\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3000\u0026lt;/span\u0026gt;,\n                  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) { });\n\n      })\n      .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;() =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;An error occurred\u0026apos;\u0026lt;/span\u0026gt;));\n\n\n\n}\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-html lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt; \n \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;button\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;button\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;onclick\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;onDownload()\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;btn btn-primary btn-sm\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;Click to Process Files\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;button\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n \n \n \n \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;role\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;button\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;href\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;display: none\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;btn btn-sm btn-secondary\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;linkdownload\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;Click to download Attachments\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n \n \n \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;asp-controller\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mycontroller\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;asp-action\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;myaction\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;form1\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;form\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n \n \u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif2\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onDownload\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; api = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;@Url.Action(\u0026quot;myaction\u0026quot;, \u0026quot;mycontroller\u0026quot;)\u0026apos;\u0026lt;/span\u0026gt;; \n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//form1 is your id form, and to get data content of form\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; form = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FormData\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;form1\u0026apos;\u0026lt;/span\u0026gt;));\n\n            \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fetch\u0026lt;/span\u0026gt;(api, { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt;: form, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;method\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;POST\u0026quot;\u0026lt;/span\u0026gt;})\n                .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;then\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;resp\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; resp.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;blob\u0026lt;/span\u0026gt;())\n                .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;then\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;blob\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; {\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; url = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createObjectURL\u0026lt;/span\u0026gt;(blob);\n                    $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#linkdownload\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;attr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;download\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Attachments.zip\u0026apos;\u0026lt;/span\u0026gt;);\n                    $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#linkdownload\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;attr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;href\u0026quot;\u0026lt;/span\u0026gt;, url);\n                    $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#linkdownload\u0026apos;\u0026lt;/span\u0026gt;)\n                        .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fadeIn\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3000\u0026lt;/span\u0026gt;,\n                            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n\n                            });\n                })\n                .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;() =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;An error occurred\u0026apos;\u0026lt;/span\u0026gt;));                 \n\n        }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I have tried Ajax and HttpRequest ways to get my result download file but I\u0026apos;ve failed, finally I\u0026apos;ve solved my problem using these steps:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;implemented a simple hidden form in my html code:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;form method=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post\u0026quot;\u0026lt;/span\u0026gt; id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post_form\u0026quot;\u0026lt;/span\u0026gt; style=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;display:none\u0026quot;\u0026lt;/span\u0026gt; action=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;amin.php\u0026quot;\u0026lt;/span\u0026gt; \u0026amp;gt;\n    \u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hidden\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;action\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;export_xlsx\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hidden\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;post_form_data\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026amp;lt;/form\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;input with \u0026apos;action\u0026apos; name is for calling function in my php code,\ninput with \u0026apos;post_form_data\u0026apos; name for sending long data of a table which were not possible to send with GET. this data was encoded to json, and put json in input:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; list = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;();\n    $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#table_name tr\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;each\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; row = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;();\n        $(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;find\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;td\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;each\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n            row.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;($(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;text\u0026lt;/span\u0026gt;());\n        });\n        list.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(row);\n    });\nlist    = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(list);\n\n$(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;input[name=post_form_data]\u0026quot;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;(list);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;now, the form is ready with my desire values in inputs, just need to trigger the submit.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;post_form\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;submit\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;and done!\nwhile my result is a file (xlsx file for me) the page wouldn\u0026apos;t be redirected and instantly the file starts to download in last page, so no need to  useiframe or window.open etc.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;if you are trying to do something like this, this should be an easy trick .\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I struggled with this issue for a long time. Finally an elegant external library suggested \u0026lt;a href=\u0026quot;https://github.com/axios/axios/issues/1660#issuecomment-404858057\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt; helped me out.\u0026lt;/p\u0026gt;\n    "],"id":506,"title":"Download a file by jQuery.Ajax","content":"\n                \n\u0026lt;p\u0026gt;I have a Struts2 action in the server side for file downloading.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;action name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;download\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;com.xxx.DownAction\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\n    \u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;success\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;stream\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;contentType\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;text/plain\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;inputName\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;imageStream\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;contentDisposition\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;attachment;filename={fileName}\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bufferSize\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;1024\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026amp;lt;/action\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;However when I call the action using the jQuery:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;$.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;post\u0026lt;/span\u0026gt;(\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/download.action\u0026quot;\u0026lt;/span\u0026gt;,{\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;para1\u0026lt;/span\u0026gt;:value1,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;para2\u0026lt;/span\u0026gt;:value2\n    ....\n  },\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;){\n      \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;info\u0026lt;/span\u0026gt;(data);\n   }\n);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;in Firebug I see the data is retrieved with the \u0026lt;strong\u0026gt;Binary stream\u0026lt;/strong\u0026gt;. I wonder how to open the \u0026lt;strong\u0026gt;file downloading window\u0026lt;/strong\u0026gt; with which the user can save the file locally?\u0026lt;/p\u0026gt;\n    ","slug":"download-a-file-by-jquery.ajax-1657388220611","postType":"QUESTION","createdAt":"2022-07-09T17:37:00.000Z","updatedAt":"2022-07-09T17:37:00.000Z","tags":[{"id":2520,"name":"download","slug":"download","createdAt":"2022-07-09T17:37:00.000Z","updatedAt":"2022-07-09T17:37:00.000Z","Questions_Tags":{"questionId":506,"tagId":2520}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"download-a-file-by-jquery.ajax-1657388220611"},"buildId":"D-Vv5KfwuaE883xCdWfex","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>