<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/471-84c36aa98dd4107c.js" defer=""></script><script src="/_next/static/chunks/81-301f760ac8107464.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-76d2c3e2d98bb08b.js" defer=""></script><script src="/_next/static/8pZkyd0U8-Y2Qf3QK9j7l/_buildManifest.js" defer=""></script><script src="/_next/static/8pZkyd0U8-Y2Qf3QK9j7l/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.eZIPKL code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-c4b0431a-0"]{content:"eZIPKL,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-to-make-function-decorators-and-chain-them-together-1657388180803#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-c4b0431a-0 eZIPKL flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-to-make-function-decorators-and-chain-them-together-1657388180803">How to make function decorators and chain them together?</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/decorator">decorator</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/python-decorators">python-decorators</a></div></div><div class="question-content mt-5">
                
<p>How can I make two decorators in Python that would do the following?</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@make_bold</span>
<span class="hljs-meta">@make_italic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():
   <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello"</span>
</code></pre>
<p>...which should return:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-string">"&lt;b&gt;&lt;i&gt;Hello&lt;/i&gt;&lt;/b&gt;"</span>
</code></pre>
    </div></div></div><div class="sc-c4b0431a-2 cRqwQe"><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you are not into long explanations, see <a href="https://stackoverflow.com/questions/739654/understanding-python-decorators#answer-739665">Paolo Bergantinos answer</a>.</p>
<h1>Decorator Basics</h1>
<h2>Pythons functions are objects</h2>
<p>To understand decorators, you must first understand that functions are objects in Python. This has important consequences. Lets see why with a simple example :</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">shout</span>(<span class="hljs-params">word=<span class="hljs-string">"yes"</span></span>):
    <span class="hljs-keyword">return</span> word.capitalize()+<span class="hljs-string">"!"</span>

<span class="hljs-built_in">print</span>(shout())
<span class="hljs-comment"># outputs : 'Yes!'</span>

<span class="hljs-comment"># As an object, you can assign the function to a variable like any other object </span>
scream = shout

<span class="hljs-comment"># Notice we don't use parentheses: we are not calling the function,</span>
<span class="hljs-comment"># we are putting the function "shout" into the variable "scream".</span>
<span class="hljs-comment"># It means you can then call "shout" from "scream":</span>

<span class="hljs-built_in">print</span>(scream())
<span class="hljs-comment"># outputs : 'Yes!'</span>

<span class="hljs-comment"># More than that, it means you can remove the old name 'shout',</span>
<span class="hljs-comment">#&nbsp;and the function will still be accessible from 'scream'</span>

<span class="hljs-keyword">del</span> shout
<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">print</span>(shout())
<span class="hljs-keyword">except</span> NameError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(e)
    <span class="hljs-comment">#outputs: "name 'shout' is not defined"</span>

<span class="hljs-built_in">print</span>(scream())
<span class="hljs-comment"># outputs: 'Yes!'</span>
</code></pre>
<p>Keep this in mind. Well circle back to it shortly.</p>
<p>Another interesting property of Python functions is they can be defined inside another function!</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">talk</span>():

    <span class="hljs-comment"># You can define a function on the fly in "talk" ...</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">whisper</span>(<span class="hljs-params">word=<span class="hljs-string">"yes"</span></span>):
        <span class="hljs-keyword">return</span> word.lower()+<span class="hljs-string">"..."</span>

    <span class="hljs-comment"># ... and use it right away!</span>
    <span class="hljs-built_in">print</span>(whisper())

<span class="hljs-comment"># You call "talk", that defines "whisper" EVERY TIME you call it, then</span>
<span class="hljs-comment"># "whisper" is called in "talk". </span>
talk()
<span class="hljs-comment"># outputs: </span>
<span class="hljs-comment"># "yes..."</span>

<span class="hljs-comment"># But "whisper" DOES NOT EXIST outside "talk":</span>

<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">print</span>(whisper())
<span class="hljs-keyword">except</span> NameError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(e)
    <span class="hljs-comment">#outputs : "name 'whisper' is not defined"*</span>
    <span class="hljs-comment">#Python's functions are objects</span>
</code></pre>
<h2>Functions references</h2>
<p>Okay, still here? Now the fun part...</p>
<p>Youve seen that functions are objects. Therefore, functions:</p>
<ul>
<li>can be assigned to a variable</li>
<li>can be defined in another function</li>
</ul>
<p>That means that <strong>a function can <code>return</code> another function</strong>.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">getTalk</span>(<span class="hljs-params">kind=<span class="hljs-string">"shout"</span></span>):

    <span class="hljs-comment"># We define functions on the fly</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">shout</span>(<span class="hljs-params">word=<span class="hljs-string">"yes"</span></span>):
        <span class="hljs-keyword">return</span> word.capitalize()+<span class="hljs-string">"!"</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">whisper</span>(<span class="hljs-params">word=<span class="hljs-string">"yes"</span></span>) :
        <span class="hljs-keyword">return</span> word.lower()+<span class="hljs-string">"..."</span>

    <span class="hljs-comment"># Then we return one of them</span>
    <span class="hljs-keyword">if</span> kind == <span class="hljs-string">"shout"</span>:
        <span class="hljs-comment"># We don't use "()", we are not calling the function,</span>
        <span class="hljs-comment"># we are returning the function object</span>
        <span class="hljs-keyword">return</span> shout  
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> whisper

<span class="hljs-comment"># How do you use this strange beast?</span>

<span class="hljs-comment"># Get the function and assign it to a variable</span>
talk = getTalk()      

<span class="hljs-comment"># You can see that "talk" is here a function object:</span>
<span class="hljs-built_in">print</span>(talk)
<span class="hljs-comment">#outputs : &lt;function shout at 0xb7ea817c&gt;</span>

<span class="hljs-comment"># The object is the one returned by the function:</span>
<span class="hljs-built_in">print</span>(talk())
<span class="hljs-comment">#outputs : Yes!</span>

<span class="hljs-comment"># And you can even use it directly if you feel wild:</span>
<span class="hljs-built_in">print</span>(getTalk(<span class="hljs-string">"whisper"</span>)())
<span class="hljs-comment">#outputs : yes...</span>
</code></pre>
<p>Theres more!</p>
<p>If you can <code>return</code> a function, you can pass one as a parameter:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">doSomethingBefore</span>(<span class="hljs-params">func</span>): 
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I do something before then I call the function you gave me"</span>)
    <span class="hljs-built_in">print</span>(func())

doSomethingBefore(scream)
<span class="hljs-comment">#outputs: </span>
<span class="hljs-comment">#I do something before then I call the function you gave me</span>
<span class="hljs-comment">#Yes!</span>
</code></pre>
<p>Well, you just have everything needed to understand decorators. You see, decorators are wrappers, which means that <strong>they let you execute code before and after the function they decorate</strong> without modifying the function itself.</p>
<h2>Handcrafted decorators</h2>
<p>How youd do it manually:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment"># A decorator is a function that expects ANOTHER function as parameter</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">my_shiny_new_decorator</span>(<span class="hljs-params">a_function_to_decorate</span>):

    <span class="hljs-comment"># Inside, the decorator defines a function on the fly: the wrapper.</span>
    <span class="hljs-comment"># This function is going to be wrapped around the original function</span>
    <span class="hljs-comment"># so it can execute code before and after it.</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">the_wrapper_around_the_original_function</span>():

        <span class="hljs-comment"># Put here the code you want to be executed BEFORE the original function is called</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Before the function runs"</span>)

        <span class="hljs-comment"># Call the function here (using parentheses)</span>
        a_function_to_decorate()

        <span class="hljs-comment"># Put here the code you want to be executed AFTER the original function is called</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"After the function runs"</span>)

    <span class="hljs-comment"># At this point, "a_function_to_decorate" HAS NEVER BEEN EXECUTED.</span>
    <span class="hljs-comment"># We return the wrapper function we have just created.</span>
    <span class="hljs-comment"># The wrapper contains the function and the code to execute before and after. Its ready to use!</span>
    <span class="hljs-keyword">return</span> the_wrapper_around_the_original_function

<span class="hljs-comment"># Now imagine you create a function you don't want to ever touch again.</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">a_stand_alone_function</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am a stand alone function, don't you dare modify me"</span>)

a_stand_alone_function() 
<span class="hljs-comment">#outputs: I am a stand alone function, don't you dare modify me</span>

<span class="hljs-comment"># Well, you can decorate it to extend its behavior.</span>
<span class="hljs-comment"># Just pass it to the decorator, it will wrap it dynamically in </span>
<span class="hljs-comment"># any code you want and return you a new function ready to be used:</span>

a_stand_alone_function_decorated = my_shiny_new_decorator(a_stand_alone_function)
a_stand_alone_function_decorated()
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#Before the function runs</span>
<span class="hljs-comment">#I am a stand alone function, don't you dare modify me</span>
<span class="hljs-comment">#After the function runs</span>
</code></pre>
<p>Now, you probably want that every time you call <code>a_stand_alone_function</code>, <code>a_stand_alone_function_decorated</code> is called instead. Thats easy, just overwrite <code>a_stand_alone_function</code> with the function returned by <code>my_shiny_new_decorator</code>:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">a_stand_alone_function = my_shiny_new_decorator(a_stand_alone_function)
a_stand_alone_function()
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#Before the function runs</span>
<span class="hljs-comment">#I am a stand alone function, don't you dare modify me</span>
<span class="hljs-comment">#After the function runs</span>

<span class="hljs-comment"># Thats EXACTLY what decorators do!</span>
</code></pre>
<h2>Decorators demystified</h2>
<p>The previous example, using the decorator syntax:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@my_shiny_new_decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">another_stand_alone_function</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Leave me alone"</span>)

another_stand_alone_function()  
<span class="hljs-comment">#outputs:  </span>
<span class="hljs-comment">#Before the function runs</span>
<span class="hljs-comment">#Leave me alone</span>
<span class="hljs-comment">#After the function runs</span>
</code></pre>
<p>Yes, thats all, its that simple. <code>@decorator</code> is just a shortcut to:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">another_stand_alone_function = my_shiny_new_decorator(another_stand_alone_function)
</code></pre>
<p>Decorators are just a pythonic variant of the <a href="http://en.wikipedia.org/wiki/Decorator_pattern" rel="noreferrer">decorator design pattern</a>. There are several classic design patterns embedded in Python to ease development (like iterators).</p>
<p>Of course, you can accumulate decorators:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">bread</span>(<span class="hljs-params">func</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"&lt;/''''''\&gt;"</span>)
        func()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"&lt;\______/&gt;"</span>)
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-keyword">def</span> <span class="hljs-title function_">ingredients</span>(<span class="hljs-params">func</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"#tomatoes#"</span>)
        func()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"~salad~"</span>)
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-keyword">def</span> <span class="hljs-title function_">sandwich</span>(<span class="hljs-params">food=<span class="hljs-string">"--ham--"</span></span>):
    <span class="hljs-built_in">print</span>(food)

sandwich()
<span class="hljs-comment">#outputs: --ham--</span>
sandwich = bread(ingredients(sandwich))
sandwich()
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#&lt;/''''''\&gt;</span>
<span class="hljs-comment"># #tomatoes#</span>
<span class="hljs-comment"># --ham--</span>
<span class="hljs-comment"># ~salad~</span>
<span class="hljs-comment">#&lt;\______/&gt;</span>
</code></pre>
<p>Using the Python decorator syntax:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@bread</span>
<span class="hljs-meta">@ingredients</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">sandwich</span>(<span class="hljs-params">food=<span class="hljs-string">"--ham--"</span></span>):
    <span class="hljs-built_in">print</span>(food)

sandwich()
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#&lt;/''''''\&gt;</span>
<span class="hljs-comment"># #tomatoes#</span>
<span class="hljs-comment"># --ham--</span>
<span class="hljs-comment"># ~salad~</span>
<span class="hljs-comment">#&lt;\______/&gt;</span>
</code></pre>
<p>The order you set the decorators MATTERS:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@ingredients</span>
<span class="hljs-meta">@bread</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">strange_sandwich</span>(<span class="hljs-params">food=<span class="hljs-string">"--ham--"</span></span>):
    <span class="hljs-built_in">print</span>(food)

strange_sandwich()
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">##tomatoes#</span>
<span class="hljs-comment">#&lt;/''''''\&gt;</span>
<span class="hljs-comment"># --ham--</span>
<span class="hljs-comment">#&lt;\______/&gt;</span>
<span class="hljs-comment"># ~salad~</span>
</code></pre>
<hr>
<h1>Now: to answer the question...</h1>
<p>As a conclusion, you can easily see how to answer the question:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment"># The decorator to make it bold</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">makebold</span>(<span class="hljs-params">fn</span>):
    <span class="hljs-comment"># The new function the decorator returns</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-comment"># Insertion of some code before and after</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;b&gt;"</span> + fn() + <span class="hljs-string">"&lt;/b&gt;"</span>
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-comment"># The decorator to make it italic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">makeitalic</span>(<span class="hljs-params">fn</span>):
    <span class="hljs-comment"># The new function the decorator returns</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-comment"># Insertion of some code before and after</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;i&gt;"</span> + fn() + <span class="hljs-string">"&lt;/i&gt;"</span>
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@makebold</span>
<span class="hljs-meta">@makeitalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">"hello"</span>

<span class="hljs-built_in">print</span>(say())
<span class="hljs-comment">#outputs: &lt;b&gt;&lt;i&gt;hello&lt;/i&gt;&lt;/b&gt;</span>

<span class="hljs-comment"># This is the exact equivalent to </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">"hello"</span>
say = makebold(makeitalic(say))

<span class="hljs-built_in">print</span>(say())
<span class="hljs-comment">#outputs: &lt;b&gt;&lt;i&gt;hello&lt;/i&gt;&lt;/b&gt;</span>
</code></pre>
<p>You can now just leave happy, or burn your brain a little bit more and see advanced uses of decorators.</p>
<hr>
<h1>Taking decorators to the next level</h1>
<h2>Passing arguments to the decorated function</h2>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment"># Its not black magic, you just have to let the wrapper </span>
<span class="hljs-comment"># pass the argument:</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">a_decorator_passing_arguments</span>(<span class="hljs-params">function_to_decorate</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">a_wrapper_accepting_arguments</span>(<span class="hljs-params">arg1, arg2</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"I got args! Look: {0}, {1}"</span>.<span class="hljs-built_in">format</span>(arg1, arg2))
        function_to_decorate(arg1, arg2)
    <span class="hljs-keyword">return</span> a_wrapper_accepting_arguments

<span class="hljs-comment"># Since when you are calling the function returned by the decorator, you are</span>
<span class="hljs-comment"># calling the wrapper, passing arguments to the wrapper will let it pass them to </span>
<span class="hljs-comment"># the decorated function</span>

<span class="hljs-meta">@a_decorator_passing_arguments</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">print_full_name</span>(<span class="hljs-params">first_name, last_name</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"My name is {0} {1}"</span>.<span class="hljs-built_in">format</span>(first_name, last_name))
    
print_full_name(<span class="hljs-string">"Peter"</span>, <span class="hljs-string">"Venkman"</span>)
<span class="hljs-comment"># outputs:</span>
<span class="hljs-comment">#I got args! Look: Peter Venkman</span>
<span class="hljs-comment">#My name is Peter Venkman</span>
</code></pre>
<h2>Decorating methods</h2>
<p>One nifty thing about Python is that methods and functions are really the same.  The only difference is that methods expect that their first argument is a reference to the current object (<code>self</code>).</p>
<p>That means you can build a decorator for methods the same way! Just remember to take <code>self</code> into consideration:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">method_friendly_decorator</span>(<span class="hljs-params">method_to_decorate</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">self, lie</span>):
        lie = lie - <span class="hljs-number">3</span> <span class="hljs-comment"># very friendly, decrease age even more :-)</span>
        <span class="hljs-keyword">return</span> method_to_decorate(self, lie)
    <span class="hljs-keyword">return</span> wrapper
    
    
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Lucy</span>(<span class="hljs-title class_ inherited__">object</span>):
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.age = <span class="hljs-number">32</span>
    
<span class="hljs-meta">    @method_friendly_decorator</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sayYourAge</span>(<span class="hljs-params">self, lie</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am {0}, what did you think?"</span>.<span class="hljs-built_in">format</span>(self.age + lie))
        
l = Lucy()
l.sayYourAge(-<span class="hljs-number">3</span>)
<span class="hljs-comment">#outputs: I am 26, what did you think?</span>
</code></pre>
<p>If youre making general-purpose decorator--one youll apply to any function or method, no matter its arguments--then just use <code>*args, **kwargs</code>:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">a_decorator_passing_arbitrary_arguments</span>(<span class="hljs-params">function_to_decorate</span>):
    <span class="hljs-comment"># The wrapper accepts any arguments</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">a_wrapper_accepting_arbitrary_arguments</span>(<span class="hljs-params">*args, **kwargs</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Do I have args?:"</span>)
        <span class="hljs-built_in">print</span>(args)
        <span class="hljs-built_in">print</span>(kwargs)
        <span class="hljs-comment"># Then you unpack the arguments, here *args, **kwargs</span>
        <span class="hljs-comment"># If you are not familiar with unpacking, check:</span>
        <span class="hljs-comment"># http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/</span>
        function_to_decorate(*args, **kwargs)
    <span class="hljs-keyword">return</span> a_wrapper_accepting_arbitrary_arguments

<span class="hljs-meta">@a_decorator_passing_arbitrary_arguments</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">function_with_no_argument</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Python is cool, no argument here."</span>)

function_with_no_argument()
<span class="hljs-comment">#outputs</span>
<span class="hljs-comment">#Do I have args?:</span>
<span class="hljs-comment">#()</span>
<span class="hljs-comment">#{}</span>
<span class="hljs-comment">#Python is cool, no argument here.</span>

<span class="hljs-meta">@a_decorator_passing_arbitrary_arguments</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">function_with_arguments</span>(<span class="hljs-params">a, b, c</span>):
    <span class="hljs-built_in">print</span>(a, b, c)
    
function_with_arguments(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
<span class="hljs-comment">#outputs</span>
<span class="hljs-comment">#Do I have args?:</span>
<span class="hljs-comment">#(1, 2, 3)</span>
<span class="hljs-comment">#{}</span>
<span class="hljs-comment">#1 2 3 </span>
 
<span class="hljs-meta">@a_decorator_passing_arbitrary_arguments</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">function_with_named_arguments</span>(<span class="hljs-params">a, b, c, platypus=<span class="hljs-string">"Why not ?"</span></span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Do {0}, {1} and {2} like platypus? {3}"</span>.<span class="hljs-built_in">format</span>(a, b, c, platypus))

function_with_named_arguments(<span class="hljs-string">"Bill"</span>, <span class="hljs-string">"Linus"</span>, <span class="hljs-string">"Steve"</span>, platypus=<span class="hljs-string">"Indeed!"</span>)
<span class="hljs-comment">#outputs</span>
<span class="hljs-comment">#Do I have args ? :</span>
<span class="hljs-comment">#('Bill', 'Linus', 'Steve')</span>
<span class="hljs-comment">#{'platypus': 'Indeed!'}</span>
<span class="hljs-comment">#Do Bill, Linus and Steve like platypus? Indeed!</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Mary</span>(<span class="hljs-title class_ inherited__">object</span>):
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.age = <span class="hljs-number">31</span>
    
<span class="hljs-meta">    @a_decorator_passing_arbitrary_arguments</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sayYourAge</span>(<span class="hljs-params">self, lie=-<span class="hljs-number">3</span></span>): <span class="hljs-comment"># You can now add a default value</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am {0}, what did you think?"</span>.<span class="hljs-built_in">format</span>(self.age + lie))

m = Mary()
m.sayYourAge()
<span class="hljs-comment">#outputs</span>
<span class="hljs-comment"># Do I have args?:</span>
<span class="hljs-comment">#(&lt;__main__.Mary object at 0xb7d303ac&gt;,)</span>
<span class="hljs-comment">#{}</span>
<span class="hljs-comment">#I am 28, what did you think?</span>
</code></pre>
<h2>Passing arguments to the decorator</h2>
<p>Great, now what would you say about passing arguments to the decorator itself?</p>
<p>This can get somewhat twisted, since a decorator must accept a function as an argument. Therefore, you cannot pass the decorated functions arguments directly to the decorator.</p>
<p>Before rushing to the solution, lets write a little reminder:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment"># Decorators are ORDINARY functions</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">my_decorator</span>(<span class="hljs-params">func</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am an ordinary function"</span>)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am function returned by the decorator"</span>)
        func()
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-comment"># Therefore, you can call it without any "@"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">lazy_function</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"zzzzzzzz"</span>)

decorated_function = my_decorator(lazy_function)
<span class="hljs-comment">#outputs: I am an ordinary function</span>
            
<span class="hljs-comment"># It outputs "I am an ordinary function", because thats just what you do:</span>
<span class="hljs-comment"># calling a function. Nothing magic.</span>

<span class="hljs-meta">@my_decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">lazy_function</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"zzzzzzzz"</span>)
    
<span class="hljs-comment">#outputs: I am an ordinary function</span>
</code></pre>
<p>Its exactly the same. "<code>my_decorator</code>" is called. So when you <code>@my_decorator</code>, you are telling Python to call the function 'labelled by the variable "<code>my_decorator</code>"'.</p>
<p>This is important! The label you give can point directly to the decorator<strong>or not</strong>.</p>
<p>Lets get evil. </p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator_maker</span>():
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I make decorators! I am executed only once: "</span>
          <span class="hljs-string">"when you make me create a decorator."</span>)
            
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">my_decorator</span>(<span class="hljs-params">func</span>):
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am a decorator! I am executed only when you decorate a function."</span>)
               
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>():
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am the wrapper around the decorated function. "</span>
                  <span class="hljs-string">"I am called when you call the decorated function. "</span>
                  <span class="hljs-string">"As the wrapper, I return the RESULT of the decorated function."</span>)
            <span class="hljs-keyword">return</span> func()
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"As the decorator, I return the wrapped function."</span>)
        
        <span class="hljs-keyword">return</span> wrapped
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"As a decorator maker, I return a decorator"</span>)
    <span class="hljs-keyword">return</span> my_decorator
            
<span class="hljs-comment"># Lets create a decorator. Its just a new function after all.</span>
new_decorator = decorator_maker()       
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#I make decorators! I am executed only once: when you make me create a decorator.</span>
<span class="hljs-comment">#As a decorator maker, I return a decorator</span>

<span class="hljs-comment"># Then we decorate the function</span>
            
<span class="hljs-keyword">def</span> <span class="hljs-title function_">decorated_function</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am the decorated function."</span>)
   
decorated_function = new_decorator(decorated_function)
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#I am a decorator! I am executed only when you decorate a function.</span>
<span class="hljs-comment">#As the decorator, I return the wrapped function</span>
     
<span class="hljs-comment"># Lets call the function:</span>
decorated_function()
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#I am the wrapper around the decorated function. I am called when you call the decorated function.</span>
<span class="hljs-comment">#As the wrapper, I return the RESULT of the decorated function.</span>
<span class="hljs-comment">#I am the decorated function.</span>
</code></pre>
<p>No surprise here.</p>
<p>Lets do EXACTLY the same thing, but skip all the pesky intermediate variables:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">decorated_function</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am the decorated function."</span>)
decorated_function = decorator_maker()(decorated_function)
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#I make decorators! I am executed only once: when you make me create a decorator.</span>
<span class="hljs-comment">#As a decorator maker, I return a decorator</span>
<span class="hljs-comment">#I am a decorator! I am executed only when you decorate a function.</span>
<span class="hljs-comment">#As the decorator, I return the wrapped function.</span>

<span class="hljs-comment"># Finally:</span>
decorated_function()    
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#I am the wrapper around the decorated function. I am called when you call the decorated function.</span>
<span class="hljs-comment">#As the wrapper, I return the RESULT of the decorated function.</span>
<span class="hljs-comment">#I am the decorated function.</span>
</code></pre>
<p>Lets make it <em>even shorter</em>:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@decorator_maker()</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">decorated_function</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am the decorated function."</span>)
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#I make decorators! I am executed only once: when you make me create a decorator.</span>
<span class="hljs-comment">#As a decorator maker, I return a decorator</span>
<span class="hljs-comment">#I am a decorator! I am executed only when you decorate a function.</span>
<span class="hljs-comment">#As the decorator, I return the wrapped function.</span>

<span class="hljs-comment">#Eventually: </span>
decorated_function()    
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#I am the wrapper around the decorated function. I am called when you call the decorated function.</span>
<span class="hljs-comment">#As the wrapper, I return the RESULT of the decorated function.</span>
<span class="hljs-comment">#I am the decorated function.</span>
</code></pre>
<p>Hey, did you see that? We used a function call with the "<code>@</code>" syntax! :-)</p>
<p>So, back to decorators with arguments. If we can use functions to generate the decorator on the fly, we can pass arguments to that function, right?</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator_maker_with_arguments</span>(<span class="hljs-params">decorator_arg1, decorator_arg2</span>):
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I make decorators! And I accept arguments: {0}, {1}"</span>.<span class="hljs-built_in">format</span>(decorator_arg1, decorator_arg2))
            
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">my_decorator</span>(<span class="hljs-params">func</span>):
        <span class="hljs-comment"># The ability to pass arguments here is a gift from closures.</span>
        <span class="hljs-comment"># If you are not comfortable with closures, you can assume its ok,</span>
        <span class="hljs-comment"># or read: https://stackoverflow.com/questions/13857/can-you-explain-closures-as-they-relate-to-python</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am the decorator. Somehow you passed me arguments: {0}, {1}"</span>.<span class="hljs-built_in">format</span>(decorator_arg1, decorator_arg2))
               
        <span class="hljs-comment"># Don't confuse decorator arguments and function arguments!</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">function_arg1, function_arg2</span>) :
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am the wrapper around the decorated function.\n"</span>
                  <span class="hljs-string">"I can access all the variables\n"</span>
                  <span class="hljs-string">"\t- from the decorator: {0} {1}\n"</span>
                  <span class="hljs-string">"\t- from the function call: {2} {3}\n"</span>
                  <span class="hljs-string">"Then I can pass them to the decorated function"</span>
                  .<span class="hljs-built_in">format</span>(decorator_arg1, decorator_arg2,
                          function_arg1, function_arg2))
            <span class="hljs-keyword">return</span> func(function_arg1, function_arg2)
        
        <span class="hljs-keyword">return</span> wrapped
    
    <span class="hljs-keyword">return</span> my_decorator

<span class="hljs-meta">@decorator_maker_with_arguments(<span class="hljs-params"><span class="hljs-string">"Leonard"</span>, <span class="hljs-string">"Sheldon"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">decorated_function_with_arguments</span>(<span class="hljs-params">function_arg1, function_arg2</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am the decorated function and only knows about my arguments: {0}"</span>
           <span class="hljs-string">" {1}"</span>.<span class="hljs-built_in">format</span>(function_arg1, function_arg2))
          
decorated_function_with_arguments(<span class="hljs-string">"Rajesh"</span>, <span class="hljs-string">"Howard"</span>)
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#I make decorators! And I accept arguments: Leonard Sheldon</span>
<span class="hljs-comment">#I am the decorator. Somehow you passed me arguments: Leonard Sheldon</span>
<span class="hljs-comment">#I am the wrapper around the decorated function. </span>
<span class="hljs-comment">#I can access all the variables </span>
<span class="hljs-comment">#   - from the decorator: Leonard Sheldon </span>
<span class="hljs-comment">#   - from the function call: Rajesh Howard </span>
<span class="hljs-comment">#Then I can pass them to the decorated function</span>
<span class="hljs-comment">#I am the decorated function and only knows about my arguments: Rajesh Howard</span>
</code></pre>
<p>Here it is: a decorator with arguments. Arguments can be set as variable:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">c1 = <span class="hljs-string">"Penny"</span>
c2 = <span class="hljs-string">"Leslie"</span>

<span class="hljs-meta">@decorator_maker_with_arguments(<span class="hljs-params"><span class="hljs-string">"Leonard"</span>, c1</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">decorated_function_with_arguments</span>(<span class="hljs-params">function_arg1, function_arg2</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am the decorated function and only knows about my arguments:"</span>
           <span class="hljs-string">" {0} {1}"</span>.<span class="hljs-built_in">format</span>(function_arg1, function_arg2))

decorated_function_with_arguments(c2, <span class="hljs-string">"Howard"</span>)
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#I make decorators! And I accept arguments: Leonard Penny</span>
<span class="hljs-comment">#I am the decorator. Somehow you passed me arguments: Leonard Penny</span>
<span class="hljs-comment">#I am the wrapper around the decorated function. </span>
<span class="hljs-comment">#I can access all the variables </span>
<span class="hljs-comment">#   - from the decorator: Leonard Penny </span>
<span class="hljs-comment">#   - from the function call: Leslie Howard </span>
<span class="hljs-comment">#Then I can pass them to the decorated function</span>
<span class="hljs-comment">#I am the decorated function and only know about my arguments: Leslie Howard</span>
</code></pre>
<p>As you can see, you can pass arguments to the decorator like any function using this trick. You can even use <code>*args, **kwargs</code> if you wish. But remember decorators are called <strong>only once</strong>. Just when Python imports the script. You can't dynamically set the arguments afterwards. When you do "import x", <strong>the function is already decorated</strong>, so you can't
change anything.</p>
<hr>
<h1>Lets practice: decorating a decorator</h1>
<p>Okay, as a bonus, I'll give you a snippet to make any decorator accept generically any argument. After all, in order to accept arguments, we created our decorator using another function.</p>
<p>We wrapped the decorator.</p>
<p>Anything else we saw recently that wrapped function?</p>
<p>Oh yes, decorators!</p>
<p>Lets have some fun and write a decorator for the decorators:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator_with_args</span>(<span class="hljs-params">decorator_to_enhance</span>):
    <span class="hljs-string">""" 
    This function is supposed to be used as a decorator.
    It must decorate an other function, that is intended to be used as a decorator.
    Take a cup of coffee.
    It will allow any decorator to accept an arbitrary number of arguments,
    saving you the headache to remember how to do that every time.
    """</span>
    
    <span class="hljs-comment"># We use the same trick we did to pass arguments</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator_maker</span>(<span class="hljs-params">*args, **kwargs</span>):
       
        <span class="hljs-comment"># We create on the fly a decorator that accepts only a function</span>
        <span class="hljs-comment"># but keeps the passed arguments from the maker.</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator_wrapper</span>(<span class="hljs-params">func</span>):
       
            <span class="hljs-comment"># We return the result of the original decorator, which, after all, </span>
            <span class="hljs-comment"># IS JUST AN ORDINARY FUNCTION (which returns a function).</span>
            <span class="hljs-comment"># Only pitfall: the decorator must have this specific signature or it won't work:</span>
            <span class="hljs-keyword">return</span> decorator_to_enhance(func, *args, **kwargs)
        
        <span class="hljs-keyword">return</span> decorator_wrapper
    
    <span class="hljs-keyword">return</span> decorator_maker
       
</code></pre>
<p>It can be used as follows:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment"># You create the function you will use as a decorator. And stick a decorator on it :-)</span>
<span class="hljs-comment"># Don't forget, the signature is "decorator(func, *args, **kwargs)"</span>
<span class="hljs-meta">@decorator_with_args </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">decorated_decorator</span>(<span class="hljs-params">func, *args, **kwargs</span>): 
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">function_arg1, function_arg2</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Decorated with {0} {1}"</span>.<span class="hljs-built_in">format</span>(args, kwargs))
        <span class="hljs-keyword">return</span> func(function_arg1, function_arg2)
    <span class="hljs-keyword">return</span> wrapper
    
<span class="hljs-comment"># Then you decorate the functions you wish with your brand new decorated decorator.</span>

<span class="hljs-meta">@decorated_decorator(<span class="hljs-params"><span class="hljs-number">42</span>, <span class="hljs-number">404</span>, <span class="hljs-number">1024</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">decorated_function</span>(<span class="hljs-params">function_arg1, function_arg2</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello {0} {1}"</span>.<span class="hljs-built_in">format</span>(function_arg1, function_arg2))

decorated_function(<span class="hljs-string">"Universe and"</span>, <span class="hljs-string">"everything"</span>)
<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#Decorated with (42, 404, 1024) {}</span>
<span class="hljs-comment">#Hello Universe and everything</span>

<span class="hljs-comment"># Whoooot!</span>
</code></pre>
<p>I know, the last time you had this feeling, it was after listening a guy saying: "before understanding recursion, you must first understand recursion". But now, don't you feel good about mastering this?</p>
<hr>
<h1>Best practices: decorators</h1>
<ul>
<li>Decorators were introduced in Python 2.4, so be sure your code will be run on &gt;= 2.4.</li>
<li>Decorators slow down the function call. Keep that in mind.</li>
<li><strong>You cannot un-decorate a function.</strong> (There <em>are</em> hacks to create decorators that can be removed, but nobody uses them.) So once a function is decorated, its decorated <em>for all the code</em>.</li>
<li>Decorators wrap functions, which can make them hard to debug.  (This gets better from Python &gt;= 2.5; see below.)</li>
</ul>
<p>The <code>functools</code> module was introduced in Python 2.5. It includes the function <code>functools.wraps()</code>, which copies the name, module, and docstring of the decorated function to its wrapper.</p>
<p>(Fun fact: <code>functools.wraps()</code> is a decorator! )</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment"># For debugging, the stacktrace prints you the function __name__</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"foo"</span>)
    
<span class="hljs-built_in">print</span>(foo.__name__)
<span class="hljs-comment">#outputs: foo</span>
    
<span class="hljs-comment"># With a decorator, it gets messy    </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params">func</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"bar"</span>)
        <span class="hljs-keyword">return</span> func()
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@bar</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"foo"</span>)

<span class="hljs-built_in">print</span>(foo.__name__)
<span class="hljs-comment">#outputs: wrapper</span>

<span class="hljs-comment"># "functools" can help for that</span>

<span class="hljs-keyword">import</span> functools

<span class="hljs-keyword">def</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params">func</span>):
    <span class="hljs-comment"># We say that "wrapper", is wrapping "func"</span>
    <span class="hljs-comment"># and the magic begins</span>
<span class="hljs-meta">    @functools.wraps(<span class="hljs-params">func</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"bar"</span>)
        <span class="hljs-keyword">return</span> func()
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@bar</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"foo"</span>)

<span class="hljs-built_in">print</span>(foo.__name__)
<span class="hljs-comment">#outputs: foo</span>
</code></pre>
<hr>
<h1>How can the decorators be useful?</h1>
<p><strong>Now the big question:</strong> What can I use decorators for?</p>
<p>Seem cool and powerful, but a practical example would be great. Well, there are 1000 possibilities. Classic uses are extending a function behavior from an external lib (you can't modify it), or for debugging (you don't want to modify it because its temporary).</p>
<p>You can use them to extend several functions in a DRYs way, like so:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">benchmark</span>(<span class="hljs-params">func</span>):
    <span class="hljs-string">"""
    A decorator that prints the time a function takes
    to execute.
    """</span>
    <span class="hljs-keyword">import</span> time
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
        t = time.clock()
        res = func(*args, **kwargs)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"{0} {1}"</span>.<span class="hljs-built_in">format</span>(func.__name__, time.clock()-t))
        <span class="hljs-keyword">return</span> res
    <span class="hljs-keyword">return</span> wrapper


<span class="hljs-keyword">def</span> <span class="hljs-title function_">logging</span>(<span class="hljs-params">func</span>):
    <span class="hljs-string">"""
    A decorator that logs the activity of the script.
    (it actually just prints it, but it could be logging!)
    """</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
        res = func(*args, **kwargs)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"{0} {1} {2}"</span>.<span class="hljs-built_in">format</span>(func.__name__, args, kwargs))
        <span class="hljs-keyword">return</span> res
    <span class="hljs-keyword">return</span> wrapper


<span class="hljs-keyword">def</span> <span class="hljs-title function_">counter</span>(<span class="hljs-params">func</span>):
    <span class="hljs-string">"""
    A decorator that counts and prints the number of times a function has been executed
    """</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
        wrapper.count = wrapper.count + <span class="hljs-number">1</span>
        res = func(*args, **kwargs)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"{0} has been used: {1}x"</span>.<span class="hljs-built_in">format</span>(func.__name__, wrapper.count))
        <span class="hljs-keyword">return</span> res
    wrapper.count = <span class="hljs-number">0</span>
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@counter</span>
<span class="hljs-meta">@benchmark</span>
<span class="hljs-meta">@logging</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">reverse_string</span>(<span class="hljs-params">string</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(<span class="hljs-built_in">reversed</span>(string))

<span class="hljs-built_in">print</span>(reverse_string(<span class="hljs-string">"Able was I ere I saw Elba"</span>))
<span class="hljs-built_in">print</span>(reverse_string(<span class="hljs-string">"A man, a plan, a canoe, pasta, heros, rajahs, a coloratura, maps, snipe, percale, macaroni, a gag, a banana bag, a tan, a tag, a banana bag again (or a camel), a crepe, pins, Spam, a rut, a Rolo, cash, a jar, sore hats, a peon, a canal: Panama!"</span>))

<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#reverse_string ('Able was I ere I saw Elba',) {}</span>
<span class="hljs-comment">#wrapper 0.0</span>
<span class="hljs-comment">#wrapper has been used: 1x </span>
<span class="hljs-comment">#ablE was I ere I saw elbA</span>
<span class="hljs-comment">#reverse_string ('A man, a plan, a canoe, pasta, heros, rajahs, a coloratura, maps, snipe, percale, macaroni, a gag, a banana bag, a tan, a tag, a banana bag again (or a camel), a crepe, pins, Spam, a rut, a Rolo, cash, a jar, sore hats, a peon, a canal: Panama!',) {}</span>
<span class="hljs-comment">#wrapper 0.0</span>
<span class="hljs-comment">#wrapper has been used: 2x</span>
<span class="hljs-comment">#!amanaP :lanac a ,noep a ,stah eros ,raj a ,hsac ,oloR a ,tur a ,mapS ,snip ,eperc a ,)lemac a ro( niaga gab ananab a ,gat a ,nat a ,gab ananab a ,gag a ,inoracam ,elacrep ,epins ,spam ,arutaroloc a ,shajar ,soreh ,atsap ,eonac a ,nalp a ,nam A</span>
</code></pre>
<p>Of course the good thing with decorators is that you can use them right away on almost anything without rewriting. DRY, I said:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@counter</span>
<span class="hljs-meta">@benchmark</span>
<span class="hljs-meta">@logging</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_random_futurama_quote</span>():
    <span class="hljs-keyword">from</span> urllib <span class="hljs-keyword">import</span> urlopen
    result = urlopen(<span class="hljs-string">"http://subfusion.net/cgi-bin/quote.pl?quote=futurama"</span>).read()
    <span class="hljs-keyword">try</span>:
        value = result.split(<span class="hljs-string">"&lt;br&gt;&lt;b&gt;&lt;hr&gt;&lt;br&gt;"</span>)[<span class="hljs-number">1</span>].split(<span class="hljs-string">"&lt;br&gt;&lt;br&gt;&lt;hr&gt;"</span>)[<span class="hljs-number">0</span>]
        <span class="hljs-keyword">return</span> value.strip()
    <span class="hljs-keyword">except</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"No, I'm ... doesn't!"</span>

    
<span class="hljs-built_in">print</span>(get_random_futurama_quote())
<span class="hljs-built_in">print</span>(get_random_futurama_quote())

<span class="hljs-comment">#outputs:</span>
<span class="hljs-comment">#get_random_futurama_quote () {}</span>
<span class="hljs-comment">#wrapper 0.02</span>
<span class="hljs-comment">#wrapper has been used: 1x</span>
<span class="hljs-comment">#The laws of science be a harsh mistress.</span>
<span class="hljs-comment">#get_random_futurama_quote () {}</span>
<span class="hljs-comment">#wrapper 0.01</span>
<span class="hljs-comment">#wrapper has been used: 2x</span>
<span class="hljs-comment">#Curse you, merciful Poseidon!</span>
</code></pre>
<p>Python itself provides several decorators: <code>property</code>, <code>staticmethod</code>, etc.</p>
<ul>
<li>Django uses decorators to manage caching and view permissions.</li>
<li>Twisted to fake inlining asynchronous functions calls.</li>
</ul>
<p>This really is a large playground.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Check out <a href="http://docs.python.org/reference/compound_stmts.html#function" rel="noreferrer">the documentation</a> to see how decorators work. Here is what you asked for:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">makebold</span>(<span class="hljs-params">fn</span>):
<span class="hljs-meta">    @wraps(<span class="hljs-params">fn</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;b&gt;"</span> + fn(*args, **kwargs) + <span class="hljs-string">"&lt;/b&gt;"</span>
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-keyword">def</span> <span class="hljs-title function_">makeitalic</span>(<span class="hljs-params">fn</span>):
<span class="hljs-meta">    @wraps(<span class="hljs-params">fn</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;i&gt;"</span> + fn(*args, **kwargs) + <span class="hljs-string">"&lt;/i&gt;"</span>
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@makebold</span>
<span class="hljs-meta">@makeitalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">"hello world"</span>

<span class="hljs-meta">@makebold</span>
<span class="hljs-meta">@makeitalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">s</span>):
    <span class="hljs-keyword">return</span> s

<span class="hljs-built_in">print</span> hello()        <span class="hljs-comment"># returns "&lt;b&gt;&lt;i&gt;hello world&lt;/i&gt;&lt;/b&gt;"</span>
<span class="hljs-built_in">print</span> hello.__name__ <span class="hljs-comment"># with functools.wraps() this returns "hello"</span>
<span class="hljs-built_in">print</span> log(<span class="hljs-string">'hello'</span>)   <span class="hljs-comment"># returns "&lt;b&gt;&lt;i&gt;hello&lt;/i&gt;&lt;/b&gt;"</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Alternatively, you could write a factory function which return a decorator which wraps the return value of the decorated function in a tag passed to the factory function. For example:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">wrap_in_tag</span>(<span class="hljs-params">tag</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">factory</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">        @wraps(<span class="hljs-params">func</span>)</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>():
            <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;%(tag)s&gt;%(rv)s&lt;/%(tag)s&gt;'</span> % (
                {<span class="hljs-string">'tag'</span>: tag, <span class="hljs-string">'rv'</span>: func()})
        <span class="hljs-keyword">return</span> decorator
    <span class="hljs-keyword">return</span> factory
</code></pre>

<p>This enables you to write:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@wrap_in_tag(<span class="hljs-params"><span class="hljs-string">'b'</span></span>)</span>
<span class="hljs-meta">@wrap_in_tag(<span class="hljs-params"><span class="hljs-string">'i'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">'hello'</span>
</code></pre>

<p>or</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">makebold = wrap_in_tag(<span class="hljs-string">'b'</span>)
makeitalic = wrap_in_tag(<span class="hljs-string">'i'</span>)

<span class="hljs-meta">@makebold</span>
<span class="hljs-meta">@makeitalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">'hello'</span>
</code></pre>

<p>Personally I would have written the decorator somewhat differently:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">wrap_in_tag</span>(<span class="hljs-params">tag</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">factory</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">        @wraps(<span class="hljs-params">func</span>)</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">val</span>):
            <span class="hljs-keyword">return</span> func(<span class="hljs-string">'&lt;%(tag)s&gt;%(val)s&lt;/%(tag)s&gt;'</span> %
                        {<span class="hljs-string">'tag'</span>: tag, <span class="hljs-string">'val'</span>: val})
        <span class="hljs-keyword">return</span> decorator
    <span class="hljs-keyword">return</span> factory
</code></pre>

<p>which would yield:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@wrap_in_tag(<span class="hljs-params"><span class="hljs-string">'b'</span></span>)</span>
<span class="hljs-meta">@wrap_in_tag(<span class="hljs-params"><span class="hljs-string">'i'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>(<span class="hljs-params">val</span>):
    <span class="hljs-keyword">return</span> val
say(<span class="hljs-string">'hello'</span>)
</code></pre>

<p>Don't forget the construction for which decorator syntax is a shorthand:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">say = wrap_in_tag(<span class="hljs-string">'b'</span>)(wrap_in_tag(<span class="hljs-string">'i'</span>)(say)))
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It looks like the other people have already told you how to solve the problem. I hope this will help you understand what decorators are.</p>

<p>Decorators are just syntactical sugar.</p>

<p>This</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>():
    ...
</code></pre>

<p>expands to    </p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>():
    ...
func = decorator(func)
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>And of course you can return lambdas as well from a decorator function:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">makebold</span>(<span class="hljs-params">f</span>): 
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span>: <span class="hljs-string">"&lt;b&gt;"</span> + f() + <span class="hljs-string">"&lt;/b&gt;"</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">makeitalic</span>(<span class="hljs-params">f</span>): 
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span>: <span class="hljs-string">"&lt;i&gt;"</span> + f() + <span class="hljs-string">"&lt;/i&gt;"</span>

<span class="hljs-meta">@makebold</span>
<span class="hljs-meta">@makeitalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello"</span>

<span class="hljs-built_in">print</span> say()
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Python decorators add extra functionality to another function</p>

<p>An italics decorator could be like</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">makeitalic</span>(<span class="hljs-params">fn</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">newFunc</span>():
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;i&gt;"</span> + fn() + <span class="hljs-string">"&lt;/i&gt;"</span>
    <span class="hljs-keyword">return</span> newFunc
</code></pre>

<p>Note that a function is defined inside a function.
What it basically does is replace a function with the newly defined one. For example, I have this class</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">foo</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span> <span class="hljs-string">"hi"</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">foobar</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span> <span class="hljs-string">"hi again"</span>
</code></pre>

<p>Now say, I want both functions to print "---" after and before they are done.
I could add a print "---" before and after each print statement.
But because I don't like repeating myself, I will make a decorator</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">addDashes</span>(<span class="hljs-params">fn</span>): <span class="hljs-comment"># notice it takes a function as an argument</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">newFunction</span>(<span class="hljs-params">self</span>): <span class="hljs-comment"># define a new function</span>
        <span class="hljs-built_in">print</span> <span class="hljs-string">"---"</span>
        fn(self) <span class="hljs-comment"># call the original function</span>
        <span class="hljs-built_in">print</span> <span class="hljs-string">"---"</span>
    <span class="hljs-keyword">return</span> newFunction
    <span class="hljs-comment"># Return the newly defined function - it will "replace" the original</span>
</code></pre>

<p>So now I can change my class to </p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">foo</span>:
<span class="hljs-meta">    @addDashes</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span> <span class="hljs-string">"hi"</span>

<span class="hljs-meta">    @addDashes</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">foobar</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span> <span class="hljs-string">"hi again"</span>
</code></pre>

<p>For more on decorators, check
<a href="http://www.ibm.com/developerworks/linux/library/l-cpdecor.html" rel="noreferrer">http://www.ibm.com/developerworks/linux/library/l-cpdecor.html</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You <em>could</em> make two separate decorators that do what you want as illustrated directly below. Note the use of <code>*args, **kwargs</code> in the declaration of the <code>wrapped()</code> function which supports the decorated function having multiple arguments (which isn't really necessary for the example <code>say()</code> function, but is included for generality).</p>

<p>For similar reasons, the <code>functools.wraps</code> decorator is used to change the meta attributes of the wrapped function to be those of the one being decorated. This makes error messages and embedded function documentation (<code>func.__doc__</code>) be those of the decorated function instead of <code>wrapped()</code>'s.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">makebold</span>(<span class="hljs-params">fn</span>):
<span class="hljs-meta">    @wraps(<span class="hljs-params">fn</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">*args, **kwargs</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;b&gt;"</span> + fn(*args, **kwargs) + <span class="hljs-string">"&lt;/b&gt;"</span>
    <span class="hljs-keyword">return</span> wrapped

<span class="hljs-keyword">def</span> <span class="hljs-title function_">makeitalic</span>(<span class="hljs-params">fn</span>):
<span class="hljs-meta">    @wraps(<span class="hljs-params">fn</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">*args, **kwargs</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;i&gt;"</span> + fn(*args, **kwargs) + <span class="hljs-string">"&lt;/i&gt;"</span>
    <span class="hljs-keyword">return</span> wrapped

<span class="hljs-meta">@makebold</span>
<span class="hljs-meta">@makeitalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello'</span>

<span class="hljs-built_in">print</span>(say())  <span class="hljs-comment"># -&gt; &lt;b&gt;&lt;i&gt;Hello&lt;/i&gt;&lt;/b&gt;</span>
</code></pre>

<h2>Refinements</h2>

<p>As you can see there's a lot of duplicate code in these two decorators. Given this similarity it would be better for you to instead make a generic one that was actually a <em>decorator factory</em>in other words, a decorator function that makes other decorators. That way there would be less code repetitionand allow the <a href="https://en.wikipedia.org/wiki/Don't_repeat_yourself" rel="noreferrer">DRY</a> principle to be followed.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">html_deco</span>(<span class="hljs-params">tag</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">fn</span>):
<span class="hljs-meta">        @wraps(<span class="hljs-params">fn</span>)</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">*args, **kwargs</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;%s&gt;'</span> % tag + fn(*args, **kwargs) + <span class="hljs-string">'&lt;/%s&gt;'</span> % tag
        <span class="hljs-keyword">return</span> wrapped
    <span class="hljs-keyword">return</span> decorator

<span class="hljs-meta">@html_deco(<span class="hljs-params"><span class="hljs-string">'b'</span></span>)</span>
<span class="hljs-meta">@html_deco(<span class="hljs-params"><span class="hljs-string">'i'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">whom=<span class="hljs-string">''</span></span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello'</span> + (<span class="hljs-string">' '</span> + whom) <span class="hljs-keyword">if</span> whom <span class="hljs-keyword">else</span> <span class="hljs-string">''</span>

<span class="hljs-built_in">print</span>(greet(<span class="hljs-string">'world'</span>))  <span class="hljs-comment"># -&gt; &lt;b&gt;&lt;i&gt;Hello world&lt;/i&gt;&lt;/b&gt;</span>
</code></pre>

<p>To make the code more readable, you can assign a more descriptive name to the factory-generated decorators:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">makebold = html_deco(<span class="hljs-string">'b'</span>)
makeitalic = html_deco(<span class="hljs-string">'i'</span>)

<span class="hljs-meta">@makebold</span>
<span class="hljs-meta">@makeitalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">whom=<span class="hljs-string">''</span></span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello'</span> + (<span class="hljs-string">' '</span> + whom) <span class="hljs-keyword">if</span> whom <span class="hljs-keyword">else</span> <span class="hljs-string">''</span>

<span class="hljs-built_in">print</span>(greet(<span class="hljs-string">'world'</span>))  <span class="hljs-comment"># -&gt; &lt;b&gt;&lt;i&gt;Hello world&lt;/i&gt;&lt;/b&gt;</span>
</code></pre>

<p>or even combine them like this:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">makebolditalic = <span class="hljs-keyword">lambda</span> fn: makebold(makeitalic(fn))

<span class="hljs-meta">@makebolditalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">whom=<span class="hljs-string">''</span></span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello'</span> + (<span class="hljs-string">' '</span> + whom) <span class="hljs-keyword">if</span> whom <span class="hljs-keyword">else</span> <span class="hljs-string">''</span>

<span class="hljs-built_in">print</span>(greet(<span class="hljs-string">'world'</span>))  <span class="hljs-comment"># -&gt; &lt;b&gt;&lt;i&gt;Hello world&lt;/i&gt;&lt;/b&gt;</span>
</code></pre>

<h3>Efficiency</h3>

<p>While the above examples do all work, the code generated involves a fair amount of overhead in the form of extraneous function calls when multiple decorators are applied at once. This may not matter, depending the exact usage (which might be I/O-bound, for instance).</p>

<p>If speed of the decorated function is important, the overhead can be kept to a single extra function call by writing a slightly different decorator factory-function which implements adding all the tags at once, so it can generate code that avoids the addtional function calls incurred by using separate decorators for each tag.</p>

<p>This requires more code in the decorator itself, but this only runs when it's being applied to function definitions, not later when they themselves are called. This also applies when creating more readable names by using <code>lambda</code> functions as previously illustrated. Sample:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">multi_html_deco</span>(<span class="hljs-params">*tags</span>):
    start_tags, end_tags = [], []
    <span class="hljs-keyword">for</span> tag <span class="hljs-keyword">in</span> tags:
        start_tags.append(<span class="hljs-string">'&lt;%s&gt;'</span> % tag)
        end_tags.append(<span class="hljs-string">'&lt;/%s&gt;'</span> % tag)
    start_tags = <span class="hljs-string">''</span>.join(start_tags)
    end_tags = <span class="hljs-string">''</span>.join(<span class="hljs-built_in">reversed</span>(end_tags))

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">fn</span>):
<span class="hljs-meta">        @wraps(<span class="hljs-params">fn</span>)</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">*args, **kwargs</span>):
            <span class="hljs-keyword">return</span> start_tags + fn(*args, **kwargs) + end_tags
        <span class="hljs-keyword">return</span> wrapped
    <span class="hljs-keyword">return</span> decorator

makebolditalic = multi_html_deco(<span class="hljs-string">'b'</span>, <span class="hljs-string">'i'</span>)

<span class="hljs-meta">@makebolditalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">whom=<span class="hljs-string">''</span></span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello'</span> + (<span class="hljs-string">' '</span> + whom) <span class="hljs-keyword">if</span> whom <span class="hljs-keyword">else</span> <span class="hljs-string">''</span>

<span class="hljs-built_in">print</span>(greet(<span class="hljs-string">'world'</span>))  <span class="hljs-comment"># -&gt; &lt;b&gt;&lt;i&gt;Hello world&lt;/i&gt;&lt;/b&gt;</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Another way of doing the same thing:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">bol</span>(<span class="hljs-title class_ inherited__">object</span>):
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, f</span>):
    self.f = f
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;b&gt;{}&lt;/b&gt;"</span>.<span class="hljs-built_in">format</span>(self.f())

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ita</span>(<span class="hljs-title class_ inherited__">object</span>):
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, f</span>):
    self.f = f
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;i&gt;{}&lt;/i&gt;"</span>.<span class="hljs-built_in">format</span>(self.f())

<span class="hljs-meta">@bol</span>
<span class="hljs-meta">@ita</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">sayhi</span>():
  <span class="hljs-keyword">return</span> <span class="hljs-string">'hi'</span>
</code></pre>

<p>Or, more flexibly:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">sty</span>(<span class="hljs-title class_ inherited__">object</span>):
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, tag</span>):
    self.tag = tag
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, f</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">newf</span>():
      <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;{tag}&gt;{res}&lt;/{tag}&gt;"</span>.<span class="hljs-built_in">format</span>(res=f(), tag=self.tag)
    <span class="hljs-keyword">return</span> newf

<span class="hljs-meta">@sty(<span class="hljs-params"><span class="hljs-string">'b'</span></span>)</span>
<span class="hljs-meta">@sty(<span class="hljs-params"><span class="hljs-string">'i'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">sayhi</span>():
  <span class="hljs-keyword">return</span> <span class="hljs-string">'hi'</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
  <h1>How can I make two decorators in Python that would do the following?</h1>
</blockquote>

<p>You want the following function, when called:</p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@makebold</span>
<span class="hljs-meta">@makeitalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello"</span>
</code></pre>
</blockquote>

<p>To return:</p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python">&lt;b&gt;&lt;i&gt;Hello&lt;/i&gt;&lt;/b&gt;
</code></pre>
</blockquote>

<h2>Simple solution</h2>

<p>To most simply do this, make decorators that return lambdas (anonymous functions) that close over the function (closures) and call it:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">makeitalic</span>(<span class="hljs-params">fn</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span>: <span class="hljs-string">'&lt;i&gt;'</span> + fn() + <span class="hljs-string">'&lt;/i&gt;'</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">makebold</span>(<span class="hljs-params">fn</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span>: <span class="hljs-string">'&lt;b&gt;'</span> + fn() + <span class="hljs-string">'&lt;/b&gt;'</span>
</code></pre>

<p>Now use them as desired:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@makebold</span>
<span class="hljs-meta">@makeitalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello'</span>
</code></pre>

<p>and now:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>say()
<span class="hljs-string">'&lt;b&gt;&lt;i&gt;Hello&lt;/i&gt;&lt;/b&gt;'</span>
</code></pre>

<h2>Problems with the simple solution</h2>

<p>But we seem to have nearly lost the original function. </p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>say
&lt;function &lt;<span class="hljs-keyword">lambda</span>&gt; at <span class="hljs-number">0x4ACFA070</span>&gt;
</code></pre>

<p>To find it, we'd need to dig into the closure of each lambda, one of which is buried in the other:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>say.__closure__[<span class="hljs-number">0</span>].cell_contents
&lt;function &lt;<span class="hljs-keyword">lambda</span>&gt; at <span class="hljs-number">0x4ACFA030</span>&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>say.__closure__[<span class="hljs-number">0</span>].cell_contents.__closure__[<span class="hljs-number">0</span>].cell_contents
&lt;function say at <span class="hljs-number">0x4ACFA730</span>&gt;
</code></pre>

<p>So if we put documentation on this function, or wanted to be able to decorate functions that take more than one argument, or we just wanted to know what function we were looking at in a debugging session, we need to do a bit more with our wrapper.</p>

<h2>Full featured solution - overcoming most of these problems</h2>

<p>We have the decorator <code>wraps</code> from the <code>functools</code> module in the standard library! </p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">makeitalic</span>(<span class="hljs-params">fn</span>):
    <span class="hljs-comment"># must assign/update attributes from wrapped function to wrapper</span>
    <span class="hljs-comment"># __module__, __name__, __doc__, and __dict__ by default</span>
<span class="hljs-meta">    @wraps(<span class="hljs-params">fn</span>) </span><span class="hljs-comment"># explicitly give function whose attributes it is applying</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">*args, **kwargs</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;i&gt;'</span> + fn(*args, **kwargs) + <span class="hljs-string">'&lt;/i&gt;'</span>
    <span class="hljs-keyword">return</span> wrapped

<span class="hljs-keyword">def</span> <span class="hljs-title function_">makebold</span>(<span class="hljs-params">fn</span>):
<span class="hljs-meta">    @wraps(<span class="hljs-params">fn</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">*args, **kwargs</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;b&gt;'</span> + fn(*args, **kwargs) + <span class="hljs-string">'&lt;/b&gt;'</span>
    <span class="hljs-keyword">return</span> wrapped
</code></pre>

<p>It is unfortunate that there's still some boilerplate, but this is about as simple as we can make it. </p>

<p>In Python 3, you also get <code>__qualname__</code> and <code>__annotations__</code> assigned by default.</p>

<p>So now:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@makebold</span>
<span class="hljs-meta">@makeitalic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():
    <span class="hljs-string">"""This function returns a bolded, italicized 'hello'"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello'</span>
</code></pre>

<p>And now:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>say
&lt;function say at <span class="hljs-number">0x14BB8F70</span>&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">help</span>(say)
Help on function say <span class="hljs-keyword">in</span> module __main__:

say(*args, **kwargs)
    This function returns a bolded, italicized <span class="hljs-string">'hello'</span>
</code></pre>

<h2>Conclusion</h2>

<p>So we see that <code>wraps</code> makes the wrapping function do almost everything except tell us exactly what the function takes as arguments. </p>

<p>There are other modules that may attempt to tackle the problem, but the solution is not yet in the standard library.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A decorator takes the function definition and creates a new function that executes this function and transforms the result.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@deco</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">do</span>():
    ...
</code></pre>

<p>is equivalent to:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">do = deco(do)
</code></pre>

<h2>Example:</h2>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">deco</span>(<span class="hljs-params">func</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>(<span class="hljs-params">letter</span>):
        <span class="hljs-keyword">return</span> func(letter).upper()  <span class="hljs-comment">#upper</span>
    <span class="hljs-keyword">return</span> inner
</code></pre>

<p>This</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@deco</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">do</span>(<span class="hljs-params">number</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">chr</span>(number)  <span class="hljs-comment"># number to letter</span>
</code></pre>

<p>is equivalent to this</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">do2</span>(<span class="hljs-params">number</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">chr</span>(number)

do2 = deco(do2)
</code></pre>

<p>65 &lt;=&gt; 'a'</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-built_in">print</span>(do(<span class="hljs-number">65</span>))
<span class="hljs-built_in">print</span>(do2(<span class="hljs-number">65</span>))
<span class="hljs-meta">&gt;&gt;&gt; </span>B
<span class="hljs-meta">&gt;&gt;&gt; </span>B
</code></pre>

<p>To understand the decorator, it is important to notice, that decorator created a new function do which is inner that executes function and transforms the result.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This answer has long been answered, but I thought I would share my Decorator class which makes writing new decorators easy and compact.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> abc <span class="hljs-keyword">import</span> ABCMeta, abstractclassmethod

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Decorator</span>(metaclass=ABCMeta):
    <span class="hljs-string">""" Acts as a base class for all decorators """</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.method = <span class="hljs-literal">None</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, method</span>):
        self.method = method
        <span class="hljs-keyword">return</span> self.call

<span class="hljs-meta">    @abstractclassmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">call</span>(<span class="hljs-params">self, *args, **kwargs</span>):
        <span class="hljs-keyword">return</span> self.method(*args, **kwargs)
</code></pre>

<p>For one I think this makes the behavior of decorators very clear, but it also makes it easy to define new decorators very concisely. For the example listed above, you could then solve it as:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MakeBold</span>(<span class="hljs-title class_ inherited__">Decorator</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">call</span>():
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;b&gt;"</span> + self.method() + <span class="hljs-string">"&lt;/b&gt;"</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MakeItalic</span>(<span class="hljs-title class_ inherited__">Decorator</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">call</span>():
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;i&gt;"</span> + self.method() + <span class="hljs-string">"&lt;/i&gt;"</span>

<span class="hljs-meta">@MakeBold()</span>
<span class="hljs-meta">@MakeItalic()</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say</span>():
   <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello"</span>
</code></pre>

<p>You could also use it to do more complex tasks, like for instance a decorator which automatically makes the function get applied recursively to all arguments in an iterator:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ApplyRecursive</span>(<span class="hljs-title class_ inherited__">Decorator</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, *types</span>):
        <span class="hljs-built_in">super</span>().__init__()
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">len</span>(types):
            types = (<span class="hljs-built_in">dict</span>, <span class="hljs-built_in">list</span>, <span class="hljs-built_in">tuple</span>, <span class="hljs-built_in">set</span>)
        self._types = types

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">call</span>(<span class="hljs-params">self, arg</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">dict</span> <span class="hljs-keyword">in</span> self._types <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(arg, <span class="hljs-built_in">dict</span>):
            <span class="hljs-keyword">return</span> {key: self.call(value) <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> arg.items()}

        <span class="hljs-keyword">if</span> <span class="hljs-built_in">set</span> <span class="hljs-keyword">in</span> self._types <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(arg, <span class="hljs-built_in">set</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">set</span>(self.call(value) <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> arg)

        <span class="hljs-keyword">if</span> <span class="hljs-built_in">tuple</span> <span class="hljs-keyword">in</span> self._types <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(arg, <span class="hljs-built_in">tuple</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">tuple</span>(self.call(value) <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> arg)

        <span class="hljs-keyword">if</span> <span class="hljs-built_in">list</span> <span class="hljs-keyword">in</span> self._types <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(arg, <span class="hljs-built_in">list</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(self.call(value) <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> arg)

        <span class="hljs-keyword">return</span> self.method(arg)


<span class="hljs-meta">@ApplyRecursive(<span class="hljs-params"><span class="hljs-built_in">tuple</span>, <span class="hljs-built_in">set</span>, <span class="hljs-built_in">dict</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">double</span>(<span class="hljs-params">arg</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>*arg

<span class="hljs-built_in">print</span>(double(<span class="hljs-number">1</span>))
<span class="hljs-built_in">print</span>(double({<span class="hljs-string">'a'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'b'</span>: <span class="hljs-number">2</span>}))
<span class="hljs-built_in">print</span>(double({<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}))
<span class="hljs-built_in">print</span>(double((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)))
<span class="hljs-built_in">print</span>(double([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]))
</code></pre>

<p>Which prints:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-number">2</span>
{<span class="hljs-string">'a'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'b'</span>: <span class="hljs-number">4</span>}
{<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>}
(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>)
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
</code></pre>

<p>Notice that this example didn't include the <code>list</code> type in the instantiation of the decorator, so in the final print statement the method gets applied to the list itself, not the elements of the list.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment">#decorator.py</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">makeHtmlTag</span>(<span class="hljs-params">tag, *args, **kwds</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">real_decorator</span>(<span class="hljs-params">fn</span>):
        css_class = <span class="hljs-string">" class='{0}'"</span>.<span class="hljs-built_in">format</span>(kwds[<span class="hljs-string">"css_class"</span>]) \
                                 <span class="hljs-keyword">if</span> <span class="hljs-string">"css_class"</span> <span class="hljs-keyword">in</span> kwds <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">*args, **kwds</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;"</span>+tag+css_class+<span class="hljs-string">"&gt;"</span> + fn(*args, **kwds) + <span class="hljs-string">"&lt;/"</span>+tag+<span class="hljs-string">"&gt;"</span>
        <span class="hljs-keyword">return</span> wrapped
    <span class="hljs-comment"># return decorator dont call it</span>
    <span class="hljs-keyword">return</span> real_decorator

<span class="hljs-meta">@makeHtmlTag(<span class="hljs-params">tag=<span class="hljs-string">"b"</span>, css_class=<span class="hljs-string">"bold_css"</span></span>)</span>
<span class="hljs-meta">@makeHtmlTag(<span class="hljs-params">tag=<span class="hljs-string">"i"</span>, css_class=<span class="hljs-string">"italic_css"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">"hello world"</span>

<span class="hljs-built_in">print</span> hello()
</code></pre>

<p>You can also write decorator in Class</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment">#class.py</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">makeHtmlTagClass</span>(<span class="hljs-title class_ inherited__">object</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, tag, css_class=<span class="hljs-string">""</span></span>):
        self._tag = tag
        self._css_class = <span class="hljs-string">" class='{0}'"</span>.<span class="hljs-built_in">format</span>(css_class) \
                                       <span class="hljs-keyword">if</span> css_class != <span class="hljs-string">""</span> <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, fn</span>):
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">*args, **kwargs</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;"</span> + self._tag + self._css_class+<span class="hljs-string">"&gt;"</span>  \
                       + fn(*args, **kwargs) + <span class="hljs-string">"&lt;/"</span> + self._tag + <span class="hljs-string">"&gt;"</span>
        <span class="hljs-keyword">return</span> wrapped

<span class="hljs-meta">@makeHtmlTagClass(<span class="hljs-params">tag=<span class="hljs-string">"b"</span>, css_class=<span class="hljs-string">"bold_css"</span></span>)</span>
<span class="hljs-meta">@makeHtmlTagClass(<span class="hljs-params">tag=<span class="hljs-string">"i"</span>, css_class=<span class="hljs-string">"italic_css"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>(<span class="hljs-params">name</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, {}"</span>.<span class="hljs-built_in">format</span>(name)

<span class="hljs-built_in">print</span> hello(<span class="hljs-string">"Your name"</span>)
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is a simple example of chaining decorators.  Note the last line - it shows what is going on under the covers.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment">############################################################</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#    decorators</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">############################################################</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">bold</span>(<span class="hljs-params">fn</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorate</span>():
        <span class="hljs-comment"># surround with bold tags before calling original function</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;b&gt;"</span> + fn() + <span class="hljs-string">"&lt;/b&gt;"</span>
    <span class="hljs-keyword">return</span> decorate


<span class="hljs-keyword">def</span> <span class="hljs-title function_">uk</span>(<span class="hljs-params">fn</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorate</span>():
        <span class="hljs-comment"># swap month and day</span>
        fields = fn().split(<span class="hljs-string">'/'</span>)
        date = fields[<span class="hljs-number">1</span>] + <span class="hljs-string">"/"</span> + fields[<span class="hljs-number">0</span>] + <span class="hljs-string">"/"</span> + fields[<span class="hljs-number">2</span>]
        <span class="hljs-keyword">return</span> date
    <span class="hljs-keyword">return</span> decorate

<span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">def</span> <span class="hljs-title function_">getDate</span>():
    now = datetime.datetime.now()
    <span class="hljs-keyword">return</span> <span class="hljs-string">"%d/%d/%d"</span> % (now.day, now.month, now.year)

<span class="hljs-meta">@bold</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">getBoldDate</span>(): 
    <span class="hljs-keyword">return</span> getDate()

<span class="hljs-meta">@uk</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">getUkDate</span>():
    <span class="hljs-keyword">return</span> getDate()

<span class="hljs-meta">@bold</span>
<span class="hljs-meta">@uk</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">getBoldUkDate</span>():
    <span class="hljs-keyword">return</span> getDate()


<span class="hljs-built_in">print</span> getDate()
<span class="hljs-built_in">print</span> getBoldDate()
<span class="hljs-built_in">print</span> getUkDate()
<span class="hljs-built_in">print</span> getBoldUkDate()
<span class="hljs-comment"># what is happening under the covers</span>
<span class="hljs-built_in">print</span> bold(uk(getDate))()
</code></pre>

<p>The output looks like:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-number">17</span>/<span class="hljs-number">6</span>/<span class="hljs-number">2013</span>
&lt;b&gt;<span class="hljs-number">17</span>/<span class="hljs-number">6</span>/<span class="hljs-number">2013</span>&lt;/b&gt;
<span class="hljs-number">6</span>/<span class="hljs-number">17</span>/<span class="hljs-number">2013</span>
&lt;b&gt;<span class="hljs-number">6</span>/<span class="hljs-number">17</span>/<span class="hljs-number">2013</span>&lt;/b&gt;
&lt;b&gt;<span class="hljs-number">6</span>/<span class="hljs-number">17</span>/<span class="hljs-number">2013</span>&lt;/b&gt;
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Speaking of the counter example - as given above, the counter will be shared between all functions that use the decorator:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">counter</span>(<span class="hljs-params">func</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">*args, **kws</span>):
        <span class="hljs-built_in">print</span> <span class="hljs-string">'Called #%i'</span> % wrapped.count
        wrapped.count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> func(*args, **kws)
    wrapped.count = <span class="hljs-number">0</span>
    <span class="hljs-keyword">return</span> wrapped
</code></pre>

<p>That way, your decorator can be reused for different functions (or used to decorate the same function multiple times: <code>func_counter1 = counter(func); func_counter2 = counter(func)</code>), and the counter variable will remain private to each. </p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>Decorate functions with different number of arguments:</h1>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">frame_tests</span>(<span class="hljs-params">fn</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args</span>):
        <span class="hljs-built_in">print</span> <span class="hljs-string">"\nStart: %s"</span> %(fn.__name__)
        fn(*args)
        <span class="hljs-built_in">print</span> <span class="hljs-string">"End: %s\n"</span> %(fn.__name__)
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@frame_tests</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_fn1</span>():
    <span class="hljs-built_in">print</span> <span class="hljs-string">"This is only a test!"</span>

<span class="hljs-meta">@frame_tests</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_fn2</span>(<span class="hljs-params">s1</span>):
    <span class="hljs-built_in">print</span> <span class="hljs-string">"This is only a test! %s"</span> %(s1)

<span class="hljs-meta">@frame_tests</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_fn3</span>(<span class="hljs-params">s1, s2</span>):
    <span class="hljs-built_in">print</span> <span class="hljs-string">"This is only a test! %s %s"</span> %(s1, s2)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    test_fn1()
    test_fn2(<span class="hljs-string">'OK!'</span>)
    test_fn3(<span class="hljs-string">'OK!'</span>, <span class="hljs-string">'Just a test!'</span>)
</code></pre>
<p>Result:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">Start: test_fn1  
This <span class="hljs-keyword">is</span> only a test!  
End: test_fn1  
  
  
Start: test_fn2  
This <span class="hljs-keyword">is</span> only a test! OK!  
End: test_fn2  
  
  
Start: test_fn3  
This <span class="hljs-keyword">is</span> only a test! OK! Just a test!  
End: test_fn3  
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="https://stackoverflow.com/a/739665/7262247">Paolo Bergantino's answer</a> has the great advantage of only using the stdlib, and works for this simple example where there are no <em>decorator</em> arguments nor <em>decorated function</em> arguments. </p>

<p>However it has 3 major limitations if you want to tackle more general cases:</p>

<ul>
<li>as already noted in several answers, you can not easily modify the code to <strong>add optional decorator arguments</strong>. For example creating a <code>makestyle(style='bold')</code> decorator is non-trivial.</li>
<li>besides, wrappers created with <code>@functools.wraps</code> <strong>do not preserve the signature</strong>, so if bad arguments are provided they will start executing, and might raise a different kind of error than the usual <code>TypeError</code>.</li>
<li>finally, it is quite difficult in wrappers created with <code>@functools.wraps</code> to <strong>access an argument based on its name</strong>. Indeed the argument can appear in <code>*args</code>, in <code>**kwargs</code>, or may not appear at all (if it is optional).</li>
</ul>

<p>I wrote <a href="https://smarie.github.io/python-decopatch/" rel="noreferrer"><code>decopatch</code></a> to solve the first issue, and wrote <a href="https://smarie.github.io/python-makefun/#signature-preserving-function-wrappers" rel="noreferrer"><code>makefun.wraps</code></a> to solve the other two. Note that <code>makefun</code> leverages the same trick than the famous <a href="https://github.com/micheles/decorator" rel="noreferrer"><code>decorator</code></a> lib.</p>

<p>This is how you would create a decorator with arguments, returning truly signature-preserving wrappers:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> decopatch <span class="hljs-keyword">import</span> function_decorator, DECORATED
<span class="hljs-keyword">from</span> makefun <span class="hljs-keyword">import</span> wraps

<span class="hljs-meta">@function_decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">makestyle</span>(<span class="hljs-params">st=<span class="hljs-string">'b'</span>, fn=DECORATED</span>):
    open_tag = <span class="hljs-string">"&lt;%s&gt;"</span> % st
    close_tag = <span class="hljs-string">"&lt;/%s&gt;"</span> % st

<span class="hljs-meta">    @wraps(<span class="hljs-params">fn</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">*args, **kwargs</span>):
        <span class="hljs-keyword">return</span> open_tag + fn(*args, **kwargs) + close_tag

    <span class="hljs-keyword">return</span> wrapped
</code></pre>

<p><code>decopatch</code> provides you with two other development styles that hide or show the various python concepts, depending on your preferences. The most compact style is the following:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> decopatch <span class="hljs-keyword">import</span> function_decorator, WRAPPED, F_ARGS, F_KWARGS

<span class="hljs-meta">@function_decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">makestyle</span>(<span class="hljs-params">st=<span class="hljs-string">'b'</span>, fn=WRAPPED, f_args=F_ARGS, f_kwargs=F_KWARGS</span>):
    open_tag = <span class="hljs-string">"&lt;%s&gt;"</span> % st
    close_tag = <span class="hljs-string">"&lt;/%s&gt;"</span> % st
    <span class="hljs-keyword">return</span> open_tag + fn(*f_args, **f_kwargs) + close_tag
</code></pre>

<p>In both cases you can check that the decorator works as expected:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@makestyle</span>
<span class="hljs-meta">@makestyle(<span class="hljs-params"><span class="hljs-string">'i'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>(<span class="hljs-params">who</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">"hello %s"</span> % who

<span class="hljs-keyword">assert</span> hello(<span class="hljs-string">'world'</span>) == <span class="hljs-string">'&lt;b&gt;&lt;i&gt;hello world&lt;/i&gt;&lt;/b&gt;'</span>    
</code></pre>

<p>Please refer to the <a href="https://smarie.github.io/python-decopatch/" rel="noreferrer">documentation</a> for details.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I add a case when you need to add custom parameters in decorator, pass it to final function and then work it with.</p>
<p>the very decorators:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">jwt_or_redirect</span>(<span class="hljs-params">fn</span>):
<span class="hljs-meta">  @wraps(<span class="hljs-params">fn</span>)</span>
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">*args, **kwargs</span>):
    ...
    <span class="hljs-keyword">return</span> fn(*args, **kwargs)
  <span class="hljs-keyword">return</span> decorator

<span class="hljs-keyword">def</span> <span class="hljs-title function_">jwt_refresh</span>(<span class="hljs-params">fn</span>):
<span class="hljs-meta">  @wraps(<span class="hljs-params">fn</span>)</span>
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">*args, **kwargs</span>):
    ...
    new_kwargs = {<span class="hljs-string">'refreshed_jwt'</span>: <span class="hljs-string">'xxxxx-xxxxxx'</span>}
    new_kwargs.update(kwargs)
    <span class="hljs-keyword">return</span> fn(*args, **new_kwargs)
  <span class="hljs-keyword">return</span> decorator
</code></pre>
<p>and the final function:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/'</span></span>)</span>
<span class="hljs-meta">@jwt_or_redirect</span>
<span class="hljs-meta">@jwt_refresh</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">home_page</span>(<span class="hljs-params">*args, **kwargs</span>):
  <span class="hljs-keyword">return</span> kwargs[<span class="hljs-string">'refreched_jwt'</span>]
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Yet another example of nested decorators for plotting an image:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> matplotlib.pylab <span class="hljs-keyword">as</span> plt

<span class="hljs-keyword">def</span> <span class="hljs-title function_">remove_axis</span>(<span class="hljs-params">func</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>(<span class="hljs-params">img, alpha</span>):
        plt.axis(<span class="hljs-string">'off'</span>)
        func(img, alpha)
    <span class="hljs-keyword">return</span> inner

<span class="hljs-keyword">def</span> <span class="hljs-title function_">plot_gray</span>(<span class="hljs-params">func</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>(<span class="hljs-params">img, alpha</span>):
        plt.gray()
        func(img, alpha)
    <span class="hljs-keyword">return</span> inner

<span class="hljs-meta">@remove_axis</span>
<span class="hljs-meta">@plot_gray</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">plot_image</span>(<span class="hljs-params">img, alpha</span>):
    plt.imshow(img, alpha=alpha)
    plt.show()
</code></pre>
<p>Now, let's show a color image first without axis labels using the nested decorators:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">plot_image(plt.imread(<span class="hljs-string">'lena_color.jpg'</span>), <span class="hljs-number">0.4</span>)
</code></pre>
<p><a href="https://i.stack.imgur.com/n6Pbn.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/n6Pbn.png" alt="enter image description here"></a></p>
<p>Next, let's show a gray scale image without axis labels using the nested decorators <code>remove_axis</code> and <code>plot_gray</code> (we need to <code>cmap='gray'</code>, otherwise the default colormap is <code>viridis</code>, so a grayscale image is by default not displayed in black and white shades, unless explicitly specified)</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">plot_image(plt.imread(<span class="hljs-string">'lena_bw.jpg'</span>), <span class="hljs-number">0.8</span>)
</code></pre>
<p><a href="https://i.stack.imgur.com/JAhvK.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/JAhvK.png" alt="enter image description here"></a></p>
<p>The above function call reduces down to the following nested call</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">remove_axis(plot_gray(plot_image))(img, alpha)
</code></pre>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;If you are not into long explanations, see \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/739654/understanding-python-decorators#answer-739665\u0026quot;\u0026gt;Paolo Bergantinos answer\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;h1\u0026gt;Decorator Basics\u0026lt;/h1\u0026gt;\n\u0026lt;h2\u0026gt;Pythons functions are objects\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;To understand decorators, you must first understand that functions are objects in Python. This has important consequences. Lets see why with a simple example :\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;shout\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;word=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;yes\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; word.capitalize()+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;!\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(shout())\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# outputs : \u0026apos;Yes!\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# As an object, you can assign the function to a variable like any other object \u0026lt;/span\u0026gt;\nscream = shout\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Notice we don\u0026apos;t use parentheses: we are not calling the function,\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# we are putting the function \u0026quot;shout\u0026quot; into the variable \u0026quot;scream\u0026quot;.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# It means you can then call \u0026quot;shout\u0026quot; from \u0026quot;scream\u0026quot;:\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(scream())\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# outputs : \u0026apos;Yes!\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# More than that, it means you can remove the old name \u0026apos;shout\u0026apos;,\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;nbsp;and the function will still be accessible from \u0026apos;scream\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;del\u0026lt;/span\u0026gt; shout\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(shout())\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; NameError \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; e:\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(e)\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: \u0026quot;name \u0026apos;shout\u0026apos; is not defined\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(scream())\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# outputs: \u0026apos;Yes!\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Keep this in mind. Well circle back to it shortly.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Another interesting property of Python functions is they can be defined inside another function!\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;talk\u0026lt;/span\u0026gt;():\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# You can define a function on the fly in \u0026quot;talk\u0026quot; ...\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;whisper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;word=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;yes\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; word.lower()+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;...\u0026quot;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# ... and use it right away!\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(whisper())\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# You call \u0026quot;talk\u0026quot;, that defines \u0026quot;whisper\u0026quot; EVERY TIME you call it, then\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# \u0026quot;whisper\u0026quot; is called in \u0026quot;talk\u0026quot;. \u0026lt;/span\u0026gt;\ntalk()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# outputs: \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# \u0026quot;yes...\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# But \u0026quot;whisper\u0026quot; DOES NOT EXIST outside \u0026quot;talk\u0026quot;:\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(whisper())\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; NameError \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; e:\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(e)\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs : \u0026quot;name \u0026apos;whisper\u0026apos; is not defined\u0026quot;*\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Python\u0026apos;s functions are objects\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Functions references\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Okay, still here? Now the fun part...\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Youve seen that functions are objects. Therefore, functions:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;can be assigned to a variable\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;can be defined in another function\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;That means that \u0026lt;strong\u0026gt;a function can \u0026lt;code\u0026gt;return\u0026lt;/code\u0026gt; another function\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getTalk\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;kind=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;shout\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# We define functions on the fly\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;shout\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;word=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;yes\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; word.capitalize()+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;!\u0026quot;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;whisper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;word=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;yes\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;) :\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; word.lower()+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;...\u0026quot;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Then we return one of them\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; kind == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;shout\u0026quot;\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# We don\u0026apos;t use \u0026quot;()\u0026quot;, we are not calling the function,\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# we are returning the function object\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; shout  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; whisper\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# How do you use this strange beast?\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Get the function and assign it to a variable\u0026lt;/span\u0026gt;\ntalk = getTalk()      \n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# You can see that \u0026quot;talk\u0026quot; is here a function object:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(talk)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs : \u0026amp;lt;function shout at 0xb7ea817c\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# The object is the one returned by the function:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(talk())\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs : Yes!\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# And you can even use it directly if you feel wild:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(getTalk(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;whisper\u0026quot;\u0026lt;/span\u0026gt;)())\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs : yes...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Theres more!\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you can \u0026lt;code\u0026gt;return\u0026lt;/code\u0026gt; a function, you can pass one as a parameter:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doSomethingBefore\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;): \n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I do something before then I call the function you gave me\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(func())\n\ndoSomethingBefore(scream)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I do something before then I call the function you gave me\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Yes!\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Well, you just have everything needed to understand decorators. You see, decorators are wrappers, which means that \u0026lt;strong\u0026gt;they let you execute code before and after the function they decorate\u0026lt;/strong\u0026gt; without modifying the function itself.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Handcrafted decorators\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;How youd do it manually:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# A decorator is a function that expects ANOTHER function as parameter\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;my_shiny_new_decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;a_function_to_decorate\u0026lt;/span\u0026gt;):\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Inside, the decorator defines a function on the fly: the wrapper.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# This function is going to be wrapped around the original function\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# so it can execute code before and after it.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;the_wrapper_around_the_original_function\u0026lt;/span\u0026gt;():\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Put here the code you want to be executed BEFORE the original function is called\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Before the function runs\u0026quot;\u0026lt;/span\u0026gt;)\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Call the function here (using parentheses)\u0026lt;/span\u0026gt;\n        a_function_to_decorate()\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Put here the code you want to be executed AFTER the original function is called\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;After the function runs\u0026quot;\u0026lt;/span\u0026gt;)\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# At this point, \u0026quot;a_function_to_decorate\u0026quot; HAS NEVER BEEN EXECUTED.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# We return the wrapper function we have just created.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# The wrapper contains the function and the code to execute before and after. Its ready to use!\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; the_wrapper_around_the_original_function\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Now imagine you create a function you don\u0026apos;t want to ever touch again.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;a_stand_alone_function\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am a stand alone function, don\u0026apos;t you dare modify me\u0026quot;\u0026lt;/span\u0026gt;)\n\na_stand_alone_function() \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: I am a stand alone function, don\u0026apos;t you dare modify me\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Well, you can decorate it to extend its behavior.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Just pass it to the decorator, it will wrap it dynamically in \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# any code you want and return you a new function ready to be used:\u0026lt;/span\u0026gt;\n\na_stand_alone_function_decorated = my_shiny_new_decorator(a_stand_alone_function)\na_stand_alone_function_decorated()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Before the function runs\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am a stand alone function, don\u0026apos;t you dare modify me\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#After the function runs\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Now, you probably want that every time you call \u0026lt;code\u0026gt;a_stand_alone_function\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;a_stand_alone_function_decorated\u0026lt;/code\u0026gt; is called instead. Thats easy, just overwrite \u0026lt;code\u0026gt;a_stand_alone_function\u0026lt;/code\u0026gt; with the function returned by \u0026lt;code\u0026gt;my_shiny_new_decorator\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;a_stand_alone_function = my_shiny_new_decorator(a_stand_alone_function)\na_stand_alone_function()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Before the function runs\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am a stand alone function, don\u0026apos;t you dare modify me\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#After the function runs\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Thats EXACTLY what decorators do!\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Decorators demystified\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;The previous example, using the decorator syntax:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@my_shiny_new_decorator\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;another_stand_alone_function\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Leave me alone\u0026quot;\u0026lt;/span\u0026gt;)\n\nanother_stand_alone_function()  \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:  \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Before the function runs\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Leave me alone\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#After the function runs\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Yes, thats all, its that simple. \u0026lt;code\u0026gt;@decorator\u0026lt;/code\u0026gt; is just a shortcut to:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;another_stand_alone_function = my_shiny_new_decorator(another_stand_alone_function)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Decorators are just a pythonic variant of the \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Decorator_pattern\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;decorator design pattern\u0026lt;/a\u0026gt;. There are several classic design patterns embedded in Python to ease development (like iterators).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Of course, you can accumulate decorators:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;bread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/\u0026apos;\u0026apos;\u0026apos;\u0026apos;\u0026apos;\u0026apos;\\\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;)\n        func()\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;\\______/\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ingredients\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#tomatoes#\u0026quot;\u0026lt;/span\u0026gt;)\n        func()\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;~salad~\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sandwich\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;food=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--ham--\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(food)\n\nsandwich()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: --ham--\u0026lt;/span\u0026gt;\nsandwich = bread(ingredients(sandwich))\nsandwich()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;lt;/\u0026apos;\u0026apos;\u0026apos;\u0026apos;\u0026apos;\u0026apos;\\\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# #tomatoes#\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# --ham--\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# ~salad~\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;lt;\\______/\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Using the Python decorator syntax:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@bread\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@ingredients\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sandwich\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;food=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--ham--\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(food)\n\nsandwich()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;lt;/\u0026apos;\u0026apos;\u0026apos;\u0026apos;\u0026apos;\u0026apos;\\\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# #tomatoes#\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# --ham--\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# ~salad~\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;lt;\\______/\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The order you set the decorators MATTERS:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@ingredients\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@bread\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;strange_sandwich\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;food=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--ham--\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(food)\n\nstrange_sandwich()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;##tomatoes#\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;lt;/\u0026apos;\u0026apos;\u0026apos;\u0026apos;\u0026apos;\u0026apos;\\\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# --ham--\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;lt;\\______/\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# ~salad~\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h1\u0026gt;Now: to answer the question...\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;As a conclusion, you can easily see how to answer the question:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# The decorator to make it bold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makebold\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# The new function the decorator returns\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Insertion of some code before and after\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + fn() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# The decorator to make it italic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makeitalic\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# The new function the decorator returns\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Insertion of some code before and after\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + fn() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeitalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(say())\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: \u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;hello\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# This is the exact equivalent to \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello\u0026quot;\u0026lt;/span\u0026gt;\nsay = makebold(makeitalic(say))\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(say())\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: \u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;hello\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;You can now just leave happy, or burn your brain a little bit more and see advanced uses of decorators.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h1\u0026gt;Taking decorators to the next level\u0026lt;/h1\u0026gt;\n\u0026lt;h2\u0026gt;Passing arguments to the decorated function\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Its not black magic, you just have to let the wrapper \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# pass the argument:\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;a_decorator_passing_arguments\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;function_to_decorate\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;a_wrapper_accepting_arguments\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;arg1, arg2\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I got args! Look: {0}, {1}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(arg1, arg2))\n        function_to_decorate(arg1, arg2)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; a_wrapper_accepting_arguments\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Since when you are calling the function returned by the decorator, you are\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# calling the wrapper, passing arguments to the wrapper will let it pass them to \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# the decorated function\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@a_decorator_passing_arguments\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;print_full_name\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;first_name, last_name\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;My name is {0} {1}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(first_name, last_name))\n    \nprint_full_name(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Peter\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Venkman\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I got args! Look: Peter Venkman\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#My name is Peter Venkman\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Decorating methods\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;One nifty thing about Python is that methods and functions are really the same.  The only difference is that methods expect that their first argument is a reference to the current object (\u0026lt;code\u0026gt;self\u0026lt;/code\u0026gt;).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;That means you can build a decorator for methods the same way! Just remember to take \u0026lt;code\u0026gt;self\u0026lt;/code\u0026gt; into consideration:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;method_friendly_decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;method_to_decorate\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, lie\u0026lt;/span\u0026gt;):\n        lie = lie - \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# very friendly, decrease age even more :-)\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; method_to_decorate(self, lie)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n    \n    \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Lucy\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;):\n    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        self.age = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;32\u0026lt;/span\u0026gt;\n    \n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @method_friendly_decorator\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sayYourAge\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, lie\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am {0}, what did you think?\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(self.age + lie))\n        \nl = Lucy()\nl.sayYourAge(-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: I am 26, what did you think?\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If youre making general-purpose decorator--one youll apply to any function or method, no matter its arguments--then just use \u0026lt;code\u0026gt;*args, **kwargs\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;a_decorator_passing_arbitrary_arguments\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;function_to_decorate\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# The wrapper accepts any arguments\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;a_wrapper_accepting_arbitrary_arguments\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Do I have args?:\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(args)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(kwargs)\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Then you unpack the arguments, here *args, **kwargs\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# If you are not familiar with unpacking, check:\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/\u0026lt;/span\u0026gt;\n        function_to_decorate(*args, **kwargs)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; a_wrapper_accepting_arbitrary_arguments\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@a_decorator_passing_arbitrary_arguments\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;function_with_no_argument\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Python is cool, no argument here.\u0026quot;\u0026lt;/span\u0026gt;)\n\nfunction_with_no_argument()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Do I have args?:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#()\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#{}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Python is cool, no argument here.\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@a_decorator_passing_arbitrary_arguments\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;function_with_arguments\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;a, b, c\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(a, b, c)\n    \nfunction_with_arguments(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Do I have args?:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#(1, 2, 3)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#{}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#1 2 3 \u0026lt;/span\u0026gt;\n \n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@a_decorator_passing_arbitrary_arguments\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;function_with_named_arguments\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;a, b, c, platypus=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Why not ?\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Do {0}, {1} and {2} like platypus? {3}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(a, b, c, platypus))\n\nfunction_with_named_arguments(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Bill\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Linus\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Steve\u0026quot;\u0026lt;/span\u0026gt;, platypus=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Indeed!\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Do I have args ? :\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#(\u0026apos;Bill\u0026apos;, \u0026apos;Linus\u0026apos;, \u0026apos;Steve\u0026apos;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#{\u0026apos;platypus\u0026apos;: \u0026apos;Indeed!\u0026apos;}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Do Bill, Linus and Steve like platypus? Indeed!\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Mary\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;):\n    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        self.age = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;31\u0026lt;/span\u0026gt;\n    \n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @a_decorator_passing_arbitrary_arguments\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sayYourAge\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, lie=-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;): \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# You can now add a default value\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am {0}, what did you think?\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(self.age + lie))\n\nm = Mary()\nm.sayYourAge()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Do I have args?:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#(\u0026amp;lt;__main__.Mary object at 0xb7d303ac\u0026amp;gt;,)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#{}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am 28, what did you think?\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Passing arguments to the decorator\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Great, now what would you say about passing arguments to the decorator itself?\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This can get somewhat twisted, since a decorator must accept a function as an argument. Therefore, you cannot pass the decorated functions arguments directly to the decorator.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Before rushing to the solution, lets write a little reminder:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Decorators are ORDINARY functions\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;my_decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am an ordinary function\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am function returned by the decorator\u0026quot;\u0026lt;/span\u0026gt;)\n        func()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Therefore, you can call it without any \u0026quot;@\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;lazy_function\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;zzzzzzzz\u0026quot;\u0026lt;/span\u0026gt;)\n\ndecorated_function = my_decorator(lazy_function)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: I am an ordinary function\u0026lt;/span\u0026gt;\n            \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# It outputs \u0026quot;I am an ordinary function\u0026quot;, because thats just what you do:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# calling a function. Nothing magic.\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@my_decorator\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;lazy_function\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;zzzzzzzz\u0026quot;\u0026lt;/span\u0026gt;)\n    \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: I am an ordinary function\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Its exactly the same. \u0026quot;\u0026lt;code\u0026gt;my_decorator\u0026lt;/code\u0026gt;\u0026quot; is called. So when you \u0026lt;code\u0026gt;@my_decorator\u0026lt;/code\u0026gt;, you are telling Python to call the function \u0026apos;labelled by the variable \u0026quot;\u0026lt;code\u0026gt;my_decorator\u0026lt;/code\u0026gt;\u0026quot;\u0026apos;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This is important! The label you give can point directly to the decorator\u0026lt;strong\u0026gt;or not\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Lets get evil. \u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorator_maker\u0026lt;/span\u0026gt;():\n    \n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I make decorators! I am executed only once: \u0026quot;\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;when you make me create a decorator.\u0026quot;\u0026lt;/span\u0026gt;)\n            \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;my_decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n        \n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am a decorator! I am executed only when you decorate a function.\u0026quot;\u0026lt;/span\u0026gt;)\n               \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;():\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am the wrapper around the decorated function. \u0026quot;\u0026lt;/span\u0026gt;\n                  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am called when you call the decorated function. \u0026quot;\u0026lt;/span\u0026gt;\n                  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;As the wrapper, I return the RESULT of the decorated function.\u0026quot;\u0026lt;/span\u0026gt;)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; func()\n        \n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;As the decorator, I return the wrapped function.\u0026quot;\u0026lt;/span\u0026gt;)\n        \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n    \n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;As a decorator maker, I return a decorator\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; my_decorator\n            \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Lets create a decorator. Its just a new function after all.\u0026lt;/span\u0026gt;\nnew_decorator = decorator_maker()       \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I make decorators! I am executed only once: when you make me create a decorator.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#As a decorator maker, I return a decorator\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Then we decorate the function\u0026lt;/span\u0026gt;\n            \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorated_function\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am the decorated function.\u0026quot;\u0026lt;/span\u0026gt;)\n   \ndecorated_function = new_decorator(decorated_function)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am a decorator! I am executed only when you decorate a function.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#As the decorator, I return the wrapped function\u0026lt;/span\u0026gt;\n     \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Lets call the function:\u0026lt;/span\u0026gt;\ndecorated_function()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the wrapper around the decorated function. I am called when you call the decorated function.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#As the wrapper, I return the RESULT of the decorated function.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the decorated function.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;No surprise here.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Lets do EXACTLY the same thing, but skip all the pesky intermediate variables:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorated_function\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am the decorated function.\u0026quot;\u0026lt;/span\u0026gt;)\ndecorated_function = decorator_maker()(decorated_function)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I make decorators! I am executed only once: when you make me create a decorator.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#As a decorator maker, I return a decorator\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am a decorator! I am executed only when you decorate a function.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#As the decorator, I return the wrapped function.\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Finally:\u0026lt;/span\u0026gt;\ndecorated_function()    \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the wrapper around the decorated function. I am called when you call the decorated function.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#As the wrapper, I return the RESULT of the decorated function.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the decorated function.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Lets make it \u0026lt;em\u0026gt;even shorter\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@decorator_maker()\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorated_function\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am the decorated function.\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I make decorators! I am executed only once: when you make me create a decorator.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#As a decorator maker, I return a decorator\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am a decorator! I am executed only when you decorate a function.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#As the decorator, I return the wrapped function.\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Eventually: \u0026lt;/span\u0026gt;\ndecorated_function()    \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the wrapper around the decorated function. I am called when you call the decorated function.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#As the wrapper, I return the RESULT of the decorated function.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the decorated function.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Hey, did you see that? We used a function call with the \u0026quot;\u0026lt;code\u0026gt;@\u0026lt;/code\u0026gt;\u0026quot; syntax! :-)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So, back to decorators with arguments. If we can use functions to generate the decorator on the fly, we can pass arguments to that function, right?\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorator_maker_with_arguments\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;decorator_arg1, decorator_arg2\u0026lt;/span\u0026gt;):\n    \n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I make decorators! And I accept arguments: {0}, {1}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(decorator_arg1, decorator_arg2))\n            \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;my_decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# The ability to pass arguments here is a gift from closures.\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# If you are not comfortable with closures, you can assume its ok,\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# or read: https://stackoverflow.com/questions/13857/can-you-explain-closures-as-they-relate-to-python\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am the decorator. Somehow you passed me arguments: {0}, {1}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(decorator_arg1, decorator_arg2))\n               \n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Don\u0026apos;t confuse decorator arguments and function arguments!\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;function_arg1, function_arg2\u0026lt;/span\u0026gt;) :\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am the wrapper around the decorated function.\\n\u0026quot;\u0026lt;/span\u0026gt;\n                  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I can access all the variables\\n\u0026quot;\u0026lt;/span\u0026gt;\n                  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\t- from the decorator: {0} {1}\\n\u0026quot;\u0026lt;/span\u0026gt;\n                  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\t- from the function call: {2} {3}\\n\u0026quot;\u0026lt;/span\u0026gt;\n                  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Then I can pass them to the decorated function\u0026quot;\u0026lt;/span\u0026gt;\n                  .\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(decorator_arg1, decorator_arg2,\n                          function_arg1, function_arg2))\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; func(function_arg1, function_arg2)\n        \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; my_decorator\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@decorator_maker_with_arguments(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Leonard\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Sheldon\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorated_function_with_arguments\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;function_arg1, function_arg2\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am the decorated function and only knows about my arguments: {0}\u0026quot;\u0026lt;/span\u0026gt;\n           \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; {1}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(function_arg1, function_arg2))\n          \ndecorated_function_with_arguments(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Rajesh\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Howard\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I make decorators! And I accept arguments: Leonard Sheldon\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the decorator. Somehow you passed me arguments: Leonard Sheldon\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the wrapper around the decorated function. \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I can access all the variables \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#   - from the decorator: Leonard Sheldon \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#   - from the function call: Rajesh Howard \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Then I can pass them to the decorated function\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the decorated function and only knows about my arguments: Rajesh Howard\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Here it is: a decorator with arguments. Arguments can be set as variable:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;c1 = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Penny\u0026quot;\u0026lt;/span\u0026gt;\nc2 = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Leslie\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@decorator_maker_with_arguments(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Leonard\u0026quot;\u0026lt;/span\u0026gt;, c1\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorated_function_with_arguments\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;function_arg1, function_arg2\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am the decorated function and only knows about my arguments:\u0026quot;\u0026lt;/span\u0026gt;\n           \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; {0} {1}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(function_arg1, function_arg2))\n\ndecorated_function_with_arguments(c2, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Howard\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I make decorators! And I accept arguments: Leonard Penny\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the decorator. Somehow you passed me arguments: Leonard Penny\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the wrapper around the decorated function. \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I can access all the variables \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#   - from the decorator: Leonard Penny \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#   - from the function call: Leslie Howard \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Then I can pass them to the decorated function\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#I am the decorated function and only know about my arguments: Leslie Howard\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;As you can see, you can pass arguments to the decorator like any function using this trick. You can even use \u0026lt;code\u0026gt;*args, **kwargs\u0026lt;/code\u0026gt; if you wish. But remember decorators are called \u0026lt;strong\u0026gt;only once\u0026lt;/strong\u0026gt;. Just when Python imports the script. You can\u0026apos;t dynamically set the arguments afterwards. When you do \u0026quot;import x\u0026quot;, \u0026lt;strong\u0026gt;the function is already decorated\u0026lt;/strong\u0026gt;, so you can\u0026apos;t\nchange anything.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h1\u0026gt;Lets practice: decorating a decorator\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;Okay, as a bonus, I\u0026apos;ll give you a snippet to make any decorator accept generically any argument. After all, in order to accept arguments, we created our decorator using another function.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;We wrapped the decorator.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Anything else we saw recently that wrapped function?\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Oh yes, decorators!\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Lets have some fun and write a decorator for the decorators:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorator_with_args\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;decorator_to_enhance\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot; \n    This function is supposed to be used as a decorator.\n    It must decorate an other function, that is intended to be used as a decorator.\n    Take a cup of coffee.\n    It will allow any decorator to accept an arbitrary number of arguments,\n    saving you the headache to remember how to do that every time.\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    \n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# We use the same trick we did to pass arguments\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorator_maker\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n       \n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# We create on the fly a decorator that accepts only a function\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# but keeps the passed arguments from the maker.\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorator_wrapper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n       \n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# We return the result of the original decorator, which, after all, \u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# IS JUST AN ORDINARY FUNCTION (which returns a function).\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Only pitfall: the decorator must have this specific signature or it won\u0026apos;t work:\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; decorator_to_enhance(func, *args, **kwargs)\n        \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; decorator_wrapper\n    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; decorator_maker\n       \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;It can be used as follows:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# You create the function you will use as a decorator. And stick a decorator on it :-)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Don\u0026apos;t forget, the signature is \u0026quot;decorator(func, *args, **kwargs)\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@decorator_with_args \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorated_decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func, *args, **kwargs\u0026lt;/span\u0026gt;): \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;function_arg1, function_arg2\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Decorated with {0} {1}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(args, kwargs))\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; func(function_arg1, function_arg2)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n    \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Then you decorate the functions you wish with your brand new decorated decorator.\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@decorated_decorator(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;42\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;404\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1024\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorated_function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;function_arg1, function_arg2\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello {0} {1}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(function_arg1, function_arg2))\n\ndecorated_function(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Universe and\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;everything\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Decorated with (42, 404, 1024) {}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Hello Universe and everything\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Whoooot!\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I know, the last time you had this feeling, it was after listening a guy saying: \u0026quot;before understanding recursion, you must first understand recursion\u0026quot;. But now, don\u0026apos;t you feel good about mastering this?\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h1\u0026gt;Best practices: decorators\u0026lt;/h1\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Decorators were introduced in Python 2.4, so be sure your code will be run on \u0026amp;gt;= 2.4.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Decorators slow down the function call. Keep that in mind.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;You cannot un-decorate a function.\u0026lt;/strong\u0026gt; (There \u0026lt;em\u0026gt;are\u0026lt;/em\u0026gt; hacks to create decorators that can be removed, but nobody uses them.) So once a function is decorated, its decorated \u0026lt;em\u0026gt;for all the code\u0026lt;/em\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Decorators wrap functions, which can make them hard to debug.  (This gets better from Python \u0026amp;gt;= 2.5; see below.)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;functools\u0026lt;/code\u0026gt; module was introduced in Python 2.5. It includes the function \u0026lt;code\u0026gt;functools.wraps()\u0026lt;/code\u0026gt;, which copies the name, module, and docstring of the decorated function to its wrapper.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;(Fun fact: \u0026lt;code\u0026gt;functools.wraps()\u0026lt;/code\u0026gt; is a decorator! )\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# For debugging, the stacktrace prints you the function __name__\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foo\u0026quot;\u0026lt;/span\u0026gt;)\n    \n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(foo.__name__)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: foo\u0026lt;/span\u0026gt;\n    \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# With a decorator, it gets messy    \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;bar\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bar\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; func()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@bar\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foo\u0026quot;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(foo.__name__)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: wrapper\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# \u0026quot;functools\u0026quot; can help for that\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; functools\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;bar\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# We say that \u0026quot;wrapper\u0026quot;, is wrapping \u0026quot;func\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# and the magic begins\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @functools.wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bar\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; func()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@bar\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foo\u0026quot;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(foo.__name__)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs: foo\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h1\u0026gt;How can the decorators be useful?\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Now the big question:\u0026lt;/strong\u0026gt; What can I use decorators for?\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Seem cool and powerful, but a practical example would be great. Well, there are 1000 possibilities. Classic uses are extending a function behavior from an external lib (you can\u0026apos;t modify it), or for debugging (you don\u0026apos;t want to modify it because its temporary).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You can use them to extend several functions in a DRYs way, like so:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;benchmark\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;\n    A decorator that prints the time a function takes\n    to execute.\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; time\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n        t = time.clock()\n        res = func(*args, **kwargs)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;{0} {1}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(func.__name__, time.clock()-t))\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; res\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;logging\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;\n    A decorator that logs the activity of the script.\n    (it actually just prints it, but it could be logging!)\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n        res = func(*args, **kwargs)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;{0} {1} {2}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(func.__name__, args, kwargs))\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; res\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;counter\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;\n    A decorator that counts and prints the number of times a function has been executed\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n        wrapper.count = wrapper.count + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n        res = func(*args, **kwargs)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;{0} has been used: {1}x\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(func.__name__, wrapper.count))\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; res\n    wrapper.count = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@counter\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@benchmark\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@logging\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;reverse_string\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;reversed\u0026lt;/span\u0026gt;(string))\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(reverse_string(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Able was I ere I saw Elba\u0026quot;\u0026lt;/span\u0026gt;))\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(reverse_string(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;A man, a plan, a canoe, pasta, heros, rajahs, a coloratura, maps, snipe, percale, macaroni, a gag, a banana bag, a tan, a tag, a banana bag again (or a camel), a crepe, pins, Spam, a rut, a Rolo, cash, a jar, sore hats, a peon, a canal: Panama!\u0026quot;\u0026lt;/span\u0026gt;))\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#reverse_string (\u0026apos;Able was I ere I saw Elba\u0026apos;,) {}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#wrapper 0.0\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#wrapper has been used: 1x \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#ablE was I ere I saw elbA\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#reverse_string (\u0026apos;A man, a plan, a canoe, pasta, heros, rajahs, a coloratura, maps, snipe, percale, macaroni, a gag, a banana bag, a tan, a tag, a banana bag again (or a camel), a crepe, pins, Spam, a rut, a Rolo, cash, a jar, sore hats, a peon, a canal: Panama!\u0026apos;,) {}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#wrapper 0.0\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#wrapper has been used: 2x\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#!amanaP :lanac a ,noep a ,stah eros ,raj a ,hsac ,oloR a ,tur a ,mapS ,snip ,eperc a ,)lemac a ro( niaga gab ananab a ,gat a ,nat a ,gab ananab a ,gag a ,inoracam ,elacrep ,epins ,spam ,arutaroloc a ,shajar ,soreh ,atsap ,eonac a ,nalp a ,nam A\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Of course the good thing with decorators is that you can use them right away on almost anything without rewriting. DRY, I said:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@counter\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@benchmark\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@logging\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get_random_futurama_quote\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; urllib \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; urlopen\n    result = urlopen(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://subfusion.net/cgi-bin/quote.pl?quote=futurama\u0026quot;\u0026lt;/span\u0026gt;).read()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n        value = result.split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;br\u0026amp;gt;\u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;hr\u0026amp;gt;\u0026amp;lt;br\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;)[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;].split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;br\u0026amp;gt;\u0026amp;lt;br\u0026amp;gt;\u0026amp;lt;hr\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;)[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; value.strip()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;No, I\u0026apos;m ... doesn\u0026apos;t!\u0026quot;\u0026lt;/span\u0026gt;\n\n    \n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(get_random_futurama_quote())\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(get_random_futurama_quote())\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outputs:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#get_random_futurama_quote () {}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#wrapper 0.02\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#wrapper has been used: 1x\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#The laws of science be a harsh mistress.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#get_random_futurama_quote () {}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#wrapper 0.01\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#wrapper has been used: 2x\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Curse you, merciful Poseidon!\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Python itself provides several decorators: \u0026lt;code\u0026gt;property\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;staticmethod\u0026lt;/code\u0026gt;, etc.\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Django uses decorators to manage caching and view permissions.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Twisted to fake inlining asynchronous functions calls.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;This really is a large playground.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Check out \u0026lt;a href=\u0026quot;http://docs.python.org/reference/compound_stmts.html#function\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;the documentation\u0026lt;/a\u0026gt; to see how decorators work. Here is what you asked for:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; functools \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; wraps\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makebold\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + fn(*args, **kwargs) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makeitalic\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + fn(*args, **kwargs) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeitalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hello\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello world\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeitalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;s\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; s\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; hello()        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# returns \u0026quot;\u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;hello world\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; hello.__name__ \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# with functools.wraps() this returns \u0026quot;hello\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; log(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;hello\u0026apos;\u0026lt;/span\u0026gt;)   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# returns \u0026quot;\u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;hello\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Alternatively, you could write a factory function which return a decorator which wraps the return value of the decorated function in a tag passed to the factory function. For example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; functools \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; wraps\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrap_in_tag\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tag\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;factory\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;        @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorator\u0026lt;/span\u0026gt;():\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;%(tag)s\u0026amp;gt;%(rv)s\u0026amp;lt;/%(tag)s\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt; % (\n                {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;tag\u0026apos;\u0026lt;/span\u0026gt;: tag, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;rv\u0026apos;\u0026lt;/span\u0026gt;: func()})\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; decorator\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; factory\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This enables you to write:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@wrap_in_tag(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@wrap_in_tag(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;i\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;hello\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;makebold = wrap_in_tag(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;)\nmakeitalic = wrap_in_tag(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;i\u0026apos;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeitalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;hello\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Personally I would have written the decorator somewhat differently:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; functools \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; wraps\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrap_in_tag\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tag\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;factory\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;        @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; func(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;%(tag)s\u0026amp;gt;%(val)s\u0026amp;lt;/%(tag)s\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt; %\n                        {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;tag\u0026apos;\u0026lt;/span\u0026gt;: tag, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;val\u0026apos;\u0026lt;/span\u0026gt;: val})\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; decorator\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; factory\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;which would yield:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@wrap_in_tag(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@wrap_in_tag(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;i\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; val\nsay(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;hello\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Don\u0026apos;t forget the construction for which decorator syntax is a shorthand:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;say = wrap_in_tag(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;)(wrap_in_tag(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;i\u0026apos;\u0026lt;/span\u0026gt;)(say)))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It looks like the other people have already told you how to solve the problem. I hope this will help you understand what decorators are.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Decorators are just syntactical sugar.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@decorator\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;():\n    ...\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;expands to    \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;():\n    ...\nfunc = decorator(func)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;And of course you can return lambdas as well from a decorator function:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makebold\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;): \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + f() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makeitalic\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;): \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + f() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeitalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; say()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Python decorators add extra functionality to another function\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;An italics decorator could be like\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makeitalic\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;newFunc\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + fn() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; newFunc\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note that a function is defined inside a function.\nWhat it basically does is replace a function with the newly defined one. For example, I have this class\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt;:\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;bar\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;foobar\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi again\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Now say, I want both functions to print \u0026quot;---\u0026quot; after and before they are done.\nI could add a print \u0026quot;---\u0026quot; before and after each print statement.\nBut because I don\u0026apos;t like repeating myself, I will make a decorator\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addDashes\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;): \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# notice it takes a function as an argument\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;newFunction\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;): \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# define a new function\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;---\u0026quot;\u0026lt;/span\u0026gt;\n        fn(self) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# call the original function\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;---\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; newFunction\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Return the newly defined function - it will \u0026quot;replace\u0026quot; the original\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So now I can change my class to \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt;:\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @addDashes\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;bar\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @addDashes\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;foobar\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi again\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;For more on decorators, check\n\u0026lt;a href=\u0026quot;http://www.ibm.com/developerworks/linux/library/l-cpdecor.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://www.ibm.com/developerworks/linux/library/l-cpdecor.html\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You \u0026lt;em\u0026gt;could\u0026lt;/em\u0026gt; make two separate decorators that do what you want as illustrated directly below. Note the use of \u0026lt;code\u0026gt;*args, **kwargs\u0026lt;/code\u0026gt; in the declaration of the \u0026lt;code\u0026gt;wrapped()\u0026lt;/code\u0026gt; function which supports the decorated function having multiple arguments (which isn\u0026apos;t really necessary for the example \u0026lt;code\u0026gt;say()\u0026lt;/code\u0026gt; function, but is included for generality).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For similar reasons, the \u0026lt;code\u0026gt;functools.wraps\u0026lt;/code\u0026gt; decorator is used to change the meta attributes of the wrapped function to be those of the one being decorated. This makes error messages and embedded function documentation (\u0026lt;code\u0026gt;func.__doc__\u0026lt;/code\u0026gt;) be those of the decorated function instead of \u0026lt;code\u0026gt;wrapped()\u0026lt;/code\u0026gt;\u0026apos;s.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; functools \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; wraps\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makebold\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + fn(*args, **kwargs) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makeitalic\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + fn(*args, **kwargs) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeitalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Hello\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(say())  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# -\u0026amp;gt; \u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;Hello\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h2\u0026gt;Refinements\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;As you can see there\u0026apos;s a lot of duplicate code in these two decorators. Given this similarity it would be better for you to instead make a generic one that was actually a \u0026lt;em\u0026gt;decorator factory\u0026lt;/em\u0026gt;in other words, a decorator function that makes other decorators. That way there would be less code repetitionand allow the \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Don\u0026apos;t_repeat_yourself\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;DRY\u0026lt;/a\u0026gt; principle to be followed.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;html_deco\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tag\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;        @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;%s\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt; % tag + fn(*args, **kwargs) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/%s\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt; % tag\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; decorator\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@html_deco(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@html_deco(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;i\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;greet\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;whom=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Hello\u0026apos;\u0026lt;/span\u0026gt; + (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; \u0026apos;\u0026lt;/span\u0026gt; + whom) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; whom \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(greet(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;world\u0026apos;\u0026lt;/span\u0026gt;))  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# -\u0026amp;gt; \u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;Hello world\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;To make the code more readable, you can assign a more descriptive name to the factory-generated decorators:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;makebold = html_deco(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;)\nmakeitalic = html_deco(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;i\u0026apos;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeitalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;greet\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;whom=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Hello\u0026apos;\u0026lt;/span\u0026gt; + (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; \u0026apos;\u0026lt;/span\u0026gt; + whom) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; whom \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(greet(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;world\u0026apos;\u0026lt;/span\u0026gt;))  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# -\u0026amp;gt; \u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;Hello world\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or even combine them like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;makebolditalic = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; fn: makebold(makeitalic(fn))\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebolditalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;greet\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;whom=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Hello\u0026apos;\u0026lt;/span\u0026gt; + (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; \u0026apos;\u0026lt;/span\u0026gt; + whom) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; whom \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(greet(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;world\u0026apos;\u0026lt;/span\u0026gt;))  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# -\u0026amp;gt; \u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;Hello world\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h3\u0026gt;Efficiency\u0026lt;/h3\u0026gt;\n\n\u0026lt;p\u0026gt;While the above examples do all work, the code generated involves a fair amount of overhead in the form of extraneous function calls when multiple decorators are applied at once. This may not matter, depending the exact usage (which might be I/O-bound, for instance).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If speed of the decorated function is important, the overhead can be kept to a single extra function call by writing a slightly different decorator factory-function which implements adding all the tags at once, so it can generate code that avoids the addtional function calls incurred by using separate decorators for each tag.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This requires more code in the decorator itself, but this only runs when it\u0026apos;s being applied to function definitions, not later when they themselves are called. This also applies when creating more readable names by using \u0026lt;code\u0026gt;lambda\u0026lt;/code\u0026gt; functions as previously illustrated. Sample:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;multi_html_deco\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*tags\u0026lt;/span\u0026gt;):\n    start_tags, end_tags = [], []\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; tag \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; tags:\n        start_tags.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;%s\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt; % tag)\n        end_tags.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/%s\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt; % tag)\n    start_tags = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;.join(start_tags)\n    end_tags = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;.join(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;reversed\u0026lt;/span\u0026gt;(end_tags))\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;        @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; start_tags + fn(*args, **kwargs) + end_tags\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; decorator\n\nmakebolditalic = multi_html_deco(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;i\u0026apos;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebolditalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;greet\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;whom=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Hello\u0026apos;\u0026lt;/span\u0026gt; + (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; \u0026apos;\u0026lt;/span\u0026gt; + whom) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; whom \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(greet(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;world\u0026apos;\u0026lt;/span\u0026gt;))  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# -\u0026amp;gt; \u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;Hello world\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Another way of doing the same thing:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;bol\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;):\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, f\u0026lt;/span\u0026gt;):\n    self.f = f\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__call__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;b\u0026amp;gt;{}\u0026amp;lt;/b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(self.f())\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ita\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;):\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, f\u0026lt;/span\u0026gt;):\n    self.f = f\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__call__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;i\u0026amp;gt;{}\u0026amp;lt;/i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(self.f())\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@bol\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@ita\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sayhi\u0026lt;/span\u0026gt;():\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;hi\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or, more flexibly:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;sty\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;):\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, tag\u0026lt;/span\u0026gt;):\n    self.tag = tag\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__call__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, f\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;newf\u0026lt;/span\u0026gt;():\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;{tag}\u0026amp;gt;{res}\u0026amp;lt;/{tag}\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(res=f(), tag=self.tag)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; newf\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@sty(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@sty(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;i\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sayhi\u0026lt;/span\u0026gt;():\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;hi\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;h1\u0026gt;How can I make two decorators in Python that would do the following?\u0026lt;/h1\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;You want the following function, when called:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeitalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;To return:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;Hello\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;h2\u0026gt;Simple solution\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;To most simply do this, make decorators that return lambdas (anonymous functions) that close over the function (closures) and call it:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makeitalic\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;i\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt; + fn() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/i\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makebold\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;b\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt; + fn() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/b\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Now use them as desired:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeitalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Hello\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and now:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;say()\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;Hello\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h2\u0026gt;Problems with the simple solution\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;But we seem to have nearly lost the original function. \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;say\n\u0026amp;lt;function \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt;\u0026amp;gt; at \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x4ACFA070\u0026lt;/span\u0026gt;\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;To find it, we\u0026apos;d need to dig into the closure of each lambda, one of which is buried in the other:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;say.__closure__[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].cell_contents\n\u0026amp;lt;function \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt;\u0026amp;gt; at \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x4ACFA030\u0026lt;/span\u0026gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;say.__closure__[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].cell_contents.__closure__[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].cell_contents\n\u0026amp;lt;function say at \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x4ACFA730\u0026lt;/span\u0026gt;\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So if we put documentation on this function, or wanted to be able to decorate functions that take more than one argument, or we just wanted to know what function we were looking at in a debugging session, we need to do a bit more with our wrapper.\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;Full featured solution - overcoming most of these problems\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;We have the decorator \u0026lt;code\u0026gt;wraps\u0026lt;/code\u0026gt; from the \u0026lt;code\u0026gt;functools\u0026lt;/code\u0026gt; module in the standard library! \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; functools \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; wraps\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makeitalic\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# must assign/update attributes from wrapped function to wrapper\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# __module__, __name__, __doc__, and __dict__ by default\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;) \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# explicitly give function whose attributes it is applying\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;i\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt; + fn(*args, **kwargs) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/i\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makebold\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;b\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt; + fn(*args, **kwargs) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/b\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It is unfortunate that there\u0026apos;s still some boilerplate, but this is about as simple as we can make it. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In Python 3, you also get \u0026lt;code\u0026gt;__qualname__\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;__annotations__\u0026lt;/code\u0026gt; assigned by default.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So now:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makebold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeitalic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;This function returns a bolded, italicized \u0026apos;hello\u0026apos;\u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Hello\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And now:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;say\n\u0026amp;lt;function say at \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x14BB8F70\u0026lt;/span\u0026gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;help\u0026lt;/span\u0026gt;(say)\nHelp on function say \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; module __main__:\n\nsay(*args, **kwargs)\n    This function returns a bolded, italicized \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;hello\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h2\u0026gt;Conclusion\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;So we see that \u0026lt;code\u0026gt;wraps\u0026lt;/code\u0026gt; makes the wrapping function do almost everything except tell us exactly what the function takes as arguments. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;There are other modules that may attempt to tackle the problem, but the solution is not yet in the standard library.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;A decorator takes the function definition and creates a new function that executes this function and transforms the result.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@deco\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;do\u0026lt;/span\u0026gt;():\n    ...\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;is equivalent to:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;do = deco(do)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h2\u0026gt;Example:\u0026lt;/h2\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deco\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;inner\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;letter\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; func(letter).upper()  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#upper\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; inner\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@deco\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;do\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;chr\u0026lt;/span\u0026gt;(number)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# number to letter\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;is equivalent to this\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;do2\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;chr\u0026lt;/span\u0026gt;(number)\n\ndo2 = deco(do2)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;65 \u0026amp;lt;=\u0026amp;gt; \u0026apos;a\u0026apos;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(do(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;65\u0026lt;/span\u0026gt;))\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(do2(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;65\u0026lt;/span\u0026gt;))\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;B\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;B\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;To understand the decorator, it is important to notice, that decorator created a new function do which is inner that executes function and transforms the result.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This answer has long been answered, but I thought I would share my Decorator class which makes writing new decorators easy and compact.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; abc \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; ABCMeta, abstractclassmethod\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Decorator\u0026lt;/span\u0026gt;(metaclass=ABCMeta):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot; Acts as a base class for all decorators \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        self.method = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__call__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, method\u0026lt;/span\u0026gt;):\n        self.method = method\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; self.call\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @abstractclassmethod\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, *args, **kwargs\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; self.method(*args, **kwargs)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;For one I think this makes the behavior of decorators very clear, but it also makes it easy to define new decorators very concisely. For the example listed above, you could then solve it as:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MakeBold\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;Decorator\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + self.method() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MakeItalic\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;Decorator\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + self.method() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/i\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@MakeBold()\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@MakeItalic()\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;():\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You could also use it to do more complex tasks, like for instance a decorator which automatically makes the function get applied recursively to all arguments in an iterator:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ApplyRecursive\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;Decorator\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, *types\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;().__init__()\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(types):\n            types = (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;dict\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tuple\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;)\n        self._types = types\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, arg\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;dict\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; self._types \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(arg, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;dict\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; {key: self.call(value) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; key, value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; arg.items()}\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; self._types \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(arg, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(self.call(value) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; arg)\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tuple\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; self._types \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(arg, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tuple\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tuple\u0026lt;/span\u0026gt;(self.call(value) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; arg)\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; self._types \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(arg, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(self.call(value) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; arg)\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; self.method(arg)\n\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@ApplyRecursive(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tuple\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;dict\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;arg\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;*arg\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(double(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;))\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(double({\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;}))\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(double({\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;}))\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(double((\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;)))\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(double([\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Which prints:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n{\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;}\n{\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;}\n(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;)\n[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Notice that this example didn\u0026apos;t include the \u0026lt;code\u0026gt;list\u0026lt;/code\u0026gt; type in the instantiation of the decorator, so in the final print statement the method gets applied to the list itself, not the elements of the list.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#decorator.py\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makeHtmlTag\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tag, *args, **kwds\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;real_decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n        css_class = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; class=\u0026apos;{0}\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(kwds[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;css_class\u0026quot;\u0026lt;/span\u0026gt;]) \\\n                                 \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;css_class\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; kwds \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwds\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;\u0026quot;\u0026lt;/span\u0026gt;+tag+css_class+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + fn(*args, **kwds) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/\u0026quot;\u0026lt;/span\u0026gt;+tag+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# return decorator dont call it\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; real_decorator\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeHtmlTag(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tag=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;, css_class=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bold_css\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeHtmlTag(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tag=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;i\u0026quot;\u0026lt;/span\u0026gt;, css_class=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;italic_css\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hello\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello world\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; hello()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can also write decorator in Class\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#class.py\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;makeHtmlTagClass\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, tag, css_class=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n        self._tag = tag\n        self._css_class = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; class=\u0026apos;{0}\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(css_class) \\\n                                       \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; css_class != \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__call__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, fn\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;\u0026quot;\u0026lt;/span\u0026gt; + self._tag + self._css_class+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;  \\\n                       + fn(*args, **kwargs) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/\u0026quot;\u0026lt;/span\u0026gt; + self._tag + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeHtmlTagClass(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tag=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;, css_class=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bold_css\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makeHtmlTagClass(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tag=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;i\u0026quot;\u0026lt;/span\u0026gt;, css_class=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;italic_css\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hello\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello, {}\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(name)\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; hello(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Your name\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is a simple example of chaining decorators.  Note the last line - it shows what is going on under the covers.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;############################################################\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#    decorators\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;############################################################\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;bold\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorate\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# surround with bold tags before calling original function\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; + fn() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; decorate\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;uk\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorate\u0026lt;/span\u0026gt;():\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# swap month and day\u0026lt;/span\u0026gt;\n        fields = fn().split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/\u0026apos;\u0026lt;/span\u0026gt;)\n        date = fields[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/\u0026quot;\u0026lt;/span\u0026gt; + fields[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/\u0026quot;\u0026lt;/span\u0026gt; + fields[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; date\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; decorate\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; datetime\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getDate\u0026lt;/span\u0026gt;():\n    now = datetime.datetime.now()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%d/%d/%d\u0026quot;\u0026lt;/span\u0026gt; % (now.day, now.month, now.year)\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@bold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getBoldDate\u0026lt;/span\u0026gt;(): \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; getDate()\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@uk\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getUkDate\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; getDate()\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@bold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@uk\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getBoldUkDate\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; getDate()\n\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; getDate()\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; getBoldDate()\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; getUkDate()\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; getBoldUkDate()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# what is happening under the covers\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; bold(uk(getDate))()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The output looks like:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;17\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2013\u0026lt;/span\u0026gt;\n\u0026amp;lt;b\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;17\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2013\u0026lt;/span\u0026gt;\u0026amp;lt;/b\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;17\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2013\u0026lt;/span\u0026gt;\n\u0026amp;lt;b\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;17\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2013\u0026lt;/span\u0026gt;\u0026amp;lt;/b\u0026amp;gt;\n\u0026amp;lt;b\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;17\u0026lt;/span\u0026gt;/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2013\u0026lt;/span\u0026gt;\u0026amp;lt;/b\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Speaking of the counter example - as given above, the counter will be shared between all functions that use the decorator:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;counter\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kws\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Called #%i\u0026apos;\u0026lt;/span\u0026gt; % wrapped.count\n        wrapped.count += \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; func(*args, **kws)\n    wrapped.count = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;That way, your decorator can be reused for different functions (or used to decorate the same function multiple times: \u0026lt;code\u0026gt;func_counter1 = counter(func); func_counter2 = counter(func)\u0026lt;/code\u0026gt;), and the counter variable will remain private to each. \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h1\u0026gt;Decorate functions with different number of arguments:\u0026lt;/h1\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;frame_tests\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\nStart: %s\u0026quot;\u0026lt;/span\u0026gt; %(fn.__name__)\n        fn(*args)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;End: %s\\n\u0026quot;\u0026lt;/span\u0026gt; %(fn.__name__)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapper\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@frame_tests\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test_fn1\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;This is only a test!\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@frame_tests\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test_fn2\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;s1\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;This is only a test! %s\u0026quot;\u0026lt;/span\u0026gt; %(s1)\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@frame_tests\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test_fn3\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;s1, s2\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;This is only a test! %s %s\u0026quot;\u0026lt;/span\u0026gt; %(s1, s2)\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; __name__ == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;__main__\u0026quot;\u0026lt;/span\u0026gt;:\n    test_fn1()\n    test_fn2(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;OK!\u0026apos;\u0026lt;/span\u0026gt;)\n    test_fn3(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;OK!\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Just a test!\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Result:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;Start: test_fn1  \nThis \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; only a test!  \nEnd: test_fn1  \n  \n  \nStart: test_fn2  \nThis \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; only a test! OK!  \nEnd: test_fn2  \n  \n  \nStart: test_fn3  \nThis \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; only a test! OK! Just a test!  \nEnd: test_fn3  \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/739665/7262247\u0026quot;\u0026gt;Paolo Bergantino\u0026apos;s answer\u0026lt;/a\u0026gt; has the great advantage of only using the stdlib, and works for this simple example where there are no \u0026lt;em\u0026gt;decorator\u0026lt;/em\u0026gt; arguments nor \u0026lt;em\u0026gt;decorated function\u0026lt;/em\u0026gt; arguments. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;However it has 3 major limitations if you want to tackle more general cases:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;as already noted in several answers, you can not easily modify the code to \u0026lt;strong\u0026gt;add optional decorator arguments\u0026lt;/strong\u0026gt;. For example creating a \u0026lt;code\u0026gt;makestyle(style=\u0026apos;bold\u0026apos;)\u0026lt;/code\u0026gt; decorator is non-trivial.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;besides, wrappers created with \u0026lt;code\u0026gt;@functools.wraps\u0026lt;/code\u0026gt; \u0026lt;strong\u0026gt;do not preserve the signature\u0026lt;/strong\u0026gt;, so if bad arguments are provided they will start executing, and might raise a different kind of error than the usual \u0026lt;code\u0026gt;TypeError\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;finally, it is quite difficult in wrappers created with \u0026lt;code\u0026gt;@functools.wraps\u0026lt;/code\u0026gt; to \u0026lt;strong\u0026gt;access an argument based on its name\u0026lt;/strong\u0026gt;. Indeed the argument can appear in \u0026lt;code\u0026gt;*args\u0026lt;/code\u0026gt;, in \u0026lt;code\u0026gt;**kwargs\u0026lt;/code\u0026gt;, or may not appear at all (if it is optional).\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;I wrote \u0026lt;a href=\u0026quot;https://smarie.github.io/python-decopatch/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;decopatch\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to solve the first issue, and wrote \u0026lt;a href=\u0026quot;https://smarie.github.io/python-makefun/#signature-preserving-function-wrappers\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;makefun.wraps\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to solve the other two. Note that \u0026lt;code\u0026gt;makefun\u0026lt;/code\u0026gt; leverages the same trick than the famous \u0026lt;a href=\u0026quot;https://github.com/micheles/decorator\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;decorator\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; lib.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This is how you would create a decorator with arguments, returning truly signature-preserving wrappers:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; decopatch \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; function_decorator, DECORATED\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; makefun \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; wraps\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@function_decorator\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makestyle\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;st=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;, fn=DECORATED\u0026lt;/span\u0026gt;):\n    open_tag = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;%s\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; % st\n    close_tag = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/%s\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; % st\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;    @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;wrapped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; open_tag + fn(*args, **kwargs) + close_tag\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; wrapped\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;decopatch\u0026lt;/code\u0026gt; provides you with two other development styles that hide or show the various python concepts, depending on your preferences. The most compact style is the following:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; decopatch \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; function_decorator, WRAPPED, F_ARGS, F_KWARGS\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@function_decorator\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;makestyle\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;st=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;, fn=WRAPPED, f_args=F_ARGS, f_kwargs=F_KWARGS\u0026lt;/span\u0026gt;):\n    open_tag = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;%s\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; % st\n    close_tag = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/%s\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; % st\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; open_tag + fn(*f_args, **f_kwargs) + close_tag\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;In both cases you can check that the decorator works as expected:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makestyle\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@makestyle(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;i\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hello\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;who\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello %s\u0026quot;\u0026lt;/span\u0026gt; % who\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt; hello(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;world\u0026apos;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;hello world\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;    \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Please refer to the \u0026lt;a href=\u0026quot;https://smarie.github.io/python-decopatch/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;documentation\u0026lt;/a\u0026gt; for details.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I add a case when you need to add custom parameters in decorator, pass it to final function and then work it with.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;the very decorators:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;jwt_or_redirect\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;  @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n    ...\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; fn(*args, **kwargs)\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; decorator\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;jwt_refresh\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;  @wraps(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fn\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decorator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n    ...\n    new_kwargs = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;refreshed_jwt\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;xxxxx-xxxxxx\u0026apos;\u0026lt;/span\u0026gt;}\n    new_kwargs.update(kwargs)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; fn(*args, **new_kwargs)\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; decorator\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;and the final function:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@app.route(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@jwt_or_redirect\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@jwt_refresh\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;home_page\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*args, **kwargs\u0026lt;/span\u0026gt;):\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; kwargs[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;refreched_jwt\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Yet another example of nested decorators for plotting an image:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; matplotlib.pylab \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; plt\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;remove_axis\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;inner\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;img, alpha\u0026lt;/span\u0026gt;):\n        plt.axis(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;off\u0026apos;\u0026lt;/span\u0026gt;)\n        func(img, alpha)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; inner\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;plot_gray\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;inner\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;img, alpha\u0026lt;/span\u0026gt;):\n        plt.gray()\n        func(img, alpha)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; inner\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@remove_axis\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@plot_gray\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;plot_image\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;img, alpha\u0026lt;/span\u0026gt;):\n    plt.imshow(img, alpha=alpha)\n    plt.show()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Now, let\u0026apos;s show a color image first without axis labels using the nested decorators:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;plot_image(plt.imread(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;lena_color.jpg\u0026apos;\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.4\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/n6Pbn.png\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/n6Pbn.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Next, let\u0026apos;s show a gray scale image without axis labels using the nested decorators \u0026lt;code\u0026gt;remove_axis\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;plot_gray\u0026lt;/code\u0026gt; (we need to \u0026lt;code\u0026gt;cmap=\u0026apos;gray\u0026apos;\u0026lt;/code\u0026gt;, otherwise the default colormap is \u0026lt;code\u0026gt;viridis\u0026lt;/code\u0026gt;, so a grayscale image is by default not displayed in black and white shades, unless explicitly specified)\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;plot_image(plt.imread(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;lena_bw.jpg\u0026apos;\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.8\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/JAhvK.png\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/JAhvK.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The above function call reduces down to the following nested call\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;remove_axis(plot_gray(plot_image))(img, alpha)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":494,"title":"How to make function decorators and chain them together?","content":"\n                \n\u0026lt;p\u0026gt;How can I make two decorators in Python that would do the following?\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@make_bold\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@make_italic\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;say\u0026lt;/span\u0026gt;():\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;...which should return:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;b\u0026amp;gt;\u0026amp;lt;i\u0026amp;gt;Hello\u0026amp;lt;/i\u0026amp;gt;\u0026amp;lt;/b\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","slug":"how-to-make-function-decorators-and-chain-them-together-1657388180803","postType":"QUESTION","createdAt":"2022-07-09T17:36:20.000Z","updatedAt":"2022-07-09T17:36:20.000Z","tags":[{"id":2475,"name":"decorator","slug":"decorator","createdAt":"2022-07-09T17:36:20.000Z","updatedAt":"2022-07-09T17:36:20.000Z","Questions_Tags":{"questionId":494,"tagId":2475}},{"id":2476,"name":"python-decorators","slug":"python-decorators","createdAt":"2022-07-09T17:36:20.000Z","updatedAt":"2022-07-09T17:36:20.000Z","Questions_Tags":{"questionId":494,"tagId":2476}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-to-make-function-decorators-and-chain-them-together-1657388180803"},"buildId":"8pZkyd0U8-Y2Qf3QK9j7l","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>