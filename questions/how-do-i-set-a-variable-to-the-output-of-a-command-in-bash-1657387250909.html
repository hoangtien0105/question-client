<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>How do I set a variable to the output of a command in Bash? | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I have a pretty simple script that is something like the following:

#!/bin/bash

VAR1=&quot;$1&quot;
MOREF=&#x27;sudo run command against $VAR1 | grep name | cut -c7-&#x27;

echo $MOREF


When I run this script from the command line and pass it the arguments, I am not getting any output.  However, when I run the commands contained within the $MOREF variable, I am able to get output.

How can one take the results of a command that needs to be run within a script, save it to a variable, and then output that variable on the screen?
    "/><meta property="og:title" content="How do I set a variable to the output of a command in Bash? | Solutions Checker"/><meta property="og:description" content="I have a pretty simple script that is something like the following:

#!/bin/bash

VAR1=&quot;$1&quot;
MOREF=&#x27;sudo run command against $VAR1 | grep name | cut -c7-&#x27;

echo $MOREF


When I run this script from the command line and pass it the arguments, I am not getting any output.  However, when I run the commands contained within the $MOREF variable, I am able to get output.

How can one take the results of a command that needs to be run within a script, save it to a variable, and then output that variable on the screen?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How do I set a variable to the output of a command in Bash?","text":"I have a pretty simple script that is something like the following:\n\n#!/bin/bash\n\nVAR1=&quot;$1&quot;\nMOREF=&apos;sudo run command against $VAR1 | grep name | cut -c7-&apos;\n\necho $MOREF\n\n\nWhen I run this script from the command line and pass it the arguments, I am not getting any output.  However, when I run the commands contained within the $MOREF variable, I am able to get output.\n\nHow can one take the results of a command that needs to be run within a script, save it to a variable, and then output that variable on the screen?\n    ","answerCount":14,"upVoteCount":500,"suggestedAnswer":[{"text":"In addition to backticks `command`, command substitution can be done with $(command) or &quot;$(command)&quot;, which I find easier to read, and allows for nesting.\n\nOUTPUT=$(ls -1)\necho &quot;${OUTPUT}&quot;\n\nMULTILINE=$(ls \\\n   -1)\necho &quot;${MULTILINE}&quot;\n\n\nQuoting (&quot;) does matter to preserve multi-line variable values; it is optional on the right-hand side of an assignment, as word splitting is not performed, so OUTPUT=$(ls -1) would work fine.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"$(sudo run command)\n\n\nIf you&apos;re going to use an apostrophe, you need `, not &apos;. This character is called &quot;backticks&quot; (or &quot;grave accent&quot;):\n#!/bin/bash\n\nVAR1=&quot;$1&quot;\nVAR2=&quot;$2&quot;\n\nMOREF=`sudo run command against &quot;$VAR1&quot; | grep name | cut -c7-`\n\necho &quot;$MOREF&quot;\n\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Some Bash tricks I use to set variables from commands\nSorry, there is a loong answer, but as bash is a shell, where the main goal is to run other unix commands and react on result code and/or output, ( commands are often piped filter, etc... ).\nStoring command output in variables is something basic and fundamental.\nTherefore, depending on\n\ncompatibility (posix)\nkind of output (filter(s))\nnumber of variable to set (split or interpret)\nexecution time (monitoring)\nerror trapping\nrepeatability of request (see long running background process, further)\ninteractivity (considering user input while reading from another input file descriptor)\ndo I miss something?\n\nFirst simple, old (obsolet), and compatible way\nmyPi=`echo &apos;4*a(1)&apos; | bc -l`\necho $myPi \n3.14159265358979323844\n\nCompatible, second way\nAs nesting could become heavy, parenthesis was implemented for this\nmyPi=$(bc -l &lt;&lt;&lt;&apos;4*a(1)&apos;)\n\nUsing backticks in script is to be avoided today.\nNested sample:\nSysStarted=$(date -d &quot;$(ps ho lstart 1)&quot; +%s)\necho $SysStarted \n1480656334\n\nbash features\nReading more than one variable (with Bashisms)\ndf -k /\nFilesystem     1K-blocks   Used Available Use% Mounted on\n/dev/dm-0         999320 529020    401488  57% /\n\nIf I just want a used value:\narray=($(df -k /))\n\nyou could see an array variable:\ndeclare -p array\ndeclare -a array=&apos;([0]=&quot;Filesystem&quot; [1]=&quot;1K-blocks&quot; [2]=&quot;Used&quot; [3]=&quot;Available&quot; [\n4]=&quot;Use%&quot; [5]=&quot;Mounted&quot; [6]=&quot;on&quot; [7]=&quot;/dev/dm-0&quot; [8]=&quot;999320&quot; [9]=&quot;529020&quot; [10]=\n&quot;401488&quot; [11]=&quot;57%&quot; [12]=&quot;/&quot;)&apos;\n\nThen:\necho ${array[9]}\n529020\n\nBut I often use this:\n{ read -r _;read -r filesystem size using avail prct mountpoint ; } &lt; &lt;(df -k /)\necho $using\n529020\n\n( The first read _ will just drop header line. ) Here, in only one command, you will populate 6 different variables (shown by alphabetical order):\ndeclare -p avail filesystem mountpoint prct size using\ndeclare -- avail=&quot;401488&quot;\ndeclare -- filesystem=&quot;/dev/dm-0&quot;\ndeclare -- mountpoint=&quot;/&quot;\ndeclare -- prct=&quot;57%&quot;\ndeclare -- size=&quot;999320&quot;\ndeclare -- using=&quot;529020&quot;\n\nOr\n{ read -a head;varnames=(${head[@]//[K1% -]});varnames=(${head[@]//[K1% -]});\n  read ${varnames[@],,} ; } &lt; &lt;(LANG=C df -k /)\n\nThen:\ndeclare -p varnames ${varnames[@],,} \ndeclare -a varnames=([0]=&quot;Filesystem&quot; [1]=&quot;blocks&quot; [2]=&quot;Used&quot; [3]=&quot;Available&quot; [4]=&quot;Use&quot; [5]=&quot;Mounted&quot; [6]=&quot;on&quot;)\ndeclare -- filesystem=&quot;/dev/dm-0&quot;\ndeclare -- blocks=&quot;999320&quot;\ndeclare -- used=&quot;529020&quot;\ndeclare -- available=&quot;401488&quot;\ndeclare -- use=&quot;57%&quot;\ndeclare -- mounted=&quot;/&quot;\ndeclare -- on=&quot;&quot;\n\nOr even:\n{ read _ ; read filesystem dsk[{6,2,9}] prct mountpoint ; } &lt; &lt;(df -k /)\ndeclare -p mountpoint dsk\ndeclare -- mountpoint=&quot;/&quot;\ndeclare -a dsk=([2]=&quot;529020&quot; [6]=&quot;999320&quot; [9]=&quot;401488&quot;)\n\n(Note Used and Blocks is switched there: read ... dsk[6] dsk[2] dsk[9] ...)\n... will work with associative arrays too: read _ disk[total] disk[used] ...\nDedicated fd using unnamed fifo:\nThere is an elegent way! In this sample, I will read /etc/passwd file:\nusers=()\nwhile IFS=: read -u $list user pass uid gid name home bin ;do\n    ((uid&gt;=500)) &amp;&amp;\n        printf -v users[uid] &quot;%11d %7d %-20s %s\\n&quot; $uid $gid $user $home\ndone {list}&lt;/etc/passwd\n\nUsing this way (... read -u $list; ... {list}&lt;inputfile) leave STDIN free for other purposes, like user interaction.\nThen\necho -n &quot;${users[@]}&quot;\n       1000    1000 user         /home/user\n...\n      65534   65534 nobody       /nonexistent\n\nand\necho ${!users[@]}\n1000 ... 65534\n\necho -n &quot;${users[1000]}&quot;\n      1000    1000 user       /home/user\n\nThis could be used with static files or even /dev/tcp/xx.xx.xx.xx/yyy with x for ip address or hostname and y for port number or with the output of a command:\n{\n    read -u $list -a head          # read header in array `head`\n    varnames=(${head[@]//[K1% -]}) # drop illegal chars for variable names\n    while read -u $list ${varnames[@],,} ;do\n        ((pct=available*100/(available+used),pct&lt;10)) &amp;&amp;\n            printf &quot;WARN: FS: %-20s on %-14s %3d &lt;10 (Total: %11u, Use: %7s)\\n&quot; \\\n                &quot;${filesystem#*/mapper/}&quot; &quot;$mounted&quot; $pct $blocks &quot;$use&quot;\n     done\n } {list}&lt; &lt;(LANG=C df -k)\n\nAnd of course with inline documents:\nwhile IFS=\\; read -u $list -a myvar ;do\n    echo ${myvar[2]}\ndone {list}&lt;&lt;&quot;eof&quot;\nfoo;bar;baz\nalice;bob;charlie\n$cherry;$strawberry;$memberberries\neof\n\nPractical sample parsing CSV files:\nIn this answer to How to parse a CSV file in Bash?, I read a file by using an unnamed fifo, using exec {FD}&lt;&quot;$file&quot; syntax.\nAnd here is the same script, but using CSV as inline document.\nSample function for populating some variables:\n#!/bin/bash\n\ndeclare free=0 total=0 used=0 mpnt=&apos;??&apos;\n\ngetDiskStat() {\n    {\n        read _\n        read _ total used free _ mpnt\n    } &lt; &lt;(\n        df -k ${1:-/}\n    )\n}\n\ngetDiskStat $1\necho &quot;$mpnt: Tot:$total, used: $used, free: $free.&quot;\n\nNota: declare line is not required, just for readability.\nAbout sudo cmd | grep ... | cut ...\nshell=$(cat /etc/passwd | grep $USER | cut -d : -f 7)\necho $shell\n/bin/bash\n\n(Please avoid useless cat! So this is just one fork less:\nshell=$(grep $USER &lt;/etc/passwd | cut -d : -f 7)\n\nAll pipes (|) implies forks. Where another process have to be run, accessing disk, libraries calls and so on.\nSo using sed for sample, will limit subprocess to only one fork:\nshell=$(sed &lt;/etc/passwd &quot;s/^$USER:.*://p;d&quot;)\necho $shell\n\nAnd with Bashisms:\nBut for many actions, mostly on small files, Bash could do the job itself:\nwhile IFS=: read -a line ; do\n    [ &quot;$line&quot; = &quot;$USER&quot; ] &amp;&amp; shell=${line[6]}\n  done &lt;/etc/passwd\necho $shell\n/bin/bash\n\nor\nwhile IFS=: read loginname encpass uid gid fullname home shell;do\n    [ &quot;$loginname&quot; = &quot;$USER&quot; ] &amp;&amp; break\n  done &lt;/etc/passwd\necho $shell $loginname ...\n\nGoing further about variable splitting...\nHave a look at my answer to How do I split a string on a delimiter in Bash?\nAlternative: reducing forks by using backgrounded long-running tasks\nIn order to prevent multiple forks like\nmyPi=$(bc -l &lt;&lt;&lt;&apos;4*a(1)&apos;\nmyRay=12\nmyCirc=$(bc -l &lt;&lt;&lt;&quot; 2 * $myPi * $myRay &quot;)\n\nor\nmyStarted=$(date -d &quot;$(ps ho lstart 1)&quot; +%s)\nmySessStart=$(date -d &quot;$(ps ho lstart $$)&quot; +%s)\n\nThis work fine, but running many forks is heavy and slow.\nAnd commands like date and bc could make many operations, line by line!!\nSee:\nbc -l &lt;&lt;&lt;$&apos;3*4\\n5*6&apos;\n12\n30\n\ndate -f - +%s &lt; &lt;(ps ho lstart 1 $$)\n1516030449\n1517853288\n\nSo we could use a long running background process to make many jobs, without having to initiate a new fork for each request.\nYou could have a look how reducing forks make Mandelbrot bash, improve from more than eight hours to less than 5 seconds.\nUnder bash, there is a built-in function: coproc:\ncoproc bc -l\necho 4*3 &gt;&amp;${COPROC[1]}\nread -u $COPROC answer\necho $answer\n12\n\necho &gt;&amp;${COPROC[1]} &apos;pi=4*a(1)&apos;\nray=42.0\nprintf &gt;&amp;${COPROC[1]} &apos;2*pi*%s\\n&apos; $ray\nread -u $COPROC answer\necho $answer\n263.89378290154263202896\n\nprintf &gt;&amp;${COPROC[1]} &apos;pi*%s^2\\n&apos; $ray\nread -u $COPROC answer\necho $answer\n5541.76944093239527260816\n\nAs bc is ready, running in background and I/O are ready too, there is no delay, nothing to load, open, close, before or after operation. Only the operation himself! This become a lot quicker than having to fork to bc for each operation!\nBorder effect: While bc stay running, they will hold all registers, so some variables or functions could be defined at initialisation step, as first write to ${COPROC[1]}, just after starting the task (via coproc).\nInto a function newConnector\nYou may found my newConnector function on GitHub.Com or on my own site (Note on GitHub: there are two files on my site. Function and demo are bundled into one unique file which could be sourced for use or just run for demo.)\nSample:\nsource shell_connector.sh\n\ntty\n/dev/pts/20\n\nps --tty pts/20 fw\n    PID TTY      STAT   TIME COMMAND\n  29019 pts/20   Ss     0:00 bash\n  30745 pts/20   R+     0:00  \\_ ps --tty pts/20 fw\n\nnewConnector /usr/bin/bc &quot;-l&quot; &apos;3*4&apos; 12\n\nps --tty pts/20 fw\n    PID TTY      STAT   TIME COMMAND\n  29019 pts/20   Ss     0:00 bash\n  30944 pts/20   S      0:00  \\_ /usr/bin/bc -l\n  30952 pts/20   R+     0:00  \\_ ps --tty pts/20 fw\n\ndeclare -p PI\nbash: declare: PI: not found\n\nmyBc &apos;4*a(1)&apos; PI\ndeclare -p PI\ndeclare -- PI=&quot;3.14159265358979323844&quot;\n\nThe function myBc lets you use the background task with simple syntax.\nThen for date:\nnewConnector /bin/date &apos;-f - +%s&apos; @0 0\nmyDate &apos;2000-01-01&apos;\n  946681200\nmyDate &quot;$(ps ho lstart 1)&quot; boottime\nmyDate now now\nread utm idl &lt;/proc/uptime\nmyBc &quot;$now-$boottime&quot; uptime\nprintf &quot;%s\\n&quot; ${utm%%.*} $uptime\n  42134906\n  42134906\n\nps --tty pts/20 fw\n    PID TTY      STAT   TIME COMMAND\n  29019 pts/20   Ss     0:00 bash\n  30944 pts/20   S      0:00  \\_ /usr/bin/bc -l\n  32615 pts/20   S      0:00  \\_ /bin/date -f - +%s\n   3162 pts/20   R+     0:00  \\_ ps --tty pts/20 fw\n\nFrom there, if you want to end one of background processes, you just have to close its fd:\neval &quot;exec $DATEOUT&gt;&amp;-&quot;\neval &quot;exec $DATEIN&gt;&amp;-&quot;\nps --tty pts/20 fw\n    PID TTY      STAT   TIME COMMAND\n   4936 pts/20   Ss     0:00 bash\n   5256 pts/20   S      0:00  \\_ /usr/bin/bc -l\n   6358 pts/20   R+     0:00  \\_ ps --tty pts/20 fw\n\nwhich is not needed, because all fd close when the main process finishes.\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"As they have already indicated to you, you should use `backticks`.\nThe alternative proposed $(command) works as well, and it also easier to read, but note that it is valid only with Bash or KornShell (and shells derived from those),\nso if your scripts have to be really portable on various Unix systems, you should prefer the old backticks notation.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"I know three ways to do it:\n\n\nFunctions are suitable for such tasks:**\n\nfunc (){\n    ls -l\n}\n\n\nInvoke it by saying func.\nAlso another suitable solution could be eval:\n\nvar=&quot;ls -l&quot;\neval $var\n\nThe third one is using variables directly:\n\nvar=$(ls -l)\n\n    OR\n\nvar=`ls -l`\n\n\n\nYou can get the output of the third solution in a good way:\n\necho &quot;$var&quot;\n\n\nAnd also in a nasty way:\n\necho $var\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"Just to be different:\n\nMOREF=$(sudo run command against $VAR1 | grep name | cut -c7-)\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"When setting a variable make sure you have no spaces before and/or after the = sign. I literally spent an hour trying to figure this out, trying all kinds of solutions! This is not cool.\nCorrect:\nWTFF=`echo &quot;stuff&quot;`\necho &quot;Example: $WTFF&quot;\n\nWill Fail with error &quot;stuff: not found&quot; or similar\nWTFF= `echo &quot;stuff&quot;`\necho &quot;Example: $WTFF&quot;\n\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"If you want to do it with multiline/multiple command/s then you can do this:\n\noutput=$( bash &lt;&lt;EOF\n# Multiline/multiple command/s\nEOF\n)\n\n\nOr:\n\noutput=$(\n# Multiline/multiple command/s\n)\n\n\nExample:\n\n#!/bin/bash\noutput=&quot;$( bash &lt;&lt;EOF\necho first\necho second\necho third\nEOF\n)&quot;\necho &quot;$output&quot;\n\n\nOutput:\n\nfirst\nsecond\nthird\n\n\nUsing heredoc, you can simplify things pretty easily by breaking down your long single line code into a multiline one. Another example:\n\noutput=&quot;$( ssh -p $port $user@$domain &lt;&lt;EOF\n# Breakdown your long ssh command into multiline here.\nEOF\n)&quot;\n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"You need to use either\n\n$(command-here)\n\nor\n\n`command-here`\n\n\nExample\n\n#!/bin/bash\n\nVAR1=&quot;$1&quot;\nVAR2=&quot;$2&quot;\n\nMOREF=&quot;$(sudo run command against &quot;$VAR1&quot; | grep name | cut -c7-)&quot;\n\necho &quot;$MOREF&quot;\n\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"If the command that you are trying to execute fails, it would write the output onto the error stream and would then be printed out to the console.\n\nTo avoid it, you must redirect the error stream:\n\nresult=$(ls -l something_that_does_not_exist 2&gt;&amp;1)\n\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"This is another way and is good to use with some text editors that are unable to correctly highlight every intricate code you create:\n\nread -r -d &apos;&apos; str &lt; &lt;(cat somefile.txt)\necho &quot;${#str}&quot;\necho &quot;$str&quot;\n\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"You can use backticks (also known as accent graves) or $().\n\nLike:\n\nOUTPUT=$(x+2);\nOUTPUT=`x+2`;\n\n\nBoth have the same effect. But OUTPUT=$(x+2) is more readable and the latest one.\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"Here are two more ways: \n\nPlease keep in mind that space is very important in Bash. So, if you want your command to run, use as is without introducing any more spaces.\n\n\nThe following assigns harshil to L and then prints it\n\nL=$&quot;harshil&quot;\necho &quot;$L&quot;\n\nThe following assigns the output of the command tr to L2. tr is being operated on another variable, L1.\n\nL2=$(echo &quot;$L1&quot; | tr [:upper:] [:lower:])\n\n\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"Some may find this useful. \nInteger values in variable substitution, where the trick is using $(()) double brackets:\n\nN=3\nM=3\nCOUNT=$N-1\nARR[0]=3\nARR[1]=2\nARR[2]=4\nARR[3]=1\n\nwhile (( COUNT &lt; ${#ARR[@]} ))\ndo\n  ARR[$COUNT]=$((ARR[COUNT]*M))\n  (( COUNT=$COUNT+$N ))\ndone\n\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/9fb80f4eb9e2d3c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9fb80f4eb9e2d3c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-18d80dcb3110b1ad.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/532-fec3344a80918110.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/817-363561828babdd16.js" defer=""></script><script src="/_next/static/chunks/81-89fd2eaadd8354ed.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-16d8c84aea765d4e.js" defer=""></script><script src="/_next/static/D-Vv5KfwuaE883xCdWfex/_buildManifest.js" defer=""></script><script src="/_next/static/D-Vv5KfwuaE883xCdWfex/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.dlbxiY code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-344134f6-0"]{content:"dlbxiY,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo.svg" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-1657387250909#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-344134f6-0 dlbxiY flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-1657387250909">How do I set a variable to the output of a command in Bash?</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/command-line">command-line</a></div></div><div class="question-content mt-5">
                
<p>I have a pretty simple script that is something like the following:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-meta">#!/bin/bash</span>

VAR1=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
MOREF=<span class="hljs-string">'sudo run command against $VAR1 | grep name | cut -c7-'</span>

<span class="hljs-built_in">echo</span> <span class="hljs-variable">$MOREF</span>
</code></pre>

<p>When I run this script from the command line and pass it the arguments, I am not getting any output.  However, when I run the commands contained within the <code>$MOREF</code> variable, I am able to get output.</p>

<p>How can one take the results of a command that needs to be run within a script, save it to a variable, and then output that variable on the screen?</p>
    </div></div></div><div class="sc-344134f6-2 EUowZ"><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In addition to backticks <code>`command`</code>, <a href="http://www.gnu.org/software/bash/manual/bashref.html#Command-Substitution" rel="noreferrer">command substitution</a> can be done with <code>$(command)</code> or <code>"$(command)"</code>, which I find easier to read, and allows for nesting.</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">OUTPUT=$(<span class="hljs-built_in">ls</span> -1)
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">${OUTPUT}</span>"</span>

MULTILINE=$(<span class="hljs-built_in">ls</span> \
   -1)
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">${MULTILINE}</span>"</span>
</code></pre>

<p>Quoting (<code>"</code>) does matter to preserve <strong>multi-line variable values</strong>; it is optional on the right-hand side of an assignment, as <a href="https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Shell-Parameters" rel="noreferrer">word splitting is not performed</a>, so <code>OUTPUT=$(ls -1)</code> would work fine.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-none s-code-block"><code>$(sudo run command)
</code></pre>
<hr>
<p>If you're going to use an apostrophe, you need <code>`</code>, not <code>'</code>. This character is called "backticks" (or "grave accent"):</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-meta">#!/bin/bash</span>

VAR1=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
VAR2=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>

MOREF=`sudo run <span class="hljs-built_in">command</span> against <span class="hljs-string">"<span class="hljs-variable">$VAR1</span>"</span> | grep name | <span class="hljs-built_in">cut</span> -c7-`

<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$MOREF</span>"</span>
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>Some <a href="http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29" rel="noreferrer">Bash</a> tricks I use to set variables from commands</h2>
<p>Sorry, there is a loong answer, but as <a href="/questions/tagged/bash" class="post-tag" title="show questions tagged 'bash'" rel="tag">bash</a> is a <a href="/questions/tagged/shell" class="post-tag" title="show questions tagged 'shell'" rel="tag">shell</a>, where the main goal is to run other <a href="/questions/tagged/unix" class="post-tag" title="show questions tagged 'unix'" rel="tag">unix</a> commands and react on <em>result code</em> and/or <em>output</em>, ( commands are often piped <em>filter</em>, etc... ).</p>
<p>Storing command output in variables is something basic and fundamental.</p>
<p>Therefore, depending on</p>
<ul>
<li>compatibility (<a href="/questions/tagged/posix" class="post-tag" title="show questions tagged 'posix'" rel="tag">posix</a>)</li>
<li>kind of output (filter(s))</li>
<li>number of variable to set (split or interpret)</li>
<li>execution time (monitoring)</li>
<li>error trapping</li>
<li>repeatability of request (see long running background process, further)</li>
<li>interactivity (considering user input while reading from another <em>input file descriptor</em>)</li>
<li>do I miss something?</li>
</ul>
<h2>First simple, old (obsolet), and compatible way</h2>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">myPi=`<span class="hljs-built_in">echo</span> <span class="hljs-string">'4*a(1)'</span> | bc -l`
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$myPi</span> 
3.14159265358979323844
</code></pre>
<h3>Compatible, second way</h3>
<p>As nesting could become heavy, parenthesis was implemented for this</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">myPi=$(bc -l &lt;&lt;&lt;<span class="hljs-string">'4*a(1)'</span>)
</code></pre>
<p>Using backticks in script is to be avoided today.</p>
<p><strong>Nested sample:</strong></p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">SysStarted=$(<span class="hljs-built_in">date</span> -d <span class="hljs-string">"<span class="hljs-subst">$(ps ho lstart 1)</span>"</span> +%s)
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$SysStarted</span> 
1480656334
</code></pre>
<h2><a href="/questions/tagged/bash" class="post-tag" title="show questions tagged 'bash'" rel="tag">bash</a> features</h2>
<h3>Reading more than one variable (with <em>Bashisms</em>)</h3>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">df</span> -k /
Filesystem     1K-blocks   Used Available Use% Mounted on
/dev/dm-0         999320 529020    401488  57% /
</code></pre>
<p>If I just want a <em>used</em> value:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">array=($(<span class="hljs-built_in">df</span> -k /))
</code></pre>
<p>you could see an <em>array</em> variable:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">declare</span> -p array
<span class="hljs-built_in">declare</span> -a array=<span class="hljs-string">'([0]="Filesystem" [1]="1K-blocks" [2]="Used" [3]="Available" [
4]="Use%" [5]="Mounted" [6]="on" [7]="/dev/dm-0" [8]="999320" [9]="529020" [10]=
"401488" [11]="57%" [12]="/")'</span>
</code></pre>
<p>Then:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">${array[9]}</span>
529020
</code></pre>
<h3>But I often use this:</h3>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">{ <span class="hljs-built_in">read</span> -r _;<span class="hljs-built_in">read</span> -r filesystem size using avail prct mountpoint ; } &lt; &lt;(<span class="hljs-built_in">df</span> -k /)
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$using</span>
529020
</code></pre>
<p>( The first <code>read _</code> will just <em>drop</em> header line. ) Here, in <strong>only one</strong> command, you will <strong>populate 6 different</strong> variables (shown by alphabetical order):</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">declare</span> -p avail filesystem mountpoint prct size using
<span class="hljs-built_in">declare</span> -- avail=<span class="hljs-string">"401488"</span>
<span class="hljs-built_in">declare</span> -- filesystem=<span class="hljs-string">"/dev/dm-0"</span>
<span class="hljs-built_in">declare</span> -- mountpoint=<span class="hljs-string">"/"</span>
<span class="hljs-built_in">declare</span> -- prct=<span class="hljs-string">"57%"</span>
<span class="hljs-built_in">declare</span> -- size=<span class="hljs-string">"999320"</span>
<span class="hljs-built_in">declare</span> -- using=<span class="hljs-string">"529020"</span>
</code></pre>
<p>Or</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">{ <span class="hljs-built_in">read</span> -a <span class="hljs-built_in">head</span>;varnames=(<span class="hljs-variable">${head[@]//[K1% -]}</span>);varnames=(<span class="hljs-variable">${head[@]//[K1% -]}</span>);
  <span class="hljs-built_in">read</span> <span class="hljs-variable">${varnames[@],,}</span> ; } &lt; &lt;(LANG=C <span class="hljs-built_in">df</span> -k /)
</code></pre>
<p>Then:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">declare</span> -p varnames <span class="hljs-variable">${varnames[@],,}</span> 
<span class="hljs-built_in">declare</span> -a varnames=([0]=<span class="hljs-string">"Filesystem"</span> [1]=<span class="hljs-string">"blocks"</span> [2]=<span class="hljs-string">"Used"</span> [3]=<span class="hljs-string">"Available"</span> [4]=<span class="hljs-string">"Use"</span> [5]=<span class="hljs-string">"Mounted"</span> [6]=<span class="hljs-string">"on"</span>)
<span class="hljs-built_in">declare</span> -- filesystem=<span class="hljs-string">"/dev/dm-0"</span>
<span class="hljs-built_in">declare</span> -- blocks=<span class="hljs-string">"999320"</span>
<span class="hljs-built_in">declare</span> -- used=<span class="hljs-string">"529020"</span>
<span class="hljs-built_in">declare</span> -- available=<span class="hljs-string">"401488"</span>
<span class="hljs-built_in">declare</span> -- use=<span class="hljs-string">"57%"</span>
<span class="hljs-built_in">declare</span> -- mounted=<span class="hljs-string">"/"</span>
<span class="hljs-built_in">declare</span> -- on=<span class="hljs-string">""</span>
</code></pre>
<p>Or even:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">{ <span class="hljs-built_in">read</span> _ ; <span class="hljs-built_in">read</span> filesystem dsk[{6,2,9}] prct mountpoint ; } &lt; &lt;(<span class="hljs-built_in">df</span> -k /)
<span class="hljs-built_in">declare</span> -p mountpoint dsk
<span class="hljs-built_in">declare</span> -- mountpoint=<span class="hljs-string">"/"</span>
<span class="hljs-built_in">declare</span> -a dsk=([2]=<span class="hljs-string">"529020"</span> [6]=<span class="hljs-string">"999320"</span> [9]=<span class="hljs-string">"401488"</span>)
</code></pre>
<p>(Note <code>Used</code> and <code>Blocks</code> is switched there: <code>read ... dsk[6] dsk[2] dsk[9] ...</code>)</p>
<p>... will work with <em>associative arrays</em> too: <code>read _ disk[total] disk[used] ...</code></p>
<h2>Dedicated <em><code>fd</code></em> using <em>unnamed fifo</em>:</h2>
<p>There is an elegent way! In this sample, I will read <code>/etc/passwd</code> file:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">users</span>=()
<span class="hljs-keyword">while</span> IFS=: <span class="hljs-built_in">read</span> -u <span class="hljs-variable">$list</span> user pass uid gid name home bin ;<span class="hljs-keyword">do</span>
    ((uid&gt;=500)) &amp;&amp;
        <span class="hljs-built_in">printf</span> -v <span class="hljs-built_in">users</span>[uid] <span class="hljs-string">"%11d %7d %-20s %s\n"</span> <span class="hljs-variable">$uid</span> <span class="hljs-variable">$gid</span> <span class="hljs-variable">$user</span> <span class="hljs-variable">$home</span>
<span class="hljs-keyword">done</span> {list}&lt;/etc/passwd
</code></pre>
<p>Using this way (<code>... read -u $list; ... {list}&lt;inputfile</code>) leave <em><code>STDIN</code></em> free for other purposes, like user interaction.</p>
<p>Then</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">${users[@]}</span>"</span>
       1000    1000 user         /home/user
...
      65534   65534 nobody       /nonexistent
</code></pre>
<p>and</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">${!users[@]}</span>
1000 ... 65534

<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">${users[1000]}</span>"</span>
      1000    1000 user       /home/user
</code></pre>
<p>This could be used with static files or even <code>/dev/tcp/xx.xx.xx.xx/yyy</code> with <code>x</code> for ip address or hostname and <code>y</code> for port number or with the output of a command:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">{
    <span class="hljs-built_in">read</span> -u <span class="hljs-variable">$list</span> -a <span class="hljs-built_in">head</span>          <span class="hljs-comment"># read header in array `head`</span>
    varnames=(<span class="hljs-variable">${head[@]//[K1% -]}</span>) <span class="hljs-comment"># drop illegal chars for variable names</span>
    <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> -u <span class="hljs-variable">$list</span> <span class="hljs-variable">${varnames[@],,}</span> ;<span class="hljs-keyword">do</span>
        ((pct=available*100/(available+used),pct&lt;10)) &amp;&amp;
            <span class="hljs-built_in">printf</span> <span class="hljs-string">"WARN: FS: %-20s on %-14s %3d &lt;10 (Total: %11u, Use: %7s)\n"</span> \
                <span class="hljs-string">"<span class="hljs-variable">${filesystem#*/mapper/}</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$mounted</span>"</span> <span class="hljs-variable">$pct</span> <span class="hljs-variable">$blocks</span> <span class="hljs-string">"<span class="hljs-variable">$use</span>"</span>
     <span class="hljs-keyword">done</span>
 } {list}&lt; &lt;(LANG=C <span class="hljs-built_in">df</span> -k)
</code></pre>
<p>And of course with <em>inline documents</em>:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-keyword">while</span> IFS=\; <span class="hljs-built_in">read</span> -u <span class="hljs-variable">$list</span> -a myvar ;<span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-variable">${myvar[2]}</span>
<span class="hljs-keyword">done</span> {list}&lt;&lt;<span class="hljs-string">"eof"</span>
foo;bar;baz
alice;bob;charlie
<span class="hljs-variable">$cherry</span>;<span class="hljs-variable">$strawberry</span>;<span class="hljs-variable">$memberberries</span>
eof
</code></pre>
<h3>Practical sample parsing CSV files:</h3>
<p>In <a href="https://stackoverflow.com/a/69514496/1765658">this answer to <code>How to parse a CSV file in Bash?</code></a>, I read a file by using an <em>unnamed fifo</em>, using <code>exec {FD}&lt;"$file"</code> syntax.
And <a href="https://f-hauri.ch/vrac/csvsample.sh.txt" rel="noreferrer">here is the same script, but using <code>CSV</code> as inline document</a>.</p>
<h3>Sample function for populating some variables:</h3>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-built_in">declare</span> free=0 total=0 used=0 mpnt=<span class="hljs-string">'??'</span>

<span class="hljs-function"><span class="hljs-title">getDiskStat</span></span>() {
    {
        <span class="hljs-built_in">read</span> _
        <span class="hljs-built_in">read</span> _ total used free _ mpnt
    } &lt; &lt;(
        <span class="hljs-built_in">df</span> -k <span class="hljs-variable">${1:-/}</span>
    )
}

getDiskStat <span class="hljs-variable">$1</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$mpnt</span>: Tot:<span class="hljs-variable">$total</span>, used: <span class="hljs-variable">$used</span>, free: <span class="hljs-variable">$free</span>."</span>
</code></pre>
<p>Nota: <code>declare</code> line is not required, just for readability.</p>
<h2>About <code>sudo cmd | grep ... | cut ...</code></h2>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">shell=$(<span class="hljs-built_in">cat</span> /etc/passwd | grep <span class="hljs-variable">$USER</span> | <span class="hljs-built_in">cut</span> -d : -f 7)
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$shell</span>
/bin/bash
</code></pre>
<p>(Please avoid useless <code>cat</code>! So this is just one fork less:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">shell=$(grep <span class="hljs-variable">$USER</span> &lt;/etc/passwd | <span class="hljs-built_in">cut</span> -d : -f 7)
</code></pre>
<p>All pipes (<code>|</code>) implies forks. Where another process have to be run, accessing disk, libraries calls and so on.</p>
<p>So using <code>sed</code> for sample, will limit subprocess to only one <em>fork</em>:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">shell=$(sed &lt;/etc/passwd <span class="hljs-string">"s/^<span class="hljs-variable">$USER</span>:.*://p;d"</span>)
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$shell</span>
</code></pre>
<h2>And with <em>Bashisms</em>:</h2>
<p>But for many actions, mostly on small files, Bash could do the job itself:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-keyword">while</span> IFS=: <span class="hljs-built_in">read</span> -a line ; <span class="hljs-keyword">do</span>
    [ <span class="hljs-string">"<span class="hljs-variable">$line</span>"</span> = <span class="hljs-string">"<span class="hljs-variable">$USER</span>"</span> ] &amp;&amp; shell=<span class="hljs-variable">${line[6]}</span>
  <span class="hljs-keyword">done</span> &lt;/etc/passwd
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$shell</span>
/bin/bash
</code></pre>
<p>or</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-keyword">while</span> IFS=: <span class="hljs-built_in">read</span> loginname encpass uid gid fullname home shell;<span class="hljs-keyword">do</span>
    [ <span class="hljs-string">"<span class="hljs-variable">$loginname</span>"</span> = <span class="hljs-string">"<span class="hljs-variable">$USER</span>"</span> ] &amp;&amp; <span class="hljs-built_in">break</span>
  <span class="hljs-keyword">done</span> &lt;/etc/passwd
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$shell</span> <span class="hljs-variable">$loginname</span> ...
</code></pre>
<h3>Going further about <em>variable splitting</em>...</h3>
<p>Have a look at my answer to <a href="https://stackoverflow.com/a/15988793/1765658"><em>How do I split a string on a delimiter in Bash?</em></a></p>
<h2>Alternative: reducing <em>forks</em> by using <em>backgrounded long-running tasks</em></h2>
<p>In order to prevent multiple forks like</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">myPi=$(bc -l &lt;&lt;&lt;<span class="hljs-string">'4*a(1)'</span>
myRay=12
myCirc=$(bc -l &lt;&lt;&lt;<span class="hljs-string">" 2 * <span class="hljs-variable">$myPi</span> * <span class="hljs-variable">$myRay</span> "</span>)
</code></pre>
<p>or</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">myStarted=$(<span class="hljs-built_in">date</span> -d <span class="hljs-string">"<span class="hljs-subst">$(ps ho lstart 1)</span>"</span> +%s)
mySessStart=$(<span class="hljs-built_in">date</span> -d <span class="hljs-string">"<span class="hljs-subst">$(ps ho lstart $$)</span>"</span> +%s)
</code></pre>
<p>This work fine, but running many forks is heavy and slow.</p>
<p>And commands like <code>date</code> and <code>bc</code> could make many operations, <em>line by line</em>!!</p>
<p>See:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">bc -l &lt;&lt;&lt;$<span class="hljs-string">'3*4\n5*6'</span>
12
30

<span class="hljs-built_in">date</span> -f - +%s &lt; &lt;(ps ho lstart 1 $$)
1516030449
1517853288
</code></pre>
<p>So we could use a <em><strong>long running background process</strong></em> to make many jobs, without having to initiate a new <em>fork</em> for each request.</p>
<p>You could have a look how reducing forks make <a href="https://stackoverflow.com/a/67498861/1765658">Mandelbrot bash</a>, improve from more than eight hours to less than 5 seconds.</p>
<p>Under <a href="/questions/tagged/bash" class="post-tag" title="show questions tagged 'bash'" rel="tag">bash</a>, there is a built-in function: <code>coproc</code>:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">coproc bc -l
<span class="hljs-built_in">echo</span> 4*3 &gt;&amp;<span class="hljs-variable">${COPROC[1]}</span>
<span class="hljs-built_in">read</span> -u <span class="hljs-variable">$COPROC</span> answer
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$answer</span>
12

<span class="hljs-built_in">echo</span> &gt;&amp;<span class="hljs-variable">${COPROC[1]}</span> <span class="hljs-string">'pi=4*a(1)'</span>
ray=42.0
<span class="hljs-built_in">printf</span> &gt;&amp;<span class="hljs-variable">${COPROC[1]}</span> <span class="hljs-string">'2*pi*%s\n'</span> <span class="hljs-variable">$ray</span>
<span class="hljs-built_in">read</span> -u <span class="hljs-variable">$COPROC</span> answer
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$answer</span>
263.89378290154263202896

<span class="hljs-built_in">printf</span> &gt;&amp;<span class="hljs-variable">${COPROC[1]}</span> <span class="hljs-string">'pi*%s^2\n'</span> <span class="hljs-variable">$ray</span>
<span class="hljs-built_in">read</span> -u <span class="hljs-variable">$COPROC</span> answer
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$answer</span>
5541.76944093239527260816
</code></pre>
<p>As <code>bc</code> is ready, running in background and I/O are ready too, there is no delay, nothing to load, open, close, before or after operation. Only the operation himself! This become a lot quicker than having to fork to <code>bc</code> for each operation!</p>
<p>Border effect: While <code>bc</code> stay running, they will hold all registers, so some variables or functions could be defined at <em>initialisation</em> step, as first write to <code>${COPROC[1]}</code>, just after starting the task (via <code>coproc</code>).</p>
<h2>Into a function <code>newConnector</code></h2>
<p>You may found my <code>newConnector</code> function on <a href="https://github.com/F-Hauri/Connector-bash/blob/master/shell_connector.bash" rel="noreferrer">GitHub.Com</a> or on <a href="https://f-hauri.ch/vrac/shell_connector.sh" rel="noreferrer">my own site</a> (Note on GitHub: there are two files on my site. Function and demo are bundled into one unique file which could be sourced for use or just run for demo.)</p>
<p><strong>Sample:</strong></p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">source</span> shell_connector.sh

<span class="hljs-built_in">tty</span>
/dev/pts/20

ps --<span class="hljs-built_in">tty</span> pts/20 fw
    PID TTY      STAT   TIME COMMAND
  29019 pts/20   Ss     0:00 bash
  30745 pts/20   R+     0:00  \_ ps --<span class="hljs-built_in">tty</span> pts/20 fw

newConnector /usr/bin/bc <span class="hljs-string">"-l"</span> <span class="hljs-string">'3*4'</span> 12

ps --<span class="hljs-built_in">tty</span> pts/20 fw
    PID TTY      STAT   TIME COMMAND
  29019 pts/20   Ss     0:00 bash
  30944 pts/20   S      0:00  \_ /usr/bin/bc -l
  30952 pts/20   R+     0:00  \_ ps --<span class="hljs-built_in">tty</span> pts/20 fw

<span class="hljs-built_in">declare</span> -p PI
bash: <span class="hljs-built_in">declare</span>: PI: not found

myBc <span class="hljs-string">'4*a(1)'</span> PI
<span class="hljs-built_in">declare</span> -p PI
<span class="hljs-built_in">declare</span> -- PI=<span class="hljs-string">"3.14159265358979323844"</span>
</code></pre>
<p>The function <code>myBc</code> lets you use the background task with simple syntax.</p>
<p>Then for date:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">newConnector /bin/date <span class="hljs-string">'-f - +%s'</span> @0 0
myDate <span class="hljs-string">'2000-01-01'</span>
  946681200
myDate <span class="hljs-string">"<span class="hljs-subst">$(ps ho lstart 1)</span>"</span> boottime
myDate now now
<span class="hljs-built_in">read</span> utm idl &lt;/proc/uptime
myBc <span class="hljs-string">"<span class="hljs-variable">$now</span>-<span class="hljs-variable">$boottime</span>"</span> <span class="hljs-built_in">uptime</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">"%s\n"</span> <span class="hljs-variable">${utm%%.*}</span> <span class="hljs-variable">$uptime</span>
  42134906
  42134906

ps --<span class="hljs-built_in">tty</span> pts/20 fw
    PID TTY      STAT   TIME COMMAND
  29019 pts/20   Ss     0:00 bash
  30944 pts/20   S      0:00  \_ /usr/bin/bc -l
  32615 pts/20   S      0:00  \_ /bin/date -f - +%s
   3162 pts/20   R+     0:00  \_ ps --<span class="hljs-built_in">tty</span> pts/20 fw
</code></pre>
<p>From there, if you want to end one of background processes, you just have to close its <em><code>fd</code></em>:</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">eval</span> <span class="hljs-string">"exec <span class="hljs-variable">$DATEOUT</span>&gt;&amp;-"</span>
<span class="hljs-built_in">eval</span> <span class="hljs-string">"exec <span class="hljs-variable">$DATEIN</span>&gt;&amp;-"</span>
ps --<span class="hljs-built_in">tty</span> pts/20 fw
    PID TTY      STAT   TIME COMMAND
   4936 pts/20   Ss     0:00 bash
   5256 pts/20   S      0:00  \_ /usr/bin/bc -l
   6358 pts/20   R+     0:00  \_ ps --<span class="hljs-built_in">tty</span> pts/20 fw
</code></pre>
<p>which is not needed, because all <em><code>fd</code></em> close when the main process finishes.</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As they have already indicated to you, you should use `backticks`.</p>
<p>The alternative proposed <code>$(command)</code> works as well, and it also easier to read, but note that it is valid only with Bash or KornShell (and shells derived from those),
so if your scripts have to be really portable on various Unix systems, you should prefer the old backticks notation.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I know three ways to do it:</p>

<ol>
<li><p>Functions are suitable for such tasks:**</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-function"><span class="hljs-title">func</span></span> (){
    <span class="hljs-built_in">ls</span> -l
}
</code></pre>

<p>Invoke it by saying <code>func</code>.</p></li>
<li><p>Also another suitable solution could be eval:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">var=<span class="hljs-string">"ls -l"</span>
<span class="hljs-built_in">eval</span> <span class="hljs-variable">$var</span>
</code></pre></li>
<li><p>The third one is using variables directly:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">var=$(<span class="hljs-built_in">ls</span> -l)

    OR

var=`<span class="hljs-built_in">ls</span> -l`
</code></pre></li>
</ol>

<p>You can get the output of the third solution in a good way:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$var</span>"</span>
</code></pre>

<p>And also in a nasty way:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$var</span>
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Just to be different:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">MOREF=$(sudo run <span class="hljs-built_in">command</span> against <span class="hljs-variable">$VAR1</span> | grep name | <span class="hljs-built_in">cut</span> -c7-)
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>When setting a variable make sure you have <em><strong>no spaces</strong></em> before and/or after the <code>=</code> sign. I literally spent an hour trying to figure this out, trying all kinds of solutions! This is <em>not</em> cool.</p>
<p><em>Correct:</em><br></p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">WTFF=`<span class="hljs-built_in">echo</span> <span class="hljs-string">"stuff"</span>`
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Example: <span class="hljs-variable">$WTFF</span>"</span>
</code></pre>
<p><em>Will Fail</em> with error "stuff: not found" or similar</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">WTFF= `<span class="hljs-built_in">echo</span> <span class="hljs-string">"stuff"</span>`
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Example: <span class="hljs-variable">$WTFF</span>"</span>
</code></pre>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you want to do it with multiline/multiple command/s then you can do this:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">output=$( bash &lt;&lt;<span class="hljs-string">EOF
# Multiline/multiple command/s
EOF</span>
)
</code></pre>

<p>Or:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">output=$(
<span class="hljs-comment"># Multiline/multiple command/s</span>
)
</code></pre>

<p>Example:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-meta">#!/bin/bash</span>
output=<span class="hljs-string">"<span class="hljs-subst">$( bash &lt;&lt;EOF
echo first
echo second
echo third
EOF
)</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$output</span>"</span>
</code></pre>

<p>Output:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">first
second
third
</code></pre>

<p>Using <a href="http://www.gnu.org/software/bash/manual/html_node/Redirections.html#Here-Documents" rel="nofollow noreferrer">heredoc</a>, you can simplify things pretty easily by breaking down your long single line code into a multiline one. Another example:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">output=<span class="hljs-string">"<span class="hljs-subst">$( ssh -p $port $user@$domain &lt;&lt;EOF
# Breakdown your long ssh command into multiline here.
EOF
)</span>"</span>
</code></pre>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You need to use either</p>

<p><code>$(command-here)</code></p>

<p>or</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">`command-here`
</code></pre>

<h3>Example</h3>

<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-meta">#!/bin/bash</span>

VAR1=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
VAR2=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>

MOREF=<span class="hljs-string">"<span class="hljs-subst">$(sudo run command against <span class="hljs-string">"<span class="hljs-variable">$VAR1</span>"</span> | grep name | cut -c7-)</span>"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$MOREF</span>"</span>
</code></pre>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If the command that you are trying to execute fails, it would write the output onto the error stream and would then be printed out to the console.</p>

<p>To avoid it, you must redirect the error stream:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">result=$(<span class="hljs-built_in">ls</span> -l something_that_does_not_exist 2&gt;&amp;1)
</code></pre>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is another way and is good to use with some text editors that are unable to correctly highlight every intricate code you create:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash"><span class="hljs-built_in">read</span> -r -d <span class="hljs-string">''</span> str &lt; &lt;(<span class="hljs-built_in">cat</span> somefile.txt)
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">${#str}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$str</span>"</span>
</code></pre>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can use backticks (also known as accent graves) or <code>$()</code>.</p>

<p>Like:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">OUTPUT=$(x+2);
OUTPUT=`x+2`;
</code></pre>

<p>Both have the same effect. But OUTPUT=$(x+2) is more readable and the latest one.</p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here are two more ways: </p>

<p>Please keep in mind that space is very important in Bash. So, if you want your command to run, use as is without introducing any more spaces.</p>

<ol>
<li><p>The following assigns <code>harshil</code> to <code>L</code> and then prints it</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">L=$<span class="hljs-string">"harshil"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$L</span>"</span>
</code></pre></li>
<li><p>The following assigns the output of the command <code>tr</code> to L2. <code>tr</code> is being operated on another variable, L1.</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">L2=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$L1</span>"</span> | <span class="hljs-built_in">tr</span> [:upper:] [:lower:])
</code></pre></li>
</ol>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Some may find this useful. 
Integer values in variable substitution, where the trick is using <code>$(())</code> double brackets:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">N=3
M=3
COUNT=<span class="hljs-variable">$N</span>-1
ARR[0]=3
ARR[1]=2
ARR[2]=4
ARR[3]=1

<span class="hljs-keyword">while</span> (( COUNT &lt; <span class="hljs-variable">${#ARR[@]}</span> ))
<span class="hljs-keyword">do</span>
  ARR[<span class="hljs-variable">$COUNT</span>]=$((ARR[COUNT]*M))
  (( COUNT=<span class="hljs-variable">$COUNT</span>+<span class="hljs-variable">$N</span> ))
<span class="hljs-keyword">done</span>
</code></pre>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;In addition to backticks \u0026lt;code\u0026gt;`command`\u0026lt;/code\u0026gt;, \u0026lt;a href=\u0026quot;http://www.gnu.org/software/bash/manual/bashref.html#Command-Substitution\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;command substitution\u0026lt;/a\u0026gt; can be done with \u0026lt;code\u0026gt;$(command)\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;\u0026quot;$(command)\u0026quot;\u0026lt;/code\u0026gt;, which I find easier to read, and allows for nesting.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;OUTPUT=$(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;ls\u0026lt;/span\u0026gt; -1)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${OUTPUT}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\nMULTILINE=$(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;ls\u0026lt;/span\u0026gt; \\\n   -1)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${MULTILINE}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Quoting (\u0026lt;code\u0026gt;\u0026quot;\u0026lt;/code\u0026gt;) does matter to preserve \u0026lt;strong\u0026gt;multi-line variable values\u0026lt;/strong\u0026gt;; it is optional on the right-hand side of an assignment, as \u0026lt;a href=\u0026quot;https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Shell-Parameters\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;word splitting is not performed\u0026lt;/a\u0026gt;, so \u0026lt;code\u0026gt;OUTPUT=$(ls -1)\u0026lt;/code\u0026gt; would work fine.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-none s-code-block\u0026quot;\u0026gt;\u0026lt;code\u0026gt;$(sudo run command)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;If you\u0026apos;re going to use an apostrophe, you need \u0026lt;code\u0026gt;`\u0026lt;/code\u0026gt;, not \u0026lt;code\u0026gt;\u0026apos;\u0026lt;/code\u0026gt;. This character is called \u0026quot;backticks\u0026quot; (or \u0026quot;grave accent\u0026quot;):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#!/bin/bash\u0026lt;/span\u0026gt;\n\nVAR1=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$1\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\nVAR2=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$2\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\nMOREF=`sudo run \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;command\u0026lt;/span\u0026gt; against \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$VAR1\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; | grep name | \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cut\u0026lt;/span\u0026gt; -c7-`\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$MOREF\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;Some \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Bash\u0026lt;/a\u0026gt; tricks I use to set variables from commands\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Sorry, there is a loong answer, but as \u0026lt;a href=\u0026quot;/questions/tagged/bash\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;bash\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;bash\u0026lt;/a\u0026gt; is a \u0026lt;a href=\u0026quot;/questions/tagged/shell\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;shell\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;shell\u0026lt;/a\u0026gt;, where the main goal is to run other \u0026lt;a href=\u0026quot;/questions/tagged/unix\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;unix\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;unix\u0026lt;/a\u0026gt; commands and react on \u0026lt;em\u0026gt;result code\u0026lt;/em\u0026gt; and/or \u0026lt;em\u0026gt;output\u0026lt;/em\u0026gt;, ( commands are often piped \u0026lt;em\u0026gt;filter\u0026lt;/em\u0026gt;, etc... ).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Storing command output in variables is something basic and fundamental.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Therefore, depending on\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;compatibility (\u0026lt;a href=\u0026quot;/questions/tagged/posix\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;posix\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;posix\u0026lt;/a\u0026gt;)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;kind of output (filter(s))\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;number of variable to set (split or interpret)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;execution time (monitoring)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;error trapping\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;repeatability of request (see long running background process, further)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;interactivity (considering user input while reading from another \u0026lt;em\u0026gt;input file descriptor\u0026lt;/em\u0026gt;)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;do I miss something?\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;First simple, old (obsolet), and compatible way\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;myPi=`\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;4*a(1)\u0026apos;\u0026lt;/span\u0026gt; | bc -l`\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$myPi\u0026lt;/span\u0026gt; \n3.14159265358979323844\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Compatible, second way\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;As nesting could become heavy, parenthesis was implemented for this\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;myPi=$(bc -l \u0026amp;lt;\u0026amp;lt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;4*a(1)\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Using backticks in script is to be avoided today.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Nested sample:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;SysStarted=$(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt; -d \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$(ps ho lstart 1)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; +%s)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$SysStarted\u0026lt;/span\u0026gt; \n1480656334\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;\u0026lt;a href=\u0026quot;/questions/tagged/bash\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;bash\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;bash\u0026lt;/a\u0026gt; features\u0026lt;/h2\u0026gt;\n\u0026lt;h3\u0026gt;Reading more than one variable (with \u0026lt;em\u0026gt;Bashisms\u0026lt;/em\u0026gt;)\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;df\u0026lt;/span\u0026gt; -k /\nFilesystem     1K-blocks   Used Available Use% Mounted on\n/dev/dm-0         999320 529020    401488  57% /\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If I just want a \u0026lt;em\u0026gt;used\u0026lt;/em\u0026gt; value:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;array=($(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;df\u0026lt;/span\u0026gt; -k /))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;you could see an \u0026lt;em\u0026gt;array\u0026lt;/em\u0026gt; variable:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -p array\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -a array=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;([0]=\u0026quot;Filesystem\u0026quot; [1]=\u0026quot;1K-blocks\u0026quot; [2]=\u0026quot;Used\u0026quot; [3]=\u0026quot;Available\u0026quot; [\n4]=\u0026quot;Use%\u0026quot; [5]=\u0026quot;Mounted\u0026quot; [6]=\u0026quot;on\u0026quot; [7]=\u0026quot;/dev/dm-0\u0026quot; [8]=\u0026quot;999320\u0026quot; [9]=\u0026quot;529020\u0026quot; [10]=\n\u0026quot;401488\u0026quot; [11]=\u0026quot;57%\u0026quot; [12]=\u0026quot;/\u0026quot;)\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${array[9]}\u0026lt;/span\u0026gt;\n529020\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;But I often use this:\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -r _;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -r filesystem size using avail prct mountpoint ; } \u0026amp;lt; \u0026amp;lt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;df\u0026lt;/span\u0026gt; -k /)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$using\u0026lt;/span\u0026gt;\n529020\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;( The first \u0026lt;code\u0026gt;read _\u0026lt;/code\u0026gt; will just \u0026lt;em\u0026gt;drop\u0026lt;/em\u0026gt; header line. ) Here, in \u0026lt;strong\u0026gt;only one\u0026lt;/strong\u0026gt; command, you will \u0026lt;strong\u0026gt;populate 6 different\u0026lt;/strong\u0026gt; variables (shown by alphabetical order):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -p avail filesystem mountpoint prct size using\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- avail=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;401488\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- filesystem=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/dev/dm-0\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- mountpoint=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- prct=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;57%\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- size=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;999320\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- using=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;529020\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Or\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;head\u0026lt;/span\u0026gt;;varnames=(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${head[@]//[K1% -]}\u0026lt;/span\u0026gt;);varnames=(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${head[@]//[K1% -]}\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${varnames[@],,}\u0026lt;/span\u0026gt; ; } \u0026amp;lt; \u0026amp;lt;(LANG=C \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;df\u0026lt;/span\u0026gt; -k /)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -p varnames \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${varnames[@],,}\u0026lt;/span\u0026gt; \n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -a varnames=([0]=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Filesystem\u0026quot;\u0026lt;/span\u0026gt; [1]=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;blocks\u0026quot;\u0026lt;/span\u0026gt; [2]=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Used\u0026quot;\u0026lt;/span\u0026gt; [3]=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Available\u0026quot;\u0026lt;/span\u0026gt; [4]=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Use\u0026quot;\u0026lt;/span\u0026gt; [5]=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Mounted\u0026quot;\u0026lt;/span\u0026gt; [6]=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;on\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- filesystem=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/dev/dm-0\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- blocks=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;999320\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- used=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;529020\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- available=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;401488\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- use=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;57%\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- mounted=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- on=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Or even:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; _ ; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; filesystem dsk[{6,2,9}] prct mountpoint ; } \u0026amp;lt; \u0026amp;lt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;df\u0026lt;/span\u0026gt; -k /)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -p mountpoint dsk\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- mountpoint=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -a dsk=([2]=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;529020\u0026quot;\u0026lt;/span\u0026gt; [6]=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;999320\u0026quot;\u0026lt;/span\u0026gt; [9]=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;401488\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;(Note \u0026lt;code\u0026gt;Used\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;Blocks\u0026lt;/code\u0026gt; is switched there: \u0026lt;code\u0026gt;read ... dsk[6] dsk[2] dsk[9] ...\u0026lt;/code\u0026gt;)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;... will work with \u0026lt;em\u0026gt;associative arrays\u0026lt;/em\u0026gt; too: \u0026lt;code\u0026gt;read _ disk[total] disk[used] ...\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Dedicated \u0026lt;em\u0026gt;\u0026lt;code\u0026gt;fd\u0026lt;/code\u0026gt;\u0026lt;/em\u0026gt; using \u0026lt;em\u0026gt;unnamed fifo\u0026lt;/em\u0026gt;:\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;There is an elegent way! In this sample, I will read \u0026lt;code\u0026gt;/etc/passwd\u0026lt;/code\u0026gt; file:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;users\u0026lt;/span\u0026gt;=()\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; IFS=: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -u \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$list\u0026lt;/span\u0026gt; user pass uid gid name home bin ;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;do\u0026lt;/span\u0026gt;\n    ((uid\u0026amp;gt;=500)) \u0026amp;amp;\u0026amp;amp;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt; -v \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;users\u0026lt;/span\u0026gt;[uid] \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%11d %7d %-20s %s\\n\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$uid\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$gid\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$user\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$home\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;done\u0026lt;/span\u0026gt; {list}\u0026amp;lt;/etc/passwd\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Using this way (\u0026lt;code\u0026gt;... read -u $list; ... {list}\u0026amp;lt;inputfile\u0026lt;/code\u0026gt;) leave \u0026lt;em\u0026gt;\u0026lt;code\u0026gt;STDIN\u0026lt;/code\u0026gt;\u0026lt;/em\u0026gt; free for other purposes, like user interaction.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Then\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; -n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${users[@]}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n       1000    1000 user         /home/user\n...\n      65534   65534 nobody       /nonexistent\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;and\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${!users[@]}\u0026lt;/span\u0026gt;\n1000 ... 65534\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; -n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${users[1000]}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n      1000    1000 user       /home/user\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This could be used with static files or even \u0026lt;code\u0026gt;/dev/tcp/xx.xx.xx.xx/yyy\u0026lt;/code\u0026gt; with \u0026lt;code\u0026gt;x\u0026lt;/code\u0026gt; for ip address or hostname and \u0026lt;code\u0026gt;y\u0026lt;/code\u0026gt; for port number or with the output of a command:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -u \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$list\u0026lt;/span\u0026gt; -a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;head\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# read header in array `head`\u0026lt;/span\u0026gt;\n    varnames=(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${head[@]//[K1% -]}\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# drop illegal chars for variable names\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -u \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$list\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${varnames[@],,}\u0026lt;/span\u0026gt; ;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;do\u0026lt;/span\u0026gt;\n        ((pct=available*100/(available+used),pct\u0026amp;lt;10)) \u0026amp;amp;\u0026amp;amp;\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;WARN: FS: %-20s on %-14s %3d \u0026amp;lt;10 (Total: %11u, Use: %7s)\\n\u0026quot;\u0026lt;/span\u0026gt; \\\n                \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${filesystem#*/mapper/}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$mounted\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pct\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$blocks\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$use\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;done\u0026lt;/span\u0026gt;\n } {list}\u0026amp;lt; \u0026amp;lt;(LANG=C \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;df\u0026lt;/span\u0026gt; -k)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And of course with \u0026lt;em\u0026gt;inline documents\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; IFS=\\; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -u \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$list\u0026lt;/span\u0026gt; -a myvar ;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;do\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${myvar[2]}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;done\u0026lt;/span\u0026gt; {list}\u0026amp;lt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;eof\u0026quot;\u0026lt;/span\u0026gt;\nfoo;bar;baz\nalice;bob;charlie\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$cherry\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$strawberry\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$memberberries\u0026lt;/span\u0026gt;\neof\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Practical sample parsing CSV files:\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;In \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/69514496/1765658\u0026quot;\u0026gt;this answer to \u0026lt;code\u0026gt;How to parse a CSV file in Bash?\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, I read a file by using an \u0026lt;em\u0026gt;unnamed fifo\u0026lt;/em\u0026gt;, using \u0026lt;code\u0026gt;exec {FD}\u0026amp;lt;\u0026quot;$file\u0026quot;\u0026lt;/code\u0026gt; syntax.\nAnd \u0026lt;a href=\u0026quot;https://f-hauri.ch/vrac/csvsample.sh.txt\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;here is the same script, but using \u0026lt;code\u0026gt;CSV\u0026lt;/code\u0026gt; as inline document\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;Sample function for populating some variables:\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#!/bin/bash\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; free=0 total=0 used=0 mpnt=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;??\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;getDiskStat\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;() {\n    {\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; _\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; _ total used free _ mpnt\n    } \u0026amp;lt; \u0026amp;lt;(\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;df\u0026lt;/span\u0026gt; -k \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${1:-/}\u0026lt;/span\u0026gt;\n    )\n}\n\ngetDiskStat \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$mpnt\u0026lt;/span\u0026gt;: Tot:\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$total\u0026lt;/span\u0026gt;, used: \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$used\u0026lt;/span\u0026gt;, free: \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$free\u0026lt;/span\u0026gt;.\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Nota: \u0026lt;code\u0026gt;declare\u0026lt;/code\u0026gt; line is not required, just for readability.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;About \u0026lt;code\u0026gt;sudo cmd | grep ... | cut ...\u0026lt;/code\u0026gt;\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;shell=$(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cat\u0026lt;/span\u0026gt; /etc/passwd | grep \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$USER\u0026lt;/span\u0026gt; | \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cut\u0026lt;/span\u0026gt; -d : -f 7)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$shell\u0026lt;/span\u0026gt;\n/bin/bash\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;(Please avoid useless \u0026lt;code\u0026gt;cat\u0026lt;/code\u0026gt;! So this is just one fork less:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;shell=$(grep \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$USER\u0026lt;/span\u0026gt; \u0026amp;lt;/etc/passwd | \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cut\u0026lt;/span\u0026gt; -d : -f 7)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;All pipes (\u0026lt;code\u0026gt;|\u0026lt;/code\u0026gt;) implies forks. Where another process have to be run, accessing disk, libraries calls and so on.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So using \u0026lt;code\u0026gt;sed\u0026lt;/code\u0026gt; for sample, will limit subprocess to only one \u0026lt;em\u0026gt;fork\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;shell=$(sed \u0026amp;lt;/etc/passwd \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;s/^\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$USER\u0026lt;/span\u0026gt;:.*://p;d\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$shell\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;And with \u0026lt;em\u0026gt;Bashisms\u0026lt;/em\u0026gt;:\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;But for many actions, mostly on small files, Bash could do the job itself:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; IFS=: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -a line ; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;do\u0026lt;/span\u0026gt;\n    [ \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$line\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$USER\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; ] \u0026amp;amp;\u0026amp;amp; shell=\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${line[6]}\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;done\u0026lt;/span\u0026gt; \u0026amp;lt;/etc/passwd\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$shell\u0026lt;/span\u0026gt;\n/bin/bash\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; IFS=: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; loginname encpass uid gid fullname home shell;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;do\u0026lt;/span\u0026gt;\n    [ \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$loginname\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$USER\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; ] \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;done\u0026lt;/span\u0026gt; \u0026amp;lt;/etc/passwd\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$shell\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$loginname\u0026lt;/span\u0026gt; ...\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Going further about \u0026lt;em\u0026gt;variable splitting\u0026lt;/em\u0026gt;...\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Have a look at my answer to \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/15988793/1765658\u0026quot;\u0026gt;\u0026lt;em\u0026gt;How do I split a string on a delimiter in Bash?\u0026lt;/em\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Alternative: reducing \u0026lt;em\u0026gt;forks\u0026lt;/em\u0026gt; by using \u0026lt;em\u0026gt;backgrounded long-running tasks\u0026lt;/em\u0026gt;\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;In order to prevent multiple forks like\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;myPi=$(bc -l \u0026amp;lt;\u0026amp;lt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;4*a(1)\u0026apos;\u0026lt;/span\u0026gt;\nmyRay=12\nmyCirc=$(bc -l \u0026amp;lt;\u0026amp;lt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; 2 * \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$myPi\u0026lt;/span\u0026gt; * \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$myRay\u0026lt;/span\u0026gt; \u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;myStarted=$(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt; -d \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$(ps ho lstart 1)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; +%s)\nmySessStart=$(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt; -d \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$(ps ho lstart $$)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; +%s)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This work fine, but running many forks is heavy and slow.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;And commands like \u0026lt;code\u0026gt;date\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;bc\u0026lt;/code\u0026gt; could make many operations, \u0026lt;em\u0026gt;line by line\u0026lt;/em\u0026gt;!!\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;See:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;bc -l \u0026amp;lt;\u0026amp;lt;\u0026amp;lt;$\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;3*4\\n5*6\u0026apos;\u0026lt;/span\u0026gt;\n12\n30\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt; -f - +%s \u0026amp;lt; \u0026amp;lt;(ps ho lstart 1 $$)\n1516030449\n1517853288\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;So we could use a \u0026lt;em\u0026gt;\u0026lt;strong\u0026gt;long running background process\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt; to make many jobs, without having to initiate a new \u0026lt;em\u0026gt;fork\u0026lt;/em\u0026gt; for each request.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You could have a look how reducing forks make \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/67498861/1765658\u0026quot;\u0026gt;Mandelbrot bash\u0026lt;/a\u0026gt;, improve from more than eight hours to less than 5 seconds.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Under \u0026lt;a href=\u0026quot;/questions/tagged/bash\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;bash\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;bash\u0026lt;/a\u0026gt;, there is a built-in function: \u0026lt;code\u0026gt;coproc\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;coproc bc -l\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; 4*3 \u0026amp;gt;\u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${COPROC[1]}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -u \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$COPROC\u0026lt;/span\u0026gt; answer\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$answer\u0026lt;/span\u0026gt;\n12\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026amp;gt;\u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${COPROC[1]}\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;pi=4*a(1)\u0026apos;\u0026lt;/span\u0026gt;\nray=42.0\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt; \u0026amp;gt;\u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${COPROC[1]}\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;2*pi*%s\\n\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ray\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -u \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$COPROC\u0026lt;/span\u0026gt; answer\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$answer\u0026lt;/span\u0026gt;\n263.89378290154263202896\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt; \u0026amp;gt;\u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${COPROC[1]}\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;pi*%s^2\\n\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ray\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -u \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$COPROC\u0026lt;/span\u0026gt; answer\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$answer\u0026lt;/span\u0026gt;\n5541.76944093239527260816\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;As \u0026lt;code\u0026gt;bc\u0026lt;/code\u0026gt; is ready, running in background and I/O are ready too, there is no delay, nothing to load, open, close, before or after operation. Only the operation himself! This become a lot quicker than having to fork to \u0026lt;code\u0026gt;bc\u0026lt;/code\u0026gt; for each operation!\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Border effect: While \u0026lt;code\u0026gt;bc\u0026lt;/code\u0026gt; stay running, they will hold all registers, so some variables or functions could be defined at \u0026lt;em\u0026gt;initialisation\u0026lt;/em\u0026gt; step, as first write to \u0026lt;code\u0026gt;${COPROC[1]}\u0026lt;/code\u0026gt;, just after starting the task (via \u0026lt;code\u0026gt;coproc\u0026lt;/code\u0026gt;).\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Into a function \u0026lt;code\u0026gt;newConnector\u0026lt;/code\u0026gt;\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;You may found my \u0026lt;code\u0026gt;newConnector\u0026lt;/code\u0026gt; function on \u0026lt;a href=\u0026quot;https://github.com/F-Hauri/Connector-bash/blob/master/shell_connector.bash\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;GitHub.Com\u0026lt;/a\u0026gt; or on \u0026lt;a href=\u0026quot;https://f-hauri.ch/vrac/shell_connector.sh\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;my own site\u0026lt;/a\u0026gt; (Note on GitHub: there are two files on my site. Function and demo are bundled into one unique file which could be sourced for use or just run for demo.)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Sample:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;source\u0026lt;/span\u0026gt; shell_connector.sh\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tty\u0026lt;/span\u0026gt;\n/dev/pts/20\n\nps --\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tty\u0026lt;/span\u0026gt; pts/20 fw\n    PID TTY      STAT   TIME COMMAND\n  29019 pts/20   Ss     0:00 bash\n  30745 pts/20   R+     0:00  \\_ ps --\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tty\u0026lt;/span\u0026gt; pts/20 fw\n\nnewConnector /usr/bin/bc \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-l\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;3*4\u0026apos;\u0026lt;/span\u0026gt; 12\n\nps --\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tty\u0026lt;/span\u0026gt; pts/20 fw\n    PID TTY      STAT   TIME COMMAND\n  29019 pts/20   Ss     0:00 bash\n  30944 pts/20   S      0:00  \\_ /usr/bin/bc -l\n  30952 pts/20   R+     0:00  \\_ ps --\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tty\u0026lt;/span\u0026gt; pts/20 fw\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -p PI\nbash: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt;: PI: not found\n\nmyBc \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;4*a(1)\u0026apos;\u0026lt;/span\u0026gt; PI\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -p PI\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; -- PI=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;3.14159265358979323844\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The function \u0026lt;code\u0026gt;myBc\u0026lt;/code\u0026gt; lets you use the background task with simple syntax.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Then for date:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;newConnector /bin/date \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-f - +%s\u0026apos;\u0026lt;/span\u0026gt; @0 0\nmyDate \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;2000-01-01\u0026apos;\u0026lt;/span\u0026gt;\n  946681200\nmyDate \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$(ps ho lstart 1)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; boottime\nmyDate now now\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; utm idl \u0026amp;lt;/proc/uptime\nmyBc \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$now\u0026lt;/span\u0026gt;-\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$boottime\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;uptime\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%s\\n\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${utm%%.*}\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$uptime\u0026lt;/span\u0026gt;\n  42134906\n  42134906\n\nps --\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tty\u0026lt;/span\u0026gt; pts/20 fw\n    PID TTY      STAT   TIME COMMAND\n  29019 pts/20   Ss     0:00 bash\n  30944 pts/20   S      0:00  \\_ /usr/bin/bc -l\n  32615 pts/20   S      0:00  \\_ /bin/date -f - +%s\n   3162 pts/20   R+     0:00  \\_ ps --\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tty\u0026lt;/span\u0026gt; pts/20 fw\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;From there, if you want to end one of background processes, you just have to close its \u0026lt;em\u0026gt;\u0026lt;code\u0026gt;fd\u0026lt;/code\u0026gt;\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;eval\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;exec \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$DATEOUT\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026amp;amp;-\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;eval\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;exec \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$DATEIN\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026amp;amp;-\u0026quot;\u0026lt;/span\u0026gt;\nps --\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tty\u0026lt;/span\u0026gt; pts/20 fw\n    PID TTY      STAT   TIME COMMAND\n   4936 pts/20   Ss     0:00 bash\n   5256 pts/20   S      0:00  \\_ /usr/bin/bc -l\n   6358 pts/20   R+     0:00  \\_ ps --\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tty\u0026lt;/span\u0026gt; pts/20 fw\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;which is not needed, because all \u0026lt;em\u0026gt;\u0026lt;code\u0026gt;fd\u0026lt;/code\u0026gt;\u0026lt;/em\u0026gt; close when the main process finishes.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As they have already indicated to you, you should use `backticks`.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The alternative proposed \u0026lt;code\u0026gt;$(command)\u0026lt;/code\u0026gt; works as well, and it also easier to read, but note that it is valid only with Bash or KornShell (and shells derived from those),\nso if your scripts have to be really portable on various Unix systems, you should prefer the old backticks notation.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I know three ways to do it:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Functions are suitable for such tasks:**\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; (){\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;ls\u0026lt;/span\u0026gt; -l\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Invoke it by saying \u0026lt;code\u0026gt;func\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Also another suitable solution could be eval:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;var=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ls -l\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;eval\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$var\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The third one is using variables directly:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;var=$(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;ls\u0026lt;/span\u0026gt; -l)\n\n    OR\n\nvar=`\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;ls\u0026lt;/span\u0026gt; -l`\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;You can get the output of the third solution in a good way:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$var\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And also in a nasty way:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$var\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Just to be different:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;MOREF=$(sudo run \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;command\u0026lt;/span\u0026gt; against \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$VAR1\u0026lt;/span\u0026gt; | grep name | \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cut\u0026lt;/span\u0026gt; -c7-)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;When setting a variable make sure you have \u0026lt;em\u0026gt;\u0026lt;strong\u0026gt;no spaces\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt; before and/or after the \u0026lt;code\u0026gt;=\u0026lt;/code\u0026gt; sign. I literally spent an hour trying to figure this out, trying all kinds of solutions! This is \u0026lt;em\u0026gt;not\u0026lt;/em\u0026gt; cool.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Correct:\u0026lt;/em\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;WTFF=`\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;stuff\u0026quot;\u0026lt;/span\u0026gt;`\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Example: \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$WTFF\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Will Fail\u0026lt;/em\u0026gt; with error \u0026quot;stuff: not found\u0026quot; or similar\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;WTFF= `\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;stuff\u0026quot;\u0026lt;/span\u0026gt;`\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Example: \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$WTFF\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you want to do it with multiline/multiple command/s then you can do this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;output=$( bash \u0026amp;lt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;EOF\n# Multiline/multiple command/s\nEOF\u0026lt;/span\u0026gt;\n)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;output=$(\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Multiline/multiple command/s\u0026lt;/span\u0026gt;\n)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#!/bin/bash\u0026lt;/span\u0026gt;\noutput=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$( bash \u0026amp;lt;\u0026amp;lt;EOF\necho first\necho second\necho third\nEOF\n)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$output\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Output:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;first\nsecond\nthird\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Using \u0026lt;a href=\u0026quot;http://www.gnu.org/software/bash/manual/html_node/Redirections.html#Here-Documents\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;heredoc\u0026lt;/a\u0026gt;, you can simplify things pretty easily by breaking down your long single line code into a multiline one. Another example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;output=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$( ssh -p $port $user@$domain \u0026amp;lt;\u0026amp;lt;EOF\n# Breakdown your long ssh command into multiline here.\nEOF\n)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You need to use either\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;$(command-here)\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;`command-here`\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h3\u0026gt;Example\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#!/bin/bash\u0026lt;/span\u0026gt;\n\nVAR1=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$1\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\nVAR2=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$2\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\nMOREF=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$(sudo run command against \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$VAR1\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; | grep name | cut -c7-)\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$MOREF\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If the command that you are trying to execute fails, it would write the output onto the error stream and would then be printed out to the console.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To avoid it, you must redirect the error stream:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;result=$(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;ls\u0026lt;/span\u0026gt; -l something_that_does_not_exist 2\u0026amp;gt;\u0026amp;amp;1)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is another way and is good to use with some text editors that are unable to correctly highlight every intricate code you create:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;read\u0026lt;/span\u0026gt; -r -d \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt; str \u0026amp;lt; \u0026amp;lt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cat\u0026lt;/span\u0026gt; somefile.txt)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${#str}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$str\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can use backticks (also known as accent graves) or \u0026lt;code\u0026gt;$()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Like:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;OUTPUT=$(x+2);\nOUTPUT=`x+2`;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Both have the same effect. But OUTPUT=$(x+2) is more readable and the latest one.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here are two more ways: \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Please keep in mind that space is very important in Bash. So, if you want your command to run, use as is without introducing any more spaces.\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The following assigns \u0026lt;code\u0026gt;harshil\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;L\u0026lt;/code\u0026gt; and then prints it\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;L=$\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;harshil\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$L\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The following assigns the output of the command \u0026lt;code\u0026gt;tr\u0026lt;/code\u0026gt; to L2. \u0026lt;code\u0026gt;tr\u0026lt;/code\u0026gt; is being operated on another variable, L1.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;L2=$(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$L1\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; | \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tr\u0026lt;/span\u0026gt; [:upper:] [:lower:])\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Some may find this useful. \nInteger values in variable substitution, where the trick is using \u0026lt;code\u0026gt;$(())\u0026lt;/code\u0026gt; double brackets:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;N=3\nM=3\nCOUNT=\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$N\u0026lt;/span\u0026gt;-1\nARR[0]=3\nARR[1]=2\nARR[2]=4\nARR[3]=1\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (( COUNT \u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;${#ARR[@]}\u0026lt;/span\u0026gt; ))\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;do\u0026lt;/span\u0026gt;\n  ARR[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$COUNT\u0026lt;/span\u0026gt;]=$((ARR[COUNT]*M))\n  (( COUNT=\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$COUNT\u0026lt;/span\u0026gt;+\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$N\u0026lt;/span\u0026gt; ))\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;done\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":212,"title":"How do I set a variable to the output of a command in Bash?","content":"\n                \n\u0026lt;p\u0026gt;I have a pretty simple script that is something like the following:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#!/bin/bash\u0026lt;/span\u0026gt;\n\nVAR1=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$1\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\nMOREF=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;sudo run command against $VAR1 | grep name | cut -c7-\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$MOREF\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;When I run this script from the command line and pass it the arguments, I am not getting any output.  However, when I run the commands contained within the \u0026lt;code\u0026gt;$MOREF\u0026lt;/code\u0026gt; variable, I am able to get output.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;How can one take the results of a command that needs to be run within a script, save it to a variable, and then output that variable on the screen?\u0026lt;/p\u0026gt;\n    ","slug":"how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-1657387250909","postType":"QUESTION","createdAt":"2022-07-09T17:20:50.000Z","updatedAt":"2022-07-09T17:20:50.000Z","tags":[{"id":1480,"name":"command-line","slug":"command-line","createdAt":"2022-07-09T17:20:51.000Z","updatedAt":"2022-07-09T17:20:51.000Z","Questions_Tags":{"questionId":212,"tagId":1480}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-1657387250909"},"buildId":"D-Vv5KfwuaE883xCdWfex","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>