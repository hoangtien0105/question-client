<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/9fb80f4eb9e2d3c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9fb80f4eb9e2d3c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/471-84c36aa98dd4107c.js" defer=""></script><script src="/_next/static/chunks/81-bf26e92d2540e305.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-76d2c3e2d98bb08b.js" defer=""></script><script src="/_next/static/9SrIo1zGFc3tF1E8on9-4/_buildManifest.js" defer=""></script><script src="/_next/static/9SrIo1zGFc3tF1E8on9-4/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.eZIPKL code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-c4b0431a-0"]{content:"eZIPKL,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo.svg" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-to-deal-with-settingwithcopywarning-in-pandas-1657384778377#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-c4b0431a-0 eZIPKL flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-to-deal-with-settingwithcopywarning-in-pandas-1657384778377">How to deal with SettingWithCopyWarning in Pandas</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/chained-assignment">chained-assignment</a></div></div><div class="question-content mt-5">
                
<h2>Background</h2>
<p>I just upgraded my Pandas from 0.11 to 0.13.0rc1. Now, the application is popping out many new warnings. One of them like this:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">E:\FinReporter\FM_EXT.py:<span class="hljs-number">449</span>: SettingWithCopyWarning: A value <span class="hljs-keyword">is</span> trying to be <span class="hljs-built_in">set</span> on a copy of a <span class="hljs-built_in">slice</span> <span class="hljs-keyword">from</span> a DataFrame.
Try using .loc[row_index,col_indexer] = value instead
  quote_df[<span class="hljs-string">'TVol'</span>]   = quote_df[<span class="hljs-string">'TVol'</span>]/TVOL_SCALE
</code></pre>
<p>I want to know what exactly it means?  Do I need to change something?</p>
<p>How should I suspend the warning if I insist to use <code>quote_df['TVol']   = quote_df['TVol']/TVOL_SCALE</code>?</p>
<h2>The function that gives errors</h2>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_decode_stock_quote</span>(<span class="hljs-params">list_of_150_stk_str</span>):
    <span class="hljs-string">"""decode the webpage and return dataframe"""</span>

    <span class="hljs-keyword">from</span> cStringIO <span class="hljs-keyword">import</span> StringIO

    str_of_all = <span class="hljs-string">""</span>.join(list_of_150_stk_str)

    quote_df = pd.read_csv(StringIO(str_of_all), sep=<span class="hljs-string">','</span>, names=<span class="hljs-built_in">list</span>(<span class="hljs-string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg'</span>)) <span class="hljs-comment">#dtype={'A': object, 'B': object, 'C': np.float64}</span>
    quote_df.rename(columns={<span class="hljs-string">'A'</span>:<span class="hljs-string">'STK'</span>, <span class="hljs-string">'B'</span>:<span class="hljs-string">'TOpen'</span>, <span class="hljs-string">'C'</span>:<span class="hljs-string">'TPCLOSE'</span>, <span class="hljs-string">'D'</span>:<span class="hljs-string">'TPrice'</span>, <span class="hljs-string">'E'</span>:<span class="hljs-string">'THigh'</span>, <span class="hljs-string">'F'</span>:<span class="hljs-string">'TLow'</span>, <span class="hljs-string">'I'</span>:<span class="hljs-string">'TVol'</span>, <span class="hljs-string">'J'</span>:<span class="hljs-string">'TAmt'</span>, <span class="hljs-string">'e'</span>:<span class="hljs-string">'TDate'</span>, <span class="hljs-string">'f'</span>:<span class="hljs-string">'TTime'</span>}, inplace=<span class="hljs-literal">True</span>)
    quote_df = quote_df.ix[:,[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>]]
    quote_df[<span class="hljs-string">'TClose'</span>] = quote_df[<span class="hljs-string">'TPrice'</span>]
    quote_df[<span class="hljs-string">'RT'</span>]     = <span class="hljs-number">100</span> * (quote_df[<span class="hljs-string">'TPrice'</span>]/quote_df[<span class="hljs-string">'TPCLOSE'</span>] - <span class="hljs-number">1</span>)
    quote_df[<span class="hljs-string">'TVol'</span>]   = quote_df[<span class="hljs-string">'TVol'</span>]/TVOL_SCALE
    quote_df[<span class="hljs-string">'TAmt'</span>]   = quote_df[<span class="hljs-string">'TAmt'</span>]/TAMT_SCALE
    quote_df[<span class="hljs-string">'STK_ID'</span>] = quote_df[<span class="hljs-string">'STK'</span>].<span class="hljs-built_in">str</span>.<span class="hljs-built_in">slice</span>(<span class="hljs-number">13</span>,<span class="hljs-number">19</span>)
    quote_df[<span class="hljs-string">'STK_Name'</span>] = quote_df[<span class="hljs-string">'STK'</span>].<span class="hljs-built_in">str</span>.<span class="hljs-built_in">slice</span>(<span class="hljs-number">21</span>,<span class="hljs-number">30</span>)<span class="hljs-comment">#.decode('gb2312')</span>
    quote_df[<span class="hljs-string">'TDate'</span>]  = quote_df.TDate.<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>:<span class="hljs-number">4</span>]+x[<span class="hljs-number">5</span>:<span class="hljs-number">7</span>]+x[<span class="hljs-number">8</span>:<span class="hljs-number">10</span>])
    
    <span class="hljs-keyword">return</span> quote_df
</code></pre>
<h2>More error messages</h2>
<pre class="lang-py s-code-block"><code class="hljs language-python">E:\FinReporter\FM_EXT.py:<span class="hljs-number">449</span>: SettingWithCopyWarning: A value <span class="hljs-keyword">is</span> trying to be <span class="hljs-built_in">set</span> on a copy of a <span class="hljs-built_in">slice</span> <span class="hljs-keyword">from</span> a DataFrame.
Try using .loc[row_index,col_indexer] = value instead
  quote_df[<span class="hljs-string">'TVol'</span>]   = quote_df[<span class="hljs-string">'TVol'</span>]/TVOL_SCALE
E:\FinReporter\FM_EXT.py:<span class="hljs-number">450</span>: SettingWithCopyWarning: A value <span class="hljs-keyword">is</span> trying to be <span class="hljs-built_in">set</span> on a copy of a <span class="hljs-built_in">slice</span> <span class="hljs-keyword">from</span> a DataFrame.
Try using .loc[row_index,col_indexer] = value instead
  quote_df[<span class="hljs-string">'TAmt'</span>]   = quote_df[<span class="hljs-string">'TAmt'</span>]/TAMT_SCALE
E:\FinReporter\FM_EXT.py:<span class="hljs-number">453</span>: SettingWithCopyWarning: A value <span class="hljs-keyword">is</span> trying to be <span class="hljs-built_in">set</span> on a copy of a <span class="hljs-built_in">slice</span> <span class="hljs-keyword">from</span> a DataFrame.
Try using .loc[row_index,col_indexer] = value instead
  quote_df[<span class="hljs-string">'TDate'</span>]  = quote_df.TDate.<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>:<span class="hljs-number">4</span>]+x[<span class="hljs-number">5</span>:<span class="hljs-number">7</span>]+x[<span class="hljs-number">8</span>:<span class="hljs-number">10</span>])
</code></pre>
    </div></div></div><div class="sc-c4b0431a-2 cRqwQe"><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The <code>SettingWithCopyWarning</code> was created to flag potentially confusing "chained" assignments, such as the following, which does not always work as expected, particularly when the first selection returns a <em>copy</em>.  [see <a href="https://github.com/pydata/pandas/pull/5390" rel="noreferrer">GH5390</a> and <a href="https://github.com/pydata/pandas/issues/5597" rel="noreferrer">GH5597</a> for background discussion.]</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df[df[<span class="hljs-string">'A'</span>] &gt; <span class="hljs-number">2</span>][<span class="hljs-string">'B'</span>] = new_val  <span class="hljs-comment"># new_val not set in df</span>
</code></pre>
<p>The warning offers a suggestion to rewrite as follows:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df.loc[df[<span class="hljs-string">'A'</span>] &gt; <span class="hljs-number">2</span>, <span class="hljs-string">'B'</span>] = new_val
</code></pre>
<p>However, this doesn't fit your usage, which is equivalent to:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df = df[df[<span class="hljs-string">'A'</span>] &gt; <span class="hljs-number">2</span>]
df[<span class="hljs-string">'B'</span>] = new_val
</code></pre>
<p>While it's clear that you don't care about writes making it back to the original frame (since you are overwriting the reference to it), unfortunately this pattern cannot be differentiated from the first chained assignment example. Hence the (false positive) warning. The potential for false positives is addressed in the <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy" rel="noreferrer">docs on indexing</a>, if you'd like to read further.  You can safely disable this new warning with the following assignment.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
pd.options.mode.chained_assignment = <span class="hljs-literal">None</span>  <span class="hljs-comment"># default='warn'</span>
</code></pre>
<hr>
<h2>Other Resources</h2>
<ul>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html" rel="noreferrer">pandas User Guide: Indexing and selecting data</a></li>
<li><a href="https://jakevdp.github.io/PythonDataScienceHandbook/03.02-data-indexing-and-selection.html" rel="noreferrer">Python Data Science Handbook: Data Indexing and Selection</a></li>
<li><a href="https://realpython.com/pandas-settingwithcopywarning/" rel="noreferrer">Real Python: SettingWithCopyWarning in Pandas: Views vs Copies</a></li>
<li><a href="https://www.dataquest.io/blog/settingwithcopywarning/" rel="noreferrer">Dataquest: SettingwithCopyWarning: How to Fix This Warning in Pandas</a></li>
<li><a href="https://towardsdatascience.com/explaining-the-settingwithcopywarning-in-pandas-ebc19d799d25" rel="noreferrer">Towards Data Science: Explaining the SettingWithCopyWarning in pandas</a></li>
</ul>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
<h3>How to deal with <code>SettingWithCopyWarning</code> in Pandas?</h3>
</blockquote>
<p>This post is meant for readers who,</p>
<ol>
<li>Would like to understand what this warning means</li>
<li>Would like to understand different ways of suppressing this warning</li>
<li>Would like to understand how to improve their code and follow good practices to avoid this warning in the future.</li>
</ol>
<p><strong>Setup</strong></p>
<pre class="lang-py s-code-block"><code class="hljs language-python">np.random.seed(<span class="hljs-number">0</span>)
df = pd.DataFrame(np.random.choice(<span class="hljs-number">10</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)), columns=<span class="hljs-built_in">list</span>(<span class="hljs-string">'ABCDE'</span>))
df
   A  B  C  D  E
<span class="hljs-number">0</span>  <span class="hljs-number">5</span>  <span class="hljs-number">0</span>  <span class="hljs-number">3</span>  <span class="hljs-number">3</span>  <span class="hljs-number">7</span>
<span class="hljs-number">1</span>  <span class="hljs-number">9</span>  <span class="hljs-number">3</span>  <span class="hljs-number">5</span>  <span class="hljs-number">2</span>  <span class="hljs-number">4</span>
<span class="hljs-number">2</span>  <span class="hljs-number">7</span>  <span class="hljs-number">6</span>  <span class="hljs-number">8</span>  <span class="hljs-number">8</span>  <span class="hljs-number">1</span>
</code></pre>
<hr>
<h1>What is the <code>SettingWithCopyWarning</code>?</h1>
<p>To know how to deal with this warning, it is important to understand what it means and why it is raised in the first place.</p>
<p>When filtering DataFrames, it is possible slice/index a frame to return either a <em>view</em>, or a <em>copy</em>, depending on the internal layout and various implementation details. A "view" is, as the term suggests, a view into the original data, so modifying the view may modify the original object. On the other hand, a "copy" is a replication of data from the original, and modifying the copy has no effect on the original.</p>
<p>As mentioned by other answers, the <code>SettingWithCopyWarning</code> was created to flag "chained assignment" operations. Consider <code>df</code> in the setup above. Suppose you would like to select all values in column "B" where values in column "A" is &gt; 5. Pandas allows you to do this in different ways, some more correct than others. For example,</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df[df.A &gt; <span class="hljs-number">5</span>][<span class="hljs-string">'B'</span>]
 
<span class="hljs-number">1</span>    <span class="hljs-number">3</span>
<span class="hljs-number">2</span>    <span class="hljs-number">6</span>
Name: B, dtype: int64
</code></pre>
<p>And,</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df.loc[df.A &gt; <span class="hljs-number">5</span>, <span class="hljs-string">'B'</span>]

<span class="hljs-number">1</span>    <span class="hljs-number">3</span>
<span class="hljs-number">2</span>    <span class="hljs-number">6</span>
Name: B, dtype: int64
</code></pre>
<p>These return the same result, so if you are only reading these values, it makes no difference. So, what is the issue? The problem with chained assignment, is that it is generally difficult to predict whether a view or a copy is returned, <strong>so this largely becomes an issue when you are attempting to assign values back.</strong> To build on the earlier example, consider how this code is executed by the interpreter:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df.loc[df.A &gt; <span class="hljs-number">5</span>, <span class="hljs-string">'B'</span>] = <span class="hljs-number">4</span>
<span class="hljs-comment"># becomes</span>
df.__setitem__((df.A &gt; <span class="hljs-number">5</span>, <span class="hljs-string">'B'</span>), <span class="hljs-number">4</span>)
</code></pre>
<p>With a single <code>__setitem__</code> call to <code>df</code>. OTOH, consider this code:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df[df.A &gt; <span class="hljs-number">5</span>][<span class="hljs-string">'B'</span>] = <span class="hljs-number">4</span>
<span class="hljs-comment"># becomes</span>
df.__getitem__(df.A &gt; <span class="hljs-number">5</span>).__setitem__(<span class="hljs-string">'B'</span>, <span class="hljs-number">4</span>)
</code></pre>
<p>Now, depending on whether <code>__getitem__</code> returned a view or a copy, the <code>__setitem__</code> operation <strong>may not work</strong>.</p>
<p>In general, you should use <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.loc.html" rel="noreferrer"><code>loc</code></a> for label-based assignment, and <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iloc.html" rel="noreferrer"><code>iloc</code></a> for integer/positional based assignment, as the spec guarantees that they always operate on the original. Additionally, for setting a single cell, you should use <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.at.html" rel="noreferrer"><code>at</code></a> and <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iat.html" rel="noreferrer"><code>iat</code></a>.</p>
<p>More can be found in the <a href="http://pandas.pydata.org/pandas-docs/stable/indexing.html#returning-a-view-versus-a-copy" rel="noreferrer">documentation</a>.</p>
<blockquote>
<p><strong>Note</strong><br>
All boolean indexing operations done with <code>loc</code> can also be done with <code>iloc</code>. The only difference is that <code>iloc</code> expects either
integers/positions for index or a numpy array of boolean values, and
integer/position indexes for the columns.</p>
<p>For example,</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df.loc[df.A &gt; <span class="hljs-number">5</span>, <span class="hljs-string">'B'</span>] = <span class="hljs-number">4</span>
</code></pre>
<p>Can be written nas</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df.iloc[(df.A &gt; <span class="hljs-number">5</span>).values, <span class="hljs-number">1</span>] = <span class="hljs-number">4</span>
</code></pre>
<p>And,</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df.loc[<span class="hljs-number">1</span>, <span class="hljs-string">'A'</span>] = <span class="hljs-number">100</span>
</code></pre>
<p>Can be written as</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df.iloc[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>] = <span class="hljs-number">100</span>
</code></pre>
<p>And so on.</p>
</blockquote>
<hr>
<h1>Just tell me how to suppress the warning!</h1>
<p>Consider a simple operation on the "A" column of <code>df</code>. Selecting "A" and dividing by 2 will raise the warning, but the operation will work.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df2 = df[[<span class="hljs-string">'A'</span>]]
df2[<span class="hljs-string">'A'</span>] /= <span class="hljs-number">2</span>
/Library/Frameworks/Python.framework/Versions/<span class="hljs-number">3.6</span>/lib/python3<span class="hljs-number">.6</span>/site-packages/IPython/__main__.py:<span class="hljs-number">1</span>: SettingWithCopyWarning: 
A value <span class="hljs-keyword">is</span> trying to be <span class="hljs-built_in">set</span> on a copy of a <span class="hljs-built_in">slice</span> <span class="hljs-keyword">from</span> a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

df2
     A
<span class="hljs-number">0</span>  <span class="hljs-number">2.5</span>
<span class="hljs-number">1</span>  <span class="hljs-number">4.5</span>
<span class="hljs-number">2</span>  <span class="hljs-number">3.5</span>
</code></pre>
<p>There are a couple ways of directly silencing this warning:</p>
<ol>
<li><p>(recommended) <strong>Use <code>loc</code> to slice subsets</strong>:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"> df2 = df.loc[:, [<span class="hljs-string">'A'</span>]]
 df2[<span class="hljs-string">'A'</span>] /= <span class="hljs-number">2</span>     <span class="hljs-comment"># Does not raise </span>
</code></pre>
</li>
<li><p><strong>Change <code>pd.options.mode.chained_assignment</code></strong><br>
Can be set to <code>None</code>, <code>"warn"</code>, or <code>"raise"</code>. <code>"warn"</code> is the default. <code>None</code> will suppress the warning entirely, and <code>"raise"</code> will throw a <code>SettingWithCopyError</code>, preventing the operation from going through.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"> pd.options.mode.chained_assignment = <span class="hljs-literal">None</span>
 df2[<span class="hljs-string">'A'</span>] /= <span class="hljs-number">2</span>
</code></pre>
</li>
<li><p><strong>Make a <code>deepcopy</code></strong></p>
<pre class="lang-py s-code-block"><code class="hljs language-python"> df2 = df[[<span class="hljs-string">'A'</span>]].copy(deep=<span class="hljs-literal">True</span>)
 df2[<span class="hljs-string">'A'</span>] /= <span class="hljs-number">2</span>
</code></pre>
</li>
</ol>
<p><a href="https://stackoverflow.com/questions/20625582/how-to-deal-with-settingwithcopywarning-in-pandas#comment62589711_20625582">@Peter Cotton</a> in the comments, came up with a nice way of non-intrusively changing the mode (modified from <a href="https://gist.github.com/notbanker/2be3ed34539c86e22ffdd88fd95ad8bc" rel="noreferrer">this gist</a>) using a context manager, to set the mode only as long as it is required, and the reset it back to the original state when finished.</p>
<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ChainedAssignent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, chained=<span class="hljs-literal">None</span></span>):
        acceptable = [<span class="hljs-literal">None</span>, <span class="hljs-string">'warn'</span>, <span class="hljs-string">'raise'</span>]
        <span class="hljs-keyword">assert</span> chained <span class="hljs-keyword">in</span> acceptable, <span class="hljs-string">"chained must be in "</span> + <span class="hljs-built_in">str</span>(acceptable)
        self.swcw = chained

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):
        self.saved_swcw = pd.options.mode.chained_assignment
        pd.options.mode.chained_assignment = self.swcw
        <span class="hljs-keyword">return</span> self

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, *args</span>):
        pd.options.mode.chained_assignment = self.saved_swcw
</code></pre>
</blockquote>
<p>The usage is as follows:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment"># some code here</span>
<span class="hljs-keyword">with</span> ChainedAssignent():
    df2[<span class="hljs-string">'A'</span>] /= <span class="hljs-number">2</span>
<span class="hljs-comment"># more code follows</span>
</code></pre>
<p>Or, to raise the exception</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">with</span> ChainedAssignent(chained=<span class="hljs-string">'raise'</span>):
    df2[<span class="hljs-string">'A'</span>] /= <span class="hljs-number">2</span>

SettingWithCopyError: 
A value <span class="hljs-keyword">is</span> trying to be <span class="hljs-built_in">set</span> on a copy of a <span class="hljs-built_in">slice</span> <span class="hljs-keyword">from</span> a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead
</code></pre>
<hr>
<h1>The "XY Problem": What am I doing wrong?</h1>
<p>A lot of the time, users attempt to look for ways of suppressing this exception without fully understanding why it was raised in the first place. This is a good example of an <a href="https://meta.stackexchange.com/q/66377">XY problem</a>, where users attempt to solve a problem "Y" that is actually a symptom of a deeper rooted problem "X". Questions will be raised based on common problems that encounter this warning, and solutions will then be presented.</p>
<blockquote>
<p><strong>Question 1</strong><br>
I have a DataFrame</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df
       A  B  C  D  E
    <span class="hljs-number">0</span>  <span class="hljs-number">5</span>  <span class="hljs-number">0</span>  <span class="hljs-number">3</span>  <span class="hljs-number">3</span>  <span class="hljs-number">7</span>
    <span class="hljs-number">1</span>  <span class="hljs-number">9</span>  <span class="hljs-number">3</span>  <span class="hljs-number">5</span>  <span class="hljs-number">2</span>  <span class="hljs-number">4</span>
    <span class="hljs-number">2</span>  <span class="hljs-number">7</span>  <span class="hljs-number">6</span>  <span class="hljs-number">8</span>  <span class="hljs-number">8</span>  <span class="hljs-number">1</span>
</code></pre>
<p>I want to assign values in col "A" &gt; 5 to 1000. My expected output is</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">      A  B  C  D  E
<span class="hljs-number">0</span>     <span class="hljs-number">5</span>  <span class="hljs-number">0</span>  <span class="hljs-number">3</span>  <span class="hljs-number">3</span>  <span class="hljs-number">7</span>
<span class="hljs-number">1</span>  <span class="hljs-number">1000</span>  <span class="hljs-number">3</span>  <span class="hljs-number">5</span>  <span class="hljs-number">2</span>  <span class="hljs-number">4</span>
<span class="hljs-number">2</span>  <span class="hljs-number">1000</span>  <span class="hljs-number">6</span>  <span class="hljs-number">8</span>  <span class="hljs-number">8</span>  <span class="hljs-number">1</span>
</code></pre>
</blockquote>
<p>Wrong way to do this:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df.A[df.A &gt; <span class="hljs-number">5</span>] = <span class="hljs-number">1000</span>         <span class="hljs-comment"># works, because df.A returns a view</span>
df[df.A &gt; <span class="hljs-number">5</span>][<span class="hljs-string">'A'</span>] = <span class="hljs-number">1000</span>      <span class="hljs-comment"># does not work</span>
df.loc[df.A &gt; <span class="hljs-number">5</span>][<span class="hljs-string">'A'</span>] = <span class="hljs-number">1000</span>   <span class="hljs-comment"># does not work</span>
</code></pre>
<p>Right way using <code>loc</code>:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df.loc[df.A &gt; <span class="hljs-number">5</span>, <span class="hljs-string">'A'</span>] = <span class="hljs-number">1000</span>
</code></pre>
<br>
<blockquote>
<p><strong>Question 2<sup>1</sup></strong><br>
I am trying to set the value in cell (1, 'D') to 12345. My expected output is</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">   A  B  C      D  E
<span class="hljs-number">0</span>  <span class="hljs-number">5</span>  <span class="hljs-number">0</span>  <span class="hljs-number">3</span>      <span class="hljs-number">3</span>  <span class="hljs-number">7</span>
<span class="hljs-number">1</span>  <span class="hljs-number">9</span>  <span class="hljs-number">3</span>  <span class="hljs-number">5</span>  <span class="hljs-number">12345</span>  <span class="hljs-number">4</span>
<span class="hljs-number">2</span>  <span class="hljs-number">7</span>  <span class="hljs-number">6</span>  <span class="hljs-number">8</span>      <span class="hljs-number">8</span>  <span class="hljs-number">1</span>
</code></pre>
<p>I have tried different ways of accessing this cell, such as
<code>df['D'][1]</code>. What is the best way to do this?</p>
<p><sub>1. This question isn't specifically related to the warning, but
it is good to understand how to do this particular operation correctly
so as to avoid situations where the warning could potentially arise in
future.</sub></p>
</blockquote>
<p>You can use any of the following methods to do this.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df.loc[<span class="hljs-number">1</span>, <span class="hljs-string">'D'</span>] = <span class="hljs-number">12345</span>
df.iloc[<span class="hljs-number">1</span>, <span class="hljs-number">3</span>] = <span class="hljs-number">12345</span>
df.at[<span class="hljs-number">1</span>, <span class="hljs-string">'D'</span>] = <span class="hljs-number">12345</span>
df.iat[<span class="hljs-number">1</span>, <span class="hljs-number">3</span>] = <span class="hljs-number">12345</span>
</code></pre>
<br>
<blockquote>
<p><strong>Question 3</strong><br>
I am trying to subset values based on some condition. I have a
DataFrame</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">   A  B  C  D  E
<span class="hljs-number">1</span>  <span class="hljs-number">9</span>  <span class="hljs-number">3</span>  <span class="hljs-number">5</span>  <span class="hljs-number">2</span>  <span class="hljs-number">4</span>
<span class="hljs-number">2</span>  <span class="hljs-number">7</span>  <span class="hljs-number">6</span>  <span class="hljs-number">8</span>  <span class="hljs-number">8</span>  <span class="hljs-number">1</span>
</code></pre>
<p>I would like to assign values in "D" to 123 such that "C" == 5. I
tried</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df2.loc[df2.C == <span class="hljs-number">5</span>, <span class="hljs-string">'D'</span>] = <span class="hljs-number">123</span>
</code></pre>
<p>Which seems fine but I am <em>still</em> getting the
<code>SettingWithCopyWarning</code>! How do I fix this?</p>
</blockquote>
<p>This is actually probably because of code higher up in your pipeline. Did you create <code>df2</code> from something larger, like</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df2 = df[df.A &gt; <span class="hljs-number">5</span>]
</code></pre>
<p>? In this case, boolean indexing will return a view, so <code>df2</code> will reference the original. What you'd need to do is assign <code>df2</code> to a <em>copy</em>:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df2 = df[df.A &gt; <span class="hljs-number">5</span>].copy()
<span class="hljs-comment"># Or,</span>
<span class="hljs-comment"># df2 = df.loc[df.A &gt; 5, :]</span>
</code></pre>
<br>
<blockquote>
<p><strong>Question 4</strong><br>
I'm trying to drop column "C" in-place from</p>
</blockquote>
<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python">   A  B  C  D  E
<span class="hljs-number">1</span>  <span class="hljs-number">9</span>  <span class="hljs-number">3</span>  <span class="hljs-number">5</span>  <span class="hljs-number">2</span>  <span class="hljs-number">4</span>
<span class="hljs-number">2</span>  <span class="hljs-number">7</span>  <span class="hljs-number">6</span>  <span class="hljs-number">8</span>  <span class="hljs-number">8</span>  <span class="hljs-number">1</span>
</code></pre>
<p>But using</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df2.drop(<span class="hljs-string">'C'</span>, axis=<span class="hljs-number">1</span>, inplace=<span class="hljs-literal">True</span>)
</code></pre>
<p>Throws <code>SettingWithCopyWarning</code>. Why is this happening?</p>
</blockquote>
<p>This is because <code>df2</code> must have been created as a view from some other slicing operation, such as</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df2 = df[df.A &gt; <span class="hljs-number">5</span>]
</code></pre>
<p>The solution here is to either make a <code>copy()</code> of <code>df</code>, or use <code>loc</code>, as before.</p>

    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In general the point of the <code>SettingWithCopyWarning</code> is to show users (and especially new users) that they <em>may</em> be operating on a copy and not the original as they think. There <em>are</em> false positives (IOW if you know what you are doing it could be <em>ok</em>). One possibility is simply to turn off the (by default <em>warn</em>) warning as @Garrett suggest.</p>

<p>Here is another option:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">In [<span class="hljs-number">1</span>]: df = DataFrame(np.random.randn(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>), columns=<span class="hljs-built_in">list</span>(<span class="hljs-string">'AB'</span>))

In [<span class="hljs-number">2</span>]: dfa = df.ix[:, [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]]

In [<span class="hljs-number">3</span>]: dfa.is_copy
Out[<span class="hljs-number">3</span>]: <span class="hljs-literal">True</span>

In [<span class="hljs-number">4</span>]: dfa[<span class="hljs-string">'A'</span>] /= <span class="hljs-number">2</span>
/usr/local/<span class="hljs-built_in">bin</span>/ipython:<span class="hljs-number">1</span>: SettingWithCopyWarning: A value <span class="hljs-keyword">is</span> trying to be <span class="hljs-built_in">set</span> on a copy of a <span class="hljs-built_in">slice</span> <span class="hljs-keyword">from</span> a DataFrame.
Try using .loc[row_index,col_indexer] = value instead
  <span class="hljs-comment">#!/usr/local/bin/python</span>
</code></pre>

<p>You can set the <code>is_copy</code> flag to <code>False</code>, which will effectively turn off the check, <em>for that object</em>:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">In [<span class="hljs-number">5</span>]: dfa.is_copy = <span class="hljs-literal">False</span>

In [<span class="hljs-number">6</span>]: dfa[<span class="hljs-string">'A'</span>] /= <span class="hljs-number">2</span>
</code></pre>

<p>If you explicitly copy then no further warning will happen:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">In [<span class="hljs-number">7</span>]: dfa = df.ix[:, [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]].copy()

In [<span class="hljs-number">8</span>]: dfa[<span class="hljs-string">'A'</span>] /= <span class="hljs-number">2</span>
</code></pre>

<p>The code the OP is showing above, while legitimate, and probably something I do as well, is technically a case for this warning, and not a false positive. Another way to <em>not</em> have the warning would be to do the selection operation via <code>reindex</code>, e.g.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">quote_df = quote_df.reindex(columns=[<span class="hljs-string">'STK'</span>, ...])
</code></pre>

<p>Or, </p>

<pre class="lang-py s-code-block"><code class="hljs language-python">quote_df = quote_df.reindex([<span class="hljs-string">'STK'</span>, ...], axis=<span class="hljs-number">1</span>)  <span class="hljs-comment"># v.0.21</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>Pandas dataframe copy warning</h2>
<p>When you go and do something like this:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">quote_df = quote_df.ix[:,[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>]]
</code></pre>
<p><code>pandas.ix</code> <em>in this case</em> returns a new, stand alone dataframe.</p>
<p>Any values you decide to change in this dataframe, will not change the original dataframe.</p>
<p>This is what pandas tries to warn you about.</p>
<hr>
<h2>Why <code>.ix</code> is a bad idea</h2>
<p>The <code>.ix</code> object tries to do more than one thing, and for anyone who has read anything about clean code, this is a strong smell.</p>
<p>Given this dataframe:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df = pd.DataFrame({<span class="hljs-string">"a"</span>: [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>], <span class="hljs-string">"b"</span>: [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>]})
</code></pre>
<p>Two behaviors:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">dfcopy = df.ix[:,[<span class="hljs-string">"a"</span>]]
dfcopy.a.ix[<span class="hljs-number">0</span>] = <span class="hljs-number">2</span>
</code></pre>
<p>Behavior one: <code>dfcopy</code> is now a stand alone dataframe. Changing it will not change <code>df</code></p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df.ix[<span class="hljs-number">0</span>, <span class="hljs-string">"a"</span>] = <span class="hljs-number">3</span>
</code></pre>
<p>Behavior two: This changes the original dataframe.</p>
<hr>
<h2>Use <code>.loc</code> instead</h2>
<p>The pandas developers recognized that the <code>.ix</code> object was quite smelly[speculatively] and thus created two new objects which helps in the accession and assignment of data. (The other being <code>.iloc</code>)</p>
<p><code>.loc</code> is faster, because it does not try to create a copy of the data.</p>
<p><code>.loc</code> is meant to modify your existing dataframe inplace, which is more memory efficient.</p>
<p><code>.loc</code> is predictable, it has one behavior.</p>
<hr>
<h2>The solution</h2>
<p>What you are doing in your code example is loading a big file with lots of columns, then modifying it to be smaller.</p>
<p>The <code>pd.read_csv</code> function can help you out with a lot of this and also make the loading of the file a lot faster.</p>
<p>So instead of doing this</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">quote_df = pd.read_csv(StringIO(str_of_all), sep=<span class="hljs-string">','</span>, names=<span class="hljs-built_in">list</span>(<span class="hljs-string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg'</span>)) <span class="hljs-comment">#dtype={'A': object, 'B': object, 'C': np.float64}</span>
quote_df.rename(columns={<span class="hljs-string">'A'</span>:<span class="hljs-string">'STK'</span>, <span class="hljs-string">'B'</span>:<span class="hljs-string">'TOpen'</span>, <span class="hljs-string">'C'</span>:<span class="hljs-string">'TPCLOSE'</span>, <span class="hljs-string">'D'</span>:<span class="hljs-string">'TPrice'</span>, <span class="hljs-string">'E'</span>:<span class="hljs-string">'THigh'</span>, <span class="hljs-string">'F'</span>:<span class="hljs-string">'TLow'</span>, <span class="hljs-string">'I'</span>:<span class="hljs-string">'TVol'</span>, <span class="hljs-string">'J'</span>:<span class="hljs-string">'TAmt'</span>, <span class="hljs-string">'e'</span>:<span class="hljs-string">'TDate'</span>, <span class="hljs-string">'f'</span>:<span class="hljs-string">'TTime'</span>}, inplace=<span class="hljs-literal">True</span>)
quote_df = quote_df.ix[:,[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>]]
</code></pre>
<p>Do this</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">columns = [<span class="hljs-string">'STK'</span>, <span class="hljs-string">'TPrice'</span>, <span class="hljs-string">'TPCLOSE'</span>, <span class="hljs-string">'TOpen'</span>, <span class="hljs-string">'THigh'</span>, <span class="hljs-string">'TLow'</span>, <span class="hljs-string">'TVol'</span>, <span class="hljs-string">'TAmt'</span>, <span class="hljs-string">'TDate'</span>, <span class="hljs-string">'TTime'</span>]
df = pd.read_csv(StringIO(str_of_all), sep=<span class="hljs-string">','</span>, usecols=[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>])
df.columns = columns
</code></pre>
<p>This will only read the columns you are interested in, and name them properly. No need for using the evil <code>.ix</code> object to do magical stuff.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here I answer the question directly. How to deal with it?</p>

<p>Make a <code>.copy(deep=False)</code> after you slice. See <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.copy.html" rel="noreferrer">pandas.DataFrame.copy</a>.</p>

<p>Wait, doesn't a slice return a copy? After all, this is what the warning message is attempting to say? Read the long answer:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
df = pd.DataFrame({<span class="hljs-string">'x'</span>:[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]})
</code></pre>

<p>This gives a warning:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">df0 = df[df.x&gt;<span class="hljs-number">2</span>]
df0[<span class="hljs-string">'foo'</span>] = <span class="hljs-string">'bar'</span>
</code></pre>

<p>This does not:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">df1 = df[df.x&gt;<span class="hljs-number">2</span>].copy(deep=<span class="hljs-literal">False</span>)
df1[<span class="hljs-string">'foo'</span>] = <span class="hljs-string">'bar'</span>
</code></pre>

<p>Both <code>df0</code> and <code>df1</code> are <code>DataFrame</code> objects, but something about them is different that enables pandas to print the warning. Let's find out what it is.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> inspect
<span class="hljs-built_in">slice</span>= df[df.x&gt;<span class="hljs-number">2</span>]
slice_copy = df[df.x&gt;<span class="hljs-number">2</span>].copy(deep=<span class="hljs-literal">False</span>)
inspect.getmembers(<span class="hljs-built_in">slice</span>)
inspect.getmembers(slice_copy)
</code></pre>

<p>Using your diff tool of choice, you will see that beyond a couple of addresses, the only material difference is this:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">|          | <span class="hljs-built_in">slice</span>   | slice_copy |
| _is_copy | weakref | <span class="hljs-literal">None</span>       |
</code></pre>

<p>The method that decides whether to warn is <code>DataFrame._check_setitem_copy</code> which checks <code>_is_copy</code>. So here you go. Make a <code>copy</code> so that your DataFrame is not <code>_is_copy</code>.</p>

<p>The warning is suggesting to use <code>.loc</code>, but if you use <code>.loc</code> on a frame that <code>_is_copy</code>, you will still get the same warning. Misleading? Yes. Annoying? You bet. Helpful? Potentially, when chained assignment is used. But it cannot correctly detect chain assignment and prints the warning indiscriminately.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This topic is really confusing with Pandas. Luckily, it has a relatively simple solution.</p>
<p>The problem is that it is not always clear whether data filtering operations (e.g. loc) return a copy or a view of the DataFrame. Further use of such filtered DataFrame could therefore be confusing.</p>
<p>The simple solution is (unless you need to work with very large sets of data):</p>
<p>Whenever you need to update any values, always make sure that you explicitly copy the DataFrame before the assignment.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df  <span class="hljs-comment"># Some DataFrame</span>
df = df.loc[:, <span class="hljs-number">0</span>:<span class="hljs-number">2</span>]  <span class="hljs-comment"># Some filtering (unsure whether a view or copy is returned)</span>
df = df.copy()  <span class="hljs-comment"># Ensuring a copy is made</span>
df[df[<span class="hljs-string">"Name"</span>] == <span class="hljs-string">"John"</span>] = <span class="hljs-string">"Johny"</span>  <span class="hljs-comment"># Assignment can be done now (no warning)</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I had been getting this issue with <code>.apply()</code> when assigning a new dataframe from a pre-existing dataframe on which i've used the <code>.query()</code> method. For instance:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">prop_df = df.query(<span class="hljs-string">'column == "value"'</span>)
prop_df[<span class="hljs-string">'new_column'</span>] = prop_df.apply(function, axis=<span class="hljs-number">1</span>)
</code></pre>

<p>Would return this error. The fix that seems to resolve the error in this case is by changing this to:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">prop_df = df.copy(deep=<span class="hljs-literal">True</span>)
prop_df = prop_df.query(<span class="hljs-string">'column == "value"'</span>)
prop_df[<span class="hljs-string">'new_column'</span>] = prop_df.apply(function, axis=<span class="hljs-number">1</span>)
</code></pre>

<p>However, this is NOT efficient especially when using large dataframes, due to having to make a new copy.</p>

<p>If you're using the <code>.apply()</code> method in generating a new column and its values, a fix that resolves the error and is more efficient is by adding <code>.reset_index(drop=True)</code>:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">prop_df = df.query(<span class="hljs-string">'column == "value"'</span>).reset_index(drop=<span class="hljs-literal">True</span>)
prop_df[<span class="hljs-string">'new_column'</span>] = prop_df.apply(function, axis=<span class="hljs-number">1</span>)
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>To remove any doubt, my solution was to make a deep copy of the slice instead of a regular copy.
This may not be applicable depending on your context (Memory constraints / size of the slice, potential for performance degradation - especially if the copy occurs in a loop like it did for me, etc...)</p>
<p>To be clear, here is the warning I received:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">/opt/anaconda3/lib/python3<span class="hljs-number">.6</span>/site-packages/ipykernel/__main__.py:<span class="hljs-number">54</span>:
SettingWithCopyWarning: A value <span class="hljs-keyword">is</span> trying to be <span class="hljs-built_in">set</span> on a copy of a <span class="hljs-built_in">slice</span> <span class="hljs-keyword">from</span> a DataFrame
See the caveats <span class="hljs-keyword">in</span> the documentation:
http://pandas.pydata.org/pandas-docs/stable/indexing.html<span class="hljs-comment">#indexing-view-versus-copy</span>
</code></pre>
<h2>Illustration</h2>
<p>I had doubts that the warning was thrown because of a column I was dropping on a copy of the slice. While not technically trying to set a value in the copy of the slice, that was still a modification of the copy of the slice.
Below are the (simplified) steps I have taken to confirm the suspicion, I hope it will help those of us who are trying to understand the warning.</p>
<h3>Example 1: dropping a column on the original affects the copy</h3>
<p>We knew that already but this is a healthy reminder. This is <em>NOT</em> what the warning is about.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">&gt;&gt; data1 = {<span class="hljs-string">'A'</span>: [<span class="hljs-number">111</span>, <span class="hljs-number">112</span>, <span class="hljs-number">113</span>], <span class="hljs-string">'B'</span>:[<span class="hljs-number">121</span>, <span class="hljs-number">122</span>, <span class="hljs-number">123</span>]}
&gt;&gt; df1 = pd.DataFrame(data1)
&gt;&gt; df1

    A   B
<span class="hljs-number">0</span>   <span class="hljs-number">111</span> <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">112</span> <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">113</span> <span class="hljs-number">123</span>


&gt;&gt; df2 = df1
&gt;&gt; df2

A   B
<span class="hljs-number">0</span>   <span class="hljs-number">111</span> <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">112</span> <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">113</span> <span class="hljs-number">123</span>

<span class="hljs-comment"># Dropping a column on df1 affects df2</span>
&gt;&gt; df1.drop(<span class="hljs-string">'A'</span>, axis=<span class="hljs-number">1</span>, inplace=<span class="hljs-literal">True</span>)
&gt;&gt; df2
    B
<span class="hljs-number">0</span>   <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">123</span>
</code></pre>
<p>It is possible to avoid changes made on df1 to affect df2. Note: you can avoid importing <code>copy.deepcopy</code> by doing <code>df.copy()</code> instead.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">&gt;&gt; data1 = {<span class="hljs-string">'A'</span>: [<span class="hljs-number">111</span>, <span class="hljs-number">112</span>, <span class="hljs-number">113</span>], <span class="hljs-string">'B'</span>:[<span class="hljs-number">121</span>, <span class="hljs-number">122</span>, <span class="hljs-number">123</span>]}
&gt;&gt; df1 = pd.DataFrame(data1)
&gt;&gt; df1

A   B
<span class="hljs-number">0</span>   <span class="hljs-number">111</span> <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">112</span> <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">113</span> <span class="hljs-number">123</span>

&gt;&gt; <span class="hljs-keyword">import</span> copy
&gt;&gt; df2 = copy.deepcopy(df1)
&gt;&gt; df2
A   B
<span class="hljs-number">0</span>   <span class="hljs-number">111</span> <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">112</span> <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">113</span> <span class="hljs-number">123</span>

<span class="hljs-comment"># Dropping a column on df1 does not affect df2</span>
&gt;&gt; df1.drop(<span class="hljs-string">'A'</span>, axis=<span class="hljs-number">1</span>, inplace=<span class="hljs-literal">True</span>)
&gt;&gt; df2
    A   B
<span class="hljs-number">0</span>   <span class="hljs-number">111</span> <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">112</span> <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">113</span> <span class="hljs-number">123</span>
</code></pre>
<h3>Example 2: dropping a column on the copy may affect the original</h3>
<p>This actually illustrates the warning.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">&gt;&gt; data1 = {<span class="hljs-string">'A'</span>: [<span class="hljs-number">111</span>, <span class="hljs-number">112</span>, <span class="hljs-number">113</span>], <span class="hljs-string">'B'</span>:[<span class="hljs-number">121</span>, <span class="hljs-number">122</span>, <span class="hljs-number">123</span>]}
&gt;&gt; df1 = pd.DataFrame(data1)
&gt;&gt; df1

    A   B
<span class="hljs-number">0</span>   <span class="hljs-number">111</span> <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">112</span> <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">113</span> <span class="hljs-number">123</span>

&gt;&gt; df2 = df1
&gt;&gt; df2

    A   B
<span class="hljs-number">0</span>   <span class="hljs-number">111</span> <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">112</span> <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">113</span> <span class="hljs-number">123</span>

<span class="hljs-comment"># Dropping a column on df2 can affect df1</span>
<span class="hljs-comment"># No slice involved here, but I believe the principle remains the same?</span>
<span class="hljs-comment"># Let me know if not</span>
&gt;&gt; df2.drop(<span class="hljs-string">'A'</span>, axis=<span class="hljs-number">1</span>, inplace=<span class="hljs-literal">True</span>)
&gt;&gt; df1

B
<span class="hljs-number">0</span>   <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">123</span>
</code></pre>
<p>It is possible to avoid changes made on df2 to affect df1</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">&gt;&gt; data1 = {<span class="hljs-string">'A'</span>: [<span class="hljs-number">111</span>, <span class="hljs-number">112</span>, <span class="hljs-number">113</span>], <span class="hljs-string">'B'</span>:[<span class="hljs-number">121</span>, <span class="hljs-number">122</span>, <span class="hljs-number">123</span>]}
&gt;&gt; df1 = pd.DataFrame(data1)
&gt;&gt; df1

    A   B
<span class="hljs-number">0</span>   <span class="hljs-number">111</span> <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">112</span> <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">113</span> <span class="hljs-number">123</span>

&gt;&gt; <span class="hljs-keyword">import</span> copy
&gt;&gt; df2 = copy.deepcopy(df1)
&gt;&gt; df2

A   B
<span class="hljs-number">0</span>   <span class="hljs-number">111</span> <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">112</span> <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">113</span> <span class="hljs-number">123</span>

&gt;&gt; df2.drop(<span class="hljs-string">'A'</span>, axis=<span class="hljs-number">1</span>, inplace=<span class="hljs-literal">True</span>)
&gt;&gt; df1

A   B
<span class="hljs-number">0</span>   <span class="hljs-number">111</span> <span class="hljs-number">121</span>
<span class="hljs-number">1</span>   <span class="hljs-number">112</span> <span class="hljs-number">122</span>
<span class="hljs-number">2</span>   <span class="hljs-number">113</span> <span class="hljs-number">123</span>
</code></pre>
<p>Cheers!</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For me worked:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-comment"># ...</span>
pd.set_option(<span class="hljs-string">'mode.chained_assignment'</span>, <span class="hljs-literal">None</span>)
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This should work:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">quote_df.loc[:,<span class="hljs-string">'TVol'</span>] = quote_df[<span class="hljs-string">'TVol'</span>]/TVOL_SCALE
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Some may want to simply suppress the warning:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SupressSettingWithCopyWarning</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):
        pd.options.mode.chained_assignment = <span class="hljs-literal">None</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, *args</span>):
        pd.options.mode.chained_assignment = <span class="hljs-string">'warn'</span>

<span class="hljs-keyword">with</span> SupressSettingWithCopyWarning():
    <span class="hljs-comment">#code that produces warning</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Followup beginner question / remark</strong></p>

<p>Maybe a clarification for other beginners like me (I come from R which seems to work a bit differently under the hood). The following harmless-looking and functional code kept producing the SettingWithCopy warning, and I couldn't figure out why. I had both read and understood the issued with "chained indexing", but my code doesn't contain any:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">plot</span>(<span class="hljs-params">pdb, df, title, **kw</span>):
    df[<span class="hljs-string">'target'</span>] = (df[<span class="hljs-string">'ogg'</span>] + df[<span class="hljs-string">'ugg'</span>]) / <span class="hljs-number">2</span>
    <span class="hljs-comment"># ...</span>
</code></pre>

<p>But then, later, much too late, I looked at where the plot() function is called:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">    df = data[data[<span class="hljs-string">'anz_emw'</span>] &gt; <span class="hljs-number">0</span>]
    pixbuf = plot(pdb, df, title)
</code></pre>

<p>So "df" isn't a data frame but an object that somehow remembers that it was created by indexing a data frame (so is that a view?) which would make the line in plot()</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"> df[<span class="hljs-string">'target'</span>] = ...
</code></pre>

<p>equivalent to</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"> data[data[<span class="hljs-string">'anz_emw'</span>] &gt; <span class="hljs-number">0</span>][<span class="hljs-string">'target'</span>] = ...
</code></pre>

<p>which is a chained indexing. Did I get that right?</p>

<p>Anyway, </p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">plot</span>(<span class="hljs-params">pdb, df, title, **kw</span>):
    df.loc[:,<span class="hljs-string">'target'</span>] = (df[<span class="hljs-string">'ogg'</span>] + df[<span class="hljs-string">'ugg'</span>]) / <span class="hljs-number">2</span>
</code></pre>

<p>fixed it.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As this question is already fully explained and discussed in existing answers I will just provide a neat <code>pandas</code> approach to the context manager using <code>pandas.option_context</code> (links to <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.option_context.html" rel="noreferrer">docs</a> and <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/options.html" rel="noreferrer">example</a>) - there is absolutely no need to create a custom class with all the dunder methods and other bells and whistles.</p>

<p>First the context manager code itself:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager

<span class="hljs-meta">@contextmanager</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">SuppressPandasWarning</span>():
    <span class="hljs-keyword">with</span> pd.option_context(<span class="hljs-string">"mode.chained_assignment"</span>, <span class="hljs-literal">None</span>):
        <span class="hljs-keyword">yield</span>
</code></pre>

<p>Then an example:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> string <span class="hljs-keyword">import</span> ascii_letters

a = pd.DataFrame({<span class="hljs-string">"A"</span>: <span class="hljs-built_in">list</span>(ascii_letters[<span class="hljs-number">0</span>:<span class="hljs-number">4</span>]), <span class="hljs-string">"B"</span>: <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">4</span>)})

mask = a[<span class="hljs-string">"A"</span>].isin([<span class="hljs-string">"c"</span>, <span class="hljs-string">"d"</span>])
<span class="hljs-comment"># Even shallow copy below is enough to not raise the warning, but why is a mystery to me.</span>
b = a.loc[mask]  <span class="hljs-comment"># .copy(deep=False)</span>

<span class="hljs-comment"># Raises the `SettingWithCopyWarning`</span>
b[<span class="hljs-string">"B"</span>] = b[<span class="hljs-string">"B"</span>] * <span class="hljs-number">2</span>

<span class="hljs-comment"># Does not!</span>
<span class="hljs-keyword">with</span> SuppressPandasWarning():
    b[<span class="hljs-string">"B"</span>] = b[<span class="hljs-string">"B"</span>] * <span class="hljs-number">2</span>
</code></pre>

<p>Worth noticing is that both approches do not modify <code>a</code>, which is a bit surprising to me, and even a shallow df copy with <code>.copy(deep=False)</code> would prevent this warning to be raised (as far as I understand shallow copy should at least modify <code>a</code> as well, but it doesn't. <code>pandas</code> magic.).</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You could avoid the whole problem like this, I believe:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">return</span> (
    pd.read_csv(StringIO(str_of_all), sep=<span class="hljs-string">','</span>, names=<span class="hljs-built_in">list</span>(<span class="hljs-string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg'</span>)) <span class="hljs-comment">#dtype={'A': object, 'B': object, 'C': np.float64}</span>
    .rename(columns={<span class="hljs-string">'A'</span>:<span class="hljs-string">'STK'</span>, <span class="hljs-string">'B'</span>:<span class="hljs-string">'TOpen'</span>, <span class="hljs-string">'C'</span>:<span class="hljs-string">'TPCLOSE'</span>, <span class="hljs-string">'D'</span>:<span class="hljs-string">'TPrice'</span>, <span class="hljs-string">'E'</span>:<span class="hljs-string">'THigh'</span>, <span class="hljs-string">'F'</span>:<span class="hljs-string">'TLow'</span>, <span class="hljs-string">'I'</span>:<span class="hljs-string">'TVol'</span>, <span class="hljs-string">'J'</span>:<span class="hljs-string">'TAmt'</span>, <span class="hljs-string">'e'</span>:<span class="hljs-string">'TDate'</span>, <span class="hljs-string">'f'</span>:<span class="hljs-string">'TTime'</span>}, inplace=<span class="hljs-literal">True</span>)
    .ix[:,[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>]]
    .assign(
        TClose=<span class="hljs-keyword">lambda</span> df: df[<span class="hljs-string">'TPrice'</span>],
        RT=<span class="hljs-keyword">lambda</span> df: <span class="hljs-number">100</span> * (df[<span class="hljs-string">'TPrice'</span>]/quote_df[<span class="hljs-string">'TPCLOSE'</span>] - <span class="hljs-number">1</span>),
        TVol=<span class="hljs-keyword">lambda</span> df: df[<span class="hljs-string">'TVol'</span>]/TVOL_SCALE,
        TAmt=<span class="hljs-keyword">lambda</span> df: df[<span class="hljs-string">'TAmt'</span>]/TAMT_SCALE,
        STK_ID=<span class="hljs-keyword">lambda</span> df: df[<span class="hljs-string">'STK'</span>].<span class="hljs-built_in">str</span>.<span class="hljs-built_in">slice</span>(<span class="hljs-number">13</span>,<span class="hljs-number">19</span>),
        STK_Name=<span class="hljs-keyword">lambda</span> df: df[<span class="hljs-string">'STK'</span>].<span class="hljs-built_in">str</span>.<span class="hljs-built_in">slice</span>(<span class="hljs-number">21</span>,<span class="hljs-number">30</span>)<span class="hljs-comment">#.decode('gb2312'),</span>
        TDate=<span class="hljs-keyword">lambda</span> df: df.TDate.<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>:<span class="hljs-number">4</span>]+x[<span class="hljs-number">5</span>:<span class="hljs-number">7</span>]+x[<span class="hljs-number">8</span>:<span class="hljs-number">10</span>]),
    )
)
</code></pre>

<p>Using Assign. From the <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.assign.html" rel="nofollow noreferrer">documentation</a>: Assign new columns to a DataFrame, returning a new object (a copy) with all the original columns in addition to the new ones. </p>

<p>See Tom Augspurger's article on method chaining in pandas: <a href="https://tomaugspurger.github.io/method-chaining" rel="nofollow noreferrer">https://tomaugspurger.github.io/method-chaining</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you have assigned the slice to a variable and want to set using the variable as in the following:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">df2 = df[df[<span class="hljs-string">'A'</span>] &gt; <span class="hljs-number">2</span>]
df2[<span class="hljs-string">'B'</span>] = value
</code></pre>

<p>And you do not want to use Jeffs solution because your condition computing <code>df2</code> is to long or for some other reason, then you can use the following:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">df.loc[df2.index.tolist(), <span class="hljs-string">'B'</span>] = value
</code></pre>

<p><code>df2.index.tolist()</code> returns the indices from all entries in df2, which will then be used to set column B in the original dataframe.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>this might apply to numpy only, which means you might need to import it,  but the data i used for my examples numpy was not essential with the calculations, but you can simply stop this settingwithcopy warning message, by using this 1 Line of Code below,</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">np.warnings.filterwarnings(<span class="hljs-string">'ignore'</span>)
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For me this issue occured in a following &gt;simplified&lt; example. And I was also able to solve it (hopefully with a correct solution):</p>

<p>old code with warning:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_old_dataframe</span>(<span class="hljs-params">old_dataframe, new_dataframe</span>):
    <span class="hljs-keyword">for</span> new_index, new_row <span class="hljs-keyword">in</span> new_dataframe.iterrorws():
        old_dataframe.loc[new_index] = update_row(old_dataframe.loc[new_index], new_row)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">update_row</span>(<span class="hljs-params">old_row, new_row</span>):
    <span class="hljs-keyword">for</span> field <span class="hljs-keyword">in</span> [list_of_columns]:
        <span class="hljs-comment"># line with warning because of chain indexing old_dataframe[new_index][field]</span>
        old_row[field] = new_row[field]  
    <span class="hljs-keyword">return</span> old_row
</code></pre>

<p>This printed the warning for the line <code>old_row[field] = new_row[field]</code></p>

<p>Since the rows in update_row method are actually type <code>Series</code>, I replaced the line with:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">old_row.at[field] = new_row.at[field]
</code></pre>

<p>i.e. <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.at.html" rel="nofollow noreferrer">method</a> for accessing/lookups for a <code>Series</code>. Eventhough both works just fine and the result is same, this way I don't have to disable the warnings (=keep them for other chain indexing issues somewhere else).</p>

<p>I hope this may help someone.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I was facing the same warning, while I executed this  part of my code:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scaler</span>(<span class="hljs-params">self, numericals</span>):
        scaler = MinMaxScaler()
        self.data.loc[:, numericals[<span class="hljs-number">0</span>]] = scaler.fit_transform(self.data.loc[:, numericals[<span class="hljs-number">0</span>]])
        self.data.loc[:, numericals[<span class="hljs-number">1</span>]] = scaler.fit_transform(self.data.loc[:, numericals[<span class="hljs-number">1</span>]])
</code></pre>
<p>which <code>scaler</code> is a MinMaxScaler and <code>numericals[0]</code>  contains names of 3 of my numerical columns.
the  warning was removed as I changed the code to:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scaler</span>(<span class="hljs-params">self, numericals</span>):
        scaler = MinMaxScaler()
        self.data.loc[:][numericals[<span class="hljs-number">0</span>]] = scaler.fit_transform(self.data.loc[:][numericals[<span class="hljs-number">0</span>]])
        self.data.loc[:][numericals[<span class="hljs-number">1</span>]] = scaler.fit_transform(self.data.loc[:][numericals[<span class="hljs-number">1</span>]])
</code></pre>
<p>So, Just change <code>[:, ~]</code> to <code>[:][~]</code></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In my case, I would create a new column based on the index but I got this warning as you:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df_temp[<span class="hljs-string">"Quarter"</span>] = df_temp.index.quarter
</code></pre>
<p>I use insert() instead of direct assignment and it works for me:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">df_temp.insert(loc=<span class="hljs-number">0</span>, column=<span class="hljs-string">'Quarter'</span>, value=df_temp.index.quarter)
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Just create a copy of your dataframe(s) using <code>.copy()</code> method before the warning appears, to remove all of your warnings. This happens because we do not want to make changes to the original quote_df. In other words, we do not want to play with the reference of the object of the quote_df which we have created for quote_df.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">quote_df = quote_df.copy()
</code></pre>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;SettingWithCopyWarning\u0026lt;/code\u0026gt; was created to flag potentially confusing \u0026quot;chained\u0026quot; assignments, such as the following, which does not always work as expected, particularly when the first selection returns a \u0026lt;em\u0026gt;copy\u0026lt;/em\u0026gt;.  [see \u0026lt;a href=\u0026quot;https://github.com/pydata/pandas/pull/5390\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;GH5390\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;https://github.com/pydata/pandas/issues/5597\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;GH5597\u0026lt;/a\u0026gt; for background discussion.]\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df[df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;] = new_val  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# new_val not set in df\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The warning offers a suggestion to rewrite as follows:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.loc[df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;] = new_val\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;However, this doesn\u0026apos;t fit your usage, which is equivalent to:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df = df[df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]\ndf[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;] = new_val\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;While it\u0026apos;s clear that you don\u0026apos;t care about writes making it back to the original frame (since you are overwriting the reference to it), unfortunately this pattern cannot be differentiated from the first chained assignment example. Hence the (false positive) warning. The potential for false positives is addressed in the \u0026lt;a href=\u0026quot;https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;docs on indexing\u0026lt;/a\u0026gt;, if you\u0026apos;d like to read further.  You can safely disable this new warning with the following assignment.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; pandas \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; pd\npd.options.mode.chained_assignment = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# default=\u0026apos;warn\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h2\u0026gt;Other Resources\u0026lt;/h2\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;pandas User Guide: Indexing and selecting data\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://jakevdp.github.io/PythonDataScienceHandbook/03.02-data-indexing-and-selection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Python Data Science Handbook: Data Indexing and Selection\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://realpython.com/pandas-settingwithcopywarning/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Real Python: SettingWithCopyWarning in Pandas: Views vs Copies\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://www.dataquest.io/blog/settingwithcopywarning/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Dataquest: SettingwithCopyWarning: How to Fix This Warning in Pandas\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://towardsdatascience.com/explaining-the-settingwithcopywarning-in-pandas-ebc19d799d25\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Towards Data Science: Explaining the SettingWithCopyWarning in pandas\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;blockquote\u0026gt;\n\u0026lt;h3\u0026gt;How to deal with \u0026lt;code\u0026gt;SettingWithCopyWarning\u0026lt;/code\u0026gt; in Pandas?\u0026lt;/h3\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;This post is meant for readers who,\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Would like to understand what this warning means\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Would like to understand different ways of suppressing this warning\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Would like to understand how to improve their code and follow good practices to avoid this warning in the future.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Setup\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;np.random.seed(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\ndf = pd.DataFrame(np.random.choice(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;)), columns=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ABCDE\u0026apos;\u0026lt;/span\u0026gt;))\ndf\n   A  B  C  D  E\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h1\u0026gt;What is the \u0026lt;code\u0026gt;SettingWithCopyWarning\u0026lt;/code\u0026gt;?\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;To know how to deal with this warning, it is important to understand what it means and why it is raised in the first place.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;When filtering DataFrames, it is possible slice/index a frame to return either a \u0026lt;em\u0026gt;view\u0026lt;/em\u0026gt;, or a \u0026lt;em\u0026gt;copy\u0026lt;/em\u0026gt;, depending on the internal layout and various implementation details. A \u0026quot;view\u0026quot; is, as the term suggests, a view into the original data, so modifying the view may modify the original object. On the other hand, a \u0026quot;copy\u0026quot; is a replication of data from the original, and modifying the copy has no effect on the original.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As mentioned by other answers, the \u0026lt;code\u0026gt;SettingWithCopyWarning\u0026lt;/code\u0026gt; was created to flag \u0026quot;chained assignment\u0026quot; operations. Consider \u0026lt;code\u0026gt;df\u0026lt;/code\u0026gt; in the setup above. Suppose you would like to select all values in column \u0026quot;B\u0026quot; where values in column \u0026quot;A\u0026quot; is \u0026amp;gt; 5. Pandas allows you to do this in different ways, some more correct than others. For example,\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;]\n \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;\nName: B, dtype: int64\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And,\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.loc[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;]\n\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;\nName: B, dtype: int64\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;These return the same result, so if you are only reading these values, it makes no difference. So, what is the issue? The problem with chained assignment, is that it is generally difficult to predict whether a view or a copy is returned, \u0026lt;strong\u0026gt;so this largely becomes an issue when you are attempting to assign values back.\u0026lt;/strong\u0026gt; To build on the earlier example, consider how this code is executed by the interpreter:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.loc[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# becomes\u0026lt;/span\u0026gt;\ndf.__setitem__((df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;With a single \u0026lt;code\u0026gt;__setitem__\u0026lt;/code\u0026gt; call to \u0026lt;code\u0026gt;df\u0026lt;/code\u0026gt;. OTOH, consider this code:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# becomes\u0026lt;/span\u0026gt;\ndf.__getitem__(df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;).__setitem__(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Now, depending on whether \u0026lt;code\u0026gt;__getitem__\u0026lt;/code\u0026gt; returned a view or a copy, the \u0026lt;code\u0026gt;__setitem__\u0026lt;/code\u0026gt; operation \u0026lt;strong\u0026gt;may not work\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In general, you should use \u0026lt;a href=\u0026quot;https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.loc.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;loc\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; for label-based assignment, and \u0026lt;a href=\u0026quot;https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iloc.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;iloc\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; for integer/positional based assignment, as the spec guarantees that they always operate on the original. Additionally, for setting a single cell, you should use \u0026lt;a href=\u0026quot;https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.at.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;at\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iat.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;iat\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;More can be found in the \u0026lt;a href=\u0026quot;http://pandas.pydata.org/pandas-docs/stable/indexing.html#returning-a-view-versus-a-copy\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;documentation\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Note\u0026lt;/strong\u0026gt;\u0026lt;br\u0026gt;\nAll boolean indexing operations done with \u0026lt;code\u0026gt;loc\u0026lt;/code\u0026gt; can also be done with \u0026lt;code\u0026gt;iloc\u0026lt;/code\u0026gt;. The only difference is that \u0026lt;code\u0026gt;iloc\u0026lt;/code\u0026gt; expects either\nintegers/positions for index or a numpy array of boolean values, and\ninteger/position indexes for the columns.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For example,\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.loc[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Can be written nas\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.iloc[(df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;).values, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And,\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.loc[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Can be written as\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.iloc[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And so on.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h1\u0026gt;Just tell me how to suppress the warning!\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;Consider a simple operation on the \u0026quot;A\u0026quot; column of \u0026lt;code\u0026gt;df\u0026lt;/code\u0026gt;. Selecting \u0026quot;A\u0026quot; and dividing by 2 will raise the warning, but the operation will work.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df2 = df[[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;]]\ndf2[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] /= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n/Library/Frameworks/Python.framework/Versions/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.6\u0026lt;/span\u0026gt;/lib/python3\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;.6\u0026lt;/span\u0026gt;/site-packages/IPython/__main__.py:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;: SettingWithCopyWarning: \nA value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; trying to be \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; on a copy of a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n\ndf2\n     A\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.5\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.5\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.5\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;There are a couple ways of directly silencing this warning:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;(recommended) \u0026lt;strong\u0026gt;Use \u0026lt;code\u0026gt;loc\u0026lt;/code\u0026gt; to slice subsets\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; df2 = df.loc[:, [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;]]\n df2[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] /= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Does not raise \u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Change \u0026lt;code\u0026gt;pd.options.mode.chained_assignment\u0026lt;/code\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;br\u0026gt;\nCan be set to \u0026lt;code\u0026gt;None\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;\u0026quot;warn\u0026quot;\u0026lt;/code\u0026gt;, or \u0026lt;code\u0026gt;\u0026quot;raise\u0026quot;\u0026lt;/code\u0026gt;. \u0026lt;code\u0026gt;\u0026quot;warn\u0026quot;\u0026lt;/code\u0026gt; is the default. \u0026lt;code\u0026gt;None\u0026lt;/code\u0026gt; will suppress the warning entirely, and \u0026lt;code\u0026gt;\u0026quot;raise\u0026quot;\u0026lt;/code\u0026gt; will throw a \u0026lt;code\u0026gt;SettingWithCopyError\u0026lt;/code\u0026gt;, preventing the operation from going through.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; pd.options.mode.chained_assignment = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;\n df2[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] /= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Make a \u0026lt;code\u0026gt;deepcopy\u0026lt;/code\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; df2 = df[[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;]].copy(deep=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n df2[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] /= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/20625582/how-to-deal-with-settingwithcopywarning-in-pandas#comment62589711_20625582\u0026quot;\u0026gt;@Peter Cotton\u0026lt;/a\u0026gt; in the comments, came up with a nice way of non-intrusively changing the mode (modified from \u0026lt;a href=\u0026quot;https://gist.github.com/notbanker/2be3ed34539c86e22ffdd88fd95ad8bc\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;this gist\u0026lt;/a\u0026gt;) using a context manager, to set the mode only as long as it is required, and the reset it back to the original state when finished.\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ChainedAssignent\u0026lt;/span\u0026gt;:\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, chained=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n        acceptable = [\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;warn\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;raise\u0026apos;\u0026lt;/span\u0026gt;]\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt; chained \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; acceptable, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;chained must be in \u0026quot;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;(acceptable)\n        self.swcw = chained\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__enter__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        self.saved_swcw = pd.options.mode.chained_assignment\n        pd.options.mode.chained_assignment = self.swcw\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; self\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__exit__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, *args\u0026lt;/span\u0026gt;):\n        pd.options.mode.chained_assignment = self.saved_swcw\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;The usage is as follows:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# some code here\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; ChainedAssignent():\n    df2[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] /= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# more code follows\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Or, to raise the exception\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; ChainedAssignent(chained=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;raise\u0026apos;\u0026lt;/span\u0026gt;):\n    df2[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] /= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\nSettingWithCopyError: \nA value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; trying to be \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; on a copy of a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h1\u0026gt;The \u0026quot;XY Problem\u0026quot;: What am I doing wrong?\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;A lot of the time, users attempt to look for ways of suppressing this exception without fully understanding why it was raised in the first place. This is a good example of an \u0026lt;a href=\u0026quot;https://meta.stackexchange.com/q/66377\u0026quot;\u0026gt;XY problem\u0026lt;/a\u0026gt;, where users attempt to solve a problem \u0026quot;Y\u0026quot; that is actually a symptom of a deeper rooted problem \u0026quot;X\u0026quot;. Questions will be raised based on common problems that encounter this warning, and solutions will then be presented.\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Question 1\u0026lt;/strong\u0026gt;\u0026lt;br\u0026gt;\nI have a DataFrame\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df\n       A  B  C  D  E\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I want to assign values in col \u0026quot;A\u0026quot; \u0026amp;gt; 5 to 1000. My expected output is\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;      A  B  C  D  E\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;Wrong way to do this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.A[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# works, because df.A returns a view\u0026lt;/span\u0026gt;\ndf[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# does not work\u0026lt;/span\u0026gt;\ndf.loc[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# does not work\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Right way using \u0026lt;code\u0026gt;loc\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.loc[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;br\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Question 2\u0026lt;sup\u0026gt;1\u0026lt;/sup\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;br\u0026gt;\nI am trying to set the value in cell (1, \u0026apos;D\u0026apos;) to 12345. My expected output is\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;   A  B  C      D  E\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12345\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I have tried different ways of accessing this cell, such as\n\u0026lt;code\u0026gt;df[\u0026apos;D\u0026apos;][1]\u0026lt;/code\u0026gt;. What is the best way to do this?\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;sub\u0026gt;1. This question isn\u0026apos;t specifically related to the warning, but\nit is good to understand how to do this particular operation correctly\nso as to avoid situations where the warning could potentially arise in\nfuture.\u0026lt;/sub\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;You can use any of the following methods to do this.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.loc[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;D\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12345\u0026lt;/span\u0026gt;\ndf.iloc[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12345\u0026lt;/span\u0026gt;\ndf.at[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;D\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12345\u0026lt;/span\u0026gt;\ndf.iat[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12345\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;br\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Question 3\u0026lt;/strong\u0026gt;\u0026lt;br\u0026gt;\nI am trying to subset values based on some condition. I have a\nDataFrame\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;   A  B  C  D  E\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I would like to assign values in \u0026quot;D\u0026quot; to 123 such that \u0026quot;C\u0026quot; == 5. I\ntried\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df2.loc[df2.C == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;D\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Which seems fine but I am \u0026lt;em\u0026gt;still\u0026lt;/em\u0026gt; getting the\n\u0026lt;code\u0026gt;SettingWithCopyWarning\u0026lt;/code\u0026gt;! How do I fix this?\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;This is actually probably because of code higher up in your pipeline. Did you create \u0026lt;code\u0026gt;df2\u0026lt;/code\u0026gt; from something larger, like\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df2 = df[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;? In this case, boolean indexing will return a view, so \u0026lt;code\u0026gt;df2\u0026lt;/code\u0026gt; will reference the original. What you\u0026apos;d need to do is assign \u0026lt;code\u0026gt;df2\u0026lt;/code\u0026gt; to a \u0026lt;em\u0026gt;copy\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df2 = df[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;].copy()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Or,\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# df2 = df.loc[df.A \u0026amp;gt; 5, :]\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;br\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Question 4\u0026lt;/strong\u0026gt;\u0026lt;br\u0026gt;\nI\u0026apos;m trying to drop column \u0026quot;C\u0026quot; in-place from\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;   A  B  C  D  E\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;But using\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df2.drop(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;C\u0026apos;\u0026lt;/span\u0026gt;, axis=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, inplace=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Throws \u0026lt;code\u0026gt;SettingWithCopyWarning\u0026lt;/code\u0026gt;. Why is this happening?\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;This is because \u0026lt;code\u0026gt;df2\u0026lt;/code\u0026gt; must have been created as a view from some other slicing operation, such as\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df2 = df[df.A \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The solution here is to either make a \u0026lt;code\u0026gt;copy()\u0026lt;/code\u0026gt; of \u0026lt;code\u0026gt;df\u0026lt;/code\u0026gt;, or use \u0026lt;code\u0026gt;loc\u0026lt;/code\u0026gt;, as before.\u0026lt;/p\u0026gt;\n\n    ","\n\u0026lt;p\u0026gt;In general the point of the \u0026lt;code\u0026gt;SettingWithCopyWarning\u0026lt;/code\u0026gt; is to show users (and especially new users) that they \u0026lt;em\u0026gt;may\u0026lt;/em\u0026gt; be operating on a copy and not the original as they think. There \u0026lt;em\u0026gt;are\u0026lt;/em\u0026gt; false positives (IOW if you know what you are doing it could be \u0026lt;em\u0026gt;ok\u0026lt;/em\u0026gt;). One possibility is simply to turn off the (by default \u0026lt;em\u0026gt;warn\u0026lt;/em\u0026gt;) warning as @Garrett suggest.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here is another option:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;In [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]: df = DataFrame(np.random.randn(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;), columns=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;AB\u0026apos;\u0026lt;/span\u0026gt;))\n\nIn [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]: dfa = df.ix[:, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]]\n\nIn [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]: dfa.is_copy\nOut[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\n\nIn [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]: dfa[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] /= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n/usr/local/\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bin\u0026lt;/span\u0026gt;/ipython:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;: SettingWithCopyWarning: A value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; trying to be \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; on a copy of a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; a DataFrame.\nTry using .loc[row_index,col_indexer] = value instead\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#!/usr/local/bin/python\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can set the \u0026lt;code\u0026gt;is_copy\u0026lt;/code\u0026gt; flag to \u0026lt;code\u0026gt;False\u0026lt;/code\u0026gt;, which will effectively turn off the check, \u0026lt;em\u0026gt;for that object\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;In [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]: dfa.is_copy = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\n\nIn [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]: dfa[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] /= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If you explicitly copy then no further warning will happen:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;In [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]: dfa = df.ix[:, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]].copy()\n\nIn [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]: dfa[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] /= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The code the OP is showing above, while legitimate, and probably something I do as well, is technically a case for this warning, and not a false positive. Another way to \u0026lt;em\u0026gt;not\u0026lt;/em\u0026gt; have the warning would be to do the selection operation via \u0026lt;code\u0026gt;reindex\u0026lt;/code\u0026gt;, e.g.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;quote_df = quote_df.reindex(columns=[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK\u0026apos;\u0026lt;/span\u0026gt;, ...])\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or, \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;quote_df = quote_df.reindex([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK\u0026apos;\u0026lt;/span\u0026gt;, ...], axis=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# v.0.21\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;Pandas dataframe copy warning\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;When you go and do something like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;quote_df = quote_df.ix[:,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;31\u0026lt;/span\u0026gt;]]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;pandas.ix\u0026lt;/code\u0026gt; \u0026lt;em\u0026gt;in this case\u0026lt;/em\u0026gt; returns a new, stand alone dataframe.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Any values you decide to change in this dataframe, will not change the original dataframe.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This is what pandas tries to warn you about.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h2\u0026gt;Why \u0026lt;code\u0026gt;.ix\u0026lt;/code\u0026gt; is a bad idea\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;.ix\u0026lt;/code\u0026gt; object tries to do more than one thing, and for anyone who has read anything about clean code, this is a strong smell.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Given this dataframe:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df = pd.DataFrame({\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]})\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Two behaviors:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;dfcopy = df.ix[:,[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;]]\ndfcopy.a.ix[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Behavior one: \u0026lt;code\u0026gt;dfcopy\u0026lt;/code\u0026gt; is now a stand alone dataframe. Changing it will not change \u0026lt;code\u0026gt;df\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.ix[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Behavior two: This changes the original dataframe.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h2\u0026gt;Use \u0026lt;code\u0026gt;.loc\u0026lt;/code\u0026gt; instead\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;The pandas developers recognized that the \u0026lt;code\u0026gt;.ix\u0026lt;/code\u0026gt; object was quite smelly[speculatively] and thus created two new objects which helps in the accession and assignment of data. (The other being \u0026lt;code\u0026gt;.iloc\u0026lt;/code\u0026gt;)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;.loc\u0026lt;/code\u0026gt; is faster, because it does not try to create a copy of the data.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;.loc\u0026lt;/code\u0026gt; is meant to modify your existing dataframe inplace, which is more memory efficient.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;.loc\u0026lt;/code\u0026gt; is predictable, it has one behavior.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h2\u0026gt;The solution\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;What you are doing in your code example is loading a big file with lots of columns, then modifying it to be smaller.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;pd.read_csv\u0026lt;/code\u0026gt; function can help you out with a lot of this and also make the loading of the file a lot faster.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So instead of doing this\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;quote_df = pd.read_csv(StringIO(str_of_all), sep=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;, names=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg\u0026apos;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#dtype={\u0026apos;A\u0026apos;: object, \u0026apos;B\u0026apos;: object, \u0026apos;C\u0026apos;: np.float64}\u0026lt;/span\u0026gt;\nquote_df.rename(columns={\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TOpen\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;C\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPCLOSE\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;D\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPrice\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;THigh\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TLow\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;I\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;J\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TAmt\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;e\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TDate\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;f\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TTime\u0026apos;\u0026lt;/span\u0026gt;}, inplace=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\nquote_df = quote_df.ix[:,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;31\u0026lt;/span\u0026gt;]]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Do this\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;columns = [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPrice\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPCLOSE\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TOpen\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;THigh\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TLow\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TAmt\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TDate\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TTime\u0026apos;\u0026lt;/span\u0026gt;]\ndf = pd.read_csv(StringIO(str_of_all), sep=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;, usecols=[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;31\u0026lt;/span\u0026gt;])\ndf.columns = columns\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This will only read the columns you are interested in, and name them properly. No need for using the evil \u0026lt;code\u0026gt;.ix\u0026lt;/code\u0026gt; object to do magical stuff.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here I answer the question directly. How to deal with it?\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Make a \u0026lt;code\u0026gt;.copy(deep=False)\u0026lt;/code\u0026gt; after you slice. See \u0026lt;a href=\u0026quot;https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.copy.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;pandas.DataFrame.copy\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Wait, doesn\u0026apos;t a slice return a copy? After all, this is what the warning message is attempting to say? Read the long answer:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; pandas \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; pd\ndf = pd.DataFrame({\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;x\u0026apos;\u0026lt;/span\u0026gt;:[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]})\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This gives a warning:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df0 = df[df.x\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]\ndf0[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;foo\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;bar\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This does not:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df1 = df[df.x\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;].copy(deep=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;)\ndf1[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;foo\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;bar\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Both \u0026lt;code\u0026gt;df0\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;df1\u0026lt;/code\u0026gt; are \u0026lt;code\u0026gt;DataFrame\u0026lt;/code\u0026gt; objects, but something about them is different that enables pandas to print the warning. Let\u0026apos;s find out what it is.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; inspect\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;= df[df.x\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]\nslice_copy = df[df.x\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;].copy(deep=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;)\ninspect.getmembers(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;)\ninspect.getmembers(slice_copy)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Using your diff tool of choice, you will see that beyond a couple of addresses, the only material difference is this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;|          | \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;   | slice_copy |\n| _is_copy | weakref | \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;       |\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The method that decides whether to warn is \u0026lt;code\u0026gt;DataFrame._check_setitem_copy\u0026lt;/code\u0026gt; which checks \u0026lt;code\u0026gt;_is_copy\u0026lt;/code\u0026gt;. So here you go. Make a \u0026lt;code\u0026gt;copy\u0026lt;/code\u0026gt; so that your DataFrame is not \u0026lt;code\u0026gt;_is_copy\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The warning is suggesting to use \u0026lt;code\u0026gt;.loc\u0026lt;/code\u0026gt;, but if you use \u0026lt;code\u0026gt;.loc\u0026lt;/code\u0026gt; on a frame that \u0026lt;code\u0026gt;_is_copy\u0026lt;/code\u0026gt;, you will still get the same warning. Misleading? Yes. Annoying? You bet. Helpful? Potentially, when chained assignment is used. But it cannot correctly detect chain assignment and prints the warning indiscriminately.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This topic is really confusing with Pandas. Luckily, it has a relatively simple solution.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The problem is that it is not always clear whether data filtering operations (e.g. loc) return a copy or a view of the DataFrame. Further use of such filtered DataFrame could therefore be confusing.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The simple solution is (unless you need to work with very large sets of data):\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Whenever you need to update any values, always make sure that you explicitly copy the DataFrame before the assignment.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Some DataFrame\u0026lt;/span\u0026gt;\ndf = df.loc[:, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Some filtering (unsure whether a view or copy is returned)\u0026lt;/span\u0026gt;\ndf = df.copy()  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Ensuring a copy is made\u0026lt;/span\u0026gt;\ndf[df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Name\u0026quot;\u0026lt;/span\u0026gt;] == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;John\u0026quot;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Johny\u0026quot;\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Assignment can be done now (no warning)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I had been getting this issue with \u0026lt;code\u0026gt;.apply()\u0026lt;/code\u0026gt; when assigning a new dataframe from a pre-existing dataframe on which i\u0026apos;ve used the \u0026lt;code\u0026gt;.query()\u0026lt;/code\u0026gt; method. For instance:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;prop_df = df.query(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;column == \u0026quot;value\u0026quot;\u0026apos;\u0026lt;/span\u0026gt;)\nprop_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;new_column\u0026apos;\u0026lt;/span\u0026gt;] = prop_df.apply(function, axis=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Would return this error. The fix that seems to resolve the error in this case is by changing this to:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;prop_df = df.copy(deep=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\nprop_df = prop_df.query(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;column == \u0026quot;value\u0026quot;\u0026apos;\u0026lt;/span\u0026gt;)\nprop_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;new_column\u0026apos;\u0026lt;/span\u0026gt;] = prop_df.apply(function, axis=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;However, this is NOT efficient especially when using large dataframes, due to having to make a new copy.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you\u0026apos;re using the \u0026lt;code\u0026gt;.apply()\u0026lt;/code\u0026gt; method in generating a new column and its values, a fix that resolves the error and is more efficient is by adding \u0026lt;code\u0026gt;.reset_index(drop=True)\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;prop_df = df.query(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;column == \u0026quot;value\u0026quot;\u0026apos;\u0026lt;/span\u0026gt;).reset_index(drop=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\nprop_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;new_column\u0026apos;\u0026lt;/span\u0026gt;] = prop_df.apply(function, axis=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;To remove any doubt, my solution was to make a deep copy of the slice instead of a regular copy.\nThis may not be applicable depending on your context (Memory constraints / size of the slice, potential for performance degradation - especially if the copy occurs in a loop like it did for me, etc...)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;To be clear, here is the warning I received:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;/opt/anaconda3/lib/python3\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;.6\u0026lt;/span\u0026gt;/site-packages/ipykernel/__main__.py:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;54\u0026lt;/span\u0026gt;:\nSettingWithCopyWarning: A value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; trying to be \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; on a copy of a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; a DataFrame\nSee the caveats \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; the documentation:\nhttp://pandas.pydata.org/pandas-docs/stable/indexing.html\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#indexing-view-versus-copy\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Illustration\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;I had doubts that the warning was thrown because of a column I was dropping on a copy of the slice. While not technically trying to set a value in the copy of the slice, that was still a modification of the copy of the slice.\nBelow are the (simplified) steps I have taken to confirm the suspicion, I hope it will help those of us who are trying to understand the warning.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;Example 1: dropping a column on the original affects the copy\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;We knew that already but this is a healthy reminder. This is \u0026lt;em\u0026gt;NOT\u0026lt;/em\u0026gt; what the warning is about.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt; data1 = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;:[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;]}\n\u0026amp;gt;\u0026amp;gt; df1 = pd.DataFrame(data1)\n\u0026amp;gt;\u0026amp;gt; df1\n\n    A   B\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\n\n\u0026amp;gt;\u0026amp;gt; df2 = df1\n\u0026amp;gt;\u0026amp;gt; df2\n\nA   B\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Dropping a column on df1 affects df2\u0026lt;/span\u0026gt;\n\u0026amp;gt;\u0026amp;gt; df1.drop(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;, axis=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, inplace=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n\u0026amp;gt;\u0026amp;gt; df2\n    B\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;It is possible to avoid changes made on df1 to affect df2. Note: you can avoid importing \u0026lt;code\u0026gt;copy.deepcopy\u0026lt;/code\u0026gt; by doing \u0026lt;code\u0026gt;df.copy()\u0026lt;/code\u0026gt; instead.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt; data1 = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;:[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;]}\n\u0026amp;gt;\u0026amp;gt; df1 = pd.DataFrame(data1)\n\u0026amp;gt;\u0026amp;gt; df1\n\nA   B\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\n\u0026amp;gt;\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; copy\n\u0026amp;gt;\u0026amp;gt; df2 = copy.deepcopy(df1)\n\u0026amp;gt;\u0026amp;gt; df2\nA   B\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Dropping a column on df1 does not affect df2\u0026lt;/span\u0026gt;\n\u0026amp;gt;\u0026amp;gt; df1.drop(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;, axis=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, inplace=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n\u0026amp;gt;\u0026amp;gt; df2\n    A   B\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Example 2: dropping a column on the copy may affect the original\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;This actually illustrates the warning.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt; data1 = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;:[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;]}\n\u0026amp;gt;\u0026amp;gt; df1 = pd.DataFrame(data1)\n\u0026amp;gt;\u0026amp;gt; df1\n\n    A   B\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\n\u0026amp;gt;\u0026amp;gt; df2 = df1\n\u0026amp;gt;\u0026amp;gt; df2\n\n    A   B\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Dropping a column on df2 can affect df1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# No slice involved here, but I believe the principle remains the same?\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Let me know if not\u0026lt;/span\u0026gt;\n\u0026amp;gt;\u0026amp;gt; df2.drop(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;, axis=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, inplace=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n\u0026amp;gt;\u0026amp;gt; df1\n\nB\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;It is possible to avoid changes made on df2 to affect df1\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt; data1 = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;:[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;]}\n\u0026amp;gt;\u0026amp;gt; df1 = pd.DataFrame(data1)\n\u0026amp;gt;\u0026amp;gt; df1\n\n    A   B\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\n\u0026amp;gt;\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; copy\n\u0026amp;gt;\u0026amp;gt; df2 = copy.deepcopy(df1)\n\u0026amp;gt;\u0026amp;gt; df2\n\nA   B\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\n\u0026amp;gt;\u0026amp;gt; df2.drop(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;, axis=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, inplace=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n\u0026amp;gt;\u0026amp;gt; df1\n\nA   B\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;121\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;112\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;113\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Cheers!\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For me worked:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; pandas \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; pd\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# ...\u0026lt;/span\u0026gt;\npd.set_option(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;mode.chained_assignment\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This should work:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;quote_df.loc[:,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;] = quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;]/TVOL_SCALE\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Some may want to simply suppress the warning:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SupressSettingWithCopyWarning\u0026lt;/span\u0026gt;:\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__enter__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        pd.options.mode.chained_assignment = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__exit__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, *args\u0026lt;/span\u0026gt;):\n        pd.options.mode.chained_assignment = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;warn\u0026apos;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; SupressSettingWithCopyWarning():\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#code that produces warning\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Followup beginner question / remark\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Maybe a clarification for other beginners like me (I come from R which seems to work a bit differently under the hood). The following harmless-looking and functional code kept producing the SettingWithCopy warning, and I couldn\u0026apos;t figure out why. I had both read and understood the issued with \u0026quot;chained indexing\u0026quot;, but my code doesn\u0026apos;t contain any:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;plot\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;pdb, df, title, **kw\u0026lt;/span\u0026gt;):\n    df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;target\u0026apos;\u0026lt;/span\u0026gt;] = (df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ogg\u0026apos;\u0026lt;/span\u0026gt;] + df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ugg\u0026apos;\u0026lt;/span\u0026gt;]) / \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;But then, later, much too late, I looked at where the plot() function is called:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;    df = data[data[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;anz_emw\u0026apos;\u0026lt;/span\u0026gt;] \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]\n    pixbuf = plot(pdb, df, title)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So \u0026quot;df\u0026quot; isn\u0026apos;t a data frame but an object that somehow remembers that it was created by indexing a data frame (so is that a view?) which would make the line in plot()\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;target\u0026apos;\u0026lt;/span\u0026gt;] = ...\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;equivalent to\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; data[data[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;anz_emw\u0026apos;\u0026lt;/span\u0026gt;] \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;target\u0026apos;\u0026lt;/span\u0026gt;] = ...\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;which is a chained indexing. Did I get that right?\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Anyway, \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;plot\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;pdb, df, title, **kw\u0026lt;/span\u0026gt;):\n    df.loc[:,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;target\u0026apos;\u0026lt;/span\u0026gt;] = (df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ogg\u0026apos;\u0026lt;/span\u0026gt;] + df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ugg\u0026apos;\u0026lt;/span\u0026gt;]) / \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;fixed it.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As this question is already fully explained and discussed in existing answers I will just provide a neat \u0026lt;code\u0026gt;pandas\u0026lt;/code\u0026gt; approach to the context manager using \u0026lt;code\u0026gt;pandas.option_context\u0026lt;/code\u0026gt; (links to \u0026lt;a href=\u0026quot;https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.option_context.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;docs\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;https://pandas.pydata.org/pandas-docs/stable/user_guide/options.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;example\u0026lt;/a\u0026gt;) - there is absolutely no need to create a custom class with all the dunder methods and other bells and whistles.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;First the context manager code itself:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; contextlib \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; contextmanager\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@contextmanager\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;SuppressPandasWarning\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; pd.option_context(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mode.chained_assignment\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then an example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; pandas \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; pd\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; string \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; ascii_letters\n\na = pd.DataFrame({\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;A\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(ascii_letters[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;B\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;range\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;)})\n\nmask = a[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;A\u0026quot;\u0026lt;/span\u0026gt;].isin([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;c\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;d\u0026quot;\u0026lt;/span\u0026gt;])\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Even shallow copy below is enough to not raise the warning, but why is a mystery to me.\u0026lt;/span\u0026gt;\nb = a.loc[mask]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# .copy(deep=False)\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Raises the `SettingWithCopyWarning`\u0026lt;/span\u0026gt;\nb[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;B\u0026quot;\u0026lt;/span\u0026gt;] = b[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;B\u0026quot;\u0026lt;/span\u0026gt;] * \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Does not!\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; SuppressPandasWarning():\n    b[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;B\u0026quot;\u0026lt;/span\u0026gt;] = b[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;B\u0026quot;\u0026lt;/span\u0026gt;] * \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Worth noticing is that both approches do not modify \u0026lt;code\u0026gt;a\u0026lt;/code\u0026gt;, which is a bit surprising to me, and even a shallow df copy with \u0026lt;code\u0026gt;.copy(deep=False)\u0026lt;/code\u0026gt; would prevent this warning to be raised (as far as I understand shallow copy should at least modify \u0026lt;code\u0026gt;a\u0026lt;/code\u0026gt; as well, but it doesn\u0026apos;t. \u0026lt;code\u0026gt;pandas\u0026lt;/code\u0026gt; magic.).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You could avoid the whole problem like this, I believe:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (\n    pd.read_csv(StringIO(str_of_all), sep=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;, names=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg\u0026apos;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#dtype={\u0026apos;A\u0026apos;: object, \u0026apos;B\u0026apos;: object, \u0026apos;C\u0026apos;: np.float64}\u0026lt;/span\u0026gt;\n    .rename(columns={\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TOpen\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;C\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPCLOSE\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;D\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPrice\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;THigh\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TLow\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;I\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;J\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TAmt\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;e\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TDate\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;f\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TTime\u0026apos;\u0026lt;/span\u0026gt;}, inplace=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n    .ix[:,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;31\u0026lt;/span\u0026gt;]]\n    .assign(\n        TClose=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; df: df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPrice\u0026apos;\u0026lt;/span\u0026gt;],\n        RT=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; df: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt; * (df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPrice\u0026apos;\u0026lt;/span\u0026gt;]/quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPCLOSE\u0026apos;\u0026lt;/span\u0026gt;] - \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;),\n        TVol=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; df: df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;]/TVOL_SCALE,\n        TAmt=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; df: df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TAmt\u0026apos;\u0026lt;/span\u0026gt;]/TAMT_SCALE,\n        STK_ID=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; df: df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK\u0026apos;\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;19\u0026lt;/span\u0026gt;),\n        STK_Name=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; df: df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK\u0026apos;\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;21\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;)\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#.decode(\u0026apos;gb2312\u0026apos;),\u0026lt;/span\u0026gt;\n        TDate=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; df: df.TDate.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; x: x[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]+x[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]+x[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]),\n    )\n)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Using Assign. From the \u0026lt;a href=\u0026quot;https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.assign.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;documentation\u0026lt;/a\u0026gt;: Assign new columns to a DataFrame, returning a new object (a copy) with all the original columns in addition to the new ones. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;See Tom Augspurger\u0026apos;s article on method chaining in pandas: \u0026lt;a href=\u0026quot;https://tomaugspurger.github.io/method-chaining\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://tomaugspurger.github.io/method-chaining\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you have assigned the slice to a variable and want to set using the variable as in the following:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df2 = df[df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;] \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]\ndf2[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;] = value\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And you do not want to use Jeffs solution because your condition computing \u0026lt;code\u0026gt;df2\u0026lt;/code\u0026gt; is to long or for some other reason, then you can use the following:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df.loc[df2.index.tolist(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;] = value\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;df2.index.tolist()\u0026lt;/code\u0026gt; returns the indices from all entries in df2, which will then be used to set column B in the original dataframe.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;this might apply to numpy only, which means you might need to import it,  but the data i used for my examples numpy was not essential with the calculations, but you can simply stop this settingwithcopy warning message, by using this 1 Line of Code below,\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;np.warnings.filterwarnings(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ignore\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For me this issue occured in a following \u0026amp;gt;simplified\u0026amp;lt; example. And I was also able to solve it (hopefully with a correct solution):\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;old code with warning:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;update_old_dataframe\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;old_dataframe, new_dataframe\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; new_index, new_row \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; new_dataframe.iterrorws():\n        old_dataframe.loc[new_index] = update_row(old_dataframe.loc[new_index], new_row)\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;update_row\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;old_row, new_row\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; field \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; [list_of_columns]:\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# line with warning because of chain indexing old_dataframe[new_index][field]\u0026lt;/span\u0026gt;\n        old_row[field] = new_row[field]  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; old_row\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This printed the warning for the line \u0026lt;code\u0026gt;old_row[field] = new_row[field]\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Since the rows in update_row method are actually type \u0026lt;code\u0026gt;Series\u0026lt;/code\u0026gt;, I replaced the line with:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;old_row.at[field] = new_row.at[field]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;i.e. \u0026lt;a href=\u0026quot;https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.at.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;method\u0026lt;/a\u0026gt; for accessing/lookups for a \u0026lt;code\u0026gt;Series\u0026lt;/code\u0026gt;. Eventhough both works just fine and the result is same, this way I don\u0026apos;t have to disable the warnings (=keep them for other chain indexing issues somewhere else).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I hope this may help someone.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I was facing the same warning, while I executed this  part of my code:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;scaler\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, numericals\u0026lt;/span\u0026gt;):\n        scaler = MinMaxScaler()\n        self.data.loc[:, numericals[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]] = scaler.fit_transform(self.data.loc[:, numericals[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]])\n        self.data.loc[:, numericals[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]] = scaler.fit_transform(self.data.loc[:, numericals[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]])\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;which \u0026lt;code\u0026gt;scaler\u0026lt;/code\u0026gt; is a MinMaxScaler and \u0026lt;code\u0026gt;numericals[0]\u0026lt;/code\u0026gt;  contains names of 3 of my numerical columns.\nthe  warning was removed as I changed the code to:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;scaler\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, numericals\u0026lt;/span\u0026gt;):\n        scaler = MinMaxScaler()\n        self.data.loc[:][numericals[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]] = scaler.fit_transform(self.data.loc[:][numericals[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]])\n        self.data.loc[:][numericals[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]] = scaler.fit_transform(self.data.loc[:][numericals[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]])\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;So, Just change \u0026lt;code\u0026gt;[:, ~]\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;[:][~]\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In my case, I would create a new column based on the index but I got this warning as you:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df_temp[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Quarter\u0026quot;\u0026lt;/span\u0026gt;] = df_temp.index.quarter\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I use insert() instead of direct assignment and it works for me:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;df_temp.insert(loc=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, column=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Quarter\u0026apos;\u0026lt;/span\u0026gt;, value=df_temp.index.quarter)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Just create a copy of your dataframe(s) using \u0026lt;code\u0026gt;.copy()\u0026lt;/code\u0026gt; method before the warning appears, to remove all of your warnings. This happens because we do not want to make changes to the original quote_df. In other words, we do not want to play with the reference of the object of the quote_df which we have created for quote_df.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;quote_df = quote_df.copy()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":151,"title":"How to deal with SettingWithCopyWarning in Pandas","content":"\n                \n\u0026lt;h2\u0026gt;Background\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;I just upgraded my Pandas from 0.11 to 0.13.0rc1. Now, the application is popping out many new warnings. One of them like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;E:\\FinReporter\\FM_EXT.py:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;449\u0026lt;/span\u0026gt;: SettingWithCopyWarning: A value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; trying to be \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; on a copy of a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; a DataFrame.\nTry using .loc[row_index,col_indexer] = value instead\n  quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;]   = quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;]/TVOL_SCALE\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I want to know what exactly it means?  Do I need to change something?\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;How should I suspend the warning if I insist to use \u0026lt;code\u0026gt;quote_df[\u0026apos;TVol\u0026apos;]   = quote_df[\u0026apos;TVol\u0026apos;]/TVOL_SCALE\u0026lt;/code\u0026gt;?\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;The function that gives errors\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_decode_stock_quote\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;list_of_150_stk_str\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;decode the webpage and return dataframe\u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; cStringIO \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; StringIO\n\n    str_of_all = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;.join(list_of_150_stk_str)\n\n    quote_df = pd.read_csv(StringIO(str_of_all), sep=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;, names=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg\u0026apos;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#dtype={\u0026apos;A\u0026apos;: object, \u0026apos;B\u0026apos;: object, \u0026apos;C\u0026apos;: np.float64}\u0026lt;/span\u0026gt;\n    quote_df.rename(columns={\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;A\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;B\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TOpen\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;C\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPCLOSE\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;D\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPrice\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;THigh\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TLow\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;I\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;J\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TAmt\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;e\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TDate\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;f\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TTime\u0026apos;\u0026lt;/span\u0026gt;}, inplace=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n    quote_df = quote_df.ix[:,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;31\u0026lt;/span\u0026gt;]]\n    quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TClose\u0026apos;\u0026lt;/span\u0026gt;] = quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPrice\u0026apos;\u0026lt;/span\u0026gt;]\n    quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;RT\u0026apos;\u0026lt;/span\u0026gt;]     = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt; * (quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPrice\u0026apos;\u0026lt;/span\u0026gt;]/quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TPCLOSE\u0026apos;\u0026lt;/span\u0026gt;] - \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n    quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;]   = quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;]/TVOL_SCALE\n    quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TAmt\u0026apos;\u0026lt;/span\u0026gt;]   = quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TAmt\u0026apos;\u0026lt;/span\u0026gt;]/TAMT_SCALE\n    quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK_ID\u0026apos;\u0026lt;/span\u0026gt;] = quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK\u0026apos;\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;19\u0026lt;/span\u0026gt;)\n    quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK_Name\u0026apos;\u0026lt;/span\u0026gt;] = quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;STK\u0026apos;\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;21\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;)\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#.decode(\u0026apos;gb2312\u0026apos;)\u0026lt;/span\u0026gt;\n    quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TDate\u0026apos;\u0026lt;/span\u0026gt;]  = quote_df.TDate.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; x: x[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]+x[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]+x[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;])\n    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; quote_df\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;More error messages\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;E:\\FinReporter\\FM_EXT.py:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;449\u0026lt;/span\u0026gt;: SettingWithCopyWarning: A value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; trying to be \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; on a copy of a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; a DataFrame.\nTry using .loc[row_index,col_indexer] = value instead\n  quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;]   = quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TVol\u0026apos;\u0026lt;/span\u0026gt;]/TVOL_SCALE\nE:\\FinReporter\\FM_EXT.py:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;450\u0026lt;/span\u0026gt;: SettingWithCopyWarning: A value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; trying to be \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; on a copy of a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; a DataFrame.\nTry using .loc[row_index,col_indexer] = value instead\n  quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TAmt\u0026apos;\u0026lt;/span\u0026gt;]   = quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TAmt\u0026apos;\u0026lt;/span\u0026gt;]/TAMT_SCALE\nE:\\FinReporter\\FM_EXT.py:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;453\u0026lt;/span\u0026gt;: SettingWithCopyWarning: A value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; trying to be \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; on a copy of a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; a DataFrame.\nTry using .loc[row_index,col_indexer] = value instead\n  quote_df[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;TDate\u0026apos;\u0026lt;/span\u0026gt;]  = quote_df.TDate.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; x: x[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]+x[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]+x[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;])\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","slug":"how-to-deal-with-settingwithcopywarning-in-pandas-1657384778377","postType":"QUESTION","createdAt":"2022-07-09T16:39:38.000Z","updatedAt":"2022-07-09T16:39:38.000Z","tags":[{"id":549,"name":"chained-assignment","slug":"chained-assignment","createdAt":"2022-07-09T16:39:38.000Z","updatedAt":"2022-07-09T16:39:38.000Z","Questions_Tags":{"questionId":151,"tagId":549}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-to-deal-with-settingwithcopywarning-in-pandas-1657384778377"},"buildId":"9SrIo1zGFc3tF1E8on9-4","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>