<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/471-84c36aa98dd4107c.js" defer=""></script><script src="/_next/static/chunks/81-301f760ac8107464.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-76d2c3e2d98bb08b.js" defer=""></script><script src="/_next/static/8pZkyd0U8-Y2Qf3QK9j7l/_buildManifest.js" defer=""></script><script src="/_next/static/8pZkyd0U8-Y2Qf3QK9j7l/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.eZIPKL code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-c4b0431a-0"]{content:"eZIPKL,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/can-i-bind-an-array-to-an-in()-condition-in-a-pdo-query-1657388382858#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-c4b0431a-0 eZIPKL flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/can-i-bind-an-array-to-an-in()-condition-in-a-pdo-query-1657388382858">Can I bind an array to an IN() condition in a PDO query?</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/prepared-statement">prepared-statement</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/where-in">where-in</a></div></div><div class="question-content mt-5">
                
<p>I'm curious to know if it's possible to bind an array of values to a placeholder using PDO.  The use case here is attempting to pass an array of values for use with an <code>IN()</code> condition.  </p>

<p>I'd like to be able to do something like this:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-variable">$ids</span>=<span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>);
<span class="hljs-variable">$db</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(...);
<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(
    <span class="hljs-string">'SELECT *
     FROM table
     WHERE id IN(:an_array)'</span>
);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindParam</span>(<span class="hljs-string">'an_array'</span>,<span class="hljs-variable">$ids</span>);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
<span class="hljs-meta">?&gt;</span>
</code></pre>

<p>And have PDO bind and quote all the values in the array.</p>

<p>At the moment I'm doing:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-variable">$ids</span> = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>);
<span class="hljs-variable">$db</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(...);
<span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$ids</span> <span class="hljs-keyword">as</span> &amp;<span class="hljs-variable">$val</span>)
    <span class="hljs-variable">$val</span>=<span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">quote</span>(<span class="hljs-variable">$val</span>); <span class="hljs-comment">//iterate through array and quote</span>
<span class="hljs-variable">$in</span> = <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">','</span>,<span class="hljs-variable">$ids</span>); <span class="hljs-comment">//create comma separated list</span>
<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(
    <span class="hljs-string">'SELECT *
     FROM table
     WHERE id IN('</span>.<span class="hljs-variable">$in</span>.<span class="hljs-string">')'</span>
);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
<span class="hljs-meta">?&gt;</span>
</code></pre>

<p>Which certainly does the job, but just wondering if there's a built in solution I'm missing?</p>
    </div></div></div><div class="sc-c4b0431a-2 cRqwQe"><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You'll have to construct the query-string.</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-variable">$ids</span>     = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>);
<span class="hljs-variable">$inQuery</span> = <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">','</span>, <span class="hljs-title function_ invoke__">array_fill</span>(<span class="hljs-number">0</span>, <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$ids</span>), <span class="hljs-string">'?'</span>));

<span class="hljs-variable">$db</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(...);
<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(
    <span class="hljs-string">'SELECT *
     FROM table
     WHERE id IN('</span> . <span class="hljs-variable">$inQuery</span> . <span class="hljs-string">')'</span>
);

<span class="hljs-comment">// bindvalue is 1-indexed, so $k+1</span>
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$ids</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$k</span> =&gt; <span class="hljs-variable">$id</span>)
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindValue</span>((<span class="hljs-variable">$k</span>+<span class="hljs-number">1</span>), <span class="hljs-variable">$id</span>);

<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
<span class="hljs-meta">?&gt;</span>
</code></pre>
<p>Both chris (comments) and somebodyisintrouble suggested that the foreach-loop ...</p>
<pre class="lang-php s-code-block"><code class="hljs language-php">(...)
<span class="hljs-comment">// bindvalue is 1-indexed, so $k+1</span>
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$ids</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$k</span> =&gt; <span class="hljs-variable">$id</span>)
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindValue</span>((<span class="hljs-variable">$k</span>+<span class="hljs-number">1</span>), <span class="hljs-variable">$id</span>);

<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
</code></pre>
<p>... might be redundant, so the <code>foreach</code> loop and the <code>$stmt-&gt;execute</code> could be replaced by just ...</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span> 
  (...)
  <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>(<span class="hljs-variable">$ids</span>);
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For something quick:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-comment">//$db = new PDO(...);</span>
<span class="hljs-comment">//$ids = array(...);</span>

<span class="hljs-variable">$qMarks</span> = <span class="hljs-title function_ invoke__">str_repeat</span>(<span class="hljs-string">'?,'</span>, <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$ids</span>) - <span class="hljs-number">1</span>) . <span class="hljs-string">'?'</span>;
<span class="hljs-variable">$sth</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">"SELECT * FROM myTable WHERE id IN (<span class="hljs-subst">$qMarks</span>)"</span>);
<span class="hljs-variable">$sth</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>(<span class="hljs-variable">$ids</span>);
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Is it so important to use <code>IN</code> statement? Try to use <code>FIND_IN_SET</code> op.</p>

<p>For example, there is a query in PDO like that </p>

<pre class="lang-php s-code-block"><code class="hljs language-php">SELECT * FROM table WHERE <span class="hljs-title function_ invoke__">FIND_IN_SET</span>(id, :<span class="hljs-keyword">array</span>)
</code></pre>

<p>Then you only need to bind an array of values, imploded with comma, like this one </p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$ids_string</span> = <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">','</span>, <span class="hljs-variable">$array_of_smth</span>); <span class="hljs-comment">// WITHOUT WHITESPACES BEFORE AND AFTER THE COMMA</span>
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindParam</span>(<span class="hljs-string">'array'</span>, <span class="hljs-variable">$ids_string</span>);
</code></pre>

<p>and it's done.</p>

<p>UPD: As some people pointed out in comments to this answer, there are some issues which should be stated explciitly. </p>

<ol>
<li><code>FIND_IN_SET</code> doesn't use index in a table, and it is still not implemented yet - see <a href="http://bugs.mysql.com/bug.php?id=37564">this record in the MYSQL bug tracker</a>. Thanks to @BillKarwin for the notice.</li>
<li>You can't use a string with comma inside as a value of the array for search. It is impossible to parse such string in the right way after <code>implode</code> since you use comma symbol as a separator. Thanks to @VaL for the note.</li>
</ol>

<p>In fine, if you are not heavily dependent on indexes and do not use strings with comma for search, my solution will be much easier, simpler, and faster than solutions listed above.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Since I do a lot of dynamic queries, this is a super simple helper function I made. </p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindParamArray</span>(<span class="hljs-params"><span class="hljs-variable">$prefix</span>, <span class="hljs-variable">$values</span>, &amp;<span class="hljs-variable">$bindArray</span></span>)
</span>{
    <span class="hljs-variable">$str</span> = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$values</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$index</span> =&gt; <span class="hljs-variable">$value</span>){
        <span class="hljs-variable">$str</span> .= <span class="hljs-string">":"</span>.<span class="hljs-variable">$prefix</span>.<span class="hljs-variable">$index</span>.<span class="hljs-string">","</span>;
        <span class="hljs-variable">$bindArray</span>[<span class="hljs-variable">$prefix</span>.<span class="hljs-variable">$index</span>] = <span class="hljs-variable">$value</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">rtrim</span>(<span class="hljs-variable">$str</span>,<span class="hljs-string">","</span>);     
}
</code></pre>

<p>Use it like this:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$bindString</span> = helper::<span class="hljs-title function_ invoke__">bindParamArray</span>(<span class="hljs-string">"id"</span>, <span class="hljs-variable">$_GET</span>[<span class="hljs-string">'ids'</span>], <span class="hljs-variable">$bindArray</span>);
<span class="hljs-variable">$userConditions</span> .= <span class="hljs-string">" AND users.id IN(<span class="hljs-subst">$bindString</span>)"</span>;
</code></pre>

<p>Returns a string <code>:id1,:id2,:id3</code> and also updates your <code>$bindArray</code> of bindings that you will need when it's time to run your query. Easy!</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>very clean way for postgres is using the postgres-array ("{}"):</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$ids</span> = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>,<span class="hljs-number">45</span>);
<span class="hljs-variable">$param</span> = <span class="hljs-string">"{"</span>.<span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">', '</span>,<span class="hljs-variable">$ids</span>).<span class="hljs-string">"}"</span>;
<span class="hljs-variable">$cmd</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">"SELECT * FROM table WHERE id = ANY (?)"</span>);
<span class="hljs-variable">$result</span> = <span class="hljs-variable">$cmd</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>(<span class="hljs-keyword">array</span>(<span class="hljs-variable">$param</span>));
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Solution from EvilRygy didn't worked for me. In Postgres you can do another workaround:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php">
<span class="hljs-variable">$ids</span> = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>);
<span class="hljs-variable">$db</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(...);
<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(
    <span class="hljs-string">'SELECT *
     FROM table
     WHERE id = ANY (string_to_array(:an_array, '</span>,<span class="hljs-string">'))'</span>
);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindParam</span>(<span class="hljs-string">':an_array'</span>, <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">','</span>, <span class="hljs-variable">$ids</span>));
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is my solution:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$total_items</span> = <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$array_of_items</span>);
<span class="hljs-variable">$question_marks</span> = <span class="hljs-title function_ invoke__">array_fill</span>(<span class="hljs-number">0</span>, <span class="hljs-variable">$total_items</span>, <span class="hljs-string">'?'</span>);
<span class="hljs-variable">$sql</span> = <span class="hljs-string">'SELECT * FROM foo WHERE bar IN ('</span> . <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">','</span>, <span class="hljs-variable">$question_marks</span> ). <span class="hljs-string">')'</span>;

<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$dbh</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$sql</span>);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>(<span class="hljs-title function_ invoke__">array_values</span>(<span class="hljs-variable">$array_of_items</span>));
</code></pre>

<p>Note the use of array_values.  This can fix key ordering issues.</p>

<p>I was merging arrays of ids and then removing duplicate items.  I had something like:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$ids</span> = <span class="hljs-keyword">array</span>(<span class="hljs-number">0</span> =&gt; <span class="hljs-number">23</span>, <span class="hljs-number">1</span> =&gt; <span class="hljs-number">47</span>, <span class="hljs-number">3</span> =&gt; <span class="hljs-number">17</span>);
</code></pre>

<p>And that was failing.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>When you have other parameter, you may do like this:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$ids</span> = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>);
<span class="hljs-variable">$db</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(...);
<span class="hljs-variable">$query</span> = <span class="hljs-string">'SELECT *
            FROM table
           WHERE X = :x
             AND id IN('</span>;
<span class="hljs-variable">$comma</span> = <span class="hljs-string">''</span>;
<span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">0</span>; <span class="hljs-variable">$i</span>&lt;<span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$ids</span>); <span class="hljs-variable">$i</span>++){
  <span class="hljs-variable">$query</span> .= <span class="hljs-variable">$comma</span>.<span class="hljs-string">':p'</span>.<span class="hljs-variable">$i</span>;       <span class="hljs-comment">// :p0, :p1, ...</span>
  <span class="hljs-variable">$comma</span> = <span class="hljs-string">','</span>;
}
<span class="hljs-variable">$query</span> .= <span class="hljs-string">')'</span>;

<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$query</span>);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindValue</span>(<span class="hljs-string">':x'</span>, <span class="hljs-number">123</span>);  <span class="hljs-comment">// some value</span>
<span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">0</span>; <span class="hljs-variable">$i</span>&lt;<span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$ids</span>); <span class="hljs-variable">$i</span>++){
  <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindValue</span>(<span class="hljs-string">':p'</span>.<span class="hljs-variable">$i</span>, <span class="hljs-variable">$ids</span>[<span class="hljs-variable">$i</span>]);
}
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I extended PDO to do something similar to what stefs suggests, and it was easier for me in the long run:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Array_Capable_PDO</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PDO</span> </span>{
    <span class="hljs-comment">/**
     * Both prepare a statement and bind array values to it
     * <span class="hljs-doctag">@param</span> string $statement mysql query with colon-prefixed tokens
     * <span class="hljs-doctag">@param</span> array $arrays associatve array with string tokens as keys and integer-indexed data arrays as values 
     * <span class="hljs-doctag">@param</span> array $driver_options see php documention
     * <span class="hljs-doctag">@return</span> PDOStatement with given array values already bound 
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepare_with_arrays</span>(<span class="hljs-params"><span class="hljs-variable">$statement</span>, <span class="hljs-keyword">array</span> <span class="hljs-variable">$arrays</span>, <span class="hljs-variable">$driver_options</span> = <span class="hljs-keyword">array</span>(<span class="hljs-params"></span>)</span>) </span>{

        <span class="hljs-variable">$replace_strings</span> = <span class="hljs-keyword">array</span>();
        <span class="hljs-variable">$x</span> = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$arrays</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$token</span> =&gt; <span class="hljs-variable">$data</span>) {
            <span class="hljs-comment">// just for testing...</span>
            <span class="hljs-comment">//// tokens should be legit</span>
            <span class="hljs-comment">//assert('is_string($token)');</span>
            <span class="hljs-comment">//assert('$token !== ""');</span>
            <span class="hljs-comment">//// a given token shouldn't appear more than once in the query</span>
            <span class="hljs-comment">//assert('substr_count($statement, $token) === 1');</span>
            <span class="hljs-comment">//// there should be an array of values for each token</span>
            <span class="hljs-comment">//assert('is_array($data)');</span>
            <span class="hljs-comment">//// empty data arrays aren't okay, they're a SQL syntax error</span>
            <span class="hljs-comment">//assert('count($data) &gt; 0');</span>

            <span class="hljs-comment">// replace array tokens with a list of value tokens</span>
            <span class="hljs-variable">$replace_string_pieces</span> = <span class="hljs-keyword">array</span>();
            <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$data</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$y</span> =&gt; <span class="hljs-variable">$value</span>) {
                <span class="hljs-comment">//// the data arrays have to be integer-indexed</span>
                <span class="hljs-comment">//assert('is_int($y)');</span>
                <span class="hljs-variable">$replace_string_pieces</span>[] = <span class="hljs-string">":<span class="hljs-subst">{$x}</span>_<span class="hljs-subst">{$y}</span>"</span>;
            }
            <span class="hljs-variable">$replace_strings</span>[] = <span class="hljs-string">'('</span>.<span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">', '</span>, <span class="hljs-variable">$replace_string_pieces</span>).<span class="hljs-string">')'</span>;
            <span class="hljs-variable">$x</span>++;
        }
        <span class="hljs-variable">$statement</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-title function_ invoke__">array_keys</span>(<span class="hljs-variable">$arrays</span>), <span class="hljs-variable">$replace_strings</span>, <span class="hljs-variable">$statement</span>);
        <span class="hljs-variable">$prepared_statement</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$statement</span>, <span class="hljs-variable">$driver_options</span>);

        <span class="hljs-comment">// bind values to the value tokens</span>
        <span class="hljs-variable">$x</span> = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$arrays</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$token</span> =&gt; <span class="hljs-variable">$data</span>) {
            <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$data</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$y</span> =&gt; <span class="hljs-variable">$value</span>) {
                <span class="hljs-variable">$prepared_statement</span>-&gt;<span class="hljs-title function_ invoke__">bindValue</span>(<span class="hljs-string">":<span class="hljs-subst">{$x}</span>_<span class="hljs-subst">{$y}</span>"</span>, <span class="hljs-variable">$value</span>);
            }
            <span class="hljs-variable">$x</span>++;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-variable">$prepared_statement</span>;
    }
}
</code></pre>

<p>You can use it like this:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$db_link</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array_Capable</span>_PDO(<span class="hljs-variable">$dsn</span>, <span class="hljs-variable">$username</span>, <span class="hljs-variable">$password</span>);

<span class="hljs-variable">$query</span> = <span class="hljs-string">'
    SELECT     *
    FROM       test
    WHERE      field1 IN :array1
     OR        field2 IN :array2
     OR        field3 = :value
'</span>;

<span class="hljs-variable">$pdo_query</span> = <span class="hljs-variable">$db_link</span>-&gt;<span class="hljs-title function_ invoke__">prepare_with_arrays</span>(
    <span class="hljs-variable">$query</span>,
    <span class="hljs-keyword">array</span>(
        <span class="hljs-string">':array1'</span> =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>),
        <span class="hljs-string">':array2'</span> =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>)
    )
);

<span class="hljs-variable">$pdo_query</span>-&gt;<span class="hljs-title function_ invoke__">bindValue</span>(<span class="hljs-string">':value'</span>, <span class="hljs-string">'10'</span>);

<span class="hljs-variable">$pdo_query</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For me the sexier solution is to construct a dynamic associative array &amp; use it</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-comment">// A dirty array sent by user</span>
<span class="hljs-variable">$dirtyArray</span> = [<span class="hljs-string">'Cecile'</span>, <span class="hljs-string">'Gilles'</span>, <span class="hljs-string">'Andre'</span>, <span class="hljs-string">'Claude'</span>];

<span class="hljs-comment">// we construct an associative array like this</span>
<span class="hljs-comment">// [ ':name_0' =&gt; 'Cecile', ... , ':name_3' =&gt; 'Claude' ]</span>
<span class="hljs-variable">$params</span> = <span class="hljs-title function_ invoke__">array_combine</span>(
    <span class="hljs-title function_ invoke__">array_map</span>(
        // construct param name according to <span class="hljs-keyword">array</span> index
        function (<span class="hljs-variable">$v</span>) {<span class="hljs-keyword">return</span> <span class="hljs-string">":name_<span class="hljs-subst">{$v}</span>"</span>;},
        // get values of users
        <span class="hljs-title function_ invoke__">array_keys</span>(<span class="hljs-variable">$dirtyArray</span>)
    ),
    <span class="hljs-variable">$dirtyArray</span>
);

<span class="hljs-comment">// construct the query like `.. WHERE name IN ( :name_1, .. , :name_3 )`</span>
<span class="hljs-variable">$query</span> = <span class="hljs-string">"SELECT * FROM user WHERE name IN( "</span> . <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">","</span>, <span class="hljs-title function_ invoke__">array_keys</span>(<span class="hljs-variable">$params</span>)) . <span class="hljs-string">" )"</span>;
<span class="hljs-comment">// here we go</span>
<span class="hljs-variable">$stmt</span>  = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$query</span>);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>(<span class="hljs-variable">$params</span>);
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Looking at  <a href="http://uk.php.net/manual/en/pdo.constants.php" rel="noreferrer">PDO :Predefined Constants</a> there is no PDO::PARAM_ARRAY which you would need as is listed on <a href="http://uk.php.net/manual/en/pdostatement.bindparam.php" rel="noreferrer">PDOStatement-&gt;bindParam</a> </p>

<blockquote>
  <p>bool PDOStatement::bindParam ( mixed $parameter , mixed &amp;$variable [, <strong>int $data_type</strong> [, int $length [, mixed $driver_options ]]] )</p>
</blockquote>

<p>So I don't think it is achievable. </p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I also realise this thread is old but I had a unique problem where, while converting the soon-to-be deprecated mysql driver to the PDO driver I had to make a function which could build, dynamically, both normal params and INs from the same param array. So I quickly built this:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-comment">/**
 * mysql::pdo_query('SELECT * FROM TBL_WHOOP WHERE type_of_whoop IN :param AND siz_of_whoop = :size', array(':param' =&gt; array(1,2,3), ':size' =&gt; 3))
 *
 * <span class="hljs-doctag">@param</span> $query
 * <span class="hljs-doctag">@param</span> $params
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pdo_query</span>(<span class="hljs-params"><span class="hljs-variable">$query</span>, <span class="hljs-variable">$params</span> = <span class="hljs-keyword">array</span>(<span class="hljs-params"></span>)</span>)</span>{

    <span class="hljs-keyword">if</span>(!<span class="hljs-variable">$query</span>)
        <span class="hljs-title function_ invoke__">trigger_error</span>(<span class="hljs-string">'Could not query nothing'</span>);

    <span class="hljs-comment">// Lets get our IN fields first</span>
    <span class="hljs-variable">$in_fields</span> = <span class="hljs-keyword">array</span>();
    <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$params</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$field</span> =&gt; <span class="hljs-variable">$value</span>){
        <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">is_array</span>(<span class="hljs-variable">$value</span>)){
            <span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">0</span>,<span class="hljs-variable">$size</span>=<span class="hljs-title function_ invoke__">sizeof</span>(<span class="hljs-variable">$value</span>);<span class="hljs-variable">$i</span>&lt;<span class="hljs-variable">$size</span>;<span class="hljs-variable">$i</span>++)
                <span class="hljs-variable">$in_array</span>[] = <span class="hljs-variable">$field</span>.<span class="hljs-variable">$i</span>;

            <span class="hljs-variable">$query</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-variable">$field</span>, <span class="hljs-string">"("</span>.<span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">','</span>, <span class="hljs-variable">$in_array</span>).<span class="hljs-string">")"</span>, <span class="hljs-variable">$query</span>); <span class="hljs-comment">// Lets replace the position in the query string with the full version</span>
            <span class="hljs-variable">$in_fields</span>[<span class="hljs-variable">$field</span>] = <span class="hljs-variable">$value</span>; <span class="hljs-comment">// Lets add this field to an array for use later</span>
            <span class="hljs-keyword">unset</span>(<span class="hljs-variable">$params</span>[<span class="hljs-variable">$field</span>]); <span class="hljs-comment">// Lets unset so we don't bind the param later down the line</span>
        }
    }

    <span class="hljs-variable">$query_obj</span> = <span class="hljs-variable language_">$this</span>-&gt;pdo_link-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$query</span>);
    <span class="hljs-variable">$query_obj</span>-&gt;<span class="hljs-title function_ invoke__">setFetchMode</span>(PDO::<span class="hljs-variable constant_">FETCH_ASSOC</span>);

    <span class="hljs-comment">// Now lets bind normal params.</span>
    <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$params</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$field</span> =&gt; <span class="hljs-variable">$value</span>) <span class="hljs-variable">$query_obj</span>-&gt;<span class="hljs-title function_ invoke__">bindValue</span>(<span class="hljs-variable">$field</span>, <span class="hljs-variable">$value</span>);

    <span class="hljs-comment">// Now lets bind the IN params</span>
    <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$in_fields</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$field</span> =&gt; <span class="hljs-variable">$value</span>){
        <span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">0</span>,<span class="hljs-variable">$size</span>=<span class="hljs-title function_ invoke__">sizeof</span>(<span class="hljs-variable">$value</span>);<span class="hljs-variable">$i</span>&lt;<span class="hljs-variable">$size</span>;<span class="hljs-variable">$i</span>++)
            <span class="hljs-variable">$query_obj</span>-&gt;<span class="hljs-title function_ invoke__">bindValue</span>(<span class="hljs-variable">$field</span>.<span class="hljs-variable">$i</span>, <span class="hljs-variable">$value</span>[<span class="hljs-variable">$i</span>]); <span class="hljs-comment">// Both the named param index and this index are based off the array index which has not changed...hopefully</span>
    }

    <span class="hljs-variable">$query_obj</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();

    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$query_obj</span>-&gt;<span class="hljs-title function_ invoke__">rowCount</span>() &lt;= <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-variable">$query_obj</span>;
}
</code></pre>

<p>It is still untested however the logic seems to be there.</p>

<p>Hope it helps someone in the same position,</p>

<p>Edit: After some testing I found out:</p>

<ul>
<li>PDO does not like '.' in their names (which is kinda stupid if you ask me)</li>
<li>bindParam is the wrong function, bindValue is the right function.</li>
</ul>

<p>Code edited to working version.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A little editing about the code of Schnalle</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-variable">$ids</span>     = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>);
<span class="hljs-variable">$inQuery</span> = <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">','</span>, <span class="hljs-title function_ invoke__">array_fill</span>(<span class="hljs-number">0</span>, <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$ids</span>)-<span class="hljs-number">1</span>, <span class="hljs-string">'?'</span>));

<span class="hljs-variable">$db</span>   = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(...);
<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(
    <span class="hljs-string">'SELECT *
     FROM table
     WHERE id IN('</span> . <span class="hljs-variable">$inQuery</span> . <span class="hljs-string">')'</span>
);

<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$ids</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$k</span> =&gt; <span class="hljs-variable">$id</span>)
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindValue</span>((<span class="hljs-variable">$k</span>+<span class="hljs-number">1</span>), <span class="hljs-variable">$id</span>);

<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
<span class="hljs-meta">?&gt;</span>

<span class="hljs-comment">//implode(',', array_fill(0, count($ids)-1), '?')); </span>
<span class="hljs-comment">//'?' this should be inside the array_fill</span>
<span class="hljs-comment">//$stmt-&gt;bindValue(($k+1), $in); </span>
<span class="hljs-comment">// instead of $in, it should be $id</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>What database are you using? In PostgreSQL I like using ANY(array). So to reuse your example:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-variable">$ids</span>=<span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>);
<span class="hljs-variable">$db</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(...);
<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(
    <span class="hljs-string">'SELECT *
     FROM table
     WHERE id = ANY (:an_array)'</span>
);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindParam</span>(<span class="hljs-string">'an_array'</span>,<span class="hljs-variable">$ids</span>);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
<span class="hljs-meta">?&gt;</span>
</code></pre>

<p>Unfortunately this is pretty non-portable. </p>

<p>On other databases you'll need to make up your own magic as others have been mentioning. You'll want to put that logic into a class/function to make it reusable throughout your program of course. Take a look at the comments on <code>mysql_query</code> page on PHP.NET for some more thoughts on the subject and examples of this scenario.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If the column can only contain integers, you could probably do this without placeholders and just put the ids in the query directly. You just have to cast all the values of the array to integers. Like this:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$listOfIds</span> = <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">','</span>,<span class="hljs-title function_ invoke__">array_map</span>(<span class="hljs-string">'intval'</span>, <span class="hljs-variable">$ids</span>));
<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(
    <span class="hljs-string">"SELECT *
     FROM table
     WHERE id IN(<span class="hljs-subst">$listOfIds</span>)"</span>
);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
</code></pre>

<p>This shouldn't be vulnerable to any SQL injection.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As I know there is no any possibility to bind an array into PDO statement.</p>

<p>But exists 2 common solutions:</p>

<ol>
<li><p>Use Positional Placeholders (?,?,?,?) or Named Placeholders (:id1, :id2, :id3)</p>

<p>$whereIn = implode(',', array_fill(0, count($ids), '?'));</p></li>
<li><p>Quote array earlier</p>

<p>$whereIn = array_map(array($db, 'quote'), $ids);</p></li>
</ol>

<p>Both options are good and safe. 
I prefer second one because it's shorter and I can var_dump parameters if I need it.
Using placeholders you must bind values and in the end your SQL code will be the same.</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$sql</span> = <span class="hljs-string">"SELECT * FROM table WHERE id IN (<span class="hljs-subst">$whereIn</span>)"</span>;
</code></pre>

<p>And the last and important for me is avoiding error "number of bound variables does not match number of tokens"</p>

<p>Doctrine it's great example of using positional placeholders, only because it has internal control over incoming parameters.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>After going through the same problem, i went to a simpler solution (although still not as elegant as an <code>PDO::PARAM_ARRAY</code> would be) : </p>

<p>given the array <code>$ids = array(2, 4, 32)</code>: </p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$newparams</span> = <span class="hljs-keyword">array</span>();
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$ids</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$n</span> =&gt; <span class="hljs-variable">$val</span>){ <span class="hljs-variable">$newparams</span>[] = <span class="hljs-string">":id_<span class="hljs-subst">$n</span>"</span>; }

<span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$conn</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">"DELETE FROM <span class="hljs-subst">$table</span> WHERE (<span class="hljs-subst">$table</span>.id IN ("</span> . <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">", "</span>,<span class="hljs-variable">$newparams</span>). <span class="hljs-string">"))"</span>);
    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$ids</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$n</span> =&gt; <span class="hljs-variable">$val</span>){
        <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindParam</span>(<span class="hljs-string">":id_<span class="hljs-subst">$n</span>"</span>, <span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-variable">$val</span>), PDO::<span class="hljs-variable constant_">PARAM_INT</span>);
    }
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
</code></pre>

<p>... and so on</p>

<p>So if you are using a mixed values array, you will need more code to test your values before assigning the type param:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-comment">// inside second foreach..</span>

<span class="hljs-variable">$valuevar</span> = (<span class="hljs-title function_ invoke__">is_float</span>(<span class="hljs-variable">$val</span>) ? <span class="hljs-title function_ invoke__">floatval</span>(<span class="hljs-variable">$val</span>) : <span class="hljs-title function_ invoke__">is_int</span>(<span class="hljs-variable">$val</span>) ? <span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-variable">$val</span>) :  <span class="hljs-title function_ invoke__">is_string</span>(<span class="hljs-variable">$val</span>) ? <span class="hljs-title function_ invoke__">strval</span>(<span class="hljs-variable">$val</span>) : <span class="hljs-variable">$val</span> );
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindParam</span>(<span class="hljs-string">":id_<span class="hljs-subst">$n</span>"</span>, <span class="hljs-variable">$valuevar</span>, (<span class="hljs-title function_ invoke__">is_int</span>(<span class="hljs-variable">$val</span>) ? PDO::<span class="hljs-variable constant_">PARAM_INT</span> :  <span class="hljs-title function_ invoke__">is_string</span>(<span class="hljs-variable">$val</span>) ? PDO::<span class="hljs-variable constant_">PARAM_STR</span> : <span class="hljs-literal">NULL</span> ));
</code></pre>

<p>But i have not tested this one.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It's not possible to use an array like that in PDO.</p>

<p>You need to build a string with a parameter (or use ?) for each value, for instance:</p>

<p><code>:an_array_0, :an_array_1, :an_array_2, :an_array_3, :an_array_4, :an_array_5</code></p>

<p>Here's an example:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-variable">$ids</span> = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>);
<span class="hljs-variable">$sqlAnArray</span> = <span class="hljs-title function_ invoke__">join</span>(
    <span class="hljs-string">', '</span>,
    <span class="hljs-title function_ invoke__">array_map</span>(
        function(<span class="hljs-variable">$index</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">":an_array_<span class="hljs-subst">$index</span>"</span>;
        },
        <span class="hljs-title function_ invoke__">array_keys</span>(<span class="hljs-variable">$ids</span>)
    )
);
<span class="hljs-variable">$db</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(
    <span class="hljs-string">'mysql:dbname=mydb;host=localhost'</span>,
    <span class="hljs-string">'user'</span>,
    <span class="hljs-string">'passwd'</span>
);
<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(
    <span class="hljs-string">'SELECT *
     FROM table
     WHERE id IN('</span>.<span class="hljs-variable">$sqlAnArray</span>.<span class="hljs-string">')'</span>
);
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$ids</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$index</span> =&gt; <span class="hljs-variable">$id</span>) {
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindValue</span>(<span class="hljs-string">"an_array_<span class="hljs-subst">$index</span>"</span>, <span class="hljs-variable">$id</span>);
}
</code></pre>

<p>If you want to keep using <code>bindParam</code>, you may do this instead:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$ids</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$index</span> =&gt; <span class="hljs-variable">$id</span>) {
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindParam</span>(<span class="hljs-string">"an_array_<span class="hljs-subst">$index</span>"</span>, <span class="hljs-variable">$ids</span>[<span class="hljs-variable">$id</span>]);
}
</code></pre>

<p>If you want to use <code>?</code> placeholders, you may do it like this:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-variable">$ids</span> = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>);
<span class="hljs-variable">$sqlAnArray</span> = <span class="hljs-string">'?'</span> . <span class="hljs-title function_ invoke__">str_repeat</span>(<span class="hljs-string">', ?'</span>, <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$ids</span>)-<span class="hljs-number">1</span>);
<span class="hljs-variable">$db</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(
    <span class="hljs-string">'mysql:dbname=dbname;host=localhost'</span>,
    <span class="hljs-string">'user'</span>,
    <span class="hljs-string">'passwd'</span>
);
<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(
    <span class="hljs-string">'SELECT *
     FROM phone_number_lookup
     WHERE country_code IN('</span>.<span class="hljs-variable">$sqlAnArray</span>.<span class="hljs-string">')'</span>
);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>(<span class="hljs-variable">$ids</span>);
</code></pre>

<p>If you don't know if <code>$ids</code> is empty, you should test it and handle that case accordingly (return an empty array, or return a Null Object, or throw an exception, ...).</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>here is my solution. I have also extended the PDO class:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Db</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PDO</span>
</span>{

    <span class="hljs-comment">/**
     * SELECT ... WHERE fieldName IN (:paramName) workaround
     *
     * <span class="hljs-doctag">@param</span> array  $array
     * <span class="hljs-doctag">@param</span> string $prefix
     *
     * <span class="hljs-doctag">@return</span> string
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CreateArrayBindParamNames</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$array</span>, <span class="hljs-variable">$prefix</span> = <span class="hljs-string">'id_'</span></span>)
    </span>{
        <span class="hljs-variable">$newparams</span> = [];
        <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$n</span> =&gt; <span class="hljs-variable">$val</span>)
        {
            <span class="hljs-variable">$newparams</span>[] = <span class="hljs-string">":"</span>.<span class="hljs-variable">$prefix</span>.<span class="hljs-variable">$n</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">", "</span>, <span class="hljs-variable">$newparams</span>);
    }

    <span class="hljs-comment">/**
     * Bind every array element to the proper named parameter
     *
     * <span class="hljs-doctag">@param</span> PDOStatement $stmt
     * <span class="hljs-doctag">@param</span> array        $array
     * <span class="hljs-doctag">@param</span> string       $prefix
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BindArrayParam</span>(<span class="hljs-params">PDOStatement &amp;<span class="hljs-variable">$stmt</span>, <span class="hljs-keyword">array</span> <span class="hljs-variable">$array</span>, <span class="hljs-variable">$prefix</span> = <span class="hljs-string">'id_'</span></span>)
    </span>{
        <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$n</span> =&gt; <span class="hljs-variable">$val</span>)
        {
            <span class="hljs-variable">$val</span> = <span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-variable">$val</span>);
            <span class="hljs-variable">$stmt</span> -&gt; <span class="hljs-title function_ invoke__">bindParam</span>(<span class="hljs-string">":"</span>.<span class="hljs-variable">$prefix</span>.<span class="hljs-variable">$n</span>, <span class="hljs-variable">$val</span>, PDO::<span class="hljs-variable constant_">PARAM_INT</span>);
        }
    }
}
</code></pre>

<p>Here is a sample usage for the above code:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$idList</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];
<span class="hljs-variable">$stmt</span> = <span class="hljs-variable language_">$this</span> -&gt; db -&gt; <span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">"
  SELECT
    `Name`
  FROM
    `User`
  WHERE
    (`ID` IN ("</span>.<span class="hljs-variable">$this</span> -&gt; db -&gt; <span class="hljs-title function_ invoke__">CreateArrayBindParamNames</span>(<span class="hljs-variable">$idList</span>).<span class="hljs-string">"))"</span>);
<span class="hljs-variable language_">$this</span> -&gt; db -&gt; <span class="hljs-title function_ invoke__">BindArrayParam</span>(<span class="hljs-variable">$stmt</span>, <span class="hljs-variable">$idList</span>);
<span class="hljs-variable">$stmt</span> -&gt; <span class="hljs-title function_ invoke__">execute</span>();
<span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$stmt</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$row</span>)
{
    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$row</span>[<span class="hljs-string">'Name'</span>];
}
</code></pre>

<p>Let me know what you think</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>With MySQL and PDO we can use a JSON array and <code>JSON_CONTAINS()</code> (<a href="https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-contains" rel="nofollow noreferrer">https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-contains</a>) to search in.</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$ids</span> = [<span class="hljs-number">123</span>, <span class="hljs-number">234</span>, <span class="hljs-number">345</span>, <span class="hljs-number">456</span>]; <span class="hljs-comment">// Array of users I search</span>
<span class="hljs-variable">$ids</span> = <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$ids</span>); <span class="hljs-comment">// JSON conversion</span>

<span class="hljs-variable">$sql</span> = <span class="hljs-string">&lt;&lt;&lt;SQL
    SELECT ALL user_id, user_login
    FROM users
    -- Cast is mandatory beaucause JSON_CONTAINS() waits JSON doc candidate
    WHERE JSON_CONTAINS(:ids, CAST(user_id AS JSON))
    SQL</span>;

<span class="hljs-variable">$search</span> = <span class="hljs-variable">$pdo</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$sql</span>);
<span class="hljs-variable">$search</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>([<span class="hljs-string">':ids'</span> =&gt; <span class="hljs-variable">$ids</span>]);
<span class="hljs-variable">$users</span> = <span class="hljs-variable">$search</span>-&gt;<span class="hljs-title function_ invoke__">fetchAll</span>();
</code></pre>
<p>Whe can also use <code>JSON_TABLE()</code> (<a href="https://dev.mysql.com/doc/refman/8.0/en/json-table-functions.html#function_json-table" rel="nofollow noreferrer">https://dev.mysql.com/doc/refman/8.0/en/json-table-functions.html#function_json-table</a>) for more complex cases and JSON data exploration :</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$users</span> = [
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">123</span>, <span class="hljs-string">'bday'</span> =&gt; ..., <span class="hljs-string">'address'</span> =&gt; ...],
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">234</span>, <span class="hljs-string">'bday'</span> =&gt; ..., <span class="hljs-string">'address'</span> =&gt; ...],
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">345</span>, <span class="hljs-string">'bday'</span> =&gt; ..., <span class="hljs-string">'address'</span> =&gt; ...],
]; <span class="hljs-comment">// I'd like to know their login</span>

<span class="hljs-variable">$users</span> = <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$users</span>);

<span class="hljs-variable">$sql</span> = <span class="hljs-string">&lt;&lt;&lt;SQL
    SELECT ALL user_id, user_login
    FROM users
    WHERE user_id IN (
        SELECT ALL user_id
        FROM JSON_TABLE(:users, '$[*]' COLUMNS (
            -- Data exploration...
            -- (if needed I can explore really deeply with NESTED kword)
            user_id INT PATH '$.id',
            -- I could skip these :
            user_bday DATE PATH '$.bday',
            user_address TINYTEXT PATH '$.address'
        )) AS _
    )
    SQL</span>;

<span class="hljs-variable">$search</span> = <span class="hljs-variable">$pdo</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$sql</span>);
<span class="hljs-variable">$search</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>([<span class="hljs-string">':users'</span> =&gt; <span class="hljs-variable">$users</span>]);
...
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 21</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I took it a bit further to get the answer closer to the original question of using placeholders to bind the params.  </p>

<p>This answer will have to make two loops through the array to be used in the query.  But it does solve the issue of having other column placeholders for more selective queries. </p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-comment">//builds placeholders to insert in IN()</span>
<span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span>=&gt;<span class="hljs-variable">$value</span>) {
    <span class="hljs-variable">$in_query</span> = <span class="hljs-variable">$in_query</span> . <span class="hljs-string">' :val_'</span> . <span class="hljs-variable">$key</span> . <span class="hljs-string">', '</span>;
}

<span class="hljs-comment">//gets rid of trailing comma and space</span>
<span class="hljs-variable">$in_query</span> = <span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$in_query</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">2</span>);

<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(
    <span class="hljs-string">"SELECT *
     WHERE id IN(<span class="hljs-subst">$in_query</span>)"</span>;

//pind params <span class="hljs-keyword">for</span> your placeholders.
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span>=&gt;<span class="hljs-variable">$value</span>) {
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindParam</span>(<span class="hljs-string">":val_"</span> . <span class="hljs-variable">$key</span>, <span class="hljs-variable">$array</span>[<span class="hljs-variable">$key</span>])
}

<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 22</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>you first set number of "?" in query  and then by a "for" send parameters
like this :</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-keyword">require</span> <span class="hljs-string">'dbConnect.php'</span>;
<span class="hljs-variable">$db</span>=<span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">dbConnect</span>();
<span class="hljs-variable">$array</span>=[];
<span class="hljs-title function_ invoke__">array_push</span>(<span class="hljs-variable">$array</span>,<span class="hljs-string">'value1'</span>);
<span class="hljs-title function_ invoke__">array_push</span>(<span class="hljs-variable">$array</span>,<span class="hljs-string">'value2'</span>);
<span class="hljs-variable">$query</span>=<span class="hljs-string">"SELECT * FROM sites WHERE kind IN ("</span>;

<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$field</span>){
    <span class="hljs-variable">$query</span>.=<span class="hljs-string">"?,"</span>;
}
<span class="hljs-variable">$query</span>=<span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$query</span>,<span class="hljs-number">0</span>,<span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$query</span>)-<span class="hljs-number">1</span>);
<span class="hljs-variable">$query</span>.=<span class="hljs-string">")"</span>;
<span class="hljs-variable">$tbl</span>=<span class="hljs-variable">$db</span>-&gt;connection-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$query</span>);
<span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">1</span>;<span class="hljs-variable">$i</span>&lt;=<span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$array</span>);<span class="hljs-variable">$i</span>++)
    <span class="hljs-variable">$tbl</span>-&gt;<span class="hljs-title function_ invoke__">bindParam</span>(<span class="hljs-variable">$i</span>,<span class="hljs-variable">$array</span>[<span class="hljs-variable">$i</span>-<span class="hljs-number">1</span>],PDO::<span class="hljs-variable constant_">PARAM_STR</span>);
<span class="hljs-variable">$tbl</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
<span class="hljs-variable">$row</span>=<span class="hljs-variable">$tbl</span>-&gt;<span class="hljs-title function_ invoke__">fetchAll</span>(PDO::<span class="hljs-variable constant_">FETCH_OBJ</span>);
<span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$row</span>);
</code></pre>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;You\u0026apos;ll have to construct the query-string.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;     = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$inQuery\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_fill\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;count\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;?\u0026apos;\u0026lt;/span\u0026gt;));\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(...);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT *\n     FROM table\n     WHERE id IN(\u0026apos;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$inQuery\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;\n);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// bindvalue is 1-indexed, so $k+1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindValue\u0026lt;/span\u0026gt;((\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt;+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Both chris (comments) and somebodyisintrouble suggested that the foreach-loop ...\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;(...)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// bindvalue is 1-indexed, so $k+1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindValue\u0026lt;/span\u0026gt;((\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt;+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;... might be redundant, so the \u0026lt;code\u0026gt;foreach\u0026lt;/code\u0026gt; loop and the \u0026lt;code\u0026gt;$stmt-\u0026amp;gt;execute\u0026lt;/code\u0026gt; could be replaced by just ...\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt; \n  (...)\n  \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For something quick:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//$db = new PDO(...);\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//$ids = array(...);\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$qMarks\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;str_repeat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;?,\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;count\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;) - \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;?\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sth\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM myTable WHERE id IN (\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$qMarks\u0026lt;/span\u0026gt;)\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sth\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Is it so important to use \u0026lt;code\u0026gt;IN\u0026lt;/code\u0026gt; statement? Try to use \u0026lt;code\u0026gt;FIND_IN_SET\u0026lt;/code\u0026gt; op.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example, there is a query in PDO like that \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;SELECT * FROM table WHERE \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;FIND_IN_SET\u0026lt;/span\u0026gt;(id, :\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then you only need to bind an array of values, imploded with comma, like this one \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids_string\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array_of_smth\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// WITHOUT WHITESPACES BEFORE AND AFTER THE COMMA\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;array\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids_string\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and it\u0026apos;s done.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;UPD: As some people pointed out in comments to this answer, there are some issues which should be stated explciitly. \u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;FIND_IN_SET\u0026lt;/code\u0026gt; doesn\u0026apos;t use index in a table, and it is still not implemented yet - see \u0026lt;a href=\u0026quot;http://bugs.mysql.com/bug.php?id=37564\u0026quot;\u0026gt;this record in the MYSQL bug tracker\u0026lt;/a\u0026gt;. Thanks to @BillKarwin for the notice.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;You can\u0026apos;t use a string with comma inside as a value of the array for search. It is impossible to parse such string in the right way after \u0026lt;code\u0026gt;implode\u0026lt;/code\u0026gt; since you use comma symbol as a separator. Thanks to @VaL for the note.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;In fine, if you are not heavily dependent on indexes and do not use strings with comma for search, my solution will be much easier, simpler, and faster than solutions listed above.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Since I do a lot of dynamic queries, this is a super simple helper function I made. \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;bindParamArray\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$prefix\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$values\u0026lt;/span\u0026gt;, \u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$bindArray\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\n\u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$str\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$values\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$index\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;){\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$str\u0026lt;/span\u0026gt; .= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$prefix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$index\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$bindArray\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$prefix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$index\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;rtrim\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$str\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt;);     \n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Use it like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$bindString\u0026lt;/span\u0026gt; = helper::\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindParamArray\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;id\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$_GET\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ids\u0026apos;\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$bindArray\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$userConditions\u0026lt;/span\u0026gt; .= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; AND users.id IN(\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$bindString\u0026lt;/span\u0026gt;)\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Returns a string \u0026lt;code\u0026gt;:id1,:id2,:id3\u0026lt;/code\u0026gt; and also updates your \u0026lt;code\u0026gt;$bindArray\u0026lt;/code\u0026gt; of bindings that you will need when it\u0026apos;s time to run your query. Easy!\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;very clean way for postgres is using the postgres-array (\u0026quot;{}\u0026quot;):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;45\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$param\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;{\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;, \u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;}\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$cmd\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM table WHERE id = ANY (?)\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$result\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$cmd\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$param\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Solution from EvilRygy didn\u0026apos;t worked for me. In Postgres you can do another workaround:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(...);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT *\n     FROM table\n     WHERE id = ANY (string_to_array(:an_array, \u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;))\u0026apos;\u0026lt;/span\u0026gt;\n);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;:an_array\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;));\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is my solution:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$total_items\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;count\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array_of_items\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$question_marks\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_fill\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$total_items\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;?\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT * FROM foo WHERE bar IN (\u0026apos;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$question_marks\u0026lt;/span\u0026gt; ). \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dbh\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_values\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array_of_items\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note the use of array_values.  This can fix key ordering issues.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I was merging arrays of ids and then removing duplicate items.  I had something like:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;47\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;17\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And that was failing.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;When you have other parameter, you may do like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(...);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT *\n            FROM table\n           WHERE X = :x\n             AND id IN(\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$comma\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;count\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;++){\n  \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt; .= \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$comma\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;:p\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;;       \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// :p0, :p1, ...\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$comma\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;;\n}\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt; .= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindValue\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;:x\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// some value\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;count\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;++){\n  \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindValue\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;:p\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;]);\n}\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I extended PDO to do something similar to what stefs suggests, and it was easier for me in the long run:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Array_Capable_PDO\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n     * Both prepare a statement and bind array values to it\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; string $statement mysql query with colon-prefixed tokens\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; array $arrays associatve array with string tokens as keys and integer-indexed data arrays as values \n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; array $driver_options see php documention\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@return\u0026lt;/span\u0026gt; PDOStatement with given array values already bound \n     */\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;prepare_with_arrays\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$statement\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$arrays\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$driver_options\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;) \u0026lt;/span\u0026gt;{\n\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$replace_strings\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;();\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$x\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$arrays\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$token\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// just for testing...\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//// tokens should be legit\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//assert(\u0026apos;is_string($token)\u0026apos;);\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//assert(\u0026apos;$token !== \u0026quot;\u0026quot;\u0026apos;);\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//// a given token shouldn\u0026apos;t appear more than once in the query\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//assert(\u0026apos;substr_count($statement, $token) === 1\u0026apos;);\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//// there should be an array of values for each token\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//assert(\u0026apos;is_array($data)\u0026apos;);\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//// empty data arrays aren\u0026apos;t okay, they\u0026apos;re a SQL syntax error\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//assert(\u0026apos;count($data) \u0026amp;gt; 0\u0026apos;);\u0026lt;/span\u0026gt;\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// replace array tokens with a list of value tokens\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$replace_string_pieces\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$y\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;) {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//// the data arrays have to be integer-indexed\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//assert(\u0026apos;is_int($y)\u0026apos;);\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$replace_string_pieces\u0026lt;/span\u0026gt;[] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{$x}\u0026lt;/span\u0026gt;_\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{$y}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;;\n            }\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$replace_strings\u0026lt;/span\u0026gt;[] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;(\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;, \u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$replace_string_pieces\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$x\u0026lt;/span\u0026gt;++;\n        }\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$statement\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;str_replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_keys\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$arrays\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$replace_strings\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$statement\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$prepared_statement\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$statement\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$driver_options\u0026lt;/span\u0026gt;);\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// bind values to the value tokens\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$x\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$arrays\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$token\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$y\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;) {\n                \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$prepared_statement\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindValue\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{$x}\u0026lt;/span\u0026gt;_\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{$y}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;);\n            }\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$x\u0026lt;/span\u0026gt;++;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$prepared_statement\u0026lt;/span\u0026gt;;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can use it like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db_link\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array_Capable\u0026lt;/span\u0026gt;_PDO(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dsn\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$username\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$password\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\n    SELECT     *\n    FROM       test\n    WHERE      field1 IN :array1\n     OR        field2 IN :array2\n     OR        field3 = :value\n\u0026apos;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pdo_query\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db_link\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare_with_arrays\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;:array1\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;),\n        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;:array2\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;)\n    )\n);\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pdo_query\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindValue\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;:value\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;10\u0026apos;\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pdo_query\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For me the sexier solution is to construct a dynamic associative array \u0026amp;amp; use it\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// A dirty array sent by user\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dirtyArray\u0026lt;/span\u0026gt; = [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Cecile\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Gilles\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Andre\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Claude\u0026apos;\u0026lt;/span\u0026gt;];\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// we construct an associative array like this\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// [ \u0026apos;:name_0\u0026apos; =\u0026amp;gt; \u0026apos;Cecile\u0026apos;, ... , \u0026apos;:name_3\u0026apos; =\u0026amp;gt; \u0026apos;Claude\u0026apos; ]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$params\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_combine\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_map\u0026lt;/span\u0026gt;(\n        // construct param name according to \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt; index\n        function (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$v\u0026lt;/span\u0026gt;) {\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:name_\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{$v}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;;},\n        // get values of users\n        \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_keys\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dirtyArray\u0026lt;/span\u0026gt;)\n    ),\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dirtyArray\u0026lt;/span\u0026gt;\n);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// construct the query like `.. WHERE name IN ( :name_1, .. , :name_3 )`\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM user WHERE name IN( \u0026quot;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_keys\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$params\u0026lt;/span\u0026gt;)) . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; )\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// here we go\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;  = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$params\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Looking at  \u0026lt;a href=\u0026quot;http://uk.php.net/manual/en/pdo.constants.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;PDO :Predefined Constants\u0026lt;/a\u0026gt; there is no PDO::PARAM_ARRAY which you would need as is listed on \u0026lt;a href=\u0026quot;http://uk.php.net/manual/en/pdostatement.bindparam.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;PDOStatement-\u0026amp;gt;bindParam\u0026lt;/a\u0026gt; \u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;bool PDOStatement::bindParam ( mixed $parameter , mixed \u0026amp;amp;$variable [, \u0026lt;strong\u0026gt;int $data_type\u0026lt;/strong\u0026gt; [, int $length [, mixed $driver_options ]]] )\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;So I don\u0026apos;t think it is achievable. \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I also realise this thread is old but I had a unique problem where, while converting the soon-to-be deprecated mysql driver to the PDO driver I had to make a function which could build, dynamically, both normal params and INs from the same param array. So I quickly built this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n * mysql::pdo_query(\u0026apos;SELECT * FROM TBL_WHOOP WHERE type_of_whoop IN :param AND siz_of_whoop = :size\u0026apos;, array(\u0026apos;:param\u0026apos; =\u0026amp;gt; array(1,2,3), \u0026apos;:size\u0026apos; =\u0026amp;gt; 3))\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; $query\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; $params\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;pdo_query\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$params\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;{\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(!\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;trigger_error\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Could not query nothing\u0026apos;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Lets get our IN fields first\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$in_fields\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$params\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$field\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;){\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;is_array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;)){\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$size\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;sizeof\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;);\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$size\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;++)\n                \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$in_array\u0026lt;/span\u0026gt;[] = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$field\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;;\n\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;str_replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$field\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$in_array\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;)\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Lets replace the position in the query string with the full version\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$in_fields\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$field\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Lets add this field to an array for use later\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;unset\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$params\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$field\u0026lt;/span\u0026gt;]); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Lets unset so we don\u0026apos;t bind the param later down the line\u0026lt;/span\u0026gt;\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query_obj\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;pdo_link-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query_obj\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;setFetchMode\u0026lt;/span\u0026gt;(PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;FETCH_ASSOC\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Now lets bind normal params.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$params\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$field\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query_obj\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindValue\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$field\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Now lets bind the IN params\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$in_fields\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$field\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;){\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$size\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;sizeof\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;);\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$size\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;++)\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query_obj\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindValue\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$field\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;]); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Both the named param index and this index are based off the array index which has not changed...hopefully\u0026lt;/span\u0026gt;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query_obj\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query_obj\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;rowCount\u0026lt;/span\u0026gt;() \u0026amp;lt;= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query_obj\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It is still untested however the logic seems to be there.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Hope it helps someone in the same position,\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Edit: After some testing I found out:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;PDO does not like \u0026apos;.\u0026apos; in their names (which is kinda stupid if you ask me)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;bindParam is the wrong function, bindValue is the right function.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;Code edited to working version.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;A little editing about the code of Schnalle\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;     = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$inQuery\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_fill\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;count\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;)-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;?\u0026apos;\u0026lt;/span\u0026gt;));\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;   = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(...);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT *\n     FROM table\n     WHERE id IN(\u0026apos;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$inQuery\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;\n);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindValue\u0026lt;/span\u0026gt;((\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt;+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//implode(\u0026apos;,\u0026apos;, array_fill(0, count($ids)-1), \u0026apos;?\u0026apos;)); \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//\u0026apos;?\u0026apos; this should be inside the array_fill\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//$stmt-\u0026amp;gt;bindValue(($k+1), $in); \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// instead of $in, it should be $id\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;What database are you using? In PostgreSQL I like using ANY(array). So to reuse your example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(...);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT *\n     FROM table\n     WHERE id = ANY (:an_array)\u0026apos;\u0026lt;/span\u0026gt;\n);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;an_array\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Unfortunately this is pretty non-portable. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;On other databases you\u0026apos;ll need to make up your own magic as others have been mentioning. You\u0026apos;ll want to put that logic into a class/function to make it reusable throughout your program of course. Take a look at the comments on \u0026lt;code\u0026gt;mysql_query\u0026lt;/code\u0026gt; page on PHP.NET for some more thoughts on the subject and examples of this scenario.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If the column can only contain integers, you could probably do this without placeholders and just put the ids in the query directly. You just have to cast all the values of the array to integers. Like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$listOfIds\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;intval\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;));\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT *\n     FROM table\n     WHERE id IN(\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$listOfIds\u0026lt;/span\u0026gt;)\u0026quot;\u0026lt;/span\u0026gt;\n);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This shouldn\u0026apos;t be vulnerable to any SQL injection.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As I know there is no any possibility to bind an array into PDO statement.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;But exists 2 common solutions:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Use Positional Placeholders (?,?,?,?) or Named Placeholders (:id1, :id2, :id3)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;$whereIn = implode(\u0026apos;,\u0026apos;, array_fill(0, count($ids), \u0026apos;?\u0026apos;));\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Quote array earlier\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;$whereIn = array_map(array($db, \u0026apos;quote\u0026apos;), $ids);\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;Both options are good and safe. \nI prefer second one because it\u0026apos;s shorter and I can var_dump parameters if I need it.\nUsing placeholders you must bind values and in the end your SQL code will be the same.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM table WHERE id IN (\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$whereIn\u0026lt;/span\u0026gt;)\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And the last and important for me is avoiding error \u0026quot;number of bound variables does not match number of tokens\u0026quot;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Doctrine it\u0026apos;s great example of using positional placeholders, only because it has internal control over incoming parameters.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;After going through the same problem, i went to a simpler solution (although still not as elegant as an \u0026lt;code\u0026gt;PDO::PARAM_ARRAY\u0026lt;/code\u0026gt; would be) : \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;given the array \u0026lt;code\u0026gt;$ids = array(2, 4, 32)\u0026lt;/code\u0026gt;: \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$newparams\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$n\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;){ \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$newparams\u0026lt;/span\u0026gt;[] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:id_\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$n\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;; }\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$conn\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;DELETE FROM \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$table\u0026lt;/span\u0026gt; WHERE (\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$table\u0026lt;/span\u0026gt;.id IN (\u0026quot;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;, \u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$newparams\u0026lt;/span\u0026gt;). \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;))\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$n\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;){\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:id_\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$n\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;intval\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;), PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PARAM_INT\u0026lt;/span\u0026gt;);\n    }\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;... and so on\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So if you are using a mixed values array, you will need more code to test your values before assigning the type param:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// inside second foreach..\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$valuevar\u0026lt;/span\u0026gt; = (\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;is_float\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;) ? \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;floatval\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;) : \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;is_int\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;) ? \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;intval\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;) :  \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;is_string\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;) ? \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;strval\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;) : \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt; );\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:id_\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$n\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$valuevar\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;is_int\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;) ? PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PARAM_INT\u0026lt;/span\u0026gt; :  \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;is_string\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;) ? PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PARAM_STR\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt; ));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;But i have not tested this one.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It\u0026apos;s not possible to use an array like that in PDO.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You need to build a string with a parameter (or use ?) for each value, for instance:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;:an_array_0, :an_array_1, :an_array_2, :an_array_3, :an_array_4, :an_array_5\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here\u0026apos;s an example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sqlAnArray\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;join\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;, \u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_map\u0026lt;/span\u0026gt;(\n        function(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$index\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:an_array_\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$index\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;;\n        },\n        \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_keys\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;)\n    )\n);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;mysql:dbname=mydb;host=localhost\u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;user\u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;passwd\u0026apos;\u0026lt;/span\u0026gt;\n);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT *\n     FROM table\n     WHERE id IN(\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sqlAnArray\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;\n);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$index\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindValue\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;an_array_\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$index\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If you want to keep using \u0026lt;code\u0026gt;bindParam\u0026lt;/code\u0026gt;, you may do this instead:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$index\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;an_array_\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$index\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;]);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If you want to use \u0026lt;code\u0026gt;?\u0026lt;/code\u0026gt; placeholders, you may do it like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sqlAnArray\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;?\u0026apos;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;str_repeat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;, ?\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;count\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;)-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;mysql:dbname=dbname;host=localhost\u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;user\u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;passwd\u0026apos;\u0026lt;/span\u0026gt;\n);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT *\n     FROM phone_number_lookup\n     WHERE country_code IN(\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sqlAnArray\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;\n);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If you don\u0026apos;t know if \u0026lt;code\u0026gt;$ids\u0026lt;/code\u0026gt; is empty, you should test it and handle that case accordingly (return an empty array, or return a Null Object, or throw an exception, ...).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;here is my solution. I have also extended the PDO class:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Db\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;{\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n     * SELECT ... WHERE fieldName IN (:paramName) workaround\n     *\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; array  $array\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; string $prefix\n     *\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@return\u0026lt;/span\u0026gt; string\n     */\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;CreateArrayBindParamNames\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$prefix\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;id_\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\n    \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$newparams\u0026lt;/span\u0026gt; = [];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$n\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;)\n        {\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$newparams\u0026lt;/span\u0026gt;[] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$prefix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$n\u0026lt;/span\u0026gt;;\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;, \u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$newparams\u0026lt;/span\u0026gt;);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n     * Bind every array element to the proper named parameter\n     *\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; PDOStatement $stmt\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; array        $array\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; string       $prefix\n     */\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;BindArrayParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;PDOStatement \u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$prefix\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;id_\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\n    \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$n\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;)\n        {\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;intval\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$prefix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$n\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;, PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PARAM_INT\u0026lt;/span\u0026gt;);\n        }\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Here is a sample usage for the above code:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$idList\u0026lt;/span\u0026gt; = [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;];\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt; -\u0026amp;gt; db -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\n  SELECT\n    `Name`\n  FROM\n    `User`\n  WHERE\n    (`ID` IN (\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt; -\u0026amp;gt; db -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;CreateArrayBindParamNames\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$idList\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;))\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt; -\u0026amp;gt; db -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;BindArrayParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$idList\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; -\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$row\u0026lt;/span\u0026gt;)\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$row\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Name\u0026apos;\u0026lt;/span\u0026gt;];\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Let me know what you think\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;With MySQL and PDO we can use a JSON array and \u0026lt;code\u0026gt;JSON_CONTAINS()\u0026lt;/code\u0026gt; (\u0026lt;a href=\u0026quot;https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-contains\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-contains\u0026lt;/a\u0026gt;) to search in.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; = [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;234\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;345\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;456\u0026lt;/span\u0026gt;]; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Array of users I search\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// JSON conversion\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;\u0026amp;lt;\u0026amp;lt;SQL\n    SELECT ALL user_id, user_login\n    FROM users\n    -- Cast is mandatory beaucause JSON_CONTAINS() waits JSON doc candidate\n    WHERE JSON_CONTAINS(:ids, CAST(user_id AS JSON))\n    SQL\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$search\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pdo\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$search\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;:ids\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;]);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$users\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$search\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;fetchAll\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Whe can also use \u0026lt;code\u0026gt;JSON_TABLE()\u0026lt;/code\u0026gt; (\u0026lt;a href=\u0026quot;https://dev.mysql.com/doc/refman/8.0/en/json-table-functions.html#function_json-table\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://dev.mysql.com/doc/refman/8.0/en/json-table-functions.html#function_json-table\u0026lt;/a\u0026gt;) for more complex cases and JSON data exploration :\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$users\u0026lt;/span\u0026gt; = [\n    [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;id\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;bday\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; ..., \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;address\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; ...],\n    [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;id\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;234\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;bday\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; ..., \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;address\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; ...],\n    [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;id\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;345\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;bday\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; ..., \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;address\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; ...],\n]; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// I\u0026apos;d like to know their login\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$users\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$users\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;\u0026amp;lt;\u0026amp;lt;SQL\n    SELECT ALL user_id, user_login\n    FROM users\n    WHERE user_id IN (\n        SELECT ALL user_id\n        FROM JSON_TABLE(:users, \u0026apos;$[*]\u0026apos; COLUMNS (\n            -- Data exploration...\n            -- (if needed I can explore really deeply with NESTED kword)\n            user_id INT PATH \u0026apos;$.id\u0026apos;,\n            -- I could skip these :\n            user_bday DATE PATH \u0026apos;$.bday\u0026apos;,\n            user_address TINYTEXT PATH \u0026apos;$.address\u0026apos;\n        )) AS _\n    )\n    SQL\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$search\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pdo\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$search\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;:users\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$users\u0026lt;/span\u0026gt;]);\n...\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I took it a bit further to get the answer closer to the original question of using placeholders to bind the params.  \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This answer will have to make two loops through the array to be used in the query.  But it does solve the issue of having other column placeholders for more selective queries. \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//builds placeholders to insert in IN()\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt;=\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$in_query\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$in_query\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; :val_\u0026apos;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;, \u0026apos;\u0026lt;/span\u0026gt;;\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//gets rid of trailing comma and space\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$in_query\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;substr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$in_query\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT *\n     WHERE id IN(\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$in_query\u0026lt;/span\u0026gt;)\u0026quot;\u0026lt;/span\u0026gt;;\n\n//pind params \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; your placeholders.\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt;=\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:val_\u0026quot;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt;])\n}\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;you first set number of \u0026quot;?\u0026quot; in query  and then by a \u0026quot;for\u0026quot; send parameters\nlike this :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;require\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dbConnect.php\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;dbConnect\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt;=[];\n\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_push\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;value1\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_push\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;value2\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM sites WHERE kind IN (\u0026quot;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$field\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;.=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;?,\u0026quot;\u0026lt;/span\u0026gt;;\n}\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;substr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;strlen\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;)-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;.=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;)\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$tbl\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;connection-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;\u0026amp;lt;=\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;count\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt;);\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;++)\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$tbl\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$array\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$i\u0026lt;/span\u0026gt;-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;],PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PARAM_STR\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$tbl\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$row\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$tbl\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;fetchAll\u0026lt;/span\u0026gt;(PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;FETCH_OBJ\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;var_dump\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$row\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":547,"title":"Can I bind an array to an IN() condition in a PDO query?","content":"\n                \n\u0026lt;p\u0026gt;I\u0026apos;m curious to know if it\u0026apos;s possible to bind an array of values to a placeholder using PDO.  The use case here is attempting to pass an array of values for use with an \u0026lt;code\u0026gt;IN()\u0026lt;/code\u0026gt; condition.  \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I\u0026apos;d like to be able to do something like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(...);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT *\n     FROM table\n     WHERE id IN(:an_array)\u0026apos;\u0026lt;/span\u0026gt;\n);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindParam\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;an_array\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And have PDO bind and quote all the values in the array.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;At the moment I\u0026apos;m doing:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(...);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;quote\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//iterate through array and quote\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$in\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;implode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ids\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//create comma separated list\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT *\n     FROM table\n     WHERE id IN(\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$in\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;\n);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Which certainly does the job, but just wondering if there\u0026apos;s a built in solution I\u0026apos;m missing?\u0026lt;/p\u0026gt;\n    ","slug":"can-i-bind-an-array-to-an-in()-condition-in-a-pdo-query-1657388382858","postType":"QUESTION","createdAt":"2022-07-09T17:39:42.000Z","updatedAt":"2022-07-09T17:39:42.000Z","tags":[{"id":2665,"name":"prepared-statement","slug":"prepared-statement","createdAt":"2022-07-09T17:39:42.000Z","updatedAt":"2022-07-09T17:39:42.000Z","Questions_Tags":{"questionId":547,"tagId":2665}},{"id":2666,"name":"where-in","slug":"where-in","createdAt":"2022-07-09T17:39:42.000Z","updatedAt":"2022-07-09T17:39:42.000Z","Questions_Tags":{"questionId":547,"tagId":2666}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"can-i-bind-an-array-to-an-in()-condition-in-a-pdo-query-1657388382858"},"buildId":"8pZkyd0U8-Y2Qf3QK9j7l","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>