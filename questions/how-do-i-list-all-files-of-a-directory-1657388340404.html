<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>How do I list all files of a directory? | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="
            
        
            
                    
                        
                    
                
                    
                        This question&#x27;s answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.
                        
                    
                
            
        


    

How can I list all files of a directory in Python and add them to a list?
    "/><meta property="og:title" content="How do I list all files of a directory? | Solutions Checker"/><meta property="og:description" content="
            
        
            
                    
                        
                    
                
                    
                        This question&#x27;s answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.
                        
                    
                
            
        


    

How can I list all files of a directory in Python and add them to a list?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How do I list all files of a directory?","text":"\n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        This question&apos;s answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \n                \n            \n        \n\n\n    \n\nHow can I list all files of a directory in Python and add them to a list?\n    ","answerCount":21,"upVoteCount":500,"suggestedAnswer":[{"text":"os.listdir() returns everything inside a directory -- including both files and directories.\nos.path&apos;s isfile() can be used to only list files:\nfrom os import listdir\nfrom os.path import isfile, join\nonlyfiles = [f for f in listdir(mypath) if isfile(join(mypath, f))]\n\nAlternatively, os.walk() yields two lists for each directory it visits -- one for files and one for dirs. If you only want the top directory you can break the first time it yields:\nfrom os import walk\n\nf = []\nfor (dirpath, dirnames, filenames) in walk(mypath):\n    f.extend(filenames)\n    break\n\nor, shorter:\nfrom os import walk\n\nfilenames = next(walk(mypath), (None, None, []))[2]  # [] if no file\n\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"I prefer using the glob module, as it does pattern matching and expansion.\nimport glob\nprint(glob.glob(&quot;/home/adam/*&quot;))\n\nIt does pattern matching intuitively\nimport glob\n# All files and directories ending with .txt and that don&apos;t begin with a dot:\nprint(glob.glob(&quot;/home/adam/*.txt&quot;)) \n# All files and directories ending with .txt with depth of 2 folders, ignoring names beginning with a dot:\nprint(glob.glob(&quot;/home/adam/*/*.txt&quot;)) \n\nIt will return a list with the queried files and directories:\n[&apos;/home/adam/file1.txt&apos;, &apos;/home/adam/file2.txt&apos;, .... ]\n\nNote that glob ignores files and directories that begin with a dot ., as those are considered hidden files and directories, unless the pattern is something like .*.\nUse glob.escape to escape strings that are not meant to be patterns:\nprint(glob.glob(glob.escape(directory_name) + &quot;/*.txt&quot;))\n\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"list in the current directory\nWith listdir in os module you get the files and the folders in the current dir\nimport os\n\narr = os.listdir()\n\nLooking in a directory\narr = os.listdir(&apos;c:\\\\files&apos;)\n\nwith glob you can specify a type of file to list like this\nimport glob\n\ntxtfiles = []\nfor file in glob.glob(&quot;*.txt&quot;):\n    txtfiles.append(file)\n\nor\nmylist = [f for f in glob.glob(&quot;*.txt&quot;)]\n\nget the full path of only files in the current directory\nimport os\nfrom os import listdir\nfrom os.path import isfile, join\n\ncwd = os.getcwd()\nonlyfiles = [os.path.join(cwd, f) for f in os.listdir(cwd) if \nos.path.isfile(os.path.join(cwd, f))]\nprint(onlyfiles) \n\n[&apos;G:\\\\getfilesname\\\\getfilesname.py&apos;, &apos;G:\\\\getfilesname\\\\example.txt&apos;]\n\nGetting the full path name with os.path.abspath\nYou get the full path in return\n import os\n files_path = [os.path.abspath(x) for x in os.listdir()]\n print(files_path)\n \n [&apos;F:\\\\documenti\\applications.txt&apos;, &apos;F:\\\\documenti\\collections.txt&apos;]\n\nWalk: going through sub directories\nos.walk returns the root, the directories list and the files list, that is why I unpacked them in r, d, f in the for loop; it, then, looks for other files and directories in the subfolders of the root and so on until there are no subfolders.\nimport os\n\n# Getting the current work directory (cwd)\nthisdir = os.getcwd()\n\n# r=root, d=directories, f = files\nfor r, d, f in os.walk(thisdir):\n    for file in f:\n        if file.endswith(&quot;.docx&quot;):\n            print(os.path.join(r, file))\n\nTo go up in the directory tree\n# Method 1\nx = os.listdir(&apos;..&apos;)\n\n# Method 2\nx= os.listdir(&apos;/&apos;)\n\nGet files of a particular subdirectory with os.listdir()\nimport os\n\nx = os.listdir(&quot;./content&quot;)\n\nos.walk(&apos;.&apos;) - current directory\n import os\n arr = next(os.walk(&apos;.&apos;))[2]\n print(arr)\n \n &gt;&gt;&gt; [&apos;5bs_Turismo1.pdf&apos;, &apos;5bs_Turismo1.pptx&apos;, &apos;esperienza.txt&apos;]\n\nnext(os.walk(&apos;.&apos;)) and os.path.join(&apos;dir&apos;, &apos;file&apos;)\n import os\n arr = []\n for d,r,f in next(os.walk(&quot;F:\\\\_python&quot;)):\n     for file in f:\n         arr.append(os.path.join(r,file))\n\n for f in arr:\n     print(files)\n\n&gt;&gt;&gt; F:\\\\_python\\\\dict_class.py\n&gt;&gt;&gt; F:\\\\_python\\\\programmi.txt\n\nnext... walk\n [os.path.join(r,file) for r,d,f in next(os.walk(&quot;F:\\\\_python&quot;)) for file in f]\n \n &gt;&gt;&gt; [&apos;F:\\\\_python\\\\dict_class.py&apos;, &apos;F:\\\\_python\\\\programmi.txt&apos;]\n\nos.walk\nx = [os.path.join(r,file) for r,d,f in os.walk(&quot;F:\\\\_python&quot;) for file in f]\nprint(x)\n\n&gt;&gt;&gt; [&apos;F:\\\\_python\\\\dict.py&apos;, &apos;F:\\\\_python\\\\progr.txt&apos;, &apos;F:\\\\_python\\\\readl.py&apos;]\n\nos.listdir() - get only txt files\n arr_txt = [x for x in os.listdir() if x.endswith(&quot;.txt&quot;)]\n \n\nUsing glob to get the full path of the files\nfrom path import path\nfrom glob import glob\n\nx = [path(f).abspath() for f in glob(&quot;F:\\\\*.txt&quot;)]\n\nUsing os.path.isfile to avoid directories in the list\nimport os.path\nlistOfFiles = [f for f in os.listdir() if os.path.isfile(f)]\n\nUsing pathlib from Python 3.4\nimport pathlib\n\nflist = []\nfor p in pathlib.Path(&apos;.&apos;).iterdir():\n    if p.is_file():\n        print(p)\n        flist.append(p)\n\nWith list comprehension:\nflist = [p for p in pathlib.Path(&apos;.&apos;).iterdir() if p.is_file()]\n\nUse glob method in pathlib.Path()\nimport pathlib\n\npy = pathlib.Path().glob(&quot;*.py&quot;)\n\nGet all and only files with os.walk: checks only in the third element returned, i.e. the list of the files\nimport os\nx = [i[2] for i in os.walk(&apos;.&apos;)]\ny=[]\nfor t in x:\n    for f in t:\n        y.append(f)\n\nGet only files with next in a directory: returns only the file in the root folder\n import os\n x = next(os.walk(&apos;F://python&apos;))[2]\n\nGet only directories with next and walk in a directory, because in the [1] element there are the folders only\n import os\n next(os.walk(&apos;F://python&apos;))[1] # for the current dir use (&apos;.&apos;)\n \n &gt;&gt;&gt; [&apos;python3&apos;,&apos;others&apos;]\n\nGet all the subdir names with walk\nfor r,d,f in os.walk(&quot;F:\\\\_python&quot;):\n    for dirs in d:\n        print(dirs)\n\nos.scandir() from Python 3.5 and greater\nimport os\nx = [f.name for f in os.scandir() if f.is_file()]\n\n# Another example with `scandir` (a little variation from docs.python.org)\n# This one is more efficient than `os.listdir`.\n# In this case, it shows the files only in the current directory\n# where the script is executed.\n\nimport os\nwith os.scandir() as i:\n    for entry in i:\n        if entry.is_file():\n            print(entry.name)\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"import os\nos.listdir(&quot;somedirectory&quot;)\n\n\nwill return a list of all files and directories in &quot;somedirectory&quot;.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"A one-line solution to get only list of files (no subdirectories):\n\nfilenames = next(os.walk(path))[2]\n\n\nor absolute pathnames:\n\npaths = [os.path.join(path, fn) for fn in next(os.walk(path))[2]]\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"Getting Full File Paths From a Directory and All Its Subdirectories\n\nimport os\n\ndef get_filepaths(directory):\n    &quot;&quot;&quot;\n    This function will generate the file names in a directory \n    tree by walking the tree either top-down or bottom-up. For each \n    directory in the tree rooted at directory top (including top itself), \n    it yields a 3-tuple (dirpath, dirnames, filenames).\n    &quot;&quot;&quot;\n    file_paths = []  # List which will store all of the full filepaths.\n\n    # Walk the tree.\n    for root, directories, files in os.walk(directory):\n        for filename in files:\n            # Join the two strings in order to form the full filepath.\n            filepath = os.path.join(root, filename)\n            file_paths.append(filepath)  # Add it to the list.\n\n    return file_paths  # Self-explanatory.\n\n# Run the above function and store its results in a variable.   \nfull_file_paths = get_filepaths(&quot;/Users/johnny/Desktop/TEST&quot;)\n\n\n\n\n\nThe path I provided in the above function contained 3 files two of them in the root directory, and another in a subfolder called &quot;SUBFOLDER.&quot;  You can now do things like:\nprint full_file_paths which will print the list:\n\n\n[&apos;/Users/johnny/Desktop/TEST/file1.txt&apos;, &apos;/Users/johnny/Desktop/TEST/file2.txt&apos;, &apos;/Users/johnny/Desktop/TEST/SUBFOLDER/file3.dat&apos;]\n\n\n\nIf you&apos;d like, you can open and read the contents, or focus only on files with the extension &quot;.dat&quot; like in the code below:\n\nfor f in full_file_paths:\n  if f.endswith(&quot;.dat&quot;):\n    print f\n\n\n/Users/johnny/Desktop/TEST/SUBFOLDER/file3.dat\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"Since version 3.4 there are builtin iterators for this which are a lot more efficient than os.listdir():\n\npathlib: New in version 3.4.\n\n&gt;&gt;&gt; import pathlib\n&gt;&gt;&gt; [p for p in pathlib.Path(&apos;.&apos;).iterdir() if p.is_file()]\n\n\nAccording to PEP 428, the aim of the pathlib library is to provide a simple hierarchy of classes to handle filesystem paths and the common operations users do over them.\n\nos.scandir(): New in version 3.5.\n\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; [entry for entry in os.scandir(&apos;.&apos;) if entry.is_file()]\n\n\nNote that os.walk() uses os.scandir() instead of os.listdir() from version 3.5, and its speed got increased by 2-20 times according to PEP 471.\n\nLet me also recommend reading ShadowRanger&apos;s comment below.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"Preliminary notes\n\n\n\n\nAlthough there&apos;s a clear differentiation between file and directory terms in the question text, some may argue that directories are actually special files\nThe statement: &quot;all files of a directory&quot; can be interpreted in two ways:\n\n\nAll direct (or level 1) descendants only\nAll descendants in the whole directory tree (including the ones in sub-directories)\n\nWhen the question was asked, I imagine that Python 2, was the LTS version, however the code samples will be run by Python 3(.5) (I&apos;ll keep them as Python 2 compliant as possible; also, any code belonging to Python that I&apos;m going to post, is from v3.5.4 - unless otherwise specified). That has consequences related to another keyword in the question: &quot;add them into a list&quot;:\n\n\nIn pre Python 2.2 versions, sequences (iterables) were mostly represented by lists (tuples, sets, ...)\nIn Python 2.2, the concept of generator ([Python.Wiki]: Generators) - courtesy of [Python 3]: The yield statement) - was introduced. As time passed, generator counterparts started to appear for functions that returned/worked with lists\nIn Python 3, generator is the default behavior\nNot sure if returning a list is still mandatory (or a generator would do as well), but passing a generator to the list constructor, will create a list out of it (and also consume it). The example below illustrates the differences on [Python 3]: map(function, iterable, ...)\n\n\n\n&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.version\n&apos;2.7.10 (default, Mar  8 2016, 15:02:46) [MSC v.1600 64 bit (AMD64)]&apos;\n&gt;&gt;&gt; m = map(lambda x: x, [1, 2, 3])  # Just a dummy lambda function\n&gt;&gt;&gt; m, type(m)\n([1, 2, 3], &lt;type &apos;list&apos;&gt;)\n&gt;&gt;&gt; len(m)\n3\n\n\n\n\n\n\n&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.version\n&apos;3.5.4 (v3.5.4:3f56838, Aug  8 2017, 02:17:05) [MSC v.1900 64 bit (AMD64)]&apos;\n&gt;&gt;&gt; m = map(lambda x: x, [1, 2, 3])\n&gt;&gt;&gt; m, type(m)\n(&lt;map object at 0x000001B4257342B0&gt;, &lt;class &apos;map&apos;&gt;)\n&gt;&gt;&gt; len(m)\nTraceback (most recent call last):\n  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;\nTypeError: object of type &apos;map&apos; has no len()\n&gt;&gt;&gt; lm0 = list(m)  # Build a list from the generator\n&gt;&gt;&gt; lm0, type(lm0)\n([1, 2, 3], &lt;class &apos;list&apos;&gt;)\n&gt;&gt;&gt;\n&gt;&gt;&gt; lm1 = list(m)  # Build a list from the same generator\n&gt;&gt;&gt; lm1, type(lm1)  # Empty list now - generator already consumed\n([], &lt;class &apos;list&apos;&gt;)\n\n\nThe examples will be based on a directory called root_dir with the following structure (this example is for Win, but I&apos;m using the same tree on Lnx as well):\n\n\nE:\\Work\\Dev\\StackOverflow\\q003207219&gt;tree /f &quot;root_dir&quot;\nFolder PATH listing for volume Work\nVolume serial number is 00000029 3655:6FED\nE:\\WORK\\DEV\\STACKOVERFLOW\\Q003207219\\ROOT_DIR\n¦   file0\n¦   file1\n¦\n+---dir0\n¦   +---dir00\n¦   ¦   ¦   file000\n¦   ¦   ¦\n¦   ¦   +---dir000\n¦   ¦           file0000\n¦   ¦\n¦   +---dir01\n¦   ¦       file010\n¦   ¦       file011\n¦   ¦\n¦   +---dir02\n¦       +---dir020\n¦           +---dir0200\n+---dir1\n¦       file10\n¦       file11\n¦       file12\n¦\n+---dir2\n¦   ¦   file20\n¦   ¦\n¦   +---dir20\n¦           file200\n¦\n+---dir3\n\n\n\n\n\n\nSolutions\n\nProgrammatic approaches:\n\n\n[Python 3]: os.listdir(path=&apos;.&apos;)\n\n\n  Return a list containing the names of the entries in the directory given by path. The list is in arbitrary order, and does not include the special entries &apos;.&apos; and &apos;..&apos; ...\n\n\n\n\n\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; root_dir = &quot;root_dir&quot;  # Path relative to current dir (os.getcwd())\n&gt;&gt;&gt;\n&gt;&gt;&gt; os.listdir(root_dir)  # List all the items in root_dir\n[&apos;dir0&apos;, &apos;dir1&apos;, &apos;dir2&apos;, &apos;dir3&apos;, &apos;file0&apos;, &apos;file1&apos;]\n&gt;&gt;&gt;\n&gt;&gt;&gt; [item for item in os.listdir(root_dir) if os.path.isfile(os.path.join(root_dir, item))]  # Filter items and only keep files (strip out directories)\n[&apos;file0&apos;, &apos;file1&apos;]\n\n\n\nA more elaborate example (code_os_listdir.py):\n\nimport os\nfrom pprint import pformat\n\n\ndef _get_dir_content(path, include_folders, recursive):\n    entries = os.listdir(path)\n    for entry in entries:\n        entry_with_path = os.path.join(path, entry)\n        if os.path.isdir(entry_with_path):\n            if include_folders:\n                yield entry_with_path\n            if recursive:\n                for sub_entry in _get_dir_content(entry_with_path, include_folders, recursive):\n                    yield sub_entry\n        else:\n            yield entry_with_path\n\n\ndef get_dir_content(path, include_folders=True, recursive=True, prepend_folder_name=True):\n    path_len = len(path) + len(os.path.sep)\n    for item in _get_dir_content(path, include_folders, recursive):\n        yield item if prepend_folder_name else item[path_len:]\n\n\ndef _get_dir_content_old(path, include_folders, recursive):\n    entries = os.listdir(path)\n    ret = list()\n    for entry in entries:\n        entry_with_path = os.path.join(path, entry)\n        if os.path.isdir(entry_with_path):\n            if include_folders:\n                ret.append(entry_with_path)\n            if recursive:\n                ret.extend(_get_dir_content_old(entry_with_path, include_folders, recursive))\n        else:\n            ret.append(entry_with_path)\n    return ret\n\n\ndef get_dir_content_old(path, include_folders=True, recursive=True, prepend_folder_name=True):\n    path_len = len(path) + len(os.path.sep)\n    return [item if prepend_folder_name else item[path_len:] for item in _get_dir_content_old(path, include_folders, recursive)]\n\n\ndef main():\n    root_dir = &quot;root_dir&quot;\n    ret0 = get_dir_content(root_dir, include_folders=True, recursive=True, prepend_folder_name=True)\n    lret0 = list(ret0)\n    print(ret0, len(lret0), pformat(lret0))\n    ret1 = get_dir_content_old(root_dir, include_folders=False, recursive=True, prepend_folder_name=False)\n    print(len(ret1), pformat(ret1))\n\n\nif __name__ == &quot;__main__&quot;:\n    main()\n\n\nNotes:\n\n\nThere are two implementations:\n\n\nOne that uses generators (of course here it seems useless, since I immediately convert the result to a list)\nThe classic one (function names ending in _old)\n\nRecursion is used (to get into subdirectories)\nFor each implementation there are two functions:\n\n\nOne that starts with an underscore (_): &quot;private&quot; (should not be called directly) - that does all the work\nThe public one (wrapper over previous): it just strips off the initial path (if required) from the returned entries. It&apos;s an ugly implementation, but it&apos;s the only idea that I could come with at this point\n\nIn terms of performance, generators are generally a little bit faster (considering both creation and  iteration times), but I didn&apos;t test them in recursive functions, and also I am iterating inside the function over inner generators - don&apos;t know how performance friendly is that\nPlay with the arguments to get different results\n\n\n\n\nOutput:\n\n\n(py35x64_test) E:\\Work\\Dev\\StackOverflow\\q003207219&gt;&quot;e:\\Work\\Dev\\VEnvs\\py35x64_test\\Scripts\\python.exe&quot; &quot;code_os_listdir.py&quot;\n&lt;generator object get_dir_content at 0x000001BDDBB3DF10&gt; 22 [&apos;root_dir\\\\dir0&apos;,\n &apos;root_dir\\\\dir0\\\\dir00&apos;,\n &apos;root_dir\\\\dir0\\\\dir00\\\\dir000&apos;,\n &apos;root_dir\\\\dir0\\\\dir00\\\\dir000\\\\file0000&apos;,\n &apos;root_dir\\\\dir0\\\\dir00\\\\file000&apos;,\n &apos;root_dir\\\\dir0\\\\dir01&apos;,\n &apos;root_dir\\\\dir0\\\\dir01\\\\file010&apos;,\n &apos;root_dir\\\\dir0\\\\dir01\\\\file011&apos;,\n &apos;root_dir\\\\dir0\\\\dir02&apos;,\n &apos;root_dir\\\\dir0\\\\dir02\\\\dir020&apos;,\n &apos;root_dir\\\\dir0\\\\dir02\\\\dir020\\\\dir0200&apos;,\n &apos;root_dir\\\\dir1&apos;,\n &apos;root_dir\\\\dir1\\\\file10&apos;,\n &apos;root_dir\\\\dir1\\\\file11&apos;,\n &apos;root_dir\\\\dir1\\\\file12&apos;,\n &apos;root_dir\\\\dir2&apos;,\n &apos;root_dir\\\\dir2\\\\dir20&apos;,\n &apos;root_dir\\\\dir2\\\\dir20\\\\file200&apos;,\n &apos;root_dir\\\\dir2\\\\file20&apos;,\n &apos;root_dir\\\\dir3&apos;,\n &apos;root_dir\\\\file0&apos;,\n &apos;root_dir\\\\file1&apos;]\n11 [&apos;dir0\\\\dir00\\\\dir000\\\\file0000&apos;,\n &apos;dir0\\\\dir00\\\\file000&apos;,\n &apos;dir0\\\\dir01\\\\file010&apos;,\n &apos;dir0\\\\dir01\\\\file011&apos;,\n &apos;dir1\\\\file10&apos;,\n &apos;dir1\\\\file11&apos;,\n &apos;dir1\\\\file12&apos;,\n &apos;dir2\\\\dir20\\\\file200&apos;,\n &apos;dir2\\\\file20&apos;,\n &apos;file0&apos;,\n &apos;file1&apos;]\n\n\n\n\n\n\n\n[Python 3]: os.scandir(path=&apos;.&apos;) (Python 3.5+, backport: [PyPI]: scandir)\n\n\n  Return an iterator of os.DirEntry objects corresponding to the entries in the directory given by path. The entries are yielded in arbitrary order, and the special entries &apos;.&apos; and &apos;..&apos; are not included.\n  \n  Using scandir() instead of listdir() can significantly increase the performance of code that also needs file type or file attribute information, because os.DirEntry objects expose this information if the operating system provides it when scanning a directory. All os.DirEntry methods may perform a system call, but is_dir() and is_file() usually only require a system call for symbolic links; os.DirEntry.stat() always requires a system call on Unix but only requires one for symbolic links on Windows.\n\n\n\n\n\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; root_dir = os.path.join(&quot;.&quot;, &quot;root_dir&quot;)  # Explicitly prepending current directory\n&gt;&gt;&gt; root_dir\n&apos;.\\\\root_dir&apos;\n&gt;&gt;&gt;\n&gt;&gt;&gt; scandir_iterator = os.scandir(root_dir)\n&gt;&gt;&gt; scandir_iterator\n&lt;nt.ScandirIterator object at 0x00000268CF4BC140&gt;\n&gt;&gt;&gt; [item.path for item in scandir_iterator]\n[&apos;.\\\\root_dir\\\\dir0&apos;, &apos;.\\\\root_dir\\\\dir1&apos;, &apos;.\\\\root_dir\\\\dir2&apos;, &apos;.\\\\root_dir\\\\dir3&apos;, &apos;.\\\\root_dir\\\\file0&apos;, &apos;.\\\\root_dir\\\\file1&apos;]\n&gt;&gt;&gt;\n&gt;&gt;&gt; [item.path for item in scandir_iterator]  # Will yield an empty list as it was consumed by previous iteration (automatically performed by the list comprehension)\n[]\n&gt;&gt;&gt;\n&gt;&gt;&gt; scandir_iterator = os.scandir(root_dir)  # Reinitialize the generator\n&gt;&gt;&gt; for item in scandir_iterator :\n...     if os.path.isfile(item.path):\n...             print(item.name)\n...\nfile0\nfile1\n\n\n\nNotes:\n\n\nIt&apos;s similar to os.listdir\nBut it&apos;s also more flexible (and offers more functionality), more Pythonic (and in some cases, faster)\n\n\n\n\n\n\n[Python 3]: os.walk(top, topdown=True, onerror=None, followlinks=False)\n\n\n  Generate the file names in a directory tree by walking the tree either top-down or bottom-up. For each directory in the tree rooted at directory top (including top itself), it yields a 3-tuple (dirpath, dirnames, filenames).\n\n\n\n\n\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; root_dir = os.path.join(os.getcwd(), &quot;root_dir&quot;)  # Specify the full path\n&gt;&gt;&gt; root_dir\n&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir&apos;\n&gt;&gt;&gt;\n&gt;&gt;&gt; walk_generator = os.walk(root_dir)\n&gt;&gt;&gt; root_dir_entry = next(walk_generator)  # First entry corresponds to the root dir (passed as an argument)\n&gt;&gt;&gt; root_dir_entry\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir&apos;, [&apos;dir0&apos;, &apos;dir1&apos;, &apos;dir2&apos;, &apos;dir3&apos;], [&apos;file0&apos;, &apos;file1&apos;])\n&gt;&gt;&gt;\n&gt;&gt;&gt; root_dir_entry[1] + root_dir_entry[2]  # Display dirs and files (direct descendants) in a single list\n[&apos;dir0&apos;, &apos;dir1&apos;, &apos;dir2&apos;, &apos;dir3&apos;, &apos;file0&apos;, &apos;file1&apos;]\n&gt;&gt;&gt;\n&gt;&gt;&gt; [os.path.join(root_dir_entry[0], item) for item in root_dir_entry[1] + root_dir_entry[2]]  # Display all the entries in the previous list by their full path\n[&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0&apos;, &apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir1&apos;, &apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir2&apos;, &apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir3&apos;, &apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\file0&apos;, &apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\file1&apos;]\n&gt;&gt;&gt;\n&gt;&gt;&gt; for entry in walk_generator:  # Display the rest of the elements (corresponding to every subdir)\n...     print(entry)\n...\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0&apos;, [&apos;dir00&apos;, &apos;dir01&apos;, &apos;dir02&apos;], [])\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir00&apos;, [&apos;dir000&apos;], [&apos;file000&apos;])\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir00\\\\dir000&apos;, [], [&apos;file0000&apos;])\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir01&apos;, [], [&apos;file010&apos;, &apos;file011&apos;])\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir02&apos;, [&apos;dir020&apos;], [])\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir02\\\\dir020&apos;, [&apos;dir0200&apos;], [])\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir02\\\\dir020\\\\dir0200&apos;, [], [])\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir1&apos;, [], [&apos;file10&apos;, &apos;file11&apos;, &apos;file12&apos;])\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir2&apos;, [&apos;dir20&apos;], [&apos;file20&apos;])\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir2\\\\dir20&apos;, [], [&apos;file200&apos;])\n(&apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir3&apos;, [], [])\n\n\n\nNotes:\n\n\nUnder the scenes, it uses os.scandir (os.listdir on older versions)\nIt does the heavy lifting by recurring in subfolders\n\n\n\n\n\n\n[Python 3]: glob.glob(pathname, *, recursive=False) ([Python 3]: glob.iglob(pathname, *, recursive=False))\n\n\n  Return a possibly-empty list of path names that match pathname, which must be a string containing a path specification. pathname can be either absolute (like /usr/src/Python-1.5/Makefile) or relative (like ../../Tools/*/*.gif), and can contain shell-style wildcards. Broken symlinks are included in the results (as in the shell)....Changed in version 3.5: Support for recursive globs using **.\n\n\n\n\n\n&gt;&gt;&gt; import glob, os\n&gt;&gt;&gt; wildcard_pattern = &quot;*&quot;\n&gt;&gt;&gt; root_dir = os.path.join(&quot;root_dir&quot;, wildcard_pattern)  # Match every file/dir name\n&gt;&gt;&gt; root_dir\n&apos;root_dir\\\\*&apos;\n&gt;&gt;&gt;\n&gt;&gt;&gt; glob_list = glob.glob(root_dir)\n&gt;&gt;&gt; glob_list\n[&apos;root_dir\\\\dir0&apos;, &apos;root_dir\\\\dir1&apos;, &apos;root_dir\\\\dir2&apos;, &apos;root_dir\\\\dir3&apos;, &apos;root_dir\\\\file0&apos;, &apos;root_dir\\\\file1&apos;]\n&gt;&gt;&gt;\n&gt;&gt;&gt; [item.replace(&quot;root_dir&quot; + os.path.sep, &quot;&quot;) for item in glob_list]  # Strip the dir name and the path separator from begining\n[&apos;dir0&apos;, &apos;dir1&apos;, &apos;dir2&apos;, &apos;dir3&apos;, &apos;file0&apos;, &apos;file1&apos;]\n&gt;&gt;&gt;\n&gt;&gt;&gt; for entry in glob.iglob(root_dir + &quot;*&quot;, recursive=True):\n...     print(entry)\n...\nroot_dir\\\nroot_dir\\dir0\nroot_dir\\dir0\\dir00\nroot_dir\\dir0\\dir00\\dir000\nroot_dir\\dir0\\dir00\\dir000\\file0000\nroot_dir\\dir0\\dir00\\file000\nroot_dir\\dir0\\dir01\nroot_dir\\dir0\\dir01\\file010\nroot_dir\\dir0\\dir01\\file011\nroot_dir\\dir0\\dir02\nroot_dir\\dir0\\dir02\\dir020\nroot_dir\\dir0\\dir02\\dir020\\dir0200\nroot_dir\\dir1\nroot_dir\\dir1\\file10\nroot_dir\\dir1\\file11\nroot_dir\\dir1\\file12\nroot_dir\\dir2\nroot_dir\\dir2\\dir20\nroot_dir\\dir2\\dir20\\file200\nroot_dir\\dir2\\file20\nroot_dir\\dir3\nroot_dir\\file0\nroot_dir\\file1\n\n\n\nNotes:\n\n\nUses os.listdir\nFor large trees (especially if recursive is on), iglob is preferred\nAllows advanced filtering based on name (due to the wildcard)\n\n\n\n\n\n\n[Python 3]: class pathlib.Path(*pathsegments) (Python 3.4+, backport: [PyPI]: pathlib2)\n\n\n&gt;&gt;&gt; import pathlib\n&gt;&gt;&gt; root_dir = &quot;root_dir&quot;\n&gt;&gt;&gt; root_dir_instance = pathlib.Path(root_dir)\n&gt;&gt;&gt; root_dir_instance\nWindowsPath(&apos;root_dir&apos;)\n&gt;&gt;&gt; root_dir_instance.name\n&apos;root_dir&apos;\n&gt;&gt;&gt; root_dir_instance.is_dir()\nTrue\n&gt;&gt;&gt;\n&gt;&gt;&gt; [item.name for item in root_dir_instance.glob(&quot;*&quot;)]  # Wildcard searching for all direct descendants\n[&apos;dir0&apos;, &apos;dir1&apos;, &apos;dir2&apos;, &apos;dir3&apos;, &apos;file0&apos;, &apos;file1&apos;]\n&gt;&gt;&gt;\n&gt;&gt;&gt; [os.path.join(item.parent.name, item.name) for item in root_dir_instance.glob(&quot;*&quot;) if not item.is_dir()]  # Display paths (including parent) for files only\n[&apos;root_dir\\\\file0&apos;, &apos;root_dir\\\\file1&apos;]\n\n\n\nNotes:\n\n\nThis is one way of achieving our goal\nIt&apos;s the OOP style of handling paths\nOffers lots of functionalities\n\n\n\n\n\n\n[Python 2]: dircache.listdir(path) (Python 2 only)\n\n\nBut, according to [GitHub]: python/cpython - (2.7) cpython/Lib/dircache.py, it&apos;s just a (thin) wrapper over os.listdir with caching\n\n\n\n\ndef listdir(path):\n    &quot;&quot;&quot;List directory contents, using cache.&quot;&quot;&quot;\n    try:\n        cached_mtime, list = cache[path]\n        del cache[path]\n    except KeyError:\n        cached_mtime, list = -1, []\n    mtime = os.stat(path).st_mtime\n    if mtime != cached_mtime:\n        list = os.listdir(path)\n        list.sort()\n    cache[path] = mtime, list\n    return list\n\n\n\n\n\n\n[man7]: OPENDIR(3) / [man7]: READDIR(3) / [man7]: CLOSEDIR(3) via [Python 3]: ctypes - A foreign function library for Python (POSIX specific)\n\n\n  ctypes is a foreign function library for Python. It provides C compatible data types, and allows calling functions in DLLs or shared libraries. It can be used to wrap these libraries in pure Python.\n\n\ncode_ctypes.py:\n\n#!/usr/bin/env python3\n\nimport sys\nfrom ctypes import Structure, \\\n    c_ulonglong, c_longlong, c_ushort, c_ubyte, c_char, c_int, \\\n    CDLL, POINTER, \\\n    create_string_buffer, get_errno, set_errno, cast\n\n\nDT_DIR = 4\nDT_REG = 8\n\nchar256 = c_char * 256\n\n\nclass LinuxDirent64(Structure):\n    _fields_ = [\n        (&quot;d_ino&quot;, c_ulonglong),\n        (&quot;d_off&quot;, c_longlong),\n        (&quot;d_reclen&quot;, c_ushort),\n        (&quot;d_type&quot;, c_ubyte),\n        (&quot;d_name&quot;, char256),\n    ]\n\nLinuxDirent64Ptr = POINTER(LinuxDirent64)\n\nlibc_dll = this_process = CDLL(None, use_errno=True)\n# ALWAYS set argtypes and restype for functions, otherwise it&apos;s UB!!!\nopendir = libc_dll.opendir\nreaddir = libc_dll.readdir\nclosedir = libc_dll.closedir\n\n\ndef get_dir_content(path):\n    ret = [path, list(), list()]\n    dir_stream = opendir(create_string_buffer(path.encode()))\n    if (dir_stream == 0):\n        print(&quot;opendir returned NULL (errno: {:d})&quot;.format(get_errno()))\n        return ret\n    set_errno(0)\n    dirent_addr = readdir(dir_stream)\n    while dirent_addr:\n        dirent_ptr = cast(dirent_addr, LinuxDirent64Ptr)\n        dirent = dirent_ptr.contents\n        name = dirent.d_name.decode()\n        if dirent.d_type &amp; DT_DIR:\n            if name not in (&quot;.&quot;, &quot;..&quot;):\n                ret[1].append(name)\n        elif dirent.d_type &amp; DT_REG:\n            ret[2].append(name)\n        dirent_addr = readdir(dir_stream)\n    if get_errno():\n        print(&quot;readdir returned NULL (errno: {:d})&quot;.format(get_errno()))\n    closedir(dir_stream)\n    return ret\n\n\ndef main():\n    print(&quot;{:s} on {:s}\\n&quot;.format(sys.version, sys.platform))\n    root_dir = &quot;root_dir&quot;\n    entries = get_dir_content(root_dir)\n    print(entries)\n\n\nif __name__ == &quot;__main__&quot;:\n    main()\n\n\nNotes:\n\n\nIt loads the three functions from libc (loaded in the current process) and calls them (for more details check [SO]: How do I check whether a file exists without exceptions? (@CristiFati&apos;s answer) - last notes from item #4.). That would place this approach very close to the Python / C edge\nLinuxDirent64 is the ctypes representation of struct dirent64 from [man7]: dirent.h(0P) (so are the DT_ constants) from my machine: Ubtu 16 x64 (4.10.0-40-generic and libc6-dev:amd64). On other flavors/versions, the struct definition might differ, and if so, the ctypes alias should be updated, otherwise it will yield Undefined Behavior\nIt returns data in the os.walk&apos;s format. I didn&apos;t bother to make it recursive, but starting from the existing code, that would be a fairly trivial task\nEverything is doable on Win as well, the data (libraries, functions, structs, constants, ...) differ\n\n\n\n\nOutput:\n\n\n[cfati@cfati-ubtu16x64-0:~/Work/Dev/StackOverflow/q003207219]&gt; ./code_ctypes.py\n3.5.2 (default, Nov 12 2018, 13:43:14)\n[GCC 5.4.0 20160609] on linux\n\n[&apos;root_dir&apos;, [&apos;dir2&apos;, &apos;dir1&apos;, &apos;dir3&apos;, &apos;dir0&apos;], [&apos;file1&apos;, &apos;file0&apos;]]\n\n\n\n\n\n\n\n[ActiveState.Docs]: win32file.FindFilesW (Win specific)\n\n\n  Retrieves a list of matching filenames, using the Windows Unicode API. An interface to the API FindFirstFileW/FindNextFileW/Find close functions.\n\n\n\n\n\n&gt;&gt;&gt; import os, win32file, win32con\n&gt;&gt;&gt; root_dir = &quot;root_dir&quot;\n&gt;&gt;&gt; wildcard = &quot;*&quot;\n&gt;&gt;&gt; root_dir_wildcard = os.path.join(root_dir, wildcard)\n&gt;&gt;&gt; entry_list = win32file.FindFilesW(root_dir_wildcard)\n&gt;&gt;&gt; len(entry_list)  # Don&apos;t display the whole content as it&apos;s too long\n8\n&gt;&gt;&gt; [entry[-2] for entry in entry_list]  # Only display the entry names\n[&apos;.&apos;, &apos;..&apos;, &apos;dir0&apos;, &apos;dir1&apos;, &apos;dir2&apos;, &apos;dir3&apos;, &apos;file0&apos;, &apos;file1&apos;]\n&gt;&gt;&gt;\n&gt;&gt;&gt; [entry[-2] for entry in entry_list if entry[0] &amp; win32con.FILE_ATTRIBUTE_DIRECTORY and entry[-2] not in (&quot;.&quot;, &quot;..&quot;)]  # Filter entries and only display dir names (except self and parent)\n[&apos;dir0&apos;, &apos;dir1&apos;, &apos;dir2&apos;, &apos;dir3&apos;]\n&gt;&gt;&gt;\n&gt;&gt;&gt; [os.path.join(root_dir, entry[-2]) for entry in entry_list if entry[0] &amp; (win32con.FILE_ATTRIBUTE_NORMAL | win32con.FILE_ATTRIBUTE_ARCHIVE)]  # Only display file &quot;full&quot; names\n[&apos;root_dir\\\\file0&apos;, &apos;root_dir\\\\file1&apos;]\n\n\n\nNotes:\n\n\nwin32file.FindFilesW is part of [GitHub]: mhammond/pywin32 - Python for Windows (pywin32) Extensions, which is a Python wrapper over WINAPIs\nThe documentation link is from ActiveState, as I didn&apos;t find any PyWin32 official documentation\n\n\n\n\n\n\nInstall some (other) third-party package that does the trick\n\n\nMost likely, will rely on one (or more) of the above (maybe with slight customizations)\n\n\n\n\n\nNotes:\n\n\nCode is meant to be portable (except places that target a specific area - which are marked) or cross:\n\n\nplatform (Nix, Win, )\nPython version (2, 3, )\n\nMultiple path styles (absolute, relatives) were used across the above variants, to illustrate the fact that the &quot;tools&quot; used are flexible in this direction\nos.listdir and os.scandir use opendir / readdir / closedir ([MS.Docs]: FindFirstFileW function / [MS.Docs]: FindNextFileW function / [MS.Docs]: FindClose function) (via [GitHub]: python/cpython - (master) cpython/Modules/posixmodule.c)\nwin32file.FindFilesW uses those (Win specific) functions as well (via [GitHub]: mhammond/pywin32 - (master) pywin32/win32/src/win32file.i)\n_get_dir_content (from point #1.) can be implemented using any of these approaches (some will require more work and some less)\n\n\nSome advanced filtering (instead of just file vs. dir) could be done: e.g. the include_folders argument could be replaced by another one (e.g. filter_func) which would be a function that takes a path as an argument: filter_func=lambda x: True (this doesn&apos;t strip out anything) and inside _get_dir_content something like: if not filter_func(entry_with_path): continue (if the function fails for one entry, it will be skipped), but the more complex the code becomes, the longer it will take to execute\n\nNota bene! Since recursion is used, I must mention that I did some tests on my laptop (Win 10 x64), totally unrelated to this problem, and when the recursion level was reaching values somewhere in the (990 .. 1000) range (recursionlimit - 1000 (default)), I got StackOverflow :). If the directory tree exceeds that limit (I am not an FS expert, so I don&apos;t know if that is even possible), that could be a problem. \nI must also mention that I didn&apos;t try to increase recursionlimit because I have no experience in the area (how much can I increase it before having to also increase the stack at OS level), but in theory there will always be the possibility for failure, if the dir depth is larger than the highest possible recursionlimit (on that machine)\nThe code samples are for demonstrative purposes only. That means that I didn&apos;t take into account error handling (I don&apos;t think there&apos;s any try / except / else / finally block), so the code is not robust (the reason is: to keep it as simple and short as possible). For production, error handling should be added as well\n\n\nOther approaches:\n\n\nUse Python only as a wrapper\n\n\nEverything is done using another technology\nThat technology is invoked from Python\nThe most famous flavor that I know is what I call the system administrator approach:\n\n\nUse Python (or any programming language for that matter) in order to execute shell commands (and parse their outputs)\nSome consider this a neat hack\nI consider it more like a lame workaround (gainarie), as the action per se is performed from shell (cmd in this case), and thus doesn&apos;t have anything to do with Python.\nFiltering (grep / findstr) or output formatting could be done on both sides, but I&apos;m not going to insist on it. Also, I deliberately used os.system instead of subprocess.Popen.\n\n\n\n(py35x64_test) E:\\Work\\Dev\\StackOverflow\\q003207219&gt;&quot;e:\\Work\\Dev\\VEnvs\\py35x64_test\\Scripts\\python.exe&quot; -c &quot;import os;os.system(\\&quot;dir /b root_dir\\&quot;)&quot;\ndir0\ndir1\ndir2\ndir3\nfile0\nfile1\n\n\n\n\nIn general this approach is to be avoided, since if some command output format slightly differs between OS versions/flavors, the parsing code should be adapted as well; not to mention differences between locales).\n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"I really liked adamk&apos;s answer, suggesting that you use glob(), from the module of the same name. This allows you to have pattern matching with *s.\n\nBut as other people pointed out in the comments, glob() can get tripped up over inconsistent slash directions. To help with that, I suggest you use the join() and expanduser() functions in the os.path module, and perhaps the getcwd() function in the os module, as well.\n\nAs examples:\n\nfrom glob import glob\n\n# Return everything under C:\\Users\\admin that contains a folder called wlp.\nglob(&apos;C:\\Users\\admin\\*\\wlp&apos;)\n\n\nThe above is terrible - the path has been hardcoded and will only ever work on Windows between the drive name and the \\s being hardcoded into the path.\n\nfrom glob    import glob\nfrom os.path import join\n\n# Return everything under Users, admin, that contains a folder called wlp.\nglob(join(&apos;Users&apos;, &apos;admin&apos;, &apos;*&apos;, &apos;wlp&apos;))\n\n\nThe above works better, but it relies on the folder name Users which is often found on Windows and not so often found on other OSs. It also relies on the user having a specific name, admin.\n\nfrom glob    import glob\nfrom os.path import expanduser, join\n\n# Return everything under the user directory that contains a folder called wlp.\nglob(join(expanduser(&apos;~&apos;), &apos;*&apos;, &apos;wlp&apos;))\n\n\nThis works perfectly across all platforms.\n\nAnother great example that works perfectly across platforms and does something a bit different:\n\nfrom glob    import glob\nfrom os      import getcwd\nfrom os.path import join\n\n# Return everything under the current directory that contains a folder called wlp.\nglob(join(getcwd(), &apos;*&apos;, &apos;wlp&apos;))\n\n\nHope these examples help you see the power of a few of the functions you can find in the standard Python library modules.\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"def list_files(path):\n    # returns a list of names (with extension, without full path) of all files \n    # in folder path\n    files = []\n    for name in os.listdir(path):\n        if os.path.isfile(os.path.join(path, name)):\n            files.append(name)\n    return files \n\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"If you are looking for a Python implementation of find, this is a recipe I use rather frequently:\n\nfrom findtools.find_files import (find_files, Match)\n\n# Recursively find all *.sh files in **/usr/bin**\nsh_files_pattern = Match(filetype=&apos;f&apos;, name=&apos;*.sh&apos;)\nfound_files = find_files(path=&apos;/usr/bin&apos;, match=sh_files_pattern)\n\nfor found_file in found_files:\n    print found_file\n\n\nSo I made a PyPI package out of it and there is also a GitHub repository. I hope that someone finds it potentially useful for this code.\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"For greater results, you can use listdir() method of the os module along with a generator (a generator is a powerful iterator that keeps its state, remember?). The following code works fine with both versions: Python 2 and Python 3.\n\nHere&apos;s a code:\n\nimport os\n\ndef files(path):  \n    for file in os.listdir(path):\n        if os.path.isfile(os.path.join(path, file)):\n            yield file\n\nfor file in files(&quot;.&quot;):  \n    print (file)\n\n\nThe listdir() method returns the list of entries for the given directory. The method os.path.isfile() returns True if the given entry is a file. And the yield operator quits the func but keeps its current state, and it returns only the name of the entry detected as a file. All the above allows us to loop over the generator function.\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"Returning a list of absolute filepaths, does not recurse into subdirectories\n\nL = [os.path.join(os.getcwd(),f) for f in os.listdir(&apos;.&apos;) if os.path.isfile(os.path.join(os.getcwd(),f))]\n\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"A wise teacher told me once that:\n\n\n  When there are several established ways to do something, none of them is good for all cases.\n\n\nI will thus add a solution for a subset of the problem: quite often, we only want to check whether a file matches a start string and an end string, without going into subdirectories. We would thus like a function that returns a list of filenames, like:\n\nfilenames = dir_filter(&apos;foo/baz&apos;, radical=&apos;radical&apos;, extension=&apos;.txt&apos;)\n\n\nIf you care to first declare two functions, this can be done:\n\ndef file_filter(filename, radical=&apos;&apos;, extension=&apos;&apos;):\n    &quot;Check if a filename matches a radical and extension&quot;\n    if not filename:\n        return False\n    filename = filename.strip()\n    return(filename.startswith(radical) and filename.endswith(extension))\n\ndef dir_filter(dirname=&apos;&apos;, radical=&apos;&apos;, extension=&apos;&apos;):\n    &quot;Filter filenames in directory according to radical and extension&quot;\n    if not dirname:\n        dirname = &apos;.&apos;\n    return [filename for filename in os.listdir(dirname)\n                if file_filter(filename, radical, extension)]\n\n\nThis solution could be easily generalized with regular expressions (and you might want to add a pattern argument, if you do not want your patterns to always stick to the start or end of the filename).\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"import os\nimport os.path\n\n\ndef get_files(target_dir):\n    item_list = os.listdir(target_dir)\n\n    file_list = list()\n    for item in item_list:\n        item_dir = os.path.join(target_dir,item)\n        if os.path.isdir(item_dir):\n            file_list += get_files(item_dir)\n        else:\n            file_list.append(item_dir)\n    return file_list\n\n\nHere I use a recursive structure.\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"Using generators\n\nimport os\ndef get_files(search_path):\n     for (dirpath, _, filenames) in os.walk(search_path):\n         for filename in filenames:\n             yield os.path.join(dirpath, filename)\nlist_files = get_files(&apos;.&apos;)\nfor filename in list_files:\n    print(filename)\n\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"Another very readable variant for Python 3.4+ is using pathlib.Path.glob:\n\nfrom pathlib import Path\nfolder = &apos;/foo&apos;\n[f for f in Path(folder).glob(&apos;*&apos;) if f.is_file()]\n\n\nIt is simple to make more specific, e.g. only look for Python source files which are not symbolic links, also in all subdirectories:\n\n[f for f in Path(folder).glob(&apos;**/*.py&apos;) if not f.is_symlink()]\n\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"For Python 2:\npip install rglob\n\nThen do\nimport rglob\nfile_list = rglob.rglob(&quot;/home/base/dir/&quot;, &quot;*&quot;)\nprint file_list\n\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"Here&apos;s my general-purpose function for this.  It returns a list of file paths rather than filenames since I found that to be more useful.  It has a few optional arguments that make it versatile.  For instance, I often use it with arguments like pattern=&apos;*.txt&apos; or subfolders=True.\n\nimport os\nimport fnmatch\n\ndef list_paths(folder=&apos;.&apos;, pattern=&apos;*&apos;, case_sensitive=False, subfolders=False):\n    &quot;&quot;&quot;Return a list of the file paths matching the pattern in the specified \n    folder, optionally including files inside subfolders.\n    &quot;&quot;&quot;\n    match = fnmatch.fnmatchcase if case_sensitive else fnmatch.fnmatch\n    walked = os.walk(folder) if subfolders else [next(os.walk(folder))]\n    return [os.path.join(root, f)\n            for root, dirnames, filenames in walked\n            for f in filenames if match(f, pattern)]\n\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0},{"text":"I will provide a sample one liner where sourcepath and file type can be provided as input. The code returns a list of filenames with csv extension. Use . in case all files needs to be returned. This will also recursively scans the subdirectories. \n\n[y for x in os.walk(sourcePath) for y in glob(os.path.join(x[0], &apos;*.csv&apos;))]\n\nModify file extensions and source path as needed. \n    ","url":"/questions/[slug]#solution20","@type":"Answer","upvoteCount":0},{"text":"dircache is  &quot;Deprecated since version 2.6: The dircache module has been removed in Python 3.0.&quot;\n\nimport dircache\nlist = dircache.listdir(pathname)\ni = 0\ncheck = len(list[0])\ntemp = []\ncount = len(list)\nwhile count != 0:\n  if len(list[i]) != check:\n     temp.append(list[i-1])\n     check = len(list[i])\n  else:\n    i = i + 1\n    count = count - 1\n\nprint temp\n\n    ","url":"/questions/[slug]#solution21","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/9fb80f4eb9e2d3c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9fb80f4eb9e2d3c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-88567075f6bc9c6b.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/532-fec3344a80918110.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/817-363561828babdd16.js" defer=""></script><script src="/_next/static/chunks/81-2e45c38dc6fe8298.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-16d8c84aea765d4e.js" defer=""></script><script src="/_next/static/d4czOeg3MGPNUI9SipfjN/_buildManifest.js" defer=""></script><script src="/_next/static/d4czOeg3MGPNUI9SipfjN/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.dlbxiY code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-344134f6-0"]{content:"dlbxiY,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-do-i-list-all-files-of-a-directory-1657388340404#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-344134f6-0 dlbxiY flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-do-i-list-all-files-of-a-directory-1657388340404">How do I list all files of a directory?</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/directory">directory</a></div></div><div class="question-content mt-5">
                    <div>
            <aside class="s-notice s-notice__info post-notice js-post-notice mb16" role="status">
        <div class="d-flex fd-column fw-nowrap">
            <div class="d-flex fw-nowrap">
                    <div class="flex--item mr8">
                        <svg aria-hidden="true" class="svg-icon iconLock" width="18" height="18" viewBox="0 0 18 18"><path d="M16 9a2 2 0 0 0-2-2V6A5 5 0 0 0 4 6v1a2 2 0 0 0-2 2v6c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9Zm-7 5a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm3.1-7H5.9V6a3.1 3.1 0 0 1 6.2 0v1Z"></path></svg>
                    </div>
                <div class="flex--item wmn0 fl1 lh-lg">
                    <div class="flex--item fl1 lh-lg">
                        <b>This question's answers are a <a href="/help/privileges/edit-community-wiki">community effort</a></b>. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.
                        
                    </div>
                </div>
            </div>
        </div>
</aside>

    </div>

<p>How can I list all files of a directory in Python and add them to a <code>list</code>?</p>
    </div></div></div><div class="sc-344134f6-2 EUowZ"><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong><a href="https://docs.python.org/2/library/os.html#os.listdir" rel="noreferrer" title="os.listdir"><code>os.listdir()</code></a></strong> returns everything inside a directory -- including both <strong>files</strong> and <strong>directories</strong>.</p>
<p><a href="https://docs.python.org/2/library/os.path.html#module-os.path" rel="noreferrer"><strong><code>os.path</code></strong></a>'s <code>isfile()</code> can be used to only list files:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> os <span class="hljs-keyword">import</span> listdir
<span class="hljs-keyword">from</span> os.path <span class="hljs-keyword">import</span> isfile, join
onlyfiles = [f <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> listdir(mypath) <span class="hljs-keyword">if</span> isfile(join(mypath, f))]
</code></pre>
<p>Alternatively, <strong><a href="https://docs.python.org/2/library/os.html#os.walk" rel="noreferrer" title="os.walk"><code>os.walk()</code></a></strong> <strong>yields two lists</strong> for each directory it visits -- one for <strong>files</strong> and one for <strong>dirs</strong>. If you only want the top directory you can break the first time it yields:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> os <span class="hljs-keyword">import</span> walk

f = []
<span class="hljs-keyword">for</span> (dirpath, dirnames, filenames) <span class="hljs-keyword">in</span> walk(mypath):
    f.extend(filenames)
    <span class="hljs-keyword">break</span>
</code></pre>
<p>or, shorter:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> os <span class="hljs-keyword">import</span> walk

filenames = <span class="hljs-built_in">next</span>(walk(mypath), (<span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>, []))[<span class="hljs-number">2</span>]  <span class="hljs-comment"># [] if no file</span>
</code></pre>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I prefer using the <a href="https://docs.python.org/library/glob.html" rel="noreferrer"><code>glob</code></a> module, as it does pattern matching and expansion.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> glob
<span class="hljs-built_in">print</span>(glob.glob(<span class="hljs-string">"/home/adam/*"</span>))
</code></pre>
<p>It does pattern matching intuitively</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> glob
<span class="hljs-comment"># All files and directories ending with .txt and that don't begin with a dot:</span>
<span class="hljs-built_in">print</span>(glob.glob(<span class="hljs-string">"/home/adam/*.txt"</span>)) 
<span class="hljs-comment"># All files and directories ending with .txt with depth of 2 folders, ignoring names beginning with a dot:</span>
<span class="hljs-built_in">print</span>(glob.glob(<span class="hljs-string">"/home/adam/*/*.txt"</span>)) 
</code></pre>
<p>It will return a list with the queried files and directories:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">[<span class="hljs-string">'/home/adam/file1.txt'</span>, <span class="hljs-string">'/home/adam/file2.txt'</span>, .... ]
</code></pre>
<p>Note that <code>glob</code> ignores files and directories that begin with a dot <code>.</code>, as those are considered hidden files and directories, unless the pattern is something like <code>.*</code>.</p>
<p>Use <a href="https://docs.python.org/3/library/glob.html#glob.escape" rel="noreferrer"><code>glob.escape</code></a> to escape strings that are not meant to be patterns:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-built_in">print</span>(glob.glob(glob.escape(directory_name) + <span class="hljs-string">"/*.txt"</span>))
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>list in the current directory</p>
<p>With <code>listdir</code> in <code>os</code> module you get the files and the folders in the current dir</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os

arr = os.listdir()
</code></pre>
<p>Looking in a directory</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">arr = os.listdir(<span class="hljs-string">'c:\\files'</span>)
</code></pre>
<p>with <code>glob</code> you can specify a type of file to list like this</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> glob

txtfiles = []
<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> glob.glob(<span class="hljs-string">"*.txt"</span>):
    txtfiles.append(file)
</code></pre>
<p>or</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">mylist = [f <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> glob.glob(<span class="hljs-string">"*.txt"</span>)]
</code></pre>
<p>get the full path of only files in the current directory</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> os <span class="hljs-keyword">import</span> listdir
<span class="hljs-keyword">from</span> os.path <span class="hljs-keyword">import</span> isfile, join

cwd = os.getcwd()
onlyfiles = [os.path.join(cwd, f) <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> os.listdir(cwd) <span class="hljs-keyword">if</span> 
os.path.isfile(os.path.join(cwd, f))]
<span class="hljs-built_in">print</span>(onlyfiles) 

[<span class="hljs-string">'G:\\getfilesname\\getfilesname.py'</span>, <span class="hljs-string">'G:\\getfilesname\\example.txt'</span>]
</code></pre>
<p>Getting the full path name with <code>os.path.abspath</code></p>
<p>You get the full path in return</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"> <span class="hljs-keyword">import</span> os
 files_path = [os.path.abspath(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> os.listdir()]
 <span class="hljs-built_in">print</span>(files_path)
 
 [<span class="hljs-string">'F:\\documenti\applications.txt'</span>, <span class="hljs-string">'F:\\documenti\collections.txt'</span>]
</code></pre>
<p>Walk: going through sub directories</p>
<p>os.walk returns the root, the directories list and the files list, that is why I unpacked them in r, d, f in the for loop; it, then, looks for other files and directories in the subfolders of the root and so on until there are no subfolders.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os

<span class="hljs-comment"># Getting the current work directory (cwd)</span>
thisdir = os.getcwd()

<span class="hljs-comment"># r=root, d=directories, f = files</span>
<span class="hljs-keyword">for</span> r, d, f <span class="hljs-keyword">in</span> os.walk(thisdir):
    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> f:
        <span class="hljs-keyword">if</span> file.endswith(<span class="hljs-string">".docx"</span>):
            <span class="hljs-built_in">print</span>(os.path.join(r, file))
</code></pre>
<p>To go up in the directory tree</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment"># Method 1</span>
x = os.listdir(<span class="hljs-string">'..'</span>)

<span class="hljs-comment"># Method 2</span>
x= os.listdir(<span class="hljs-string">'/'</span>)
</code></pre>
<p>Get files of a particular subdirectory with <code>os.listdir()</code></p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os

x = os.listdir(<span class="hljs-string">"./content"</span>)
</code></pre>
<p>os.walk('.') - current directory</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"> <span class="hljs-keyword">import</span> os
 arr = <span class="hljs-built_in">next</span>(os.walk(<span class="hljs-string">'.'</span>))[<span class="hljs-number">2</span>]
 <span class="hljs-built_in">print</span>(arr)
 
 &gt;&gt;&gt; [<span class="hljs-string">'5bs_Turismo1.pdf'</span>, <span class="hljs-string">'5bs_Turismo1.pptx'</span>, <span class="hljs-string">'esperienza.txt'</span>]
</code></pre>
<p>next(os.walk('.')) and os.path.join('dir', 'file')</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"> <span class="hljs-keyword">import</span> os
 arr = []
 <span class="hljs-keyword">for</span> d,r,f <span class="hljs-keyword">in</span> <span class="hljs-built_in">next</span>(os.walk(<span class="hljs-string">"F:\\_python"</span>)):
     <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> f:
         arr.append(os.path.join(r,file))

 <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> arr:
     <span class="hljs-built_in">print</span>(files)

<span class="hljs-meta">&gt;&gt;&gt; </span>F:\\_python\\dict_class.py
<span class="hljs-meta">&gt;&gt;&gt; </span>F:\\_python\\programmi.txt
</code></pre>
<p>next... walk</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"> [os.path.join(r,file) <span class="hljs-keyword">for</span> r,d,f <span class="hljs-keyword">in</span> <span class="hljs-built_in">next</span>(os.walk(<span class="hljs-string">"F:\\_python"</span>)) <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> f]
 
 &gt;&gt;&gt; [<span class="hljs-string">'F:\\_python\\dict_class.py'</span>, <span class="hljs-string">'F:\\_python\\programmi.txt'</span>]
</code></pre>
<p>os.walk</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">x = [os.path.join(r,file) <span class="hljs-keyword">for</span> r,d,f <span class="hljs-keyword">in</span> os.walk(<span class="hljs-string">"F:\\_python"</span>) <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> f]
<span class="hljs-built_in">print</span>(x)

<span class="hljs-meta">&gt;&gt;&gt; </span>[<span class="hljs-string">'F:\\_python\\dict.py'</span>, <span class="hljs-string">'F:\\_python\\progr.txt'</span>, <span class="hljs-string">'F:\\_python\\readl.py'</span>]
</code></pre>
<p>os.listdir() - get only txt files</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"> arr_txt = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> os.listdir() <span class="hljs-keyword">if</span> x.endswith(<span class="hljs-string">".txt"</span>)]
 
</code></pre>
<p>Using <code>glob</code> to get the full path of the files</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> path <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> glob <span class="hljs-keyword">import</span> glob

x = [path(f).abspath() <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> glob(<span class="hljs-string">"F:\\*.txt"</span>)]
</code></pre>
<p>Using <code>os.path.isfile</code> to avoid directories in the list</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os.path
listOfFiles = [f <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> os.listdir() <span class="hljs-keyword">if</span> os.path.isfile(f)]
</code></pre>
<p>Using <code>pathlib</code> from Python 3.4</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> pathlib

flist = []
<span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> pathlib.Path(<span class="hljs-string">'.'</span>).iterdir():
    <span class="hljs-keyword">if</span> p.is_file():
        <span class="hljs-built_in">print</span>(p)
        flist.append(p)
</code></pre>
<p>With <code>list comprehension</code>:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">flist = [p <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> pathlib.Path(<span class="hljs-string">'.'</span>).iterdir() <span class="hljs-keyword">if</span> p.is_file()]
</code></pre>
<p>Use glob method in pathlib.Path()</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> pathlib

py = pathlib.Path().glob(<span class="hljs-string">"*.py"</span>)
</code></pre>
<p>Get all and only files with os.walk: checks only in the third element returned, i.e. the list of the files</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os
x = [i[<span class="hljs-number">2</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> os.walk(<span class="hljs-string">'.'</span>)]
y=[]
<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> x:
    <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> t:
        y.append(f)
</code></pre>
<p>Get only files with next in a directory: returns only the file in the root folder</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"> <span class="hljs-keyword">import</span> os
 x = <span class="hljs-built_in">next</span>(os.walk(<span class="hljs-string">'F://python'</span>))[<span class="hljs-number">2</span>]
</code></pre>
<p>Get only directories with next and walk in a directory, because in the [1] element there are the folders only</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"> <span class="hljs-keyword">import</span> os
 <span class="hljs-built_in">next</span>(os.walk(<span class="hljs-string">'F://python'</span>))[<span class="hljs-number">1</span>] <span class="hljs-comment"># for the current dir use ('.')</span>
 
 &gt;&gt;&gt; [<span class="hljs-string">'python3'</span>,<span class="hljs-string">'others'</span>]
</code></pre>
<p>Get all the <code>subdir</code> names with <code>walk</code></p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">for</span> r,d,f <span class="hljs-keyword">in</span> os.walk(<span class="hljs-string">"F:\\_python"</span>):
    <span class="hljs-keyword">for</span> dirs <span class="hljs-keyword">in</span> d:
        <span class="hljs-built_in">print</span>(dirs)
</code></pre>
<p><code>os.scandir()</code> from Python 3.5 and greater</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os
x = [f.name <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> os.scandir() <span class="hljs-keyword">if</span> f.is_file()]

<span class="hljs-comment"># Another example with `scandir` (a little variation from docs.python.org)</span>
<span class="hljs-comment"># This one is more efficient than `os.listdir`.</span>
<span class="hljs-comment"># In this case, it shows the files only in the current directory</span>
<span class="hljs-comment"># where the script is executed.</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">with</span> os.scandir() <span class="hljs-keyword">as</span> i:
    <span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> i:
        <span class="hljs-keyword">if</span> entry.is_file():
            <span class="hljs-built_in">print</span>(entry.name)
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os
os.listdir(<span class="hljs-string">"somedirectory"</span>)
</code></pre>

<p>will return a list of all files and directories in "somedirectory".</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A one-line solution to get <strong>only list of files</strong> (no subdirectories):</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">filenames = <span class="hljs-built_in">next</span>(os.walk(path))[<span class="hljs-number">2</span>]
</code></pre>

<p>or absolute pathnames:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">paths = [os.path.join(path, fn) <span class="hljs-keyword">for</span> fn <span class="hljs-keyword">in</span> <span class="hljs-built_in">next</span>(os.walk(path))[<span class="hljs-number">2</span>]]
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Getting Full File Paths From a Directory and All Its Subdirectories</strong></p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_filepaths</span>(<span class="hljs-params">directory</span>):
    <span class="hljs-string">"""
    This function will generate the file names in a directory 
    tree by walking the tree either top-down or bottom-up. For each 
    directory in the tree rooted at directory top (including top itself), 
    it yields a 3-tuple (dirpath, dirnames, filenames).
    """</span>
    file_paths = []  <span class="hljs-comment"># List which will store all of the full filepaths.</span>

    <span class="hljs-comment"># Walk the tree.</span>
    <span class="hljs-keyword">for</span> root, directories, files <span class="hljs-keyword">in</span> os.walk(directory):
        <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> files:
            <span class="hljs-comment"># Join the two strings in order to form the full filepath.</span>
            filepath = os.path.join(root, filename)
            file_paths.append(filepath)  <span class="hljs-comment"># Add it to the list.</span>

    <span class="hljs-keyword">return</span> file_paths  <span class="hljs-comment"># Self-explanatory.</span>

<span class="hljs-comment"># Run the above function and store its results in a variable.   </span>
full_file_paths = get_filepaths(<span class="hljs-string">"/Users/johnny/Desktop/TEST"</span>)
</code></pre>

<hr>

<ul>
<li>The path I provided in the above function contained 3 files two of them in the root directory, and another in a subfolder called "SUBFOLDER."  You can now do things like:</li>
<li><p><code>print full_file_paths</code> which will print the list:</p>

<ul>
<li><code>['/Users/johnny/Desktop/TEST/file1.txt', '/Users/johnny/Desktop/TEST/file2.txt', '/Users/johnny/Desktop/TEST/SUBFOLDER/file3.dat']</code></li>
</ul></li>
</ul>

<p>If you'd like, you can open and read the contents, or focus only on files with the extension ".dat" like in the code below:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> full_file_paths:
  <span class="hljs-keyword">if</span> f.endswith(<span class="hljs-string">".dat"</span>):
    <span class="hljs-built_in">print</span> f
</code></pre>

<p><code>/Users/johnny/Desktop/TEST/SUBFOLDER/file3.dat</code></p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Since version 3.4 there are builtin <em>iterators</em> for this which are a lot more efficient than <a href="http://docs.python.org/3/library/os.html#os.listdir" rel="noreferrer"><code>os.listdir()</code></a>:</p>

<p><a href="http://docs.python.org/3/library/pathlib.html" rel="noreferrer"><code>pathlib</code></a>: <em>New in version 3.4.</em></p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> pathlib
<span class="hljs-meta">&gt;&gt;&gt; </span>[p <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> pathlib.Path(<span class="hljs-string">'.'</span>).iterdir() <span class="hljs-keyword">if</span> p.is_file()]
</code></pre>

<p>According to <a href="http://www.python.org/dev/peps/pep-0428/" rel="noreferrer">PEP 428</a>, the aim of the <a href="http://docs.python.org/3/library/pathlib.html" rel="noreferrer"><code>pathlib</code></a> library is to provide a simple hierarchy of classes to handle filesystem paths and the common operations users do over them.</p>

<p><a href="http://docs.python.org/3/library/os.html#os.scandir" rel="noreferrer"><code>os.scandir()</code></a>: <em>New in version 3.5.</em></p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> os
<span class="hljs-meta">&gt;&gt;&gt; </span>[entry <span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> os.scandir(<span class="hljs-string">'.'</span>) <span class="hljs-keyword">if</span> entry.is_file()]
</code></pre>

<p>Note that <a href="http://docs.python.org/3/library/os.html#os.walk" rel="noreferrer"><code>os.walk()</code></a> uses <a href="http://docs.python.org/3/library/os.html#os.scandir" rel="noreferrer"><code>os.scandir()</code></a> instead of <a href="http://docs.python.org/3/library/os.html#os.listdir" rel="noreferrer"><code>os.listdir()</code></a> from version 3.5, and its speed got increased by 2-20 times according to <a href="http://www.python.org/dev/peps/pep-0471/" rel="noreferrer">PEP 471</a>.</p>

<p>Let me also recommend reading ShadowRanger's comment below.</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>Preliminary notes</h2>



<ul>
<li>Although there's a clear differentiation between <em>file</em> and <em>directory</em> terms in the question text, some may argue that directories are actually special files</li>
<li>The statement: "<em>all files of a directory</em>" can be interpreted in two ways:

<ol>
<li>All <strong>direct</strong> (or level 1) descendants <strong>only</strong></li>
<li>All descendants in the whole directory tree (including the ones in sub-directories)</li>
</ol></li>
<li><p>When the question was asked, I imagine that <em>Python <strong>2</strong></em>, was the <em>LTS</em> version, however the code samples will be run by <em>Python <strong>3</strong>(<strong>.5</strong>)</em> (I'll keep them as <em>Python 2</em> compliant as possible; also, any code belonging to <em>Python</em> that I'm going to post, is from <strong>v3.5.4</strong> - unless otherwise specified). That has consequences related to another keyword in the question: "<em>add them into a <strong>list</strong></em>":</p>

<ul>
<li>In pre <em>Python 2.2</em> versions, sequences (iterables) were mostly represented by lists (tuples, sets, ...)</li>
<li>In <em>Python 2.2</em>, the concept of <strong>generator</strong> (<a href="https://wiki.python.org/moin/Generators" rel="noreferrer">[Python.Wiki]: Generators</a>) - courtesy of <a href="https://docs.python.org/3/reference/simple_stmts.html#the-yield-statement" rel="noreferrer">[Python 3]: The yield statement</a>) - was introduced. As time passed, generator counterparts started to appear for functions that returned/worked with lists</li>
<li>In <em>Python 3</em>, generator is the default behavior</li>
<li>Not sure if returning a list is still mandatory (or a generator would do as well), but passing a generator to the <em>list</em> constructor, will create a list out of it (and also consume it). The example below illustrates the differences on <a href="https://docs.python.org/3/library/functions.html#map" rel="noreferrer">[Python 3]: <strong>map</strong>(<em>function, iterable, ...</em>)</a></li>
</ul>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> sys
<span class="hljs-meta">&gt;&gt;&gt; </span>sys.version
<span class="hljs-string">'2.7.10 (default, Mar  8 2016, 15:02:46) [MSC v.1600 64 bit (AMD64)]'</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>m = <span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])  <span class="hljs-comment"># Just a dummy lambda function</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>m, <span class="hljs-built_in">type</span>(m)
([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">'list'</span>&gt;)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">len</span>(m)
<span class="hljs-number">3</span>
</code></pre>
</blockquote>

<p><br></p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> sys
<span class="hljs-meta">&gt;&gt;&gt; </span>sys.version
<span class="hljs-string">'3.5.4 (v3.5.4:3f56838, Aug  8 2017, 02:17:05) [MSC v.1900 64 bit (AMD64)]'</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>m = <span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
<span class="hljs-meta">&gt;&gt;&gt; </span>m, <span class="hljs-built_in">type</span>(m)
(&lt;<span class="hljs-built_in">map</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x000001B4257342B0</span>&gt;, &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">'map'</span>&gt;)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">len</span>(m)
Traceback (most recent call last):
  File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;
TypeError: <span class="hljs-built_in">object</span> of <span class="hljs-built_in">type</span> <span class="hljs-string">'map'</span> has no <span class="hljs-built_in">len</span>()
<span class="hljs-meta">&gt;&gt;&gt; </span>lm0 = <span class="hljs-built_in">list</span>(m)  <span class="hljs-comment"># Build a list from the generator</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>lm0, <span class="hljs-built_in">type</span>(lm0)
([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">'list'</span>&gt;)
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>lm1 = <span class="hljs-built_in">list</span>(m)  <span class="hljs-comment"># Build a list from the same generator</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>lm1, <span class="hljs-built_in">type</span>(lm1)  <span class="hljs-comment"># Empty list now - generator already consumed</span>
([], &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">'list'</span>&gt;)
</code></pre>
</blockquote></li>
<li><p>The examples will be based on a directory called <em>root_dir</em> with the following structure (this example is for <em>Win</em>, but I'm using the same tree on <em>Lnx</em> as well):</p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python">E:\Work\Dev\StackOverflow\q003207219&gt;tree /f <span class="hljs-string">"root_dir"</span>
Folder PATH listing <span class="hljs-keyword">for</span> volume Work
Volume serial number <span class="hljs-keyword">is</span> 00000029 <span class="hljs-number">3655</span>:6FED
E:\WORK\DEV\STACKOVERFLOW\Q003207219\ROOT_DIR
¦   file0
¦   file1
¦
+---dir0
¦   +---dir00
¦   ¦   ¦   file000
¦   ¦   ¦
¦   ¦   +---dir000
¦   ¦           file0000
¦   ¦
¦   +---dir01
¦   ¦       file010
¦   ¦       file011
¦   ¦
¦   +---dir02
¦       +---dir020
¦           +---dir0200
+---dir1
¦       file10
¦       file11
¦       file12
¦
+---dir2
¦   ¦   file20
¦   ¦
¦   +---dir20
¦           file200
¦
+---dir3
</code></pre>
</blockquote></li>
</ul>

<p><br></p>

<h2>Solutions</h2>

<h3>Programmatic approaches:</h3>

<ol>
<li><p><a href="https://docs.python.org/3/library/os.html#os.listdir" rel="noreferrer">[Python 3]: os.<strong>listdir</strong>(<em>path='.'</em>)</a></p>

<blockquote>
  <p>Return a list containing the names of the entries in the directory given by path. The list is in arbitrary order, and does not include the special entries <code>'.'</code> and <code>'..'</code> ...</p>
</blockquote>

<p><br></p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> os
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir = <span class="hljs-string">"root_dir"</span>  <span class="hljs-comment"># Path relative to current dir (os.getcwd())</span>
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>os.listdir(root_dir)  <span class="hljs-comment"># List all the items in root_dir</span>
[<span class="hljs-string">'dir0'</span>, <span class="hljs-string">'dir1'</span>, <span class="hljs-string">'dir2'</span>, <span class="hljs-string">'dir3'</span>, <span class="hljs-string">'file0'</span>, <span class="hljs-string">'file1'</span>]
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>[item <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> os.listdir(root_dir) <span class="hljs-keyword">if</span> os.path.isfile(os.path.join(root_dir, item))]  <span class="hljs-comment"># Filter items and only keep files (strip out directories)</span>
[<span class="hljs-string">'file0'</span>, <span class="hljs-string">'file1'</span>]
</code></pre>
</blockquote>

<p>A more elaborate example (<em>code_os_listdir.py</em>):</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> pprint <span class="hljs-keyword">import</span> pformat


<span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_dir_content</span>(<span class="hljs-params">path, include_folders, recursive</span>):
    entries = os.listdir(path)
    <span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> entries:
        entry_with_path = os.path.join(path, entry)
        <span class="hljs-keyword">if</span> os.path.isdir(entry_with_path):
            <span class="hljs-keyword">if</span> include_folders:
                <span class="hljs-keyword">yield</span> entry_with_path
            <span class="hljs-keyword">if</span> recursive:
                <span class="hljs-keyword">for</span> sub_entry <span class="hljs-keyword">in</span> _get_dir_content(entry_with_path, include_folders, recursive):
                    <span class="hljs-keyword">yield</span> sub_entry
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">yield</span> entry_with_path


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_dir_content</span>(<span class="hljs-params">path, include_folders=<span class="hljs-literal">True</span>, recursive=<span class="hljs-literal">True</span>, prepend_folder_name=<span class="hljs-literal">True</span></span>):
    path_len = <span class="hljs-built_in">len</span>(path) + <span class="hljs-built_in">len</span>(os.path.sep)
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> _get_dir_content(path, include_folders, recursive):
        <span class="hljs-keyword">yield</span> item <span class="hljs-keyword">if</span> prepend_folder_name <span class="hljs-keyword">else</span> item[path_len:]


<span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_dir_content_old</span>(<span class="hljs-params">path, include_folders, recursive</span>):
    entries = os.listdir(path)
    ret = <span class="hljs-built_in">list</span>()
    <span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> entries:
        entry_with_path = os.path.join(path, entry)
        <span class="hljs-keyword">if</span> os.path.isdir(entry_with_path):
            <span class="hljs-keyword">if</span> include_folders:
                ret.append(entry_with_path)
            <span class="hljs-keyword">if</span> recursive:
                ret.extend(_get_dir_content_old(entry_with_path, include_folders, recursive))
        <span class="hljs-keyword">else</span>:
            ret.append(entry_with_path)
    <span class="hljs-keyword">return</span> ret


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_dir_content_old</span>(<span class="hljs-params">path, include_folders=<span class="hljs-literal">True</span>, recursive=<span class="hljs-literal">True</span>, prepend_folder_name=<span class="hljs-literal">True</span></span>):
    path_len = <span class="hljs-built_in">len</span>(path) + <span class="hljs-built_in">len</span>(os.path.sep)
    <span class="hljs-keyword">return</span> [item <span class="hljs-keyword">if</span> prepend_folder_name <span class="hljs-keyword">else</span> item[path_len:] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> _get_dir_content_old(path, include_folders, recursive)]


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    root_dir = <span class="hljs-string">"root_dir"</span>
    ret0 = get_dir_content(root_dir, include_folders=<span class="hljs-literal">True</span>, recursive=<span class="hljs-literal">True</span>, prepend_folder_name=<span class="hljs-literal">True</span>)
    lret0 = <span class="hljs-built_in">list</span>(ret0)
    <span class="hljs-built_in">print</span>(ret0, <span class="hljs-built_in">len</span>(lret0), pformat(lret0))
    ret1 = get_dir_content_old(root_dir, include_folders=<span class="hljs-literal">False</span>, recursive=<span class="hljs-literal">True</span>, prepend_folder_name=<span class="hljs-literal">False</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(ret1), pformat(ret1))


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>

<p><strong>Notes</strong>:</p>

<ul>
<li>There are two implementations:

<ul>
<li>One that uses generators (of course here it seems useless, since I immediately convert the result to a list)</li>
<li>The classic one (function names ending in <strong>_old</strong>)</li>
</ul></li>
<li>Recursion is used (to get into subdirectories)</li>
<li>For each implementation there are two functions:

<ul>
<li>One that starts with an <em>underscore</em> (<strong>_</strong>): "private" (should not be called directly) - that does all the work</li>
<li>The public one (wrapper over previous): it just strips off the initial path (if required) from the returned entries. It's an ugly implementation, but it's the only idea that I could come with at this point</li>
</ul></li>
<li>In terms of performance, generators are generally a little bit faster (considering both <em>creation</em> and  <em>iteration</em> times), but I didn't test them in recursive functions, and also I am iterating inside the function over inner generators - don't know how performance friendly is that</li>
<li>Play with the arguments to get different results</li>
</ul>

<p><br></p>

<p><strong>Output</strong>:</p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python">(py35x64_test) E:\Work\Dev\StackOverflow\q003207219&gt;<span class="hljs-string">"e:\Work\Dev\VEnvs\py35x64_test\Scripts\python.exe"</span> <span class="hljs-string">"code_os_listdir.py"</span>
&lt;generator <span class="hljs-built_in">object</span> get_dir_content at <span class="hljs-number">0x000001BDDBB3DF10</span>&gt; <span class="hljs-number">22</span> [<span class="hljs-string">'root_dir\\dir0'</span>,
 <span class="hljs-string">'root_dir\\dir0\\dir00'</span>,
 <span class="hljs-string">'root_dir\\dir0\\dir00\\dir000'</span>,
 <span class="hljs-string">'root_dir\\dir0\\dir00\\dir000\\file0000'</span>,
 <span class="hljs-string">'root_dir\\dir0\\dir00\\file000'</span>,
 <span class="hljs-string">'root_dir\\dir0\\dir01'</span>,
 <span class="hljs-string">'root_dir\\dir0\\dir01\\file010'</span>,
 <span class="hljs-string">'root_dir\\dir0\\dir01\\file011'</span>,
 <span class="hljs-string">'root_dir\\dir0\\dir02'</span>,
 <span class="hljs-string">'root_dir\\dir0\\dir02\\dir020'</span>,
 <span class="hljs-string">'root_dir\\dir0\\dir02\\dir020\\dir0200'</span>,
 <span class="hljs-string">'root_dir\\dir1'</span>,
 <span class="hljs-string">'root_dir\\dir1\\file10'</span>,
 <span class="hljs-string">'root_dir\\dir1\\file11'</span>,
 <span class="hljs-string">'root_dir\\dir1\\file12'</span>,
 <span class="hljs-string">'root_dir\\dir2'</span>,
 <span class="hljs-string">'root_dir\\dir2\\dir20'</span>,
 <span class="hljs-string">'root_dir\\dir2\\dir20\\file200'</span>,
 <span class="hljs-string">'root_dir\\dir2\\file20'</span>,
 <span class="hljs-string">'root_dir\\dir3'</span>,
 <span class="hljs-string">'root_dir\\file0'</span>,
 <span class="hljs-string">'root_dir\\file1'</span>]
<span class="hljs-number">11</span> [<span class="hljs-string">'dir0\\dir00\\dir000\\file0000'</span>,
 <span class="hljs-string">'dir0\\dir00\\file000'</span>,
 <span class="hljs-string">'dir0\\dir01\\file010'</span>,
 <span class="hljs-string">'dir0\\dir01\\file011'</span>,
 <span class="hljs-string">'dir1\\file10'</span>,
 <span class="hljs-string">'dir1\\file11'</span>,
 <span class="hljs-string">'dir1\\file12'</span>,
 <span class="hljs-string">'dir2\\dir20\\file200'</span>,
 <span class="hljs-string">'dir2\\file20'</span>,
 <span class="hljs-string">'file0'</span>,
 <span class="hljs-string">'file1'</span>]
</code></pre>
</blockquote></li>
</ol>

<p><br></p>

<ol start="2">
<li><p><a href="https://docs.python.org/3/library/os.html#os.scandir" rel="noreferrer">[Python 3]: os.<strong>scandir</strong>(<em>path='.'</em>)</a> (<em>Python <strong>3.5</strong></em>+, backport: <a href="https://pypi.org/project/scandir" rel="noreferrer">[PyPI]: scandir</a>)</p>

<blockquote>
  <p>Return an iterator of <a href="https://docs.python.org/3/library/os.html#os.DirEntry" rel="noreferrer">os.DirEntry</a> objects corresponding to the entries in the directory given by <em>path</em>. The entries are yielded in arbitrary order, and the special entries <code>'.'</code> and <code>'..'</code> are not included.</p>
  
  <p>Using <a href="https://docs.python.org/3/library/os.html#os.scandir" rel="noreferrer">scandir()</a> instead of <a href="https://docs.python.org/3/library/os.html#os.listdir" rel="noreferrer">listdir()</a> can significantly increase the performance of code that also needs file type or file attribute information, because <a href="https://docs.python.org/3/library/os.html#os.DirEntry" rel="noreferrer">os.DirEntry</a> objects expose this information if the operating system provides it when scanning a directory. All <a href="https://docs.python.org/3/library/os.html#os.DirEntry" rel="noreferrer">os.DirEntry</a> methods may perform a system call, but <a href="https://docs.python.org/3/library/os.html#os.DirEntry.is_dir" rel="noreferrer">is_dir()</a> and <a href="https://docs.python.org/3/library/os.html#os.DirEntry.is_file" rel="noreferrer">is_file()</a> usually only require a system call for symbolic links; <a href="https://docs.python.org/3/library/os.html#os.DirEntry.stat" rel="noreferrer">os.DirEntry.stat()</a> always requires a system call on Unix but only requires one for symbolic links on Windows.</p>
</blockquote>

<p><br></p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> os
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir = os.path.join(<span class="hljs-string">"."</span>, <span class="hljs-string">"root_dir"</span>)  <span class="hljs-comment"># Explicitly prepending current directory</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir
<span class="hljs-string">'.\\root_dir'</span>
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>scandir_iterator = os.scandir(root_dir)
<span class="hljs-meta">&gt;&gt;&gt; </span>scandir_iterator
&lt;nt.ScandirIterator <span class="hljs-built_in">object</span> at <span class="hljs-number">0x00000268CF4BC140</span>&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>[item.path <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> scandir_iterator]
[<span class="hljs-string">'.\\root_dir\\dir0'</span>, <span class="hljs-string">'.\\root_dir\\dir1'</span>, <span class="hljs-string">'.\\root_dir\\dir2'</span>, <span class="hljs-string">'.\\root_dir\\dir3'</span>, <span class="hljs-string">'.\\root_dir\\file0'</span>, <span class="hljs-string">'.\\root_dir\\file1'</span>]
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>[item.path <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> scandir_iterator]  <span class="hljs-comment"># Will yield an empty list as it was consumed by previous iteration (automatically performed by the list comprehension)</span>
[]
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>scandir_iterator = os.scandir(root_dir)  <span class="hljs-comment"># Reinitialize the generator</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> scandir_iterator :
<span class="hljs-meta">... </span>    <span class="hljs-keyword">if</span> os.path.isfile(item.path):
<span class="hljs-meta">... </span>            <span class="hljs-built_in">print</span>(item.name)
...
file0
file1
</code></pre>
</blockquote>

<p><strong>Notes</strong>:</p>

<ul>
<li>It's similar to <code>os.listdir</code></li>
<li>But it's also more flexible (and offers more functionality), more <em>Python</em>ic (and in some cases, faster)</li>
</ul></li>
</ol>

<p><br></p>

<ol start="3">
<li><p><a href="https://docs.python.org/3/library/os.html#os.walk" rel="noreferrer">[Python 3]: os.<strong>walk</strong>(<em>top, topdown=True, onerror=None, followlinks=False</em>)</a></p>

<blockquote>
  <p>Generate the file names in a directory tree by walking the tree either top-down or bottom-up. For each directory in the tree rooted at directory <em>top</em> (including <em>top</em> itself), it yields a 3-tuple (<code>dirpath</code>, <code>dirnames</code>, <code>filenames</code>).</p>
</blockquote>

<p><br></p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> os
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir = os.path.join(os.getcwd(), <span class="hljs-string">"root_dir"</span>)  <span class="hljs-comment"># Specify the full path</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir
<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir'</span>
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>walk_generator = os.walk(root_dir)
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir_entry = <span class="hljs-built_in">next</span>(walk_generator)  <span class="hljs-comment"># First entry corresponds to the root dir (passed as an argument)</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir_entry
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir'</span>, [<span class="hljs-string">'dir0'</span>, <span class="hljs-string">'dir1'</span>, <span class="hljs-string">'dir2'</span>, <span class="hljs-string">'dir3'</span>], [<span class="hljs-string">'file0'</span>, <span class="hljs-string">'file1'</span>])
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir_entry[<span class="hljs-number">1</span>] + root_dir_entry[<span class="hljs-number">2</span>]  <span class="hljs-comment"># Display dirs and files (direct descendants) in a single list</span>
[<span class="hljs-string">'dir0'</span>, <span class="hljs-string">'dir1'</span>, <span class="hljs-string">'dir2'</span>, <span class="hljs-string">'dir3'</span>, <span class="hljs-string">'file0'</span>, <span class="hljs-string">'file1'</span>]
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>[os.path.join(root_dir_entry[<span class="hljs-number">0</span>], item) <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> root_dir_entry[<span class="hljs-number">1</span>] + root_dir_entry[<span class="hljs-number">2</span>]]  <span class="hljs-comment"># Display all the entries in the previous list by their full path</span>
[<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir0'</span>, <span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir1'</span>, <span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir2'</span>, <span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir3'</span>, <span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\file0'</span>, <span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\file1'</span>]
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> walk_generator:  <span class="hljs-comment"># Display the rest of the elements (corresponding to every subdir)</span>
<span class="hljs-meta">... </span>    <span class="hljs-built_in">print</span>(entry)
...
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir0'</span>, [<span class="hljs-string">'dir00'</span>, <span class="hljs-string">'dir01'</span>, <span class="hljs-string">'dir02'</span>], [])
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir0\\dir00'</span>, [<span class="hljs-string">'dir000'</span>], [<span class="hljs-string">'file000'</span>])
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir0\\dir00\\dir000'</span>, [], [<span class="hljs-string">'file0000'</span>])
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir0\\dir01'</span>, [], [<span class="hljs-string">'file010'</span>, <span class="hljs-string">'file011'</span>])
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir0\\dir02'</span>, [<span class="hljs-string">'dir020'</span>], [])
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir0\\dir02\\dir020'</span>, [<span class="hljs-string">'dir0200'</span>], [])
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir0\\dir02\\dir020\\dir0200'</span>, [], [])
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir1'</span>, [], [<span class="hljs-string">'file10'</span>, <span class="hljs-string">'file11'</span>, <span class="hljs-string">'file12'</span>])
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir2'</span>, [<span class="hljs-string">'dir20'</span>], [<span class="hljs-string">'file20'</span>])
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir2\\dir20'</span>, [], [<span class="hljs-string">'file200'</span>])
(<span class="hljs-string">'E:\\Work\\Dev\\StackOverflow\\q003207219\\root_dir\\dir3'</span>, [], [])
</code></pre>
</blockquote>

<p><strong>Notes</strong>:</p>

<ul>
<li>Under the scenes, it uses <code>os.scandir</code> (<code>os.listdir</code> on older versions)</li>
<li>It does the heavy lifting by recurring in subfolders</li>
</ul></li>
</ol>

<p><br></p>

<ol start="4">
<li><p><a href="https://docs.python.org/3/library/glob.html#glob.glob" rel="noreferrer">[Python 3]: glob.<strong>glob</strong>(<em>pathname, *, recursive=False</em>)</a> (<a href="https://docs.python.org/3/library/glob.html#glob.glob" rel="noreferrer">[Python 3]: glob.<strong>iglob</strong>(<em>pathname, *, recursive=False</em>)</a>)</p>

<blockquote>
  <p>Return a possibly-empty list of path names that match <em>pathname</em>, which must be a string containing a path specification. <em>pathname</em> can be either absolute (like <code>/usr/src/Python-1.5/Makefile</code>) or relative (like <code>../../Tools/*/*.gif</code>), and can contain shell-style wildcards. Broken symlinks are included in the results (as in the shell).<br>...<br><strong><em>Changed in version 3.5</em></strong>: Support for recursive globs using <code>**</code>.</p>
</blockquote>

<p><br></p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> glob, os
<span class="hljs-meta">&gt;&gt;&gt; </span>wildcard_pattern = <span class="hljs-string">"*"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir = os.path.join(<span class="hljs-string">"root_dir"</span>, wildcard_pattern)  <span class="hljs-comment"># Match every file/dir name</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir
<span class="hljs-string">'root_dir\\*'</span>
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>glob_list = glob.glob(root_dir)
<span class="hljs-meta">&gt;&gt;&gt; </span>glob_list
[<span class="hljs-string">'root_dir\\dir0'</span>, <span class="hljs-string">'root_dir\\dir1'</span>, <span class="hljs-string">'root_dir\\dir2'</span>, <span class="hljs-string">'root_dir\\dir3'</span>, <span class="hljs-string">'root_dir\\file0'</span>, <span class="hljs-string">'root_dir\\file1'</span>]
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>[item.replace(<span class="hljs-string">"root_dir"</span> + os.path.sep, <span class="hljs-string">""</span>) <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> glob_list]  <span class="hljs-comment"># Strip the dir name and the path separator from begining</span>
[<span class="hljs-string">'dir0'</span>, <span class="hljs-string">'dir1'</span>, <span class="hljs-string">'dir2'</span>, <span class="hljs-string">'dir3'</span>, <span class="hljs-string">'file0'</span>, <span class="hljs-string">'file1'</span>]
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> glob.iglob(root_dir + <span class="hljs-string">"*"</span>, recursive=<span class="hljs-literal">True</span>):
<span class="hljs-meta">... </span>    <span class="hljs-built_in">print</span>(entry)
...
root_dir\
root_dir\dir0
root_dir\dir0\dir00
root_dir\dir0\dir00\dir000
root_dir\dir0\dir00\dir000\file0000
root_dir\dir0\dir00\file000
root_dir\dir0\dir01
root_dir\dir0\dir01\file010
root_dir\dir0\dir01\file011
root_dir\dir0\dir02
root_dir\dir0\dir02\dir020
root_dir\dir0\dir02\dir020\dir0200
root_dir\dir1
root_dir\dir1\file10
root_dir\dir1\file11
root_dir\dir1\file12
root_dir\dir2
root_dir\dir2\dir20
root_dir\dir2\dir20\file200
root_dir\dir2\file20
root_dir\dir3
root_dir\file0
root_dir\file1
</code></pre>
</blockquote>

<p><strong>Notes</strong>:</p>

<ul>
<li>Uses <code>os.listdir</code></li>
<li>For large trees (especially if <em>recursive</em> is on), <em>iglob</em> is preferred</li>
<li>Allows advanced filtering based on name (due to the wildcard)</li>
</ul></li>
</ol>

<p><br></p>

<ol start="5">
<li><p><a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" rel="noreferrer">[Python 3]: class pathlib.<strong>Path</strong>(<em>*pathsegments</em>)</a> (<em>Python <strong>3.4</strong></em>+, backport: <a href="https://pypi.org/project/pathlib2" rel="noreferrer">[PyPI]: pathlib2</a>)</p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> pathlib
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir = <span class="hljs-string">"root_dir"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir_instance = pathlib.Path(root_dir)
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir_instance
WindowsPath(<span class="hljs-string">'root_dir'</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir_instance.name
<span class="hljs-string">'root_dir'</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir_instance.is_dir()
<span class="hljs-literal">True</span>
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>[item.name <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> root_dir_instance.glob(<span class="hljs-string">"*"</span>)]  <span class="hljs-comment"># Wildcard searching for all direct descendants</span>
[<span class="hljs-string">'dir0'</span>, <span class="hljs-string">'dir1'</span>, <span class="hljs-string">'dir2'</span>, <span class="hljs-string">'dir3'</span>, <span class="hljs-string">'file0'</span>, <span class="hljs-string">'file1'</span>]
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>[os.path.join(item.parent.name, item.name) <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> root_dir_instance.glob(<span class="hljs-string">"*"</span>) <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> item.is_dir()]  <span class="hljs-comment"># Display paths (including parent) for files only</span>
[<span class="hljs-string">'root_dir\\file0'</span>, <span class="hljs-string">'root_dir\\file1'</span>]
</code></pre>
</blockquote>

<p><strong>Notes</strong>:</p>

<ul>
<li>This is <em>one</em> way of achieving our goal</li>
<li>It's the <em>OOP</em> style of handling paths</li>
<li>Offers lots of functionalities</li>
</ul></li>
</ol>

<p><br></p>

<ol start="6">
<li><p><a href="https://docs.python.org/2/library/dircache.html#dircache.listdir" rel="noreferrer">[Python 2]: dircache.listdir(path)</a> (<em>Python <strong>2</strong></em> only)</p>

<ul>
<li>But, according to <a href="https://github.com/python/cpython/blob/2.7/Lib/dircache.py" rel="noreferrer">[GitHub]: python/cpython - (2.7) cpython/Lib/dircache.py</a>, it's just a (thin) wrapper over <code>os.listdir</code> with caching</li>
</ul>

<p><br></p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">listdir</span>(<span class="hljs-params">path</span>):
    <span class="hljs-string">"""List directory contents, using cache."""</span>
    <span class="hljs-keyword">try</span>:
        cached_mtime, <span class="hljs-built_in">list</span> = cache[path]
        <span class="hljs-keyword">del</span> cache[path]
    <span class="hljs-keyword">except</span> KeyError:
        cached_mtime, <span class="hljs-built_in">list</span> = -<span class="hljs-number">1</span>, []
    mtime = os.stat(path).st_mtime
    <span class="hljs-keyword">if</span> mtime != cached_mtime:
        <span class="hljs-built_in">list</span> = os.listdir(path)
        <span class="hljs-built_in">list</span>.sort()
    cache[path] = mtime, <span class="hljs-built_in">list</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>
</code></pre></li>
</ol>

<p><br></p>

<ol start="7">
<li><p><a href="http://man7.org/linux/man-pages/man3/opendir.3.html" rel="noreferrer">[man7]: OPENDIR(3)</a> / <a href="http://man7.org/linux/man-pages/man3/readdir.3.html" rel="noreferrer">[man7]: READDIR(3)</a> / <a href="http://man7.org/linux/man-pages/man3/closedir.3.html" rel="noreferrer">[man7]: CLOSEDIR(3)</a> via <a href="https://docs.python.org/3/library/ctypes.html#module-ctypes" rel="noreferrer">[Python 3]: ctypes - A foreign function library for Python</a> (<em>POSIX</em> specific)</p>

<blockquote>
  <p><a href="https://docs.python.org/3/library/ctypes.html#module-ctypes" rel="noreferrer">ctypes</a> is a foreign function library for Python. It provides C compatible data types, and allows calling functions in DLLs or shared libraries. It can be used to wrap these libraries in pure Python.</p>
</blockquote>

<p><em>code_ctypes.py</em>:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment">#!/usr/bin/env python3</span>

<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> ctypes <span class="hljs-keyword">import</span> Structure, \
    c_ulonglong, c_longlong, c_ushort, c_ubyte, c_char, c_int, \
    CDLL, POINTER, \
    create_string_buffer, get_errno, set_errno, cast


DT_DIR = <span class="hljs-number">4</span>
DT_REG = <span class="hljs-number">8</span>

char256 = c_char * <span class="hljs-number">256</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">LinuxDirent64</span>(<span class="hljs-title class_ inherited__">Structure</span>):
    _fields_ = [
        (<span class="hljs-string">"d_ino"</span>, c_ulonglong),
        (<span class="hljs-string">"d_off"</span>, c_longlong),
        (<span class="hljs-string">"d_reclen"</span>, c_ushort),
        (<span class="hljs-string">"d_type"</span>, c_ubyte),
        (<span class="hljs-string">"d_name"</span>, char256),
    ]

LinuxDirent64Ptr = POINTER(LinuxDirent64)

libc_dll = this_process = CDLL(<span class="hljs-literal">None</span>, use_errno=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># ALWAYS set argtypes and restype for functions, otherwise it's UB!!!</span>
opendir = libc_dll.opendir
readdir = libc_dll.readdir
closedir = libc_dll.closedir


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_dir_content</span>(<span class="hljs-params">path</span>):
    ret = [path, <span class="hljs-built_in">list</span>(), <span class="hljs-built_in">list</span>()]
    dir_stream = opendir(create_string_buffer(path.encode()))
    <span class="hljs-keyword">if</span> (dir_stream == <span class="hljs-number">0</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"opendir returned NULL (errno: {:d})"</span>.<span class="hljs-built_in">format</span>(get_errno()))
        <span class="hljs-keyword">return</span> ret
    set_errno(<span class="hljs-number">0</span>)
    dirent_addr = readdir(dir_stream)
    <span class="hljs-keyword">while</span> dirent_addr:
        dirent_ptr = cast(dirent_addr, LinuxDirent64Ptr)
        dirent = dirent_ptr.contents
        name = dirent.d_name.decode()
        <span class="hljs-keyword">if</span> dirent.d_type &amp; DT_DIR:
            <span class="hljs-keyword">if</span> name <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> (<span class="hljs-string">"."</span>, <span class="hljs-string">".."</span>):
                ret[<span class="hljs-number">1</span>].append(name)
        <span class="hljs-keyword">elif</span> dirent.d_type &amp; DT_REG:
            ret[<span class="hljs-number">2</span>].append(name)
        dirent_addr = readdir(dir_stream)
    <span class="hljs-keyword">if</span> get_errno():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"readdir returned NULL (errno: {:d})"</span>.<span class="hljs-built_in">format</span>(get_errno()))
    closedir(dir_stream)
    <span class="hljs-keyword">return</span> ret


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"{:s} on {:s}\n"</span>.<span class="hljs-built_in">format</span>(sys.version, sys.platform))
    root_dir = <span class="hljs-string">"root_dir"</span>
    entries = get_dir_content(root_dir)
    <span class="hljs-built_in">print</span>(entries)


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>

<p><strong>Notes</strong>:</p>

<ul>
<li>It loads the three functions from <em>libc</em> (loaded in the current process) and calls them (for more details check <a href="https://stackoverflow.com/questions/82831/how-do-i-check-whether-a-file-exists-using-python/44661513#44661513">[SO]: How do I check whether a file exists without exceptions? (@CristiFati's answer)</a> - last notes from item <strong><em>#4.</em></strong>). That would place this approach very close to the <em>Python</em> / <em>C</em> edge</li>
<li><em>LinuxDirent64</em> is the <em>ctypes</em> representation of <em>struct dirent64</em> from <a href="http://man7.org/linux/man-pages/man0/dirent.h.0p.html" rel="noreferrer">[man7]: dirent.h(0P)</a> (so are the <em>DT_</em> constants) from my machine: <em>Ubtu 16 x64</em> (<em>4.10.0-40-generic</em> and <em>libc6-dev:amd64</em>). On other flavors/versions, the struct definition might differ, and if so, the <em>ctypes</em> alias should be updated, otherwise it will yield <strong>Undefined Behavior</strong></li>
<li>It returns data in the <code>os.walk</code>'s format. I didn't bother to make it recursive, but starting from the existing code, that would be a fairly trivial task</li>
<li>Everything is doable on <em>Win</em> as well, the data (libraries, functions, structs, constants, ...) differ</li>
</ul>

<p><br></p>

<p><strong>Output</strong>:</p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python">[cfati@cfati-ubtu16x64-<span class="hljs-number">0</span>:~/Work/Dev/StackOverflow/q003207219]&gt; ./code_ctypes.py
<span class="hljs-number">3.5</span><span class="hljs-number">.2</span> (default, Nov <span class="hljs-number">12</span> <span class="hljs-number">2018</span>, <span class="hljs-number">13</span>:<span class="hljs-number">43</span>:<span class="hljs-number">14</span>)
[GCC <span class="hljs-number">5.4</span><span class="hljs-number">.0</span> <span class="hljs-number">20160609</span>] on linux

[<span class="hljs-string">'root_dir'</span>, [<span class="hljs-string">'dir2'</span>, <span class="hljs-string">'dir1'</span>, <span class="hljs-string">'dir3'</span>, <span class="hljs-string">'dir0'</span>], [<span class="hljs-string">'file1'</span>, <span class="hljs-string">'file0'</span>]]
</code></pre>
</blockquote></li>
</ol>

<p><br></p>

<ol start="8">
<li><p><a href="https://docs.activestate.com/activepython/3.1/pywin32/win32file__FindFilesW_meth.html" rel="noreferrer">[ActiveState.Docs]: win32file.FindFilesW</a> (<em>Win</em> specific)</p>

<blockquote>
  <p>Retrieves a list of matching filenames, using the Windows Unicode API. An interface to the API FindFirstFileW/FindNextFileW/Find close functions.</p>
</blockquote>

<p><br></p>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> os, win32file, win32con
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir = <span class="hljs-string">"root_dir"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>wildcard = <span class="hljs-string">"*"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>root_dir_wildcard = os.path.join(root_dir, wildcard)
<span class="hljs-meta">&gt;&gt;&gt; </span>entry_list = win32file.FindFilesW(root_dir_wildcard)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">len</span>(entry_list)  <span class="hljs-comment"># Don't display the whole content as it's too long</span>
<span class="hljs-number">8</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>[entry[-<span class="hljs-number">2</span>] <span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> entry_list]  <span class="hljs-comment"># Only display the entry names</span>
[<span class="hljs-string">'.'</span>, <span class="hljs-string">'..'</span>, <span class="hljs-string">'dir0'</span>, <span class="hljs-string">'dir1'</span>, <span class="hljs-string">'dir2'</span>, <span class="hljs-string">'dir3'</span>, <span class="hljs-string">'file0'</span>, <span class="hljs-string">'file1'</span>]
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>[entry[-<span class="hljs-number">2</span>] <span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> entry_list <span class="hljs-keyword">if</span> entry[<span class="hljs-number">0</span>] &amp; win32con.FILE_ATTRIBUTE_DIRECTORY <span class="hljs-keyword">and</span> entry[-<span class="hljs-number">2</span>] <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> (<span class="hljs-string">"."</span>, <span class="hljs-string">".."</span>)]  <span class="hljs-comment"># Filter entries and only display dir names (except self and parent)</span>
[<span class="hljs-string">'dir0'</span>, <span class="hljs-string">'dir1'</span>, <span class="hljs-string">'dir2'</span>, <span class="hljs-string">'dir3'</span>]
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>[os.path.join(root_dir, entry[-<span class="hljs-number">2</span>]) <span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> entry_list <span class="hljs-keyword">if</span> entry[<span class="hljs-number">0</span>] &amp; (win32con.FILE_ATTRIBUTE_NORMAL | win32con.FILE_ATTRIBUTE_ARCHIVE)]  <span class="hljs-comment"># Only display file "full" names</span>
[<span class="hljs-string">'root_dir\\file0'</span>, <span class="hljs-string">'root_dir\\file1'</span>]
</code></pre>
</blockquote>

<p><strong>Notes</strong>:</p>

<ul>
<li><code>win32file.FindFilesW</code> is part of <a href="https://github.com/mhammond/pywin32" rel="noreferrer">[GitHub]: mhammond/pywin32 - Python for Windows (pywin32) Extensions</a>, which is a <em>Python</em> wrapper over <em>WINAPI</em>s</li>
<li>The documentation link is from <a href="https://www.activestate.com" rel="noreferrer">ActiveState</a>, as I didn't find any <em>PyWin32</em> official documentation</li>
</ul></li>
</ol>

<p><br></p>

<ol start="9">
<li>Install some (other) third-party package that does the trick

<ul>
<li>Most likely, will rely on one (or more) of the above (maybe with slight customizations)</li>
</ul></li>
</ol>

<p><br></p>

<p><strong>Notes</strong>:</p>

<ul>
<li><p>Code is meant to be portable (except places that target a specific area - which are marked) or cross:</p>

<ul>
<li>platform (<em>Nix</em>, <em>Win</em>, )</li>
<li><em>Python</em> version (2, 3, )</li>
</ul></li>
<li><p>Multiple path styles (absolute, relatives) were used across the above variants, to illustrate the fact that the "tools" used are flexible in this direction</p></li>
<li><p><code>os.listdir</code> and <code>os.scandir</code> use <em>opendir</em> / <em>readdir</em> / <em>closedir</em> (<a href="https://docs.microsoft.com/en-gb/windows/desktop/api/fileapi/nf-fileapi-findfirstfilew" rel="noreferrer">[MS.Docs]: FindFirstFileW function</a> / <a href="https://docs.microsoft.com/en-gb/windows/desktop/api/fileapi/nf-fileapi-findnextfilew" rel="noreferrer">[MS.Docs]: FindNextFileW function</a> / <a href="https://docs.microsoft.com/en-gb/windows/desktop/api/fileapi/nf-fileapi-findclose" rel="noreferrer">[MS.Docs]: FindClose function</a>) (via <a href="https://github.com/python/cpython/blob/master/Modules/posixmodule.c" rel="noreferrer">[GitHub]: python/cpython - (master) cpython/Modules/posixmodule.c</a>)</p></li>
<li><p><code>win32file.FindFilesW</code> uses those (<em>Win</em> specific) functions as well (via <a href="https://github.com/mhammond/pywin32/blob/master/win32/src/win32file.i" rel="noreferrer">[GitHub]: mhammond/pywin32 - (master) pywin32/win32/src/win32file.i</a>)</p></li>
<li><p><em>_get_dir_content</em> (from point <strong><em>#1.</em></strong>) can be implemented using any of these approaches (some will require more work and some less)</p>

<ul>
<li>Some advanced filtering (instead of just file <em>vs.</em> dir) could be done: e.g. the <em>include_folders</em> argument could be replaced by another one (e.g. <em>filter_func</em>) which would be a function that takes a path as an argument: <code>filter_func=lambda x: True</code> (this doesn't strip out anything) and inside <em>_get_dir_content</em> something like: <code>if not filter_func(entry_with_path): continue</code> (if the function fails for one entry, it will be skipped), but the more complex the code becomes, the longer it will take to execute</li>
</ul></li>
<li><p><strong>Nota bene!</strong> Since recursion is used, I must mention that I did some tests on my laptop (<em>Win 10 x64</em>), totally unrelated to this problem, and when the recursion level was reaching values somewhere in the <em>(990 .. 1000)</em> range (<em>recursionlimit</em> - 1000 (default)), I got <em>StackOverflow</em> :). If the directory tree exceeds that limit (I am not an <em>FS</em> expert, so I don't know if that is even possible), that could be a problem. <br>
I must also mention that I didn't try to increase <em>recursionlimit</em> because I have no experience in the area (how much can I increase it before having to also increase the stack at <em>OS</em> level), but in theory there will always be the possibility for failure, if the dir depth is larger than the highest possible <em>recursionlimit</em> (on that machine)</p></li>
<li><p>The code samples are for demonstrative purposes only. That means that I didn't take into account error handling (I don't think there's any <strong><em>try</em></strong> / <strong><em>except</em></strong> / <strong><em>else</em></strong> / <strong><em>finally</em></strong> block), so the code is not robust (the reason is: to keep it as simple and short as possible). For <em>production</em>, error handling should be added as well</p></li>
</ul>

<h3>Other approaches:</h3>

<ol>
<li><p>Use <em>Python</em> only as a wrapper</p>

<ul>
<li>Everything is done using another technology</li>
<li>That technology is invoked from <em>Python</em></li>
<li><p>The most famous flavor that I know is what I call the <em>system administrator</em> approach:</p>

<ul>
<li>Use <em>Python</em> (or any programming language for that matter) in order to execute <em>shell</em> commands (and parse their outputs)</li>
<li>Some consider this a neat hack</li>
<li>I consider it more like a lame workaround (<em>gainarie</em>), as the action per se is performed from <em>shell</em> (<em>cmd</em> in this case), and thus doesn't have anything to do with <em>Python</em>.</li>
<li>Filtering (<code>grep</code> / <code>findstr</code>) or output formatting could be done on both sides, but I'm not going to insist on it. Also, I deliberately used <code>os.system</code> instead of <code>subprocess.Popen</code>.</li>
</ul>

<blockquote>
<pre class="lang-py s-code-block"><code class="hljs language-python">(py35x64_test) E:\Work\Dev\StackOverflow\q003207219&gt;<span class="hljs-string">"e:\Work\Dev\VEnvs\py35x64_test\Scripts\python.exe"</span> -c <span class="hljs-string">"import os;os.system(\"dir /b root_dir\")"</span>
dir0
dir1
dir2
dir3
file0
file1
</code></pre>
</blockquote></li>
</ul>

<p>In general this approach is to be avoided, since if some command output format slightly differs between <em>OS</em> versions/flavors, the parsing code should be adapted as well; not to mention differences between locales).</p></li>
</ol>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I really liked <a href="https://stackoverflow.com/a/3215392/901641">adamk's answer</a>, suggesting that you use <code>glob()</code>, from the module of the same name. This allows you to have pattern matching with <code>*</code>s.</p>

<p>But as other people pointed out in the comments, <code>glob()</code> can get tripped up over inconsistent slash directions. To help with that, I suggest you use the <code>join()</code> and <code>expanduser()</code> functions in the <code>os.path</code> module, and perhaps the <code>getcwd()</code> function in the <code>os</code> module, as well.</p>

<p>As examples:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> glob <span class="hljs-keyword">import</span> glob

<span class="hljs-comment"># Return everything under C:\Users\admin that contains a folder called wlp.</span>
glob(<span class="hljs-string">'C:\Users\admin\*\wlp'</span>)
</code></pre>

<p>The above is terrible - the path has been hardcoded and will only ever work on Windows between the drive name and the <code>\</code>s being hardcoded into the path.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> glob    <span class="hljs-keyword">import</span> glob
<span class="hljs-keyword">from</span> os.path <span class="hljs-keyword">import</span> join

<span class="hljs-comment"># Return everything under Users, admin, that contains a folder called wlp.</span>
glob(join(<span class="hljs-string">'Users'</span>, <span class="hljs-string">'admin'</span>, <span class="hljs-string">'*'</span>, <span class="hljs-string">'wlp'</span>))
</code></pre>

<p>The above works better, but it relies on the folder name <code>Users</code> which is often found on Windows and not so often found on other OSs. It also relies on the user having a specific name, <code>admin</code>.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> glob    <span class="hljs-keyword">import</span> glob
<span class="hljs-keyword">from</span> os.path <span class="hljs-keyword">import</span> expanduser, join

<span class="hljs-comment"># Return everything under the user directory that contains a folder called wlp.</span>
glob(join(expanduser(<span class="hljs-string">'~'</span>), <span class="hljs-string">'*'</span>, <span class="hljs-string">'wlp'</span>))
</code></pre>

<p>This works perfectly across all platforms.</p>

<p>Another great example that works perfectly across platforms and does something a bit different:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> glob    <span class="hljs-keyword">import</span> glob
<span class="hljs-keyword">from</span> os      <span class="hljs-keyword">import</span> getcwd
<span class="hljs-keyword">from</span> os.path <span class="hljs-keyword">import</span> join

<span class="hljs-comment"># Return everything under the current directory that contains a folder called wlp.</span>
glob(join(getcwd(), <span class="hljs-string">'*'</span>, <span class="hljs-string">'wlp'</span>))
</code></pre>

<p>Hope these examples help you see the power of a few of the functions you can find in the standard Python library modules.</p>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">list_files</span>(<span class="hljs-params">path</span>):
    <span class="hljs-comment"># returns a list of names (with extension, without full path) of all files </span>
    <span class="hljs-comment"># in folder path</span>
    files = []
    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> os.listdir(path):
        <span class="hljs-keyword">if</span> os.path.isfile(os.path.join(path, name)):
            files.append(name)
    <span class="hljs-keyword">return</span> files 
</code></pre>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you are looking for a Python implementation of <strong>find</strong>, this is a recipe I use rather frequently:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> findtools.find_files <span class="hljs-keyword">import</span> (find_files, Match)

<span class="hljs-comment"># Recursively find all *.sh files in **/usr/bin**</span>
sh_files_pattern = Match(filetype=<span class="hljs-string">'f'</span>, name=<span class="hljs-string">'*.sh'</span>)
found_files = find_files(path=<span class="hljs-string">'/usr/bin'</span>, match=sh_files_pattern)

<span class="hljs-keyword">for</span> found_file <span class="hljs-keyword">in</span> found_files:
    <span class="hljs-built_in">print</span> found_file
</code></pre>

<p>So I made a PyPI <a href="https://pypi.python.org/pypi/findtools/" rel="noreferrer">package</a> out of it and there is also a <a href="https://github.com/ewiger/findtools" rel="noreferrer">GitHub repository</a>. I hope that someone finds it potentially useful for this code.</p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For greater results, you can use <code>listdir()</code> method of the <code>os</code> module along with a generator (a generator is a powerful iterator that keeps its state, remember?). The following code works fine with both versions: Python 2 and Python 3.</p>

<p>Here's a code:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os

<span class="hljs-keyword">def</span> <span class="hljs-title function_">files</span>(<span class="hljs-params">path</span>):  
    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> os.listdir(path):
        <span class="hljs-keyword">if</span> os.path.isfile(os.path.join(path, file)):
            <span class="hljs-keyword">yield</span> file

<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> files(<span class="hljs-string">"."</span>):  
    <span class="hljs-built_in">print</span> (file)
</code></pre>

<p>The <code>listdir()</code> method returns the list of entries for the given directory. The method <code>os.path.isfile()</code> returns <code>True</code> if the given entry is a file. And the <code>yield</code> operator quits the func but keeps its current state, and it returns only the name of the entry detected as a file. All the above allows us to loop over the generator function.</p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Returning a list of absolute filepaths, does not recurse into subdirectories</strong></p>

<pre class="lang-py s-code-block"><code class="hljs language-python">L = [os.path.join(os.getcwd(),f) <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> os.listdir(<span class="hljs-string">'.'</span>) <span class="hljs-keyword">if</span> os.path.isfile(os.path.join(os.getcwd(),f))]
</code></pre>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A wise teacher told me once that:</p>

<blockquote>
  <p>When there are several established ways to do something, none of them is good for all cases.</p>
</blockquote>

<p>I will thus add a solution for a <strong>subset</strong> of the problem: quite often, we only want to check whether a file matches a start string and an end string, without going into subdirectories. We would thus like a function that returns a list of filenames, like:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">filenames = dir_filter(<span class="hljs-string">'foo/baz'</span>, radical=<span class="hljs-string">'radical'</span>, extension=<span class="hljs-string">'.txt'</span>)
</code></pre>

<p>If you care to first declare two functions, this can be done:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">file_filter</span>(<span class="hljs-params">filename, radical=<span class="hljs-string">''</span>, extension=<span class="hljs-string">''</span></span>):
    <span class="hljs-string">"Check if a filename matches a radical and extension"</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> filename:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    filename = filename.strip()
    <span class="hljs-keyword">return</span>(filename.startswith(radical) <span class="hljs-keyword">and</span> filename.endswith(extension))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">dir_filter</span>(<span class="hljs-params">dirname=<span class="hljs-string">''</span>, radical=<span class="hljs-string">''</span>, extension=<span class="hljs-string">''</span></span>):
    <span class="hljs-string">"Filter filenames in directory according to radical and extension"</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> dirname:
        dirname = <span class="hljs-string">'.'</span>
    <span class="hljs-keyword">return</span> [filename <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> os.listdir(dirname)
                <span class="hljs-keyword">if</span> file_filter(filename, radical, extension)]
</code></pre>

<p>This solution could be easily generalized with regular expressions (and you might want to add a <code>pattern</code> argument, if you do not want your patterns to always stick to the start or end of the filename).</p>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> os.path


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_files</span>(<span class="hljs-params">target_dir</span>):
    item_list = os.listdir(target_dir)

    file_list = <span class="hljs-built_in">list</span>()
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> item_list:
        item_dir = os.path.join(target_dir,item)
        <span class="hljs-keyword">if</span> os.path.isdir(item_dir):
            file_list += get_files(item_dir)
        <span class="hljs-keyword">else</span>:
            file_list.append(item_dir)
    <span class="hljs-keyword">return</span> file_list
</code></pre>

<p>Here I use a recursive structure.</p>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using generators</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_files</span>(<span class="hljs-params">search_path</span>):
     <span class="hljs-keyword">for</span> (dirpath, _, filenames) <span class="hljs-keyword">in</span> os.walk(search_path):
         <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> filenames:
             <span class="hljs-keyword">yield</span> os.path.join(dirpath, filename)
list_files = get_files(<span class="hljs-string">'.'</span>)
<span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> list_files:
    <span class="hljs-built_in">print</span>(filename)
</code></pre>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Another very readable variant for Python 3.4+ is using pathlib.Path.glob:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
folder = <span class="hljs-string">'/foo'</span>
[f <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> Path(folder).glob(<span class="hljs-string">'*'</span>) <span class="hljs-keyword">if</span> f.is_file()]
</code></pre>

<p>It is simple to make more specific, e.g. only look for Python source files which are not symbolic links, also in all subdirectories:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">[f <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> Path(folder).glob(<span class="hljs-string">'**/*.py'</span>) <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> f.is_symlink()]
</code></pre>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For Python 2:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">pip install rglob
</code></pre>
<p>Then do</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> rglob
file_list = rglob.rglob(<span class="hljs-string">"/home/base/dir/"</span>, <span class="hljs-string">"*"</span>)
<span class="hljs-built_in">print</span> file_list
</code></pre>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here's my general-purpose function for this.  It returns a list of file paths rather than filenames since I found that to be more useful.  It has a few optional arguments that make it versatile.  For instance, I often use it with arguments like <code>pattern='*.txt'</code> or <code>subfolders=True</code>.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> fnmatch

<span class="hljs-keyword">def</span> <span class="hljs-title function_">list_paths</span>(<span class="hljs-params">folder=<span class="hljs-string">'.'</span>, pattern=<span class="hljs-string">'*'</span>, case_sensitive=<span class="hljs-literal">False</span>, subfolders=<span class="hljs-literal">False</span></span>):
    <span class="hljs-string">"""Return a list of the file paths matching the pattern in the specified 
    folder, optionally including files inside subfolders.
    """</span>
    match = fnmatch.fnmatchcase <span class="hljs-keyword">if</span> case_sensitive <span class="hljs-keyword">else</span> fnmatch.fnmatch
    walked = os.walk(folder) <span class="hljs-keyword">if</span> subfolders <span class="hljs-keyword">else</span> [<span class="hljs-built_in">next</span>(os.walk(folder))]
    <span class="hljs-keyword">return</span> [os.path.join(root, f)
            <span class="hljs-keyword">for</span> root, dirnames, filenames <span class="hljs-keyword">in</span> walked
            <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> filenames <span class="hljs-keyword">if</span> match(f, pattern)]
</code></pre>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I will provide a sample one liner where sourcepath and file type can be provided as input. The code returns a list of filenames with csv extension. Use <em>.</em> in case all files needs to be returned. This will also recursively scans the subdirectories. </p>

<p><code>[y for x in os.walk(sourcePath) for y in glob(os.path.join(x[0], '*.csv'))]</code></p>

<p>Modify file extensions and source path as needed. </p>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 21</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><em><a href="http://docs.python.org/release/2.6.7/library/dircache.html" rel="nofollow noreferrer">dircache</a> is  "Deprecated since version 2.6: The dircache module has been removed in Python 3.0."</em></p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> dircache
<span class="hljs-built_in">list</span> = dircache.listdir(pathname)
i = <span class="hljs-number">0</span>
check = <span class="hljs-built_in">len</span>(<span class="hljs-built_in">list</span>[<span class="hljs-number">0</span>])
temp = []
count = <span class="hljs-built_in">len</span>(<span class="hljs-built_in">list</span>)
<span class="hljs-keyword">while</span> count != <span class="hljs-number">0</span>:
  <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(<span class="hljs-built_in">list</span>[i]) != check:
     temp.append(<span class="hljs-built_in">list</span>[i-<span class="hljs-number">1</span>])
     check = <span class="hljs-built_in">len</span>(<span class="hljs-built_in">list</span>[i])
  <span class="hljs-keyword">else</span>:
    i = i + <span class="hljs-number">1</span>
    count = count - <span class="hljs-number">1</span>

<span class="hljs-built_in">print</span> temp
</code></pre>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://docs.python.org/2/library/os.html#os.listdir\u0026quot; rel=\u0026quot;noreferrer\u0026quot; title=\u0026quot;os.listdir\u0026quot;\u0026gt;\u0026lt;code\u0026gt;os.listdir()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt; returns everything inside a directory -- including both \u0026lt;strong\u0026gt;files\u0026lt;/strong\u0026gt; and \u0026lt;strong\u0026gt;directories\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://docs.python.org/2/library/os.path.html#module-os.path\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;code\u0026gt;os.path\u0026lt;/code\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/a\u0026gt;\u0026apos;s \u0026lt;code\u0026gt;isfile()\u0026lt;/code\u0026gt; can be used to only list files:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; os \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; listdir\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; os.path \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; isfile, join\nonlyfiles = [f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; listdir(mypath) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; isfile(join(mypath, f))]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Alternatively, \u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://docs.python.org/2/library/os.html#os.walk\u0026quot; rel=\u0026quot;noreferrer\u0026quot; title=\u0026quot;os.walk\u0026quot;\u0026gt;\u0026lt;code\u0026gt;os.walk()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt; \u0026lt;strong\u0026gt;yields two lists\u0026lt;/strong\u0026gt; for each directory it visits -- one for \u0026lt;strong\u0026gt;files\u0026lt;/strong\u0026gt; and one for \u0026lt;strong\u0026gt;dirs\u0026lt;/strong\u0026gt;. If you only want the top directory you can break the first time it yields:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; os \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; walk\n\nf = []\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (dirpath, dirnames, filenames) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; walk(mypath):\n    f.extend(filenames)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;or, shorter:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; os \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; walk\n\nfilenames = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(walk(mypath), (\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, []))[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# [] if no file\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I prefer using the \u0026lt;a href=\u0026quot;https://docs.python.org/library/glob.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;glob\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; module, as it does pattern matching and expansion.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; glob\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(glob.glob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/home/adam/*\u0026quot;\u0026lt;/span\u0026gt;))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;It does pattern matching intuitively\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; glob\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# All files and directories ending with .txt and that don\u0026apos;t begin with a dot:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(glob.glob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/home/adam/*.txt\u0026quot;\u0026lt;/span\u0026gt;)) \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# All files and directories ending with .txt with depth of 2 folders, ignoring names beginning with a dot:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(glob.glob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/home/adam/*/*.txt\u0026quot;\u0026lt;/span\u0026gt;)) \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;It will return a list with the queried files and directories:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/home/adam/file1.txt\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/home/adam/file2.txt\u0026apos;\u0026lt;/span\u0026gt;, .... ]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Note that \u0026lt;code\u0026gt;glob\u0026lt;/code\u0026gt; ignores files and directories that begin with a dot \u0026lt;code\u0026gt;.\u0026lt;/code\u0026gt;, as those are considered hidden files and directories, unless the pattern is something like \u0026lt;code\u0026gt;.*\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Use \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/glob.html#glob.escape\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;glob.escape\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to escape strings that are not meant to be patterns:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(glob.glob(glob.escape(directory_name) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/*.txt\u0026quot;\u0026lt;/span\u0026gt;))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;list in the current directory\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;With \u0026lt;code\u0026gt;listdir\u0026lt;/code\u0026gt; in \u0026lt;code\u0026gt;os\u0026lt;/code\u0026gt; module you get the files and the folders in the current dir\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\narr = os.listdir()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Looking in a directory\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;arr = os.listdir(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;c:\\\\files\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;with \u0026lt;code\u0026gt;glob\u0026lt;/code\u0026gt; you can specify a type of file to list like this\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; glob\n\ntxtfiles = []\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; file \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; glob.glob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*.txt\u0026quot;\u0026lt;/span\u0026gt;):\n    txtfiles.append(file)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;mylist = [f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; glob.glob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*.txt\u0026quot;\u0026lt;/span\u0026gt;)]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;get the full path of only files in the current directory\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; os \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; listdir\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; os.path \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; isfile, join\n\ncwd = os.getcwd()\nonlyfiles = [os.path.join(cwd, f) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.listdir(cwd) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \nos.path.isfile(os.path.join(cwd, f))]\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(onlyfiles) \n\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;G:\\\\getfilesname\\\\getfilesname.py\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;G:\\\\getfilesname\\\\example.txt\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Getting the full path name with \u0026lt;code\u0026gt;os.path.abspath\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You get the full path in return\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n files_path = [os.path.abspath(x) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.listdir()]\n \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(files_path)\n \n [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F:\\\\documenti\\applications.txt\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F:\\\\documenti\\collections.txt\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Walk: going through sub directories\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;os.walk returns the root, the directories list and the files list, that is why I unpacked them in r, d, f in the for loop; it, then, looks for other files and directories in the subfolders of the root and so on until there are no subfolders.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Getting the current work directory (cwd)\u0026lt;/span\u0026gt;\nthisdir = os.getcwd()\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# r=root, d=directories, f = files\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; r, d, f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.walk(thisdir):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; file \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; f:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; file.endswith(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.docx\u0026quot;\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(os.path.join(r, file))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;To go up in the directory tree\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Method 1\u0026lt;/span\u0026gt;\nx = os.listdir(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;..\u0026apos;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Method 2\u0026lt;/span\u0026gt;\nx= os.listdir(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Get files of a particular subdirectory with \u0026lt;code\u0026gt;os.listdir()\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\nx = os.listdir(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;./content\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;os.walk(\u0026apos;.\u0026apos;) - current directory\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n arr = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(os.walk(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;))[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]\n \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(arr)\n \n \u0026amp;gt;\u0026amp;gt;\u0026amp;gt; [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;5bs_Turismo1.pdf\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;5bs_Turismo1.pptx\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;esperienza.txt\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;next(os.walk(\u0026apos;.\u0026apos;)) and os.path.join(\u0026apos;dir\u0026apos;, \u0026apos;file\u0026apos;)\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n arr = []\n \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; d,r,f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(os.walk(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;F:\\\\_python\u0026quot;\u0026lt;/span\u0026gt;)):\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; file \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; f:\n         arr.append(os.path.join(r,file))\n\n \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; arr:\n     \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(files)\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;F:\\\\_python\\\\dict_class.py\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;F:\\\\_python\\\\programmi.txt\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;next... walk\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; [os.path.join(r,file) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; r,d,f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(os.walk(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;F:\\\\_python\u0026quot;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; file \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; f]\n \n \u0026amp;gt;\u0026amp;gt;\u0026amp;gt; [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F:\\\\_python\\\\dict_class.py\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F:\\\\_python\\\\programmi.txt\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;os.walk\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;x = [os.path.join(r,file) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; r,d,f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.walk(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;F:\\\\_python\u0026quot;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; file \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; f]\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(x)\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F:\\\\_python\\\\dict.py\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F:\\\\_python\\\\progr.txt\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F:\\\\_python\\\\readl.py\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;os.listdir() - get only txt files\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; arr_txt = [x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.listdir() \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; x.endswith(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.txt\u0026quot;\u0026lt;/span\u0026gt;)]\n \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Using \u0026lt;code\u0026gt;glob\u0026lt;/code\u0026gt; to get the full path of the files\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; path \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; path\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; glob \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; glob\n\nx = [path(f).abspath() \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; glob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;F:\\\\*.txt\u0026quot;\u0026lt;/span\u0026gt;)]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Using \u0026lt;code\u0026gt;os.path.isfile\u0026lt;/code\u0026gt; to avoid directories in the list\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os.path\nlistOfFiles = [f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.listdir() \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; os.path.isfile(f)]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Using \u0026lt;code\u0026gt;pathlib\u0026lt;/code\u0026gt; from Python 3.4\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; pathlib\n\nflist = []\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; p \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; pathlib.Path(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;).iterdir():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; p.is_file():\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(p)\n        flist.append(p)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;With \u0026lt;code\u0026gt;list comprehension\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;flist = [p \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; p \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; pathlib.Path(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;).iterdir() \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; p.is_file()]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Use glob method in pathlib.Path()\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; pathlib\n\npy = pathlib.Path().glob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*.py\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Get all and only files with os.walk: checks only in the third element returned, i.e. the list of the files\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\nx = [i[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.walk(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;)]\ny=[]\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; t \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; x:\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; t:\n        y.append(f)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Get only files with next in a directory: returns only the file in the root folder\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n x = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(os.walk(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F://python\u0026apos;\u0026lt;/span\u0026gt;))[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Get only directories with next and walk in a directory, because in the [1] element there are the folders only\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(os.walk(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;F://python\u0026apos;\u0026lt;/span\u0026gt;))[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# for the current dir use (\u0026apos;.\u0026apos;)\u0026lt;/span\u0026gt;\n \n \u0026amp;gt;\u0026amp;gt;\u0026amp;gt; [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;python3\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;others\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Get all the \u0026lt;code\u0026gt;subdir\u0026lt;/code\u0026gt; names with \u0026lt;code\u0026gt;walk\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; r,d,f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.walk(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;F:\\\\_python\u0026quot;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; dirs \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; d:\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(dirs)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;os.scandir()\u0026lt;/code\u0026gt; from Python 3.5 and greater\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\nx = [f.name \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.scandir() \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; f.is_file()]\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Another example with `scandir` (a little variation from docs.python.org)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# This one is more efficient than `os.listdir`.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# In this case, it shows the files only in the current directory\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# where the script is executed.\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; os.scandir() \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; i:\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; entry \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; i:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; entry.is_file():\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(entry.name)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\nos.listdir(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;somedirectory\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;will return a list of all files and directories in \u0026quot;somedirectory\u0026quot;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;A one-line solution to get \u0026lt;strong\u0026gt;only list of files\u0026lt;/strong\u0026gt; (no subdirectories):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;filenames = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(os.walk(path))[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or absolute pathnames:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;paths = [os.path.join(path, fn) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; fn \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(os.walk(path))[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Getting Full File Paths From a Directory and All Its Subdirectories\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get_filepaths\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;directory\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;\n    This function will generate the file names in a directory \n    tree by walking the tree either top-down or bottom-up. For each \n    directory in the tree rooted at directory top (including top itself), \n    it yields a 3-tuple (dirpath, dirnames, filenames).\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    file_paths = []  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# List which will store all of the full filepaths.\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Walk the tree.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; root, directories, files \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.walk(directory):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; filename \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; files:\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Join the two strings in order to form the full filepath.\u0026lt;/span\u0026gt;\n            filepath = os.path.join(root, filename)\n            file_paths.append(filepath)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Add it to the list.\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; file_paths  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Self-explanatory.\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Run the above function and store its results in a variable.   \u0026lt;/span\u0026gt;\nfull_file_paths = get_filepaths(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/Users/johnny/Desktop/TEST\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;The path I provided in the above function contained 3 files two of them in the root directory, and another in a subfolder called \u0026quot;SUBFOLDER.\u0026quot;  You can now do things like:\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;print full_file_paths\u0026lt;/code\u0026gt; which will print the list:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;[\u0026apos;/Users/johnny/Desktop/TEST/file1.txt\u0026apos;, \u0026apos;/Users/johnny/Desktop/TEST/file2.txt\u0026apos;, \u0026apos;/Users/johnny/Desktop/TEST/SUBFOLDER/file3.dat\u0026apos;]\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;If you\u0026apos;d like, you can open and read the contents, or focus only on files with the extension \u0026quot;.dat\u0026quot; like in the code below:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; full_file_paths:\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; f.endswith(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.dat\u0026quot;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; f\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;/Users/johnny/Desktop/TEST/SUBFOLDER/file3.dat\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Since version 3.4 there are builtin \u0026lt;em\u0026gt;iterators\u0026lt;/em\u0026gt; for this which are a lot more efficient than \u0026lt;a href=\u0026quot;http://docs.python.org/3/library/os.html#os.listdir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;os.listdir()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://docs.python.org/3/library/pathlib.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;pathlib\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;: \u0026lt;em\u0026gt;New in version 3.4.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; pathlib\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[p \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; p \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; pathlib.Path(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;).iterdir() \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; p.is_file()]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;According to \u0026lt;a href=\u0026quot;http://www.python.org/dev/peps/pep-0428/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;PEP 428\u0026lt;/a\u0026gt;, the aim of the \u0026lt;a href=\u0026quot;http://docs.python.org/3/library/pathlib.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;pathlib\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; library is to provide a simple hierarchy of classes to handle filesystem paths and the common operations users do over them.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://docs.python.org/3/library/os.html#os.scandir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;os.scandir()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;: \u0026lt;em\u0026gt;New in version 3.5.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[entry \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; entry \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.scandir(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; entry.is_file()]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note that \u0026lt;a href=\u0026quot;http://docs.python.org/3/library/os.html#os.walk\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;os.walk()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; uses \u0026lt;a href=\u0026quot;http://docs.python.org/3/library/os.html#os.scandir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;os.scandir()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; instead of \u0026lt;a href=\u0026quot;http://docs.python.org/3/library/os.html#os.listdir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;os.listdir()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; from version 3.5, and its speed got increased by 2-20 times according to \u0026lt;a href=\u0026quot;http://www.python.org/dev/peps/pep-0471/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;PEP 471\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Let me also recommend reading ShadowRanger\u0026apos;s comment below.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;Preliminary notes\u0026lt;/h2\u0026gt;\n\n\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Although there\u0026apos;s a clear differentiation between \u0026lt;em\u0026gt;file\u0026lt;/em\u0026gt; and \u0026lt;em\u0026gt;directory\u0026lt;/em\u0026gt; terms in the question text, some may argue that directories are actually special files\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;The statement: \u0026quot;\u0026lt;em\u0026gt;all files of a directory\u0026lt;/em\u0026gt;\u0026quot; can be interpreted in two ways:\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;All \u0026lt;strong\u0026gt;direct\u0026lt;/strong\u0026gt; (or level 1) descendants \u0026lt;strong\u0026gt;only\u0026lt;/strong\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;All descendants in the whole directory tree (including the ones in sub-directories)\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;When the question was asked, I imagine that \u0026lt;em\u0026gt;Python \u0026lt;strong\u0026gt;2\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt;, was the \u0026lt;em\u0026gt;LTS\u0026lt;/em\u0026gt; version, however the code samples will be run by \u0026lt;em\u0026gt;Python \u0026lt;strong\u0026gt;3\u0026lt;/strong\u0026gt;(\u0026lt;strong\u0026gt;.5\u0026lt;/strong\u0026gt;)\u0026lt;/em\u0026gt; (I\u0026apos;ll keep them as \u0026lt;em\u0026gt;Python 2\u0026lt;/em\u0026gt; compliant as possible; also, any code belonging to \u0026lt;em\u0026gt;Python\u0026lt;/em\u0026gt; that I\u0026apos;m going to post, is from \u0026lt;strong\u0026gt;v3.5.4\u0026lt;/strong\u0026gt; - unless otherwise specified). That has consequences related to another keyword in the question: \u0026quot;\u0026lt;em\u0026gt;add them into a \u0026lt;strong\u0026gt;list\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt;\u0026quot;:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;In pre \u0026lt;em\u0026gt;Python 2.2\u0026lt;/em\u0026gt; versions, sequences (iterables) were mostly represented by lists (tuples, sets, ...)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;In \u0026lt;em\u0026gt;Python 2.2\u0026lt;/em\u0026gt;, the concept of \u0026lt;strong\u0026gt;generator\u0026lt;/strong\u0026gt; (\u0026lt;a href=\u0026quot;https://wiki.python.org/moin/Generators\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[Python.Wiki]: Generators\u0026lt;/a\u0026gt;) - courtesy of \u0026lt;a href=\u0026quot;https://docs.python.org/3/reference/simple_stmts.html#the-yield-statement\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[Python 3]: The yield statement\u0026lt;/a\u0026gt;) - was introduced. As time passed, generator counterparts started to appear for functions that returned/worked with lists\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;In \u0026lt;em\u0026gt;Python 3\u0026lt;/em\u0026gt;, generator is the default behavior\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Not sure if returning a list is still mandatory (or a generator would do as well), but passing a generator to the \u0026lt;em\u0026gt;list\u0026lt;/em\u0026gt; constructor, will create a list out of it (and also consume it). The example below illustrates the differences on \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/functions.html#map\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[Python 3]: \u0026lt;strong\u0026gt;map\u0026lt;/strong\u0026gt;(\u0026lt;em\u0026gt;function, iterable, ...\u0026lt;/em\u0026gt;)\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; sys\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;sys.version\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;2.7.10 (default, Mar  8 2016, 15:02:46) [MSC v.1600 64 bit (AMD64)]\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;m = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; x: x, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;])  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Just a dummy lambda function\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;m, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;(m)\n([\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;list\u0026apos;\u0026lt;/span\u0026gt;\u0026amp;gt;)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(m)\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; sys\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;sys.version\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;3.5.4 (v3.5.4:3f56838, Aug  8 2017, 02:17:05) [MSC v.1900 64 bit (AMD64)]\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;m = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; x: x, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;])\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;m, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;(m)\n(\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; at \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x000001B4257342B0\u0026lt;/span\u0026gt;\u0026amp;gt;, \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;map\u0026apos;\u0026lt;/span\u0026gt;\u0026amp;gt;)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(m)\nTraceback (most recent call last):\n  File \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;stdin\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;, line \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026amp;lt;module\u0026amp;gt;\nTypeError: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; of \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;map\u0026apos;\u0026lt;/span\u0026gt; has no \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;()\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;lm0 = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(m)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Build a list from the generator\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;lm0, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;(lm0)\n([\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;list\u0026apos;\u0026lt;/span\u0026gt;\u0026amp;gt;)\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;lm1 = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(m)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Build a list from the same generator\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;lm1, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;(lm1)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Empty list now - generator already consumed\u0026lt;/span\u0026gt;\n([], \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;list\u0026apos;\u0026lt;/span\u0026gt;\u0026amp;gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The examples will be based on a directory called \u0026lt;em\u0026gt;root_dir\u0026lt;/em\u0026gt; with the following structure (this example is for \u0026lt;em\u0026gt;Win\u0026lt;/em\u0026gt;, but I\u0026apos;m using the same tree on \u0026lt;em\u0026gt;Lnx\u0026lt;/em\u0026gt; as well):\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;E:\\Work\\Dev\\StackOverflow\\q003207219\u0026amp;gt;tree /f \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;root_dir\u0026quot;\u0026lt;/span\u0026gt;\nFolder PATH listing \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; volume Work\nVolume serial number \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; 00000029 \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3655\u0026lt;/span\u0026gt;:6FED\nE:\\WORK\\DEV\\STACKOVERFLOW\\Q003207219\\ROOT_DIR\n¦   file0\n¦   file1\n¦\n+---dir0\n¦   +---dir00\n¦   ¦   ¦   file000\n¦   ¦   ¦\n¦   ¦   +---dir000\n¦   ¦           file0000\n¦   ¦\n¦   +---dir01\n¦   ¦       file010\n¦   ¦       file011\n¦   ¦\n¦   +---dir02\n¦       +---dir020\n¦           +---dir0200\n+---dir1\n¦       file10\n¦       file11\n¦       file12\n¦\n+---dir2\n¦   ¦   file20\n¦   ¦\n¦   +---dir20\n¦           file200\n¦\n+---dir3\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;Solutions\u0026lt;/h2\u0026gt;\n\n\u0026lt;h3\u0026gt;Programmatic approaches:\u0026lt;/h3\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://docs.python.org/3/library/os.html#os.listdir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[Python 3]: os.\u0026lt;strong\u0026gt;listdir\u0026lt;/strong\u0026gt;(\u0026lt;em\u0026gt;path=\u0026apos;.\u0026apos;\u0026lt;/em\u0026gt;)\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Return a list containing the names of the entries in the directory given by path. The list is in arbitrary order, and does not include the special entries \u0026lt;code\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;\u0026apos;..\u0026apos;\u0026lt;/code\u0026gt; ...\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;root_dir\u0026quot;\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Path relative to current dir (os.getcwd())\u0026lt;/span\u0026gt;\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;os.listdir(root_dir)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# List all the items in root_dir\u0026lt;/span\u0026gt;\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir3\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.listdir(root_dir) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; os.path.isfile(os.path.join(root_dir, item))]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Filter items and only keep files (strip out directories)\u0026lt;/span\u0026gt;\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;A more elaborate example (\u0026lt;em\u0026gt;code_os_listdir.py\u0026lt;/em\u0026gt;):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; pprint \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; pformat\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_get_dir_content\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;path, include_folders, recursive\u0026lt;/span\u0026gt;):\n    entries = os.listdir(path)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; entry \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; entries:\n        entry_with_path = os.path.join(path, entry)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; os.path.isdir(entry_with_path):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; include_folders:\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; entry_with_path\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; recursive:\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; sub_entry \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; _get_dir_content(entry_with_path, include_folders, recursive):\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; sub_entry\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; entry_with_path\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get_dir_content\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;path, include_folders=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;, recursive=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;, prepend_folder_name=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    path_len = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(path) + \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(os.path.sep)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; _get_dir_content(path, include_folders, recursive):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; prepend_folder_name \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; item[path_len:]\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_get_dir_content_old\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;path, include_folders, recursive\u0026lt;/span\u0026gt;):\n    entries = os.listdir(path)\n    ret = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; entry \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; entries:\n        entry_with_path = os.path.join(path, entry)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; os.path.isdir(entry_with_path):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; include_folders:\n                ret.append(entry_with_path)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; recursive:\n                ret.extend(_get_dir_content_old(entry_with_path, include_folders, recursive))\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            ret.append(entry_with_path)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ret\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get_dir_content_old\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;path, include_folders=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;, recursive=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;, prepend_folder_name=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    path_len = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(path) + \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(os.path.sep)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; [item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; prepend_folder_name \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; item[path_len:] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; _get_dir_content_old(path, include_folders, recursive)]\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;():\n    root_dir = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;root_dir\u0026quot;\u0026lt;/span\u0026gt;\n    ret0 = get_dir_content(root_dir, include_folders=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;, recursive=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;, prepend_folder_name=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n    lret0 = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(ret0)\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(ret0, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(lret0), pformat(lret0))\n    ret1 = get_dir_content_old(root_dir, include_folders=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;, recursive=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;, prepend_folder_name=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(ret1), pformat(ret1))\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; __name__ == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;__main__\u0026quot;\u0026lt;/span\u0026gt;:\n    main()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Notes\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;There are two implementations:\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;One that uses generators (of course here it seems useless, since I immediately convert the result to a list)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;The classic one (function names ending in \u0026lt;strong\u0026gt;_old\u0026lt;/strong\u0026gt;)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Recursion is used (to get into subdirectories)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;For each implementation there are two functions:\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;One that starts with an \u0026lt;em\u0026gt;underscore\u0026lt;/em\u0026gt; (\u0026lt;strong\u0026gt;_\u0026lt;/strong\u0026gt;): \u0026quot;private\u0026quot; (should not be called directly) - that does all the work\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;The public one (wrapper over previous): it just strips off the initial path (if required) from the returned entries. It\u0026apos;s an ugly implementation, but it\u0026apos;s the only idea that I could come with at this point\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;In terms of performance, generators are generally a little bit faster (considering both \u0026lt;em\u0026gt;creation\u0026lt;/em\u0026gt; and  \u0026lt;em\u0026gt;iteration\u0026lt;/em\u0026gt; times), but I didn\u0026apos;t test them in recursive functions, and also I am iterating inside the function over inner generators - don\u0026apos;t know how performance friendly is that\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Play with the arguments to get different results\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Output\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;(py35x64_test) E:\\Work\\Dev\\StackOverflow\\q003207219\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;e:\\Work\\Dev\\VEnvs\\py35x64_test\\Scripts\\python.exe\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;code_os_listdir.py\u0026quot;\u0026lt;/span\u0026gt;\n\u0026amp;lt;generator \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; get_dir_content at \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x000001BDDBB3DF10\u0026lt;/span\u0026gt;\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22\u0026lt;/span\u0026gt; [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\\\\dir00\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\\\\dir00\\\\dir000\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\\\\dir00\\\\dir000\\\\file0000\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\\\\dir00\\\\file000\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\\\\dir01\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\\\\dir01\\\\file010\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\\\\dir01\\\\file011\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\\\\dir02\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\\\\dir02\\\\dir020\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\\\\dir02\\\\dir020\\\\dir0200\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir1\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir1\\\\file10\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir1\\\\file11\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir1\\\\file12\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir2\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir2\\\\dir20\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir2\\\\dir20\\\\file200\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir2\\\\file20\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir3\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\file0\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt; [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\\\\dir00\\\\dir000\\\\file0000\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\\\\dir00\\\\file000\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\\\\dir01\\\\file010\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\\\\dir01\\\\file011\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir1\\\\file10\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir1\\\\file11\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir1\\\\file12\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir2\\\\dir20\\\\file200\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir2\\\\file20\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file0\u0026apos;\u0026lt;/span\u0026gt;,\n \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ol start=\u0026quot;2\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://docs.python.org/3/library/os.html#os.scandir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[Python 3]: os.\u0026lt;strong\u0026gt;scandir\u0026lt;/strong\u0026gt;(\u0026lt;em\u0026gt;path=\u0026apos;.\u0026apos;\u0026lt;/em\u0026gt;)\u0026lt;/a\u0026gt; (\u0026lt;em\u0026gt;Python \u0026lt;strong\u0026gt;3.5\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt;+, backport: \u0026lt;a href=\u0026quot;https://pypi.org/project/scandir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[PyPI]: scandir\u0026lt;/a\u0026gt;)\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Return an iterator of \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/os.html#os.DirEntry\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;os.DirEntry\u0026lt;/a\u0026gt; objects corresponding to the entries in the directory given by \u0026lt;em\u0026gt;path\u0026lt;/em\u0026gt;. The entries are yielded in arbitrary order, and the special entries \u0026lt;code\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;\u0026apos;..\u0026apos;\u0026lt;/code\u0026gt; are not included.\u0026lt;/p\u0026gt;\n  \n  \u0026lt;p\u0026gt;Using \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/os.html#os.scandir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;scandir()\u0026lt;/a\u0026gt; instead of \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/os.html#os.listdir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;listdir()\u0026lt;/a\u0026gt; can significantly increase the performance of code that also needs file type or file attribute information, because \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/os.html#os.DirEntry\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;os.DirEntry\u0026lt;/a\u0026gt; objects expose this information if the operating system provides it when scanning a directory. All \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/os.html#os.DirEntry\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;os.DirEntry\u0026lt;/a\u0026gt; methods may perform a system call, but \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/os.html#os.DirEntry.is_dir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;is_dir()\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/os.html#os.DirEntry.is_file\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;is_file()\u0026lt;/a\u0026gt; usually only require a system call for symbolic links; \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/os.html#os.DirEntry.stat\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;os.DirEntry.stat()\u0026lt;/a\u0026gt; always requires a system call on Unix but only requires one for symbolic links on Windows.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir = os.path.join(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;root_dir\u0026quot;\u0026lt;/span\u0026gt;)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Explicitly prepending current directory\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\\\\root_dir\u0026apos;\u0026lt;/span\u0026gt;\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;scandir_iterator = os.scandir(root_dir)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;scandir_iterator\n\u0026amp;lt;nt.ScandirIterator \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; at \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x00000268CF4BC140\u0026lt;/span\u0026gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[item.path \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; scandir_iterator]\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\\\\root_dir\\\\dir0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\\\\root_dir\\\\dir1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\\\\root_dir\\\\dir2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\\\\root_dir\\\\dir3\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\\\\root_dir\\\\file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\\\\root_dir\\\\file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[item.path \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; scandir_iterator]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Will yield an empty list as it was consumed by previous iteration (automatically performed by the list comprehension)\u0026lt;/span\u0026gt;\n[]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;scandir_iterator = os.scandir(root_dir)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Reinitialize the generator\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; scandir_iterator :\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;... \u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; os.path.isfile(item.path):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;... \u0026lt;/span\u0026gt;            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(item.name)\n...\nfile0\nfile1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Notes\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;It\u0026apos;s similar to \u0026lt;code\u0026gt;os.listdir\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;But it\u0026apos;s also more flexible (and offers more functionality), more \u0026lt;em\u0026gt;Python\u0026lt;/em\u0026gt;ic (and in some cases, faster)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ol start=\u0026quot;3\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://docs.python.org/3/library/os.html#os.walk\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[Python 3]: os.\u0026lt;strong\u0026gt;walk\u0026lt;/strong\u0026gt;(\u0026lt;em\u0026gt;top, topdown=True, onerror=None, followlinks=False\u0026lt;/em\u0026gt;)\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Generate the file names in a directory tree by walking the tree either top-down or bottom-up. For each directory in the tree rooted at directory \u0026lt;em\u0026gt;top\u0026lt;/em\u0026gt; (including \u0026lt;em\u0026gt;top\u0026lt;/em\u0026gt; itself), it yields a 3-tuple (\u0026lt;code\u0026gt;dirpath\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;dirnames\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;filenames\u0026lt;/code\u0026gt;).\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir = os.path.join(os.getcwd(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;root_dir\u0026quot;\u0026lt;/span\u0026gt;)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Specify the full path\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\u0026apos;\u0026lt;/span\u0026gt;\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;walk_generator = os.walk(root_dir)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir_entry = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(walk_generator)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# First entry corresponds to the root dir (passed as an argument)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir_entry\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\u0026apos;\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir3\u0026apos;\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file1\u0026apos;\u0026lt;/span\u0026gt;])\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir_entry[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + root_dir_entry[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Display dirs and files (direct descendants) in a single list\u0026lt;/span\u0026gt;\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir3\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[os.path.join(root_dir_entry[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;], item) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; root_dir_entry[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + root_dir_entry[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Display all the entries in the previous list by their full path\u0026lt;/span\u0026gt;\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir3\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; entry \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; walk_generator:  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Display the rest of the elements (corresponding to every subdir)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;... \u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(entry)\n...\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\u0026apos;\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir00\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir01\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir02\u0026apos;\u0026lt;/span\u0026gt;], [])\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir00\u0026apos;\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir000\u0026apos;\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file000\u0026apos;\u0026lt;/span\u0026gt;])\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir00\\\\dir000\u0026apos;\u0026lt;/span\u0026gt;, [], [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file0000\u0026apos;\u0026lt;/span\u0026gt;])\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir01\u0026apos;\u0026lt;/span\u0026gt;, [], [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file010\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file011\u0026apos;\u0026lt;/span\u0026gt;])\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir02\u0026apos;\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir020\u0026apos;\u0026lt;/span\u0026gt;], [])\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir02\\\\dir020\u0026apos;\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0200\u0026apos;\u0026lt;/span\u0026gt;], [])\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir0\\\\dir02\\\\dir020\\\\dir0200\u0026apos;\u0026lt;/span\u0026gt;, [], [])\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir1\u0026apos;\u0026lt;/span\u0026gt;, [], [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file10\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file11\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file12\u0026apos;\u0026lt;/span\u0026gt;])\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir2\u0026apos;\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir20\u0026apos;\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file20\u0026apos;\u0026lt;/span\u0026gt;])\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir2\\\\dir20\u0026apos;\u0026lt;/span\u0026gt;, [], [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file200\u0026apos;\u0026lt;/span\u0026gt;])\n(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;E:\\\\Work\\\\Dev\\\\StackOverflow\\\\q003207219\\\\root_dir\\\\dir3\u0026apos;\u0026lt;/span\u0026gt;, [], [])\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Notes\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Under the scenes, it uses \u0026lt;code\u0026gt;os.scandir\u0026lt;/code\u0026gt; (\u0026lt;code\u0026gt;os.listdir\u0026lt;/code\u0026gt; on older versions)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;It does the heavy lifting by recurring in subfolders\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ol start=\u0026quot;4\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://docs.python.org/3/library/glob.html#glob.glob\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[Python 3]: glob.\u0026lt;strong\u0026gt;glob\u0026lt;/strong\u0026gt;(\u0026lt;em\u0026gt;pathname, *, recursive=False\u0026lt;/em\u0026gt;)\u0026lt;/a\u0026gt; (\u0026lt;a href=\u0026quot;https://docs.python.org/3/library/glob.html#glob.glob\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[Python 3]: glob.\u0026lt;strong\u0026gt;iglob\u0026lt;/strong\u0026gt;(\u0026lt;em\u0026gt;pathname, *, recursive=False\u0026lt;/em\u0026gt;)\u0026lt;/a\u0026gt;)\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Return a possibly-empty list of path names that match \u0026lt;em\u0026gt;pathname\u0026lt;/em\u0026gt;, which must be a string containing a path specification. \u0026lt;em\u0026gt;pathname\u0026lt;/em\u0026gt; can be either absolute (like \u0026lt;code\u0026gt;/usr/src/Python-1.5/Makefile\u0026lt;/code\u0026gt;) or relative (like \u0026lt;code\u0026gt;../../Tools/*/*.gif\u0026lt;/code\u0026gt;), and can contain shell-style wildcards. Broken symlinks are included in the results (as in the shell).\u0026lt;br\u0026gt;...\u0026lt;br\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;Changed in version 3.5\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt;: Support for recursive globs using \u0026lt;code\u0026gt;**\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; glob, os\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;wildcard_pattern = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir = os.path.join(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;root_dir\u0026quot;\u0026lt;/span\u0026gt;, wildcard_pattern)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Match every file/dir name\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\*\u0026apos;\u0026lt;/span\u0026gt;\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;glob_list = glob.glob(root_dir)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;glob_list\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\dir3\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[item.replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;root_dir\u0026quot;\u0026lt;/span\u0026gt; + os.path.sep, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; glob_list]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Strip the dir name and the path separator from begining\u0026lt;/span\u0026gt;\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir3\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; entry \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; glob.iglob(root_dir + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*\u0026quot;\u0026lt;/span\u0026gt;, recursive=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;):\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;... \u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(entry)\n...\nroot_dir\\\nroot_dir\\dir0\nroot_dir\\dir0\\dir00\nroot_dir\\dir0\\dir00\\dir000\nroot_dir\\dir0\\dir00\\dir000\\file0000\nroot_dir\\dir0\\dir00\\file000\nroot_dir\\dir0\\dir01\nroot_dir\\dir0\\dir01\\file010\nroot_dir\\dir0\\dir01\\file011\nroot_dir\\dir0\\dir02\nroot_dir\\dir0\\dir02\\dir020\nroot_dir\\dir0\\dir02\\dir020\\dir0200\nroot_dir\\dir1\nroot_dir\\dir1\\file10\nroot_dir\\dir1\\file11\nroot_dir\\dir1\\file12\nroot_dir\\dir2\nroot_dir\\dir2\\dir20\nroot_dir\\dir2\\dir20\\file200\nroot_dir\\dir2\\file20\nroot_dir\\dir3\nroot_dir\\file0\nroot_dir\\file1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Notes\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Uses \u0026lt;code\u0026gt;os.listdir\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;For large trees (especially if \u0026lt;em\u0026gt;recursive\u0026lt;/em\u0026gt; is on), \u0026lt;em\u0026gt;iglob\u0026lt;/em\u0026gt; is preferred\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Allows advanced filtering based on name (due to the wildcard)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ol start=\u0026quot;5\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://docs.python.org/3/library/pathlib.html#pathlib.Path\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[Python 3]: class pathlib.\u0026lt;strong\u0026gt;Path\u0026lt;/strong\u0026gt;(\u0026lt;em\u0026gt;*pathsegments\u0026lt;/em\u0026gt;)\u0026lt;/a\u0026gt; (\u0026lt;em\u0026gt;Python \u0026lt;strong\u0026gt;3.4\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt;+, backport: \u0026lt;a href=\u0026quot;https://pypi.org/project/pathlib2\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[PyPI]: pathlib2\u0026lt;/a\u0026gt;)\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; pathlib\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;root_dir\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir_instance = pathlib.Path(root_dir)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir_instance\nWindowsPath(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir_instance.name\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir_instance.is_dir()\n\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[item.name \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; root_dir_instance.glob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*\u0026quot;\u0026lt;/span\u0026gt;)]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Wildcard searching for all direct descendants\u0026lt;/span\u0026gt;\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir3\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[os.path.join(item.parent.name, item.name) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; root_dir_instance.glob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*\u0026quot;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; item.is_dir()]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Display paths (including parent) for files only\u0026lt;/span\u0026gt;\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Notes\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;This is \u0026lt;em\u0026gt;one\u0026lt;/em\u0026gt; way of achieving our goal\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;It\u0026apos;s the \u0026lt;em\u0026gt;OOP\u0026lt;/em\u0026gt; style of handling paths\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Offers lots of functionalities\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ol start=\u0026quot;6\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://docs.python.org/2/library/dircache.html#dircache.listdir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[Python 2]: dircache.listdir(path)\u0026lt;/a\u0026gt; (\u0026lt;em\u0026gt;Python \u0026lt;strong\u0026gt;2\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt; only)\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;But, according to \u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/2.7/Lib/dircache.py\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[GitHub]: python/cpython - (2.7) cpython/Lib/dircache.py\u0026lt;/a\u0026gt;, it\u0026apos;s just a (thin) wrapper over \u0026lt;code\u0026gt;os.listdir\u0026lt;/code\u0026gt; with caching\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;listdir\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;path\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;List directory contents, using cache.\u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n        cached_mtime, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt; = cache[path]\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;del\u0026lt;/span\u0026gt; cache[path]\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; KeyError:\n        cached_mtime, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt; = -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, []\n    mtime = os.stat(path).st_mtime\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; mtime != cached_mtime:\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt; = os.listdir(path)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;.sort()\n    cache[path] = mtime, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ol start=\u0026quot;7\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://man7.org/linux/man-pages/man3/opendir.3.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[man7]: OPENDIR(3)\u0026lt;/a\u0026gt; / \u0026lt;a href=\u0026quot;http://man7.org/linux/man-pages/man3/readdir.3.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[man7]: READDIR(3)\u0026lt;/a\u0026gt; / \u0026lt;a href=\u0026quot;http://man7.org/linux/man-pages/man3/closedir.3.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[man7]: CLOSEDIR(3)\u0026lt;/a\u0026gt; via \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/ctypes.html#module-ctypes\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[Python 3]: ctypes - A foreign function library for Python\u0026lt;/a\u0026gt; (\u0026lt;em\u0026gt;POSIX\u0026lt;/em\u0026gt; specific)\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://docs.python.org/3/library/ctypes.html#module-ctypes\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;ctypes\u0026lt;/a\u0026gt; is a foreign function library for Python. It provides C compatible data types, and allows calling functions in DLLs or shared libraries. It can be used to wrap these libraries in pure Python.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;code_ctypes.py\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#!/usr/bin/env python3\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; sys\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; ctypes \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; Structure, \\\n    c_ulonglong, c_longlong, c_ushort, c_ubyte, c_char, c_int, \\\n    CDLL, POINTER, \\\n    create_string_buffer, get_errno, set_errno, cast\n\n\nDT_DIR = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\nDT_REG = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\n\nchar256 = c_char * \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;256\u0026lt;/span\u0026gt;\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;LinuxDirent64\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;Structure\u0026lt;/span\u0026gt;):\n    _fields_ = [\n        (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;d_ino\u0026quot;\u0026lt;/span\u0026gt;, c_ulonglong),\n        (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;d_off\u0026quot;\u0026lt;/span\u0026gt;, c_longlong),\n        (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;d_reclen\u0026quot;\u0026lt;/span\u0026gt;, c_ushort),\n        (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;d_type\u0026quot;\u0026lt;/span\u0026gt;, c_ubyte),\n        (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;d_name\u0026quot;\u0026lt;/span\u0026gt;, char256),\n    ]\n\nLinuxDirent64Ptr = POINTER(LinuxDirent64)\n\nlibc_dll = this_process = CDLL(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, use_errno=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# ALWAYS set argtypes and restype for functions, otherwise it\u0026apos;s UB!!!\u0026lt;/span\u0026gt;\nopendir = libc_dll.opendir\nreaddir = libc_dll.readdir\nclosedir = libc_dll.closedir\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get_dir_content\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;path\u0026lt;/span\u0026gt;):\n    ret = [path, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(), \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;()]\n    dir_stream = opendir(create_string_buffer(path.encode()))\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (dir_stream == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;opendir returned NULL (errno: {:d})\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(get_errno()))\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ret\n    set_errno(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\n    dirent_addr = readdir(dir_stream)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; dirent_addr:\n        dirent_ptr = cast(dirent_addr, LinuxDirent64Ptr)\n        dirent = dirent_ptr.contents\n        name = dirent.d_name.decode()\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; dirent.d_type \u0026amp;amp; DT_DIR:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; name \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;..\u0026quot;\u0026lt;/span\u0026gt;):\n                ret[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;].append(name)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;elif\u0026lt;/span\u0026gt; dirent.d_type \u0026amp;amp; DT_REG:\n            ret[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;].append(name)\n        dirent_addr = readdir(dir_stream)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; get_errno():\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;readdir returned NULL (errno: {:d})\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(get_errno()))\n    closedir(dir_stream)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ret\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;{:s} on {:s}\\n\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(sys.version, sys.platform))\n    root_dir = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;root_dir\u0026quot;\u0026lt;/span\u0026gt;\n    entries = get_dir_content(root_dir)\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(entries)\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; __name__ == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;__main__\u0026quot;\u0026lt;/span\u0026gt;:\n    main()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Notes\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;It loads the three functions from \u0026lt;em\u0026gt;libc\u0026lt;/em\u0026gt; (loaded in the current process) and calls them (for more details check \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/82831/how-do-i-check-whether-a-file-exists-using-python/44661513#44661513\u0026quot;\u0026gt;[SO]: How do I check whether a file exists without exceptions? (@CristiFati\u0026apos;s answer)\u0026lt;/a\u0026gt; - last notes from item \u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;#4.\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt;). That would place this approach very close to the \u0026lt;em\u0026gt;Python\u0026lt;/em\u0026gt; / \u0026lt;em\u0026gt;C\u0026lt;/em\u0026gt; edge\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;em\u0026gt;LinuxDirent64\u0026lt;/em\u0026gt; is the \u0026lt;em\u0026gt;ctypes\u0026lt;/em\u0026gt; representation of \u0026lt;em\u0026gt;struct dirent64\u0026lt;/em\u0026gt; from \u0026lt;a href=\u0026quot;http://man7.org/linux/man-pages/man0/dirent.h.0p.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[man7]: dirent.h(0P)\u0026lt;/a\u0026gt; (so are the \u0026lt;em\u0026gt;DT_\u0026lt;/em\u0026gt; constants) from my machine: \u0026lt;em\u0026gt;Ubtu 16 x64\u0026lt;/em\u0026gt; (\u0026lt;em\u0026gt;4.10.0-40-generic\u0026lt;/em\u0026gt; and \u0026lt;em\u0026gt;libc6-dev:amd64\u0026lt;/em\u0026gt;). On other flavors/versions, the struct definition might differ, and if so, the \u0026lt;em\u0026gt;ctypes\u0026lt;/em\u0026gt; alias should be updated, otherwise it will yield \u0026lt;strong\u0026gt;Undefined Behavior\u0026lt;/strong\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;It returns data in the \u0026lt;code\u0026gt;os.walk\u0026lt;/code\u0026gt;\u0026apos;s format. I didn\u0026apos;t bother to make it recursive, but starting from the existing code, that would be a fairly trivial task\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Everything is doable on \u0026lt;em\u0026gt;Win\u0026lt;/em\u0026gt; as well, the data (libraries, functions, structs, constants, ...) differ\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Output\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;[cfati@cfati-ubtu16x64-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:~/Work/Dev/StackOverflow/q003207219]\u0026amp;gt; ./code_ctypes.py\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;.2\u0026lt;/span\u0026gt; (default, Nov \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2018\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;43\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;)\n[GCC \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.4\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;.0\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20160609\u0026lt;/span\u0026gt;] on linux\n\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\u0026apos;\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir3\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\u0026apos;\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file0\u0026apos;\u0026lt;/span\u0026gt;]]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ol start=\u0026quot;8\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://docs.activestate.com/activepython/3.1/pywin32/win32file__FindFilesW_meth.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[ActiveState.Docs]: win32file.FindFilesW\u0026lt;/a\u0026gt; (\u0026lt;em\u0026gt;Win\u0026lt;/em\u0026gt; specific)\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Retrieves a list of matching filenames, using the Windows Unicode API. An interface to the API FindFirstFileW/FindNextFileW/Find close functions.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os, win32file, win32con\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;root_dir\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;wildcard = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;root_dir_wildcard = os.path.join(root_dir, wildcard)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;entry_list = win32file.FindFilesW(root_dir_wildcard)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(entry_list)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Don\u0026apos;t display the whole content as it\u0026apos;s too long\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[entry[-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; entry \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; entry_list]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Only display the entry names\u0026lt;/span\u0026gt;\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;..\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir3\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[entry[-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; entry \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; entry_list \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; entry[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] \u0026amp;amp; win32con.FILE_ATTRIBUTE_DIRECTORY \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; entry[-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;..\u0026quot;\u0026lt;/span\u0026gt;)]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Filter entries and only display dir names (except self and parent)\u0026lt;/span\u0026gt;\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dir3\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;[os.path.join(root_dir, entry[-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; entry \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; entry_list \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; entry[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] \u0026amp;amp; (win32con.FILE_ATTRIBUTE_NORMAL | win32con.FILE_ATTRIBUTE_ARCHIVE)]  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Only display file \u0026quot;full\u0026quot; names\u0026lt;/span\u0026gt;\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\file0\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root_dir\\\\file1\u0026apos;\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Notes\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;win32file.FindFilesW\u0026lt;/code\u0026gt; is part of \u0026lt;a href=\u0026quot;https://github.com/mhammond/pywin32\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[GitHub]: mhammond/pywin32 - Python for Windows (pywin32) Extensions\u0026lt;/a\u0026gt;, which is a \u0026lt;em\u0026gt;Python\u0026lt;/em\u0026gt; wrapper over \u0026lt;em\u0026gt;WINAPI\u0026lt;/em\u0026gt;s\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;The documentation link is from \u0026lt;a href=\u0026quot;https://www.activestate.com\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;ActiveState\u0026lt;/a\u0026gt;, as I didn\u0026apos;t find any \u0026lt;em\u0026gt;PyWin32\u0026lt;/em\u0026gt; official documentation\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ol start=\u0026quot;9\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;Install some (other) third-party package that does the trick\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Most likely, will rely on one (or more) of the above (maybe with slight customizations)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Notes\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Code is meant to be portable (except places that target a specific area - which are marked) or cross:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;platform (\u0026lt;em\u0026gt;Nix\u0026lt;/em\u0026gt;, \u0026lt;em\u0026gt;Win\u0026lt;/em\u0026gt;, )\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;em\u0026gt;Python\u0026lt;/em\u0026gt; version (2, 3, )\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Multiple path styles (absolute, relatives) were used across the above variants, to illustrate the fact that the \u0026quot;tools\u0026quot; used are flexible in this direction\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;os.listdir\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;os.scandir\u0026lt;/code\u0026gt; use \u0026lt;em\u0026gt;opendir\u0026lt;/em\u0026gt; / \u0026lt;em\u0026gt;readdir\u0026lt;/em\u0026gt; / \u0026lt;em\u0026gt;closedir\u0026lt;/em\u0026gt; (\u0026lt;a href=\u0026quot;https://docs.microsoft.com/en-gb/windows/desktop/api/fileapi/nf-fileapi-findfirstfilew\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[MS.Docs]: FindFirstFileW function\u0026lt;/a\u0026gt; / \u0026lt;a href=\u0026quot;https://docs.microsoft.com/en-gb/windows/desktop/api/fileapi/nf-fileapi-findnextfilew\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[MS.Docs]: FindNextFileW function\u0026lt;/a\u0026gt; / \u0026lt;a href=\u0026quot;https://docs.microsoft.com/en-gb/windows/desktop/api/fileapi/nf-fileapi-findclose\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[MS.Docs]: FindClose function\u0026lt;/a\u0026gt;) (via \u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/master/Modules/posixmodule.c\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[GitHub]: python/cpython - (master) cpython/Modules/posixmodule.c\u0026lt;/a\u0026gt;)\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;win32file.FindFilesW\u0026lt;/code\u0026gt; uses those (\u0026lt;em\u0026gt;Win\u0026lt;/em\u0026gt; specific) functions as well (via \u0026lt;a href=\u0026quot;https://github.com/mhammond/pywin32/blob/master/win32/src/win32file.i\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;[GitHub]: mhammond/pywin32 - (master) pywin32/win32/src/win32file.i\u0026lt;/a\u0026gt;)\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;_get_dir_content\u0026lt;/em\u0026gt; (from point \u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;#1.\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt;) can be implemented using any of these approaches (some will require more work and some less)\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Some advanced filtering (instead of just file \u0026lt;em\u0026gt;vs.\u0026lt;/em\u0026gt; dir) could be done: e.g. the \u0026lt;em\u0026gt;include_folders\u0026lt;/em\u0026gt; argument could be replaced by another one (e.g. \u0026lt;em\u0026gt;filter_func\u0026lt;/em\u0026gt;) which would be a function that takes a path as an argument: \u0026lt;code\u0026gt;filter_func=lambda x: True\u0026lt;/code\u0026gt; (this doesn\u0026apos;t strip out anything) and inside \u0026lt;em\u0026gt;_get_dir_content\u0026lt;/em\u0026gt; something like: \u0026lt;code\u0026gt;if not filter_func(entry_with_path): continue\u0026lt;/code\u0026gt; (if the function fails for one entry, it will be skipped), but the more complex the code becomes, the longer it will take to execute\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Nota bene!\u0026lt;/strong\u0026gt; Since recursion is used, I must mention that I did some tests on my laptop (\u0026lt;em\u0026gt;Win 10 x64\u0026lt;/em\u0026gt;), totally unrelated to this problem, and when the recursion level was reaching values somewhere in the \u0026lt;em\u0026gt;(990 .. 1000)\u0026lt;/em\u0026gt; range (\u0026lt;em\u0026gt;recursionlimit\u0026lt;/em\u0026gt; - 1000 (default)), I got \u0026lt;em\u0026gt;StackOverflow\u0026lt;/em\u0026gt; :). If the directory tree exceeds that limit (I am not an \u0026lt;em\u0026gt;FS\u0026lt;/em\u0026gt; expert, so I don\u0026apos;t know if that is even possible), that could be a problem. \u0026lt;br\u0026gt;\nI must also mention that I didn\u0026apos;t try to increase \u0026lt;em\u0026gt;recursionlimit\u0026lt;/em\u0026gt; because I have no experience in the area (how much can I increase it before having to also increase the stack at \u0026lt;em\u0026gt;OS\u0026lt;/em\u0026gt; level), but in theory there will always be the possibility for failure, if the dir depth is larger than the highest possible \u0026lt;em\u0026gt;recursionlimit\u0026lt;/em\u0026gt; (on that machine)\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The code samples are for demonstrative purposes only. That means that I didn\u0026apos;t take into account error handling (I don\u0026apos;t think there\u0026apos;s any \u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;try\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt; / \u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;except\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt; / \u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;else\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt; / \u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;finally\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt; block), so the code is not robust (the reason is: to keep it as simple and short as possible). For \u0026lt;em\u0026gt;production\u0026lt;/em\u0026gt;, error handling should be added as well\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h3\u0026gt;Other approaches:\u0026lt;/h3\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Use \u0026lt;em\u0026gt;Python\u0026lt;/em\u0026gt; only as a wrapper\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Everything is done using another technology\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;That technology is invoked from \u0026lt;em\u0026gt;Python\u0026lt;/em\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The most famous flavor that I know is what I call the \u0026lt;em\u0026gt;system administrator\u0026lt;/em\u0026gt; approach:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Use \u0026lt;em\u0026gt;Python\u0026lt;/em\u0026gt; (or any programming language for that matter) in order to execute \u0026lt;em\u0026gt;shell\u0026lt;/em\u0026gt; commands (and parse their outputs)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Some consider this a neat hack\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;I consider it more like a lame workaround (\u0026lt;em\u0026gt;gainarie\u0026lt;/em\u0026gt;), as the action per se is performed from \u0026lt;em\u0026gt;shell\u0026lt;/em\u0026gt; (\u0026lt;em\u0026gt;cmd\u0026lt;/em\u0026gt; in this case), and thus doesn\u0026apos;t have anything to do with \u0026lt;em\u0026gt;Python\u0026lt;/em\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Filtering (\u0026lt;code\u0026gt;grep\u0026lt;/code\u0026gt; / \u0026lt;code\u0026gt;findstr\u0026lt;/code\u0026gt;) or output formatting could be done on both sides, but I\u0026apos;m not going to insist on it. Also, I deliberately used \u0026lt;code\u0026gt;os.system\u0026lt;/code\u0026gt; instead of \u0026lt;code\u0026gt;subprocess.Popen\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;(py35x64_test) E:\\Work\\Dev\\StackOverflow\\q003207219\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;e:\\Work\\Dev\\VEnvs\\py35x64_test\\Scripts\\python.exe\u0026quot;\u0026lt;/span\u0026gt; -c \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;import os;os.system(\\\u0026quot;dir /b root_dir\\\u0026quot;)\u0026quot;\u0026lt;/span\u0026gt;\ndir0\ndir1\ndir2\ndir3\nfile0\nfile1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;In general this approach is to be avoided, since if some command output format slightly differs between \u0026lt;em\u0026gt;OS\u0026lt;/em\u0026gt; versions/flavors, the parsing code should be adapted as well; not to mention differences between locales).\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I really liked \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/3215392/901641\u0026quot;\u0026gt;adamk\u0026apos;s answer\u0026lt;/a\u0026gt;, suggesting that you use \u0026lt;code\u0026gt;glob()\u0026lt;/code\u0026gt;, from the module of the same name. This allows you to have pattern matching with \u0026lt;code\u0026gt;*\u0026lt;/code\u0026gt;s.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;But as other people pointed out in the comments, \u0026lt;code\u0026gt;glob()\u0026lt;/code\u0026gt; can get tripped up over inconsistent slash directions. To help with that, I suggest you use the \u0026lt;code\u0026gt;join()\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;expanduser()\u0026lt;/code\u0026gt; functions in the \u0026lt;code\u0026gt;os.path\u0026lt;/code\u0026gt; module, and perhaps the \u0026lt;code\u0026gt;getcwd()\u0026lt;/code\u0026gt; function in the \u0026lt;code\u0026gt;os\u0026lt;/code\u0026gt; module, as well.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;As examples:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; glob \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; glob\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Return everything under C:\\Users\\admin that contains a folder called wlp.\u0026lt;/span\u0026gt;\nglob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;C:\\Users\\admin\\*\\wlp\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The above is terrible - the path has been hardcoded and will only ever work on Windows between the drive name and the \u0026lt;code\u0026gt;\\\u0026lt;/code\u0026gt;s being hardcoded into the path.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; glob    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; glob\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; os.path \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; join\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Return everything under Users, admin, that contains a folder called wlp.\u0026lt;/span\u0026gt;\nglob(join(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Users\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;admin\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;*\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;wlp\u0026apos;\u0026lt;/span\u0026gt;))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The above works better, but it relies on the folder name \u0026lt;code\u0026gt;Users\u0026lt;/code\u0026gt; which is often found on Windows and not so often found on other OSs. It also relies on the user having a specific name, \u0026lt;code\u0026gt;admin\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; glob    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; glob\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; os.path \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; expanduser, join\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Return everything under the user directory that contains a folder called wlp.\u0026lt;/span\u0026gt;\nglob(join(expanduser(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;~\u0026apos;\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;*\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;wlp\u0026apos;\u0026lt;/span\u0026gt;))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This works perfectly across all platforms.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Another great example that works perfectly across platforms and does something a bit different:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; glob    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; glob\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; os      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; getcwd\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; os.path \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; join\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Return everything under the current directory that contains a folder called wlp.\u0026lt;/span\u0026gt;\nglob(join(getcwd(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;*\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;wlp\u0026apos;\u0026lt;/span\u0026gt;))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Hope these examples help you see the power of a few of the functions you can find in the standard Python library modules.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;list_files\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;path\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# returns a list of names (with extension, without full path) of all files \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# in folder path\u0026lt;/span\u0026gt;\n    files = []\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; name \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.listdir(path):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; os.path.isfile(os.path.join(path, name)):\n            files.append(name)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; files \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are looking for a Python implementation of \u0026lt;strong\u0026gt;find\u0026lt;/strong\u0026gt;, this is a recipe I use rather frequently:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; findtools.find_files \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; (find_files, Match)\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Recursively find all *.sh files in **/usr/bin**\u0026lt;/span\u0026gt;\nsh_files_pattern = Match(filetype=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;f\u0026apos;\u0026lt;/span\u0026gt;, name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;*.sh\u0026apos;\u0026lt;/span\u0026gt;)\nfound_files = find_files(path=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/usr/bin\u0026apos;\u0026lt;/span\u0026gt;, match=sh_files_pattern)\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; found_file \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; found_files:\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; found_file\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So I made a PyPI \u0026lt;a href=\u0026quot;https://pypi.python.org/pypi/findtools/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;package\u0026lt;/a\u0026gt; out of it and there is also a \u0026lt;a href=\u0026quot;https://github.com/ewiger/findtools\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;GitHub repository\u0026lt;/a\u0026gt;. I hope that someone finds it potentially useful for this code.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For greater results, you can use \u0026lt;code\u0026gt;listdir()\u0026lt;/code\u0026gt; method of the \u0026lt;code\u0026gt;os\u0026lt;/code\u0026gt; module along with a generator (a generator is a powerful iterator that keeps its state, remember?). The following code works fine with both versions: Python 2 and Python 3.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here\u0026apos;s a code:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;files\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;path\u0026lt;/span\u0026gt;):  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; file \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.listdir(path):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; os.path.isfile(os.path.join(path, file)):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; file\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; file \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; files(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.\u0026quot;\u0026lt;/span\u0026gt;):  \n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; (file)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;listdir()\u0026lt;/code\u0026gt; method returns the list of entries for the given directory. The method \u0026lt;code\u0026gt;os.path.isfile()\u0026lt;/code\u0026gt; returns \u0026lt;code\u0026gt;True\u0026lt;/code\u0026gt; if the given entry is a file. And the \u0026lt;code\u0026gt;yield\u0026lt;/code\u0026gt; operator quits the func but keeps its current state, and it returns only the name of the entry detected as a file. All the above allows us to loop over the generator function.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Returning a list of absolute filepaths, does not recurse into subdirectories\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;L = [os.path.join(os.getcwd(),f) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.listdir(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; os.path.isfile(os.path.join(os.getcwd(),f))]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;A wise teacher told me once that:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;When there are several established ways to do something, none of them is good for all cases.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;I will thus add a solution for a \u0026lt;strong\u0026gt;subset\u0026lt;/strong\u0026gt; of the problem: quite often, we only want to check whether a file matches a start string and an end string, without going into subdirectories. We would thus like a function that returns a list of filenames, like:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;filenames = dir_filter(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;foo/baz\u0026apos;\u0026lt;/span\u0026gt;, radical=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;radical\u0026apos;\u0026lt;/span\u0026gt;, extension=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.txt\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If you care to first declare two functions, this can be done:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;file_filter\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;filename, radical=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;, extension=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Check if a filename matches a radical and extension\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; filename:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\n    filename = filename.strip()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;(filename.startswith(radical) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; filename.endswith(extension))\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;dir_filter\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;dirname=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;, radical=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;, extension=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Filter filenames in directory according to radical and extension\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; dirname:\n        dirname = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; [filename \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; filename \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.listdir(dirname)\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; file_filter(filename, radical, extension)]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This solution could be easily generalized with regular expressions (and you might want to add a \u0026lt;code\u0026gt;pattern\u0026lt;/code\u0026gt; argument, if you do not want your patterns to always stick to the start or end of the filename).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os.path\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get_files\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;target_dir\u0026lt;/span\u0026gt;):\n    item_list = os.listdir(target_dir)\n\n    file_list = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; item_list:\n        item_dir = os.path.join(target_dir,item)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; os.path.isdir(item_dir):\n            file_list += get_files(item_dir)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            file_list.append(item_dir)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; file_list\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Here I use a recursive structure.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Using generators\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get_files\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;search_path\u0026lt;/span\u0026gt;):\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (dirpath, _, filenames) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; os.walk(search_path):\n         \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; filename \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; filenames:\n             \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; os.path.join(dirpath, filename)\nlist_files = get_files(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; filename \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; list_files:\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(filename)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Another very readable variant for Python 3.4+ is using pathlib.Path.glob:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; pathlib \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; Path\nfolder = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/foo\u0026apos;\u0026lt;/span\u0026gt;\n[f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; Path(folder).glob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;*\u0026apos;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; f.is_file()]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It is simple to make more specific, e.g. only look for Python source files which are not symbolic links, also in all subdirectories:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;[f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; Path(folder).glob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;**/*.py\u0026apos;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; f.is_symlink()]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For Python 2:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;pip install rglob\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then do\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; rglob\nfile_list = rglob.rglob(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/home/base/dir/\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; file_list\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here\u0026apos;s my general-purpose function for this.  It returns a list of file paths rather than filenames since I found that to be more useful.  It has a few optional arguments that make it versatile.  For instance, I often use it with arguments like \u0026lt;code\u0026gt;pattern=\u0026apos;*.txt\u0026apos;\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;subfolders=True\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; os\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; fnmatch\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;list_paths\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;folder=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;, pattern=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;*\u0026apos;\u0026lt;/span\u0026gt;, case_sensitive=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;, subfolders=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;Return a list of the file paths matching the pattern in the specified \n    folder, optionally including files inside subfolders.\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    match = fnmatch.fnmatchcase \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; case_sensitive \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; fnmatch.fnmatch\n    walked = os.walk(folder) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; subfolders \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; [\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(os.walk(folder))]\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; [os.path.join(root, f)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; root, dirnames, filenames \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; walked\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; filenames \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; match(f, pattern)]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I will provide a sample one liner where sourcepath and file type can be provided as input. The code returns a list of filenames with csv extension. Use \u0026lt;em\u0026gt;.\u0026lt;/em\u0026gt; in case all files needs to be returned. This will also recursively scans the subdirectories. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;[y for x in os.walk(sourcePath) for y in glob(os.path.join(x[0], \u0026apos;*.csv\u0026apos;))]\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Modify file extensions and source path as needed. \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;http://docs.python.org/release/2.6.7/library/dircache.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;dircache\u0026lt;/a\u0026gt; is  \u0026quot;Deprecated since version 2.6: The dircache module has been removed in Python 3.0.\u0026quot;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; dircache\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt; = dircache.listdir(pathname)\ni = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\ncheck = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])\ntemp = []\ncount = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; count != \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;[i]) != check:\n     temp.append(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;[i-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])\n     check = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;[i])\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n    i = i + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n    count = count - \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; temp\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":535,"title":"How do I list all files of a directory?","content":"\n                    \u0026lt;div\u0026gt;\n            \u0026lt;aside class=\u0026quot;s-notice s-notice__info post-notice js-post-notice mb16\u0026quot; role=\u0026quot;status\u0026quot;\u0026gt;\n        \u0026lt;div class=\u0026quot;d-flex fd-column fw-nowrap\u0026quot;\u0026gt;\n            \u0026lt;div class=\u0026quot;d-flex fw-nowrap\u0026quot;\u0026gt;\n                    \u0026lt;div class=\u0026quot;flex--item mr8\u0026quot;\u0026gt;\n                        \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;svg-icon iconLock\u0026quot; width=\u0026quot;18\u0026quot; height=\u0026quot;18\u0026quot; viewBox=\u0026quot;0 0 18 18\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;M16 9a2 2 0 0 0-2-2V6A5 5 0 0 0 4 6v1a2 2 0 0 0-2 2v6c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9Zm-7 5a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm3.1-7H5.9V6a3.1 3.1 0 0 1 6.2 0v1Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                    \u0026lt;/div\u0026gt;\n                \u0026lt;div class=\u0026quot;flex--item wmn0 fl1 lh-lg\u0026quot;\u0026gt;\n                    \u0026lt;div class=\u0026quot;flex--item fl1 lh-lg\u0026quot;\u0026gt;\n                        \u0026lt;b\u0026gt;This question\u0026apos;s answers are a \u0026lt;a href=\u0026quot;/help/privileges/edit-community-wiki\u0026quot;\u0026gt;community effort\u0026lt;/a\u0026gt;\u0026lt;/b\u0026gt;. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \u0026lt;/div\u0026gt;\n                \u0026lt;/div\u0026gt;\n            \u0026lt;/div\u0026gt;\n        \u0026lt;/div\u0026gt;\n\u0026lt;/aside\u0026gt;\n\n    \u0026lt;/div\u0026gt;\n\n\u0026lt;p\u0026gt;How can I list all files of a directory in Python and add them to a \u0026lt;code\u0026gt;list\u0026lt;/code\u0026gt;?\u0026lt;/p\u0026gt;\n    ","slug":"how-do-i-list-all-files-of-a-directory-1657388340404","postType":"QUESTION","createdAt":"2022-07-09T17:39:00.000Z","updatedAt":"2022-07-09T17:39:00.000Z","tags":[{"id":2622,"name":"directory","slug":"directory","createdAt":"2022-07-09T17:39:00.000Z","updatedAt":"2022-07-09T17:39:00.000Z","Questions_Tags":{"questionId":535,"tagId":2622}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-do-i-list-all-files-of-a-directory-1657388340404"},"buildId":"d4czOeg3MGPNUI9SipfjN","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>