<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/9fb80f4eb9e2d3c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9fb80f4eb9e2d3c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/471-84c36aa98dd4107c.js" defer=""></script><script src="/_next/static/chunks/81-bf26e92d2540e305.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-76d2c3e2d98bb08b.js" defer=""></script><script src="/_next/static/9SrIo1zGFc3tF1E8on9-4/_buildManifest.js" defer=""></script><script src="/_next/static/9SrIo1zGFc3tF1E8on9-4/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.eZIPKL code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-c4b0431a-0"]{content:"eZIPKL,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo.svg" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/aggregate-summarize-multiple-variables-per-group-(e.g.-sum-mean)-1657387764061#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-c4b0431a-0 eZIPKL flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/aggregate-summarize-multiple-variables-per-group-(e.g.-sum-mean)-1657387764061">Aggregate / summarize multiple variables per group (e.g. sum, mean)</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/data.table">data.table</a></div></div><div class="question-content mt-5">
                
<p>From a data frame, is there a easy way to aggregate (<code>sum</code>, <code>mean</code>, <code>max</code> et c) multiple variables simultaneously?</p>
<p>Below are some sample data:</p>
<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>lubridate<span class="hljs-punctuation">)</span>
days <span class="hljs-operator">=</span> <span class="hljs-number">365</span><span class="hljs-operator">*</span><span class="hljs-number">2</span>
date <span class="hljs-operator">=</span> seq<span class="hljs-punctuation">(</span>as.Date<span class="hljs-punctuation">(</span><span class="hljs-string">"2000-01-01"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">length</span> <span class="hljs-operator">=</span> days<span class="hljs-punctuation">,</span> by <span class="hljs-operator">=</span> <span class="hljs-string">"day"</span><span class="hljs-punctuation">)</span>
year <span class="hljs-operator">=</span> year<span class="hljs-punctuation">(</span>date<span class="hljs-punctuation">)</span>
month <span class="hljs-operator">=</span> month<span class="hljs-punctuation">(</span>date<span class="hljs-punctuation">)</span>
x1 <span class="hljs-operator">=</span> <span class="hljs-built_in">cumsum</span><span class="hljs-punctuation">(</span>rnorm<span class="hljs-punctuation">(</span>days<span class="hljs-punctuation">,</span> <span class="hljs-number">0.05</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> 
x2 <span class="hljs-operator">=</span> <span class="hljs-built_in">cumsum</span><span class="hljs-punctuation">(</span>rnorm<span class="hljs-punctuation">(</span>days<span class="hljs-punctuation">,</span> <span class="hljs-number">0.05</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
df1 <span class="hljs-operator">=</span> data.frame<span class="hljs-punctuation">(</span>date<span class="hljs-punctuation">,</span> year<span class="hljs-punctuation">,</span> month<span class="hljs-punctuation">,</span> x1<span class="hljs-punctuation">,</span> x2<span class="hljs-punctuation">)</span>
</code></pre>
<p>I would like to simultaneously aggregate the <code>x1</code> and <code>x2</code> variables from the <code>df2</code> data frame by year and month.  The following code aggregates the <code>x1</code> variable, but is it also possible to simultaneously aggregate the <code>x2</code> variable?</p>
<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-comment">### aggregate variables by year month</span>
df2<span class="hljs-operator">=</span>aggregate<span class="hljs-punctuation">(</span>x1 <span class="hljs-operator">~</span> year<span class="hljs-operator">+</span>month<span class="hljs-punctuation">,</span> data<span class="hljs-operator">=</span>df1<span class="hljs-punctuation">,</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">,</span> na.rm<span class="hljs-operator">=</span><span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span>
head<span class="hljs-punctuation">(</span>df2<span class="hljs-punctuation">)</span>
</code></pre>
    </div></div></div><div class="sc-c4b0431a-2 cRqwQe"><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Yes, in your <code>formula</code>, you can <code>cbind</code> the numeric variables to be aggregated:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">aggregate<span class="hljs-punctuation">(</span>cbind<span class="hljs-punctuation">(</span>x1<span class="hljs-punctuation">,</span> x2<span class="hljs-punctuation">)</span> <span class="hljs-operator">~</span> year <span class="hljs-operator">+</span> month<span class="hljs-punctuation">,</span> data <span class="hljs-operator">=</span> df1<span class="hljs-punctuation">,</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">,</span> na.rm <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span>
   year month         x1          x2
<span class="hljs-number">1</span>  <span class="hljs-number">2000</span>     <span class="hljs-number">1</span>   <span class="hljs-number">7.862002</span>   <span class="hljs-operator">-</span><span class="hljs-number">7.469298</span>
<span class="hljs-number">2</span>  <span class="hljs-number">2001</span>     <span class="hljs-number">1</span> <span class="hljs-number">276.758209</span>  <span class="hljs-number">474.384252</span>
<span class="hljs-number">3</span>  <span class="hljs-number">2000</span>     <span class="hljs-number">2</span>  <span class="hljs-number">13.122369</span> <span class="hljs-operator">-</span><span class="hljs-number">128.122613</span>
...
<span class="hljs-number">23</span> <span class="hljs-number">2000</span>    <span class="hljs-number">12</span>  <span class="hljs-number">63.436507</span>  <span class="hljs-number">449.794454</span>
<span class="hljs-number">24</span> <span class="hljs-number">2001</span>    <span class="hljs-number">12</span> <span class="hljs-number">999.472226</span>  <span class="hljs-number">922.726589</span>
</code></pre>

<hr>

<p>See <code>?aggregate</code>, the <code>formula</code> argument and the examples.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>With the <code>dplyr</code> package, you can use <code>summarise_all</code>, <code>summarise_at</code> or <code>summarise_if</code> functions to aggregate multiple variables simultaneously. For the example dataset you can do this as follows:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>dplyr<span class="hljs-punctuation">)</span>
<span class="hljs-comment"># summarising all non-grouping variables</span>
df2 <span class="hljs-operator">&lt;-</span> df1 <span class="hljs-operator">%&gt;%</span> group_by<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> month<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> summarise_all<span class="hljs-punctuation">(</span><span class="hljs-built_in">sum</span><span class="hljs-punctuation">)</span>

<span class="hljs-comment"># summarising a specific set of non-grouping variables</span>
df2 <span class="hljs-operator">&lt;-</span> df1 <span class="hljs-operator">%&gt;%</span> group_by<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> month<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> summarise_at<span class="hljs-punctuation">(</span>vars<span class="hljs-punctuation">(</span>x1<span class="hljs-punctuation">,</span> x2<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">)</span>
df2 <span class="hljs-operator">&lt;-</span> df1 <span class="hljs-operator">%&gt;%</span> group_by<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> month<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> summarise_at<span class="hljs-punctuation">(</span>vars<span class="hljs-punctuation">(</span><span class="hljs-operator">-</span>date<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">)</span>

<span class="hljs-comment"># summarising a specific set of non-grouping variables using select_helpers</span>
<span class="hljs-comment"># see ?select_helpers for more options</span>
df2 <span class="hljs-operator">&lt;-</span> df1 <span class="hljs-operator">%&gt;%</span> group_by<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> month<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> summarise_at<span class="hljs-punctuation">(</span>vars<span class="hljs-punctuation">(</span>starts_with<span class="hljs-punctuation">(</span><span class="hljs-string">'x'</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">)</span>
df2 <span class="hljs-operator">&lt;-</span> df1 <span class="hljs-operator">%&gt;%</span> group_by<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> month<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> summarise_at<span class="hljs-punctuation">(</span>vars<span class="hljs-punctuation">(</span>matches<span class="hljs-punctuation">(</span><span class="hljs-string">'.*[0-9]'</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">)</span>

<span class="hljs-comment"># summarising a specific set of non-grouping variables based on condition (class)</span>
df2 <span class="hljs-operator">&lt;-</span> df1 <span class="hljs-operator">%&gt;%</span> group_by<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> month<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> summarise_if<span class="hljs-punctuation">(</span><span class="hljs-built_in">is.numeric</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">)</span>
</code></pre>

<p>The result of the latter two options:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">    year month        x1         x2
   <span class="hljs-operator">&lt;</span>dbl<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>dbl<span class="hljs-operator">&gt;</span>     <span class="hljs-operator">&lt;</span>dbl<span class="hljs-operator">&gt;</span>      <span class="hljs-operator">&lt;</span>dbl<span class="hljs-operator">&gt;</span>
<span class="hljs-number">1</span>   <span class="hljs-number">2000</span>     <span class="hljs-number">1</span> <span class="hljs-operator">-</span><span class="hljs-number">73.58134</span>  <span class="hljs-operator">-</span><span class="hljs-number">92.78595</span>
<span class="hljs-number">2</span>   <span class="hljs-number">2000</span>     <span class="hljs-number">2</span> <span class="hljs-operator">-</span><span class="hljs-number">57.81334</span> <span class="hljs-operator">-</span><span class="hljs-number">152.36983</span>
<span class="hljs-number">3</span>   <span class="hljs-number">2000</span>     <span class="hljs-number">3</span> <span class="hljs-number">122.68758</span>  <span class="hljs-number">153.55243</span>
<span class="hljs-number">4</span>   <span class="hljs-number">2000</span>     <span class="hljs-number">4</span> <span class="hljs-number">450.24980</span>  <span class="hljs-number">285.56374</span>
<span class="hljs-number">5</span>   <span class="hljs-number">2000</span>     <span class="hljs-number">5</span> <span class="hljs-number">678.37867</span>  <span class="hljs-number">384.42888</span>
<span class="hljs-number">6</span>   <span class="hljs-number">2000</span>     <span class="hljs-number">6</span> <span class="hljs-number">792.68696</span>  <span class="hljs-number">530.28694</span>
<span class="hljs-number">7</span>   <span class="hljs-number">2000</span>     <span class="hljs-number">7</span> <span class="hljs-number">908.58795</span>  <span class="hljs-number">452.31222</span>
<span class="hljs-number">8</span>   <span class="hljs-number">2000</span>     <span class="hljs-number">8</span> <span class="hljs-number">710.69928</span>  <span class="hljs-number">719.35225</span>
<span class="hljs-number">9</span>   <span class="hljs-number">2000</span>     <span class="hljs-number">9</span> <span class="hljs-number">725.06079</span>  <span class="hljs-number">914.93687</span>
<span class="hljs-number">10</span>  <span class="hljs-number">2000</span>    <span class="hljs-number">10</span> <span class="hljs-number">770.60304</span>  <span class="hljs-number">863.39337</span>
<span class="hljs-comment"># ... with 14 more rows</span>
</code></pre>

<p>Note: <code>summarise_each</code> is deprecated in favor of <code>summarise_all</code>, <code>summarise_at</code> and <code>summarise_if</code>.</p>

<hr>

<p>As mentioned in <a href="https://stackoverflow.com/questions/9723208/aggregate-summarize-multiple-variables-per-group-i-e-sum-mean-etc/33168036#comment61936894_9723446">my comment above</a>, you can also use the <code>recast</code> function from the <code>reshape2</code>-package:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>reshape2<span class="hljs-punctuation">)</span>
recast<span class="hljs-punctuation">(</span>df1<span class="hljs-punctuation">,</span> year <span class="hljs-operator">+</span> month <span class="hljs-operator">~</span> variable<span class="hljs-punctuation">,</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">,</span> id.var <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"date"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"year"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"month"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>

<p>which will give you the same result.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using the <code>data.table</code> package, which is fast (useful for larger datasets)</p>

<p><a href="https://github.com/Rdatatable/data.table/wiki" rel="noreferrer">https://github.com/Rdatatable/data.table/wiki</a> </p>

<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>data.table<span class="hljs-punctuation">)</span>
df2 <span class="hljs-operator">&lt;-</span> setDT<span class="hljs-punctuation">(</span>df1<span class="hljs-punctuation">)</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span> lapply<span class="hljs-punctuation">(</span>.SD<span class="hljs-punctuation">,</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> by<span class="hljs-operator">=</span>.<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> month<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> .SDcols<span class="hljs-operator">=</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"x1"</span><span class="hljs-punctuation">,</span><span class="hljs-string">"x2"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span>
setDF<span class="hljs-punctuation">(</span>df2<span class="hljs-punctuation">)</span> <span class="hljs-comment"># convert back to dataframe</span>
</code></pre>

<p>Using the plyr package</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">require<span class="hljs-punctuation">(</span>plyr<span class="hljs-punctuation">)</span>
df2 <span class="hljs-operator">&lt;-</span> ddply<span class="hljs-punctuation">(</span>df1<span class="hljs-punctuation">,</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"year"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"month"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> colSums<span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">[</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"x1"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"x2"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>

<p>Using summarize() from the Hmisc package 
(column headings are messy in my example though)</p>

<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-comment"># need to detach plyr because plyr and Hmisc both have a summarize()</span>
detach<span class="hljs-punctuation">(</span>package<span class="hljs-operator">:</span>plyr<span class="hljs-punctuation">)</span>
require<span class="hljs-punctuation">(</span>Hmisc<span class="hljs-punctuation">)</span>
df2 <span class="hljs-operator">&lt;-</span> with<span class="hljs-punctuation">(</span>df1<span class="hljs-punctuation">,</span> summarize<span class="hljs-punctuation">(</span> cbind<span class="hljs-punctuation">(</span>x1<span class="hljs-punctuation">,</span> x2<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> by<span class="hljs-operator">=</span>llist<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> month<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> FUN<span class="hljs-operator">=</span>colSums<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Where is this <code>year()</code> function from?</p>

<p>You could also use the <code>reshape2</code> package for this task:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">require<span class="hljs-punctuation">(</span>reshape2<span class="hljs-punctuation">)</span>
df_melt <span class="hljs-operator">&lt;-</span> melt<span class="hljs-punctuation">(</span>df1<span class="hljs-punctuation">,</span> id <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"date"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"year"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"month"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
dcast<span class="hljs-punctuation">(</span>df_melt<span class="hljs-punctuation">,</span> year <span class="hljs-operator">+</span> month <span class="hljs-operator">~</span> variable<span class="hljs-punctuation">,</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">)</span>
<span class="hljs-comment">#  year month         x1           x2</span>
<span class="hljs-number">1</span>  <span class="hljs-number">2000</span>     <span class="hljs-number">1</span>  <span class="hljs-operator">-</span><span class="hljs-number">80.83405</span> <span class="hljs-operator">-</span><span class="hljs-number">224.9540159</span>
<span class="hljs-number">2</span>  <span class="hljs-number">2000</span>     <span class="hljs-number">2</span> <span class="hljs-operator">-</span><span class="hljs-number">223.76331</span> <span class="hljs-operator">-</span><span class="hljs-number">288.2418017</span>
<span class="hljs-number">3</span>  <span class="hljs-number">2000</span>     <span class="hljs-number">3</span> <span class="hljs-operator">-</span><span class="hljs-number">188.83930</span> <span class="hljs-operator">-</span><span class="hljs-number">481.5601913</span>
<span class="hljs-number">4</span>  <span class="hljs-number">2000</span>     <span class="hljs-number">4</span> <span class="hljs-operator">-</span><span class="hljs-number">197.47797</span> <span class="hljs-operator">-</span><span class="hljs-number">473.7137420</span>
<span class="hljs-number">5</span>  <span class="hljs-number">2000</span>     <span class="hljs-number">5</span> <span class="hljs-operator">-</span><span class="hljs-number">259.07928</span> <span class="hljs-operator">-</span><span class="hljs-number">372.4563522</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Interestingly, base R <code>aggregate</code>'s <code>data.frame</code> method is not showcased here, <a href="https://stackoverflow.com/a/9723314/8876652">above</a> the formula interface is used, so for completeness:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">aggregate<span class="hljs-punctuation">(</span>
  x <span class="hljs-operator">=</span> df1<span class="hljs-punctuation">[</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"x1"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"x2"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  by <span class="hljs-operator">=</span> df1<span class="hljs-punctuation">[</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"year"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"month"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  FUN <span class="hljs-operator">=</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">,</span> na.rm <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span>
<span class="hljs-punctuation">)</span>
</code></pre>

<p><strong>More generic use of aggregate's data.frame method:</strong></p>

<p>Since we are providing a</p>

<ul>
<li><code>data.frame</code> as <code>x</code> and </li>
<li>a <code>list</code> (<code>data.frame</code> is also a <code>list</code>) as <code>by</code>, this is very useful if we need to use it in a dynamic manner, e.g. using other columns to be aggregated and to aggregate by is very simple</li>
<li>also with custom-made aggregation functions </li>
</ul>

<p>For example like so:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">colsToAggregate <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"x1"</span><span class="hljs-punctuation">)</span>
aggregateBy <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"year"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"month"</span><span class="hljs-punctuation">)</span>
dummyaggfun <span class="hljs-operator">&lt;-</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>v<span class="hljs-punctuation">,</span> na.rm <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">sum</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">(</span>v<span class="hljs-punctuation">,</span> na.rm <span class="hljs-operator">=</span> na.rm<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> mean <span class="hljs-operator">=</span> mean<span class="hljs-punctuation">(</span>v<span class="hljs-punctuation">,</span> na.rm <span class="hljs-operator">=</span> na.rm<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
<span class="hljs-punctuation">}</span>

aggregate<span class="hljs-punctuation">(</span>df1<span class="hljs-punctuation">[</span>colsToAggregate<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> by <span class="hljs-operator">=</span> df1<span class="hljs-punctuation">[</span>aggregateBy<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> FUN <span class="hljs-operator">=</span> dummyaggfun<span class="hljs-punctuation">)</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>With the <code>dplyr</code> version &gt;= <code>1.0.0</code>, we can also use <code>summarise</code> to apply function on multiple columns with <code>across</code></p>
<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>dplyr<span class="hljs-punctuation">)</span>
df1 <span class="hljs-operator">%&gt;%</span> 
    group_by<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> month<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span>
    summarise<span class="hljs-punctuation">(</span>across<span class="hljs-punctuation">(</span>starts_with<span class="hljs-punctuation">(</span><span class="hljs-string">'x'</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">sum</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
<span class="hljs-comment"># A tibble: 24 x 4</span>
<span class="hljs-comment"># Groups:   year [2]</span>
<span class="hljs-comment">#    year month     x1     x2</span>
<span class="hljs-comment">#   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="hljs-comment"># 1  2000     1   11.7  52.9 </span>
<span class="hljs-comment"># 2  2000     2  -74.1 126.  </span>
<span class="hljs-comment"># 3  2000     3 -132.  149.  </span>
<span class="hljs-comment"># 4  2000     4 -130.    4.12</span>
<span class="hljs-comment"># 5  2000     5  -91.6 -55.9 </span>
<span class="hljs-comment"># 6  2000     6  179.   73.7 </span>
<span class="hljs-comment"># 7  2000     7   95.0 409.  </span>
<span class="hljs-comment"># 8  2000     8  255.  283.  </span>
<span class="hljs-comment"># 9  2000     9  489.  331.  </span>
<span class="hljs-comment">#10  2000    10  719.  305.  </span>
<span class="hljs-comment">#  with 14 more rows</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For a more flexible and faster approach to data aggregation, check out the <code>collap</code> function in the <em>collapse</em> R package available on CRAN:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>collapse<span class="hljs-punctuation">)</span>
<span class="hljs-comment"># Simple aggregation with one function</span>
head<span class="hljs-punctuation">(</span>collap<span class="hljs-punctuation">(</span>df1<span class="hljs-punctuation">,</span> x1 <span class="hljs-operator">+</span> x2 <span class="hljs-operator">~</span> year <span class="hljs-operator">+</span> month<span class="hljs-punctuation">,</span> fmean<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>

  year month        x1        x2
<span class="hljs-number">1</span> <span class="hljs-number">2000</span>     <span class="hljs-number">1</span> <span class="hljs-operator">-</span><span class="hljs-number">1.217984</span>  <span class="hljs-number">4.008534</span>
<span class="hljs-number">2</span> <span class="hljs-number">2000</span>     <span class="hljs-number">2</span> <span class="hljs-operator">-</span><span class="hljs-number">1.117777</span> <span class="hljs-number">11.460301</span>
<span class="hljs-number">3</span> <span class="hljs-number">2000</span>     <span class="hljs-number">3</span>  <span class="hljs-number">5.552706</span>  <span class="hljs-number">8.621904</span>
<span class="hljs-number">4</span> <span class="hljs-number">2000</span>     <span class="hljs-number">4</span>  <span class="hljs-number">4.238889</span> <span class="hljs-number">22.382953</span>
<span class="hljs-number">5</span> <span class="hljs-number">2000</span>     <span class="hljs-number">5</span>  <span class="hljs-number">3.124566</span> <span class="hljs-number">39.982799</span>
<span class="hljs-number">6</span> <span class="hljs-number">2000</span>     <span class="hljs-number">6</span> <span class="hljs-operator">-</span><span class="hljs-number">1.415203</span> <span class="hljs-number">48.252283</span>

<span class="hljs-comment"># Customized: Aggregate columns with different functions</span>
head<span class="hljs-punctuation">(</span>collap<span class="hljs-punctuation">(</span>df1<span class="hljs-punctuation">,</span> x1 <span class="hljs-operator">+</span> x2 <span class="hljs-operator">~</span> year <span class="hljs-operator">+</span> month<span class="hljs-punctuation">,</span> 
      custom <span class="hljs-operator">=</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span>fmean <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"x1"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"x2"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> fmedian <span class="hljs-operator">=</span> <span class="hljs-string">"x2"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>

  year month  fmean.x1  fmean.x2 fmedian.x2
<span class="hljs-number">1</span> <span class="hljs-number">2000</span>     <span class="hljs-number">1</span> <span class="hljs-operator">-</span><span class="hljs-number">1.217984</span>  <span class="hljs-number">4.008534</span>   <span class="hljs-number">3.266968</span>
<span class="hljs-number">2</span> <span class="hljs-number">2000</span>     <span class="hljs-number">2</span> <span class="hljs-operator">-</span><span class="hljs-number">1.117777</span> <span class="hljs-number">11.460301</span>  <span class="hljs-number">11.563387</span>
<span class="hljs-number">3</span> <span class="hljs-number">2000</span>     <span class="hljs-number">3</span>  <span class="hljs-number">5.552706</span>  <span class="hljs-number">8.621904</span>   <span class="hljs-number">8.506329</span>
<span class="hljs-number">4</span> <span class="hljs-number">2000</span>     <span class="hljs-number">4</span>  <span class="hljs-number">4.238889</span> <span class="hljs-number">22.382953</span>  <span class="hljs-number">20.796205</span>
<span class="hljs-number">5</span> <span class="hljs-number">2000</span>     <span class="hljs-number">5</span>  <span class="hljs-number">3.124566</span> <span class="hljs-number">39.982799</span>  <span class="hljs-number">39.919145</span>
<span class="hljs-number">6</span> <span class="hljs-number">2000</span>     <span class="hljs-number">6</span> <span class="hljs-operator">-</span><span class="hljs-number">1.415203</span> <span class="hljs-number">48.252283</span>  <span class="hljs-number">48.653926</span>

<span class="hljs-comment"># You can also apply multiple functions to all columns</span>
head<span class="hljs-punctuation">(</span>collap<span class="hljs-punctuation">(</span>df1<span class="hljs-punctuation">,</span> x1 <span class="hljs-operator">+</span> x2 <span class="hljs-operator">~</span> year <span class="hljs-operator">+</span> month<span class="hljs-punctuation">,</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span>fmean<span class="hljs-punctuation">,</span> fmin<span class="hljs-punctuation">,</span> fmax<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>

  year month  fmean.x1    fmin.x1  fmax.x1  fmean.x2   fmin.x2  fmax.x2
<span class="hljs-number">1</span> <span class="hljs-number">2000</span>     <span class="hljs-number">1</span> <span class="hljs-operator">-</span><span class="hljs-number">1.217984</span> <span class="hljs-operator">-</span><span class="hljs-number">4.2460775</span> <span class="hljs-number">1.245649</span>  <span class="hljs-number">4.008534</span> <span class="hljs-operator">-</span><span class="hljs-number">1.720181</span> <span class="hljs-number">10.47825</span>
<span class="hljs-number">2</span> <span class="hljs-number">2000</span>     <span class="hljs-number">2</span> <span class="hljs-operator">-</span><span class="hljs-number">1.117777</span> <span class="hljs-operator">-</span><span class="hljs-number">5.0081858</span> <span class="hljs-number">3.330872</span> <span class="hljs-number">11.460301</span>  <span class="hljs-number">9.111287</span> <span class="hljs-number">13.86184</span>
<span class="hljs-number">3</span> <span class="hljs-number">2000</span>     <span class="hljs-number">3</span>  <span class="hljs-number">5.552706</span>  <span class="hljs-number">0.1193369</span> <span class="hljs-number">9.464760</span>  <span class="hljs-number">8.621904</span>  <span class="hljs-number">6.807443</span> <span class="hljs-number">11.54485</span>
<span class="hljs-number">4</span> <span class="hljs-number">2000</span>     <span class="hljs-number">4</span>  <span class="hljs-number">4.238889</span>  <span class="hljs-number">0.8723805</span> <span class="hljs-number">8.627637</span> <span class="hljs-number">22.382953</span> <span class="hljs-number">11.515753</span> <span class="hljs-number">31.66365</span>
<span class="hljs-number">5</span> <span class="hljs-number">2000</span>     <span class="hljs-number">5</span>  <span class="hljs-number">3.124566</span> <span class="hljs-operator">-</span><span class="hljs-number">1.5985090</span> <span class="hljs-number">7.341478</span> <span class="hljs-number">39.982799</span> <span class="hljs-number">31.957653</span> <span class="hljs-number">46.13732</span>
<span class="hljs-number">6</span> <span class="hljs-number">2000</span>     <span class="hljs-number">6</span> <span class="hljs-operator">-</span><span class="hljs-number">1.415203</span> <span class="hljs-operator">-</span><span class="hljs-number">4.6072295</span> <span class="hljs-number">2.655084</span> <span class="hljs-number">48.252283</span> <span class="hljs-number">42.809211</span> <span class="hljs-number">52.31309</span>

<span class="hljs-comment"># When you do that, you can also return the data in a long format</span>
head<span class="hljs-punctuation">(</span>collap<span class="hljs-punctuation">(</span>df1<span class="hljs-punctuation">,</span> x1 <span class="hljs-operator">+</span> x2 <span class="hljs-operator">~</span> year <span class="hljs-operator">+</span> month<span class="hljs-punctuation">,</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span>fmean<span class="hljs-punctuation">,</span> fmin<span class="hljs-punctuation">,</span> fmax<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">return</span> <span class="hljs-operator">=</span> <span class="hljs-string">"long"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>

  Function year month        x1        x2
<span class="hljs-number">1</span>    fmean <span class="hljs-number">2000</span>     <span class="hljs-number">1</span> <span class="hljs-operator">-</span><span class="hljs-number">1.217984</span>  <span class="hljs-number">4.008534</span>
<span class="hljs-number">2</span>    fmean <span class="hljs-number">2000</span>     <span class="hljs-number">2</span> <span class="hljs-operator">-</span><span class="hljs-number">1.117777</span> <span class="hljs-number">11.460301</span>
<span class="hljs-number">3</span>    fmean <span class="hljs-number">2000</span>     <span class="hljs-number">3</span>  <span class="hljs-number">5.552706</span>  <span class="hljs-number">8.621904</span>
<span class="hljs-number">4</span>    fmean <span class="hljs-number">2000</span>     <span class="hljs-number">4</span>  <span class="hljs-number">4.238889</span> <span class="hljs-number">22.382953</span>
<span class="hljs-number">5</span>    fmean <span class="hljs-number">2000</span>     <span class="hljs-number">5</span>  <span class="hljs-number">3.124566</span> <span class="hljs-number">39.982799</span>
<span class="hljs-number">6</span>    fmean <span class="hljs-number">2000</span>     <span class="hljs-number">6</span> <span class="hljs-operator">-</span><span class="hljs-number">1.415203</span> <span class="hljs-number">48.252283</span>

</code></pre>

<p><em>Note</em>: You can use base functions like <code>mean, max</code> etc. with <code>collap</code>, but <code>fmean, fmax</code> etc. are C++ based grouped functions offered in the <em>collapse</em> package which are significantly faster (i.e. the performance on large data aggregations is the same as <em>data.table</em> while providing greater flexibility, and these fast grouped functions can also be used without <code>collap</code>). </p>

<p><em>Note2</em>: <code>collap</code> also supports flexible multitype data aggregation, which you can of course do using the <code>custom</code> argument, but you can also apply functions to numeric and non-numeric columns in a semi-automated way: </p>

<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-comment"># wlddev is a data set of World Bank Indicators provided in the collapse package</span>
head<span class="hljs-punctuation">(</span>wlddev<span class="hljs-punctuation">)</span>

      country iso3c       date year decade     region     income  OECD PCGDP LIFEEX GINI       ODA
<span class="hljs-number">1</span> Afghanistan   AFG <span class="hljs-number">1961</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">1960</span>   <span class="hljs-number">1960</span> South Asia Low income <span class="hljs-literal">FALSE</span>    <span class="hljs-literal">NA</span> <span class="hljs-number">32.292</span>   <span class="hljs-literal">NA</span> <span class="hljs-number">114440000</span>
<span class="hljs-number">2</span> Afghanistan   AFG <span class="hljs-number">1962</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">1961</span>   <span class="hljs-number">1960</span> South Asia Low income <span class="hljs-literal">FALSE</span>    <span class="hljs-literal">NA</span> <span class="hljs-number">32.742</span>   <span class="hljs-literal">NA</span> <span class="hljs-number">233350000</span>
<span class="hljs-number">3</span> Afghanistan   AFG <span class="hljs-number">1963</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">1962</span>   <span class="hljs-number">1960</span> South Asia Low income <span class="hljs-literal">FALSE</span>    <span class="hljs-literal">NA</span> <span class="hljs-number">33.185</span>   <span class="hljs-literal">NA</span> <span class="hljs-number">114880000</span>
<span class="hljs-number">4</span> Afghanistan   AFG <span class="hljs-number">1964</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">1963</span>   <span class="hljs-number">1960</span> South Asia Low income <span class="hljs-literal">FALSE</span>    <span class="hljs-literal">NA</span> <span class="hljs-number">33.624</span>   <span class="hljs-literal">NA</span> <span class="hljs-number">236450000</span>
<span class="hljs-number">5</span> Afghanistan   AFG <span class="hljs-number">1965</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">1964</span>   <span class="hljs-number">1960</span> South Asia Low income <span class="hljs-literal">FALSE</span>    <span class="hljs-literal">NA</span> <span class="hljs-number">34.060</span>   <span class="hljs-literal">NA</span> <span class="hljs-number">302480000</span>
<span class="hljs-number">6</span> Afghanistan   AFG <span class="hljs-number">1966</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">1965</span>   <span class="hljs-number">1960</span> South Asia Low income <span class="hljs-literal">FALSE</span>    <span class="hljs-literal">NA</span> <span class="hljs-number">34.495</span>   <span class="hljs-literal">NA</span> <span class="hljs-number">370250000</span>

<span class="hljs-comment"># This aggregates the data, applying the mean to numeric and the statistical mode to categorical columns</span>
head<span class="hljs-punctuation">(</span>collap<span class="hljs-punctuation">(</span>wlddev<span class="hljs-punctuation">,</span> <span class="hljs-operator">~</span> iso3c <span class="hljs-operator">+</span> decade<span class="hljs-punctuation">,</span> FUN <span class="hljs-operator">=</span> fmean<span class="hljs-punctuation">,</span> catFUN <span class="hljs-operator">=</span> fmode<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>

  country iso3c       date   year decade                     region      income  OECD    PCGDP   LIFEEX GINI      ODA
<span class="hljs-number">1</span>   Aruba   ABW <span class="hljs-number">1961</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">1962.5</span>   <span class="hljs-number">1960</span> Latin America <span class="hljs-operator">&amp;</span> Caribbean  High income <span class="hljs-literal">FALSE</span>       <span class="hljs-literal">NA</span> <span class="hljs-number">66.58583</span>   <span class="hljs-literal">NA</span>       <span class="hljs-literal">NA</span>
<span class="hljs-number">2</span>   Aruba   ABW <span class="hljs-number">1967</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">1970.0</span>   <span class="hljs-number">1970</span> Latin America <span class="hljs-operator">&amp;</span> Caribbean  High income <span class="hljs-literal">FALSE</span>       <span class="hljs-literal">NA</span> <span class="hljs-number">69.14178</span>   <span class="hljs-literal">NA</span>       <span class="hljs-literal">NA</span>
<span class="hljs-number">3</span>   Aruba   ABW <span class="hljs-number">1976</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">1980.0</span>   <span class="hljs-number">1980</span> Latin America <span class="hljs-operator">&amp;</span> Caribbean  High income <span class="hljs-literal">FALSE</span>       <span class="hljs-literal">NA</span> <span class="hljs-number">72.17600</span>   <span class="hljs-literal">NA</span> <span class="hljs-number">33630000</span>
<span class="hljs-number">4</span>   Aruba   ABW <span class="hljs-number">1987</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">1990.0</span>   <span class="hljs-number">1990</span> Latin America <span class="hljs-operator">&amp;</span> Caribbean  High income <span class="hljs-literal">FALSE</span> <span class="hljs-number">23677.09</span> <span class="hljs-number">73.45356</span>   <span class="hljs-literal">NA</span> <span class="hljs-number">41563333</span>
<span class="hljs-number">5</span>   Aruba   ABW <span class="hljs-number">1996</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">2000.0</span>   <span class="hljs-number">2000</span> Latin America <span class="hljs-operator">&amp;</span> Caribbean  High income <span class="hljs-literal">FALSE</span> <span class="hljs-number">26766.93</span> <span class="hljs-number">73.85773</span>   <span class="hljs-literal">NA</span> <span class="hljs-number">19857000</span>
<span class="hljs-number">6</span>   Aruba   ABW <span class="hljs-number">2007</span><span class="hljs-operator">-</span><span class="hljs-number">01</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">2010.0</span>   <span class="hljs-number">2010</span> Latin America <span class="hljs-operator">&amp;</span> Caribbean  High income <span class="hljs-literal">FALSE</span> <span class="hljs-number">25238.80</span> <span class="hljs-number">75.01078</span>   <span class="hljs-literal">NA</span>       <span class="hljs-literal">NA</span>

<span class="hljs-comment"># Note that by default (argument keep.col.order = TRUE) the column order is also preserved</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Below is another way to summarize multiple columns, especially useful when the function needs further arguments. You can select all columns via <code>everything()</code> or a subset of columns like <code>any_of(c("a", "b"))</code>.</p>
<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>dplyr<span class="hljs-punctuation">)</span>
<span class="hljs-comment"># toy data</span>
df <span class="hljs-operator">&lt;-</span> tibble<span class="hljs-punctuation">(</span>a <span class="hljs-operator">=</span> sample<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-literal">NA</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-operator">:</span><span class="hljs-number">7</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span> replace <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> 
             b <span class="hljs-operator">=</span> sample<span class="hljs-punctuation">(</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-literal">NA</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span> replace <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> 
             <span class="hljs-built_in">c</span> <span class="hljs-operator">=</span> sample<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span> replace <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> 
             grp <span class="hljs-operator">=</span> sample<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span> replace <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
df
<span class="hljs-comment">#&gt; # A tibble: 30  4</span>
<span class="hljs-comment">#&gt;        a     b     c   grp</span>
<span class="hljs-comment">#&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="hljs-comment">#&gt;  1     7     1     3     1</span>
<span class="hljs-comment">#&gt;  2     7     4     4     2</span>
<span class="hljs-comment">#&gt;  3     5     1     3     3</span>
<span class="hljs-comment">#&gt;  4     7    NA     3     2</span>
<span class="hljs-comment">#&gt;  5     7     2     5     2</span>
<span class="hljs-comment">#&gt;  6     7     4     4     2</span>
<span class="hljs-comment">#&gt;  7     7    NA     3     3</span>
<span class="hljs-comment">#&gt;  8    NA     5     4     1</span>
<span class="hljs-comment">#&gt;  9     5     1     1     2</span>
<span class="hljs-comment">#&gt; 10    NA     3     1     2</span>
<span class="hljs-comment">#&gt; #  with 20 more rows</span>
df <span class="hljs-operator">%&gt;%</span> 
  group_by<span class="hljs-punctuation">(</span>grp<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span>
  summarise<span class="hljs-punctuation">(</span>across<span class="hljs-punctuation">(</span>everything<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> 
                   <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span>mean <span class="hljs-operator">=</span> <span class="hljs-operator">~</span>mean<span class="hljs-punctuation">(</span>.<span class="hljs-punctuation">,</span> na.rm <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span>
                        q75 <span class="hljs-operator">=</span> <span class="hljs-operator">~</span>quantile<span class="hljs-punctuation">(</span>.<span class="hljs-punctuation">,</span> probs <span class="hljs-operator">=</span> <span class="hljs-number">.75</span><span class="hljs-punctuation">,</span> na.rm <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
<span class="hljs-comment">#&gt; # A tibble: 3  7</span>
<span class="hljs-comment">#&gt;     grp a_mean a_q75 b_mean b_q75 c_mean c_q75</span>
<span class="hljs-comment">#&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="hljs-comment">#&gt; 1     1   6.6      7   2.88  4.25   3        4</span>
<span class="hljs-comment">#&gt; 2     2   6.33     7   2.62  3.25   2.9      4</span>
<span class="hljs-comment">#&gt; 3     3   5.78     6   3.33  4      3.09     4</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Late to the party, but recently found another way to get the summary statistics.</p>

<p><code>library(psych)
describe(data)</code></p>

<p>Will output: 
mean, min, max, standard deviation, n, standard error, kurtosis, skewness, median, and range for each variable. </p>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;Yes, in your \u0026lt;code\u0026gt;formula\u0026lt;/code\u0026gt;, you can \u0026lt;code\u0026gt;cbind\u0026lt;/code\u0026gt; the numeric variables to be aggregated:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;aggregate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cbind\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;x1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; x2\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt; year \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; data \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; na.rm \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n   year month         x1          x2\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7.862002\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7.469298\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2001\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;276.758209\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;474.384252\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13.122369\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;128.122613\u0026lt;/span\u0026gt;\n...\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;63.436507\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;449.794454\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;24\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2001\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;999.472226\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;922.726589\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;See \u0026lt;code\u0026gt;?aggregate\u0026lt;/code\u0026gt;, the \u0026lt;code\u0026gt;formula\u0026lt;/code\u0026gt; argument and the examples.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;With the \u0026lt;code\u0026gt;dplyr\u0026lt;/code\u0026gt; package, you can use \u0026lt;code\u0026gt;summarise_all\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;summarise_at\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;summarise_if\u0026lt;/code\u0026gt; functions to aggregate multiple variables simultaneously. For the example dataset you can do this as follows:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;dplyr\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# summarising all non-grouping variables\u0026lt;/span\u0026gt;\ndf2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; df1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; summarise_all\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# summarising a specific set of non-grouping variables\u0026lt;/span\u0026gt;\ndf2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; df1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; summarise_at\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;vars\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;x1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; x2\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndf2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; df1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; summarise_at\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;vars\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;date\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# summarising a specific set of non-grouping variables using select_helpers\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# see ?select_helpers for more options\u0026lt;/span\u0026gt;\ndf2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; df1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; summarise_at\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;vars\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;starts_with\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;x\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndf2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; df1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; summarise_at\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;vars\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;matches\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.*[0-9]\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# summarising a specific set of non-grouping variables based on condition (class)\u0026lt;/span\u0026gt;\ndf2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; df1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; summarise_if\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;is.numeric\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The result of the latter two options:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;    year month        x1         x2\n   \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;/span\u0026gt;dbl\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;/span\u0026gt;dbl\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;/span\u0026gt;dbl\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;/span\u0026gt;dbl\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;73.58134\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;92.78595\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;57.81334\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;152.36983\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;122.68758\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;153.55243\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;450.24980\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;285.56374\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;678.37867\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;384.42888\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;792.68696\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;530.28694\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;908.58795\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;452.31222\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;710.69928\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;719.35225\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;725.06079\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;914.93687\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;770.60304\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;863.39337\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# ... with 14 more rows\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note: \u0026lt;code\u0026gt;summarise_each\u0026lt;/code\u0026gt; is deprecated in favor of \u0026lt;code\u0026gt;summarise_all\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;summarise_at\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;summarise_if\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;As mentioned in \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/9723208/aggregate-summarize-multiple-variables-per-group-i-e-sum-mean-etc/33168036#comment61936894_9723446\u0026quot;\u0026gt;my comment above\u0026lt;/a\u0026gt;, you can also use the \u0026lt;code\u0026gt;recast\u0026lt;/code\u0026gt; function from the \u0026lt;code\u0026gt;reshape2\u0026lt;/code\u0026gt;-package:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;reshape2\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nrecast\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; year \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; month \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt; variable\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; id.var \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;date\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;month\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;which will give you the same result.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Using the \u0026lt;code\u0026gt;data.table\u0026lt;/code\u0026gt; package, which is fast (useful for larger datasets)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/Rdatatable/data.table/wiki\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://github.com/Rdatatable/data.table/wiki\u0026lt;/a\u0026gt; \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;data.table\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndf2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; setDT\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; lapply\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;.SD\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; by\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; .SDcols\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x1\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x2\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\nsetDF\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df2\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# convert back to dataframe\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Using the plyr package\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;require\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;plyr\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndf2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; ddply\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;month\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;x\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; colSums\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;x\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x1\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x2\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Using summarize() from the Hmisc package \n(column headings are messy in my example though)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# need to detach plyr because plyr and Hmisc both have a summarize()\u0026lt;/span\u0026gt;\ndetach\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;package\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;plyr\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nrequire\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Hmisc\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndf2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; with\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; summarize\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt; cbind\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;x1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; x2\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; by\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;llist\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; FUN\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;colSums\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Where is this \u0026lt;code\u0026gt;year()\u0026lt;/code\u0026gt; function from?\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You could also use the \u0026lt;code\u0026gt;reshape2\u0026lt;/code\u0026gt; package for this task:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;require\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;reshape2\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndf_melt \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; melt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;date\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;month\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndcast\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df_melt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; year \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; month \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt; variable\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#  year month         x1           x2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80.83405\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;224.9540159\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;223.76331\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;288.2418017\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;188.83930\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;481.5601913\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;197.47797\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;473.7137420\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;259.07928\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;372.4563522\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Interestingly, base R \u0026lt;code\u0026gt;aggregate\u0026lt;/code\u0026gt;\u0026apos;s \u0026lt;code\u0026gt;data.frame\u0026lt;/code\u0026gt; method is not showcased here, \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/9723314/8876652\u0026quot;\u0026gt;above\u0026lt;/a\u0026gt; the formula interface is used, so for completeness:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;aggregate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\n  x \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x1\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x2\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n  by \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;month\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n  FUN \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; na.rm \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;More generic use of aggregate\u0026apos;s data.frame method:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Since we are providing a\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;data.frame\u0026lt;/code\u0026gt; as \u0026lt;code\u0026gt;x\u0026lt;/code\u0026gt; and \u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;a \u0026lt;code\u0026gt;list\u0026lt;/code\u0026gt; (\u0026lt;code\u0026gt;data.frame\u0026lt;/code\u0026gt; is also a \u0026lt;code\u0026gt;list\u0026lt;/code\u0026gt;) as \u0026lt;code\u0026gt;by\u0026lt;/code\u0026gt;, this is very useful if we need to use it in a dynamic manner, e.g. using other columns to be aggregated and to aggregate by is very simple\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;also with custom-made aggregation functions \u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;For example like so:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;colsToAggregate \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x1\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\naggregateBy \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;month\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndummyaggfun \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;v\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; na.rm \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;v\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; na.rm \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; na.rm\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; mean \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; mean\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;v\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; na.rm \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; na.rm\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;\n\naggregate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;colsToAggregate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; by \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;aggregateBy\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; FUN \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; dummyaggfun\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;With the \u0026lt;code\u0026gt;dplyr\u0026lt;/code\u0026gt; version \u0026amp;gt;= \u0026lt;code\u0026gt;1.0.0\u0026lt;/code\u0026gt;, we can also use \u0026lt;code\u0026gt;summarise\u0026lt;/code\u0026gt; to apply function on multiple columns with \u0026lt;code\u0026gt;across\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;dplyr\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndf1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; \n    group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt;\n    summarise\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;across\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;starts_with\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;x\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# A tibble: 24 x 4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Groups:   year [2]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#    year month     x1     x2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#   \u0026amp;lt;dbl\u0026amp;gt; \u0026amp;lt;dbl\u0026amp;gt;  \u0026amp;lt;dbl\u0026amp;gt;  \u0026amp;lt;dbl\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 1  2000     1   11.7  52.9 \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 2  2000     2  -74.1 126.  \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 3  2000     3 -132.  149.  \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 4  2000     4 -130.    4.12\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 5  2000     5  -91.6 -55.9 \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 6  2000     6  179.   73.7 \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 7  2000     7   95.0 409.  \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 8  2000     8  255.  283.  \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 9  2000     9  489.  331.  \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#10  2000    10  719.  305.  \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#  with 14 more rows\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For a more flexible and faster approach to data aggregation, check out the \u0026lt;code\u0026gt;collap\u0026lt;/code\u0026gt; function in the \u0026lt;em\u0026gt;collapse\u0026lt;/em\u0026gt; R package available on CRAN:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;collapse\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Simple aggregation with one function\u0026lt;/span\u0026gt;\nhead\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;collap\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; x1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; x2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt; year \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; fmean\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n  year month        x1        x2\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.217984\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.008534\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.117777\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11.460301\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.552706\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8.621904\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.238889\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22.382953\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.124566\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;39.982799\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.415203\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;48.252283\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Customized: Aggregate columns with different functions\u0026lt;/span\u0026gt;\nhead\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;collap\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; x1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; x2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt; year \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \n      custom \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;fmean \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x1\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x2\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; fmedian \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x2\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n  year month  fmean.x1  fmean.x2 fmedian.x2\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.217984\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.008534\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.266968\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.117777\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11.460301\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11.563387\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.552706\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8.621904\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8.506329\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.238889\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22.382953\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20.796205\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.124566\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;39.982799\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;39.919145\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.415203\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;48.252283\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;48.653926\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# You can also apply multiple functions to all columns\u0026lt;/span\u0026gt;\nhead\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;collap\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; x1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; x2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt; year \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;fmean\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; fmin\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; fmax\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n  year month  fmean.x1    fmin.x1  fmax.x1  fmean.x2   fmin.x2  fmax.x2\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.217984\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.2460775\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.245649\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.008534\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.720181\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10.47825\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.117777\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.0081858\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.330872\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11.460301\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9.111287\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13.86184\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.552706\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.1193369\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9.464760\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8.621904\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6.807443\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11.54485\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.238889\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.8723805\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8.627637\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22.382953\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11.515753\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;31.66365\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.124566\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.5985090\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7.341478\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;39.982799\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;31.957653\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;46.13732\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.415203\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.6072295\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.655084\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;48.252283\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;42.809211\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;52.31309\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# When you do that, you can also return the data in a long format\u0026lt;/span\u0026gt;\nhead\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;collap\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; x1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; x2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt; year \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;fmean\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; fmin\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; fmax\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;long\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n  Function year month        x1        x2\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;    fmean \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.217984\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.008534\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;    fmean \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.117777\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11.460301\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;    fmean \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.552706\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8.621904\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;    fmean \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.238889\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22.382953\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;    fmean \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.124566\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;39.982799\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;    fmean \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.415203\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;48.252283\u0026lt;/span\u0026gt;\n\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Note\u0026lt;/em\u0026gt;: You can use base functions like \u0026lt;code\u0026gt;mean, max\u0026lt;/code\u0026gt; etc. with \u0026lt;code\u0026gt;collap\u0026lt;/code\u0026gt;, but \u0026lt;code\u0026gt;fmean, fmax\u0026lt;/code\u0026gt; etc. are C++ based grouped functions offered in the \u0026lt;em\u0026gt;collapse\u0026lt;/em\u0026gt; package which are significantly faster (i.e. the performance on large data aggregations is the same as \u0026lt;em\u0026gt;data.table\u0026lt;/em\u0026gt; while providing greater flexibility, and these fast grouped functions can also be used without \u0026lt;code\u0026gt;collap\u0026lt;/code\u0026gt;). \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Note2\u0026lt;/em\u0026gt;: \u0026lt;code\u0026gt;collap\u0026lt;/code\u0026gt; also supports flexible multitype data aggregation, which you can of course do using the \u0026lt;code\u0026gt;custom\u0026lt;/code\u0026gt; argument, but you can also apply functions to numeric and non-numeric columns in a semi-automated way: \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# wlddev is a data set of World Bank Indicators provided in the collapse package\u0026lt;/span\u0026gt;\nhead\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wlddev\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n      country iso3c       date year decade     region     income  OECD PCGDP LIFEEX GINI       ODA\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; Afghanistan   AFG \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1961\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1960\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1960\u0026lt;/span\u0026gt; South Asia Low income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;32.292\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;114440000\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; Afghanistan   AFG \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1962\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1961\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1960\u0026lt;/span\u0026gt; South Asia Low income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;32.742\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;233350000\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; Afghanistan   AFG \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1963\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1962\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1960\u0026lt;/span\u0026gt; South Asia Low income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;33.185\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;114880000\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; Afghanistan   AFG \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1964\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1963\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1960\u0026lt;/span\u0026gt; South Asia Low income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;33.624\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;236450000\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt; Afghanistan   AFG \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1965\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1964\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1960\u0026lt;/span\u0026gt; South Asia Low income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;34.060\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;302480000\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt; Afghanistan   AFG \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1966\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1965\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1960\u0026lt;/span\u0026gt; South Asia Low income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;34.495\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;370250000\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# This aggregates the data, applying the mean to numeric and the statistical mode to categorical columns\u0026lt;/span\u0026gt;\nhead\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;collap\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wlddev\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt; iso3c \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; decade\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; FUN \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fmean\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; catFUN \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fmode\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n  country iso3c       date   year decade                     region      income  OECD    PCGDP   LIFEEX GINI      ODA\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   Aruba   ABW \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1961\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1962.5\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1960\u0026lt;/span\u0026gt; Latin America \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt; Caribbean  High income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;66.58583\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   Aruba   ABW \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1967\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1970.0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1970\u0026lt;/span\u0026gt; Latin America \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt; Caribbean  High income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;69.14178\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;   Aruba   ABW \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1976\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1980.0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1980\u0026lt;/span\u0026gt; Latin America \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt; Caribbean  High income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;72.17600\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;33630000\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;   Aruba   ABW \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1987\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1990.0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1990\u0026lt;/span\u0026gt; Latin America \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt; Caribbean  High income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23677.09\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;73.45356\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;41563333\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;   Aruba   ABW \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1996\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000.0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt; Latin America \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt; Caribbean  High income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;26766.93\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;73.85773\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;19857000\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;   Aruba   ABW \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2007\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2010.0\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2010\u0026lt;/span\u0026gt; Latin America \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt; Caribbean  High income \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;25238.80\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;75.01078\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Note that by default (argument keep.col.order = TRUE) the column order is also preserved\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Below is another way to summarize multiple columns, especially useful when the function needs further arguments. You can select all columns via \u0026lt;code\u0026gt;everything()\u0026lt;/code\u0026gt; or a subset of columns like \u0026lt;code\u0026gt;any_of(c(\u0026quot;a\u0026quot;, \u0026quot;b\u0026quot;))\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;dplyr\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# toy data\u0026lt;/span\u0026gt;\ndf \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; tibble\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;a \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; sample\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; replace \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \n             b \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; sample\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NA\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; replace \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \n             \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; sample\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; replace \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \n             grp \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; sample\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; replace \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndf\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; # A tibble: 30  4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;        a     b     c   grp\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;    \u0026amp;lt;int\u0026amp;gt; \u0026amp;lt;int\u0026amp;gt; \u0026amp;lt;int\u0026amp;gt; \u0026amp;lt;int\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  1     7     1     3     1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  2     7     4     4     2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  3     5     1     3     3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  4     7    NA     3     2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  5     7     2     5     2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  6     7     4     4     2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  7     7    NA     3     3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  8    NA     5     4     1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  9     5     1     1     2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 10    NA     3     1     2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; #  with 20 more rows\u0026lt;/span\u0026gt;\ndf \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; \n  group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;grp\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt;\n  summarise\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;across\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;everything\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \n                   \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;mean \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt;mean\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; na.rm \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n                        q75 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt;quantile\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; probs \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;.75\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; na.rm \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; # A tibble: 3  7\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;     grp a_mean a_q75 b_mean b_q75 c_mean c_q75\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;   \u0026amp;lt;int\u0026amp;gt;  \u0026amp;lt;dbl\u0026amp;gt; \u0026amp;lt;dbl\u0026amp;gt;  \u0026amp;lt;dbl\u0026amp;gt; \u0026amp;lt;dbl\u0026amp;gt;  \u0026amp;lt;dbl\u0026amp;gt; \u0026amp;lt;dbl\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 1     1   6.6      7   2.88  4.25   3        4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 2     2   6.33     7   2.62  3.25   2.9      4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 3     3   5.78     6   3.33  4      3.09     4\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Late to the party, but recently found another way to get the summary statistics.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;library(psych)\ndescribe(data)\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Will output: \nmean, min, max, standard deviation, n, standard error, kurtosis, skewness, median, and range for each variable. \u0026lt;/p\u0026gt;\n    "],"id":367,"title":"Aggregate / summarize multiple variables per group (e.g. sum, mean)","content":"\n                \n\u0026lt;p\u0026gt;From a data frame, is there a easy way to aggregate (\u0026lt;code\u0026gt;sum\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;mean\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;max\u0026lt;/code\u0026gt; et c) multiple variables simultaneously?\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Below are some sample data:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;lubridate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndays \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;365\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\ndate \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; seq\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;as.Date\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;2000-01-01\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; days\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; by \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;day\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nyear \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;date\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nmonth \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;date\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nx1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cumsum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;rnorm\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;days\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.05\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \nx2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cumsum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;rnorm\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;days\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.05\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndf1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; data.frame\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;date\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; x1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; x2\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I would like to simultaneously aggregate the \u0026lt;code\u0026gt;x1\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;x2\u0026lt;/code\u0026gt; variables from the \u0026lt;code\u0026gt;df2\u0026lt;/code\u0026gt; data frame by year and month.  The following code aggregates the \u0026lt;code\u0026gt;x1\u0026lt;/code\u0026gt; variable, but is it also possible to simultaneously aggregate the \u0026lt;code\u0026gt;x2\u0026lt;/code\u0026gt; variable?\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;### aggregate variables by year month\u0026lt;/span\u0026gt;\ndf2\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;aggregate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;x1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt; year\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;month\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; data\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; na.rm\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nhead\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df2\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","slug":"aggregate-summarize-multiple-variables-per-group-(e.g.-sum-mean)-1657387764061","postType":"QUESTION","createdAt":"2022-07-09T17:29:24.000Z","updatedAt":"2022-07-09T17:29:24.000Z","tags":[{"id":2029,"name":"data.table","slug":"data.table","createdAt":"2022-07-09T17:29:24.000Z","updatedAt":"2022-07-09T17:29:24.000Z","Questions_Tags":{"questionId":367,"tagId":2029}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"aggregate-summarize-multiple-variables-per-group-(e.g.-sum-mean)-1657387764061"},"buildId":"9SrIo1zGFc3tF1E8on9-4","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>