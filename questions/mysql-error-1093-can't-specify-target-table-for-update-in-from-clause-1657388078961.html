<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>MySQL Error 1093 - Can&#x27;t specify target table for update in FROM clause | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I have a table story_category in my database with corrupt entries. The next query returns the corrupt entries:

SELECT * 
FROM  story_category 
WHERE category_id NOT IN (
    SELECT DISTINCT category.id 
    FROM category INNER JOIN 
       story_category ON category_id=category.id);


I tried to delete them executing:

DELETE FROM story_category 
WHERE category_id NOT IN (
    SELECT DISTINCT category.id 
    FROM category 
      INNER JOIN story_category ON category_id=category.id);


But I get the next error: 


  #1093 - You can&#x27;t specify target table &#x27;story_category&#x27; for update in FROM clause 


How can I overcome this?
    "/><meta property="og:title" content="MySQL Error 1093 - Can&#x27;t specify target table for update in FROM clause | Solutions Checker"/><meta property="og:description" content="I have a table story_category in my database with corrupt entries. The next query returns the corrupt entries:

SELECT * 
FROM  story_category 
WHERE category_id NOT IN (
    SELECT DISTINCT category.id 
    FROM category INNER JOIN 
       story_category ON category_id=category.id);


I tried to delete them executing:

DELETE FROM story_category 
WHERE category_id NOT IN (
    SELECT DISTINCT category.id 
    FROM category 
      INNER JOIN story_category ON category_id=category.id);


But I get the next error: 


  #1093 - You can&#x27;t specify target table &#x27;story_category&#x27; for update in FROM clause 


How can I overcome this?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"MySQL Error 1093 - Can&apos;t specify target table for update in FROM clause","text":"I have a table story_category in my database with corrupt entries. The next query returns the corrupt entries:\n\nSELECT * \nFROM  story_category \nWHERE category_id NOT IN (\n    SELECT DISTINCT category.id \n    FROM category INNER JOIN \n       story_category ON category_id=category.id);\n\n\nI tried to delete them executing:\n\nDELETE FROM story_category \nWHERE category_id NOT IN (\n    SELECT DISTINCT category.id \n    FROM category \n      INNER JOIN story_category ON category_id=category.id);\n\n\nBut I get the next error: \n\n\n  #1093 - You can&apos;t specify target table &apos;story_category&apos; for update in FROM clause \n\n\nHow can I overcome this?\n    ","answerCount":16,"upVoteCount":500,"suggestedAnswer":[{"text":"Update: This answer covers the general error classification. For a more specific answer about how to best handle the OP&apos;s exact query, please see other answers to this question\n\nIn MySQL, you can&apos;t modify the same table which you use in the SELECT part.\nThis behaviour is documented at:\nhttp://dev.mysql.com/doc/refman/5.6/en/update.html\n\nMaybe you can just join the table to itself\n\nIf the logic is simple enough to re-shape the query, lose the subquery and join the table to itself, employing appropriate selection criteria. This will cause MySQL to see the table as two different things, allowing destructive changes to go ahead.\n\nUPDATE tbl AS a\nINNER JOIN tbl AS b ON ....\nSET a.col = b.col\n\n\nAlternatively, try nesting the subquery deeper into a from clause ...\n\nIf you absolutely need the subquery, there&apos;s a workaround, but it&apos;s\nugly for several reasons, including performance:\n\nUPDATE tbl SET col = (\n  SELECT ... FROM (SELECT.... FROM) AS x);\n\n\nThe nested subquery in the FROM clause creates an implicit temporary\ntable, so it doesn&apos;t count as the same table you&apos;re updating. \n\n... but watch out for the query optimiser\n\nHowever, beware that from MySQL 5.7.6 and onward, the optimiser may optimise out the subquery, and still give you the error. Luckily, the  optimizer_switch variable can be used to switch off this behaviour; although I couldn&apos;t recommend doing this as anything more than a short term fix, or for small one-off tasks.\n\nSET optimizer_switch = &apos;derived_merge=off&apos;;\n\n\nThanks to Peter V. Mørch for this advice in the comments.\n\nExample technique was from Baron Schwartz, originally published at Nabble, paraphrased and extended here.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"NexusRex provided  a very good solution for deleting with join from the same table.\n\nIf you do this:\n\nDELETE FROM story_category\nWHERE category_id NOT IN (\n        SELECT DISTINCT category.id AS cid FROM category \n        INNER JOIN story_category ON category_id=category.id\n)\n\n\nyou are going to get an error.\n\nBut if you wrap the condition in one more select:\n\nDELETE FROM story_category\nWHERE category_id NOT IN (\n    SELECT cid FROM (\n        SELECT DISTINCT category.id AS cid FROM category \n        INNER JOIN story_category ON category_id=category.id\n    ) AS c\n)\n\n\nit would do the right thing!!\n\nExplanation: The query optimizer does a derived merge optimization for the first query (which causes it to fail with the error), but the second query doesn&apos;t qualify for the derived merge optimization. Hence the optimizer is forced to execute the subquery first.\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Recently i had to update records in the same table i did it like below:\n\nUPDATE skills AS s, (SELECT id  FROM skills WHERE type = &apos;Programming&apos;) AS p\nSET s.type = &apos;Development&apos; \nWHERE s.id = p.id;\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"The inner join in your sub-query is unnecessary.  It looks like you want to delete the entries in story_category where the category_id is not in the category table.\nInstead of that:\nDELETE FROM story_category \nWHERE category_id NOT IN (\n    SELECT DISTINCT category.id \n    FROM category INNER JOIN\n         story_category ON category_id=category.id);\n\nDo this:\nDELETE FROM story_category \nWHERE category_id NOT IN (\n    SELECT DISTINCT category.id \n    FROM category);\n\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"If you can&apos;t do \n\nUPDATE table SET a=value WHERE x IN\n    (SELECT x FROM table WHERE condition);\n\n\nbecause it is the same table, you can trick and do :\n\nUPDATE table SET a=value WHERE x IN\n    (SELECT * FROM (SELECT x FROM table WHERE condition) as t)\n\n\n[update or delete or whatever]\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"DELETE FROM story_category\nWHERE category_id NOT IN (\n    SELECT cid FROM (\n        SELECT DISTINCT category.id AS cid FROM category INNER JOIN story_category ON category_id=category.id\n    ) AS c\n)\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"This is what I did for updating a Priority column value by 1 if it is &gt;=1 in a table and in its WHERE clause using a subquery on same table to make sure that at least one row contains Priority=1 (because that was the condition to be checked while performing update) :\n\n\nUPDATE My_Table\nSET Priority=Priority + 1\nWHERE Priority &gt;= 1\nAND (SELECT TRUE FROM (SELECT * FROM My_Table WHERE Priority=1 LIMIT 1) as t);\n\n\nI know it&apos;s a bit ugly but it does works fine.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"For the specific query the OP is trying to achieve, the ideal and most efficient way to do this is NOT to use a subquery at all.  \n\nHere are the LEFT JOIN versions of the OP&apos;s two queries:\n\nSELECT s.* \nFROM story_category s \nLEFT JOIN category c \nON c.id=s.category_id \nWHERE c.id IS NULL;\n\n\nNote: DELETE s restricts delete operations to the story_category table.Documentation\n\nDELETE s \nFROM story_category s \nLEFT JOIN category c \nON c.id=s.category_id \nWHERE c.id IS NULL;\n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"The simplest way to do this is use a table alias when you are referring parent query table inside the sub query.\n\nExample :\n\ninsert into xxx_tab (trans_id) values ((select max(trans_id)+1 from xxx_tab));\n\n\nChange it to:\n\ninsert into xxx_tab (trans_id) values ((select max(P.trans_id)+1 from xxx_tab P));\n\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"You could insert the desired rows&apos; ids into a temp table and then delete all the rows that are found in that table.\n\nwhich may be what @Cheekysoft meant by doing it in two steps.\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"According to  the Mysql UPDATE Syntax linked by @CheekySoft, it says right at the bottom.\n\n\n  Currently, you cannot update a table and select from the same table in a subquery.\n\n\nI guess you are deleting from store_category while still selecting from it in the union.\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"Try to save result of Select statement in separate variable and then use that for delete query.\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"try this\n\nDELETE FROM story_category \nWHERE category_id NOT IN (\nSELECT DISTINCT category.id \nFROM (SELECT * FROM STORY_CATEGORY) sc;\n\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"If something does not work, when coming thru the front-door, then take the back-door:\n\ndrop table if exists apples;\ncreate table if not exists apples(variety char(10) primary key, price int);\n\ninsert into apples values(&apos;fuji&apos;, 5), (&apos;gala&apos;, 6);\n\ndrop table if exists apples_new;\ncreate table if not exists apples_new like apples;\ninsert into apples_new select * from apples;\n\nupdate apples_new\n    set price = (select price from apples where variety = &apos;gala&apos;)\n    where variety = &apos;fuji&apos;;\nrename table apples to apples_orig;\nrename table apples_new to apples;\ndrop table apples_orig;\n\n\nIt&apos;s fast. The bigger the data, the better.\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"how about this query hope it helps\n\nDELETE FROM story_category LEFT JOIN (SELECT category.id FROM category) cat ON story_category.id = cat.id WHERE cat.id IS NULL\n\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"As far as concerns, you want to delete rows in story_category that do not exist in category.\n\nHere is your original query to identify the rows to delete:\n\nSELECT * \nFROM  story_category \nWHERE category_id NOT IN (\n    SELECT DISTINCT category.id \n    FROM category INNER JOIN \n       story_category ON category_id=category.id\n);\n\n\nCombining NOT IN with a subquery that JOINs the original table seems unecessarily convoluted. This can  be expressed in a more straight-forward manner with not exists and a correlated subquery:\n\nselect sc.*\nfrom story_category sc\nwhere not exists (select 1 from category c where c.id = sc.category_id);\n\n\nNow it is easy to turn this to a delete statement:\n\ndelete from story_category\nwhere not exists (select 1 from category c where c.id = story_category.category_id);    \n\n\nThis quer would run on any MySQL version, as well as in most other databases that I know.\n\nDemo on DB Fiddle:\n\n-- set-up\ncreate table story_category(category_id int);\ncreate table category (id int);\ninsert into story_category values (1), (2), (3), (4), (5);\ninsert into category values (4), (5), (6), (7);\n\n-- your original query to identify offending rows\nSELECT * \nFROM  story_category \nWHERE category_id NOT IN (\n    SELECT DISTINCT category.id \n    FROM category INNER JOIN \n       story_category ON category_id=category.id);\n\n\n| category_id |\n| ----------: |\n|           1 |\n|           2 |\n|           3 |\n\n\n-- a functionally-equivalent, simpler query for this\nselect sc.*\nfrom story_category sc\nwhere not exists (select 1 from category c where c.id = sc.category_id)\n\n\n| category_id |\n| ----------: |\n|           1 |\n|           2 |\n|           3 |\n\n\n-- the delete query\ndelete from story_category\nwhere not exists (select 1 from category c where c.id = story_category.category_id);\n\n-- outcome\nselect * from story_category;\n\n\n| category_id |\n| ----------: |\n|           4 |\n|           5 |\n\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/9fb80f4eb9e2d3c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9fb80f4eb9e2d3c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-88567075f6bc9c6b.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/532-fec3344a80918110.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/817-363561828babdd16.js" defer=""></script><script src="/_next/static/chunks/81-2e45c38dc6fe8298.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-16d8c84aea765d4e.js" defer=""></script><script src="/_next/static/d4czOeg3MGPNUI9SipfjN/_buildManifest.js" defer=""></script><script src="/_next/static/d4czOeg3MGPNUI9SipfjN/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.dlbxiY code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-344134f6-0"]{content:"dlbxiY,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/mysql-error-1093-can&#x27;t-specify-target-table-for-update-in-from-clause-1657388078961#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-344134f6-0 dlbxiY flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/mysql-error-1093-can&#x27;t-specify-target-table-for-update-in-from-clause-1657388078961">MySQL Error 1093 - Can&#x27;t specify target table for update in FROM clause</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/subquery">subquery</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/sql-delete">sql-delete</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/mysql-error-1093">mysql-error-1093</a></div></div><div class="question-content mt-5">
                
<p>I have a table <code>story_category</code> in my database with corrupt entries. The next query returns the corrupt entries:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> 
<span class="hljs-keyword">FROM</span>  story_category 
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> category.id 
    <span class="hljs-keyword">FROM</span> category <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
       story_category <span class="hljs-keyword">ON</span> category_id<span class="hljs-operator">=</span>category.id);
</code></pre>

<p>I tried to delete them executing:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> story_category 
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> category.id 
    <span class="hljs-keyword">FROM</span> category 
      <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> story_category <span class="hljs-keyword">ON</span> category_id<span class="hljs-operator">=</span>category.id);
</code></pre>

<p>But I get the next error: </p>

<blockquote>
  <p>#1093 - You can't specify target table 'story_category' for update in FROM clause </p>
</blockquote>

<p>How can I overcome this?</p>
    </div></div></div><div class="sc-344134f6-2 EUowZ"><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><em>Update: This answer covers the general error classification. For a more specific answer about how to best handle the OP's exact query, please see other answers to this question</em></p>

<p>In MySQL, you can't modify the same table which you use in the SELECT part.<br>
This behaviour is documented at:
<a href="http://dev.mysql.com/doc/refman/5.6/en/update.html" rel="noreferrer">http://dev.mysql.com/doc/refman/5.6/en/update.html</a></p>

<p><strong>Maybe you can just join the table to itself</strong></p>

<p>If the logic is simple enough to re-shape the query, lose the subquery and join the table to itself, employing appropriate selection criteria. This will cause MySQL to see the table as two different things, allowing destructive changes to go ahead.</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">UPDATE</span> tbl <span class="hljs-keyword">AS</span> a
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> tbl <span class="hljs-keyword">AS</span> b <span class="hljs-keyword">ON</span> ....
<span class="hljs-keyword">SET</span> a.col <span class="hljs-operator">=</span> b.col
</code></pre>

<p><strong>Alternatively, try nesting the subquery deeper into a from clause ...</strong></p>

<p>If you absolutely need the subquery, there's a workaround, but it's
ugly for several reasons, including performance:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">UPDATE</span> tbl <span class="hljs-keyword">SET</span> col <span class="hljs-operator">=</span> (
  <span class="hljs-keyword">SELECT</span> ... <span class="hljs-keyword">FROM</span> (SELECT.... <span class="hljs-keyword">FROM</span>) <span class="hljs-keyword">AS</span> x);
</code></pre>

<p>The nested subquery in the FROM clause creates an <em>implicit temporary
table</em>, so it doesn't count as the same table you're updating. </p>

<p><strong>... but watch out for the query optimiser</strong></p>

<p>However, beware that from <a href="http://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-6.html" rel="noreferrer">MySQL 5.7.6</a> and onward, the optimiser may optimise out the subquery, and still give you the error. Luckily, the  <code>optimizer_switch</code> variable can be used to switch off this behaviour; although I couldn't recommend doing this as anything more than a short term fix, or for small one-off tasks.</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">SET</span> optimizer_switch <span class="hljs-operator">=</span> <span class="hljs-string">'derived_merge=off'</span>;
</code></pre>

<p><em>Thanks to <a href="https://stackoverflow.com/users/345716/peter-v-m%C3%B8rch">Peter V. Mørch</a> for this advice in the comments.</em></p>

<p>Example technique was from Baron Schwartz, <a href="http://grokbase.com/t/mysql/mysql/08259dm24b/error-you-cant-specify-target-table-for-update-in-from-clause" rel="noreferrer">originally published at Nabble</a>, paraphrased and extended here.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="https://stackoverflow.com/users/445500/nexusrex">NexusRex</a> provided  a <a href="https://stackoverflow.com/a/8620162/1101589">very good solution</a> for deleting with join from the same table.</p>

<p>If you do this:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> story_category
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> category.id <span class="hljs-keyword">AS</span> cid <span class="hljs-keyword">FROM</span> category 
        <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> story_category <span class="hljs-keyword">ON</span> category_id<span class="hljs-operator">=</span>category.id
)
</code></pre>

<p>you are going to get an error.</p>

<p>But if you wrap the condition in one more select:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> story_category
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> cid <span class="hljs-keyword">FROM</span> (
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> category.id <span class="hljs-keyword">AS</span> cid <span class="hljs-keyword">FROM</span> category 
        <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> story_category <span class="hljs-keyword">ON</span> category_id<span class="hljs-operator">=</span>category.id
    ) <span class="hljs-keyword">AS</span> c
)
</code></pre>

<p>it would do the right thing!!</p>

<p><strong>Explanation:</strong> The query optimizer does a <a href="https://mariadb.com/kb/en/library/derived-table-merge-optimization/" rel="noreferrer"><em>derived merge optimization</em></a> for the first query (which causes it to fail with the error), but the second query doesn't qualify for the <em>derived merge optimization</em>. Hence the optimizer is forced to execute the subquery first.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Recently i had to update records in the same table i did it like below:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">UPDATE</span> skills <span class="hljs-keyword">AS</span> s, (<span class="hljs-keyword">SELECT</span> id  <span class="hljs-keyword">FROM</span> skills <span class="hljs-keyword">WHERE</span> type <span class="hljs-operator">=</span> <span class="hljs-string">'Programming'</span>) <span class="hljs-keyword">AS</span> p
<span class="hljs-keyword">SET</span> s.type <span class="hljs-operator">=</span> <span class="hljs-string">'Development'</span> 
<span class="hljs-keyword">WHERE</span> s.id <span class="hljs-operator">=</span> p.id;
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The <code>inner join</code> in your sub-query is unnecessary.  It looks like you want to delete the entries in <code>story_category</code> where the <code>category_id</code> is not in the <code>category</code> table.</p>
<p>Instead of that:</p>
<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> story_category 
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> category.id 
    <span class="hljs-keyword">FROM</span> category <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
         story_category <span class="hljs-keyword">ON</span> category_id<span class="hljs-operator">=</span>category.id);
</code></pre>
<p>Do this:</p>
<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> story_category 
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> category.id 
    <span class="hljs-keyword">FROM</span> category);
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you can't do </p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">SET</span> a<span class="hljs-operator">=</span><span class="hljs-keyword">value</span> <span class="hljs-keyword">WHERE</span> x <span class="hljs-keyword">IN</span>
    (<span class="hljs-keyword">SELECT</span> x <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>);
</code></pre>

<p>because it is the same table, you can trick and do :</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">SET</span> a<span class="hljs-operator">=</span><span class="hljs-keyword">value</span> <span class="hljs-keyword">WHERE</span> x <span class="hljs-keyword">IN</span>
    (<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> x <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>) <span class="hljs-keyword">as</span> t)
</code></pre>

<p>[update or delete or whatever]</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> story_category
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> cid <span class="hljs-keyword">FROM</span> (
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> category.id <span class="hljs-keyword">AS</span> cid <span class="hljs-keyword">FROM</span> category <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> story_category <span class="hljs-keyword">ON</span> category_id<span class="hljs-operator">=</span>category.id
    ) <span class="hljs-keyword">AS</span> c
)
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is what I did for updating a Priority column value by 1 if it is &gt;=1 in a table and in its WHERE clause using a subquery on same table to make sure that at least one row contains Priority=1 (because that was the condition to be checked while performing update) :</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql">
<span class="hljs-keyword">UPDATE</span> My_Table
<span class="hljs-keyword">SET</span> Priority<span class="hljs-operator">=</span>Priority <span class="hljs-operator">+</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">WHERE</span> Priority <span class="hljs-operator">&gt;=</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">AND</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-literal">TRUE</span> <span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> My_Table <span class="hljs-keyword">WHERE</span> Priority<span class="hljs-operator">=</span><span class="hljs-number">1</span> LIMIT <span class="hljs-number">1</span>) <span class="hljs-keyword">as</span> t);
</code></pre>

<p>I know it's a bit ugly but it does works fine.</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For the specific query the OP is trying to achieve, the ideal and most efficient way to do this is NOT to use a subquery at all.  </p>

<p>Here are the <code>LEFT JOIN</code> versions of the OP's two queries:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> s.<span class="hljs-operator">*</span> 
<span class="hljs-keyword">FROM</span> story_category s 
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> category c 
<span class="hljs-keyword">ON</span> c.id<span class="hljs-operator">=</span>s.category_id 
<span class="hljs-keyword">WHERE</span> c.id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;
</code></pre>

<p>Note: <code>DELETE s</code> restricts delete operations to the <code>story_category</code> table.<br><a href="https://dev.mysql.com/doc/refman/5.7/en/delete.html#idm45469393574032" rel="noreferrer">Documentation</a></p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> s 
<span class="hljs-keyword">FROM</span> story_category s 
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> category c 
<span class="hljs-keyword">ON</span> c.id<span class="hljs-operator">=</span>s.category_id 
<span class="hljs-keyword">WHERE</span> c.id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;
</code></pre>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The simplest way to do this is use a table alias when you are referring parent query table inside the sub query.</p>

<p>Example :</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> xxx_tab (trans_id) <span class="hljs-keyword">values</span> ((<span class="hljs-keyword">select</span> <span class="hljs-built_in">max</span>(trans_id)<span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">from</span> xxx_tab));
</code></pre>

<p>Change it to:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> xxx_tab (trans_id) <span class="hljs-keyword">values</span> ((<span class="hljs-keyword">select</span> <span class="hljs-built_in">max</span>(P.trans_id)<span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">from</span> xxx_tab P));
</code></pre>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You could insert the desired rows' ids into a temp table and then delete all the rows that are found in that table.</p>

<p>which may be what @Cheekysoft meant by doing it in two steps.</p>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>According to <a href="http://dev.mysql.com/doc/refman/5.6/en/update.html" rel="nofollow"> the Mysql UPDATE Syntax</a> linked by @CheekySoft, it says right at the bottom.</p>

<blockquote>
  <p>Currently, you cannot update a table and select from the same table in a subquery.</p>
</blockquote>

<p>I guess you are deleting from store_category while still selecting from it in the union.</p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Try to save result of Select statement in separate variable and then use that for delete query.</p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>try this</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> story_category 
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> category.id 
<span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> STORY_CATEGORY) sc;
</code></pre>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If something does not work, when coming thru the front-door, then take the back-door:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> apples;
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> apples(variety <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">primary</span> key, price <span class="hljs-type">int</span>);

<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> apples <span class="hljs-keyword">values</span>(<span class="hljs-string">'fuji'</span>, <span class="hljs-number">5</span>), (<span class="hljs-string">'gala'</span>, <span class="hljs-number">6</span>);

<span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> apples_new;
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> apples_new <span class="hljs-keyword">like</span> apples;
<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> apples_new <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> apples;

<span class="hljs-keyword">update</span> apples_new
    <span class="hljs-keyword">set</span> price <span class="hljs-operator">=</span> (<span class="hljs-keyword">select</span> price <span class="hljs-keyword">from</span> apples <span class="hljs-keyword">where</span> variety <span class="hljs-operator">=</span> <span class="hljs-string">'gala'</span>)
    <span class="hljs-keyword">where</span> variety <span class="hljs-operator">=</span> <span class="hljs-string">'fuji'</span>;
rename <span class="hljs-keyword">table</span> apples <span class="hljs-keyword">to</span> apples_orig;
rename <span class="hljs-keyword">table</span> apples_new <span class="hljs-keyword">to</span> apples;
<span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> apples_orig;
</code></pre>

<p>It's fast. The bigger the data, the better.</p>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>how about this query hope it helps</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> story_category <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> (<span class="hljs-keyword">SELECT</span> category.id <span class="hljs-keyword">FROM</span> category) cat <span class="hljs-keyword">ON</span> story_category.id <span class="hljs-operator">=</span> cat.id <span class="hljs-keyword">WHERE</span> cat.id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>
</code></pre>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As far as concerns, you want to delete rows in <code>story_category</code> that do not exist in <code>category</code>.</p>

<p>Here is your original query to identify the rows to delete:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> 
<span class="hljs-keyword">FROM</span>  story_category 
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> category.id 
    <span class="hljs-keyword">FROM</span> category <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
       story_category <span class="hljs-keyword">ON</span> category_id<span class="hljs-operator">=</span>category.id
);
</code></pre>

<p>Combining <code>NOT IN</code> with a subquery that <code>JOIN</code>s the original table seems unecessarily convoluted. This can  be expressed in a more straight-forward manner with <code>not exists</code> and a correlated subquery:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">select</span> sc.<span class="hljs-operator">*</span>
<span class="hljs-keyword">from</span> story_category sc
<span class="hljs-keyword">where</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> (<span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> category c <span class="hljs-keyword">where</span> c.id <span class="hljs-operator">=</span> sc.category_id);
</code></pre>

<p>Now it is easy to turn this to a <code>delete</code> statement:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> story_category
<span class="hljs-keyword">where</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> (<span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> category c <span class="hljs-keyword">where</span> c.id <span class="hljs-operator">=</span> story_category.category_id);    
</code></pre>

<p>This quer would run on any MySQL version, as well as in most other databases that I know.</p>

<p><strong><a href="https://dbfiddle.uk/?rdbms=mysql_5.7&amp;fiddle=d73925fbe6a24605b1cf9fe66a94d07c" rel="nofollow noreferrer">Demo on DB Fiddle</a></strong>:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-comment">-- set-up</span>
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> story_category(category_id <span class="hljs-type">int</span>);
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> category (id <span class="hljs-type">int</span>);
<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> story_category <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>), (<span class="hljs-number">2</span>), (<span class="hljs-number">3</span>), (<span class="hljs-number">4</span>), (<span class="hljs-number">5</span>);
<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> category <span class="hljs-keyword">values</span> (<span class="hljs-number">4</span>), (<span class="hljs-number">5</span>), (<span class="hljs-number">6</span>), (<span class="hljs-number">7</span>);

<span class="hljs-comment">-- your original query to identify offending rows</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> 
<span class="hljs-keyword">FROM</span>  story_category 
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> category.id 
    <span class="hljs-keyword">FROM</span> category <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
       story_category <span class="hljs-keyword">ON</span> category_id<span class="hljs-operator">=</span>category.id);
</code></pre>

<pre>| category_id |
| ----------: |
|           1 |
|           2 |
|           3 |
</pre>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-comment">-- a functionally-equivalent, simpler query for this</span>
<span class="hljs-keyword">select</span> sc.<span class="hljs-operator">*</span>
<span class="hljs-keyword">from</span> story_category sc
<span class="hljs-keyword">where</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> (<span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> category c <span class="hljs-keyword">where</span> c.id <span class="hljs-operator">=</span> sc.category_id)
</code></pre>

<pre>| category_id |
| ----------: |
|           1 |
|           2 |
|           3 |
</pre>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-comment">-- the delete query</span>
<span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> story_category
<span class="hljs-keyword">where</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> (<span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> category c <span class="hljs-keyword">where</span> c.id <span class="hljs-operator">=</span> story_category.category_id);

<span class="hljs-comment">-- outcome</span>
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> story_category;
</code></pre>

<pre>| category_id |
| ----------: |
|           4 |
|           5 |
</pre>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Update: This answer covers the general error classification. For a more specific answer about how to best handle the OP\u0026apos;s exact query, please see other answers to this question\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In MySQL, you can\u0026apos;t modify the same table which you use in the SELECT part.\u0026lt;br\u0026gt;\nThis behaviour is documented at:\n\u0026lt;a href=\u0026quot;http://dev.mysql.com/doc/refman/5.6/en/update.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://dev.mysql.com/doc/refman/5.6/en/update.html\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Maybe you can just join the table to itself\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If the logic is simple enough to re-shape the query, lose the subquery and join the table to itself, employing appropriate selection criteria. This will cause MySQL to see the table as two different things, allowing destructive changes to go ahead.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;UPDATE\u0026lt;/span\u0026gt; tbl \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; a\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;INNER\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt; tbl \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; b \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; ....\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SET\u0026lt;/span\u0026gt; a.col \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; b.col\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Alternatively, try nesting the subquery deeper into a from clause ...\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you absolutely need the subquery, there\u0026apos;s a workaround, but it\u0026apos;s\nugly for several reasons, including performance:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;UPDATE\u0026lt;/span\u0026gt; tbl \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SET\u0026lt;/span\u0026gt; col \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; ... \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; (SELECT.... \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; x);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The nested subquery in the FROM clause creates an \u0026lt;em\u0026gt;implicit temporary\ntable\u0026lt;/em\u0026gt;, so it doesn\u0026apos;t count as the same table you\u0026apos;re updating. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;... but watch out for the query optimiser\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;However, beware that from \u0026lt;a href=\u0026quot;http://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-6.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;MySQL 5.7.6\u0026lt;/a\u0026gt; and onward, the optimiser may optimise out the subquery, and still give you the error. Luckily, the  \u0026lt;code\u0026gt;optimizer_switch\u0026lt;/code\u0026gt; variable can be used to switch off this behaviour; although I couldn\u0026apos;t recommend doing this as anything more than a short term fix, or for small one-off tasks.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SET\u0026lt;/span\u0026gt; optimizer_switch \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;derived_merge=off\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Thanks to \u0026lt;a href=\u0026quot;https://stackoverflow.com/users/345716/peter-v-m%C3%B8rch\u0026quot;\u0026gt;Peter V. Mørch\u0026lt;/a\u0026gt; for this advice in the comments.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Example technique was from Baron Schwartz, \u0026lt;a href=\u0026quot;http://grokbase.com/t/mysql/mysql/08259dm24b/error-you-cant-specify-target-table-for-update-in-from-clause\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;originally published at Nabble\u0026lt;/a\u0026gt;, paraphrased and extended here.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/users/445500/nexusrex\u0026quot;\u0026gt;NexusRex\u0026lt;/a\u0026gt; provided  a \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/8620162/1101589\u0026quot;\u0026gt;very good solution\u0026lt;/a\u0026gt; for deleting with join from the same table.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you do this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DELETE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; story_category\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; category_id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NOT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt; (\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DISTINCT\u0026lt;/span\u0026gt; category.id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; cid \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; category \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;INNER\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt; story_category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; category_id\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;category.id\n)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;you are going to get an error.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;But if you wrap the condition in one more select:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DELETE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; story_category\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; category_id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NOT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt; (\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; cid \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; (\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DISTINCT\u0026lt;/span\u0026gt; category.id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; cid \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; category \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;INNER\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt; story_category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; category_id\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;category.id\n    ) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; c\n)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;it would do the right thing!!\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Explanation:\u0026lt;/strong\u0026gt; The query optimizer does a \u0026lt;a href=\u0026quot;https://mariadb.com/kb/en/library/derived-table-merge-optimization/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;em\u0026gt;derived merge optimization\u0026lt;/em\u0026gt;\u0026lt;/a\u0026gt; for the first query (which causes it to fail with the error), but the second query doesn\u0026apos;t qualify for the \u0026lt;em\u0026gt;derived merge optimization\u0026lt;/em\u0026gt;. Hence the optimizer is forced to execute the subquery first.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Recently i had to update records in the same table i did it like below:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;UPDATE\u0026lt;/span\u0026gt; skills \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; s, (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; id  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; skills \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; type \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Programming\u0026apos;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; p\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SET\u0026lt;/span\u0026gt; s.type \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Development\u0026apos;\u0026lt;/span\u0026gt; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; s.id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; p.id;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;inner join\u0026lt;/code\u0026gt; in your sub-query is unnecessary.  It looks like you want to delete the entries in \u0026lt;code\u0026gt;story_category\u0026lt;/code\u0026gt; where the \u0026lt;code\u0026gt;category_id\u0026lt;/code\u0026gt; is not in the \u0026lt;code\u0026gt;category\u0026lt;/code\u0026gt; table.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Instead of that:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DELETE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; story_category \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; category_id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NOT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt; (\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DISTINCT\u0026lt;/span\u0026gt; category.id \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;INNER\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt;\n         story_category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; category_id\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;category.id);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Do this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DELETE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; story_category \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; category_id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NOT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt; (\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DISTINCT\u0026lt;/span\u0026gt; category.id \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; category);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you can\u0026apos;t do \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;UPDATE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SET\u0026lt;/span\u0026gt; a\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt;\n    (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;condition\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;because it is the same table, you can trick and do :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;UPDATE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SET\u0026lt;/span\u0026gt; a\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt;\n    (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;condition\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; t)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;[update or delete or whatever]\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DELETE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; story_category\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; category_id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NOT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt; (\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; cid \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; (\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DISTINCT\u0026lt;/span\u0026gt; category.id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; cid \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;INNER\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt; story_category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; category_id\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;category.id\n    ) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; c\n)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is what I did for updating a Priority column value by 1 if it is \u0026amp;gt;=1 in a table and in its WHERE clause using a subquery on same table to make sure that at least one row contains Priority=1 (because that was the condition to be checked while performing update) :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;UPDATE\u0026lt;/span\u0026gt; My_Table\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SET\u0026lt;/span\u0026gt; Priority\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;Priority \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; Priority \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AND\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; My_Table \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; Priority\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; LIMIT \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; t);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I know it\u0026apos;s a bit ugly but it does works fine.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For the specific query the OP is trying to achieve, the ideal and most efficient way to do this is NOT to use a subquery at all.  \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here are the \u0026lt;code\u0026gt;LEFT JOIN\u0026lt;/code\u0026gt; versions of the OP\u0026apos;s two queries:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; s.\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; story_category s \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;LEFT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt; category c \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; c.id\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;s.category_id \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; c.id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IS\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note: \u0026lt;code\u0026gt;DELETE s\u0026lt;/code\u0026gt; restricts delete operations to the \u0026lt;code\u0026gt;story_category\u0026lt;/code\u0026gt; table.\u0026lt;br\u0026gt;\u0026lt;a href=\u0026quot;https://dev.mysql.com/doc/refman/5.7/en/delete.html#idm45469393574032\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Documentation\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DELETE\u0026lt;/span\u0026gt; s \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; story_category s \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;LEFT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt; category c \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; c.id\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;s.category_id \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; c.id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IS\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The simplest way to do this is use a table alias when you are referring parent query table inside the sub query.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Example :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;insert\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;into\u0026lt;/span\u0026gt; xxx_tab (trans_id) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;values\u0026lt;/span\u0026gt; ((\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;select\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;max\u0026lt;/span\u0026gt;(trans_id)\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; xxx_tab));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Change it to:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;insert\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;into\u0026lt;/span\u0026gt; xxx_tab (trans_id) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;values\u0026lt;/span\u0026gt; ((\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;select\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;max\u0026lt;/span\u0026gt;(P.trans_id)\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; xxx_tab P));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You could insert the desired rows\u0026apos; ids into a temp table and then delete all the rows that are found in that table.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;which may be what @Cheekysoft meant by doing it in two steps.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;According to \u0026lt;a href=\u0026quot;http://dev.mysql.com/doc/refman/5.6/en/update.html\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt; the Mysql UPDATE Syntax\u0026lt;/a\u0026gt; linked by @CheekySoft, it says right at the bottom.\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Currently, you cannot update a table and select from the same table in a subquery.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;I guess you are deleting from store_category while still selecting from it in the union.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Try to save result of Select statement in separate variable and then use that for delete query.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;try this\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DELETE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; story_category \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; category_id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NOT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt; (\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DISTINCT\u0026lt;/span\u0026gt; category.id \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; STORY_CATEGORY) sc;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If something does not work, when coming thru the front-door, then take the back-door:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;drop\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; if \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;exists\u0026lt;/span\u0026gt; apples;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; if \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;exists\u0026lt;/span\u0026gt; apples(variety \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;primary\u0026lt;/span\u0026gt; key, price \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;insert\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;into\u0026lt;/span\u0026gt; apples \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;values\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;fuji\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;), (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;gala\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;drop\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; if \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;exists\u0026lt;/span\u0026gt; apples_new;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; if \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;exists\u0026lt;/span\u0026gt; apples_new \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;like\u0026lt;/span\u0026gt; apples;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;insert\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;into\u0026lt;/span\u0026gt; apples_new \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;select\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; apples;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;update\u0026lt;/span\u0026gt; apples_new\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; price \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;select\u0026lt;/span\u0026gt; price \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; apples \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;where\u0026lt;/span\u0026gt; variety \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;gala\u0026apos;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;where\u0026lt;/span\u0026gt; variety \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;fuji\u0026apos;\u0026lt;/span\u0026gt;;\nrename \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; apples \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;to\u0026lt;/span\u0026gt; apples_orig;\nrename \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; apples_new \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;to\u0026lt;/span\u0026gt; apples;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;drop\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; apples_orig;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It\u0026apos;s fast. The bigger the data, the better.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;how about this query hope it helps\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DELETE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; story_category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;LEFT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; category.id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; category) cat \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; story_category.id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; cat.id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; cat.id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IS\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As far as concerns, you want to delete rows in \u0026lt;code\u0026gt;story_category\u0026lt;/code\u0026gt; that do not exist in \u0026lt;code\u0026gt;category\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here is your original query to identify the rows to delete:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt;  story_category \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; category_id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NOT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt; (\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DISTINCT\u0026lt;/span\u0026gt; category.id \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;INNER\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt; \n       story_category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; category_id\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;category.id\n);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Combining \u0026lt;code\u0026gt;NOT IN\u0026lt;/code\u0026gt; with a subquery that \u0026lt;code\u0026gt;JOIN\u0026lt;/code\u0026gt;s the original table seems unecessarily convoluted. This can  be expressed in a more straight-forward manner with \u0026lt;code\u0026gt;not exists\u0026lt;/code\u0026gt; and a correlated subquery:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;select\u0026lt;/span\u0026gt; sc.\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; story_category sc\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;where\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;exists\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;select\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; category c \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;where\u0026lt;/span\u0026gt; c.id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; sc.category_id);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Now it is easy to turn this to a \u0026lt;code\u0026gt;delete\u0026lt;/code\u0026gt; statement:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; story_category\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;where\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;exists\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;select\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; category c \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;where\u0026lt;/span\u0026gt; c.id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; story_category.category_id);    \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This quer would run on any MySQL version, as well as in most other databases that I know.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://dbfiddle.uk/?rdbms=mysql_5.7\u0026amp;amp;fiddle=d73925fbe6a24605b1cf9fe66a94d07c\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Demo on DB Fiddle\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;-- set-up\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; story_category(category_id \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;table\u0026lt;/span\u0026gt; category (id \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;insert\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;into\u0026lt;/span\u0026gt; story_category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;values\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;), (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;), (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;), (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;), (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;insert\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;into\u0026lt;/span\u0026gt; category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;values\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;), (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;), (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;), (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;-- your original query to identify offending rows\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt;  story_category \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; category_id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NOT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt; (\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DISTINCT\u0026lt;/span\u0026gt; category.id \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;INNER\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt; \n       story_category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; category_id\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;category.id);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;pre\u0026gt;| category_id |\n| ----------: |\n|           1 |\n|           2 |\n|           3 |\n\u0026lt;/pre\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;-- a functionally-equivalent, simpler query for this\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;select\u0026lt;/span\u0026gt; sc.\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; story_category sc\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;where\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;exists\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;select\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; category c \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;where\u0026lt;/span\u0026gt; c.id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; sc.category_id)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;pre\u0026gt;| category_id |\n| ----------: |\n|           1 |\n|           2 |\n|           3 |\n\u0026lt;/pre\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;-- the delete query\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; story_category\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;where\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;exists\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;select\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; category c \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;where\u0026lt;/span\u0026gt; c.id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; story_category.category_id);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;-- outcome\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;select\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; story_category;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;pre\u0026gt;| category_id |\n| ----------: |\n|           4 |\n|           5 |\n\u0026lt;/pre\u0026gt;\n    "],"id":466,"title":"MySQL Error 1093 - Can't specify target table for update in FROM clause","content":"\n                \n\u0026lt;p\u0026gt;I have a table \u0026lt;code\u0026gt;story_category\u0026lt;/code\u0026gt; in my database with corrupt entries. The next query returns the corrupt entries:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;*\u0026lt;/span\u0026gt; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt;  story_category \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; category_id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NOT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt; (\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DISTINCT\u0026lt;/span\u0026gt; category.id \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;INNER\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt; \n       story_category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; category_id\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;category.id);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I tried to delete them executing:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DELETE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; story_category \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;WHERE\u0026lt;/span\u0026gt; category_id \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NOT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;IN\u0026lt;/span\u0026gt; (\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DISTINCT\u0026lt;/span\u0026gt; category.id \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt; category \n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;INNER\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;JOIN\u0026lt;/span\u0026gt; story_category \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ON\u0026lt;/span\u0026gt; category_id\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;category.id);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;But I get the next error: \u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;#1093 - You can\u0026apos;t specify target table \u0026apos;story_category\u0026apos; for update in FROM clause \u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;How can I overcome this?\u0026lt;/p\u0026gt;\n    ","slug":"mysql-error-1093-can't-specify-target-table-for-update-in-from-clause-1657388078961","postType":"QUESTION","createdAt":"2022-07-09T17:34:38.000Z","updatedAt":"2022-07-09T17:34:38.000Z","tags":[{"id":2373,"name":"subquery","slug":"subquery","createdAt":"2022-07-09T17:34:39.000Z","updatedAt":"2022-07-09T17:34:39.000Z","Questions_Tags":{"questionId":466,"tagId":2373}},{"id":2374,"name":"sql-delete","slug":"sql-delete","createdAt":"2022-07-09T17:34:39.000Z","updatedAt":"2022-07-09T17:34:39.000Z","Questions_Tags":{"questionId":466,"tagId":2374}},{"id":2375,"name":"mysql-error-1093","slug":"mysql-error-1093","createdAt":"2022-07-09T17:34:39.000Z","updatedAt":"2022-07-09T17:34:39.000Z","Questions_Tags":{"questionId":466,"tagId":2375}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"mysql-error-1093-can't-specify-target-table-for-update-in-from-clause-1657388078961"},"buildId":"d4czOeg3MGPNUI9SipfjN","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>